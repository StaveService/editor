/*! For license information please see renderer.prod.js.LICENSE.txt */
module.exports=(()=>{var e={59713:e=>{e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.default=e.exports,e.exports.__esModule=!0},50676:(e,t,i)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,{Z:()=>n})},59968:(e,t,i)=>{"use strict";function n(e){if(Array.isArray(e))return e}i.d(t,{Z:()=>n})},63349:(e,t,i)=>{"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,{Z:()=>n})},5991:(e,t,i)=>{"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}i.d(t,{Z:()=>r})},96156:(e,t,i)=>{"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>n})},22122:(e,t,i)=>{"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}i.d(t,{Z:()=>n})},93552:(e,t,i)=>{"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}i.d(t,{Z:()=>r})},96410:(e,t,i)=>{"use strict";function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}i.d(t,{Z:()=>n})},28970:(e,t,i)=>{"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}i.d(t,{Z:()=>n})},81253:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(19756);function r(e,t){if(null==e)return{};var i,r,s=(0,n.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}},19756:(e,t,i)=>{"use strict";function n(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}i.d(t,{Z:()=>n})},28481:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(59968);var r=i(82961),s=i(28970);function o(e,t){return(0,n.Z)(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s=[],o=!0,a=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return s}}(e,t)||(0,r.Z)(e,t)||(0,s.Z)()}},85061:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(50676);var r=i(96410),s=i(82961);function o(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||(0,r.Z)(e)||(0,s.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},90484:(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.d(t,{Z:()=>n})},82961:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(50676);function r(e,t){if(e){if("string"==typeof e)return(0,n.Z)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,n.Z)(e,t):void 0}}},67154:e=>{function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},85354:(e,t,i)=>{var n=i(99489);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},20862:(e,t,i)=>{var n=i(50008).default;function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(r=function(e){return e?i:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=r(t);if(i&&i.has(e))return i.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(s,a,l):s[a]=e[a]}return s.default=e,i&&i.set(e,s),s},e.exports.default=e.exports,e.exports.__esModule=!0},99489:e=>{function t(i,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(i,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},50008:e=>{function t(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},81157:function(e,t){!function(e){"use strict";var t,i,n,r,s,o,a,l,c,h,u,d,f,p,g,m,b,v,y,_,w,S,C,x,k,E,T,L,N,M,O,D,I,A,P,R,B,F,W,V,z,H,j,U,G,K,$,q,Z,Y,X,Q,J,ee,te,ie,ne,re,se,oe,ae,le,ce;(t=e.AlphaTabErrorType||(e.AlphaTabErrorType={}))[t.General=0]="General",t[t.Format=1]="Format",t[t.AlphaTex=2]="AlphaTex";class he extends Error{constructor(e,t,i){super(t),this.type=e,this.inner=null!=i?i:null,Object.setPrototypeOf(this,he.prototype)}}class ue extends he{constructor(t){super(e.AlphaTabErrorType.Format,t),Object.setPrototypeOf(this,ue.prototype)}}class de{static getValue(e){return de._values||(de._values=new Map),e=e.toLowerCase().split(" ").join(""),de._values.has(e)?de._values.get(e):0}static isPiano(e){return e<=7||e>=16&&e<=23}static isGuitar(e){return e>=24&&e<=39||105===e||43===e}}de._values=new Map([["acousticgrandpiano",0],["brightacousticpiano",1],["electricgrandpiano",2],["honkytonkpiano",3],["electricpiano1",4],["electricpiano2",5],["harpsichord",6],["clavinet",7],["celesta",8],["glockenspiel",9],["musicbox",10],["vibraphone",11],["marimba",12],["xylophone",13],["tubularbells",14],["dulcimer",15],["drawbarorgan",16],["percussiveorgan",17],["rockorgan",18],["churchorgan",19],["reedorgan",20],["accordion",21],["harmonica",22],["tangoaccordion",23],["acousticguitarnylon",24],["acousticguitarsteel",25],["electricguitarjazz",26],["electricguitarclean",27],["electricguitarmuted",28],["overdrivenguitar",29],["distortionguitar",30],["guitarharmonics",31],["acousticbass",32],["electricbassfinger",33],["electricbasspick",34],["fretlessbass",35],["slapbass1",36],["slapbass2",37],["synthbass1",38],["synthbass2",39],["violin",40],["viola",41],["cello",42],["contrabass",43],["tremolostrings",44],["pizzicatostrings",45],["orchestralharp",46],["timpani",47],["stringensemble1",48],["stringensemble2",49],["synthstrings1",50],["synthstrings2",51],["choiraahs",52],["voiceoohs",53],["synthvoice",54],["orchestrahit",55],["trumpet",56],["trombone",57],["tuba",58],["mutedtrumpet",59],["frenchhorn",60],["brasssection",61],["synthbrass1",62],["synthbrass2",63],["sopranosax",64],["altosax",65],["tenorsax",66],["baritonesax",67],["oboe",68],["englishhorn",69],["bassoon",70],["clarinet",71],["piccolo",72],["flute",73],["recorder",74],["panflute",75],["blownbottle",76],["shakuhachi",77],["whistle",78],["ocarina",79],["lead1square",80],["lead2sawtooth",81],["lead3calliope",82],["lead4chiff",83],["lead5charang",84],["lead6voice",85],["lead7fifths",86],["lead8bassandlead",87],["pad1newage",88],["pad2warm",89],["pad3polysynth",90],["pad4choir",91],["pad5bowed",92],["pad6metallic",93],["pad7halo",94],["pad8sweep",95],["fx1rain",96],["fx2soundtrack",97],["fx3crystal",98],["fx4atmosphere",99],["fx5brightness",100],["fx6goblins",101],["fx7echoes",102],["fx8scifi",103],["sitar",104],["banjo",105],["shamisen",106],["koto",107],["kalimba",108],["bagpipe",109],["fiddle",110],["shanai",111],["tinklebell",112],["agogo",113],["steeldrums",114],["woodblock",115],["taikodrum",116],["melodictom",117],["synthdrum",118],["reversecymbal",119],["guitarfretnoise",120],["breathnoise",121],["seashore",122],["birdtweet",123],["telephonering",124],["helicopter",125],["applause",126],["gunshot",127]]),function(e){e[e.Unknown=-2]="Unknown",e[e.NoOrDead=-1]="NoOrDead",e[e.Thumb=0]="Thumb",e[e.IndexFinger=1]="IndexFinger",e[e.MiddleFinger=2]="MiddleFinger",e[e.AnnularFinger=3]="AnnularFinger",e[e.LittleFinger=4]="LittleFinger"}(i||(i={})),(se=e.TabRhythmMode||(e.TabRhythmMode={}))[se.Hidden=0]="Hidden",se[se.ShowWithBeams=1]="ShowWithBeams",se[se.ShowWithBars=2]="ShowWithBars",(re=e.FingeringMode||(e.FingeringMode={}))[re.ScoreDefault=0]="ScoreDefault",re[re.ScoreForcePiano=1]="ScoreForcePiano",re[re.SingleNoteEffectBand=2]="SingleNoteEffectBand",re[re.SingleNoteEffectBandForcePiano=3]="SingleNoteEffectBandForcePiano",(ne=e.NotationMode||(e.NotationMode={}))[ne.GuitarPro=0]="GuitarPro",ne[ne.SongBook=1]="SongBook",function(e){e[e.ScoreTitle=0]="ScoreTitle",e[e.ScoreSubTitle=1]="ScoreSubTitle",e[e.ScoreArtist=2]="ScoreArtist",e[e.ScoreAlbum=3]="ScoreAlbum",e[e.ScoreWords=4]="ScoreWords",e[e.ScoreMusic=5]="ScoreMusic",e[e.ScoreWordsAndMusic=6]="ScoreWordsAndMusic",e[e.ScoreCopyright=7]="ScoreCopyright",e[e.GuitarTuning=8]="GuitarTuning",e[e.TrackNames=9]="TrackNames",e[e.ChordDiagrams=10]="ChordDiagrams",e[e.ParenthesisOnTiedBends=11]="ParenthesisOnTiedBends",e[e.TabNotesOnTiedBends=12]="TabNotesOnTiedBends",e[e.ZerosOnDiveWhammys=13]="ZerosOnDiveWhammys",e[e.EffectAlternateEndings=14]="EffectAlternateEndings",e[e.EffectCapo=15]="EffectCapo",e[e.EffectChordNames=16]="EffectChordNames",e[e.EffectCrescendo=17]="EffectCrescendo",e[e.EffectDynamics=18]="EffectDynamics",e[e.EffectFadeIn=19]="EffectFadeIn",e[e.EffectFermata=20]="EffectFermata",e[e.EffectFingering=21]="EffectFingering",e[e.EffectHarmonics=22]="EffectHarmonics",e[e.EffectLetRing=23]="EffectLetRing",e[e.EffectLyrics=24]="EffectLyrics",e[e.EffectMarker=25]="EffectMarker",e[e.EffectOttavia=26]="EffectOttavia",e[e.EffectPalmMute=27]="EffectPalmMute",e[e.EffectPickSlide=28]="EffectPickSlide",e[e.EffectPickStroke=29]="EffectPickStroke",e[e.EffectSlightBeatVibrato=30]="EffectSlightBeatVibrato",e[e.EffectSlightNoteVibrato=31]="EffectSlightNoteVibrato",e[e.EffectTap=32]="EffectTap",e[e.EffectTempo=33]="EffectTempo",e[e.EffectText=34]="EffectText",e[e.EffectTrill=35]="EffectTrill",e[e.EffectTripletFeel=36]="EffectTripletFeel",e[e.EffectWhammyBar=37]="EffectWhammyBar",e[e.EffectWideBeatVibrato=38]="EffectWideBeatVibrato",e[e.EffectWideNoteVibrato=39]="EffectWideNoteVibrato",e[e.EffectLeftHandTap=40]="EffectLeftHandTap"}(n||(n={}));class fe{constructor(){this.notationMode=e.NotationMode.GuitarPro,this.fingeringMode=e.FingeringMode.ScoreDefault,this.elements=new Map,this.rhythmMode=e.TabRhythmMode.Hidden,this.rhythmHeight=15,this.transpositionPitches=[],this.displayTranspositionPitches=[],this.smallGraceTabNotes=!0,this.extendBendArrowsOnTiedNotes=!0,this.extendLineEffectsToBeatEnd=!1,this.slurHeight=5}isNotationElementVisible(e){return this.elements.has(e)?this.elements.get(e):!fe.defaultElements.has(e)||fe.defaultElements.get(e)}}fe.defaultElements=new Map([[n.ZerosOnDiveWhammys,!1]]);class pe{constructor(){this.note=null,this.noteValue=0,this.octave=0}get realValue(){return 12*this.octave+this.noteValue}}class ge{static getIndex(e){return e<0?0:0|Math.log2(e)}static keySignatureIsFlat(e){return e<0}static keySignatureIsNatural(e){return 0===e}static keySignatureIsSharp(e){return e>0}static applyPitchOffsets(e,t){for(let i=0;i<t.tracks.length;i++){if(i<e.notation.displayTranspositionPitches.length)for(let n of t.tracks[i].staves)n.displayTranspositionPitch=-e.notation.displayTranspositionPitches[i];if(i<e.notation.transpositionPitches.length)for(let n of t.tracks[i].staves)n.transpositionPitch=-e.notation.transpositionPitches[i]}}static fingerToString(t,n,r,s){if(t.notation.fingeringMode===e.FingeringMode.ScoreForcePiano||t.notation.fingeringMode===e.FingeringMode.SingleNoteEffectBandForcePiano||de.isPiano(n.voice.bar.staff.track.playbackInfo.program))switch(r){case i.Unknown:case i.NoOrDead:return null;case i.Thumb:return"1";case i.IndexFinger:return"2";case i.MiddleFinger:return"3";case i.AnnularFinger:return"4";case i.LittleFinger:return"5";default:return null}if(s)switch(r){case i.Unknown:case i.NoOrDead:return"0";case i.Thumb:return"T";case i.IndexFinger:return"1";case i.MiddleFinger:return"2";case i.AnnularFinger:return"3";case i.LittleFinger:return"4";default:return null}switch(r){case i.Unknown:case i.NoOrDead:return null;case i.Thumb:return"p";case i.IndexFinger:return"i";case i.MiddleFinger:return"m";case i.AnnularFinger:return"a";case i.LittleFinger:return"c";default:return null}}static isTuning(e){return!!ge.parseTuning(e)}static parseTuning(e){let t="",i="";for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r>=48&&r<=57){if(!t)return null;i+=String.fromCharCode(r)}else{if(!(r>=65&&r<=90||r>=97&&r<=122||35===r))return null;t+=String.fromCharCode(r)}}if(!i||!t)return null;let n=new pe;return n.octave=parseInt(i)+1,n.note=t.toLowerCase(),n.noteValue=ge.getToneForText(n.note),n}static getTuningForText(e){let t=ge.parseTuning(e);return t?t.realValue:-1}static getToneForText(e){let t=0;switch(e.toLowerCase()){case"c":t=0;break;case"c#":case"db":t=1;break;case"d":t=2;break;case"d#":case"eb":t=3;break;case"e":t=4;break;case"f":t=5;break;case"f#":case"gb":t=6;break;case"g":t=7;break;case"g#":case"ab":t=8;break;case"a":t=9;break;case"a#":case"bb":t=10;break;case"b":t=11;break;default:return 0}return t}static newGuid(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}static isAlmostEqualTo(e,t){return Math.abs(e-t)<1e-5}static toHexString(e,t=0){let i="",n="0123456789ABCDEF";do{i=String.fromCharCode(n.charCodeAt(15&e))+i,e>>=4}while(e>0);for(;i.length<t;)i="0"+i;return i}}class me{constructor(e,t,i,n=255){this.raw=0,this.raw=0,this.raw=(255&n)<<24|(255&e)<<16|(255&t)<<8|255&i,this.updateRgba()}updateRgba(){255===this.a?this.rgba="#"+ge.toHexString(this.r,2)+ge.toHexString(this.g,2)+ge.toHexString(this.b,2):this.rgba=`rgba(${this.r},${this.g},${this.b},${this.a/255})`}get a(){return this.raw>>24&255}get r(){return this.raw>>16&255}get g(){return this.raw>>8&255}get b(){return 255&this.raw}static random(e=100){return new me(255*Math.random()|0,255*Math.random()|0,255*Math.random()|0,e)}static fromJson(e){switch(typeof e){case"number":{const t=new me(0,0,0,0);return t.raw=e,t.updateRgba(),t}case"string":{const t=e;if(t.startsWith("#")){if(4===t.length)return new me(17*parseInt(t.substring(1,1),16),17*parseInt(t.substring(2,1),16),17*parseInt(t.substring(3,1),16));if(5===t.length)return new me(17*parseInt(t.substring(1,1),16),17*parseInt(t.substring(2,1),16),17*parseInt(t.substring(3,1),16),17*parseInt(t.substring(4,1),16));if(7===t.length)return new me(parseInt(t.substring(1,2),16),parseInt(t.substring(3,2),16),parseInt(t.substring(5,2),16));if(9===t.length)return new me(parseInt(t.substring(1,2),16),parseInt(t.substring(3,2),16),parseInt(t.substring(5,2),16),parseInt(t.substring(7,2),16))}else if(t.startsWith("rgba")||t.startsWith("rgb")){const e=t.indexOf("("),i=t.lastIndexOf(")");if(-1===e||-1===i)throw new ue("No values specified for rgb/rgba function");const n=t.substring(e+1,i-e-1).split(",");if(3===n.length)return new me(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]));if(4===n.length)return new me(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),255*parseFloat(n[3]))}return null}}throw new ue("Unsupported format for color")}static toJson(e){return e.raw}}me.BlackRgb="#000000";class be{static parseEnum(t,i){switch(typeof t){case"string":const e=parseInt(t);return isNaN(e)?i[Object.keys(i).find((e=>e.toLowerCase()===t.toLowerCase()))]:e;case"number":return t;case"undefined":case"object":return null}throw new he(e.AlphaTabErrorType.Format,`Could not parse enum value '${t}'`)}static forEach(e,t){if(e instanceof Map)e.forEach(t);else if("object"==typeof e)for(const i in e)t(e[i],i)}}class ve{constructor(e,t,i){this.text=e,this.startPos=t,this.endPos=i}}class ye{constructor(e){this.style="normal",this.variant="normal",this.weight="normal",this.stretch="normal",this.lineHeight="normal",this.size="1rem",this.families=[],this._currentTokenIndex=-1,this._input="",this._currentToken=null,this._input=e,this._tokens=this.splitToTokens(e)}splitToTokens(e){const t=[];let i=0;for(;i<e.length;){let n=i;for(;n<e.length&&" "!==e.charAt(n);)n++;n>i&&t.push(new ve(e.substring(i,n),i,n)),i=n+1}return t}parse(){var e;if(this.reset(),1===this._tokens.length)switch(null===(e=this._currentToken)||void 0===e?void 0:e.text){case"caption":case"icon":case"menu":case"message-box":case"small-caption":case"status-bar":case"inherit":return}this.fontStyleVariantWeight(),this.fontSizeLineHeight(),this.fontFamily()}fontFamily(){if(!this._currentToken)throw new Error("Missing font list");const e=this._input.substr(this._currentToken.startPos).trim();let t=0;for(;t<e.length;){let i=e.charAt(t);if(" "===i||","==i)t++;else if('"'===i||"'"===i){const n=this.findEndOfQuote(e,t+1,i);this.families.push(e.substring(t+1,n).split("\\"+i).join(i)),t=n+1}else{const i=this.findEndOfQuote(e,t+1,",");this.families.push(e.substring(t,i).trim()),t=i+1}}}findEndOfQuote(e,t,i){let n=!1;for(;t<e.length;){const r=e.charAt(t);if(!n&&r===i)return t;n=!n&&"\\"===r,t++}return e.length}fontSizeLineHeight(){var e;if(!this._currentToken)throw new Error("Missing font size");const t=this._currentToken.text.split("/");if(t.length>=3)throw new Error(`Invalid font size '${this._currentToken}' specified`);if(this.nextToken(),t.length>=2)if("/"===t[1]){if(!this._currentToken)throw new Error("Missing line-height after font size");this.lineHeight=this._currentToken.text,this.nextToken()}else this.size=t[0],this.lineHeight=t[1];else{if(!(t.length>=1))throw new Error("Missing font size");if(this.size=t[0],0===(null===(e=this._currentToken)||void 0===e?void 0:e.text.indexOf("/")))if("/"===this._currentToken.text){if(this.nextToken(),!this._currentToken)throw new Error("Missing line-height after font size");this.lineHeight=this._currentToken.text,this.nextToken()}else this.lineHeight=this._currentToken.text.substr(1),this.nextToken()}}nextToken(){this._currentTokenIndex++,this._currentTokenIndex<this._tokens.length?this._currentToken=this._tokens[this._currentTokenIndex]:this._currentToken=null}fontStyleVariantWeight(){var e,t,i,n,r;let s=!1,o=!1,a=!1,l=3,c=[];for(;;){switch(null===(e=this._currentToken)||void 0===e?void 0:e.text){case"normal":case"inherit":c.push(null===(t=this._currentToken)||void 0===t?void 0:t.text),l--,this.nextToken();break;case"italic":case"oblique":this.style=null===(i=this._currentToken)||void 0===i?void 0:i.text,s=!0,l--,this.nextToken();break;case"small-caps":this.variant=null===(n=this._currentToken)||void 0===n?void 0:n.text,o=!0,l--,this.nextToken();break;case"bold":case"bolder":case"lighter":case"100":case"200":case"300":case"400":case"500":case"600":case"700":case"800":case"900":this.weight=null===(r=this._currentToken)||void 0===r?void 0:r.text,a=!0,l--,this.nextToken();break;default:return}if(0===l)break}for(;c.length>0;){const e=c.pop();a?o?s||(this.style=e):this.variant=e:this.weight=e}}reset(){this._currentTokenIndex=-1,this.nextToken()}}!function(e){e[e.Plain=0]="Plain",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic"}(r||(r={}));class _e{constructor(e,t,i=r.Plain){this._cssScale=0,this.family=e,this.size=t,this.style=i,this._css=this.toCssString(1)}get isBold(){return 0!=(this.style&r.Bold)}get isItalic(){return 0!=(this.style&r.Italic)}toCssString(e){if(!(this._css&&Math.abs(e-this._cssScale)<.01)){let t="";this.isBold&&(t+="bold "),this.isItalic&&(t+="italic "),t+=this.size*e,t+="px ",t+="'",t+=this.family,t+="'",this._css=t,this._cssScale=e}return this._css}static fromJson(e){switch(typeof e){case"undefined":return null;case"object":{const t=e;let i=t.get("family"),n=t.get("size"),s=be.parseEnum(t.get("style"),r);return new _e(i,n,s)}case"string":{const t=new ye(e);t.parse();let i=t.families[0];(i.startsWith("'")&&i.endsWith("'")||i.startsWith('"')&&i.endsWith('"'))&&(i=i.substr(1,i.length-2));let n=t.size.toLowerCase(),s=0;switch(n){case"xx-small":s=7;break;case"x-small":s=10;break;case"small":case"smaller":s=13;break;case"medium":s=16;break;case"large":case"larger":s=18;break;case"x-large":s=24;break;case"xx-large":s=32;break;default:try{s=n.endsWith("em")?16*parseFloat(n.substr(0,n.length-2)):n.endsWith("pt")?16*parseFloat(n.substr(0,n.length-2))/12:n.endsWith("px")?parseFloat(n.substr(0,n.length-2)):12}catch(e){s=12}}let o=r.Plain;switch("italic"===t.style&&(o|=r.Italic),t.weight.toLowerCase()){case"normal":case"lighter":break;default:o|=r.Bold}return new _e(i,s,o)}default:return null}}static toJson(e){const t=new Map;return t.set("family",e.family),t.set("size",e.size),t.set("style",e.style),t}}class we{constructor(){this.copyrightFont=new _e(we.sansFont,12,r.Bold),this.titleFont=new _e(we.serifFont,32,r.Plain),this.subTitleFont=new _e(we.serifFont,20,r.Plain),this.wordsFont=new _e(we.serifFont,15,r.Plain),this.effectFont=new _e(we.serifFont,12,r.Italic),this.fretboardNumberFont=new _e(we.sansFont,11,r.Plain),this.tablatureFont=new _e(we.sansFont,13,r.Plain),this.graceFont=new _e(we.sansFont,11,r.Plain),this.staffLineColor=new me(165,165,165,255),this.barSeparatorColor=new me(34,34,17,255),this.barNumberFont=new _e(we.sansFont,11,r.Plain),this.barNumberColor=new me(200,0,0,255),this.fingeringFont=new _e(we.serifFont,14,r.Plain),this.markerFont=new _e(we.serifFont,14,r.Bold),this.mainGlyphColor=new me(0,0,0,255),this.secondaryGlyphColor=new me(0,0,0,100),this.scoreInfoColor=new me(0,0,0,255)}}we.sansFont="Arial",we.serifFont="Georgia",(ae=e.StaveProfile||(e.StaveProfile={}))[ae.Default=0]="Default",ae[ae.ScoreTab=1]="ScoreTab",ae[ae.Score=2]="Score",ae[ae.Tab=3]="Tab",ae[ae.TabMixed=4]="TabMixed",(oe=e.LayoutMode||(e.LayoutMode={}))[oe.Page=0]="Page",oe[oe.Horizontal=1]="Horizontal";class Se{constructor(){this.scale=1,this.stretchForce=1,this.layoutMode=e.LayoutMode.Page,this.staveProfile=e.StaveProfile.Default,this.barsPerRow=-1,this.startBar=1,this.barCount=-1,this.barCountPerPartial=10,this.resources=new we,this.padding=null}}class Ce{init(e,t){this.data=e,this.settings=t}}class xe extends he{constructor(t="Unsupported format",i=null){super(e.AlphaTabErrorType.Format,t),this.inner=i,Object.setPrototypeOf(this,xe.prototype)}}(function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Heavy=2]="Heavy"})(s||(s={})),function(e){e[e.Tempo=0]="Tempo",e[e.Volume=1]="Volume",e[e.Instrument=2]="Instrument",e[e.Balance=3]="Balance"}(o||(o={}));class ke{constructor(){this.isLinear=!1,this.type=o.Tempo,this.value=0,this.ratioPosition=0,this.text=""}static buildTempoAutomation(e,t,i,n){(n<1||n>5)&&(n=2);let r=new Float32Array([1,.5,1,1.5,2,3]),s=new ke;return s.type=o.Tempo,s.isLinear=e,s.ratioPosition=t,s.value=i*r[n],s}static buildInstrumentAutomation(e,t,i){let n=new ke;return n.type=o.Instrument,n.isLinear=e,n.ratioPosition=t,n.value=i,n}}(function(e){e[e.Neutral=0]="Neutral",e[e.C3=1]="C3",e[e.C4=2]="C4",e[e.F4=3]="F4",e[e.G2=4]="G2"})(a||(a={})),function(e){e[e._15ma=0]="_15ma",e[e._8va=1]="_8va",e[e.Regular=2]="Regular",e[e._8vb=3]="_8vb",e[e._15mb=4]="_15mb"}(l||(l={})),function(e){e[e.None=0]="None",e[e.Simple=1]="Simple",e[e.FirstOfDouble=2]="FirstOfDouble",e[e.SecondOfDouble=3]="SecondOfDouble"}(c||(c={}));class Ee{constructor(){this.id=Ee._globalBarId++,this.index=0,this.nextBar=null,this.previousBar=null,this.clef=a.G2,this.clefOttava=l.Regular,this.voices=[],this.simileMark=c.None,this.isMultiVoice=!1}get masterBar(){return this.staff.track.score.masterBars[this.index]}get isEmpty(){for(let e=0,t=this.voices.length;e<t;e++)if(!this.voices[e].isEmpty)return!1;return!0}addVoice(e){e.bar=this,e.index=this.voices.length,this.voices.push(e)}finish(e){this.isMultiVoice=!1;for(let t=0,i=this.voices.length;t<i;t++){let i=this.voices[t];i.finish(e),t>0&&!i.isEmpty&&(this.isMultiVoice=!0)}}calculateDuration(){let e=0;for(let t of this.voices){let i=t.calculateDuration();i>e&&(e=i)}return e}}Ee._globalBarId=0;class Te{static ticksToMillis(e,t){return e*(6e4/(t*Te.QuarterTime))|0}static millisToTicks(e,t){return e/(6e4/(t*Te.QuarterTime))|0}static toTicks(e){return Te.valueToTicks(e)}static valueToTicks(e){let t=e;return t<0&&(t=1/-t),Te.QuarterTime*(4/t)|0}static applyDot(e,t){return t?e+3*(e/4|0):e+(e/2|0)}static applyTuplet(e,t,i){return e*i/t|0}static removeTuplet(e,t,i){return e*t/i|0}static dynamicToVelocity(e){return Te.MinVelocity+e*Te.VelocityIncrement}}Te.QuarterTime=960,Te.MinVelocity=15,Te.VelocityIncrement=16;class Le{constructor(e=0,t=0){this.offset=e,this.value=t}}Le.MaxPosition=60,Le.MaxValue=12,function(e){e[e.Default=0]="Default",e[e.Gradual=1]="Gradual",e[e.Fast=2]="Fast"}(h||(h={})),function(e){e[e.None=0]="None",e[e.Custom=1]="Custom",e[e.Bend=2]="Bend",e[e.Release=3]="Release",e[e.BendRelease=4]="BendRelease",e[e.Hold=5]="Hold",e[e.Prebend=6]="Prebend",e[e.PrebendBend=7]="PrebendBend",e[e.PrebendRelease=8]="PrebendRelease"}(u||(u={})),function(e){e[e.None=0]="None",e[e.BrushUp=1]="BrushUp",e[e.BrushDown=2]="BrushDown",e[e.ArpeggioUp=3]="ArpeggioUp",e[e.ArpeggioDown=4]="ArpeggioDown"}(d||(d={})),function(e){e[e.None=0]="None",e[e.Crescendo=1]="Crescendo",e[e.Decrescendo=2]="Decrescendo"}(f||(f={})),function(e){e[e.QuadrupleWhole=-4]="QuadrupleWhole",e[e.DoubleWhole=-2]="DoubleWhole",e[e.Whole=1]="Whole",e[e.Half=2]="Half",e[e.Quarter=4]="Quarter",e[e.Eighth=8]="Eighth",e[e.Sixteenth=16]="Sixteenth",e[e.ThirtySecond=32]="ThirtySecond",e[e.SixtyFourth=64]="SixtyFourth",e[e.OneHundredTwentyEighth=128]="OneHundredTwentyEighth",e[e.TwoHundredFiftySixth=256]="TwoHundredFiftySixth"}(p||(p={})),function(e){e[e.PPP=0]="PPP",e[e.PP=1]="PP",e[e.P=2]="P",e[e.MP=3]="MP",e[e.MF=4]="MF",e[e.F=5]="F",e[e.FF=6]="FF",e[e.FFF=7]="FFF"}(g||(g={})),function(e){e[e.None=0]="None",e[e.OnBeat=1]="OnBeat",e[e.BeforeBeat=2]="BeforeBeat",e[e.BendGrace=3]="BendGrace"}(m||(m={})),function(e){e[e.None=0]="None",e[e.Natural=1]="Natural",e[e.Artificial=2]="Artificial",e[e.Pinch=3]="Pinch",e[e.Tap=4]="Tap",e[e.Semi=5]="Semi",e[e.Feedback=6]="Feedback"}(b||(b={})),function(e){e[e.Default=0]="Default",e[e.ForceNone=1]="ForceNone",e[e.ForceNatural=2]="ForceNatural",e[e.ForceSharp=3]="ForceSharp",e[e.ForceDoubleSharp=4]="ForceDoubleSharp",e[e.ForceFlat=5]="ForceFlat",e[e.ForceDoubleFlat=6]="ForceDoubleFlat"}(v||(v={})),function(e){e[e.None=0]="None",e[e.IntoFromBelow=1]="IntoFromBelow",e[e.IntoFromAbove=2]="IntoFromAbove"}(y||(y={})),function(e){e[e.None=0]="None",e[e.Shift=1]="Shift",e[e.Legato=2]="Legato",e[e.OutUp=3]="OutUp",e[e.OutDown=4]="OutDown",e[e.PickSlideDown=5]="PickSlideDown",e[e.PickSlideUp=6]="PickSlideUp"}(_||(_={})),function(e){e[e.None=0]="None",e[e.Slight=1]="Slight",e[e.Wide=2]="Wide"}(w||(w={}));class Ne{constructor(e){this._value=void 0,this._factory=e}get value(){return void 0===this._value&&(this._value=this._factory()),this._value}}(le=e.LogLevel||(e.LogLevel={}))[le.None=0]="None",le[le.Debug=1]="Debug",le[le.Info=2]="Info",le[le.Warning=3]="Warning",le[le.Error=4]="Error";class Me{static format(e,t){return`[AlphaTab][${e}] ${t}`}debug(e,t,...i){console.debug(Me.format(e,t),...i)}warning(e,t,...i){console.warn(Me.format(e,t),...i)}info(e,t,...i){console.info(Me.format(e,t),...i)}error(e,t,...i){console.error(Me.format(e,t),...i)}}Me.logLevel=e.LogLevel.Info;class Oe{static shouldLog(t){return Oe.logLevel!==e.LogLevel.None&&t>=Oe.logLevel}static debug(t,i,...n){Oe.shouldLog(e.LogLevel.Debug)&&Oe.log.debug(t,i,...n)}static warning(t,i,...n){Oe.shouldLog(e.LogLevel.Warning)&&Oe.log.warning(t,i,...n)}static info(t,i,...n){Oe.shouldLog(e.LogLevel.Info)&&Oe.log.info(t,i,...n)}static error(t,i,...n){Oe.shouldLog(e.LogLevel.Error)&&Oe.log.error(t,i,...n)}}Oe.logLevel=e.LogLevel.Info,Oe.log=new Me,function(e){e[e.None=0]="None",e[e.Up=1]="Up",e[e.Down=2]="Down"}(S||(S={})),function(e){e[e.None=-1]="None",e[e.GClef=57424]="GClef",e[e.CClef=57436]="CClef",e[e.FClef=57442]="FClef",e[e.UnpitchedPercussionClef1=57449]="UnpitchedPercussionClef1",e[e.SixStringTabClef=57453]="SixStringTabClef",e[e.FourStringTabClef=57454]="FourStringTabClef",e[e.TimeSig0=57472]="TimeSig0",e[e.TimeSig1=57473]="TimeSig1",e[e.TimeSig2=57474]="TimeSig2",e[e.TimeSig3=57475]="TimeSig3",e[e.TimeSig4=57476]="TimeSig4",e[e.TimeSig5=57477]="TimeSig5",e[e.TimeSig6=57478]="TimeSig6",e[e.TimeSig7=57479]="TimeSig7",e[e.TimeSig8=57480]="TimeSig8",e[e.TimeSig9=57481]="TimeSig9",e[e.TimeSigCommon=57482]="TimeSigCommon",e[e.TimeSigCutCommon=57483]="TimeSigCutCommon",e[e.NoteheadDoubleWholeSquare=57505]="NoteheadDoubleWholeSquare",e[e.NoteheadDoubleWhole=57504]="NoteheadDoubleWhole",e[e.NoteheadWhole=57506]="NoteheadWhole",e[e.NoteheadHalf=57507]="NoteheadHalf",e[e.NoteheadBlack=57508]="NoteheadBlack",e[e.NoteheadNull=57509]="NoteheadNull",e[e.NoteheadXOrnate=57514]="NoteheadXOrnate",e[e.NoteheadTriangleUpWhole=57531]="NoteheadTriangleUpWhole",e[e.NoteheadTriangleUpHalf=57532]="NoteheadTriangleUpHalf",e[e.NoteheadTriangleUpBlack=57534]="NoteheadTriangleUpBlack",e[e.NoteheadDiamondBlackWide=57564]="NoteheadDiamondBlackWide",e[e.NoteheadDiamondWhite=57565]="NoteheadDiamondWhite",e[e.NoteheadDiamondWhiteWide=57566]="NoteheadDiamondWhiteWide",e[e.NoteheadCircleX=57523]="NoteheadCircleX",e[e.NoteheadXWhole=57511]="NoteheadXWhole",e[e.NoteheadXHalf=57512]="NoteheadXHalf",e[e.NoteheadXBlack=57513]="NoteheadXBlack",e[e.NoteheadParenthesis=57550]="NoteheadParenthesis",e[e.NoteheadSlashedBlack2=57552]="NoteheadSlashedBlack2",e[e.NoteheadCircleSlash=57591]="NoteheadCircleSlash",e[e.NoteheadHeavyX=57592]="NoteheadHeavyX",e[e.NoteheadHeavyXHat=57593]="NoteheadHeavyXHat",e[e.NoteQuarterUp=57813]="NoteQuarterUp",e[e.NoteEighthUp=57815]="NoteEighthUp",e[e.Tremolo3=57890]="Tremolo3",e[e.Tremolo2=57889]="Tremolo2",e[e.Tremolo1=57888]="Tremolo1",e[e.FlagEighthUp=57920]="FlagEighthUp",e[e.FlagEighthDown=57921]="FlagEighthDown",e[e.FlagSixteenthUp=57922]="FlagSixteenthUp",e[e.FlagSixteenthDown=57923]="FlagSixteenthDown",e[e.FlagThirtySecondUp=57924]="FlagThirtySecondUp",e[e.FlagThirtySecondDown=57925]="FlagThirtySecondDown",e[e.FlagSixtyFourthUp=57926]="FlagSixtyFourthUp",e[e.FlagSixtyFourthDown=57927]="FlagSixtyFourthDown",e[e.FlagOneHundredTwentyEighthUp=57928]="FlagOneHundredTwentyEighthUp",e[e.FlagOneHundredTwentyEighthDown=57929]="FlagOneHundredTwentyEighthDown",e[e.FlagTwoHundredFiftySixthUp=57930]="FlagTwoHundredFiftySixthUp",e[e.FlagTwoHundredFiftySixthDown=57931]="FlagTwoHundredFiftySixthDown",e[e.AccidentalFlat=57952]="AccidentalFlat",e[e.AccidentalNatural=57953]="AccidentalNatural",e[e.AccidentalSharp=57954]="AccidentalSharp",e[e.AccidentalDoubleSharp=57955]="AccidentalDoubleSharp",e[e.AccidentalDoubleFlat=57956]="AccidentalDoubleFlat",e[e.AccidentalQuarterToneFlatArrowUp=57968]="AccidentalQuarterToneFlatArrowUp",e[e.AccidentalQuarterToneSharpArrowUp=57972]="AccidentalQuarterToneSharpArrowUp",e[e.AccidentalQuarterToneNaturalArrowUp=57970]="AccidentalQuarterToneNaturalArrowUp",e[e.ArticAccentAbove=58528]="ArticAccentAbove",e[e.ArticStaccatoAbove=58530]="ArticStaccatoAbove",e[e.ArticMarcatoAbove=58540]="ArticMarcatoAbove",e[e.FermataAbove=58560]="FermataAbove",e[e.FermataShortAbove=58564]="FermataShortAbove",e[e.FermataLongAbove=58566]="FermataLongAbove",e[e.RestLonga=58593]="RestLonga",e[e.RestDoubleWhole=58594]="RestDoubleWhole",e[e.RestWhole=58595]="RestWhole",e[e.RestHalf=58596]="RestHalf",e[e.RestQuarter=58597]="RestQuarter",e[e.RestEighth=58598]="RestEighth",e[e.RestSixteenth=58599]="RestSixteenth",e[e.RestThirtySecond=58600]="RestThirtySecond",e[e.RestSixtyFourth=58601]="RestSixtyFourth",e[e.RestOneHundredTwentyEighth=58602]="RestOneHundredTwentyEighth",e[e.RestTwoHundredFiftySixth=58603]="RestTwoHundredFiftySixth",e[e.Repeat1Bar=58624]="Repeat1Bar",e[e.Repeat2Bars=58625]="Repeat2Bars",e[e.Ottava=58640]="Ottava",e[e.OttavaAlta=58641]="OttavaAlta",e[e.OttavaBassaVb=58652]="OttavaBassaVb",e[e.Quindicesima=58644]="Quindicesima",e[e.QuindicesimaAlta=58645]="QuindicesimaAlta",e[e.DynamicPPP=58666]="DynamicPPP",e[e.DynamicPP=58667]="DynamicPP",e[e.DynamicPiano=58656]="DynamicPiano",e[e.DynamicMP=58668]="DynamicMP",e[e.DynamicMF=58669]="DynamicMF",e[e.DynamicForte=58658]="DynamicForte",e[e.DynamicFF=58671]="DynamicFF",e[e.DynamicFFF=58672]="DynamicFFF",e[e.OrnamentTrill=58726]="OrnamentTrill",e[e.StringsDownBow=58896]="StringsDownBow",e[e.StringsUpBow=58898]="StringsUpBow",e[e.PictEdgeOfCymbal=59177]="PictEdgeOfCymbal",e[e.GuitarString0=59443]="GuitarString0",e[e.GuitarString1=59444]="GuitarString1",e[e.GuitarString2=59445]="GuitarString2",e[e.GuitarString3=59446]="GuitarString3",e[e.GuitarString4=59447]="GuitarString4",e[e.GuitarString5=59448]="GuitarString5",e[e.GuitarString6=59449]="GuitarString6",e[e.GuitarString7=59450]="GuitarString7",e[e.GuitarString8=59451]="GuitarString8",e[e.GuitarString9=59452]="GuitarString9",e[e.GuitarGolpe=59458]="GuitarGolpe",e[e.FretboardX=59481]="FretboardX",e[e.FretboardO=59482]="FretboardO",e[e.WiggleTrill=60068]="WiggleTrill",e[e.WiggleVibratoMediumFast=60126]="WiggleVibratoMediumFast",e[e.OctaveBaselineM=60565]="OctaveBaselineM",e[e.OctaveBaselineB=60563]="OctaveBaselineB"}(C||(C={})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(x||(x={})),function(e){e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom"}(k||(k={}));class De{constructor(e="",t=0,i=0,n=C.None,r=C.None,s=C.None,o=C.None,a=k.Middle){this.elementType=e,this.outputMidiNumber=i,this.staffLine=t,this.noteHeadDefault=n,this.noteHeadHalf=r!==C.None?r:n,this.noteHeadWhole=s!==C.None?s:n,this.techniqueSymbol=o,this.techniqueSymbolPlacement=a}getSymbol(e){switch(e){case p.Whole:return this.noteHeadWhole;case p.Half:return this.noteHeadHalf;default:return this.noteHeadDefault}}}class Ie{static articulationFromElementVariation(e,t){return e<Ie.gp6ElementAndVariationToArticulation.length?(t>=Ie.gp6ElementAndVariationToArticulation.length&&(t=0),Ie.gp6ElementAndVariationToArticulation[e][t]):38}static getArticulation(e){const t=e.percussionArticulation,i=e.beat.voice.bar.staff.track.percussionArticulations;return t<i.length?i[t]:Ie.getArticulationByValue(t)}static getElementAndVariation(e){const t=Ie.getArticulation(e);if(!t)return[-1,-1];for(let e=0;e<Ie.gp6ElementAndVariationToArticulation.length;e++){const i=Ie.gp6ElementAndVariationToArticulation[e];for(let n=0;n<i.length;n++){const r=Ie.getArticulationByValue(i[n]);if((null==r?void 0:r.outputMidiNumber)===t.outputMidiNumber)return[e,n]}}return[-1,-1]}static getArticulationByValue(e){return Ie.instrumentArticulations.has(e)?Ie.instrumentArticulations.get(e):null}}Ie.gp6ElementAndVariationToArticulation=[[35,35,35],[38,91,37],[99,100,99],[56,100,56],[102,103,102],[43,43,43],[45,45,45],[47,47,47],[48,48,48],[50,50,50],[42,92,46],[44,44,44],[57,98,57],[49,97,49],[55,95,55],[51,93,127],[52,96,52]],Ie.instrumentArticulations=new Map([[38,new De("snare",3,38,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[37,new De("snare",3,37,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[91,new De("snare",3,38,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite)],[42,new De("hiHat",-1,42,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[92,new De("hiHat",-1,46,C.NoteheadCircleSlash,C.NoteheadCircleSlash,C.NoteheadCircleSlash)],[46,new De("hiHat",-1,46,C.NoteheadCircleX,C.NoteheadCircleX,C.NoteheadCircleX)],[44,new De("hiHat",9,44,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[35,new De("kickDrum",8,35,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[36,new De("kickDrum",7,36,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[50,new De("tom",1,50,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[48,new De("tom",2,48,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[47,new De("tom",4,47,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[45,new De("tom",5,45,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[43,new De("tom",6,43,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[93,new De("ride",0,51,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.PictEdgeOfCymbal,k.Bottom)],[51,new De("ride",0,51,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[53,new De("ride",0,53,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite)],[94,new De("ride",0,51,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.ArticStaccatoAbove,k.Top)],[55,new De("splash",-2,55,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[95,new De("splash",-2,55,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.ArticStaccatoAbove,k.Bottom)],[52,new De("china",-3,52,C.NoteheadHeavyXHat,C.NoteheadHeavyXHat,C.NoteheadHeavyXHat)],[96,new De("china",-3,52,C.NoteheadHeavyXHat,C.NoteheadHeavyXHat,C.NoteheadHeavyXHat)],[49,new De("crash",-2,49,C.NoteheadHeavyX,C.NoteheadHeavyX,C.NoteheadHeavyX)],[97,new De("crash",-2,49,C.NoteheadHeavyX,C.NoteheadHeavyX,C.NoteheadHeavyX,C.ArticStaccatoAbove,k.Bottom)],[57,new De("crash",-1,57,C.NoteheadHeavyX,C.NoteheadHeavyX,C.NoteheadHeavyX)],[98,new De("crash",-1,57,C.NoteheadHeavyX,C.NoteheadHeavyX,C.NoteheadHeavyX,C.ArticStaccatoAbove,k.Bottom)],[99,new De("cowbell",1,56,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpHalf,C.NoteheadTriangleUpWhole)],[100,new De("cowbell",1,56,C.NoteheadXBlack,C.NoteheadXHalf,C.NoteheadXWhole)],[56,new De("cowbell",0,56,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpHalf,C.NoteheadTriangleUpWhole)],[101,new De("cowbell",0,56,C.NoteheadXBlack,C.NoteheadXHalf,C.NoteheadXWhole)],[102,new De("cowbell",-1,56,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpHalf,C.NoteheadTriangleUpWhole)],[103,new De("cowbell",-1,56,C.NoteheadXBlack,C.NoteheadXHalf,C.NoteheadXWhole)],[77,new De("woodblock",-9,77,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack)],[76,new De("woodblock",-10,76,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack)],[60,new De("bongo",-4,60,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[104,new De("bongo",-5,60,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.NoteheadParenthesis,k.Middle)],[105,new De("bongo",-6,60,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[61,new De("bongo",-7,61,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[106,new De("bongo",-8,61,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.NoteheadParenthesis,k.Middle)],[107,new De("bongo",-16,61,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[66,new De("timbale",10,66,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[65,new De("timbale",9,65,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[68,new De("agogo",12,68,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[67,new De("agogo",11,67,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[64,new De("conga",17,64,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[108,new De("conga",16,64,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[109,new De("conga",15,64,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.NoteheadParenthesis,k.Middle)],[63,new De("conga",14,63,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[110,new De("conga",13,63,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[62,new De("conga",19,62,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.NoteheadParenthesis,k.Middle)],[72,new De("whistle",-11,72,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[71,new De("whistle",-17,71,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[73,new De("guiro",38,73,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[74,new De("guiro",37,74,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[86,new De("surdo",36,86,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[87,new De("surdo",35,87,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadParenthesis,k.Middle)],[54,new De("tambourine",3,54,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack)],[111,new De("tambourine",2,54,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.StringsUpBow,k.Bottom)],[112,new De("tambourine",1,54,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.StringsDownBow,k.Bottom)],[113,new De("tambourine",-7,54,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[79,new De("cuica",30,79,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[78,new De("cuica",29,78,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[58,new De("vibraslap",28,58,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[81,new De("triangle",27,81,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[80,new De("triangle",26,80,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadParenthesis,k.Middle)],[114,new De("grancassa",25,43,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[115,new De("piatti",18,49,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[116,new De("piatti",24,49,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[69,new De("cabasa",23,69,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[117,new De("cabasa",22,69,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,k.Bottom)],[85,new De("castanets",21,85,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[75,new De("claves",20,75,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[70,new De("maraca",-12,70,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[118,new De("maraca",-13,70,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,k.Bottom)],[119,new De("maraca",-14,70,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[120,new De("maraca",-15,70,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,k.Bottom)],[82,new De("shaker",-23,54,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[122,new De("shaker",-24,54,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,k.Bottom)],[84,new De("bellTree",-18,53,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[123,new De("bellTree",-19,53,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,k.Bottom)],[83,new De("jingleBell",-20,53,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[124,new De("unpitched",-21,62,C.NoteheadNull,C.NoteheadNull,C.NoteheadNull,C.GuitarGolpe,k.Top)],[125,new De("unpitched",-22,62,C.NoteheadNull,C.NoteheadNull,C.NoteheadNull,C.GuitarGolpe,k.Bottom)],[39,new De("handClap",3,39,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[40,new De("snare",3,40,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[31,new De("snare",3,40,C.NoteheadSlashedBlack2,C.NoteheadSlashedBlack2,C.NoteheadSlashedBlack2)],[41,new De("tom",5,41,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[59,new De("ride",2,59,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.PictEdgeOfCymbal,k.Bottom)],[126,new De("ride",2,59,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[127,new De("ride",2,59,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite)],[29,new De("ride",2,59,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.ArticStaccatoAbove,k.Top)],[30,new De("crash",-3,49,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[33,new De("snare",3,37,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[34,new De("snare",3,38,C.NoteheadBlack,C.NoteheadBlack,C.NoteheadBlack)]]);class Ae{constructor(){this.id=Ae.GlobalNoteId++,this.index=0,this.accentuated=s.None,this.bendType=u.None,this.bendStyle=h.Default,this.bendOrigin=null,this.isContinuedBend=!1,this.bendPoints=[],this.maxBendPoint=null,this.fret=-1,this.string=-1,this.octave=-1,this.tone=-1,this.percussionArticulation=-1,this.isVisible=!0,this.isLeftHandTapped=!1,this.isHammerPullOrigin=!1,this.hammerPullOriginNoteId=-1,this.hammerPullDestinationNoteId=-1,this.isSlurDestination=!1,this.slurOriginNoteId=-1,this.slurDestinationNoteId=-1,this.harmonicType=b.None,this.harmonicValue=0,this.isGhost=!1,this.isLetRing=!1,this.letRingDestination=null,this.isPalmMute=!1,this.palmMuteDestination=null,this.isDead=!1,this.isStaccato=!1,this.slideInType=y.None,this.slideOutType=_.None,this.slideTarget=null,this.slideOrigin=null,this.vibrato=w.None,this.tieOriginNoteId=-1,this.tieDestinationNoteId=-1,this.isTieDestination=!1,this.leftHandFinger=i.Unknown,this.rightHandFinger=i.Unknown,this.isFingering=!1,this.trillValue=-1,this.trillSpeed=p.ThirtySecond,this.durationPercent=1,this.accidentalMode=v.Default,this.dynamics=g.F,this.isEffectSlurOrigin=!1,this.hasEffectSlur=!1,this.effectSlurOrigin=null,this.effectSlurDestination=null}get hasBend(){return this.bendType!==u.None}get isStringed(){return this.string>=0}get isPiano(){return!this.isStringed&&this.octave>=0&&this.tone>=0}get isPercussion(){return!this.isStringed&&this.percussionArticulation>=0}get element(){return this.isPercussion?Ie.getElementAndVariation(this)[0]:-1}get variation(){return this.isPercussion?Ie.getElementAndVariation(this)[1]:-1}get isHammerPullDestination(){return!!this.hammerPullOrigin}get hammerPullOrigin(){return-1===this.hammerPullOriginNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.hammerPullOriginNoteId)}get hammerPullDestination(){return-1===this.hammerPullDestinationNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.hammerPullDestinationNoteId)}get isSlurOrigin(){return!!this.slurDestination}get slurOrigin(){return-1===this.slurOriginNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.slurOriginNoteId)}get slurDestination(){return-1===this.slurDestinationNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.slurDestinationNoteId)}get isHarmonic(){return this.harmonicType!==b.None}get tieOrigin(){return-1===this.tieOriginNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.tieOriginNoteId)}get tieDestination(){return-1===this.tieDestinationNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.tieDestinationNoteId)}get isTieOrigin(){return-1!==this.tieDestinationNoteId}get trillFret(){return this.trillValue-this.stringTuning}get isTrill(){return this.trillValue>=0}get isEffectSlurDestination(){return!!this.effectSlurOrigin}get stringTuning(){return this.beat.voice.bar.staff.capo+Ae.getStringTuning(this.beat.voice.bar.staff,this.string)}static getStringTuning(e,t){return e.tuning.length>0?e.tuning[e.tuning.length-(t-1)-1]:0}get realValue(){let e=this.realValueWithoutHarmonic;return this.isStringed&&(this.harmonicType===b.Natural?e=this.harmonicPitch+this.stringTuning-this.beat.voice.bar.staff.transpositionPitch:e+=this.harmonicPitch),e}get realValueWithoutHarmonic(){return this.isPercussion?this.percussionArticulation:this.isStringed?this.fret+this.stringTuning-this.beat.voice.bar.staff.transpositionPitch:this.isPiano?12*this.octave+this.tone-this.beat.voice.bar.staff.transpositionPitch:0}get harmonicPitch(){if(this.harmonicType===b.None||!this.isStringed)return 0;let e=this.harmonicValue;return ge.isAlmostEqualTo(e,2.4)?36:ge.isAlmostEqualTo(e,2.7)?34:e<3?0:e<=3.5?31:e<=4?28:e<=5?24:e<=6?34:e<=7?19:e<=8.5?36:e<=9?28:e<=10?34:e<=11?0:e<=12?12:e<14?0:e<=15?34:e<=16?28:e<=17?36:e<=18?0:e<=19?19:e<=21?0:e<=22?36:e<=24?24:0}get initialBendValue(){return this.hasBend?this.bendPoints[0].value/2|0:this.bendOrigin?this.bendOrigin.bendPoints[this.bendOrigin.bendPoints.length-1].value/2|0:this.isTieDestination&&this.tieOrigin.bendOrigin?this.tieOrigin.bendOrigin.bendPoints[this.tieOrigin.bendOrigin.bendPoints.length-1].value/2|0:this.beat.hasWhammyBar?this.beat.whammyBarPoints[0].value/2|0:this.beat.isContinuedWhammy?this.beat.previousBeat.whammyBarPoints[this.beat.previousBeat.whammyBarPoints.length-1].value/2|0:0}get displayValue(){return this.displayValueWithoutBend+this.initialBendValue}get displayValueWithoutBend(){let e=this.realValue;switch(this.harmonicType!==b.Natural&&this.harmonicType!==b.None&&(e-=this.harmonicPitch),this.beat.ottava){case l._15ma:e-=24;break;case l._8va:e-=12;break;case l.Regular:break;case l._8vb:e+=12;break;case l._15mb:e+=24}switch(this.beat.voice.bar.clefOttava){case l._15ma:e-=24;break;case l._8va:e-=12;break;case l.Regular:break;case l._8vb:e+=12;break;case l._15mb:e+=24}return e-this.beat.voice.bar.staff.displayTranspositionPitch}get hasQuarterToneOffset(){return this.hasBend?this.bendPoints[0].value%2!=0:this.bendOrigin?this.bendOrigin.bendPoints[this.bendOrigin.bendPoints.length-1].value%2!=0:this.beat.hasWhammyBar?this.beat.whammyBarPoints[0].value%2!=0:!!this.beat.isContinuedWhammy&&this.beat.previousBeat.whammyBarPoints[this.beat.previousBeat.whammyBarPoints.length-1].value%2!=0}addBendPoint(e){this.bendPoints.push(e),(!this.maxBendPoint||e.value>this.maxBendPoint.value)&&(this.maxBendPoint=e),this.bendType===u.None&&(this.bendType=u.Custom)}finish(t){let i=new Ne((()=>Ae.nextNoteOnSameLine(this))),n=t&&t.notation.notationMode===e.NotationMode.SongBook;if(this.isTieDestination&&(this.chain(),n&&this.tieOrigin&&this.tieOrigin.isLetRing&&(this.isLetRing=!0)),this.isLetRing&&(i.value&&i.value.isLetRing?this.letRingDestination=i.value:this.letRingDestination=this,n&&this.isTieDestination&&!this.tieOrigin.hasBend&&(this.isVisible=!1)),this.isPalmMute&&(i.value&&i.value.isPalmMute?this.palmMuteDestination=i.value:this.palmMuteDestination=this),this.isHammerPullOrigin){let e=Ae.findHammerPullDestination(this);e?(this.hammerPullDestinationNoteId=e.id,e.hammerPullOriginNoteId=this.id):this.isHammerPullOrigin=!1}switch(this.slideOutType){case _.Shift:case _.Legato:this.slideTarget=i.value,this.slideTarget?this.slideTarget.slideOrigin=this:this.slideOutType=_.None}let r=null;if(this.isHammerPullOrigin&&this.hammerPullDestination?r=this.hammerPullDestination:this.slideOutType===_.Legato&&this.slideTarget&&(r=this.slideTarget),r&&(this.hasEffectSlur=!0,this.effectSlurOrigin&&this.beat.pickStroke===S.None?(this.effectSlurOrigin.effectSlurDestination=r,this.effectSlurOrigin.effectSlurDestination.effectSlurOrigin=this.effectSlurOrigin,this.effectSlurOrigin=null):(this.isEffectSlurOrigin=!0,this.effectSlurDestination=r,this.effectSlurDestination.effectSlurOrigin=this)),this.bendPoints.length>0&&this.bendType===u.Custom){let e=this.isContinuedBend=this.isTieDestination&&this.tieOrigin.hasBend;if(4===this.bendPoints.length){let t=this.bendPoints[0],i=this.bendPoints[1],n=this.bendPoints[2],r=this.bendPoints[3];i.value===n.value?r.value>t.value?i.value>r.value?this.bendType=u.BendRelease:!e&&t.value>0?(this.bendType=u.PrebendBend,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):(this.bendType=u.Bend,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):r.value<t.value?e?(this.bendType=u.Release,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):(this.bendType=u.PrebendRelease,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):i.value>t.value?this.bendType=u.BendRelease:t.value>0&&!e?(this.bendType=u.Prebend,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):(this.bendType=u.Hold,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):Oe.warning("Model","Unsupported bend type detected, fallback to custom",null)}else if(2===this.bendPoints.length){let t=this.bendPoints[0],i=this.bendPoints[1];i.value>t.value?!e&&t.value>0?this.bendType=u.PrebendBend:this.bendType=u.Bend:i.value<t.value?this.bendType=e?u.Release:u.PrebendRelease:this.bendType=u.Hold}}else 0===this.bendPoints.length&&(this.bendType=u.None);this.initialBendValue>0&&(this.accidentalMode=v.Default)}static nextNoteOnSameLine(e){let t=e.beat.nextBeat;for(;t&&t.voice.bar.index<=e.beat.voice.bar.index+Ae.MaxOffsetForSameLineSearch;){let i=t.getNoteOnString(e.string);if(i)return i;t=t.nextBeat}return null}static findHammerPullDestination(e){let t=e.beat.nextBeat;for(;t&&t.voice.bar.index<=e.beat.voice.bar.index+Ae.MaxOffsetForSameLineSearch;){let i=t.getNoteOnString(e.string);if(i)return i;for(let n=e.string;n>0;n--)if(i=t.getNoteOnString(n),i){if(i.isLeftHandTapped)return i;break}for(let n=e.string;n<=e.beat.voice.bar.staff.tuning.length;n++)if(i=t.getNoteOnString(n),i){if(i.isLeftHandTapped)return i;break}t=t.nextBeat}return null}static findTieOrigin(e){let t=e.beat.previousBeat;for(;t&&t.voice.bar.index>=e.beat.voice.bar.index-Ae.MaxOffsetForSameLineSearch;){if(e.isStringed){let i=t.getNoteOnString(e.string);if(i)return i}else if(-1===e.octave&&-1===e.tone){if(e.index<t.notes.length)return t.notes[e.index]}else{let i=t.getNoteWithRealValue(e.realValue);if(i)return i}t=t.previousBeat}return null}chain(){if(this.beat.voice.bar.staff.track.score.registerNote(this),!this.isTieDestination)return;let e;-1===this.tieOriginNoteId?(e=Ae.findTieOrigin(this),this.tieOriginNoteId=e?e.id:-1):e=this.tieOrigin,e?(e.tieDestinationNoteId=this.id,this.fret=e.fret,this.octave=e.octave,this.tone=e.tone,e.hasBend&&(this.bendOrigin=this.tieOrigin)):this.isTieDestination=!1}}Ae.GlobalNoteId=0,Ae.MaxOffsetForSameLineSearch=3;class Pe{constructor(e){this._isEqualLengthTuplet=!0,this.totalDuration=0,this.beats=[],this.isFull=!1,this.voice=e}check(e){if(0===this.beats.length)return this.beats.push(e),this.totalDuration+=e.playbackDuration,!0;if(e.graceType!==m.None)return!0;if(e.voice!==this.voice||this.isFull||e.tupletNumerator!==this.beats[0].tupletNumerator||e.tupletDenominator!==this.beats[0].tupletDenominator)return!1;if(e.playbackDuration!==this.beats[0].playbackDuration&&(this._isEqualLengthTuplet=!1),this.beats.push(e),this.totalDuration+=e.playbackDuration,this._isEqualLengthTuplet)this.beats.length===this.beats[0].tupletNumerator&&(this.isFull=!0);else{let e=this.beats[0].tupletNumerator/this.beats[0].tupletDenominator|0;for(let t of Pe.AllTicks)if(this.totalDuration===t*e){this.isFull=!0;break}}return!0}}Pe.HalfTicks=1920,Pe.QuarterTicks=960,Pe.EighthTicks=480,Pe.SixteenthTicks=240,Pe.ThirtySecondTicks=120,Pe.SixtyFourthTicks=60,Pe.OneHundredTwentyEighthTicks=30,Pe.TwoHundredFiftySixthTicks=15,Pe.AllTicks=[Pe.HalfTicks,Pe.QuarterTicks,Pe.EighthTicks,Pe.SixteenthTicks,Pe.ThirtySecondTicks,Pe.SixtyFourthTicks,Pe.OneHundredTwentyEighthTicks,Pe.TwoHundredFiftySixthTicks],function(e){e[e.None=0]="None",e[e.Custom=1]="Custom",e[e.Dive=2]="Dive",e[e.Dip=3]="Dip",e[e.Hold=4]="Hold",e[e.Predive=5]="Predive",e[e.PrediveDive=6]="PrediveDive"}(E||(E={}));class Re{static clone(e){const t=new Le;return t.offset=e.offset,t.value=e.value,t}}class Be{static clone(e){const t=new Ae;t.index=e.index,t.accentuated=e.accentuated,t.bendType=e.bendType,t.bendStyle=e.bendStyle,t.isContinuedBend=e.isContinuedBend,t.bendPoints=[];for(const i of e.bendPoints)t.addBendPoint(Re.clone(i));return t.fret=e.fret,t.string=e.string,t.octave=e.octave,t.tone=e.tone,t.percussionArticulation=e.percussionArticulation,t.isVisible=e.isVisible,t.isLeftHandTapped=e.isLeftHandTapped,t.isHammerPullOrigin=e.isHammerPullOrigin,t.hammerPullOriginNoteId=e.hammerPullOriginNoteId,t.hammerPullDestinationNoteId=e.hammerPullDestinationNoteId,t.isSlurDestination=e.isSlurDestination,t.slurOriginNoteId=e.slurOriginNoteId,t.slurDestinationNoteId=e.slurDestinationNoteId,t.harmonicType=e.harmonicType,t.harmonicValue=e.harmonicValue,t.isGhost=e.isGhost,t.isLetRing=e.isLetRing,t.isPalmMute=e.isPalmMute,t.isDead=e.isDead,t.isStaccato=e.isStaccato,t.slideInType=e.slideInType,t.slideOutType=e.slideOutType,t.vibrato=e.vibrato,t.tieOriginNoteId=e.tieOriginNoteId,t.tieDestinationNoteId=e.tieDestinationNoteId,t.isTieDestination=e.isTieDestination,t.leftHandFinger=e.leftHandFinger,t.rightHandFinger=e.rightHandFinger,t.isFingering=e.isFingering,t.trillValue=e.trillValue,t.trillSpeed=e.trillSpeed,t.durationPercent=e.durationPercent,t.accidentalMode=e.accidentalMode,t.dynamics=e.dynamics,t}}class Fe{static clone(e){const t=new ke;return t.isLinear=e.isLinear,t.type=e.type,t.value=e.value,t.ratioPosition=e.ratioPosition,t.text=e.text,t}}class We{static clone(e){const t=new ze;t.index=e.index,t.notes=[];for(const i of e.notes)t.addNote(Be.clone(i));t.isEmpty=e.isEmpty,t.whammyStyle=e.whammyStyle,t.ottava=e.ottava,t.isLegatoOrigin=e.isLegatoOrigin,t.duration=e.duration,t.isLetRing=e.isLetRing,t.isPalmMute=e.isPalmMute,t.automations=[];for(const i of e.automations)t.automations.push(Fe.clone(i));t.dots=e.dots,t.fadeIn=e.fadeIn,t.lyrics=e.lyrics?e.lyrics.slice():null,t.hasRasgueado=e.hasRasgueado,t.pop=e.pop,t.slap=e.slap,t.tap=e.tap,t.text=e.text,t.brushType=e.brushType,t.brushDuration=e.brushDuration,t.tupletDenominator=e.tupletDenominator,t.tupletNumerator=e.tupletNumerator,t.isContinuedWhammy=e.isContinuedWhammy,t.whammyBarType=e.whammyBarType,t.whammyBarPoints=[];for(const i of e.whammyBarPoints)t.addWhammyBarPoint(Re.clone(i));return t.vibrato=e.vibrato,t.chordId=e.chordId,t.graceType=e.graceType,t.pickStroke=e.pickStroke,t.tremoloSpeed=e.tremoloSpeed,t.crescendo=e.crescendo,t.displayStart=e.displayStart,t.playbackStart=e.playbackStart,t.displayDuration=e.displayDuration,t.playbackDuration=e.playbackDuration,t.dynamics=e.dynamics,t.invertBeamDirection=e.invertBeamDirection,t.preferredBeamDirection=e.preferredBeamDirection,t.isEffectSlurOrigin=e.isEffectSlurOrigin,t.beamingMode=e.beamingMode,t}}class Ve{constructor(){this.beats=[],this.id="empty",this.isComplete=!1}addBeat(e){0===this.beats.length&&(this.id=e.absoluteDisplayStart+"_"+e.voice.index),e.graceIndex=this.beats.length,e.graceGroup=this,this.beats.push(e)}}!function(e){e[e.Auto=0]="Auto",e[e.ForceSplitToNext=1]="ForceSplitToNext",e[e.ForceMergeWithNext=2]="ForceMergeWithNext"}(T||(T={}));class ze{constructor(){this.id=ze._globalBeatId++,this.index=0,this.previousBeat=null,this.nextBeat=null,this.notes=[],this.noteStringLookup=new Map,this.noteValueLookup=new Map,this.isEmpty=!1,this.whammyStyle=h.Default,this.ottava=l.Regular,this.fermata=null,this.isLegatoOrigin=!1,this.minNote=null,this.maxNote=null,this.maxStringNote=null,this.minStringNote=null,this.duration=p.Quarter,this.isLetRing=!1,this.isPalmMute=!1,this.automations=[],this.dots=0,this.fadeIn=!1,this.lyrics=null,this.hasRasgueado=!1,this.pop=!1,this.slap=!1,this.tap=!1,this.text=null,this.brushType=d.None,this.brushDuration=0,this.tupletDenominator=-1,this.tupletNumerator=-1,this.tupletGroup=null,this.isContinuedWhammy=!1,this.whammyBarType=E.None,this.whammyBarPoints=[],this.maxWhammyPoint=null,this.minWhammyPoint=null,this.vibrato=w.None,this.chordId=null,this.graceType=m.None,this.graceGroup=null,this.graceIndex=-1,this.pickStroke=S.None,this.tremoloSpeed=null,this.crescendo=f.None,this.displayStart=0,this.playbackStart=0,this.displayDuration=0,this.playbackDuration=0,this.dynamics=g.F,this.invertBeamDirection=!1,this.preferredBeamDirection=null,this.isEffectSlurOrigin=!1,this.effectSlurOrigin=null,this.effectSlurDestination=null,this.beamingMode=T.Auto}get isLastOfVoice(){return this.index===this.voice.beats.length-1}get isLegatoDestination(){return!!this.previousBeat&&this.previousBeat.isLegatoOrigin}get isRest(){return this.isEmpty||0===this.notes.length}get isFullBarRest(){return this.isRest&&1===this.voice.beats.length&&this.duration===p.Whole}get hasTuplet(){return!(-1===this.tupletDenominator&&-1===this.tupletNumerator||1===this.tupletDenominator&&1===this.tupletNumerator)}get hasWhammyBar(){return this.whammyBarType!==E.None}get hasChord(){return!!this.chordId}get chord(){return this.chordId?this.voice.bar.staff.chords.get(this.chordId):null}get isTremolo(){return!!this.tremoloSpeed}get absoluteDisplayStart(){return this.voice.bar.masterBar.start+this.displayStart}get absolutePlaybackStart(){return this.voice.bar.masterBar.start+this.playbackStart}get isEffectSlurDestination(){return!!this.effectSlurOrigin}addWhammyBarPoint(e){this.whammyBarPoints.push(e),(!this.maxWhammyPoint||e.value>this.maxWhammyPoint.value)&&(this.maxWhammyPoint=e),(!this.minWhammyPoint||e.value<this.minWhammyPoint.value)&&(this.minWhammyPoint=e),this.whammyBarType===E.None&&(this.whammyBarType=E.Custom)}removeWhammyBarPoint(e){if(e<0||e>=this.whammyBarPoints.length)return;this.whammyBarPoints.splice(e,1);let t=this.whammyBarPoints[e];if(t===this.maxWhammyPoint){this.maxWhammyPoint=null;for(let e of this.whammyBarPoints)(!this.maxWhammyPoint||e.value>this.maxWhammyPoint.value)&&(this.maxWhammyPoint=e)}if(t===this.minWhammyPoint){this.minWhammyPoint=null;for(let e of this.whammyBarPoints)(!this.minWhammyPoint||e.value<this.minWhammyPoint.value)&&(this.minWhammyPoint=e)}}addNote(e){e.beat=this,e.index=this.notes.length,this.notes.push(e),e.isStringed&&this.noteStringLookup.set(e.string,e)}removeNote(e){let t=this.notes.indexOf(e);t>=0&&this.notes.splice(t,1)}getAutomation(e){for(let t=0,i=this.automations.length;t<i;t++){let i=this.automations[t];if(i.type===e)return i}return null}getNoteOnString(e){return this.noteStringLookup.has(e)?this.noteStringLookup.get(e):null}calculateDuration(){if(this.isFullBarRest)return this.voice.bar.masterBar.calculateDuration();let e=Te.toTicks(this.duration);return 2===this.dots?e=Te.applyDot(e,!0):1===this.dots&&(e=Te.applyDot(e,!1)),this.tupletDenominator>0&&this.tupletNumerator>=0&&(e=Te.applyTuplet(e,this.tupletNumerator,this.tupletDenominator)),e}updateDurations(){let e=this.calculateDuration();switch(this.playbackDuration=e,this.graceType){case m.BeforeBeat:case m.OnBeat:switch(this.duration){case p.Sixteenth:this.playbackDuration=Te.toTicks(p.SixtyFourth);break;case p.ThirtySecond:this.playbackDuration=Te.toTicks(p.OneHundredTwentyEighth);break;default:this.playbackDuration=Te.toTicks(p.ThirtySecond)}this.displayDuration=0;break;case m.BendGrace:this.playbackDuration/=2,this.displayDuration=0;break;default:this.displayDuration=e;let t=this.previousBeat;t&&t.graceType===m.BendGrace&&(this.playbackDuration=t.playbackDuration)}}finishTuplet(){let e=this.previousBeat,t=e?e.tupletGroup:null;(this.hasTuplet||this.graceType!==m.None&&t)&&(e&&t&&t.check(this)||(t=new Pe(this.voice),t.check(this)),this.tupletGroup=t)}finish(t){switch(null===this.getAutomation(o.Instrument)&&0===this.index&&0===this.voice.index&&0===this.voice.bar.index&&0===this.voice.bar.staff.index&&this.automations.push(ke.buildInstrumentAutomation(!1,0,this.voice.bar.staff.track.playbackInfo.program)),this.graceType){case m.OnBeat:case m.BeforeBeat:let e=this.graceGroup.beats.length;this.duration=1===e?p.Eighth:2===e?p.Sixteenth:p.ThirtySecond}let i=t?t.notation.notationMode:e.NotationMode.GuitarPro,n="grad"===this.text||"grad."===this.text;n&&i===e.NotationMode.SongBook&&(this.text="");let r=!1;this.minNote=null,this.maxNote=null,this.minStringNote=null,this.maxStringNote=null;let s=0,a=!1;for(let o=0,l=this.notes.length;o<l;o++){let l=this.notes[o];if(l.dynamics=this.dynamics,l.finish(t),l.isLetRing&&(this.isLetRing=!0),l.isPalmMute&&(this.isPalmMute=!0),i===e.NotationMode.SongBook&&l.hasBend&&this.graceType!==m.BendGrace){if(!l.isTieOrigin)switch(l.bendType){case u.Bend:case u.PrebendRelease:case u.PrebendBend:r=!0}n||l.bendStyle===h.Gradual?(n=!0,l.bendStyle=h.Gradual,r=!1):l.bendStyle=h.Fast}l.isVisible&&(s++,(!this.minNote||l.realValue<this.minNote.realValue)&&(this.minNote=l),(!this.maxNote||l.realValue>this.maxNote.realValue)&&(this.maxNote=l),(!this.minStringNote||l.string<this.minStringNote.string)&&(this.minStringNote=l),(!this.maxStringNote||l.string>this.maxStringNote.string)&&(this.maxStringNote=l),l.hasEffectSlur&&(a=!0))}if(a&&(this.effectSlurOrigin?(this.effectSlurOrigin.effectSlurDestination=this.nextBeat,this.effectSlurOrigin.effectSlurDestination&&(this.effectSlurOrigin.effectSlurDestination.effectSlurOrigin=this.effectSlurOrigin),this.effectSlurOrigin=null):(this.isEffectSlurOrigin=!0,this.effectSlurDestination=this.nextBeat,this.effectSlurDestination&&(this.effectSlurDestination.effectSlurOrigin=this))),this.notes.length>0&&0===s&&(this.isEmpty=!0),this.isRest||this.isLetRing&&this.isPalmMute)this.isRest&&this.previousBeat&&t&&t.notation.notationMode===e.NotationMode.GuitarPro&&(this.previousBeat.isLetRing&&(this.isLetRing=!0),this.previousBeat.isPalmMute&&(this.isPalmMute=!0));else{let e=this.previousBeat;for(;e&&e.isRest;)this.isLetRing||(e.isLetRing=!1),this.isPalmMute||(e.isPalmMute=!1),e=e.previousBeat}if(this.whammyBarPoints.length>0&&this.whammyBarType===E.Custom){i===e.NotationMode.SongBook&&(this.whammyStyle=n?h.Gradual:h.Fast);let t=!!this.previousBeat&&this.previousBeat.hasWhammyBar;if(this.isContinuedWhammy=t,4===this.whammyBarPoints.length){let n=this.whammyBarPoints[0],r=this.whammyBarPoints[1],s=this.whammyBarPoints[2],o=this.whammyBarPoints[3];r.value===s.value?n.value<r.value&&r.value<o.value||n.value>r.value&&r.value>o.value?(0===n.value||t?this.whammyBarType=E.Dive:this.whammyBarType=E.PrediveDive,this.whammyBarPoints.splice(2,1),this.whammyBarPoints.splice(1,1)):n.value>r.value&&r.value<o.value||n.value<r.value&&r.value>o.value?(this.whammyBarType=E.Dip,r.offset!==s.offset&&i!==e.NotationMode.SongBook||this.whammyBarPoints.splice(2,1)):n.value===r.value&&r.value===o.value?(0===n.value||t?this.whammyBarType=E.Hold:this.whammyBarType=E.Predive,this.whammyBarPoints.splice(2,1),this.whammyBarPoints.splice(1,1)):Oe.warning("Model","Unsupported whammy type detected, fallback to custom",null):Oe.warning("Model","Unsupported whammy type detected, fallback to custom",null)}}if(this.updateDurations(),r){let e=We.clone(this);e.id=ze._globalBeatId++,e.pickStroke=S.None;for(let t=0,i=e.notes.length;t<i;t++){let i=e.notes[t],n=this.notes[t];if(i.bendType=u.None,i.maxBendPoint=null,i.bendPoints=[],i.bendStyle=h.Default,i.id=Ae.GlobalNoteId++,n.isTieOrigin&&(i.tieDestinationNoteId=n.tieDestination.id,n.tieDestination.tieOriginNoteId=i.id),n.isTieDestination&&(i.tieOriginNoteId=n.tieOrigin?n.tieOrigin.id:-1,n.tieOrigin.tieDestinationNoteId=i.id),n.hasBend&&n.isTieOrigin){let e=Ae.findTieOrigin(n);if(e&&e.hasBend){i.bendType=u.Hold;let e=n.bendPoints[n.bendPoints.length-1];i.addBendPoint(new Le(0,e.value)),i.addBendPoint(new Le(Le.MaxPosition,e.value))}}i.isTieDestination=!0}this.graceType=m.BendGrace,this.graceGroup=new Ve,this.graceGroup.addBeat(this),this.graceGroup.isComplete=!0,this.updateDurations(),this.voice.insertBeat(this,e)}}isBefore(e){return this.voice.bar.index<e.voice.bar.index||e.voice.bar.index===this.voice.bar.index&&this.index<e.index}isAfter(e){return this.voice.bar.index>e.voice.bar.index||e.voice.bar.index===this.voice.bar.index&&this.index>e.index}hasNoteOnString(e){return this.noteStringLookup.has(e)}getNoteWithRealValue(e){return this.noteValueLookup.has(e)?this.noteValueLookup.get(e):null}chain(){for(const e of this.notes)this.noteValueLookup.set(e.realValue,e),e.chain()}}ze._globalBeatId=0;class He{constructor(){this.name="",this.firstFret=1,this.strings=[],this.barreFrets=[],this.showName=!0,this.showDiagram=!0,this.showFingering=!0}}!function(e){e[e.IgnoreSpaces=0]="IgnoreSpaces",e[e.Begin=1]="Begin",e[e.Text=2]="Text",e[e.Comment=3]="Comment",e[e.Dash=4]="Dash"}(L||(L={}));class je{constructor(){this.startBar=0,this.text=""}finish(e=!1){this.chunks=[],this.parse(this.text,0,this.chunks,e)}parse(e,t,i,n){if(!e)return;let r=L.Begin,s=L.Begin,o=!1,a=0;for(;t<e.length;){let i=e.charCodeAt(t);switch(r){case L.IgnoreSpaces:switch(i){case je.CharCodeLF:case je.CharCodeCR:case je.CharCodeTab:break;case je.CharCodeSpace:if(!o){r=s;continue}break;default:o=!1,r=s;continue}break;case L.Begin:switch(i){case je.CharCodeBrackedOpen:r=L.Comment;break;default:a=t,r=L.Text;continue}break;case L.Comment:switch(i){case je.CharCodeBrackedClose:r=L.Begin}break;case L.Text:switch(i){case je.CharCodeDash:r=L.Dash;break;case je.CharCodeCR:case je.CharCodeLF:case je.CharCodeSpace:let i=e.substr(a,t-a);this.addChunk(i,n),r=L.IgnoreSpaces,s=L.Begin}break;case L.Dash:switch(i){case je.CharCodeDash:break;default:let i=e.substr(a,t-a);this.addChunk(i,n),o=!0,r=L.IgnoreSpaces,s=L.Begin;continue}}t++}r===L.Text&&t!==a&&this.addChunk(e.substr(a,t-a),n)}addChunk(e,t){e=this.prepareChunk(e),(!t||e.length>0&&"-"!==e)&&this.chunks.push(e)}prepareChunk(e){let t=e.split("+").join(" "),i=t.length;for(;i>0&&"_"===t.charAt(i-1);)i--;return i!==t.length?t.substr(0,i):t}}je.CharCodeLF=10,je.CharCodeTab=9,je.CharCodeCR=13,je.CharCodeSpace=32,je.CharCodeBrackedClose=93,je.CharCodeBrackedOpen=91,je.CharCodeDash=45,function(e){e[e.Cb=-7]="Cb",e[e.Gb=-6]="Gb",e[e.Db=-5]="Db",e[e.Ab=-4]="Ab",e[e.Eb=-3]="Eb",e[e.Bb=-2]="Bb",e[e.F=-1]="F",e[e.C=0]="C",e[e.G=1]="G",e[e.D=2]="D",e[e.A=3]="A",e[e.E=4]="E",e[e.B=5]="B",e[e.FSharp=6]="FSharp",e[e.CSharp=7]="CSharp"}(N||(N={})),function(e){e[e.Major=0]="Major",e[e.Minor=1]="Minor"}(M||(M={})),function(e){e[e.NoTripletFeel=0]="NoTripletFeel",e[e.Triplet16th=1]="Triplet16th",e[e.Triplet8th=2]="Triplet8th",e[e.Dotted16th=3]="Dotted16th",e[e.Dotted8th=4]="Dotted8th",e[e.Scottish16th=5]="Scottish16th",e[e.Scottish8th=6]="Scottish8th"}(O||(O={}));class Ue{constructor(){this.alternateEndings=0,this.nextMasterBar=null,this.previousMasterBar=null,this.index=0,this.keySignature=N.C,this.keySignatureType=M.Major,this.isDoubleBar=!1,this.isRepeatStart=!1,this.repeatCount=0,this.timeSignatureNumerator=4,this.timeSignatureDenominator=4,this.timeSignatureCommon=!1,this.tripletFeel=O.NoTripletFeel,this.section=null,this.tempoAutomation=null,this.fermata=new Map,this.start=0,this.isAnacrusis=!1}get isRepeatEnd(){return this.repeatCount>0}get isSectionStart(){return!!this.section}calculateDuration(e=!0){if(this.isAnacrusis&&e){let e=0;for(let t of this.score.tracks)for(let i of t.staves){let t=this.index<i.bars.length?i.bars[this.index].calculateDuration():0;t>e&&(e=t)}return e}return this.timeSignatureNumerator*Te.valueToTicks(this.timeSignatureDenominator)}addFermata(e,t){this.fermata.set(e,t)}getFermata(e){return this.fermata.has(e.playbackStart)?this.fermata.get(e.playbackStart):null}}Ue.MaxAlternateEndings=8;class Ge{constructor(){this.hideDynamics=!1}}class Ke{constructor(){this.masterBars=[],this.openings=[],this.closings=[],this.isOpened=!1,this.isClosed=!1}addMasterBar(e){0===this.openings.length&&this.openings.push(e),this.masterBars.push(e),e.repeatGroup=this,e.isRepeatEnd?(this.closings.push(e),this.isClosed=!0,this.isOpened||(this.masterBars[0].isRepeatStart=!0,this.isOpened=!0)):this.isClosed&&(this.isClosed=!1,this.openings.push(e))}}class $e{constructor(){this._noteByIdLookup=new Map,this._currentRepeatGroup=new Ke,this.album="",this.artist="",this.copyright="",this.instructions="",this.music="",this.notices="",this.subTitle="",this.title="",this.words="",this.tab="",this.tempo=120,this.tempoLabel="",this.masterBars=[],this.tracks=[],this.stylesheet=new Ge}rebuildRepeatGroups(){let e=new Ke;for(let t of this.masterBars)(t.isRepeatStart||this._currentRepeatGroup.isClosed&&t.alternateEndings<=0)&&(e=new Ke),e.addMasterBar(t)}addMasterBar(e){e.score=this,e.index=this.masterBars.length,0!==this.masterBars.length&&(e.previousMasterBar=this.masterBars[this.masterBars.length-1],e.previousMasterBar.nextMasterBar=e,e.start=e.previousMasterBar.start+e.previousMasterBar.calculateDuration()),(e.isRepeatStart||this._currentRepeatGroup.isClosed&&e.alternateEndings<=0)&&(this._currentRepeatGroup=new Ke),this._currentRepeatGroup.addMasterBar(e),this.masterBars.push(e)}addTrack(e){e.score=this,e.index=this.tracks.length,this.tracks.push(e)}finish(e){this._noteByIdLookup.clear();for(let t=0,i=this.tracks.length;t<i;t++)this.tracks[t].finish(e)}registerNote(e){this._noteByIdLookup.set(e.id,e)}getNoteById(e){return this._noteByIdLookup.has(e)?this._noteByIdLookup.get(e):null}}class qe{constructor(){this.marker="",this.text=""}}class Ze{constructor(){this.volume=15,this.balance=8,this.port=1,this.program=0,this.primaryChannel=0,this.secondaryChannel=0,this.isMute=!1,this.isSolo=!1}}class Ye{constructor(e="",t=null,i=!1){this.isStandard=i,this.name=e,this.tunings=null!=t?t:[]}static getTextForTuning(e,t){let i=Ye.getTextPartsForTuning(e);return t?i.join(""):i[0]}static getTextPartsForTuning(e,t=-1){return[["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"][e%12],((e/12|0)+t).toString()]}static getDefaultTuningFor(e){return Ye._defaultTunings.has(e)?Ye._defaultTunings.get(e):null}static getPresetsFor(e){switch(e){case 7:return Ye._sevenStrings;case 6:return Ye._sixStrings;case 5:return Ye._fiveStrings;case 4:return Ye._fourStrings}return[]}static initialize(){Ye._defaultTunings.set(7,new Ye("Guitar 7 strings",[64,59,55,50,45,40,35],!0)),Ye._sevenStrings.push(Ye._defaultTunings.get(7)),Ye._defaultTunings.set(6,new Ye("Guitar Standard Tuning",[64,59,55,50,45,40],!0)),Ye._sixStrings.push(Ye._defaultTunings.get(6)),Ye._sixStrings.push(new Ye("Guitar Tune down  step",[63,58,54,49,44,39],!1)),Ye._sixStrings.push(new Ye("Guitar Tune down 1 step",[62,57,53,48,43,38],!1)),Ye._sixStrings.push(new Ye("Guitar Tune down 2 step",[60,55,51,46,41,36],!1)),Ye._sixStrings.push(new Ye("Guitar Dropped D Tuning",[64,59,55,50,45,38],!1)),Ye._sixStrings.push(new Ye("Guitar Dropped D Tuning variant",[64,57,55,50,45,38],!1)),Ye._sixStrings.push(new Ye("Guitar Double Dropped D Tuning",[62,59,55,50,45,38],!1)),Ye._sixStrings.push(new Ye("Guitar Dropped E Tuning",[66,61,57,52,47,40],!1)),Ye._sixStrings.push(new Ye("Guitar Dropped C Tuning",[62,57,53,48,43,36],!1)),Ye._sixStrings.push(new Ye("Guitar Open C Tuning",[64,60,55,48,43,36],!1)),Ye._sixStrings.push(new Ye("Guitar Open Cm Tuning",[63,60,55,48,43,36],!1)),Ye._sixStrings.push(new Ye("Guitar Open C6 Tuning",[64,57,55,48,43,36],!1)),Ye._sixStrings.push(new Ye("Guitar Open Cmaj7 Tuning",[64,59,55,52,43,36],!1)),Ye._sixStrings.push(new Ye("Guitar Open D Tuning",[62,57,54,50,45,38],!1)),Ye._sixStrings.push(new Ye("Guitar Open Dm Tuning",[62,57,53,50,45,38],!1)),Ye._sixStrings.push(new Ye("Guitar Open D5 Tuning",[62,57,50,50,45,38],!1)),Ye._sixStrings.push(new Ye("Guitar Open D6 Tuning",[62,59,54,50,45,38],!1)),Ye._sixStrings.push(new Ye("Guitar Open Dsus4 Tuning",[62,57,55,50,45,38],!1)),Ye._sixStrings.push(new Ye("Guitar Open E Tuning",[64,59,56,52,47,40],!1)),Ye._sixStrings.push(new Ye("Guitar Open Em Tuning",[64,59,55,52,47,40],!1)),Ye._sixStrings.push(new Ye("Guitar Open Esus11 Tuning",[64,59,55,52,45,40],!1)),Ye._sixStrings.push(new Ye("Guitar Open F Tuning",[65,60,53,48,45,41],!1)),Ye._sixStrings.push(new Ye("Guitar Open G Tuning",[62,59,55,50,43,38],!1)),Ye._sixStrings.push(new Ye("Guitar Open Gm Tuning",[62,58,55,50,43,38],!1)),Ye._sixStrings.push(new Ye("Guitar Open G6 Tuning",[64,59,55,50,43,38],!1)),Ye._sixStrings.push(new Ye("Guitar Open Gsus4 Tuning",[62,60,55,50,43,38],!1)),Ye._sixStrings.push(new Ye("Guitar Open A Tuning",[64,61,57,52,45,40],!1)),Ye._sixStrings.push(new Ye("Guitar Open Am Tuning",[64,60,57,52,45,40],!1)),Ye._sixStrings.push(new Ye("Guitar Nashville Tuning",[64,59,67,62,57,52],!1)),Ye._sixStrings.push(new Ye("Bass 6 Strings Tuning",[48,43,38,33,28,23],!1)),Ye._sixStrings.push(new Ye("Lute or Vihuela Tuning",[64,59,54,50,45,40],!1)),Ye._defaultTunings.set(5,new Ye("Bass 5 Strings Tuning",[43,38,33,28,23],!0)),Ye._fiveStrings.push(Ye._defaultTunings.get(5)),Ye._fiveStrings.push(new Ye("Banjo Dropped C Tuning",[62,59,55,48,67],!1)),Ye._fiveStrings.push(new Ye("Banjo Open D Tuning",[62,57,54,50,69],!1)),Ye._fiveStrings.push(new Ye("Banjo Open G Tuning",[62,59,55,50,67],!1)),Ye._fiveStrings.push(new Ye("Banjo G Minor Tuning",[62,58,55,50,67],!1)),Ye._fiveStrings.push(new Ye("Banjo G Modal Tuning",[62,57,55,50,67],!1)),Ye._defaultTunings.set(4,new Ye("Bass Standard Tuning",[43,38,33,28],!0)),Ye._fourStrings.push(Ye._defaultTunings.get(4)),Ye._fourStrings.push(new Ye("Bass Tune down  step",[42,37,32,27],!1)),Ye._fourStrings.push(new Ye("Bass Tune down 1 step",[41,36,31,26],!1)),Ye._fourStrings.push(new Ye("Bass Tune down 2 step",[39,34,29,24],!1)),Ye._fourStrings.push(new Ye("Bass Dropped D Tuning",[43,38,33,26],!1)),Ye._fourStrings.push(new Ye("Ukulele C Tuning",[45,40,36,43],!1)),Ye._fourStrings.push(new Ye("Ukulele G Tuning",[52,47,43,38],!1)),Ye._fourStrings.push(new Ye("Mandolin Standard Tuning",[64,57,50,43],!1)),Ye._fourStrings.push(new Ye("Mandolin or Violin Tuning",[76,69,62,55],!1)),Ye._fourStrings.push(new Ye("Viola Tuning",[69,62,55,48],!1)),Ye._fourStrings.push(new Ye("Cello Tuning",[57,50,43,36],!1))}static findTuning(e){let t=Ye.getPresetsFor(e.length);for(let i=0,n=t.length;i<n;i++){let n=t[i],r=!0;for(let t=0,i=e.length;t<i;t++)if(e[t]!==n.tunings[t]){r=!1;break}if(r)return n}return null}finish(){const e=Ye.findTuning(this.tunings);e&&(this.name=e.name,this.isStandard=e.isStandard),this.name=this.name.trim()}}Ye._sevenStrings=[],Ye._sixStrings=[],Ye._fiveStrings=[],Ye._fourStrings=[],Ye._defaultTunings=new Map,Ye.defaultAccidentals=["","#","","#","","","#","","#","","#",""],Ye.defaultSteps=["C","C","D","D","E","F","F","G","G","A","A","B"],Ye.initialize();class Xe{constructor(){this.index=0,this.bars=[],this.chords=new Map,this.capo=0,this.transpositionPitch=0,this.displayTranspositionPitch=0,this.stringTuning=new Ye("",[],!1),this.showTablature=!0,this.showStandardNotation=!0,this.isPercussion=!1,this.standardNotationLineCount=5}get tuning(){return this.stringTuning.tunings}get tuningName(){return this.stringTuning.name}get isStringed(){return this.stringTuning.tunings.length>0}finish(e){this.stringTuning.finish();for(let t=0,i=this.bars.length;t<i;t++)this.bars[t].finish(e)}addChord(e,t){t.staff=this,this.chords.set(e,t)}addBar(e){let t=this.bars;e.staff=this,e.index=t.length,t.length>0&&(e.previousBar=t[t.length-1],e.previousBar.nextBar=e),t.push(e)}}class Qe{constructor(){this.index=0,this.staves=[],this.playbackInfo=new Ze,this.color=new me(200,0,0,255),this.name="",this.shortName="",this.percussionArticulations=[]}ensureStaveCount(e){for(;this.staves.length<e;)this.addStaff(new Xe)}addStaff(e){e.index=this.staves.length,e.track=this,this.staves.push(e)}finish(e){this.shortName||(this.shortName=this.name,this.shortName.length>Qe.ShortNameMaxLength&&(this.shortName=this.shortName.substr(0,Qe.ShortNameMaxLength)));for(let t=0,i=this.staves.length;t<i;t++)this.staves[t].finish(e)}applyLyrics(e){for(let t of e)t.finish();let t=this.staves[0];for(let i=0;i<e.length;i++){let n=e[i];if(n.startBar>=0&&n.startBar<t.bars.length){let r=t.bars[n.startBar].voices[0].beats[0];for(let t=0;t<n.chunks.length&&r;t++){for(;r&&(r.isEmpty||r.isRest);)r=r.nextBeat;r&&(r.lyrics||(r.lyrics=new Array(e.length)),r.lyrics[i]=n.chunks[t],r=r.nextBeat)}}}}}Qe.ShortNameMaxLength=10;class Je{constructor(){this.id=Je._globalBarId++,this.index=0,this.beats=[],this.isEmpty=!0}insertBeat(e,t){t.nextBeat=e.nextBeat,t.nextBeat&&(t.nextBeat.previousBeat=t),t.previousBeat=e,t.voice=this,e.nextBeat=t,this.beats.splice(e.index+1,0,t)}addBeat(e){e.voice=this,e.index=this.beats.length,this.beats.push(e),e.isEmpty||(this.isEmpty=!1)}chain(e){if(this.bar){if(e.index<this.beats.length-1)e.nextBeat=this.beats[e.index+1],e.nextBeat.previousBeat=e;else if(e.isLastOfVoice&&e.voice.bar.nextBar){let t=this.bar.nextBar.voices[this.index];t.beats.length>0?(e.nextBeat=t.beats[0],e.nextBeat.previousBeat=e):e.nextBeat.previousBeat=e}e.chain()}}addGraceBeat(e){if(0===this.beats.length)return void this.addBeat(e);let t=this.beats[this.beats.length-1];this.beats.splice(this.beats.length-1,1),this.addBeat(e),this.addBeat(t),this.isEmpty=!1}getBeatAtPlaybackStart(e){return this._beatLookup.has(e)?this._beatLookup.get(e):null}finish(e){this._beatLookup=new Map;let t=null;for(let e=0;e<this.beats.length;e++){let i=this.beats[e];i.index=e,this.chain(i),i.graceType===m.None?(i.graceGroup=t,t&&(t.isComplete=!0),t=null):(t||(t=new Ve),t.addBeat(i))}let i=0,n=0;for(let t=0;t<this.beats.length;t++){let r=this.beats[t];if(r.index=t,r.finish(e),r.graceType===m.None){if(r.graceGroup){const e=r.graceGroup.beats[0],t=r.graceGroup.beats[r.graceGroup.beats.length-1];if(e.graceType!==m.BendGrace){let i=t.playbackStart+t.playbackDuration-e.playbackStart;switch(e.graceType){case m.BeforeBeat:e.previousBeat?(e.previousBeat.playbackDuration-=i,n=e.previousBeat.voice==this?e.previousBeat.playbackStart+e.previousBeat.playbackDuration:-i):n=-i;for(const e of r.graceGroup.beats)this._beatLookup.delete(e.playbackStart),e.playbackStart=n,this._beatLookup.set(e.playbackStart,r),n+=e.playbackDuration;break;case m.OnBeat:r.playbackDuration-=i,n=t.voice===this?t.playbackStart+t.playbackDuration:-i}}}r.fermata?this.bar.masterBar.addFermata(r.playbackStart,r.fermata):r.fermata=this.bar.masterBar.getFermata(r),this._beatLookup.set(r.playbackStart,r)}r.displayStart=i,r.playbackStart=n,r.finishTuplet(),i+=r.displayDuration,n+=r.playbackDuration}}calculateDuration(){if(this.isEmpty||0===this.beats.length)return 0;let e=this.beats[this.beats.length-1],t=this.beats[0];return e.playbackStart+e.playbackDuration-t.playbackStart}}Je._globalBarId=0,function(e){e[e.No=0]="No",e[e.Eof=1]="Eof",e[e.Number=2]="Number",e[e.DoubleDot=3]="DoubleDot",e[e.Dot=4]="Dot",e[e.String=5]="String",e[e.Tuning=6]="Tuning",e[e.LParensis=7]="LParensis",e[e.RParensis=8]="RParensis",e[e.LBrace=9]="LBrace",e[e.RBrace=10]="RBrace",e[e.Pipe=11]="Pipe",e[e.MetaCommand=12]="MetaCommand",e[e.Multiply=13]="Multiply",e[e.LowerThan=14]="LowerThan",e[e.Property=15]="Property"}(D||(D={}));class et extends he{constructor(t){super(e.AlphaTabErrorType.AlphaTex,t),this.position=0,this.nonTerm="",this.expected=D.No,this.symbol=D.No,Object.setPrototypeOf(this,et.prototype)}static symbolError(e,t,i,n,r=null){let s;s=r?`MalFormed AlphaTex: @${e}: Error on block ${t}, invalid value: ${r}`:`MalFormed AlphaTex: @${e}: Error on block ${t}, expected a ${D[i]} found a ${D[n]}: '${r}'`;let o=new et(s);return o.position=e,o.nonTerm=t,o.expected=i,o.symbol=n,o.symbolData=r,o}static errorMessage(e,t){let i=new et(t="MalFormed AlphaTex: @"+e+": "+t);return i.position=e,i}}class tt extends Ce{constructor(){super(),this._trackChannel=0,this._ch=0,this._curChPos=0,this._sy=D.No,this._allowNegatives=!1,this._allowTuning=!1,this._currentDuration=p.QuadrupleWhole,this._currentDynamics=g.PPP,this._currentTuplet=0,this._staffHasExplicitTuning=!1,this._staffTuningApplied=!1}get name(){return"AlphaTex"}readScore(){try{if(this._allowTuning=!0,this._lyrics=new Map,this.createDefaultScore(),this._curChPos=0,this._currentDuration=p.Quarter,this._currentDynamics=g.F,this._currentTuplet=1,this._ch=this.nextChar(),this._sy=this.newSy(),this._sy===D.LowerThan)throw new xe("Unknown start sign <");this.score(),this.consolidate(),this._score.finish(this.settings),this._score.rebuildRepeatGroups();for(const[e,t]of this._lyrics)this._score.tracks[e].applyLyrics(t);return this._score}catch(e){throw e instanceof et?new xe(e.message):e}}consolidate(){for(let e of this._score.tracks)for(let t of e.staves)for(;t.bars.length<this._score.masterBars.length;){let e=this.newBar(t),i=new ze;i.isEmpty=!0,e.voices[0].addBeat(i)}}error(e,t,i=!0){let n;throw n=i?et.symbolError(this._curChPos,e,t,this._sy,null):et.symbolError(this._curChPos,e,t,t,this._syData),Oe.error(this.name,n.message),n}errorMessage(e){let t=et.errorMessage(this._curChPos,e);throw Oe.error(this.name,t.message),t}createDefaultScore(){this._score=new $e,this._score.tempo=120,this._score.tempoLabel="",this.newTrack()}newTrack(){this._currentTrack=new Qe,this._currentTrack.ensureStaveCount(1),this._currentTrack.playbackInfo.program=25,this._currentTrack.playbackInfo.primaryChannel=this._trackChannel++,this._currentTrack.playbackInfo.secondaryChannel=this._trackChannel++,this._currentStaff=this._currentTrack.staves[0],this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=Ye.getDefaultTuningFor(6).tunings,this._score.addTrack(this._currentTrack),this._lyrics.set(this._currentTrack.index,[]),this._currentDynamics=g.F}parseClefFromString(e){switch(e.toLowerCase()){case"g2":case"treble":return a.G2;case"f4":case"bass":return a.F4;case"c3":case"tenor":return a.C3;case"c4":case"alto":return a.C4;case"n":case"neutral":return a.Neutral;default:return a.G2}}parseClefFromInt(e){switch(e){case 43:return a.G2;case 65:return a.F4;case 48:return a.C3;case 60:return a.C4;default:return a.G2}}parseTripletFeelFromString(e){switch(e.toLowerCase()){case"no":case"none":return O.NoTripletFeel;case"t16":case"triplet-16th":return O.Triplet16th;case"t8":case"triplet-8th":return O.Triplet8th;case"d16":case"dotted-16th":return O.Dotted16th;case"d8":case"dotted-8th":return O.Dotted8th;case"s16":case"scottish-16th":return O.Scottish16th;case"s8":case"scottish-8th":return O.Scottish8th;default:return O.NoTripletFeel}}parseTripletFeelFromInt(e){switch(e){case 0:return O.NoTripletFeel;case 1:return O.Triplet16th;case 2:return O.Triplet8th;case 3:return O.Dotted16th;case 4:return O.Dotted8th;case 5:return O.Scottish16th;case 6:return O.Scottish8th;default:return O.NoTripletFeel}}parseKeySignature(e){switch(e.toLowerCase()){case"cb":return-7;case"gb":return-6;case"db":return-5;case"ab":return-4;case"eb":return-3;case"bb":return-2;case"f":return-1;case"c":return 0;case"g":return 1;case"d":return 2;case"a":return 3;case"e":return 4;case"b":return 5;case"f#":return 6;case"c#":return 7;default:return 0}}nextChar(){let e=this.data.readByte();return-1===e?this._ch=0:(this._ch=e,this._curChPos++),this._ch}newSy(){this._sy=D.No;do{if(this._ch===tt.Eof)this._sy=D.Eof;else if(32===this._ch||11===this._ch||13===this._ch||10===this._ch||9===this._ch)this._ch=this.nextChar();else if(47===this._ch)if(this._ch=this.nextChar(),47===this._ch)for(;13!==this._ch&&10!==this._ch&&this._ch!==tt.Eof;)this._ch=this.nextChar();else if(42===this._ch)for(;0!==this._ch;)if(42===this._ch){if(this._ch=this.nextChar(),47===this._ch){this._ch=this.nextChar();break}}else this._ch=this.nextChar();else this.error("symbol",D.String,!1);else if(34===this._ch||39===this._ch){let e=this._ch;this._ch=this.nextChar();let t="";for(this._sy=D.String;this._ch!==e&&this._ch!==tt.Eof;)t+=String.fromCharCode(this._ch),this._ch=this.nextChar();this._syData=t,this._ch=this.nextChar()}else if(45===this._ch)if(this._allowNegatives&&this.isDigit(this._ch)){let e=this.readNumber();this._sy=D.Number,this._syData=e}else this._sy=D.String,this._syData=this.readName();else if(46===this._ch)this._sy=D.Dot,this._ch=this.nextChar();else if(58===this._ch)this._sy=D.DoubleDot,this._ch=this.nextChar();else if(40===this._ch)this._sy=D.LParensis,this._ch=this.nextChar();else if(92===this._ch){this._ch=this.nextChar();let e=this.readName();this._sy=D.MetaCommand,this._syData=e}else if(41===this._ch)this._sy=D.RParensis,this._ch=this.nextChar();else if(123===this._ch)this._sy=D.LBrace,this._ch=this.nextChar();else if(125===this._ch)this._sy=D.RBrace,this._ch=this.nextChar();else if(124===this._ch)this._sy=D.Pipe,this._ch=this.nextChar();else if(42===this._ch)this._sy=D.Multiply,this._ch=this.nextChar();else if(60===this._ch)this._sy=D.LowerThan,this._ch=this.nextChar();else if(this.isDigit(this._ch)){let e=this.readNumber();this._sy=D.Number,this._syData=e}else if(tt.isLetter(this._ch)){let e=this.readName(),t=this._allowTuning?ge.parseTuning(e):null;t?(this._sy=D.Tuning,this._syData=t):(this._sy=D.String,this._syData=e)}else this.error("symbol",D.String,!1)}while(this._sy===D.No);return this._sy}static isLetter(e){return!tt.isTerminal(e)&&(e>=33&&e<=47||e>=58&&e<=126||e>128)}static isTerminal(e){return 46===e||123===e||125===e||91===e||93===e||40===e||41===e||124===e||39===e||34===e||92===e}isDigit(e){return e>=48&&e<=57||45===e&&this._allowNegatives}readName(){let e="";do{e+=String.fromCharCode(this._ch),this._ch=this.nextChar()}while(tt.isLetter(this._ch)||this.isDigit(this._ch)||35===this._ch);return e}readNumber(){let e="";do{e+=String.fromCharCode(this._ch),this._ch=this.nextChar()}while(this.isDigit(this._ch));return parseInt(e)}score(){if(this._sy===D.Eof)throw new xe("Unexpected end of file");const e=this.metaData(),t=this.bars();if(!e&&!t)throw new xe("No alphaTex data found")}metaData(){let e=!1,t=!0;for(;this._sy===D.MetaCommand&&t;)switch(this._syData.toLowerCase()){case"title":this._sy=this.newSy(),this._sy===D.String?this._score.title=this._syData:this.error("title",D.String,!0),this._sy=this.newSy(),e=!0;break;case"subtitle":this._sy=this.newSy(),this._sy===D.String?this._score.subTitle=this._syData:this.error("subtitle",D.String,!0),this._sy=this.newSy(),e=!0;break;case"artist":this._sy=this.newSy(),this._sy===D.String?this._score.artist=this._syData:this.error("artist",D.String,!0),this._sy=this.newSy(),e=!0;break;case"album":this._sy=this.newSy(),this._sy===D.String?this._score.album=this._syData:this.error("album",D.String,!0),this._sy=this.newSy(),e=!0;break;case"words":this._sy=this.newSy(),this._sy===D.String?this._score.words=this._syData:this.error("words",D.String,!0),this._sy=this.newSy(),e=!0;break;case"music":this._sy=this.newSy(),this._sy===D.String?this._score.music=this._syData:this.error("music",D.String,!0),this._sy=this.newSy(),e=!0;break;case"copyright":this._sy=this.newSy(),this._sy===D.String?this._score.copyright=this._syData:this.error("copyright",D.String,!0),this._sy=this.newSy(),e=!0;break;case"tempo":this._sy=this.newSy(),this._sy===D.Number?this._score.tempo=this._syData:this.error("tempo",D.Number,!0),this._sy=this.newSy(),e=!0;break;default:this.handleStaffMeta()?e=!0:e?this.error("metaDataTags",D.String,!1):t=!1}return e?(this._sy!==D.Dot&&this.error("song",D.Dot,!0),this._sy=this.newSy()):this._sy===D.Dot&&(this._sy=this.newSy()),e}handleStaffMeta(){switch(this._syData.toLowerCase()){case"capo":return this._sy=this.newSy(),this._sy===D.Number?this._currentStaff.capo=this._syData:this.error("capo",D.Number,!0),this._sy=this.newSy(),!0;case"tuning":this._sy=this.newSy();let e=this._currentStaff.tuning.length;switch(this._staffHasExplicitTuning=!0,this._staffTuningApplied=!1,this._sy){case D.String:let e=this._syData.toLowerCase();"piano"===e||"none"===e||"voice"===e?(this._currentStaff.stringTuning.tunings=[],this._currentStaff.displayTranspositionPitch=0):this.error("tuning",D.Tuning,!0),this._sy=this.newSy();break;case D.Tuning:let t=[];do{let e=this._syData;t.push(e.realValue),this._sy=this.newSy()}while(this._sy===D.Tuning);this._currentStaff.stringTuning.tunings=t;break;default:this.error("tuning",D.Tuning,!0)}return e!==this._currentStaff.tuning.length&&this._currentStaff.chords.size>0&&this.errorMessage("Tuning must be defined before any chord"),!0;case"instrument":if(this._sy=this.newSy(),this._staffTuningApplied=!1,this._sy===D.Number){let e=this._syData;e>=0&&e<=128?this._currentTrack.playbackInfo.program=this._syData:this.error("instrument",D.Number,!1)}else if(this._sy===D.String){let e=this._syData.toLowerCase();this._currentTrack.playbackInfo.program=de.getValue(e)}else this.error("instrument",D.Number,!0);return this._sy=this.newSy(),!0;case"lyrics":this._sy=this.newSy();let t=new je;return t.startBar=0,t.text="",this._sy===D.Number&&(t.startBar=this._syData,this._sy=this.newSy()),this._sy===D.String?(t.text=this._syData,this._sy=this.newSy()):this.error("lyrics",D.String,!0),this._lyrics.get(this._currentTrack.index).push(t),!0;case"chord":this._sy=this.newSy();let i=new He;this.chordProperties(i),this._sy===D.String?(i.name=this._syData,this._sy=this.newSy()):this.error("chord-name",D.Number,!0);for(let e=0;e<this._currentStaff.tuning.length;e++)this._sy===D.Number?i.strings.push(this._syData):this._sy===D.String&&"x"===this._syData.toLowerCase()&&i.strings.push(-1),this._sy=this.newSy();return this._currentStaff.addChord(this.getChordId(this._currentStaff,i.name),i),!0;default:return!1}}chordProperties(e){if(this._sy===D.LBrace){for(this._sy=this.newSy();this._sy===D.String;)switch(this._syData.toLowerCase()){case"firstfret":switch(this._sy=this.newSy(),this._sy){case D.Number:e.firstFret=this._syData;break;default:this.error("chord-firstfret",D.Number,!0)}this._sy=this.newSy();break;case"showdiagram":switch(this._sy=this.newSy(),this._sy){case D.String:e.showDiagram="false"!==this._syData.toLowerCase();break;case D.Number:e.showDiagram=0!==this._syData;break;default:this.error("chord-showdiagram",D.String,!0)}this._sy=this.newSy();break;case"showfingering":switch(this._sy=this.newSy(),this._sy){case D.String:e.showDiagram="false"!==this._syData.toLowerCase();break;case D.Number:e.showFingering=0!==this._syData;break;default:this.error("chord-showfingering",D.String,!0)}this._sy=this.newSy();break;case"showname":switch(this._sy=this.newSy(),this._sy){case D.String:e.showName="false"!==this._syData.toLowerCase();break;case D.Number:e.showName=0!==this._syData;break;default:this.error("chord-showname",D.String,!0)}this._sy=this.newSy();break;case"barre":for(this._sy=this.newSy();this._sy===D.Number;)e.barreFrets.push(this._syData),this._sy=this.newSy();break;default:this.error("chord-properties",D.String,!1)}this._sy!==D.RBrace&&this.error("chord-properties",D.RBrace,!0),this._sy=this.newSy()}}bars(){let e=this.bar();for(;this._sy!==D.Eof;)if(this._sy===D.Pipe)this._sy=this.newSy(),this.bar();else{if(this._sy!==D.MetaCommand)break;this.bar()}return e}trackStaffMeta(){let e=!1;if(this._sy===D.MetaCommand){e=!0;let t=this._syData.toLowerCase();"track"===t&&(this._staffHasExplicitTuning=!1,this._staffTuningApplied=!1,this._sy=this.newSy(),this._score.masterBars.length>0&&this.newTrack(),this._sy===D.String&&(this._currentTrack.name=this._syData,this._sy=this.newSy()),this._sy===D.String&&(this._currentTrack.shortName=this._syData,this._sy=this.newSy())),this._sy===D.MetaCommand&&(t=this._syData.toLowerCase(),"staff"===t&&(this._staffHasExplicitTuning=!1,this._staffTuningApplied=!1,this._sy=this.newSy(),this._currentTrack.staves[0].bars.length>0&&(this._currentTrack.ensureStaveCount(this._currentTrack.staves.length+1),this._currentStaff=this._currentTrack.staves[this._currentTrack.staves.length-1],this._currentDynamics=g.F),this.staffProperties()))}return e}staffProperties(){if(this._sy!==D.LBrace)return;this._sy=this.newSy();let e=!1,t=!1;for(;this._sy===D.String;)switch(this._syData.toLowerCase()){case"score":e=!0,this._sy=this.newSy();break;case"tabs":t=!0,this._sy=this.newSy();break;default:this.error("staff-properties",D.String,!1)}(e||t)&&(this._currentStaff.showStandardNotation=e,this._currentStaff.showTablature=t),this._sy!==D.RBrace&&this.error("staff-properties",D.RBrace,!0),this._sy=this.newSy()}bar(){const e=this.trackStaffMeta();let t=this.newBar(this._currentStaff);if(this._currentStaff.bars.length>this._score.masterBars.length){let e=new Ue;this._score.addMasterBar(e),e.index>0&&(e.keySignature=e.previousMasterBar.keySignature,e.keySignatureType=e.previousMasterBar.keySignatureType,e.timeSignatureDenominator=e.previousMasterBar.timeSignatureDenominator,e.timeSignatureNumerator=e.previousMasterBar.timeSignatureNumerator,e.tripletFeel=e.previousMasterBar.tripletFeel)}const i=this.barMeta(t);if(!this._staffTuningApplied&&!this._staffHasExplicitTuning){const e=this._currentTrack.playbackInfo.program;this._currentStaff.displayTranspositionPitch=0,this._currentStaff.stringTuning.tunings=[],15==e||e>=24&&e<=31?(this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=Ye.getDefaultTuningFor(6).tunings):e>=32&&e<=39?(this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=[43,38,33,28]):40==e||44==e||45==e||48==e||49==e||50==e||51==e?this._currentStaff.stringTuning.tunings=[52,57,50,43]:41==e?this._currentStaff.stringTuning.tunings=[57,50,43,36]:42==e?this._currentStaff.stringTuning.tunings=[45,38,31,24]:43==e?(this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=[43,38,33,28]):105==e?this._currentStaff.stringTuning.tunings=[50,47,43,38,55]:106==e?this._currentStaff.stringTuning.tunings=[57,52,45]:107==e?this._currentStaff.stringTuning.tunings=[52,45,38,31]:110==e&&(this._currentStaff.stringTuning.tunings=[64,57,50,43]),this._staffTuningApplied=!0}let n=!1,r=t.voices[0];for(;this._sy!==D.Pipe&&this._sy!==D.Eof&&this.beat(r);)n=!0;if(0===r.beats.length){let e=new ze;e.isEmpty=!0,r.addBeat(e)}return e||i||n}newBar(e){let t=new Ee;e.addBar(t),t.index>0&&(t.clef=t.previousBar.clef);let i=new Je;return t.addVoice(i),t}beat(e){this.beatDuration();let t=new ze;if(e.addBeat(t),this._sy===D.LParensis){for(this._sy=this.newSy(),this.note(t);this._sy!==D.RParensis&&this._sy!==D.Eof&&this.note(t););this._sy!==D.RParensis&&this.error("note-list",D.RParensis,!0),this._sy=this.newSy()}else if(this._sy===D.String&&"r"===this._syData.toLowerCase())this._sy=this.newSy();else if(!this.note(t))return e.beats.splice(e.beats.length-1,1),!1;this._sy===D.Dot&&(this._allowNegatives=!0,this._sy=this.newSy(),this._allowNegatives=!1,this._sy!==D.Number&&this.error("duration",D.Number,!0),this._currentDuration=this.parseDuration(this._syData),this._sy=this.newSy()),t.duration=this._currentDuration,t.dynamics=this._currentDynamics,1===this._currentTuplet||t.hasTuplet||this.applyTuplet(t,this._currentTuplet);let i=1;this._sy===D.Multiply&&(this._sy=this.newSy(),this._sy!==D.Number?this.error("multiplier",D.Number,!0):i=this._syData,this._sy=this.newSy()),this.beatEffects(t);for(let n=0;n<i-1;n++)e.addBeat(We.clone(t));return!0}beatDuration(){if(this._sy===D.DoubleDot&&(this._allowNegatives=!0,this._sy=this.newSy(),this._allowNegatives=!1,this._sy!==D.Number&&this.error("duration",D.Number,!0),this._currentDuration=this.parseDuration(this._syData),this._currentTuplet=1,this._sy=this.newSy(),this._sy===D.LBrace)){for(this._sy=this.newSy();this._sy===D.String;)switch(this._syData.toLowerCase()){case"tu":this._sy=this.newSy(),this._sy!==D.Number&&this.error("duration-tuplet",D.Number,!0),this._currentTuplet=this._syData,this._sy=this.newSy();break;default:this.error("beat-duration",D.String,!1)}this._sy!==D.RBrace&&this.error("beat-duration",D.RBrace,!0),this._sy=this.newSy()}}beatEffects(e){if(this._sy===D.LBrace){for(this._sy=this.newSy();this._sy===D.String;)this._syData=this._syData.toLowerCase(),this.applyBeatEffect(e)||this.error("beat-effects",D.String,!1);this._sy!==D.RBrace&&this.error("beat-effects",D.RBrace,!0),this._sy=this.newSy()}}applyBeatEffect(e){let t=this._syData.toLowerCase();if("f"===t)return e.fadeIn=!0,this._sy=this.newSy(),!0;if("v"===t)return e.vibrato=w.Slight,this._sy=this.newSy(),!0;if("s"===t)return e.slap=!0,this._sy=this.newSy(),!0;if("p"===t)return e.pop=!0,this._sy=this.newSy(),!0;if("tt"===t)return e.tap=!0,this._sy=this.newSy(),!0;if("dd"===t)return e.dots=2,this._sy=this.newSy(),!0;if("d"===t)return e.dots=1,this._sy=this.newSy(),!0;if("su"===t)return e.pickStroke=S.Up,this._sy=this.newSy(),!0;if("sd"===t)return e.pickStroke=S.Down,this._sy=this.newSy(),!0;if("tu"===t)return this._sy=this.newSy(),this._sy!==D.Number?(this.error("tuplet",D.Number,!0),!1):(this.applyTuplet(e,this._syData),this._sy=this.newSy(),!0);if("tb"===t||"tbe"===t){let i="tbe"===t;if(this._sy=this.newSy(),this._sy!==D.LParensis)return this.error("tremolobar-effect",D.LParensis,!0),!1;for(this._allowNegatives=!0,this._sy=this.newSy();this._sy!==D.RParensis&&this._sy!==D.Eof;){let t=0,n=0;if(i){if(this._sy!==D.Number)return this.error("tremolobar-effect",D.Number,!0),!1;if(t=this._syData,this._sy=this.newSy(),this._sy!==D.Number)return this.error("tremolobar-effect",D.Number,!0),!1;n=this._syData}else{if(this._sy!==D.Number)return this.error("tremolobar-effect",D.Number,!0),!1;t=0,n=this._syData}e.addWhammyBarPoint(new Le(t,n)),this._sy=this.newSy()}for(;e.whammyBarPoints.length>60;)e.removeWhammyBarPoint(e.whammyBarPoints.length-1);if(i)e.whammyBarPoints.sort(((e,t)=>e.offset-t.offset));else{let t=e.whammyBarPoints.length,i=60/t|0,n=0;for(;n<t;)e.whammyBarPoints[n].offset=Math.min(60,n*i),n++}return this._allowNegatives=!1,this._sy!==D.RParensis?(this.error("tremolobar-effect",D.RParensis,!0),!1):(this._sy=this.newSy(),!0)}if("ch"===t){this._sy=this.newSy();let t=this._syData,i=this.getChordId(this._currentStaff,t);if(!this._currentStaff.chords.has(i)){let e=new He;e.showDiagram=!1,e.name=t,this._currentStaff.addChord(i,e)}return e.chordId=i,this._sy=this.newSy(),!0}if("gr"===t)return this._sy=this.newSy(),"ob"===this._syData.toLowerCase()?(e.graceType=m.OnBeat,this._sy=this.newSy()):"b"===this._syData.toLowerCase()?(e.graceType=m.BendGrace,this._sy=this.newSy()):e.graceType=m.BeforeBeat,!0;if("dy"===t){switch(this.newSy(),this._syData.toLowerCase()){case"ppp":e.dynamics=g.PPP;break;case"pp":e.dynamics=g.PP;break;case"p":e.dynamics=g.P;break;case"mp":e.dynamics=g.MP;break;case"mf":e.dynamics=g.MF;break;case"f":e.dynamics=g.F;break;case"ff":e.dynamics=g.FF;break;case"fff":e.dynamics=g.FFF}return this._currentDynamics=e.dynamics,this.newSy(),!0}if("cre"===t)return e.crescendo=f.Crescendo,this.newSy(),!0;if("dec"===t)return e.crescendo=f.Decrescendo,this.newSy(),!0;if("tp"===t){this._sy=this.newSy();let t=p.Eighth;if(this._sy===D.Number){switch(this._syData){case 8:t=p.Eighth;break;case 16:t=p.Sixteenth;break;case 32:t=p.ThirtySecond;break;default:t=p.Eighth}this._sy=this.newSy()}return e.tremoloSpeed=t,!0}return!1}getChordId(e,t){return t.toLowerCase()+e.index+e.track.index}applyTuplet(e,t){switch(t){case 3:e.tupletNumerator=3,e.tupletDenominator=2;break;case 5:e.tupletNumerator=5,e.tupletDenominator=4;break;case 6:e.tupletNumerator=6,e.tupletDenominator=4;break;case 7:e.tupletNumerator=7,e.tupletDenominator=4;break;case 9:e.tupletNumerator=9,e.tupletDenominator=8;break;case 10:e.tupletNumerator=10,e.tupletDenominator=8;break;case 11:e.tupletNumerator=11,e.tupletDenominator=8;break;case 12:e.tupletNumerator=12,e.tupletDenominator=8;break;default:e.tupletNumerator=1,e.tupletDenominator=1}}note(e){let t=!1,i=!1,n=-1,r=-1,s=-1;switch(this._sy){case D.Number:n=this._syData;break;case D.String:t="x"===this._syData,i="-"===this._syData,i||t?n=0:this.error("note-fret",D.Number,!0);break;case D.Tuning:let e=this._syData;r=e.octave,s=e.noteValue;break;default:return!1}this._sy=this.newSy();let o=-1===r&&this._currentStaff.tuning.length>0,a=-1;o&&(this._sy!==D.Dot&&this.error("note",D.Dot,!0),this._sy=this.newSy(),this._sy!==D.Number&&this.error("note-string",D.Number,!0),a=this._syData,(a<1||a>this._currentStaff.tuning.length)&&this.error("note-string",D.Number,!1),this._sy=this.newSy());let l=new Ae;return o?(l.string=this._currentStaff.tuning.length-(a-1),l.isDead=t,l.isTieDestination=i,i||(l.fret=n)):(l.octave=r,l.tone=s,l.isTieDestination=i),e.addNote(l),this.noteEffects(l),!0}noteEffects(e){if(this._sy===D.LBrace){for(this._sy=this.newSy();this._sy===D.String;){let t=this._syData.toLowerCase();if(this._syData=t,"b"===t||"be"===t){let t="be"===this._syData;for(this._sy=this.newSy(),this._sy!==D.LParensis&&this.error("bend-effect",D.LParensis,!0),this._sy=this.newSy();this._sy!==D.RParensis&&this._sy!==D.Eof;){let i=0,n=0;t?(this._sy!==D.Number&&this.error("bend-effect-value",D.Number,!0),i=this._syData,this._sy=this.newSy(),this._sy!==D.Number&&this.error("bend-effect-value",D.Number,!0),n=this._syData):(this._sy!==D.Number&&this.error("bend-effect-value",D.Number,!0),n=this._syData),e.addBendPoint(new Le(i,n)),this._sy=this.newSy()}for(;e.bendPoints.length>60;)e.bendPoints.splice(e.bendPoints.length-1,1);if(t)e.bendPoints.sort(((e,t)=>e.offset-t.offset));else{let t=e.bendPoints.length,i=60/(t-1)|0,n=0;for(;n<t;)e.bendPoints[n].offset=Math.min(60,n*i),n++}this._sy!==D.RParensis&&this.error("bend-effect",D.RParensis,!0),this._sy=this.newSy()}else if("nh"===t)e.harmonicType=b.Natural,this._sy=this.newSy();else if("ah"===t)e.harmonicType=b.Artificial,this._sy=this.newSy();else if("th"===t)e.harmonicType=b.Tap,this._sy=this.newSy();else if("ph"===t)e.harmonicType=b.Pinch,this._sy=this.newSy();else if("sh"===t)e.harmonicType=b.Semi,this._sy=this.newSy();else if("tr"===t){this._sy=this.newSy(),this._sy!==D.Number&&this.error("trill-effect",D.Number,!0);let t=this._syData;this._sy=this.newSy();let i=p.Sixteenth;if(this._sy===D.Number){switch(this._syData){case 16:i=p.Sixteenth;break;case 32:i=p.ThirtySecond;break;case 64:i=p.SixtyFourth;break;default:i=p.Sixteenth}this._sy=this.newSy()}e.trillValue=t+e.stringTuning,e.trillSpeed=i}else if("v"===t)this._sy=this.newSy(),e.vibrato=w.Slight;else if("sl"===t)this._sy=this.newSy(),e.slideOutType=_.Legato;else if("ss"===t)this._sy=this.newSy(),e.slideOutType=_.Shift;else if("sib"===t)this._sy=this.newSy(),e.slideInType=y.IntoFromBelow;else if("sia"===t)this._sy=this.newSy(),e.slideInType=y.IntoFromAbove;else if("sou"===t)this._sy=this.newSy(),e.slideOutType=_.OutUp;else if("sod"===t)this._sy=this.newSy(),e.slideOutType=_.OutDown;else if("psd"===t)this._sy=this.newSy(),e.slideOutType=_.PickSlideDown;else if("psu"===t)this._sy=this.newSy(),e.slideOutType=_.PickSlideUp;else if("h"===t)this._sy=this.newSy(),e.isHammerPullOrigin=!0;else if("lht"===t)this._sy=this.newSy(),e.isLeftHandTapped=!0;else if("g"===t)this._sy=this.newSy(),e.isGhost=!0;else if("ac"===t)this._sy=this.newSy(),e.accentuated=s.Normal;else if("hac"===t)this._sy=this.newSy(),e.accentuated=s.Heavy;else if("pm"===t)this._sy=this.newSy(),e.isPalmMute=!0;else if("st"===t)this._sy=this.newSy(),e.isStaccato=!0;else if("lr"===t)this._sy=this.newSy(),e.isLetRing=!0;else if("x"===t)this._sy=this.newSy(),e.fret=0,e.isDead=!0;else if("-"===t||"t"===t)this._sy=this.newSy(),e.isTieDestination=!0;else if("lf"===t){this._sy=this.newSy();let t=i.Thumb;this._sy===D.Number&&(t=this.toFinger(this._syData),this._sy=this.newSy()),e.leftHandFinger=t}else if("rf"===t){this._sy=this.newSy();let t=i.Thumb;this._sy===D.Number&&(t=this.toFinger(this._syData),this._sy=this.newSy()),e.rightHandFinger=t}else this.applyBeatEffect(e.beat)||this.error(t,D.String,!1)}this._sy!==D.RBrace&&this.error("note-effect",D.RBrace,!1),this._sy=this.newSy()}}toFinger(e){switch(e){case 1:return i.Thumb;case 2:return i.IndexFinger;case 3:return i.MiddleFinger;case 4:return i.AnnularFinger;case 5:return i.LittleFinger}return i.Thumb}parseDuration(e){switch(e){case-4:return p.QuadrupleWhole;case-2:return p.DoubleWhole;case 1:return p.Whole;case 2:return p.Half;case 4:return p.Quarter;case 8:return p.Eighth;case 16:return p.Sixteenth;case 32:return p.ThirtySecond;case 64:return p.SixtyFourth;case 128:return p.OneHundredTwentyEighth;default:return p.Quarter}}barMeta(e){let t=!1,i=e.masterBar;for(;this._sy===D.MetaCommand;){t=!0;let n=this._syData.toLowerCase();if("ts"===n)this._sy=this.newSy(),this._sy!==D.Number&&this.error("timesignature-numerator",D.Number,!0),i.timeSignatureNumerator=this._syData,this._sy=this.newSy(),this._sy!==D.Number&&this.error("timesignature-denominator",D.Number,!0),i.timeSignatureDenominator=this._syData,this._sy=this.newSy();else if("ro"===n)i.isRepeatStart=!0,this._sy=this.newSy();else if("rc"===n)this._sy=this.newSy(),this._sy!==D.Number&&this.error("repeatclose",D.Number,!0),i.repeatCount=this._syData,this._sy=this.newSy();else if("ks"===n)this._sy=this.newSy(),this._sy!==D.String&&this.error("keysignature",D.String,!0),i.keySignature=this.parseKeySignature(this._syData.toLowerCase()),this._sy=this.newSy();else if("clef"===n){switch(this._sy=this.newSy(),this._sy){case D.String:e.clef=this.parseClefFromString(this._syData.toLowerCase());break;case D.Number:e.clef=this.parseClefFromInt(this._syData);break;case D.Tuning:let t=this._syData;e.clef=this.parseClefFromInt(t.realValue);break;default:this.error("clef",D.String,!0)}this._sy=this.newSy()}else if("tempo"===n){this._sy=this.newSy(),this._sy!==D.Number&&this.error("tempo",D.Number,!0);let e=new ke;e.isLinear=!1,e.type=o.Tempo,e.value=this._syData,i.tempoAutomation=e,this._sy=this.newSy()}else if("section"===n){this._sy=this.newSy(),this._sy!==D.String&&this.error("section",D.String,!0);let e=this._syData;this._sy=this.newSy();let t="";this._sy===D.String&&(t=e,e=this._syData,this._sy=this.newSy());let n=new qe;n.marker=t,n.text=e,i.section=n}else if("tf"===n){switch(this._allowTuning=!1,this._sy=this.newSy(),this._allowTuning=!0,this._sy){case D.String:i.tripletFeel=this.parseTripletFeelFromString(this._syData.toLowerCase());break;case D.Number:i.tripletFeel=this.parseTripletFeelFromInt(this._syData);break;default:this.error("triplet-feel",D.String,!0)}this._sy=this.newSy()}else"ac"===n?(i.isAnacrusis=!0,this._sy=this.newSy()):0!==e.index||this.handleStaffMeta()||this.error("measure-effects",D.String,!1)}if(0===i.index&&!i.tempoAutomation){let e=new ke;e.isLinear=!1,e.type=o.Tempo,e.value=this._score.tempo,i.tempoAutomation=e}return t}}tt.Eof=0;class it{static uint16ToInt16(e){return it._dataView.setUint16(0,e,!0),it._dataView.getInt16(0,!0)}static int16ToUint32(e){return it._dataView.setInt16(0,e,!0),it._dataView.getUint32(0,!0)}static int32ToUint16(e){return it._dataView.setInt32(0,e,!0),it._dataView.getUint16(0,!0)}static int32ToInt16(e){return it._dataView.setInt32(0,e,!0),it._dataView.getInt16(0,!0)}static int32ToUint32(e){return it._dataView.setInt32(0,e,!0),it._dataView.getUint32(0,!0)}static uint8ToInt8(e){return it._dataView.setUint8(0,e),it._dataView.getInt8(0)}}it._conversionBuffer=new ArrayBuffer(8),it._dataView=new DataView(it._conversionBuffer);class nt{static readInt32BE(e){return e.readByte()<<24|e.readByte()<<16|e.readByte()<<8|e.readByte()}static readInt32LE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte();return e.readByte()<<24|n<<16|i<<8|t}static readUInt32LE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte();return e.readByte()<<24|n<<16|i<<8|t}static decodeUInt32LE(e,t){let i=e[t],n=e[t+1],r=e[t+2];return e[t+3]<<24|r<<16|n<<8|i}static readUInt16LE(e){let t=e.readByte(),i=e.readByte();return it.int32ToUint16(i<<8|t)}static readInt16LE(e){let t=e.readByte(),i=e.readByte();return it.int32ToInt16(i<<8|t)}static readUInt32BE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte(),r=e.readByte();return it.int32ToUint32(t<<24|i<<16|n<<8|r)}static readUInt16BE(e){let t=e.readByte(),i=e.readByte();return it.int32ToInt16(t<<8|i)}static readInt16BE(e){let t=e.readByte(),i=e.readByte();return it.int32ToInt16(t<<8|i)}static readByteArray(e,t){let i=new Uint8Array(t);return e.read(i,0,t),i}static read8BitChars(e,t){let i=new Uint8Array(t);return e.read(i,0,i.length),nt.toString(i,"utf-8")}static read8BitString(e){let t="",i=e.readByte();for(;0!==i;)t+=String.fromCharCode(i),i=e.readByte();return t}static read8BitStringLength(e,t){let i="",n=-1;for(let r=0;r<t;r++){let t=e.readByte();0===t&&-1===n&&(n=r),i+=String.fromCharCode(t)}let r=i;return n>=0?r.substr(0,n):r}static readSInt8(e){let t=e.readByte();return-256*((255&t)>>7)+(255&t)}static readInt24(e,t){let i=e[t]|e[t+1]<<8|e[t+2]<<16;return 8388608==(8388608&i)&&(i|=255<<24),i}static readInt16(e,t){return it.int32ToInt16(e[t]|e[t+1]<<8)}static toString(e,t){let i=nt.detectEncoding(e);return i&&(t=i),t||(t="utf-8"),new TextDecoder(t).decode(e.buffer)}static detectEncoding(e){return e.length>2&&254===e[0]&&255===e[1]?"utf-16be":e.length>2&&255===e[0]&&254===e[1]?"utf-16le":e.length>4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3]?"utf-32be":e.length>4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3]?"utf-32le":null}static stringToBytes(e){return(new TextEncoder).encode(e)}static writeInt32BE(e,t){e.writeByte(t>>24&255),e.writeByte(t>>16&255),e.writeByte(t>>8&255),e.writeByte(t>>0&255)}static writeInt32LE(e,t){e.writeByte(t>>0&255),e.writeByte(t>>8&255),e.writeByte(t>>16&255),e.writeByte(t>>24&255)}static writeUInt16LE(e,t){e.writeByte(t>>0&255),e.writeByte(t>>8&255)}static writeInt16LE(e,t){e.writeByte(t>>0&255),e.writeByte(t>>8&255)}}class rt extends Ce{constructor(){super(),this._versionNumber=0,this._globalTripletFeel=O.NoTripletFeel,this._lyricsTrack=0,this._lyrics=[],this._barCount=0,this._trackCount=0,this._playbackInfos=[],this._beatTextChunksByTrack=new Map}get name(){return"Guitar Pro 3-5"}readScore(){return this.readVersion(),this._score=new $e,this.readScoreInformation(),this._versionNumber<500&&(this._globalTripletFeel=st.gpReadBool(this.data)?O.Triplet8th:O.NoTripletFeel),this._versionNumber>=400&&this.readLyrics(),this._versionNumber>=510&&this.data.skip(19),this._versionNumber>=500&&(this.readPageSetup(),this._score.tempoLabel=st.gpReadStringIntByte(this.data,this.settings.importer.encoding)),this._score.tempo=nt.readInt32LE(this.data),this._versionNumber>=510&&st.gpReadBool(this.data),nt.readInt32LE(this.data),this._versionNumber>=400&&this.data.readByte(),this.readPlaybackInfos(),this._versionNumber>=500&&(this.data.skip(38),this.data.skip(4)),this._barCount=nt.readInt32LE(this.data),this._trackCount=nt.readInt32LE(this.data),this.readMasterBars(),this.readTracks(),this.readBars(),this._score.masterBars.length>0&&(this._score.masterBars[0].tempoAutomation=ke.buildTempoAutomation(!1,0,this._score.tempo,2),this._score.masterBars[0].tempoAutomation.text=this._score.tempoLabel),this._score.finish(this.settings),this._lyrics&&this._lyricsTrack>=0&&this._score.tracks[this._lyricsTrack].applyLyrics(this._lyrics),this._score}readVersion(){let e=st.gpReadStringByteLength(this.data,30,this.settings.importer.encoding);if(!e.startsWith(rt.VersionString))throw new xe("Unsupported format");e=e.substr(rt.VersionString.length+1);let t=e.indexOf(String.fromCharCode(46));this._versionNumber=100*parseInt(e.substr(0,t))+parseInt(e.substr(t+1)),Oe.debug(this.name,"Guitar Pro version "+e+" detected")}readScoreInformation(){var e;this._score.title=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.subTitle=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.artist=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.album=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.words=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.music=this._versionNumber>=500?st.gpReadStringIntUnused(this.data,this.settings.importer.encoding):this._score.words,this._score.copyright=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.tab=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.instructions=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding);let t=nt.readInt32LE(this.data),i="";for(let n=0;n<t;n++)n>0&&(i+="\r\n"),i+=null===(e=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding))||void 0===e?void 0:e.toString();this._score.notices=i}readLyrics(){this._lyrics=[],this._lyricsTrack=nt.readInt32LE(this.data)-1;for(let e=0;e<5;e++){let e=new je;e.startBar=nt.readInt32LE(this.data)-1,e.text=st.gpReadStringInt(this.data,this.settings.importer.encoding),this._lyrics.push(e)}}readPageSetup(){this.data.skip(30);for(let e=0;e<10;e++)st.gpReadStringIntByte(this.data,this.settings.importer.encoding)}readPlaybackInfos(){this._playbackInfos=[];for(let e=0;e<64;e++){let t=new Ze;t.primaryChannel=e,t.secondaryChannel=e,t.program=nt.readInt32LE(this.data),t.volume=this.data.readByte(),t.balance=this.data.readByte(),this.data.skip(6),this._playbackInfos.push(t)}}readMasterBars(){for(let e=0;e<this._barCount;e++)this.readMasterBar()}readMasterBar(){let e=null;this._score.masterBars.length>0&&(e=this._score.masterBars[this._score.masterBars.length-1]);let t=new Ue,i=this.data.readByte();if(0!=(1&i)?t.timeSignatureNumerator=this.data.readByte():e&&(t.timeSignatureNumerator=e.timeSignatureNumerator),0!=(2&i)?t.timeSignatureDenominator=this.data.readByte():e&&(t.timeSignatureDenominator=e.timeSignatureDenominator),t.isRepeatStart=0!=(4&i),0!=(8&i)&&(t.repeatCount=this.data.readByte()+(this._versionNumber>=500?0:1)),0!=(16&i))if(this._versionNumber<500){let i=e,n=0;for(;i&&(!i.isRepeatEnd||i===e)&&!i.isRepeatStart;)n|=i.alternateEndings,i=i.previousMasterBar;let r=0,s=this.data.readByte();for(let e=0;e<8;e++){let t=1<<e;s>e&&0==(n&t)&&(r|=t)}t.alternateEndings=r}else t.alternateEndings=this.data.readByte();if(0!=(32&i)){let e=new qe;e.text=st.gpReadStringIntByte(this.data,this.settings.importer.encoding),e.marker="",st.gpReadColor(this.data,!1),t.section=e}if(0!=(64&i)?(t.keySignature=nt.readSInt8(this.data),t.keySignatureType=this.data.readByte()):e&&(t.keySignature=e.keySignature,t.keySignatureType=e.keySignatureType),this._versionNumber>=500&&0!=(3&i)&&this.data.skip(4),this._versionNumber>=500&&0==(16&i)&&(t.alternateEndings=this.data.readByte()),this._versionNumber>=500){switch(this.data.readByte()){case 1:t.tripletFeel=O.Triplet8th;break;case 2:t.tripletFeel=O.Triplet16th}this.data.readByte()}else t.tripletFeel=this._globalTripletFeel;t.isDoubleBar=0!=(128&i),this._score.addMasterBar(t)}readTracks(){for(let e=0;e<this._trackCount;e++)this.readTrack()}readTrack(){let e=new Qe;e.ensureStaveCount(1),this._score.addTrack(e);let t=e.staves[0],i=this.data.readByte();e.name=st.gpReadStringByteLength(this.data,40,this.settings.importer.encoding),0!=(1&i)&&(t.isPercussion=!0);let n=nt.readInt32LE(this.data),r=[];for(let e=0;e<7;e++){let t=nt.readInt32LE(this.data);n>e&&r.push(t)}t.stringTuning.tunings=r;let s=nt.readInt32LE(this.data),o=nt.readInt32LE(this.data)-1,a=nt.readInt32LE(this.data)-1;if(this.data.skip(4),o>=0&&o<this._playbackInfos.length){let n=this._playbackInfos[o];n.port=s,n.isSolo=0!=(16&i),n.isMute=0!=(32&i),n.secondaryChannel=a,de.isGuitar(n.program)&&(t.displayTranspositionPitch=-12),e.playbackInfo=n}t.capo=nt.readInt32LE(this.data),e.color=st.gpReadColor(this.data,!1),this._versionNumber>=500&&(this.data.readByte(),this.data.readByte(),this.data.skip(43)),this._versionNumber>=510&&(this.data.skip(4),st.gpReadStringIntByte(this.data,this.settings.importer.encoding),st.gpReadStringIntByte(this.data,this.settings.importer.encoding))}readBars(){for(let e=0;e<this._barCount;e++)for(let e=0;e<this._trackCount;e++)this.readBar(this._score.tracks[e])}readBar(e){let t=new Ee,i=e.staves[0];i.isPercussion&&(t.clef=a.Neutral),i.addBar(t);let n=1;this._versionNumber>=500&&(this.data.readByte(),n=2);for(let i=0;i<n;i++)this.readVoice(e,t)}readVoice(e,t){let i=nt.readInt32LE(this.data);if(0===i)return;let n=new Je;t.addVoice(n);for(let r=0;r<i;r++)this.readBeat(e,t,n)}readBeat(e,t,i){let n=new ze,r=this.data.readByte();if(0!=(1&r)&&(n.dots=1),0!=(64&r)){let e=this.data.readByte();n.isEmpty=0==(2&e)}switch(i.addBeat(n),nt.readSInt8(this.data)){case-2:n.duration=p.Whole;break;case-1:n.duration=p.Half;break;case 0:n.duration=p.Quarter;break;case 1:n.duration=p.Eighth;break;case 2:n.duration=p.Sixteenth;break;case 3:n.duration=p.ThirtySecond;break;case 4:n.duration=p.SixtyFourth;break;default:n.duration=p.Quarter}if(0!=(32&r))switch(n.tupletNumerator=nt.readInt32LE(this.data),n.tupletNumerator){case 1:n.tupletDenominator=1;break;case 3:n.tupletDenominator=2;break;case 5:case 6:case 7:n.tupletDenominator=4;break;case 9:case 10:case 11:case 12:case 13:n.tupletDenominator=8;break;case 2:case 4:case 8:break;default:n.tupletNumerator=1,n.tupletDenominator=1}0!=(2&r)&&this.readChord(n);let s=this.settings.importer.beatTextAsLyrics&&e.index!==this._lyricsTrack;if(0!=(4&r)){const t=st.gpReadStringIntUnused(this.data,this.settings.importer.encoding);if(s){const i=new je;i.text=t.trim(),i.finish(!0);const n=[];for(let e=i.chunks.length-1;e>=0;e--)n.push(i.chunks[e]);this._beatTextChunksByTrack.set(e.index,n)}else n.text=t}let o=b.None;0!=(8&r)&&(o=this.readBeatEffects(n)),0!=(16&r)&&this.readMixTableChange(n);let a=this.data.readByte();for(let r=6;r>=0;r--)if(0!=(a&1<<r)&&6-r<t.staff.tuning.length){const s=this.readNote(e,t,i,n,6-r);o!==b.None&&(s.harmonicType=o,s.harmonicType===b.Natural&&(s.harmonicValue=this.deltaFretToHarmonicValue(s.fret)))}this._versionNumber>=500&&(this.data.readByte(),0!=(8&this.data.readByte())&&this.data.readByte()),s&&!n.isRest&&this._beatTextChunksByTrack.has(e.index)&&this._beatTextChunksByTrack.get(e.index).length>0&&(n.lyrics=[this._beatTextChunksByTrack.get(e.index).pop()])}readChord(e){let t=new He,i=ge.newGuid();if(this._versionNumber>=500){this.data.skip(17),t.name=st.gpReadStringByteLength(this.data,21,this.settings.importer.encoding),this.data.skip(4),t.firstFret=nt.readInt32LE(this.data);for(let i=0;i<7;i++){let n=nt.readInt32LE(this.data);i<e.voice.bar.staff.tuning.length&&t.strings.push(n)}let i=this.data.readByte(),n=new Uint8Array(5);this.data.read(n,0,n.length);for(let e=0;e<i;e++)t.barreFrets.push(n[e]);this.data.skip(26)}else if(0!==this.data.readByte())if(this._versionNumber>=400){this.data.skip(16),t.name=st.gpReadStringByteLength(this.data,21,this.settings.importer.encoding),this.data.skip(4),t.firstFret=nt.readInt32LE(this.data);for(let i=0;i<7;i++){let n=nt.readInt32LE(this.data);i<e.voice.bar.staff.tuning.length&&t.strings.push(n)}let i=this.data.readByte(),n=new Uint8Array(5);this.data.read(n,0,n.length);for(let e=0;e<i;e++)t.barreFrets.push(n[e]);this.data.skip(26)}else{this.data.skip(25),t.name=st.gpReadStringByteLength(this.data,34,this.settings.importer.encoding),t.firstFret=nt.readInt32LE(this.data);for(let i=0;i<6;i++){let n=nt.readInt32LE(this.data);i<e.voice.bar.staff.tuning.length&&t.strings.push(n)}this.data.skip(36)}else{let i=this._versionNumber>=406?7:6;if(t.name=st.gpReadStringIntByte(this.data,this.settings.importer.encoding),t.firstFret=nt.readInt32LE(this.data),t.firstFret>0)for(let n=0;n<i;n++){let i=nt.readInt32LE(this.data);n<e.voice.bar.staff.tuning.length&&t.strings.push(i)}}t.name&&(e.chordId=i,e.voice.bar.staff.addChord(e.chordId,t))}readBeatEffects(e){let t=this.data.readByte(),i=0;if(this._versionNumber>=400&&(i=this.data.readByte()),e.fadeIn=0!=(16&t),(this._versionNumber<400&&0!=(1&t)||0!=(2&t))&&(e.vibrato=w.Slight),e.hasRasgueado=0!=(1&i),0!=(32&t)&&this._versionNumber>=400)switch(nt.readSInt8(this.data)){case 1:e.tap=!0;break;case 2:e.slap=!0;break;case 3:e.pop=!0}else if(0!=(32&t)){switch(nt.readSInt8(this.data)){case 1:e.tap=!0;break;case 2:e.slap=!0;break;case 3:e.pop=!0}this.data.skip(4)}if(0!=(4&i)&&this.readTremoloBarEffect(e),0!=(64&t)){let t=0,i=0;this._versionNumber<500?(i=this.data.readByte(),t=this.data.readByte()):(t=this.data.readByte(),i=this.data.readByte()),t>0?(e.brushType=d.BrushUp,e.brushDuration=rt.toStrokeValue(t)):i>0&&(e.brushType=d.BrushDown,e.brushDuration=rt.toStrokeValue(i))}if(0!=(2&i))switch(nt.readSInt8(this.data)){case 0:e.pickStroke=S.None;break;case 1:e.pickStroke=S.Up;break;case 2:e.pickStroke=S.Down}if(this._versionNumber<400){if(0!=(4&t))return b.Natural;if(0!=(8&t))return b.Artificial}return b.None}readTremoloBarEffect(e){this.data.readByte(),nt.readInt32LE(this.data);let t=nt.readInt32LE(this.data);if(t>0)for(let i=0;i<t;i++){let t=new Le(0,0);t.offset=nt.readInt32LE(this.data),t.value=nt.readInt32LE(this.data)/rt.BendStep|0,st.gpReadBool(this.data),e.addWhammyBarPoint(t)}}static toStrokeValue(e){switch(e){case 1:case 2:return 30;case 3:return 60;case 4:return 120;case 5:return 240;case 6:return 480;default:return 0}}readMixTableChange(e){let t=new ot;t.instrument=nt.readSInt8(this.data),this._versionNumber>=500&&this.data.skip(16),t.volume=nt.readSInt8(this.data),t.balance=nt.readSInt8(this.data);let i=nt.readSInt8(this.data),n=nt.readSInt8(this.data),r=nt.readSInt8(this.data),s=nt.readSInt8(this.data);if(this._versionNumber>=500&&(t.tempoName=st.gpReadStringIntByte(this.data,this.settings.importer.encoding)),t.tempo=nt.readInt32LE(this.data),t.volume>=0&&this.data.readByte(),t.balance>=0&&this.data.readByte(),i>=0&&this.data.readByte(),n>=0&&this.data.readByte(),r>=0&&this.data.readByte(),s>=0&&this.data.readByte(),t.tempo>=0&&(t.duration=nt.readSInt8(this.data),this._versionNumber>=510&&this.data.readByte()),this._versionNumber>=400&&this.data.readByte(),this._versionNumber>=500&&this.data.readByte(),this._versionNumber>=510&&(st.gpReadStringIntByte(this.data,this.settings.importer.encoding),st.gpReadStringIntByte(this.data,this.settings.importer.encoding)),t.volume>=0){let i=new ke;i.isLinear=!0,i.type=o.Volume,i.value=t.volume,e.automations.push(i)}if(t.balance>=0){let i=new ke;i.isLinear=!0,i.type=o.Balance,i.value=t.balance,e.automations.push(i)}if(t.instrument>=0){let i=new ke;i.isLinear=!0,i.type=o.Instrument,i.value=t.instrument,e.automations.push(i)}if(t.tempo>=0){let i=new ke;i.isLinear=!0,i.type=o.Tempo,i.value=t.tempo,e.automations.push(i),e.voice.bar.masterBar.tempoAutomation=i}}readNote(e,t,i,n,r){let o=new Ae;o.string=t.staff.tuning.length-r;let a=this.data.readByte();if(0!=(2&a)?o.accentuated=s.Heavy:0!=(64&a)&&(o.accentuated=s.Normal),o.isGhost=0!=(4&a),0!=(32&a)){let e=this.data.readByte();3===e?o.isDead=!0:2===e&&(o.isTieDestination=!0)}if(0!=(1&a)&&this._versionNumber<500&&(this.data.readByte(),this.data.readByte()),0!=(16&a)){let e=nt.readSInt8(this.data);o.dynamics=this.toDynamicValue(e),n.dynamics=o.dynamics}0!=(32&a)&&(o.fret=nt.readSInt8(this.data)),0!=(128&a)&&(o.leftHandFinger=nt.readSInt8(this.data),o.rightHandFinger=nt.readSInt8(this.data),o.isFingering=!0);let l=!1;if(this._versionNumber>=500&&(0!=(1&a)&&(o.durationPercent=st.gpReadDouble(this.data)),l=0!=(2&this.data.readByte())),n.addNote(o),0!=(8&a)&&this.readNoteEffects(e,i,n,o),t.staff.isPercussion&&(o.percussionArticulation=o.fret,o.string=-1,o.fret=-1),l){const e=Ye.defaultAccidentals[o.realValueWithoutHarmonic%12];"#"===e?o.accidentalMode=v.ForceFlat:"b"===e&&(o.accidentalMode=v.ForceSharp)}return o}toDynamicValue(e){switch(e){case 1:return g.PPP;case 2:return g.PP;case 3:return g.P;case 4:return g.MP;case 5:return g.MF;case 6:return g.F;case 7:return g.FF;case 8:return g.FFF;default:return g.F}}readNoteEffects(e,t,i,n){let r=this.data.readByte(),s=0;this._versionNumber>=400&&(s=this.data.readByte()),0!=(1&r)&&this.readBend(n),0!=(16&r)&&this.readGrace(t,n),0!=(4&s)&&this.readTremoloPicking(i),0!=(8&s)?this.readSlide(n):this._versionNumber<400&&0!=(4&r)&&(n.slideOutType=_.Shift),0!=(16&s)&&this.readArtificialHarmonic(n),0!=(32&s)&&this.readTrill(n),n.isLetRing=0!=(8&r),n.isHammerPullOrigin=0!=(2&r),0!=(64&s)&&(n.vibrato=w.Slight),n.isPalmMute=0!=(2&s),n.isStaccato=0!=(1&s)}readBend(e){this.data.readByte(),nt.readInt32LE(this.data);let t=nt.readInt32LE(this.data);if(t>0)for(let i=0;i<t;i++){let t=new Le(0,0);t.offset=nt.readInt32LE(this.data),t.value=nt.readInt32LE(this.data)/rt.BendStep|0,st.gpReadBool(this.data),e.addBendPoint(t)}}readGrace(e,t){let i=new ze,n=new Ae;switch(n.string=t.string,n.fret=nt.readSInt8(this.data),i.duration=p.ThirtySecond,i.dynamics=this.toDynamicValue(nt.readSInt8(this.data)),nt.readSInt8(this.data)){case 0:break;case 1:n.slideOutType=_.Legato,n.slideTarget=t;break;case 2:break;case 3:n.isHammerPullOrigin=!0}if(n.dynamics=i.dynamics,this.data.skip(1),this._versionNumber<500)i.graceType=m.BeforeBeat;else{let e=this.data.readByte();n.isDead=0!=(1&e),i.graceType=0!=(2&e)?m.OnBeat:m.BeforeBeat}e.addGraceBeat(i),i.addNote(n)}readTremoloPicking(e){switch(this.data.readByte()){case 1:e.tremoloSpeed=p.Eighth;break;case 2:e.tremoloSpeed=p.Sixteenth;break;case 3:e.tremoloSpeed=p.ThirtySecond}}readSlide(e){if(this._versionNumber>=500){let t=nt.readSInt8(this.data);0!=(1&t)?e.slideOutType=_.Shift:0!=(2&t)?e.slideOutType=_.Legato:0!=(4&t)?e.slideOutType=_.OutDown:0!=(8&t)&&(e.slideOutType=_.OutUp),0!=(16&t)?e.slideInType=y.IntoFromBelow:0!=(32&t)&&(e.slideInType=y.IntoFromAbove)}else switch(nt.readSInt8(this.data)){case 1:e.slideOutType=_.Shift;break;case 2:e.slideOutType=_.Legato;break;case 3:e.slideOutType=_.OutDown;break;case 4:e.slideOutType=_.OutUp;break;case-1:e.slideInType=y.IntoFromBelow;break;case-2:e.slideInType=y.IntoFromAbove}}readArtificialHarmonic(e){let t=this.data.readByte();if(this._versionNumber>=500)switch(t){case 1:e.harmonicType=b.Natural,e.harmonicValue=this.deltaFretToHarmonicValue(e.fret);break;case 2:this.data.readByte(),this.data.readByte(),this.data.readByte(),e.harmonicType=b.Artificial;break;case 3:e.harmonicType=b.Tap,e.harmonicValue=this.deltaFretToHarmonicValue(this.data.readByte());break;case 4:e.harmonicType=b.Pinch,e.harmonicValue=12;break;case 5:e.harmonicType=b.Semi,e.harmonicValue=12}else if(this._versionNumber>=400)switch(t){case 1:e.harmonicType=b.Natural;break;case 3:e.harmonicType=b.Tap;break;case 4:e.harmonicType=b.Pinch;break;case 5:e.harmonicType=b.Semi;break;case 15:case 17:case 22:e.harmonicType=b.Artificial}}deltaFretToHarmonicValue(e){switch(e){case 2:return 2.4;case 3:return 3.2;case 4:case 5:case 7:case 9:case 12:case 16:case 17:case 19:case 24:return e;case 8:return 8.2;case 10:return 9.6;case 14:case 15:return 14.7;case 21:case 22:return 21.7;default:return 12}}readTrill(e){switch(e.trillValue=this.data.readByte()+e.stringTuning,this.data.readByte()){case 1:e.trillSpeed=p.Sixteenth;break;case 2:e.trillSpeed=p.ThirtySecond;break;case 3:e.trillSpeed=p.SixtyFourth}}}rt.VersionString="FICHIER GUITAR PRO ",rt.BendStep=25;class st{static gpReadDouble(e){let t=new Uint8Array(8);return e.read(t,0,t.length),new Float64Array(t.buffer)[0]}static gpReadFloat(e){let t=new Uint8Array(4);return t[3]=e.readByte(),t[2]=e.readByte(),t[2]=e.readByte(),t[1]=e.readByte(),new Float32Array(t.buffer)[0]}static gpReadColor(e,t=!1){let i=e.readByte(),n=e.readByte(),r=e.readByte(),s=255;return t?s=e.readByte():e.skip(1),new me(i,n,r,s)}static gpReadBool(e){return 0!==e.readByte()}static gpReadStringIntUnused(e,t){return e.skip(4),st.gpReadString(e,e.readByte(),t)}static gpReadStringInt(e,t){return st.gpReadString(e,nt.readInt32LE(e),t)}static gpReadStringIntByte(e,t){let i=nt.readInt32LE(e)-1;return e.readByte(),st.gpReadString(e,i,t)}static gpReadString(e,t,i){let n=new Uint8Array(t);return e.read(n,0,n.length),nt.toString(n,i)}static gpWriteString(e,t){const i=nt.stringToBytes(t);e.writeByte(t.length),e.write(i,0,i.length)}static gpReadStringByteLength(e,t,i){let n=e.readByte(),r=st.gpReadString(e,n,i);return n<t&&e.skip(t-n),r}}class ot{constructor(){this.volume=-1,this.balance=-1,this.instrument=-1,this.tempoName="",this.tempo=-1,this.duration=-1}}class at{constructor(){this._capacity=0,this.length=0,this.position=0}get bytesWritten(){return this.position}getBuffer(){return this._buffer}static empty(){return at.withCapacity(0)}static withCapacity(e){let t=new at;return t._buffer=new Uint8Array(e),t._capacity=e,t}static fromBuffer(e){let t=new at;return t._buffer=e,t._capacity=t.length=e.length,t}static fromString(e){let t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return at.fromBuffer(t)}reset(){this.position=0}skip(e){this.position+=e}setCapacity(e){if(e!==this._capacity){if(e>0){let t=new Uint8Array(e);this.length>0&&t.set(this._buffer.subarray(0,0+this.length),0),this._buffer=t}this._capacity=e}}readByte(){return this.length-this.position<=0?-1:this._buffer[this.position++]}read(e,t,i){let n=this.length-this.position;if(n>i&&(n=i),n<=0)return 0;if(n<=8){let i=n;for(;--i>=0;)e[t+i]=this._buffer[this.position+i]}else e.set(this._buffer.subarray(this.position,this.position+n),t);return this.position+=n,n}writeByte(e){let t=new Uint8Array(1);t[0]=e,this.write(t,0,1)}write(e,t,i){let n=this.position+i;if(n>this.length&&(n>this._capacity&&this.ensureCapacity(n),this.length=n),i<=8&&e!==this._buffer){let n=i;for(;--n>=0;)this._buffer[this.position+n]=e[t+n]}else{let n=Math.min(i,e.length-t);this._buffer.set(e.subarray(t,t+n),this.position)}this.position=n}ensureCapacity(e){if(e>this._capacity){let t=e;t<256&&(t=256),t<2*this._capacity&&(t=2*this._capacity),this.setCapacity(t)}}readAll(){return this.toArray()}toArray(){let e=new Uint8Array(this.length);return e.set(this._buffer.subarray(0,0+this.length),0),e}}class lt{constructor(){this.x=0,this.y=0,this.w=0,this.h=0}}!function(e){e[e.Boolean=0]="Boolean",e[e.Integer=1]="Integer",e[e.Float=2]="Float",e[e.String=3]="String",e[e.Point=4]="Point",e[e.Size=5]="Size",e[e.Rectangle=6]="Rectangle",e[e.Color=7]="Color"}(I||(I={}));class ct{constructor(e){this.raw=new Map;let t=at.fromBuffer(e),i=nt.readInt32BE(t);for(let e=0;e<i;e++){let e=st.gpReadString(t,t.readByte(),"utf-8");switch(t.readByte()){case I.Boolean:let i=1===t.readByte();this.addValue(e,i);break;case I.Integer:let n=nt.readInt32BE(t);this.addValue(e,n);break;case I.Float:let r=st.gpReadFloat(t);this.addValue(e,r);break;case I.String:let s=st.gpReadString(t,nt.readInt16BE(t),"utf-8");this.addValue(e,s);break;case I.Point:let o=nt.readInt32BE(t),a=nt.readInt32BE(t);this.addValue(e,new Le(o,a));break;case I.Size:let l=nt.readInt32BE(t),c=nt.readInt32BE(t);this.addValue(e,new Le(l,c));break;case I.Rectangle:let h=new lt;h.x=nt.readInt32BE(t),h.y=nt.readInt32BE(t),h.w=nt.readInt32BE(t),h.h=nt.readInt32BE(t),this.addValue(e,h);break;case I.Color:let u=st.gpReadColor(t,!0);this.addValue(e,u)}}}apply(e){for(const[t,i]of this.raw)switch(t){case"StandardNotation/hideDynamics":e.stylesheet.hideDynamics=i}}addValue(e,t){this.raw.set(e,t)}static writeForScore(e){const t=at.withCapacity(128);return nt.writeInt32BE(t,1),ct.writeBooleanEntry(t,"StandardNotation/hideDynamics",e.stylesheet.hideDynamics),t.toArray()}static writeBooleanEntry(e,t,i){st.gpWriteString(e,t),e.writeByte(I.Boolean),e.writeByte(i?1:0)}}!function(e){e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long"}(A||(A={}));class ht{constructor(){this.type=A.Short,this.length=0}}!function(e){e[e.None=0]="None",e[e.Element=1]="Element",e[e.Text=2]="Text",e[e.CDATA=3]="CDATA",e[e.Document=4]="Document",e[e.DocumentType=5]="DocumentType"}(P||(P={}));class ut{constructor(){this.nodeType=P.None,this.localName=null,this.value=null,this.childNodes=[],this.attributes=new Map,this.firstChild=null,this.firstElement=null}addChild(e){this.childNodes.push(e),this.firstChild=e,e.nodeType!==P.Element&&e.nodeType!==P.CDATA||(this.firstElement=e)}getAttribute(e){return this.attributes.has(e)?this.attributes.get(e):""}getElementsByTagName(e,t=!1){let i=[];return this.searchElementsByTagName(this.childNodes,i,e,t),i}searchElementsByTagName(e,t,i,n=!1){for(let r of e)r&&r.nodeType===P.Element&&r.localName===i&&t.push(r),n&&this.searchElementsByTagName(r.childNodes,t,i,!0)}findChildElement(e){for(let t of this.childNodes)if(t&&t.nodeType===P.Element&&t.localName===e)return t;return null}addElement(e){const t=new ut;return t.nodeType=P.Element,t.localName=e,this.addChild(t),t}get innerText(){var e,t;if(this.nodeType===P.Element||this.nodeType===P.Document){if(this.firstElement&&this.firstElement.nodeType===P.CDATA)return this.firstElement.innerText;let t="";for(let i of this.childNodes)t+=null===(e=i.innerText)||void 0===e?void 0:e.toString();return t.trim()}return null!==(t=this.value)&&void 0!==t?t:""}set innerText(e){const t=new ut;t.nodeType=P.Text,t.value=e,this.childNodes=[t]}setCData(e){const t=new ut;t.nodeType=P.CDATA,t.value=null!=e?e:"",this.childNodes=[t]}}class dt extends he{constructor(t,i,n){super(e.AlphaTabErrorType.Format,t),this.pos=0,this.xml=i,this.pos=n,Object.setPrototypeOf(this,dt.prototype)}}!function(e){e[e.IgnoreSpaces=0]="IgnoreSpaces",e[e.Begin=1]="Begin",e[e.BeginNode=2]="BeginNode",e[e.TagName=3]="TagName",e[e.Body=4]="Body",e[e.AttribName=5]="AttribName",e[e.Equals=6]="Equals",e[e.AttvalBegin=7]="AttvalBegin",e[e.AttribVal=8]="AttribVal",e[e.Childs=9]="Childs",e[e.Close=10]="Close",e[e.WaitEnd=11]="WaitEnd",e[e.WaitEndRet=12]="WaitEndRet",e[e.Pcdata=13]="Pcdata",e[e.Header=14]="Header",e[e.Comment=15]="Comment",e[e.Doctype=16]="Doctype",e[e.Cdata=17]="Cdata",e[e.Escape=18]="Escape"}(R||(R={}));class ft{static parse(e,t,i){var n;let r=e.charCodeAt(t),s=R.Begin,o=R.Begin,a=0,l="",c=R.Begin,h=null,u=null,d=0,f=0;for(;t<e.length;){switch(r=e.charCodeAt(t),s){case R.IgnoreSpaces:switch(r){case ft.CharCodeLF:case ft.CharCodeCR:case ft.CharCodeTab:case ft.CharCodeSpace:break;default:s=o;continue}break;case R.Begin:switch(r){case ft.CharCodeLowerThan:s=R.IgnoreSpaces,o=R.BeginNode;break;default:a=t,s=R.Pcdata;continue}break;case R.Pcdata:if(r===ft.CharCodeLowerThan){l+=e.substr(a,t-a);let n=new ut;n.nodeType=P.Text,n.value=l,l="",i.addChild(n),s=R.IgnoreSpaces,o=R.BeginNode}else r===ft.CharCodeAmp&&(l+=e.substr(a,t-a),s=R.Escape,c=R.Pcdata,a=t+1);break;case R.Cdata:if(r===ft.CharCodeBrackedClose&&e.charCodeAt(t+1)===ft.CharCodeBrackedClose&&e.charCodeAt(t+2)===ft.CharCodeGreaterThan){let n=new ut;n.nodeType=P.CDATA,n.value=e.substr(a,t-a),i.addChild(n),t+=2,s=R.Begin}break;case R.BeginNode:switch(r){case ft.CharCodeExclamation:if(e.charCodeAt(t+1)===ft.CharCodeBrackedOpen){if(t+=2,"CDATA["!==e.substr(t,6).toUpperCase())throw new dt("Expected <![CDATA[",e,t);t+=5,s=R.Cdata,a=t+1}else if(e.charCodeAt(t+1)===ft.CharCodeUpperD||e.charCodeAt(t+1)===ft.CharCodeLowerD){if("OCTYPE"!==e.substr(t+2,6).toUpperCase())throw new dt("Expected <!DOCTYPE",e,t);t+=8,s=R.Doctype,a=t+1}else{if(e.charCodeAt(t+1)!==ft.CharCodeMinus||e.charCodeAt(t+2)!==ft.CharCodeMinus)throw new dt("Expected \x3c!--",e,t);t+=2,s=R.Comment,a=t+1}break;case ft.CharCodeQuestion:s=R.Header,a=t;break;case ft.CharCodeSlash:if(!i)throw new dt("Expected node name",e,t);a=t+1,s=R.IgnoreSpaces,o=R.Close;break;default:s=R.TagName,a=t;continue}break;case R.TagName:if(!ft.isValidChar(r)){if(t===a)throw new dt("Expected node name",e,t);h=new ut,h.nodeType=P.Element,h.localName=e.substr(a,t-a),i.addChild(h),s=R.IgnoreSpaces,o=R.Body;continue}break;case R.Body:switch(r){case ft.CharCodeSlash:s=R.WaitEnd;break;case ft.CharCodeGreaterThan:s=R.Childs;break;default:s=R.AttribName,a=t;continue}break;case R.AttribName:if(!ft.isValidChar(r)){if(a===t)throw new dt("Expected attribute name",e,t);if(u=e.substr(a,t-a),h.attributes.has(u))throw new dt(`Duplicate attribute [${u}]`,e,t);s=R.IgnoreSpaces,o=R.Equals;continue}break;case R.Equals:switch(r){case ft.CharCodeEquals:s=R.IgnoreSpaces,o=R.AttvalBegin;break;default:throw new dt("Expected =",e,t)}break;case R.AttvalBegin:switch(r){case ft.CharCodeDoubleQuote:case ft.CharCodeSingleQuote:l="",s=R.AttribVal,a=t+1,f=r}break;case R.AttribVal:switch(r){case ft.CharCodeAmp:l+=e.substr(a,t-a),s=R.Escape,c=R.AttribVal,a=t+1;break;default:if(r===f){l+=e.substr(a,t-a);let i=l;l="",h.attributes.set(u,i),s=R.IgnoreSpaces,o=R.Body}}break;case R.Childs:a=t=ft.parse(e,t,h),s=R.Begin;break;case R.WaitEnd:switch(r){case ft.CharCodeGreaterThan:s=R.Begin;break;default:throw new dt("Expected >",e,t)}break;case R.WaitEndRet:switch(r){case ft.CharCodeGreaterThan:return t;default:throw new dt("Expected >",e,t)}case R.Close:if(!ft.isValidChar(r)){if(a===t)throw new dt("Expected node name",e,t);if(e.substr(a,t-a)!==i.localName)throw new dt("Expected </"+i.localName+">",e,t);s=R.IgnoreSpaces,o=R.WaitEndRet;continue}break;case R.Comment:r===ft.CharCodeMinus&&e.charCodeAt(t+1)===ft.CharCodeMinus&&e.charCodeAt(t+2)===ft.CharCodeGreaterThan&&(t+=2,s=R.Begin);break;case R.Doctype:if(r===ft.CharCodeBrackedOpen)d++;else if(r===ft.CharCodeBrackedClose)d--;else if(r===ft.CharCodeGreaterThan&&0===d){let n=new ut;n.nodeType=P.DocumentType,n.value=e.substr(a,t-a),i.addChild(n),s=R.Begin}break;case R.Header:r===ft.CharCodeQuestion&&e.charCodeAt(t+1)===ft.CharCodeGreaterThan&&(t++,s=R.Begin);break;case R.Escape:if(r===ft.CharCodeSemi){let i=e.substr(a,t-a);if(i.charCodeAt(0)===ft.CharCodeSharp){let e=i.charCodeAt(1)===ft.CharCodeLowerX?parseInt("0"+i.substr(1,i.length-1)):parseInt(i.substr(1,i.length-1));l+=String.fromCharCode(e)}else ft.Escapes.has(i)?l+=ft.Escapes.get(i):l+=null===(n="&"+i+";")||void 0===n?void 0:n.toString();a=t+1,s=c}else ft.isValidChar(r)||r===ft.CharCodeSharp||(l+="&",l+=e.substr(a,t-a),a=1+--t,s=c)}t++}if(s===R.Begin&&(a=t,s=R.Pcdata),s===R.Pcdata){if(t!==a){l+=e.substr(a,t-a);let n=new ut;n.nodeType=P.Text,n.value=l,i.addChild(n)}return t}if(s===R.Escape&&c===R.Pcdata){l+="&",l+=e.substr(a,t-a);let n=new ut;return n.nodeType=P.Text,n.value=l,i.addChild(n),t}throw new dt("Unexpected end",e,t)}static isValidChar(e){return e>=ft.CharCodeLowerA&&e<=ft.CharCodeLowerZ||e>=ft.CharCodeUpperA&&e<=ft.CharCodeUpperZ||e>=ft.CharCode0&&e<=ft.CharCode9||e===ft.CharCodeColon||e===ft.CharCodeDot||e===ft.CharCodeUnderscore||e===ft.CharCodeMinus}}ft.CharCodeLF=10,ft.CharCodeTab=9,ft.CharCodeCR=13,ft.CharCodeSpace=32,ft.CharCodeLowerThan=60,ft.CharCodeAmp=38,ft.CharCodeBrackedClose=93,ft.CharCodeBrackedOpen=91,ft.CharCodeGreaterThan=62,ft.CharCodeExclamation=33,ft.CharCodeUpperD=68,ft.CharCodeLowerD=100,ft.CharCodeMinus=45,ft.CharCodeQuestion=63,ft.CharCodeSlash=47,ft.CharCodeEquals=61,ft.CharCodeDoubleQuote=34,ft.CharCodeSingleQuote=39,ft.CharCodeSharp=35,ft.CharCodeLowerX=120,ft.CharCodeLowerA=97,ft.CharCodeLowerZ=122,ft.CharCodeUpperA=65,ft.CharCodeUpperZ=90,ft.CharCode0=48,ft.CharCode9=57,ft.CharCodeColon=58,ft.CharCodeDot=46,ft.CharCodeUnderscore=95,ft.CharCodeSemi=59,ft.Escapes=new Map([["lt","<"],["gt",">"],["amp","&"],["quot",'"'],["apos","'"]]);class pt{constructor(e,t){this._result=[],this._indention=e,this._xmlHeader=t,this._currentIndention="",this._isStartOfLine=!0}static write(e,t,i){const n=new pt(t,i);return n.writeNode(e),n.toString()}writeNode(e){switch(e.nodeType){case P.None:break;case P.Element:this._result.length>0&&this.writeLine(),this.write(`<${e.localName}`);for(const[t,i]of e.attributes)this.write(` ${t}="`),this.writeAttributeValue(i),this.write('"');if(0===e.childNodes.length)this.write("/>");else{if(this.write(">"),1!==e.childNodes.length||e.firstElement){this.indent();for(const t of e.childNodes)t.nodeType===P.Element&&this.writeNode(t);this.unindend(),this.writeLine()}else this.writeNode(e.childNodes[0]);this.write(`</${e.localName}>`)}break;case P.Text:e.value&&this.write(e.value);break;case P.CDATA:null!==e.value&&this.write(`<![CDATA[${e.value}]]>`);break;case P.Document:this._xmlHeader&&this.write('<?xml version="1.0" encoding="utf-8"?>');for(const t of e.childNodes)this.writeNode(t);break;case P.DocumentType:this.write(`<!DOCTYPE ${e.value}>`)}}unindend(){this._currentIndention=this._currentIndention.substr(0,this._currentIndention.length-this._indention.length)}indent(){this._currentIndention+=this._indention}writeAttributeValue(e){for(let t=0;t<e.length;t++){const i=e.charAt(t);switch(i){case"<":this._result.push("&lt;");break;case">":this._result.push("&gt;");break;case"&":this._result.push("&amp;");break;case"'":this._result.push("&apos;");break;case'"':this._result.push("&quot;");break;default:this._result.push(i)}}}write(e){this._isStartOfLine&&this._result.push(this._currentIndention),this._result.push(e),this._isStartOfLine=!1}writeLine(e=null){e&&this.write(e),this._indention.length>0&&!this._isStartOfLine&&(this._result.push("\n"),this._isStartOfLine=!0)}toString(){return this._result.join("").trimRight()}}class gt extends ut{constructor(){super(),this.nodeType=P.Document}parse(e){ft.parse(e,0,this)}toString(e="",t=!1){return pt.write(this,e,t)}}!function(e){e[e.Up=0]="Up",e[e.Down=1]="Down"}(B||(B={}));class mt{constructor(){this.id="",this.dots=0,this.tupletDenominator=-1,this.tupletNumerator=-1,this.value=p.Quarter}}class bt{constructor(){this.name="",this.path="",this.role="",this.program=0}get uniqueId(){return this.path+";"+this.name+";"+this.role}}class vt{constructor(){this._hasAnacrusis=!1,this._skipApplyLyrics=!1}parseXml(e,t){this._masterTrackAutomations=new Map,this._automationsPerTrackIdAndBarIndex=new Map,this._tracksMapping=[],this._tracksById=new Map,this._masterBars=[],this._barsOfMasterBar=[],this._voicesOfBar=new Map,this._barsById=new Map,this._voiceById=new Map,this._beatsOfVoice=new Map,this._beatById=new Map,this._rhythmOfBeat=new Map,this._rhythmById=new Map,this._notesOfBeat=new Map,this._noteById=new Map,this._tappedNotes=new Map,this._lyricsByTrack=new Map,this._soundsByTrack=new Map,this._skipApplyLyrics=!1;let i=new gt;try{i.parse(e)}catch(e){throw new xe("Could not parse XML",e)}if(this.parseDom(i),this.buildModel(),this.score.finish(t),!this._skipApplyLyrics&&this._lyricsByTrack.size>0)for(const[e,t]of this._lyricsByTrack)this._tracksById.get(e).applyLyrics(t)}parseDom(e){let t=e.firstElement;if(t){if("GPIF"!==t.localName)throw new xe("Root node of XML was not GPIF");this.score=new $e;for(let e of t.childNodes)if(e.nodeType===P.Element)switch(e.localName){case"Score":this.parseScoreNode(e);break;case"MasterTrack":this.parseMasterTrackNode(e);break;case"Tracks":this.parseTracksNode(e);break;case"MasterBars":this.parseMasterBarsNode(e);break;case"Bars":this.parseBars(e);break;case"Voices":this.parseVoices(e);break;case"Beats":this.parseBeats(e);break;case"Notes":this.parseNotes(e);break;case"Rhythms":this.parseRhythms(e)}}}parseScoreNode(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Title":this.score.title=t.firstChild.innerText;break;case"SubTitle":this.score.subTitle=t.firstChild.innerText;break;case"Artist":this.score.artist=t.firstChild.innerText;break;case"Album":this.score.album=t.firstChild.innerText;break;case"Words":this.score.words=t.firstChild.innerText;break;case"Music":this.score.music=t.firstChild.innerText;break;case"WordsAndMusic":if(t.firstChild&&""!==t.firstChild.innerText){let e=t.firstChild.innerText;e&&!this.score.words&&(this.score.words=e),e&&!this.score.music&&(this.score.music=e)}break;case"Copyright":this.score.copyright=t.firstChild.innerText;break;case"Tabber":this.score.tab=t.firstChild.innerText;break;case"Instructions":this.score.instructions=t.firstChild.innerText;break;case"Notices":this.score.notices=t.firstChild.innerText}}parseMasterTrackNode(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Automations":this.parseAutomations(t,this._masterTrackAutomations,null);break;case"Tracks":this._tracksMapping=t.innerText.split(" ");break;case"Anacrusis":this._hasAnacrusis=!0}}parseAutomations(e,t,i){for(let n of e.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"Automation":this.parseAutomation(n,t,i)}}parseAutomation(e,t,i){let n=null,r=!1,s=-1,o=0,a=0,l=null,c=0,h=null;for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Type":n=t.innerText;break;case"Linear":r="true"===t.innerText.toLowerCase();break;case"Bar":s=parseInt(t.innerText);break;case"Position":o=parseFloat(t.innerText);break;case"Value":if(t.firstElement&&t.firstElement.nodeType===P.CDATA)l=t.innerText;else{let e=t.innerText.split(" ");1===e.length?(a=parseFloat(e[0]),c=1):(a=parseFloat(e[0]),c=parseInt(e[1]))}break;case"Text":h=t.innerText}if(!n)return;let u=null;switch(n){case"Tempo":u=ke.buildTempoAutomation(r,o,a,c);break;case"Sound":l&&i&&i.has(l)&&(u=ke.buildInstrumentAutomation(r,o,i.get(l).program))}u&&(h&&(u.text=h),s>=0&&(t.has(s)||t.set(s,[]),t.get(s).push(u)))}parseTracksNode(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Track":this.parseTrack(t)}}parseTrack(e){this._articulationByName=new Map;let t=new Qe;t.ensureStaveCount(1),t.staves[0].showStandardNotation=!0;let i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"Name":t.name=n.innerText;break;case"Color":let e=n.innerText.split(" ");if(e.length>=3){let i=parseInt(e[0]),n=parseInt(e[1]),r=parseInt(e[2]);t.color=new me(i,n,r,255)}break;case"Instrument":let r=n.getAttribute("ref");(r.endsWith("-gs")||r.endsWith("GrandStaff"))&&(t.ensureStaveCount(2),t.staves[1].showStandardNotation=!0);break;case"InstrumentSet":this.parseInstrumentSet(t,n);break;case"NotationPatch":this.parseNotationPatch(t,n);break;case"ShortName":t.shortName=n.innerText;break;case"Lyrics":this.parseLyrics(i,n);break;case"Properties":this.parseTrackProperties(t,n);break;case"GeneralMidi":case"MidiConnection":case"MIDISettings":this.parseGeneralMidi(t,n);break;case"Sounds":this.parseSounds(i,t,n);break;case"PlaybackState":let s=n.innerText;t.playbackInfo.isSolo="Solo"===s,t.playbackInfo.isMute="Mute"===s;break;case"PartSounding":this.parsePartSounding(t,n);break;case"Staves":this.parseStaves(t,n);break;case"Transpose":this.parseTranspose(t,n);break;case"RSE":this.parseRSE(t,n);break;case"Automations":this.parseTrackAutomations(i,n)}this._tracksById.set(i,t)}parseTrackAutomations(e,t){const i=new Map;this._automationsPerTrackIdAndBarIndex.set(e,i),this.parseAutomations(t,i,this._soundsByTrack.get(e))}parseNotationPatch(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"LineCount":const t=parseInt(i.innerText);for(let i of e.staves)i.standardNotationLineCount=t;break;case"Elements":this.parseElements(e,i)}}parseInstrumentSet(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Type":switch(i.innerText){case"drumKit":for(let t of e.staves)t.isPercussion=!0}if("drumKit"===i.innerText)for(let t of e.staves)t.isPercussion=!0;break;case"Elements":this.parseElements(e,i);break;case"LineCount":const t=parseInt(i.innerText);for(let i of e.staves)i.standardNotationLineCount=t}}parseElements(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Element":this.parseElement(e,i)}}parseElement(e,t){const i=t.findChildElement("Type"),n=i?i.innerText:"";for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Name":case"Articulations":this.parseArticulations(e,i,n)}}parseArticulations(e,t,i){for(let n of t.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"Articulation":this.parseArticulation(e,n,i)}}parseArticulation(e,t,i){const n=new De;n.outputMidiNumber=-1,n.elementType=i;let r="";for(let e of t.childNodes)if(e.nodeType===P.Element){const t=e.innerText;switch(e.localName){case"Name":r=e.innerText;break;case"OutputMidiNumber":t.length>0&&(n.outputMidiNumber=parseInt(t));break;case"TechniqueSymbol":n.techniqueSymbol=this.parseTechniqueSymbol(t);break;case"TechniquePlacement":switch(t){case"outside":n.techniqueSymbolPlacement=k.Bottom;break;case"inside":n.techniqueSymbolPlacement=k.Middle;break;case"above":n.techniqueSymbolPlacement=k.Bottom;break;case"below":n.techniqueSymbolPlacement=k.Top}break;case"Noteheads":const i=t.split(" ");i.length>=1&&(n.noteHeadDefault=this.parseNoteHead(i[0])),i.length>=2&&(n.noteHeadHalf=this.parseNoteHead(i[1])),i.length>=3&&(n.noteHeadWhole=this.parseNoteHead(i[2])),n.noteHeadHalf==C.None&&(n.noteHeadHalf=n.noteHeadDefault),n.noteHeadWhole==C.None&&(n.noteHeadWhole=n.noteHeadDefault);break;case"StaffLine":t.length>0&&(n.staffLine=parseInt(t))}}-1!==n.outputMidiNumber?(e.percussionArticulations.push(n),r.length>0&&this._articulationByName.set(r,n)):r.length>0&&this._articulationByName.has(r)&&(this._articulationByName.get(r).staffLine=n.staffLine)}parseTechniqueSymbol(e){switch(e){case"pictEdgeOfCymbal":return C.PictEdgeOfCymbal;case"articStaccatoAbove":return C.ArticStaccatoAbove;case"noteheadParenthesis":return C.NoteheadParenthesis;case"stringsUpBow":return C.StringsUpBow;case"stringsDownBow":return C.StringsDownBow;case"guitarGolpe":return C.GuitarGolpe;default:return C.None}}parseNoteHead(e){switch(e){case"noteheadDoubleWholeSquare":return C.NoteheadDoubleWholeSquare;case"noteheadDoubleWhole":return C.NoteheadDoubleWhole;case"noteheadWhole":return C.NoteheadWhole;case"noteheadHalf":return C.NoteheadHalf;case"noteheadBlack":return C.NoteheadBlack;case"noteheadNull":return C.NoteheadNull;case"noteheadXOrnate":return C.NoteheadXOrnate;case"noteheadTriangleUpWhole":return C.NoteheadTriangleUpWhole;case"noteheadTriangleUpHalf":return C.NoteheadTriangleUpHalf;case"noteheadTriangleUpBlack":return C.NoteheadTriangleUpBlack;case"noteheadDiamondBlackWide":return C.NoteheadDiamondBlackWide;case"noteheadDiamondWhite":return C.NoteheadDiamondWhite;case"noteheadDiamondWhiteWide":return C.NoteheadDiamondWhiteWide;case"noteheadCircleX":return C.NoteheadCircleX;case"noteheadXWhole":return C.NoteheadXWhole;case"noteheadXHalf":return C.NoteheadXHalf;case"noteheadXBlack":return C.NoteheadXBlack;case"noteheadParenthesis":return C.NoteheadParenthesis;case"noteheadSlashedBlack2":return C.NoteheadSlashedBlack2;case"noteheadCircleSlash":return C.NoteheadCircleSlash;case"noteheadHeavyX":return C.NoteheadHeavyX;case"noteheadHeavyXHat":return C.NoteheadHeavyXHat;default:return Oe.warning("GPIF","Unknown notehead symbol",e),C.None}}parseStaves(e,t){let i=0;for(let n of t.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"Staff":e.ensureStaveCount(i+1);let t=e.staves[i];this.parseStaff(t,n),i++}}parseStaff(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Properties":this.parseStaffProperties(e,i)}}parseStaffProperties(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Property":this.parseStaffProperty(e,i)}}parseStaffProperty(e,t){switch(t.getAttribute("name")){case"Tuning":for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Pitches":let n=t.findChildElement("Pitches").innerText.split(" "),r=new Array(n.length);for(let e=0;e<r.length;e++)r[r.length-1-e]=parseInt(n[e]);e.stringTuning.tunings=r;break;case"Label":e.stringTuning.name=i.innerText}e.isPercussion||(e.showTablature=!0);break;case"DiagramCollection":case"ChordCollection":this.parseDiagramCollectionForStaff(e,t);break;case"CapoFret":let i=parseInt(t.findChildElement("Fret").innerText);e.capo=i}}parseLyrics(e,t){let i=[];for(let e of t.childNodes)if(e.nodeType===P.Element)switch(e.localName){case"Line":i.push(this.parseLyricsLine(e))}this._lyricsByTrack.set(e,i)}parseLyricsLine(e){let t=new je;for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Offset":t.startBar=parseInt(i.innerText);break;case"Text":t.text=i.innerText}return t}parseDiagramCollectionForTrack(e,t){let i=t.findChildElement("Items");for(let t of i.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Item":this.parseDiagramItemForTrack(e,t)}}parseDiagramCollectionForStaff(e,t){let i=t.findChildElement("Items");for(let t of i.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Item":this.parseDiagramItemForStaff(e,t)}}parseDiagramItemForTrack(e,t){let i=new He,n=t.getAttribute("id");for(let t of e.staves)t.addChord(n,i);this.parseDiagramItemForChord(i,t)}parseDiagramItemForStaff(e,t){let i=new He,n=t.getAttribute("id");e.addChord(n,i),this.parseDiagramItemForChord(i,t)}parseDiagramItemForChord(e,t){e.name=t.getAttribute("name");let n=t.findChildElement("Diagram"),r=parseInt(n.getAttribute("stringCount")),s=parseInt(n.getAttribute("baseFret"));e.firstFret=s+1;for(let t=0;t<r;t++)e.strings.push(-1);for(let t of n.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Fret":let n=parseInt(t.getAttribute("string"));e.strings[r-n-1]=s+parseInt(t.getAttribute("fret"));break;case"Fingering":let o=new Map;for(let n of t.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"Position":let t=i.Unknown,r=s+parseInt(n.getAttribute("fret"));switch(n.getAttribute("finger")){case"Index":t=i.IndexFinger;break;case"Middle":t=i.MiddleFinger;break;case"Rank":t=i.AnnularFinger;break;case"Pinky":t=i.LittleFinger;break;case"Thumb":t=i.Thumb}t!==i.Unknown&&(o.has(t)?e.barreFrets.push(r):o.set(t,!0))}break;case"Property":switch(t.getAttribute("name")){case"ShowName":e.showName="true"===t.getAttribute("value");break;case"ShowDiagram":e.showDiagram="true"===t.getAttribute("value");break;case"ShowFingering":e.showFingering="true"===t.getAttribute("value")}}}parseTrackProperties(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Property":this.parseTrackProperty(e,i)}}parseTrackProperty(e,t){switch(t.getAttribute("name")){case"Tuning":let i=t.findChildElement("Pitches").innerText.split(" "),n=new Array(i.length);for(let e=0;e<n.length;e++)n[n.length-1-e]=parseInt(i[e]);for(let t of e.staves)t.stringTuning.tunings=n,t.showStandardNotation=!0,t.showTablature=!0;break;case"DiagramCollection":case"ChordCollection":this.parseDiagramCollectionForTrack(e,t);break;case"CapoFret":let r=parseInt(t.findChildElement("Fret").innerText);for(let t of e.staves)t.capo=r}}parseGeneralMidi(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Program":e.playbackInfo.program=parseInt(i.innerText);break;case"Port":e.playbackInfo.port=parseInt(i.innerText);break;case"PrimaryChannel":e.playbackInfo.primaryChannel=parseInt(i.innerText);break;case"SecondaryChannel":e.playbackInfo.secondaryChannel=parseInt(i.innerText)}if("Percussion"===t.getAttribute("table"))for(let t of e.staves)t.isPercussion=!0}parseSounds(e,t,i){for(let n of i.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"Sound":this.parseSound(e,t,n)}}parseSound(e,t,i){const n=new bt;for(let e of i.childNodes)if(e.nodeType===P.Element)switch(e.localName){case"Name":n.name=e.innerText;break;case"Path":n.path=e.innerText;break;case"Role":n.role=e.innerText;break;case"MIDI":this.parseSoundMidi(n,e)}"Factory"!==n.role&&0!==t.playbackInfo.program||(t.playbackInfo.program=n.program),this._soundsByTrack.has(e)||this._soundsByTrack.set(e,new Map),this._soundsByTrack.get(e).set(n.uniqueId,n)}parseSoundMidi(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Program":e.program=parseInt(i.innerText)}}parsePartSounding(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"TranspositionPitch":for(let t of e.staves)t.displayTranspositionPitch=parseInt(i.innerText)}}parseTranspose(e,t){let i=0,n=0;for(let e of t.childNodes)if(e.nodeType===P.Element)switch(e.localName){case"Chromatic":n=parseInt(e.innerText);break;case"Octave":i=parseInt(e.innerText)}for(let t of e.staves)t.displayTranspositionPitch=12*i+n}parseRSE(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"ChannelStrip":this.parseChannelStrip(e,i)}}parseChannelStrip(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Parameters":this.parseChannelStripParameters(e,i)}}parseChannelStripParameters(e,t){if(t.firstChild&&t.firstChild.value){let i=t.firstChild.value.split(" ");i.length>=12&&(e.playbackInfo.balance=Math.floor(16*parseFloat(i[11])),e.playbackInfo.volume=Math.floor(16*parseFloat(i[12])))}}parseMasterBarsNode(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"MasterBar":this.parseMasterBar(t)}}parseMasterBar(e){let t=new Ue;0===this._masterBars.length&&this._hasAnacrusis&&(t.isAnacrusis=!0);for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Time":let e=i.innerText.split("/");t.timeSignatureNumerator=parseInt(e[0]),t.timeSignatureDenominator=parseInt(e[1]);break;case"DoubleBar":t.isDoubleBar=!0;break;case"Section":t.section=new qe,t.section.marker=i.findChildElement("Letter").innerText,t.section.text=i.findChildElement("Text").innerText;break;case"Repeat":"true"===i.getAttribute("start").toLowerCase()&&(t.isRepeatStart=!0),"true"===i.getAttribute("end").toLowerCase()&&i.getAttribute("count")&&(t.repeatCount=parseInt(i.getAttribute("count")));break;case"AlternateEndings":let n=i.innerText.split(" "),r=0;for(let e=0;e<n.length;e++)r|=1<<-1+parseInt(n[e]);t.alternateEndings=r;break;case"Bars":this._barsOfMasterBar.push(i.innerText.split(" "));break;case"TripletFeel":switch(i.innerText){case"NoTripletFeel":t.tripletFeel=O.NoTripletFeel;break;case"Triplet8th":t.tripletFeel=O.Triplet8th;break;case"Triplet16th":t.tripletFeel=O.Triplet16th;break;case"Dotted8th":t.tripletFeel=O.Dotted8th;break;case"Dotted16th":t.tripletFeel=O.Dotted16th;break;case"Scottish8th":t.tripletFeel=O.Scottish8th;break;case"Scottish16th":t.tripletFeel=O.Scottish16th}break;case"Key":t.keySignature=parseInt(i.findChildElement("AccidentalCount").innerText);let s=i.findChildElement("Mode");if(s)switch(s.innerText.toLowerCase()){case"major":t.keySignatureType=M.Major;break;case"minor":t.keySignatureType=M.Minor}break;case"Fermatas":this.parseFermatas(t,i)}this._masterBars.push(t)}parseFermatas(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Fermata":this.parseFermata(e,i)}}parseFermata(e,t){let i=0,n=new ht;for(let e of t.childNodes)if(e.nodeType===P.Element)switch(e.localName){case"Type":switch(e.innerText){case"Short":n.type=A.Short;break;case"Medium":n.type=A.Medium;break;case"Long":n.type=A.Long}break;case"Length":n.length=parseFloat(e.innerText);break;case"Offset":let t=e.innerText.split("/");2===t.length&&(i=parseInt(t[0])/parseInt(t[1])*Te.QuarterTime|0)}e.addFermata(i,n)}parseBars(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Bar":this.parseBar(t)}}parseBar(e){let t=new Ee,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"Voices":this._voicesOfBar.set(i,n.innerText.split(" "));break;case"Clef":switch(n.innerText){case"Neutral":t.clef=a.Neutral;break;case"G2":t.clef=a.G2;break;case"F4":t.clef=a.F4;break;case"C4":t.clef=a.C4;break;case"C3":t.clef=a.C3}break;case"Ottavia":switch(n.innerText){case"8va":t.clefOttava=l._8va;break;case"15ma":t.clefOttava=l._15ma;break;case"8vb":t.clefOttava=l._8vb;break;case"15mb":t.clefOttava=l._15mb}break;case"SimileMark":switch(n.innerText){case"Simple":t.simileMark=c.Simple;break;case"FirstOfDouble":t.simileMark=c.FirstOfDouble;break;case"SecondOfDouble":t.simileMark=c.SecondOfDouble}}this._barsById.set(i,t)}parseVoices(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Voice":this.parseVoice(t)}}parseVoice(e){let t=new Je,i=e.getAttribute("id");for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Beats":this._beatsOfVoice.set(i,t.innerText.split(" "))}this._voiceById.set(i,t)}parseBeats(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Beat":this.parseBeat(t)}}parseBeat(e){let t=new ze,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"Notes":this._notesOfBeat.set(i,n.innerText.split(" "));break;case"Rhythm":this._rhythmOfBeat.set(i,n.getAttribute("ref"));break;case"Fadding":"FadeIn"===n.innerText&&(t.fadeIn=!0);break;case"Tremolo":switch(n.innerText){case"1/2":t.tremoloSpeed=p.Eighth;break;case"1/4":t.tremoloSpeed=p.Sixteenth;break;case"1/8":t.tremoloSpeed=p.ThirtySecond}break;case"Chord":t.chordId=n.innerText;break;case"Hairpin":switch(n.innerText){case"Crescendo":t.crescendo=f.Crescendo;break;case"Decrescendo":t.crescendo=f.Decrescendo}break;case"Arpeggio":"Up"===n.innerText?t.brushType=d.ArpeggioUp:t.brushType=d.ArpeggioDown;break;case"Properties":this.parseBeatProperties(n,t);break;case"XProperties":this.parseBeatXProperties(n,t);break;case"FreeText":t.text=n.innerText;break;case"TransposedPitchStemOrientation":switch(n.innerText){case"Upward":t.preferredBeamDirection=B.Up;break;case"Downward":t.preferredBeamDirection=B.Down}break;case"Dynamic":switch(n.innerText){case"PPP":t.dynamics=g.PPP;break;case"PP":t.dynamics=g.PP;break;case"P":t.dynamics=g.P;break;case"MP":t.dynamics=g.MP;break;case"MF":t.dynamics=g.MF;break;case"F":t.dynamics=g.F;break;case"FF":t.dynamics=g.FF;break;case"FFF":t.dynamics=g.FFF}break;case"GraceNotes":switch(n.innerText){case"OnBeat":t.graceType=m.OnBeat;break;case"BeforeBeat":t.graceType=m.BeforeBeat}break;case"Legato":"true"===n.getAttribute("origin")&&(t.isLegatoOrigin=!0);break;case"Whammy":let e=new Le(0,0);e.value=this.toBendValue(parseFloat(n.getAttribute("originValue"))),e.offset=this.toBendOffset(parseFloat(n.getAttribute("originOffset"))),t.addWhammyBarPoint(e);let r=new Le(0,0);r.value=this.toBendValue(parseFloat(n.getAttribute("middleValue"))),r.offset=this.toBendOffset(parseFloat(n.getAttribute("middleOffset1"))),t.addWhammyBarPoint(r);let s=new Le(0,0);s.value=this.toBendValue(parseFloat(n.getAttribute("middleValue"))),s.offset=this.toBendOffset(parseFloat(n.getAttribute("middleOffset2"))),t.addWhammyBarPoint(s);let o=new Le(0,0);o.value=this.toBendValue(parseFloat(n.getAttribute("destinationValue"))),o.offset=this.toBendOffset(parseFloat(n.getAttribute("destinationOffset"))),t.addWhammyBarPoint(o);break;case"Ottavia":switch(n.innerText){case"8va":t.ottava=l._8va;break;case"8vb":t.ottava=l._8vb;break;case"15ma":t.ottava=l._15ma;break;case"15mb":t.ottava=l._15mb}break;case"Lyrics":t.lyrics=this.parseBeatLyrics(n),this._skipApplyLyrics=!0}this._beatById.set(i,t)}parseBeatLyrics(e){const t=[];for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"Line":t.push(i.innerText)}return t}parseBeatXProperties(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"XProperty":let e=0;switch(i.getAttribute("id")){case"1124204545":e=parseInt(i.findChildElement("Int").innerText),t.invertBeamDirection=1===e;break;case"687935489":e=parseInt(i.findChildElement("Int").innerText),t.brushDuration=e}}}parseBeatProperties(e,t){let i=!1,n=null,r=null,s=null,o=null,a=null;for(let l of e.childNodes)if(l.nodeType===P.Element)switch(l.localName){case"Property":switch(l.getAttribute("name")){case"Brush":"Up"===l.findChildElement("Direction").innerText?t.brushType=d.BrushUp:t.brushType=d.BrushDown;break;case"PickStroke":"Up"===l.findChildElement("Direction").innerText?t.pickStroke=S.Up:t.pickStroke=S.Down;break;case"Slapped":l.findChildElement("Enable")&&(t.slap=!0);break;case"Popped":l.findChildElement("Enable")&&(t.pop=!0);break;case"VibratoWTremBar":switch(l.findChildElement("Strength").innerText){case"Wide":t.vibrato=w.Wide;break;case"Slight":t.vibrato=w.Slight}break;case"WhammyBar":i=!0;break;case"WhammyBarExtend":break;case"WhammyBarOriginValue":n||(n=new Le(0,0)),n.value=this.toBendValue(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarOriginOffset":n||(n=new Le(0,0)),n.offset=this.toBendOffset(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarMiddleValue":r=this.toBendValue(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarMiddleOffset1":s=this.toBendOffset(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarMiddleOffset2":o=this.toBendOffset(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarDestinationValue":a||(a=new Le(Le.MaxPosition,0)),a.value=this.toBendValue(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarDestinationOffset":a||(a=new Le(0,0)),a.offset=this.toBendOffset(parseFloat(l.findChildElement("Float").innerText))}}i&&(n||(n=new Le(0,0)),a||(a=new Le(Le.MaxPosition,0)),t.addWhammyBarPoint(n),s&&r&&t.addWhammyBarPoint(new Le(s,r)),o&&r&&t.addWhammyBarPoint(new Le(o,r)),s||o||!r||t.addWhammyBarPoint(new Le(Le.MaxPosition/2|0,r)),t.addWhammyBarPoint(a))}parseNotes(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Note":this.parseNote(t)}}parseNote(e){let t=new Ae,n=e.getAttribute("id");for(let r of e.childNodes)if(r.nodeType===P.Element)switch(r.localName){case"Properties":this.parseNoteProperties(r,t,n);break;case"AntiAccent":"normal"===r.innerText.toLowerCase()&&(t.isGhost=!0);break;case"LetRing":t.isLetRing=!0;break;case"Trill":t.trillValue=parseInt(r.innerText),t.trillSpeed=p.Sixteenth;break;case"Accent":let e=parseInt(r.innerText);0!=(1&e)&&(t.isStaccato=!0),0!=(4&e)&&(t.accentuated=s.Heavy),0!=(8&e)&&(t.accentuated=s.Normal);break;case"Tie":"true"===r.getAttribute("destination").toLowerCase()&&(t.isTieDestination=!0);break;case"Vibrato":switch(r.innerText){case"Slight":t.vibrato=w.Slight;break;case"Wide":t.vibrato=w.Wide}break;case"LeftFingering":switch(t.isFingering=!0,r.innerText){case"P":t.leftHandFinger=i.Thumb;break;case"I":t.leftHandFinger=i.IndexFinger;break;case"M":t.leftHandFinger=i.MiddleFinger;break;case"A":t.leftHandFinger=i.AnnularFinger;break;case"C":t.leftHandFinger=i.LittleFinger}break;case"RightFingering":switch(t.isFingering=!0,r.innerText){case"P":t.rightHandFinger=i.Thumb;break;case"I":t.rightHandFinger=i.IndexFinger;break;case"M":t.rightHandFinger=i.MiddleFinger;break;case"A":t.rightHandFinger=i.AnnularFinger;break;case"C":t.rightHandFinger=i.LittleFinger}break;case"InstrumentArticulation":t.percussionArticulation=parseInt(r.innerText)}this._noteById.set(n,t)}parseNoteProperties(e,t,i){let n=!1,r=null,s=null,o=null,a=null,l=null,c=-1,h=-1;for(let u of e.childNodes)if(u.nodeType===P.Element)switch(u.localName){case"Property":switch(u.getAttribute("name")){case"String":t.string=parseInt(u.findChildElement("String").innerText)+1;break;case"Fret":t.fret=parseInt(u.findChildElement("Fret").innerText);break;case"Element":c=parseInt(u.findChildElement("Element").innerText);break;case"Variation":h=parseInt(u.findChildElement("Variation").innerText);break;case"Tapped":this._tappedNotes.set(i,!0);break;case"HarmonicType":let e=u.findChildElement("HType");if(e)switch(e.innerText){case"NoHarmonic":t.harmonicType=b.None;break;case"Natural":t.harmonicType=b.Natural;break;case"Artificial":t.harmonicType=b.Artificial;break;case"Pinch":t.harmonicType=b.Pinch;break;case"Tap":t.harmonicType=b.Tap;break;case"Semi":t.harmonicType=b.Semi;break;case"Feedback":t.harmonicType=b.Feedback}break;case"HarmonicFret":let d=u.findChildElement("HFret");d&&(t.harmonicValue=parseFloat(d.innerText));break;case"Muted":u.findChildElement("Enable")&&(t.isDead=!0);break;case"PalmMuted":u.findChildElement("Enable")&&(t.isPalmMute=!0);break;case"Octave":t.octave=parseInt(u.findChildElement("Number").innerText),-1===t.tone&&(t.tone=0);break;case"Tone":t.tone=parseInt(u.findChildElement("Step").innerText);break;case"ConcertPitch":this.parseConcertPitch(u,t);break;case"Bended":n=!0;break;case"BendOriginValue":r||(r=new Le(0,0)),r.value=this.toBendValue(parseFloat(u.findChildElement("Float").innerText));break;case"BendOriginOffset":r||(r=new Le(0,0)),r.offset=this.toBendOffset(parseFloat(u.findChildElement("Float").innerText));break;case"BendMiddleValue":s=this.toBendValue(parseFloat(u.findChildElement("Float").innerText));break;case"BendMiddleOffset1":o=this.toBendOffset(parseFloat(u.findChildElement("Float").innerText));break;case"BendMiddleOffset2":a=this.toBendOffset(parseFloat(u.findChildElement("Float").innerText));break;case"BendDestinationValue":l||(l=new Le(Le.MaxPosition,0)),l.value=this.toBendValue(parseFloat(u.findChildElement("Float").innerText));break;case"BendDestinationOffset":l||(l=new Le(0,0)),l.offset=this.toBendOffset(parseFloat(u.findChildElement("Float").innerText));break;case"HopoOrigin":u.findChildElement("Enable")&&(t.isHammerPullOrigin=!0);break;case"HopoDestination":break;case"LeftHandTapped":t.isLeftHandTapped=!0;break;case"Slide":let f=parseInt(u.findChildElement("Flags").innerText);0!=(1&f)?t.slideOutType=_.Shift:0!=(2&f)?t.slideOutType=_.Legato:0!=(4&f)?t.slideOutType=_.OutDown:0!=(8&f)&&(t.slideOutType=_.OutUp),0!=(16&f)?t.slideInType=y.IntoFromBelow:0!=(32&f)&&(t.slideInType=y.IntoFromAbove),0!=(64&f)?t.slideOutType=_.PickSlideDown:0!=(128&f)&&(t.slideOutType=_.PickSlideUp)}}n&&(r||(r=new Le(0,0)),l||(l=new Le(Le.MaxPosition,0)),t.addBendPoint(r),o&&s&&t.addBendPoint(new Le(o,s)),a&&s&&t.addBendPoint(new Le(a,s)),o||a||!s||t.addBendPoint(new Le(Le.MaxPosition/2|0,s)),t.addBendPoint(l)),-1!==c&&-1!==h&&(t.percussionArticulation=Ie.articulationFromElementVariation(c,h))}parseConcertPitch(e,t){const i=e.findChildElement("Pitch");if(i)for(let e of i.childNodes)if(e.nodeType===P.Element)switch(e.localName){case"Accidental":switch(e.innerText){case"x":t.accidentalMode=v.ForceDoubleSharp;break;case"#":t.accidentalMode=v.ForceSharp;break;case"b":t.accidentalMode=v.ForceFlat;break;case"bb":t.accidentalMode=v.ForceDoubleFlat}}}toBendValue(e){return e*vt.BendPointValueFactor|0}toBendOffset(e){return e*vt.BendPointPositionFactor}parseRhythms(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"Rhythm":this.parseRhythm(t)}}parseRhythm(e){let t=new mt,i=e.getAttribute("id");t.id=i;for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"NoteValue":switch(i.innerText){case"Long":t.value=p.QuadrupleWhole;break;case"DoubleWhole":t.value=p.DoubleWhole;break;case"Whole":t.value=p.Whole;break;case"Half":t.value=p.Half;break;case"Quarter":t.value=p.Quarter;break;case"Eighth":t.value=p.Eighth;break;case"16th":t.value=p.Sixteenth;break;case"32nd":t.value=p.ThirtySecond;break;case"64th":t.value=p.SixtyFourth;break;case"128th":t.value=p.OneHundredTwentyEighth;break;case"256th":t.value=p.TwoHundredFiftySixth}break;case"PrimaryTuplet":t.tupletNumerator=parseInt(i.getAttribute("num")),t.tupletDenominator=parseInt(i.getAttribute("den"));break;case"AugmentationDot":t.dots=parseInt(i.getAttribute("count"))}this._rhythmById.set(i,t)}buildModel(){for(let e=0,t=this._masterBars.length;e<t;e++){let t=this._masterBars[e];this.score.addMasterBar(t)}for(let e of this._tracksMapping){if(!e)continue;let t=this._tracksById.get(e);this.score.addTrack(t)}for(let e of this._barsOfMasterBar){let t=0;for(let i=0,n=0;i<e.length&&n<this.score.tracks.length;i++){let r=e[i];if(r!==vt.InvalidId){let e=this._barsById.get(r),i=this.score.tracks[n],s=i.staves[t];if(s.addBar(e),this._voicesOfBar.has(r))for(let t of this._voicesOfBar.get(r))if(t!==vt.InvalidId){let i=this._voiceById.get(t);if(e.addVoice(i),this._beatsOfVoice.has(t))for(let e of this._beatsOfVoice.get(t))if(e!==vt.InvalidId){let t=We.clone(this._beatById.get(e));i.addBeat(t);let n=this._rhythmOfBeat.get(e),r=this._rhythmById.get(n);if(t.duration=r.value,t.dots=r.dots,t.tupletNumerator=r.tupletNumerator,t.tupletDenominator=r.tupletDenominator,this._notesOfBeat.has(e))for(let i of this._notesOfBeat.get(e))if(i!==vt.InvalidId){const e=Be.clone(this._noteById.get(i));s.isPercussion?(e.fret=-1,e.string=-1):e.percussionArticulation=-1,t.addNote(e),this._tappedNotes.has(i)&&(t.tap=!0)}}}else{let t=new Je;e.addVoice(t);let i=new ze;i.isEmpty=!0,i.duration=p.Quarter,t.addBeat(i)}t===i.staves.length-1?(n++,t=0):t++}else n++}}for(let e of this._tracksMapping){if(!e)continue;let t=this._tracksById.get(e),i=!1;for(const e of t.staves)if(e.isPercussion){i=!0;break}if(i||(t.percussionArticulations=[]),this._automationsPerTrackIdAndBarIndex.has(e)){const i=this._automationsPerTrackIdAndBarIndex.get(e);for(const[e,n]of i)if(t.staves.length>0&&e<t.staves[0].bars.length){const i=t.staves[0].bars[e];if(i.voices.length>0&&i.voices[0].beats.length>0){const e=i.voices[0].beats[0];for(const t of n)e.automations.push(t)}}}}for(const[e,t]of this._masterTrackAutomations){let i=this.score.masterBars[e];for(let n=0,r=t.length;n<r;n++){let r=t[n];r.type===o.Tempo&&(0===e&&(this.score.tempo=0|r.value,r.text&&(this.score.tempoLabel=r.text)),i.tempoAutomation=r)}}}}vt.InvalidId="-1",vt.BendPointPositionFactor=Le.MaxPosition/100,vt.BendPointValueFactor=.04;class yt{constructor(){this.showSlash=!1,this.showStandardNotation=!1,this.showTablature=!1}}class _t{constructor(){this.isMultiRest=!1,this.tracks=[]}}class wt{constructor(e){this.parts=[],this.zoomLevel=0,this.layout=0;let t=at.fromBuffer(e),i=nt.readInt32BE(t);for(let e=0;e<i;e++){let e=new _t;this.parts.push(e),e.isMultiRest=st.gpReadBool(t);let i=nt.readInt32BE(t);for(let n=0;n<i;n++){let i=t.readByte();0===i&&(i=1);let n=new yt;n.showStandardNotation=0!=(1&i),n.showTablature=0!=(2&i),n.showSlash=0!=(4&i),e.tracks.push(n)}}}apply(e){let t=0,i=0;for(let n of this.parts)for(let r of n.tracks){if(i<e.tracks.length){let n=e.tracks[i];if(t<n.staves.length){let e=n.staves[t];e.showTablature=r.showTablature,e.showStandardNotation=r.showStandardNotation}}i++,i>=e.tracks.length&&(t++,i=0)}}static writeForScore(e){const t=at.withCapacity(128),i=[new _t];for(const t of e.tracks)for(const e of t.staves){const t=new yt;if(t.showStandardNotation=e.showStandardNotation,t.showTablature=e.showTablature,0===e.index)i[0].tracks.push(t);else{let e=new _t;e.tracks.push(t),i.push(e)}}nt.writeInt32BE(t,i.length);for(const e of i){t.writeByte(e.isMultiRest?1:0),nt.writeInt32BE(t,e.tracks.length);for(const i of e.tracks){let e=0;i.showStandardNotation&&(e|=1),i.showTablature&&(e|=2),i.showSlash&&(e|=4),t.writeByte(e)}}return t.toArray()}}class St{}class Ct extends St{constructor(e){super(),this.n=e}}class xt extends St{constructor(e,t){super(),this.left=e,this.right=t}}class kt extends St{constructor(e,t){super(),this.n=e,this.table=t}}class Et{static make(e,t,i,n){let r=[],s=[];if(n>32)throw new ue("Invalid huffman");for(let e=0;e<n;e++)r.push(0),s.push(0);for(let s=0;s<i;s++){let i=e[s+t];if(i>=n)throw new ue("Invalid huffman");r[i]++}let o=0;for(let e=1;e<n-1;e++)o=o+r[e]<<1,s[e]=o;let a=new Map;for(let n=0;n<i;n++){let i=e[n+t];if(0!==i){let e=s[i-1];s[i-1]=e+1,a.set(e<<5|i,n)}}return Et.treeCompress(new xt(Et.treeMake(a,n,0,1),Et.treeMake(a,n,1,1)))}static treeMake(e,t,i,n){if(n>t)throw new ue("Invalid huffman");let r=i<<5|n;return e.has(r)?new Ct(e.get(r)):(i<<=1,n+=1,new xt(Et.treeMake(e,t,i,n),Et.treeMake(e,t,1|i,n)))}static treeCompress(e){let t=Et.treeDepth(e);if(0===t)return e;if(1===t){if(e instanceof xt)return new xt(Et.treeCompress(e.left),Et.treeCompress(e.right));throw new ue("assert")}let i=1<<t,n=[];for(let e=0;e<i;e++)n.push(new Ct(-1));return Et.treeWalk(n,0,0,t,e),new kt(t,n)}static treeWalk(e,t,i,n,r){r instanceof xt&&n>0?(Et.treeWalk(e,t,i+1,n-1,r.left),Et.treeWalk(e,t|1<<i,i+1,n-1,r.right)):e[t]=Et.treeCompress(r)}static treeDepth(e){if(e instanceof Ct)return 0;if(e instanceof kt)throw new ue("assert");if(e instanceof xt){let t=Et.treeDepth(e.left),i=Et.treeDepth(e.right);return 1+(t<i?t:i)}return 0}}!function(e){e[e.Head=0]="Head",e[e.Block=1]="Block",e[e.CData=2]="CData",e[e.Flat=3]="Flat",e[e.Crc=4]="Crc",e[e.Dist=5]="Dist",e[e.DistOne=6]="DistOne",e[e.Done=7]="Done"}(F||(F={}));class Tt{constructor(){this.buffer=new Uint8Array(Tt.BufferSize),this.pos=0}slide(){let e=new Uint8Array(Tt.BufferSize);this.pos-=Tt.Size,e.set(this.buffer.subarray(Tt.Size,Tt.Size+this.pos),0),this.buffer=e}addBytes(e,t,i){this.pos+i>Tt.BufferSize&&this.slide(),this.buffer.set(e.subarray(t,t+i),this.pos),this.pos+=i}addByte(e){this.pos===Tt.BufferSize&&this.slide(),this.buffer[this.pos]=e,this.pos++}getLastChar(){return this.buffer[this.pos-1]}available(){return this.pos}}Tt.Size=32768,Tt.BufferSize=65536;class Lt{constructor(e){this._nbits=0,this._bits=0,this._state=F.Block,this._isFinal=!1,this._huffman=Lt._fixedHuffman,this._huffdist=null,this._len=0,this._dist=0,this._needed=0,this._output=null,this._outpos=0,this._lengths=[],this._window=new Tt,this._input=e;for(let e=0;e<19;e++)this._lengths.push(-1)}static buildFixedHuffman(){let e=[];for(let t=0;t<288;t++)e.push(t<=143?8:t<=255?9:t<=279?7:8);return Et.make(e,0,288,10)}readBytes(e,t,i){if(this._needed=i,this._outpos=t,this._output=e,i>0)for(;this.inflateLoop(););return i-this._needed}inflateLoop(){switch(this._state){case F.Head:let e=this._input.readByte();if(8!=(15&e))throw new ue("Invalid data");let t=this._input.readByte(),i=0!=(32&t);if(((e<<8)+t)%31!=0)throw new ue("Invalid data");if(i)throw new ue("Unsupported dictionary");return this._state=F.Block,!0;case F.Crc:return this._state=F.Done,!0;case F.Done:return!1;case F.Block:switch(this._isFinal=this.getBit(),this.getBits(2)){case 0:if(this._len=nt.readUInt16LE(this._input),nt.readUInt16LE(this._input)!==65535-this._len)throw new ue("Invalid data");this._state=F.Flat;let e=this.inflateLoop();return this.resetBits(),e;case 1:return this._huffman=Lt._fixedHuffman,this._huffdist=null,this._state=F.CData,!0;case 2:let t=this.getBits(5)+257,i=this.getBits(5)+1,n=this.getBits(4)+4;for(let e=0;e<n;e++)this._lengths[Lt.CodeLengthsPos[e]]=this.getBits(3);for(let e=n;e<19;e++)this._lengths[Lt.CodeLengthsPos[e]]=0;this._huffman=Et.make(this._lengths,0,19,8);let r=[];for(let e=0;e<t+i;e++)r.push(0);return this.inflateLengths(r,t+i),this._huffdist=Et.make(r,t,i,16),this._huffman=Et.make(r,0,t,16),this._state=F.CData,!0;default:throw new ue("Invalid data")}case F.Flat:{let e=this._len<this._needed?this._len:this._needed,t=nt.readByteArray(this._input,e);return this._len-=e,this.addBytes(t,0,e),0===this._len&&(this._state=this._isFinal?F.Crc:F.Block),this._needed>0}case F.DistOne:{let e=this._len<this._needed?this._len:this._needed;return this.addDistOne(e),this._len-=e,0===this._len&&(this._state=F.CData),this._needed>0}case F.Dist:for(;this._len>0&&this._needed>0;){let e=this._len<this._dist?this._len:this._dist,t=this._needed<e?this._needed:e;this.addDist(this._dist,t),this._len-=t}return 0===this._len&&(this._state=F.CData),this._needed>0;case F.CData:let n=this.applyHuffman(this._huffman);if(n<256)return this.addByte(n),this._needed>0;if(256===n)return this._state=this._isFinal?F.Crc:F.Block,!0;{n=n-257&255;let e=Lt.LenExtraBitsTbl[n];if(-1===e)throw new ue("Invalid data");this._len=Lt.LenBaseValTbl[n]+this.getBits(e);let t=this._huffdist,i=t?this.applyHuffman(t):this.getRevBits(5);if(e=Lt.DistExtraBitsTbl[i],-1===e)throw new ue("Invalid data");if(this._dist=Lt.DistBaseValTbl[i]+this.getBits(e),this._dist>this._window.available())throw new ue("Invalid data");return this._state=1===this._dist?F.DistOne:F.Dist,!0}}return!1}addDistOne(e){let t=this._window.getLastChar();for(let i=0;i<e;i++)this.addByte(t)}addByte(e){this._window.addByte(e),this._output[this._outpos]=e,this._needed--,this._outpos++}addDist(e,t){this.addBytes(this._window.buffer,this._window.pos-e,t)}getBit(){0===this._nbits&&(this._nbits=8,this._bits=this._input.readByte());let e=1==(1&this._bits);return this._nbits--,this._bits=this._bits>>1,e}getBits(e){for(;this._nbits<e;)this._bits=this._bits|this._input.readByte()<<this._nbits,this._nbits+=8;let t=this._bits&(1<<e)-1;return this._nbits-=e,this._bits=this._bits>>e,t}getRevBits(e){return 0===e?0:this.getBit()?1<<e-1|this.getRevBits(e-1):this.getRevBits(e-1)}resetBits(){this._bits=0,this._nbits=0}addBytes(e,t,i){this._window.addBytes(e,t,i),this._output.set(e.subarray(t,t+i),this._outpos),this._needed-=i,this._outpos+=i}inflateLengths(e,t){let i=0,n=0;for(;i<t;){let r=this.applyHuffman(this._huffman);switch(r){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:n=r,e[i]=r,i++;break;case 16:let s=i+3+this.getBits(2);if(s>t)throw new ue("Invalid data");for(;i<s;)e[i]=n,i++;break;case 17:if(i+=3+this.getBits(3),i>t)throw new ue("Invalid data");break;case 18:if(i+=11+this.getBits(7),i>t)throw new ue("Invalid data");break;default:throw new ue("Invalid data")}}}applyHuffman(e){if(e instanceof Ct)return e.n;if(e instanceof xt)return this.applyHuffman(this.getBit()?e.right:e.left);if(e instanceof kt)return this.applyHuffman(e.table[this.getBits(e.n)]);throw new ue("Invalid data")}}Lt.LenExtraBitsTbl=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1],Lt.LenBaseValTbl=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Lt.DistExtraBitsTbl=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1],Lt.DistBaseValTbl=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Lt.CodeLengthsPos=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Lt._fixedHuffman=Lt.buildFixedHuffman();class Nt{constructor(e,t){this.fullName=e;let i=e.lastIndexOf("/");this.fileName=-1===i||i===e.length-1?this.fullName:e.substr(i+1),this.data=t}}Nt.OptionalDataDescriptorSignature=134695760,Nt.CompressionMethodDeflate=8,Nt.LocalFileHeaderSignature=67324752,Nt.CentralFileHeaderSignature=33639248,Nt.EndOfCentralDirSignature=101010256;class Mt{constructor(e){this._readable=e}read(){let e=[];for(;;){let t=this.readEntry();if(!t)break;e.push(t)}return e}readEntry(){let e=this._readable;if(nt.readInt32LE(e)!==Nt.LocalFileHeaderSignature)return null;nt.readUInt16LE(e);let t=nt.readUInt16LE(e),i=nt.readUInt16LE(e),n=0!==i;if(n&&i!==Nt.CompressionMethodDeflate)return null;nt.readInt16LE(this._readable),nt.readInt16LE(this._readable),nt.readInt32LE(e),nt.readInt32LE(e);let r,s=nt.readInt32LE(e),o=nt.readInt16LE(e),a=nt.readInt16LE(e),l=nt.toString(nt.readByteArray(e,o),"utf-8");if(e.skip(a),n){let e=at.empty(),t=new Lt(this._readable),i=new Uint8Array(65536);for(;;){let n=t.readBytes(i,0,i.length);if(e.write(i,0,n),n<i.length)break}r=e.toArray()}else r=nt.readByteArray(this._readable,s);return 0!=(8&t)&&(nt.readInt32LE(this._readable)===Nt.OptionalDataDescriptorSignature&&nt.readInt32LE(this._readable),nt.readInt32LE(this._readable),nt.readInt32LE(this._readable)),new Nt(l,r)}}class Ot extends Ce{get name(){return"Guitar Pro 7"}constructor(){super()}readScore(){Oe.debug(this.name,"Loading ZIP entries");let e,t=new Mt(this.data);try{e=t.read()}catch(e){throw new xe("No Zip archive",e)}Oe.debug(this.name,"Zip entries loaded");let i=null,n=null,r=null;for(let t of e)switch(t.fileName){case"score.gpif":i=nt.toString(t.data,this.settings.importer.encoding);break;case"BinaryStylesheet":n=t.data;break;case"PartConfiguration":r=t.data}if(!i)throw new xe("No score.gpif found in zip archive");Oe.debug(this.name,"Start Parsing score.gpif");let s=new vt;s.parseXml(i,this.settings),Oe.debug(this.name,"score.gpif parsed");let o=s.score;return n&&(Oe.debug(this.name,"Start Parsing BinaryStylesheet"),new ct(n).apply(o),Oe.debug(this.name,"BinaryStylesheet parsed")),r&&(Oe.debug(this.name,"Start Parsing Part Configuration"),new wt(r).apply(o),Oe.debug(this.name,"Part Configuration parsed")),o}}class Dt extends he{constructor(){super(e.AlphaTabErrorType.Format,"Unexpected end of data within reader"),Object.setPrototypeOf(this,Dt.prototype)}}class It{constructor(e){this._currentByte=0,this._position=It.ByteSize,this._source=e}readByte(){return this.readBits(8)}readBytes(e){const t=new Uint8Array(e);for(let i=0;i<e;i++)t[i]=255&this.readByte();return t}readBits(e){let t=0,i=e-1;for(;i>=0;)t|=this.readBit()<<i,i--;return t}readBitsReversed(e){let t=0;for(let i=0;i<e;i++)t|=this.readBit()<<i;return t}readBit(){if(this._position>=8){if(this._currentByte=this._source.readByte(),-1===this._currentByte)throw new Dt;this._position=0}const e=this._currentByte>>It.ByteSize-this._position-1&1;return this._position++,e}readAll(){let e=at.empty();try{for(;;)e.writeByte(255&this.readByte())}catch(e){if(!(e instanceof Dt))throw e}return e.toArray()}}It.ByteSize=8;class At{constructor(){this.fileName="",this.fileSize=0,this.data=null}}class Pt{constructor(){this.files=[],this.files=[],this.fileFilter=e=>!0}load(e){let t=new It(e);this.readBlock(t)}readHeader(e){return this.getString(e.readBytes(4),0,4)}decompress(e,t=!1){let i,n=at.empty(),r=this.getInteger(e.readBytes(4),0);try{for(;n.length<r;)if(1===e.readBits(1)){let t=e.readBits(4),r=e.readBitsReversed(t),s=e.readBitsReversed(t),o=n.length-r,a=Math.min(r,s);i=n.getBuffer(),n.write(i,o,a)}else{let t=e.readBitsReversed(2);for(let i=0;i<t;i++)n.writeByte(e.readByte())}}catch(e){if(!(e instanceof Dt))throw e}i=n.getBuffer();let s=t?4:0,o=n.length-s,a=new Uint8Array(o),l=o;return a.set(i.subarray(s,s+l),0),a}readBlock(e){let t=this.readHeader(e);if("BCFZ"===t)this.readUncompressedBlock(this.decompress(e,!0));else{if("BCFS"!==t)throw new xe("Unsupported format");this.readUncompressedBlock(e.readAll())}}readUncompressedBlock(e){let t=4096,i=t;for(;i+3<e.length;){if(2===this.getInteger(e,i)){let n=new At;n.fileName=this.getString(e,i+4,127),n.fileSize=this.getInteger(e,i+140);let r=!this.fileFilter||this.fileFilter(n.fileName);r&&this.files.push(n);let s=i+148,o=0,a=0,l=r?at.withCapacity(n.fileSize):null;for(;0!==(o=this.getInteger(e,s+4*a++));)i=o*t,r&&l.write(e,i,t);if(r){n.data=new Uint8Array(Math.min(n.fileSize,l.length));let e=l.toArray();n.data.set(e.subarray(0,0+n.data.length),0)}}i+=t}}getString(e,t,i){let n="";for(let r=0;r<i;r++){let i=255&e[t+r];if(0===i)break;n+=String.fromCharCode(i)}return n}getInteger(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}}Pt.HeaderBcFs="BCFS",Pt.HeaderBcFz="BCFZ",Pt.ScoreGpif="score.gpif",Pt.BinaryStylesheet="BinaryStylesheet",Pt.PartConfiguration="PartConfiguration";class Rt extends Ce{get name(){return"Guitar Pro 6"}constructor(){super()}readScore(){Oe.debug(this.name,"Loading GPX filesystem");let e=new Pt;e.fileFilter=e=>e.endsWith("score.gpif")||e.endsWith("BinaryStylesheet")||e.endsWith("PartConfiguration"),e.load(this.data),Oe.debug(this.name,"GPX filesystem loaded");let t=null,i=null,n=null;for(let r of e.files)switch(r.fileName){case"score.gpif":t=nt.toString(r.data,this.settings.importer.encoding);break;case"BinaryStylesheet":i=r.data;break;case"PartConfiguration":n=r.data}if(!t)throw new xe("No score.gpif found in GPX");Oe.debug(this.name,"Start Parsing score.gpif");let r=new vt;r.parseXml(t,this.settings),Oe.debug(this.name,"score.gpif parsed");let s=r.score;return i&&(Oe.debug(this.name,"Start Parsing BinaryStylesheet"),new ct(i).apply(s),Oe.debug(this.name,"BinaryStylesheet parsed")),n&&(Oe.debug(this.name,"Start Parsing Part Configuration"),new wt(n).apply(s),Oe.debug(this.name,"Part Configuration parsed")),s}}class Bt extends Ce{constructor(){super(),this._currentPartGroup=null,this._trackFirstMeasureNumber=0,this._maxVoices=0,this._currentDirection=null,this._currentChord=null,this._divisionsPerQuarterNote=0,this._voiceOfStaff=new Map,this._isBeamContinue=!1,this._previousBeatWasPulled=!1,this._previousBeat=null}get name(){return"MusicXML"}readScore(){this._trackById=new Map,this._partGroups=new Map,this._tieStarts=[],this._tieStartIds=new Map,this._slurStarts=new Map;let e=nt.toString(this.data.readAll(),this.settings.importer.encoding),t=new gt;try{t.parse(e)}catch(e){throw new xe("Unsupported format")}return this._score=new $e,this._score.tempo=120,this.parseDom(t),this.settings.importer.mergePartGroupsInMusicXml&&this.mergePartGroups(),this._score.finish(this.settings),this._score.rebuildRepeatGroups(),this._score}mergePartGroups(){let e=!1;for(const t of this._partGroups.values())t.length>1&&(this.mergeGroup(t),e=!0);if(e)for(let e=0;e<this._score.tracks.length;e++)this._score.tracks[e].index=e}mergeGroup(e){let t=e[0];for(let i=1;i<e.length;i++){let n=e[i];for(let e of n.staves)t.addStaff(e);let r=this._score.tracks.indexOf(n);this._score.tracks.splice(r,1)}}parseDom(e){let t=e.firstElement;if(!t)throw new xe("Unsupported format");switch(t.localName){case"score-partwise":this.parsePartwise(t);break;case"score-timewise":break;default:throw new xe("Unsupported format")}}parsePartwise(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"work":this.parseWork(t);break;case"movement-title":this._score.title=t.innerText;break;case"identification":this.parseIdentification(t);break;case"part-list":this.parsePartList(t);break;case"part":this.parsePart(t)}}parseWork(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"work-title":this._score.title=t.innerText}}parsePart(e){let t=e.getAttribute("id");if(!this._trackById.has(t)){if(1!==this._trackById.size)return;for(const[e,i]of this._trackById)0!==i.staves.length&&0!==i.staves[0].bars.length||(t=e);if(!this._trackById.has(t))return}let i=this._trackById.get(t),n=!0;this._maxVoices=0;for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"measure":this.parseMeasure(t,i,n)&&(n=!1)}for(let e of i.staves)for(let t of e.bars)this.ensureVoices(t)}parseMeasure(e,t,i){if("yes"===e.getAttribute("implicit")&&0===e.getElementsByTagName("note",!1).length)return!1;let n=0;if(i)this._divisionsPerQuarterNote=0,this._trackFirstMeasureNumber=parseInt(e.getAttribute("number")),this._trackFirstMeasureNumber||(this._trackFirstMeasureNumber=0),n=0;else{if(n=parseInt(e.getAttribute("number")),!n)return!1;n-=this._trackFirstMeasureNumber}if(i){let i=e.getElementsByTagName("attributes",!1);if(i.length>0){let e=i[0].getElementsByTagName("staves",!1);if(e.length>0){let i=parseInt(e[0].innerText);t.ensureStaveCount(i)}}}let r=new Array(t.staves.length),s=null;for(let e=t.staves[0].bars.length;e<=n;e++)for(let e=0;e<t.staves.length;e++){let i=r[e]=new Ee;if(t.staves[e].bars.length>0){let n=t.staves[e].bars[t.staves[e].bars.length-1];i.clef=n.clef}s=this.getOrCreateMasterBar(n),t.staves[e].addBar(i),this.ensureVoices(i)}let o=!1;for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"note":this.parseNoteBeat(i,r);break;case"forward":this.parseForward(i,r);break;case"direction":this.parseDirection(i,s);break;case"attributes":o||(this.parseAttributes(i,r,s,t),o=!0);break;case"harmony":this.parseHarmony(i,t);break;case"sound":break;case"barline":this.parseBarline(i,s)}return!0}ensureVoices(e){for(;e.voices.length<this._maxVoices;){let t=new Je;e.addVoice(t);let i=new ze;i.isEmpty=!0,i.chordId=this._currentChord,t.addBeat(i)}}getOrCreateBeat(e,t,i){let n=0,r=e.getElementsByTagName("voice",!1);r.length>0&&(n=parseInt(r[0].innerText)-1);let s=this._previousBeatWasPulled;this._previousBeatWasPulled=!1;let o,a,l=e.getElementsByTagName("staff",!1),c=1;if(l.length>0){c=parseInt(l[0].innerText),(this._isBeamContinue||s)&&this._previousBeat.voice.bar.staff.index!==c-1&&(c=this._previousBeat.voice.bar.staff.index+1,this._previousBeatWasPulled=!0);let e=t[0].staff.track.index+"-"+c;this._voiceOfStaff.has(e)||this._voiceOfStaff.set(e,n)}c--,o=c<0?t[0]:c>=t.length?t[t.length-1]:t[c];let h=this.getOrCreateVoice(o,n);return i&&h.beats.length>0||1===h.beats.length&&h.isEmpty?a=h.beats[h.beats.length-1]:(a=new ze,a.isEmpty=!1,h.addBeat(a)),this._isBeamContinue=!1,this._previousBeat=a,a}parseForward(e,t){let i=this.getOrCreateBeat(e,t,!1),n=parseInt(e.findChildElement("duration").innerText)*p.Quarter/this._divisionsPerQuarterNote,r=[p.SixtyFourth,p.ThirtySecond,p.Sixteenth,p.Eighth,p.Quarter,p.Half,p.Whole];for(let e of r)if(n>=e){i.duration=e,n-=e;break}i.isEmpty=!1}parseStaffDetails(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"staff-lines":for(let e of t.staves)e.stringTuning.tunings=new Array(parseInt(i.innerText)).fill(0);break;case"staff-tuning":this.parseStaffTuning(i,t)}for(let e of t.staves)this.isEmptyTuning(e.tuning)&&(e.stringTuning.tunings=[])}parseStaffTuning(e,t){let i=parseInt(e.getAttribute("line")),n="C",r="",s=0;for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"tuning-step":n=t.innerText;break;case"tuning-alter":s=parseInt(t.innerText);break;case"tuning-octave":r=t.innerText}let o=ge.getTuningForText(n+r)+s;for(let e of t.staves)e.tuning[e.tuning.length-i]=o}parseHarmony(e,t){let i=null,n="";for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"root":for(let e of t.childNodes)if(e.nodeType===P.Element)switch(e.localName){case"root-step":i=e.innerText;break;case"root-alter":switch(parseInt(t.innerText)){case-2:n=" bb";break;case-1:n=" b";break;case 0:n="";break;case 1:n=" #";break;case 2:n=" ##"}}}let r=new He;r.name=i+n,this._currentChord=ge.newGuid();for(let e of t.staves)e.addChord(this._currentChord,r)}parseBarline(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"repeat":this.parseRepeat(i,t);break;case"ending":this.parseEnding(i,t)}}parseEnding(e,t){let i=parseInt(e.getAttribute("number"));i>0&&(--i,t.alternateEndings|=1<<i&255)}parseRepeat(e,t){let i=e.getAttribute("direction"),n=parseInt(e.getAttribute("times"));(n<0||isNaN(n))&&(n=2),"backward"===i?t.repeatCount=n:"forward"===i&&(t.isRepeatStart=!0)}parseNoteBeat(e,t){let i=e.getElementsByTagName("chord",!1).length>0,n=this.getOrCreateBeat(e,t,i);!n.chordId&&this._currentChord&&(n.chordId=this._currentChord,this._currentChord=null),this._currentDirection&&(n.text=this._currentDirection,this._currentDirection=null);let r=new Ae;n.voice.isEmpty=!1,n.isEmpty=!1,n.addNote(r),n.dots=0;let s=!1;for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"grace":n.graceType=m.BeforeBeat,n.duration=p.ThirtySecond;break;case"duration":if(n.isRest&&!s)switch(parseInt(t.innerText)){case 1:n.duration=p.Whole;break;case 2:n.duration=p.Half;break;case 4:n.duration=p.Quarter;break;case 8:n.duration=p.Eighth;break;case 16:n.duration=p.Sixteenth;break;case 32:n.duration=p.ThirtySecond;break;case 64:n.duration=p.SixtyFourth;break;default:n.duration=p.Quarter}break;case"tie":this.parseTied(t,r);break;case"cue":case"instrument":break;case"type":n.duration=this.getDuration(t.innerText),n.graceType!==m.None&&n.duration<p.Sixteenth&&(n.duration=p.Eighth);break;case"dot":n.dots++;break;case"accidental":this.parseAccidental(t,r);break;case"time-modification":this.parseTimeModification(t,n);break;case"stem":break;case"notehead":"yes"===t.getAttribute("parentheses")&&(r.isGhost=!0);break;case"beam":"continue"===t.innerText&&(this._isBeamContinue=!0);break;case"notations":this.parseNotations(t,n,r);break;case"lyric":this.parseLyric(t,n);break;case"pitch":this.parsePitch(t,r);break;case"unpitched":this.parseUnpitched(t,r);break;case"rest":s="yes"===t.getAttribute("measure"),n.isEmpty=!1,n.notes=[],n.duration=p.Whole}if(r.isStringed)for(let e=0;e<n.notes.length;e++)if(n.notes[e].string===r.string&&n.notes[e]!==r){n.removeNote(r);break}}getDuration(e){switch(e){case"256th":case"128th":case"64th":return p.SixtyFourth;case"32nd":return p.ThirtySecond;case"16th":return p.Sixteenth;case"eighth":return p.Eighth;case"quarter":return p.Quarter;case"half":return p.Half;case"long":case"breve":case"whole":return p.Whole}return p.Quarter}parseLyric(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"text":t.text?t.text+=" "+i.innerText:t.text=i.innerText}}parseAccidental(e,t){switch(e.innerText){case"sharp":t.accidentalMode=v.ForceSharp;break;case"natural":t.accidentalMode=v.ForceNatural;break;case"flat":t.accidentalMode=v.ForceFlat}}parseTied(e,t){"start"===e.getAttribute("type")?this._tieStartIds.has(t.id)||(this._tieStartIds.set(t.id,!0),this._tieStarts.push(t)):"stop"===e.getAttribute("type")&&this._tieStarts.length>0&&!t.isTieDestination&&(t.isTieDestination=!0,t.tieOriginNoteId=this._tieStarts[0].id,this._tieStarts.splice(0,1),this._tieStartIds.delete(t.id))}parseNotations(e,t,i){for(let n of e.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"articulations":this.parseArticulations(n,i);break;case"tied":this.parseTied(n,i);break;case"slide":case"glissando":"start"===n.getAttribute("type")&&(i.slideOutType=_.Shift);break;case"dynamics":this.parseDynamics(n,t);break;case"technical":this.parseTechnical(n,i);break;case"ornaments":this.parseOrnaments(n,i);break;case"slur":let e=n.getAttribute("number");switch(e||(e="1"),n.getAttribute("type")){case"start":this._slurStarts.set(e,i);break;case"stop":this._slurStarts.has(e)&&(i.isSlurDestination=!0,this._slurStarts.get(e).slurDestinationNoteId=i.id,i.slurOriginNoteId=i.id)}}}parseOrnaments(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"tremolo":switch(parseInt(i.innerText)){case 1:t.beat.tremoloSpeed=p.Eighth;break;case 2:t.beat.tremoloSpeed=p.Sixteenth;break;case 3:t.beat.tremoloSpeed=p.ThirtySecond}}}parseTechnical(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"string":t.string=parseInt(i.innerText),-2147483648!==t.string&&(t.string=t.beat.voice.bar.staff.tuning.length-t.string+1);break;case"fret":t.fret=parseInt(i.innerText);break;case"down-bow":t.beat.pickStroke=S.Down;break;case"up-bow":t.beat.pickStroke=S.Up}-2147483648!==t.string&&-2147483648!==t.fret||(t.string=-1,t.fret=-1)}parseArticulations(e,t){for(let i of e.childNodes)switch(i.localName){case"accent":t.accentuated=s.Normal;break;case"strong-accent":t.accentuated=s.Heavy;break;case"staccato":case"detached-legato":t.isStaccato=!0}}parseDynamics(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"p":t.dynamics=g.P;break;case"pp":t.dynamics=g.PP;break;case"ppp":t.dynamics=g.PPP;break;case"f":t.dynamics=g.F;break;case"ff":t.dynamics=g.FF;break;case"fff":t.dynamics=g.FFF;break;case"mp":t.dynamics=g.MP;break;case"mf":t.dynamics=g.MF}}parseTimeModification(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"actual-notes":t.tupletNumerator=parseInt(i.innerText);break;case"normal-notes":t.tupletDenominator=parseInt(i.innerText)}}parseUnpitched(e,t){let i="",n=0,r=0;for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"display-step":i=t.innerText;break;case"display-alter":n=parseInt(t.innerText);break;case"display-octave":r=parseInt(t.innerText)}let s=12*r+ge.getToneForText(i)+n;t.octave=s/12|0,t.tone=s-12*t.octave}parsePitch(e,t){let i="",n=0,r=0;for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"step":i=t.innerText;break;case"alter":n=parseFloat(t.innerText),isNaN(n)&&(n=0);break;case"octave":r=parseInt(t.innerText)+1}let s=12*r+ge.getToneForText(i)+(0|n);t.octave=s/12|0,t.tone=s-12*t.octave}getOrCreateVoice(e,t){if(t<e.voices.length)return e.voices[t];for(let i=e.voices.length;i<=t;i++)e.addVoice(new Je);return this._maxVoices=Math.max(this._maxVoices,e.voices.length),e.voices[t]}parseDirection(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"sound":let e=i.getAttribute("tempo");if(e){let i=new ke;i.isLinear=!0,i.type=o.Tempo,i.value=parseInt(e),t.tempoAutomation=i}break;case"direction-type":let n=i.firstElement;switch(n.localName){case"words":this._currentDirection=n.innerText;break;case"metronome":this.parseMetronome(n,t)}}}parseMetronome(e,t){let i=p.Quarter,n=120;for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"beat-unit":i=this.getDuration(t.innerText);break;case"per-minute":n=parseInt(t.innerText)}let r=t.tempoAutomation=new ke;r.type=o.Tempo,r.value=n*(i/4|0)}parseAttributes(e,t,i,n){let r=0,s=!1;for(let o of e.childNodes)if(o.nodeType===P.Element)switch(o.localName){case"divisions":this._divisionsPerQuarterNote=parseInt(o.innerText);break;case"key":this.parseKey(o,i);break;case"time":this.parseTime(o,i),s=!0;break;case"clef":r=parseInt(o.getAttribute("number")),isNaN(r)&&(r=1),this.parseClef(o,t[r-1]);break;case"staff-details":this.parseStaffDetails(o,n);break;case"transpose":this.parseTranspose(o,n)}s||(i.timeSignatureCommon=!0)}parseTranspose(e,t){let i=0;for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"chromatic":i+=parseInt(t.innerText);break;case"octave-change":i+=12*parseInt(t.innerText)}for(let e of t.staves)e.transpositionPitch=i}parseClef(e,t){let i="s",n=0;for(let r of e.childNodes)if(r.nodeType===P.Element)switch(r.localName){case"sign":i=r.innerText.toLowerCase();break;case"line":n=parseInt(r.innerText);break;case"clef-octave-change":switch(parseInt(r.innerText)){case-2:t.clefOttava=l._15mb;break;case-1:t.clefOttava=l._8vb;break;case 1:t.clefOttava=l._8va;break;case 2:t.clefOttava=l._15mb}}switch(i){case"g":t.clef=a.G2;break;case"f":t.clef=a.F4;break;case"c":t.clef=3===n?a.C3:a.C4;break;case"percussion":t.clef=a.Neutral,t.staff.isPercussion=!0;break;case"tab":t.clef=a.G2,t.staff.showTablature=!0;break;default:t.clef=a.G2}}parseTime(e,t){"common"===e.getAttribute("symbol")&&(t.timeSignatureCommon=!0);let i=!1,n=!1;for(let r of e.childNodes)if(r.nodeType===P.Element){let e=r.innerText;switch(r.localName){case"beats":i||(-1===e.indexOf("+")?t.timeSignatureNumerator=parseInt(e):t.timeSignatureNumerator=4,i=!0);break;case"beat-type":n||(-1===e.indexOf("+")?t.timeSignatureDenominator=parseInt(e):t.timeSignatureDenominator=4,n=!0)}}}parseKey(e,t){let i=-2147483648,n="";for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"fifths":i=parseInt(t.innerText);break;case"key-step":case"key-alter":break;case"mode":n=t.innerText}t.keySignature=-7<=i&&i<=7?i:N.C,t.keySignatureType="minor"===n?M.Minor:M.Major}getOrCreateMasterBar(e){if(e<this._score.masterBars.length)return this._score.masterBars[e];for(let t=this._score.masterBars.length;t<=e;t++){let e=new Ue;if(this._score.masterBars.length>0){let t=this._score.masterBars[this._score.masterBars.length-1];e.timeSignatureDenominator=t.timeSignatureDenominator,e.timeSignatureNumerator=t.timeSignatureNumerator,e.keySignature=t.keySignature,e.keySignatureType=t.keySignatureType}this._score.addMasterBar(e)}return this._score.masterBars[e]}parseIdentification(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"creator":"composer"===t.getAttribute("type")&&(this._score.music=t.innerText);break;case"rights":this._score.copyright&&(this._score.copyright+="\n"),this._score.copyright+=t.innerText}}parsePartList(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"part-group":this.parsePartGroup(t);break;case"score-part":this.parseScorePart(t)}}parsePartGroup(e){switch(e.getAttribute("type")){case"start":this._currentPartGroup=e.getAttribute("number"),this._partGroups.set(this._currentPartGroup,[]);break;case"stop":this._currentPartGroup=null}}parseScorePart(e){let t=e.getAttribute("id"),i=new Qe;i.ensureStaveCount(1),i.staves[0].showStandardNotation=!0,this._trackById.set(t,i),this._score.addTrack(i),this._currentPartGroup&&this._partGroups.get(this._currentPartGroup).push(i);for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"part-name":i.name=t.innerText;break;case"part-abbreviation":i.shortName=t.innerText;break;case"midi-instrument":this.parseMidiInstrument(t,i)}this.isEmptyTuning(i.staves[0].tuning)&&(i.staves[0].stringTuning.tunings=[])}isEmptyTuning(e){if(!e)return!0;for(let t=0;t<e.length;t++)if(0!==e[t])return!1;return!0}parseMidiInstrument(e,t){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"midi-channel":t.playbackInfo.primaryChannel=parseInt(i.innerText);break;case"midi-program":t.playbackInfo.program=parseInt(i.innerText);break;case"volume":t.playbackInfo.volume=Math.floor(parseInt(i.innerText)/100*16);break;case"pan":t.playbackInfo.balance=Math.max(0,Math.min(16,Math.floor((parseInt(i.innerText)+90)/180*16)))}}}!function(e){e[e.PerNotePitchBend=96]="PerNotePitchBend",e[e.NoteOff=128]="NoteOff",e[e.NoteOn=144]="NoteOn",e[e.NoteAftertouch=160]="NoteAftertouch",e[e.Controller=176]="Controller",e[e.ProgramChange=192]="ProgramChange",e[e.ChannelAftertouch=208]="ChannelAftertouch",e[e.PitchBend=224]="PitchBend",e[e.SystemExclusive=240]="SystemExclusive",e[e.SystemExclusive2=247]="SystemExclusive2",e[e.Meta=255]="Meta"}(W||(W={}));class Ft{constructor(e,t,i,n,r){this.track=e,this.tick=t,this.message=i|n<<8|r<<16}get channel(){return 15&this.message}get command(){return 240&this.message}get data1(){return(65280&this.message)>>8}set data1(e){this.message&=-65281,this.message|=e<<8}get data2(){return(16711680&this.message)>>16}set data2(e){this.message&=-16711681,this.message|=e<<16}writeTo(e){let t=new Uint8Array([this.message>>24&255,this.message>>16&255,this.message>>8&255,255&this.message]);e.write(t,0,t.length)}}!function(e){e[e.SequenceNumber=0]="SequenceNumber",e[e.TextEvent=1]="TextEvent",e[e.CopyrightNotice=2]="CopyrightNotice",e[e.SequenceOrTrackName=3]="SequenceOrTrackName",e[e.InstrumentName=4]="InstrumentName",e[e.LyricText=5]="LyricText",e[e.MarkerText=6]="MarkerText",e[e.CuePoint=7]="CuePoint",e[e.PatchName=8]="PatchName",e[e.PortName=9]="PortName",e[e.MidiChannel=32]="MidiChannel",e[e.MidiPort=33]="MidiPort",e[e.EndOfTrack=47]="EndOfTrack",e[e.Tempo=81]="Tempo",e[e.SmpteOffset=84]="SmpteOffset",e[e.TimeSignature=88]="TimeSignature",e[e.KeySignature=89]="KeySignature",e[e.SequencerSpecific=127]="SequencerSpecific"}(V||(V={}));class Wt extends Ft{get channel(){return-1}get command(){return 255&this.message}get metaStatus(){return this.data1}constructor(e,t,i,n,r){super(e,t,i,n,r)}}!function(e){e[e.SystemExclusive=240]="SystemExclusive",e[e.MtcQuarterFrame=241]="MtcQuarterFrame",e[e.SongPosition=242]="SongPosition",e[e.SongSelect=243]="SongSelect",e[e.TuneRequest=246]="TuneRequest",e[e.SystemExclusive2=247]="SystemExclusive2"}(z||(z={}));class Vt extends Ft{get channel(){return-1}get command(){return 255&this.message}constructor(e,t,i,n,r){super(e,t,i,n,r)}}!function(e){e[e.MetronomeTick=0]="MetronomeTick",e[e.Rest=1]="Rest"}(H||(H={}));class zt extends Vt{constructor(e,t,i,n,r){super(e,t,i,255&n,n>>8&255),this.data=r}get isMetronome(){return this.manufacturerId==zt.AlphaTabManufacturerId&&this.data[0]==H.MetronomeTick}get metronomeNumerator(){return this.isMetronome?this.data[1]:-1}get metronomeDurationInTicks(){return this.isMetronome?nt.decodeUInt32LE(this.data,2):-1}get metronomeDurationInMilliseconds(){return this.isMetronome?nt.decodeUInt32LE(this.data,6):-1}get isRest(){return this.manufacturerId==zt.AlphaTabManufacturerId&&this.data[0]==H.Rest}get manufacturerId(){return this.message>>8}writeTo(e){e.writeByte(240);let t=this.data.length+2;e.writeByte(this.manufacturerId);let i=new Uint8Array([t>>24&255,t>>16&255,t>>8&255,255&t]);e.write(i,0,i.length),e.writeByte(247)}static encodeMetronome(e,t,i){const n=at.withCapacity(10);return n.writeByte(H.MetronomeTick),n.writeByte(e),nt.writeInt32LE(n,t),nt.writeInt32LE(n,i),n.toArray()}}zt.AlphaTabManufacturerId=125;class Ht{constructor(e,t){this.time=0,this.eventIndex=e,this.event=t,this.isMetronome=this.event instanceof zt&&this.event.isMetronome}static newMetronomeEvent(e,t,i,n,r){const s=new zt(0,t,W.SystemExclusive2,zt.AlphaTabManufacturerId,zt.encodeMetronome(i,n,r));return new Ht(e,s)}}class jt{}jt.DefaultChannelCount=17,jt.MetronomeChannel=jt.DefaultChannelCount-1,jt.AudioChannels=2,jt.MinVolume=0,jt.MinProgram=0,jt.MaxProgram=127,jt.MinPlaybackSpeed=.125,jt.MaxPlaybackSpeed=8,jt.MaxPitchWheel=16384,jt.MaxPitchWheel20=4294967296,jt.DefaultPitchWheel=jt.MaxPitchWheel/2,jt.MicroBufferCount=32,jt.MicroBufferSize=64;class Ut{constructor(e,t,i){this.bpm=e,this.ticks=t,this.time=i}}class Gt{constructor(){this.tempoChanges=[],this.firstProgramEventPerChannel=new Map,this.firstTimeSignatureNumerator=0,this.firstTimeSignatureDenominator=0,this.synthData=[],this.division=0,this.eventIndex=0,this.currentTime=0,this.playbackRange=null,this.playbackRangeStartTime=0,this.playbackRangeEndTime=0,this.endTick=0,this.endTime=0}}class Kt{constructor(e){this._oneTimeState=null,this._countInState=null,this.isLooping=!1,this.playbackSpeed=1,this._synthesizer=e,this._mainState=new Gt,this._currentState=this._mainState}get isPlayingOneTimeMidi(){return this._currentState==this._oneTimeState}get isPlayingCountIn(){return this._currentState==this._countInState}get playbackRange(){return this._currentState.playbackRange}set playbackRange(e){this._currentState.playbackRange=e,e&&(this._currentState.playbackRangeStartTime=this.tickPositionToTimePositionWithSpeed(e.startTick,1),this._currentState.playbackRangeEndTime=this.tickPositionToTimePositionWithSpeed(e.endTick,1))}get currentTime(){return this._currentState.currentTime}get endTick(){return this._currentState.endTick}get endTime(){return this._currentState.endTime/this.playbackSpeed}seek(e){if(e*=this.playbackSpeed,this.playbackRange&&(e<this._currentState.playbackRangeStartTime?e=this._currentState.playbackRangeStartTime:e>this._currentState.playbackRangeEndTime&&(e=this._currentState.playbackRangeEndTime)),e>this._currentState.currentTime)this.silentProcess(e-this._currentState.currentTime);else if(e<this._currentState.currentTime){this._currentState.currentTime=0,this._currentState.eventIndex=0;let t=this._synthesizer.metronomeVolume;this._synthesizer.noteOffAll(!0),this._synthesizer.resetSoft(),this._synthesizer.setupMetronomeChannel(t),this.silentProcess(e)}}silentProcess(e){if(e<=0)return;let t=Date.now(),i=this._currentState.currentTime+e;for(;this._currentState.currentTime<i;)this.fillMidiEventQueueLimited(i-this._currentState.currentTime)&&this._synthesizer.synthesizeSilent(jt.MicroBufferSize);this._currentState.currentTime=i;let n=Date.now()-t;Oe.debug("Sequencer","Silent seek finished in "+n+"ms")}loadOneTimeMidi(e){this._oneTimeState=this.createStateFromFile(e),this._currentState=this._oneTimeState}loadMidi(e){this._mainState=this.createStateFromFile(e),this._currentState=this._mainState}createStateFromFile(e){const t=new Gt;t.tempoChanges=[],t.division=e.division,t.eventIndex=0,t.currentTime=0,t.synthData=[];let i=120,n=0,r=0,s=0,o=0,a=0,l=0,c=0,h=0;for(let u of e.events){let d=new Ht(t.synthData.length,u);t.synthData.push(d);let f=u.tick-h;if(n+=f,r+=f*(6e4/(i*e.division)),d.time=r,h=u.tick,o>0)for(;l<n;){let e=Ht.newMetronomeEvent(t.synthData.length,l,Math.floor(l/o)%s,o,a);t.synthData.push(e),e.time=c,l+=o,c+=a}if(u.command===W.Meta&&u.data1===V.Tempo)i=6e7/u.value,t.tempoChanges.push(new Ut(i,n,r)),a=o*(6e4/(i*e.division));else if(u.command===W.Meta&&u.data1===V.TimeSignature){let n=u,r=Math.pow(2,n.data[1]);s=n.data[0],o=t.division*(4/r)|0,a=o*(6e4/(i*e.division)),0===t.firstTimeSignatureDenominator&&(t.firstTimeSignatureNumerator=n.data[0],t.firstTimeSignatureDenominator=r)}else if(u.command===W.ProgramChange){let e=u.channel;t.firstProgramEventPerChannel.has(e)||t.firstProgramEventPerChannel.set(e,d)}}return t.synthData.sort(((e,t)=>e.time>t.time?1:e.time<t.time?-1:e.eventIndex-t.eventIndex)),t.endTime=r,t.endTick=n,t}fillMidiEventQueue(){return this.fillMidiEventQueueLimited(-1)}fillMidiEventQueueLimited(e){let t=jt.MicroBufferSize/this._synthesizer.outSampleRate*1e3*this.playbackSpeed,i=this.internalEndTime;e>0&&(e<t&&(t=e),i=Math.min(this.internalEndTime,this._currentState.currentTime+e));let n=!1;for(this._currentState.currentTime+=t;this._currentState.eventIndex<this._currentState.synthData.length&&this._currentState.synthData[this._currentState.eventIndex].time<this._currentState.currentTime&&this._currentState.currentTime<i;)this._synthesizer.dispatchEvent(this._currentState.synthData[this._currentState.eventIndex]),this._currentState.eventIndex++,n=!0;return n}tickPositionToTimePosition(e){return this.tickPositionToTimePositionWithSpeed(e,this.playbackSpeed)}timePositionToTickPosition(e){return this.timePositionToTickPositionWithSpeed(e,this.playbackSpeed)}tickPositionToTimePositionWithSpeed(e,t){let i=0,n=120,r=0;for(const t of this._currentState.tempoChanges){if(e<t.ticks)break;i=t.time,n=t.bpm,r=t.ticks}return i+=(e-=r)*(6e4/(n*this._currentState.division)),i/t}timePositionToTickPositionWithSpeed(e,t){e*=t;let i=0,n=120,r=0;for(const t of this._currentState.tempoChanges){if(e<t.time)break;i=t.ticks,n=t.bpm,r=t.time}return i+=(e-=r)/(6e4/(n*this._currentState.division))|0,i+1}get internalEndTime(){return this.playbackRange?this._currentState.playbackRangeEndTime:this._currentState.endTime}get isFinished(){return this._currentState.currentTime>=this.internalEndTime}stop(){this.playbackRange?this.playbackRange&&(this._currentState.currentTime=this.playbackRange.startTick,this._currentState.eventIndex=0):(this._currentState.currentTime=0,this._currentState.eventIndex=0)}resetOneTimeMidi(){this._oneTimeState=null,this._currentState=this._mainState}resetCountIn(){this._countInState=null,this._currentState=this._mainState}startCountIn(){this.generateCountInMidi(),this._currentState=this._countInState,this.stop(),this._synthesizer.noteOffAll(!0)}generateCountInMidi(){const e=new Gt;e.division=this._mainState.division;let t=120,i=4,n=4;0===this._mainState.eventIndex?(t=this._mainState.tempoChanges[0].bpm,i=this._mainState.firstTimeSignatureNumerator,n=this._mainState.firstTimeSignatureDenominator):(t=this._synthesizer.currentTempo,i=this._synthesizer.timeSignatureNumerator,n=this._synthesizer.timeSignatureDenominator),e.tempoChanges.push(new Ut(t,0,0));let r=e.division*(4/n)|0,s=r*(6e4/(t*this._mainState.division)),o=0,a=0;for(let t=0;t<i;t++){let i=Ht.newMetronomeEvent(e.synthData.length,o,t,r,s);e.synthData.push(i),i.time=a,o+=r,a+=s}e.synthData.sort(((e,t)=>e.time>t.time?1:e.time<t.time?-1:e.eventIndex-t.eventIndex)),e.endTime=a,e.endTick=o,this._countInState=e}}!function(e){e[e.Paused=0]="Paused",e[e.Playing=1]="Playing"}(j||(j={}));class $t{constructor(e,t){this.state=e,this.stopped=t}}class qt{constructor(e,t,i,n,r){this.currentTime=e,this.endTime=t,this.currentTick=i,this.endTick=n,this.isSeek=r}}class Zt{constructor(){this.id="",this.size=0}static load(e,t,i){if(e&&Zt.HeaderSize>e.size)return!1;if(i.position+Zt.HeaderSize>=i.length)return!1;if(t.id=nt.read8BitStringLength(i,4),t.id.charCodeAt(0)<=32||t.id.charCodeAt(0)>=122)return!1;if(t.size=nt.readUInt32LE(i),e&&Zt.HeaderSize+t.size>e.size)return!1;e&&(e.size-=Zt.HeaderSize+t.size);let n="RIFF"===t.id,r="LIST"===t.id;return!(n&&e||(n||r)&&(t.id=nt.read8BitStringLength(i,4),t.id.charCodeAt(0)<=32||t.id.charCodeAt(0)>=122||(t.size-=4,0)))}}Zt.HeaderSize=8;class Yt{constructor(){this.phdrs=[],this.pbags=[],this.pmods=[],this.pgens=[],this.insts=[],this.ibags=[],this.imods=[],this.igens=[],this.sHdrs=[],this.fontSamples=new Float32Array(0)}load(e){const t=new Zt,i=new Zt;if(!Zt.load(null,t,e)||"sfbk"!==t.id)throw new ue("Soundfont is not a valid Soundfont2 file");for(;Zt.load(t,i,e);){let t=new Zt;if("pdta"===i.id)for(;Zt.load(i,t,e);)switch(t.id){case"phdr":for(let i=0,n=t.size/ni.SizeInFile|0;i<n;i++)this.phdrs.push(new ni(e));break;case"pbag":for(let i=0,n=t.size/ti.SizeInFile|0;i<n;i++)this.pbags.push(new ti(e));break;case"pmod":for(let i=0,n=t.size/ri.SizeInFile|0;i<n;i++)this.pmods.push(new ri(e));break;case"pgen":for(let i=0,n=t.size/ii.SizeInFile|0;i<n;i++)this.pgens.push(new ii(e));break;case"inst":for(let i=0,n=t.size/ei.SizeInFile|0;i<n;i++)this.insts.push(new ei(e));break;case"ibag":for(let i=0,n=t.size/Xt.SizeInFile|0;i<n;i++)this.ibags.push(new Xt(e));break;case"imod":for(let i=0,n=t.size/Qt.SizeInFile|0;i<n;i++)this.imods.push(new Qt(e));break;case"igen":for(let i=0,n=t.size/Jt.SizeInFile|0;i<n;i++)this.igens.push(new Jt(e));break;case"shdr":for(let i=0,n=t.size/si.SizeInFile|0;i<n;i++)this.sHdrs.push(new si(e));break;default:e.position+=t.size}else if("sdta"===i.id)for(;Zt.load(i,t,e);)switch(t.id){case"smpl":this.fontSamples=Yt.loadSamples(t,e);break;default:e.position+=t.size}else e.position+=i.size}}static loadSamples(e,t){let i=e.size/2|0;const n=new Float32Array(i);let r=0;const s=new Uint8Array(2048),o=new Int16Array(s.length/2|0);for(;i>0;){let e=Math.min(i,s.length/2|0);t.read(s,0,2*e);for(let t=0;t<e;t++)o[t]=s[2*t+1]<<8|s[2*t],n[r+t]=o[t]/32767;i-=e,r+=e}return n}}class Xt{constructor(e){this.instGenNdx=nt.readUInt16LE(e),this.instModNdx=nt.readUInt16LE(e)}}Xt.SizeInFile=4;class Qt{constructor(e){this.modSrcOper=nt.readUInt16LE(e),this.modDestOper=nt.readUInt16LE(e),this.modAmount=nt.readInt16LE(e),this.modAmtSrcOper=nt.readUInt16LE(e),this.modTransOper=nt.readUInt16LE(e)}}Qt.SizeInFile=10;class Jt{constructor(e){this.genOper=nt.readUInt16LE(e),this.genAmount=new oi(e)}}Jt.SizeInFile=4;class ei{constructor(e){this.instName=nt.read8BitStringLength(e,20),this.instBagNdx=nt.readUInt16LE(e)}}ei.SizeInFile=22;class ti{constructor(e){this.genNdx=nt.readUInt16LE(e),this.modNdx=nt.readUInt16LE(e)}}ti.SizeInFile=4;class ii{constructor(e){this.genOper=nt.readUInt16LE(e),this.genAmount=new oi(e)}}ii.SizeInFile=4,ii.GenInstrument=41,ii.GenKeyRange=43,ii.GenVelRange=44,ii.GenSampleId=53;class ni{constructor(e){this.presetName=nt.read8BitStringLength(e,20),this.preset=nt.readUInt16LE(e),this.bank=nt.readUInt16LE(e),this.presetBagNdx=nt.readUInt16LE(e),this.library=nt.readUInt32LE(e),this.genre=nt.readUInt32LE(e),this.morphology=nt.readUInt32LE(e)}}ni.SizeInFile=38;class ri{constructor(e){this.modSrcOper=nt.readUInt16LE(e),this.modDestOper=nt.readUInt16LE(e),this.modAmount=nt.readUInt16LE(e),this.modAmtSrcOper=nt.readUInt16LE(e),this.modTransOper=nt.readUInt16LE(e)}}ri.SizeInFile=10;class si{constructor(e){this.sampleName=nt.read8BitStringLength(e,20),this.start=nt.readUInt32LE(e),this.end=nt.readUInt32LE(e),this.startLoop=nt.readUInt32LE(e),this.endLoop=nt.readUInt32LE(e),this.sampleRate=nt.readUInt32LE(e),this.originalPitch=e.readByte(),this.pitchCorrection=nt.readSInt8(e),this.sampleLink=nt.readUInt16LE(e),this.sampleType=nt.readUInt16LE(e)}}si.SizeInFile=46;class oi{constructor(e){this.wordAmount=nt.readUInt16LE(e)}get shortAmount(){return it.uint16ToInt16(this.wordAmount)}get lowByteAmount(){return 255&this.wordAmount}get highByteAmount(){return(65280&this.wordAmount)>>8&255}}class ai{constructor(){this.presetIndex=0,this.bank=0,this.pitchWheel=0,this.perNotePitchWheel=new Map,this.midiPan=0,this.midiVolume=0,this.midiExpression=0,this.midiRpn=0,this.midiData=0,this.panOffset=0,this.gainDb=0,this.pitchRange=0,this.tuning=0,this.mixVolume=0,this.mute=!1,this.solo=!1}}class li{constructor(){this.activeChannel=0,this.channelList=[]}setupVoice(e,t){const i=this.channelList[this.activeChannel],n=t.region.pan+i.panOffset;t.playingChannel=this.activeChannel,t.mixVolume=i.mixVolume,t.noteGainDb+=i.gainDb,t.updatePitchRatio(i,e.outSampleRate),n<=-.5?(t.panFactorLeft=1,t.panFactorRight=0):n>=.5?(t.panFactorLeft=0,t.panFactorRight=1):(t.panFactorLeft=Math.sqrt(.5-n),t.panFactorRight=Math.sqrt(.5+n))}}(function(e){e[e.None=0]="None",e[e.Continuous=1]="Continuous",e[e.Sustain=2]="Sustain"})(U||(U={})),function(e){e[e.StereoInterleaved=0]="StereoInterleaved",e[e.StereoUnweaved=1]="StereoUnweaved",e[e.Mono=2]="Mono"}(G||(G={}));class ci{constructor(){this.name="",this.presetNumber=0,this.bank=0,this.regions=null,this.fontSamples=null}}class hi{static timecents2Secs(e){return Math.pow(2,e/1200)}static decibelsToGain(e){return e>-100?Math.pow(10,.05*e):0}static gainToDecibels(e){return e<=1e-5?-100:20*Math.log10(e)}static cents2Hertz(e){return 8.176*Math.pow(2,e/1200)}static clamp(e,t,i){return e<=t?t:e>=i?i:e}}class ui{constructor(e){this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0,e&&(this.delay=e.delay,this.attack=e.attack,this.hold=e.hold,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.keynumToHold=e.keynumToHold,this.keynumToDecay=e.keynumToDecay)}clear(){this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0}envToSecs(e){this.delay=this.delay<-11950?0:hi.timecents2Secs(this.delay),this.attack=this.attack<-11950?0:hi.timecents2Secs(this.attack),this.release=this.release<-11950?0:hi.timecents2Secs(this.release),0===this.keynumToHold&&(this.hold=this.hold<-11950?0:hi.timecents2Secs(this.hold)),0===this.keynumToDecay&&(this.decay=this.decay<-11950?0:hi.timecents2Secs(this.decay)),this.sustain<0?this.sustain=0:this.sustain=e?hi.decibelsToGain(-this.sustain/10):1-this.sustain/1e3}}!function(e){e[e.StartAddrsOffset=0]="StartAddrsOffset",e[e.EndAddrsOffset=1]="EndAddrsOffset",e[e.StartloopAddrsOffset=2]="StartloopAddrsOffset",e[e.EndloopAddrsOffset=3]="EndloopAddrsOffset",e[e.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",e[e.ModLfoToPitch=5]="ModLfoToPitch",e[e.VibLfoToPitch=6]="VibLfoToPitch",e[e.ModEnvToPitch=7]="ModEnvToPitch",e[e.InitialFilterFc=8]="InitialFilterFc",e[e.InitialFilterQ=9]="InitialFilterQ",e[e.ModLfoToFilterFc=10]="ModLfoToFilterFc",e[e.ModEnvToFilterFc=11]="ModEnvToFilterFc",e[e.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",e[e.ModLfoToVolume=13]="ModLfoToVolume",e[e.Unused1=14]="Unused1",e[e.ChorusEffectsSend=15]="ChorusEffectsSend",e[e.ReverbEffectsSend=16]="ReverbEffectsSend",e[e.Pan=17]="Pan",e[e.Unused2=18]="Unused2",e[e.Unused3=19]="Unused3",e[e.Unused4=20]="Unused4",e[e.DelayModLFO=21]="DelayModLFO",e[e.FreqModLFO=22]="FreqModLFO",e[e.DelayVibLFO=23]="DelayVibLFO",e[e.FreqVibLFO=24]="FreqVibLFO",e[e.DelayModEnv=25]="DelayModEnv",e[e.AttackModEnv=26]="AttackModEnv",e[e.HoldModEnv=27]="HoldModEnv",e[e.DecayModEnv=28]="DecayModEnv",e[e.SustainModEnv=29]="SustainModEnv",e[e.ReleaseModEnv=30]="ReleaseModEnv",e[e.KeynumToModEnvHold=31]="KeynumToModEnvHold",e[e.KeynumToModEnvDecay=32]="KeynumToModEnvDecay",e[e.DelayVolEnv=33]="DelayVolEnv",e[e.AttackVolEnv=34]="AttackVolEnv",e[e.HoldVolEnv=35]="HoldVolEnv",e[e.DecayVolEnv=36]="DecayVolEnv",e[e.SustainVolEnv=37]="SustainVolEnv",e[e.ReleaseVolEnv=38]="ReleaseVolEnv",e[e.KeynumToVolEnvHold=39]="KeynumToVolEnvHold",e[e.KeynumToVolEnvDecay=40]="KeynumToVolEnvDecay",e[e.Instrument=41]="Instrument",e[e.Reserved1=42]="Reserved1",e[e.KeyRange=43]="KeyRange",e[e.VelRange=44]="VelRange",e[e.StartloopAddrsCoarseOffset=45]="StartloopAddrsCoarseOffset",e[e.Keynum=46]="Keynum",e[e.Velocity=47]="Velocity",e[e.InitialAttenuation=48]="InitialAttenuation",e[e.Reserved2=49]="Reserved2",e[e.EndloopAddrsCoarseOffset=50]="EndloopAddrsCoarseOffset",e[e.CoarseTune=51]="CoarseTune",e[e.FineTune=52]="FineTune",e[e.SampleID=53]="SampleID",e[e.SampleModes=54]="SampleModes",e[e.Reserved3=55]="Reserved3",e[e.ScaleTuning=56]="ScaleTuning",e[e.ExclusiveClass=57]="ExclusiveClass",e[e.OverridingRootKey=58]="OverridingRootKey",e[e.Unused5=59]="Unused5",e[e.EndOper=60]="EndOper"}(K||(K={}));class di{constructor(e){this.loopMode=U.None,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv=new ui,this.modEnv=new ui,this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0,e&&(this.loopMode=e.loopMode,this.sampleRate=e.sampleRate,this.loKey=e.loKey,this.hiKey=e.hiKey,this.loVel=e.loVel,this.hiVel=e.hiVel,this.group=e.group,this.offset=e.offset,this.end=e.end,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.transpose=e.transpose,this.tune=e.tune,this.pitchKeyCenter=e.pitchKeyCenter,this.pitchKeyTrack=e.pitchKeyTrack,this.attenuation=e.attenuation,this.pan=e.pan,this.ampEnv=new ui(e.ampEnv),this.modEnv=new ui(e.modEnv),this.initialFilterQ=e.initialFilterQ,this.initialFilterFc=e.initialFilterFc,this.modEnvToPitch=e.modEnvToPitch,this.modEnvToFilterFc=e.modEnvToFilterFc,this.modLfoToFilterFc=e.modLfoToFilterFc,this.modLfoToVolume=e.modLfoToVolume,this.delayModLFO=e.delayModLFO,this.freqModLFO=e.freqModLFO,this.modLfoToPitch=e.modLfoToPitch,this.delayVibLFO=e.delayVibLFO,this.freqVibLFO=e.freqVibLFO,this.vibLfoToPitch=e.vibLfoToPitch)}clear(e){this.loopMode=0,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv.clear(),this.modEnv.clear(),this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0,this.hiKey=this.hiVel=127,this.pitchKeyCenter=60,e||(this.pitchKeyTrack=100,this.pitchKeyCenter=-1,this.ampEnv.delay=this.ampEnv.attack=this.ampEnv.hold=this.ampEnv.decay=this.ampEnv.release=-12e3,this.modEnv.delay=this.modEnv.attack=this.modEnv.hold=this.modEnv.decay=this.modEnv.release=-12e3,this.initialFilterFc=13500,this.delayModLFO=-12e3,this.delayVibLFO=-12e3)}operator(e,t){switch(e){case K.StartAddrsOffset:this.offset+=it.int16ToUint32(t.shortAmount);break;case K.EndAddrsOffset:this.end+=it.int16ToUint32(t.shortAmount);break;case K.StartloopAddrsOffset:this.loopStart+=it.int16ToUint32(t.shortAmount);break;case K.EndloopAddrsOffset:this.loopEnd+=it.int16ToUint32(t.shortAmount);break;case K.StartAddrsCoarseOffset:this.offset+=32768*it.int16ToUint32(t.shortAmount);break;case K.ModLfoToPitch:this.modLfoToPitch=t.shortAmount;break;case K.VibLfoToPitch:this.vibLfoToPitch=t.shortAmount;break;case K.ModEnvToPitch:this.modEnvToPitch=t.shortAmount;break;case K.InitialFilterFc:this.initialFilterFc=t.shortAmount;break;case K.InitialFilterQ:this.initialFilterQ=t.shortAmount;break;case K.ModLfoToFilterFc:this.modLfoToFilterFc=t.shortAmount;break;case K.ModEnvToFilterFc:this.modEnvToFilterFc=t.shortAmount;break;case K.EndAddrsCoarseOffset:this.end+=32768*it.int16ToUint32(t.shortAmount);break;case K.ModLfoToVolume:this.modLfoToVolume=t.shortAmount;break;case K.Pan:this.pan=t.shortAmount/1e3;break;case K.DelayModLFO:this.delayModLFO=t.shortAmount;break;case K.FreqModLFO:this.freqModLFO=t.shortAmount;break;case K.DelayVibLFO:this.delayVibLFO=t.shortAmount;break;case K.FreqVibLFO:this.freqVibLFO=t.shortAmount;break;case K.DelayModEnv:this.modEnv.delay=t.shortAmount;break;case K.AttackModEnv:this.modEnv.attack=t.shortAmount;break;case K.HoldModEnv:this.modEnv.hold=t.shortAmount;break;case K.DecayModEnv:this.modEnv.decay=t.shortAmount;break;case K.SustainModEnv:this.modEnv.sustain=t.shortAmount;break;case K.ReleaseModEnv:this.modEnv.release=t.shortAmount;break;case K.KeynumToModEnvHold:this.modEnv.keynumToHold=t.shortAmount;break;case K.KeynumToModEnvDecay:this.modEnv.keynumToDecay=t.shortAmount;break;case K.DelayVolEnv:this.ampEnv.delay=t.shortAmount;break;case K.AttackVolEnv:this.ampEnv.attack=t.shortAmount;break;case K.HoldVolEnv:this.ampEnv.hold=t.shortAmount;break;case K.DecayVolEnv:this.ampEnv.decay=t.shortAmount;break;case K.SustainVolEnv:this.ampEnv.sustain=t.shortAmount;break;case K.ReleaseVolEnv:this.ampEnv.release=t.shortAmount;break;case K.KeynumToVolEnvHold:this.ampEnv.keynumToHold=t.shortAmount;break;case K.KeynumToVolEnvDecay:this.ampEnv.keynumToDecay=t.shortAmount;break;case K.KeyRange:this.loKey=t.lowByteAmount,this.hiKey=t.highByteAmount;break;case K.VelRange:this.loVel=t.lowByteAmount,this.hiVel=t.highByteAmount;break;case K.StartloopAddrsCoarseOffset:this.loopStart+=32768*it.int16ToUint32(t.shortAmount);break;case K.InitialAttenuation:this.attenuation+=.1*t.shortAmount;break;case K.EndloopAddrsCoarseOffset:this.loopEnd+=32768*it.int16ToUint32(t.shortAmount);break;case K.CoarseTune:this.transpose+=t.shortAmount;break;case K.FineTune:this.tune+=t.shortAmount;break;case K.SampleModes:this.loopMode=3==(3&t.wordAmount)?U.Sustain:1==(3&t.wordAmount)?U.Continuous:U.None;break;case K.ScaleTuning:this.pitchKeyTrack=t.shortAmount;break;case K.ExclusiveClass:this.group=t.wordAmount;break;case K.OverridingRootKey:this.pitchKeyCenter=t.shortAmount}}}!function(e){e[e.None=0]="None",e[e.Delay=1]="Delay",e[e.Attack=2]="Attack",e[e.Hold=3]="Hold",e[e.Decay=4]="Decay",e[e.Sustain=5]="Sustain",e[e.Release=6]="Release",e[e.Done=7]="Done"}($||($={}));class fi{constructor(){this.level=0,this.slope=0,this.samplesUntilNextSegment=0,this.segment=$.None,this.midiVelocity=0,this.parameters=null,this.segmentIsExponential=!1,this.isAmpEnv=!1}nextSegment(e,t){if(this.parameters)for(;;)switch(e){case $.None:if(this.samplesUntilNextSegment=this.parameters.delay*t|0,this.samplesUntilNextSegment>0)return this.segment=$.Delay,this.segmentIsExponential=!1,this.level=0,void(this.slope=0);e=$.Delay;break;case $.Delay:if(this.samplesUntilNextSegment=this.parameters.attack*t|0,this.samplesUntilNextSegment>0)return this.isAmpEnv||(this.samplesUntilNextSegment=this.parameters.attack*((145-this.midiVelocity)/144)*t|0),this.segment=$.Attack,this.segmentIsExponential=!1,this.level=0,void(this.slope=1/this.samplesUntilNextSegment);e=$.Attack;break;case $.Attack:if(this.samplesUntilNextSegment=this.parameters.hold*t|0,this.samplesUntilNextSegment>0)return this.segment=$.Hold,this.segmentIsExponential=!1,this.level=1,void(this.slope=0);e=$.Hold;break;case $.Hold:if(this.samplesUntilNextSegment=this.parameters.decay*t|0,this.samplesUntilNextSegment>0){if(this.segment=$.Decay,this.level=1,this.isAmpEnv){let e=-9.226/this.samplesUntilNextSegment;this.slope=Math.exp(e),this.segmentIsExponential=!0,this.parameters.sustain>0&&(this.samplesUntilNextSegment=Math.log(this.parameters.sustain)/e|0)}else this.slope=-1/this.samplesUntilNextSegment,this.samplesUntilNextSegment=this.parameters.decay*(1-this.parameters.sustain)*t|0,this.segmentIsExponential=!1;return}e=$.Decay;break;case $.Decay:return this.segment=$.Sustain,this.level=this.parameters.sustain,this.slope=0,this.samplesUntilNextSegment=2147483647,void(this.segmentIsExponential=!1);case $.Sustain:if(this.segment=$.Release,this.samplesUntilNextSegment=(this.parameters.release<=0?fi.FastReleaseTime:this.parameters.release)*t|0,this.isAmpEnv){let e=-9.226/this.samplesUntilNextSegment;this.slope=Math.exp(e),this.segmentIsExponential=!0}else this.slope=-this.level/this.samplesUntilNextSegment,this.segmentIsExponential=!1;return;case $.Release:default:return this.segment=$.Done,this.segmentIsExponential=!1,this.level=this.slope=0,void(this.samplesUntilNextSegment=134217727)}}setup(e,t,i,n,r){this.parameters=new ui(e),this.parameters.keynumToHold>0&&(this.parameters.hold+=this.parameters.keynumToHold*(60-t),this.parameters.hold=this.parameters.hold<-1e4?0:hi.timecents2Secs(this.parameters.hold)),this.parameters.keynumToDecay>0&&(this.parameters.decay+=this.parameters.keynumToDecay*(60-t),this.parameters.decay=this.parameters.decay<-1e4?0:hi.timecents2Secs(this.parameters.decay)),this.midiVelocity=0|i,this.isAmpEnv=n,this.nextSegment($.None,r)}process(e,t){this.slope>0&&(this.segmentIsExponential?this.level*=Math.pow(this.slope,e):this.level+=this.slope*e),(this.samplesUntilNextSegment-=e)<=0&&this.nextSegment(this.segment,t)}}fi.FastReleaseTime=.01;class pi{constructor(){this.samplesUntil=0,this.level=0,this.delta=0}setup(e,t,i){this.samplesUntil=e*i|0,this.delta=4*hi.cents2Hertz(t)/i,this.level=0}process(e){this.samplesUntil>e?this.samplesUntil-=e:(this.level+=this.delta*e,this.level>1?(this.delta=-this.delta,this.level=2-this.level):this.level<-1&&(this.delta=-this.delta,this.level=-2-this.level))}}class gi{constructor(e){this.qInv=0,this.a0=0,this.a1=0,this.b1=0,this.b2=0,this.z1=0,this.z2=0,this.active=!1,e&&(this.qInv=e.qInv,this.a0=e.a0,this.a1=e.a1,this.b1=e.b1,this.b2=e.b2,this.z1=e.z1,this.z2=e.z2,this.active=e.active)}setup(e){let t=Math.tan(Math.PI*e),i=t*t,n=1/(1+t*this.qInv+i);this.a0=i*n,this.a1=2*this.a0,this.b1=2*(i-1)*n,this.b2=(1-t*this.qInv+i)*n}process(e){let t=e*this.a0+this.z1;return this.z1=e*this.a1+this.z2-this.b1*t,this.z2=e*this.a0-this.b2*t,t}}class mi{constructor(){this.playingPreset=0,this.playingKey=0,this.playingChannel=0,this.region=null,this.pitchInputTimecents=0,this.pitchOutputFactor=0,this.sourceSamplePosition=0,this.noteGainDb=0,this.panFactorLeft=0,this.panFactorRight=0,this.playIndex=0,this.loopStart=0,this.loopEnd=0,this.ampEnv=new fi,this.modEnv=new fi,this.lowPass=new gi,this.modLfo=new pi,this.vibLfo=new pi,this.mixVolume=0,this.mute=!1}updatePitchRatio(e,t){let i=e.pitchWheel;e.perNotePitchWheel.has(this.playingKey)&&(i+=e.perNotePitchWheel.get(this.playingKey)-8192);const n=8192===i?e.tuning:i/16383*e.pitchRange*2-e.pitchRange+e.tuning;this.calcPitchRatio(n,t)}calcPitchRatio(e,t){if(!this.region)return;const i=this.playingKey+this.region.transpose+this.region.tune/100;let n=this.region.pitchKeyCenter+(i-this.region.pitchKeyCenter)*(this.region.pitchKeyTrack/100);0!==e&&(n+=e),this.pitchInputTimecents=100*n,this.pitchOutputFactor=this.region.sampleRate/(hi.timecents2Secs(100*this.region.pitchKeyCenter)*t)}end(e){this.region&&(this.ampEnv.nextSegment($.Sustain,e),this.modEnv.nextSegment($.Sustain,e),this.region.loopMode===U.Sustain&&(this.loopEnd=this.loopStart))}endQuick(e){this.ampEnv.parameters.release=0,this.ampEnv.nextSegment($.Sustain,e),this.modEnv.parameters.release=0,this.modEnv.nextSegment($.Sustain,e)}render(e,t,i,n,r){if(!this.region)return;let s=this.region,o=e.presets[this.playingPreset].fontSamples,a=0,l=e.outputMode===G.StereoUnweaved?n:-1,c=0!==s.modEnvToPitch||0!==s.modEnvToFilterFc,h=this.modLfo.delta>0&&(0!==s.modLfoToPitch||0!==s.modLfoToFilterFc||0!==s.modLfoToVolume),u=this.vibLfo.delta>0&&0!==s.vibLfoToPitch,d=this.loopStart<this.loopEnd,f=this.loopStart,p=this.loopEnd,g=s.end,m=p+1,b=this.sourceSamplePosition,v=new gi(this.lowPass),y=0!==s.modLfoToFilterFc||0!==s.modEnvToFilterFc,_=0,w=0,S=0,C=0,x=0!==s.modLfoToPitch||0!==s.modEnvToPitch||0!==s.vibLfoToPitch,k=0,E=0,T=0,L=0,N=0!==s.modLfoToVolume,M=0,O=0;for(y?(_=e.outSampleRate,w=s.initialFilterFc,S=s.modLfoToFilterFc,C=s.modEnvToFilterFc):(_=0,w=0,S=0,C=0),x?(k=0,E=s.modLfoToPitch,T=s.vibLfoToPitch,L=s.modEnvToPitch):(k=hi.timecents2Secs(this.pitchInputTimecents)*this.pitchOutputFactor,E=0,T=0,L=0),N?O=.1*s.modLfoToVolume:(M=hi.decibelsToGain(this.noteGainDb),O=0);n>0;){let s,D,I=0,A=n>mi.RenderEffectSampleBlock?mi.RenderEffectSampleBlock:n;if(n-=A,y){let e=w+this.modLfo.level*S+this.modEnv.level*C;v.active=e<=13500,v.active&&v.setup(hi.cents2Hertz(e)/_)}switch(x&&(k=hi.timecents2Secs(this.pitchInputTimecents+(this.modLfo.level*E+this.vibLfo.level*T+this.modEnv.level*L))*this.pitchOutputFactor),N&&(M=hi.decibelsToGain(this.noteGainDb+this.modLfo.level*O)),s=M*this.ampEnv.level,r?s=0:s*=this.mixVolume,this.ampEnv.process(A,e.outSampleRate),c&&this.modEnv.process(A,e.outSampleRate),h&&this.modLfo.process(A),u&&this.vibLfo.process(A),e.outputMode){case G.StereoInterleaved:for(D=s*this.panFactorLeft,I=s*this.panFactorRight;A-- >0&&b<g;){let e=0|b,n=e>=p&&d?f:e+1,r=b-e,s=o[e]*(1-r)+o[n]*r;v.active&&(s=v.process(s)),t[i+a]+=s*D,a++,t[i+a]+=s*I,a++,b+=k,b>=m&&d&&(b-=p-f+1)}break;case G.StereoUnweaved:for(D=s*this.panFactorLeft,I=s*this.panFactorRight;A-- >0&&b<g;){let e=0|b,n=e>=p&&d?f:e+1,r=b-e,s=o[e]*(1-r)+o[n]*r;v.active&&(s=v.process(s)),t[i+a]+=s*D,a++,t[i+l]+=s*I,l++,b+=k,b>=m&&d&&(b-=p-f+1)}break;case G.Mono:for(;A-- >0&&b<g;){let e=0|b,n=e>=p&&d?f:e+1,r=b-e,l=o[e]*(1-r)+o[n]*r;v.active&&(l=v.process(l)),t[i+a]=l*s,a++,b+=k,b>=m&&d&&(b-=p-f+1)}}if(b>=g||this.ampEnv.segment===$.Done)return void this.kill()}this.sourceSamplePosition=b,(v.active||y)&&(this.lowPass=v)}kill(){this.playingPreset=-1}}mi.RenderEffectSampleBlock=jt.MicroBufferSize;class bi{constructor(){this._items=[],this._position=0,this.isEmpty=!0}clear(){this._items=[],this._position=0,this.isEmpty=!0}enqueue(e){this.isEmpty=!1,this._items.push(e)}peek(){return this._items[this._position]}dequeue(){const e=this._items[this._position];return this._position++,this._position>=this._items.length/2&&(this._items=this._items.slice(this._position),this._position=0),this.isEmpty=0==this._items.length,e}toArray(){const e=this._items.slice(this._position);return e.reverse(),e}}class vi{constructor(e){this._midiEventQueue=new bi,this._mutedChannels=new Map,this._soloChannels=new Map,this._isAnySolo=!1,this.currentTempo=0,this.timeSignatureNumerator=0,this.timeSignatureDenominator=0,this.presets=null,this._voices=[],this._channels=null,this._voicePlayIndex=0,this.outputMode=G.StereoInterleaved,this.outSampleRate=0,this.globalGainDb=0,this.outSampleRate=e}synthesize(e,t,i){return this.fillWorkingBuffer(e,t,i)}synthesizeSilent(e){this.fillWorkingBuffer(null,0,e)}channelGetMixVolume(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].mixVolume:1}channelSetMixVolume(e,t){let i=this.channelInit(e);for(let i of this._voices)i.playingChannel===e&&-1!==i.playingPreset&&(i.mixVolume=t);i.mixVolume=t}channelSetMute(e,t){t?this._mutedChannels.set(e,!0):this._mutedChannels.delete(e)}channelSetSolo(e,t){t?this._soloChannels.set(e,!0):this._soloChannels.delete(e),this._isAnySolo=this._soloChannels.size>0}resetChannelStates(){this._mutedChannels=new Map,this._soloChannels=new Map,this._isAnySolo=!1}dispatchEvent(e){this._midiEventQueue.enqueue(e)}fillWorkingBuffer(e,t,i){const n=this._isAnySolo,r=[];for(;!this._midiEventQueue.isEmpty;){let e=this._midiEventQueue.dequeue();e.isMetronome&&this.metronomeVolume>0?(this.channelNoteOff(jt.MetronomeChannel,33),this.channelNoteOn(jt.MetronomeChannel,33,95/127)):e.event&&this.processMidiMessage(e.event),r.push(e)}for(const r of this._voices)if(-1!==r.playingPreset){const s=r.playingChannel,o=this._mutedChannels.has(s)||n&&s!=jt.MetronomeChannel&&!this._soloChannels.has(s);e?r.render(this,e,t,i,o):r.kill()}return r}processMidiMessage(e){Oe.debug("Midi","Processing midi "+e.command);const t=e.command,i=e.channel,n=e.data1,r=e.data2;switch(t){case W.NoteOff:this.channelNoteOff(i,n);break;case W.NoteOn:this.channelNoteOn(i,n,r/127);break;case W.NoteAftertouch:break;case W.Controller:this.channelMidiControl(i,n,r);break;case W.ProgramChange:this.channelSetPresetNumber(i,n,9===i);break;case W.ChannelAftertouch:break;case W.PitchBend:this.channelSetPitchWheel(i,n|r<<7);break;case W.PerNotePitchBend:const t=e;let s=t.pitch;s=s*jt.MaxPitchWheel/jt.MaxPitchWheel20,this.channelSetPerNotePitchWheel(i,t.noteKey,s);break;case W.Meta:switch(e.data1){case V.Tempo:this.currentTempo=6e7/e.value;break;case V.TimeSignature:this.timeSignatureNumerator=e.data[0],this.timeSignatureDenominator=Math.pow(2,e.data[1])}}}get metronomeVolume(){return this.channelGetMixVolume(jt.MetronomeChannel)}set metronomeVolume(e){this.setupMetronomeChannel(e)}setupMetronomeChannel(e){this.channelSetMixVolume(jt.MetronomeChannel,e),e>0&&(this.channelSetVolume(jt.MetronomeChannel,1),this.channelSetPresetNumber(jt.MetronomeChannel,0,!0))}get masterVolume(){return hi.decibelsToGain(this.globalGainDb)}set masterVolume(e){var t=hi.gainToDecibels(e);const i=t-this.globalGainDb;if(0!==i){for(const e of this._voices)-1!==e.playingPreset&&(e.noteGainDb+=i);this.globalGainDb=t}}resetSoft(){for(const e of this._voices)-1!==e.playingPreset&&(e.ampEnv.segment<$.Release||0!==e.ampEnv.parameters.release)&&e.endQuick(this.outSampleRate);if(this._channels)for(const e of this._channels.channelList)e.presetIndex=e.bank=0,e.pitchWheel=e.midiPan=8192,e.perNotePitchWheel.clear(),e.midiVolume=e.midiExpression=16383,e.midiRpn=65535,e.midiData=0,e.panOffset=0,e.gainDb=0,e.pitchRange=2,e.tuning=0}get presetCount(){var e,t;return null!==(t=null===(e=this.presets)||void 0===e?void 0:e.length)&&void 0!==t?t:0}reset(){for(let e of this._voices)-1!==e.playingPreset&&(e.ampEnv.segment<$.Release||0!==e.ampEnv.parameters.release)&&e.endQuick(this.outSampleRate);this._channels=null}setOutput(e,t,i){this.outputMode=e,this.outSampleRate=t>=1?t:44100,this.globalGainDb=i}noteOn(e,t,i){if(!this.presets)return;const n=127*i|0;if(e<0||e>=this.presets.length)return;if(i<=0)return void this.noteOff(e,t);const r=this._voicePlayIndex++;for(const s of this.presets[e].regions){if(t<s.loKey||t>s.hiKey||n<s.loVel||n>s.hiVel)continue;let o=null;if(0!==s.group)for(const t of this._voices)t.playingPreset===e&&t.region.group===s.group?t.endQuick(this.outSampleRate):-1!==t.playingPreset||o||(o=t);else for(let e of this._voices)-1===e.playingPreset&&(o=e);if(!o){for(let e=0;e<4;e++){const e=new mi;e.playingPreset=-1,this._voices.push(e)}o=this._voices[this._voices.length-4]}o.region=s,o.playingPreset=e,o.playingKey=t,o.playIndex=r,o.noteGainDb=this.globalGainDb-s.attenuation-hi.gainToDecibels(1/i),this._channels?this._channels.setupVoice(this,o):(o.calcPitchRatio(0,this.outSampleRate),o.panFactorLeft=Math.sqrt(.5-s.pan),o.panFactorRight=Math.sqrt(.5+s.pan)),o.sourceSamplePosition=s.offset;const a=s.loopMode!==U.None&&s.loopStart<s.loopEnd;o.loopStart=a?s.loopStart:0,o.loopEnd=a?s.loopEnd:0,o.ampEnv.setup(s.ampEnv,t,n,!0,this.outSampleRate),o.modEnv.setup(s.modEnv,t,n,!1,this.outSampleRate);const l=s.initialFilterQ/10;o.lowPass.qInv=1/Math.pow(10,l/20),o.lowPass.z1=o.lowPass.z2=0,o.lowPass.active=s.initialFilterFc<=13500,o.lowPass.active&&o.lowPass.setup(hi.cents2Hertz(s.initialFilterFc)/this.outSampleRate),o.modLfo.setup(s.delayModLFO,s.freqModLFO,this.outSampleRate),o.vibLfo.setup(s.delayVibLFO,s.freqVibLFO,this.outSampleRate)}}bankNoteOn(e,t,i,n){let r=this.getPresetIndex(e,t);return-1!==r&&(this.noteOn(r,i,n),!0)}noteOff(e,t){let i=null,n=null,r=[];for(let s of this._voices)s.playingPreset!==e||s.playingKey!==t||s.ampEnv.segment>=$.Release||(!i||s.playIndex<i.playIndex?(i=s,n=s,r.push(s)):s.playIndex===i.playIndex&&(n=s,r.push(s)));if(i)for(const s of r)s!==i&&s!==n&&(s.playIndex!==i.playIndex||s.playingPreset!==e||s.playingKey!==t||s.ampEnv.segment>=$.Release)||s.end(this.outSampleRate)}bankNoteOff(e,t,i){const n=this.getPresetIndex(e,t);return-1!==n&&(this.noteOff(n,i),!0)}noteOffAll(e){for(const t of this._voices)-1!==t.playingPreset&&t.ampEnv.segment<$.Release&&(e?t.endQuick(this.outSampleRate):t.end(this.outSampleRate))}get activeVoiceCount(){let e=0;for(const t of this._voices)-1!==t.playingPreset&&e++;return e}channelInit(e){if(this._channels&&e<this._channels.channelList.length)return this._channels.channelList[e];this._channels||(this._channels=new li);for(let t=this._channels.channelList.length;t<=e;t++){let e=new ai;e.presetIndex=e.bank=0,e.pitchWheel=e.midiPan=8192,e.midiVolume=e.midiExpression=16383,e.midiRpn=65535,e.midiData=0,e.panOffset=0,e.gainDb=0,e.pitchRange=2,e.tuning=0,e.mixVolume=1,this._channels.channelList.push(e)}return this._channels.channelList[e]}getPresetIndex(e,t){if(!this.presets)return-1;for(let i=this.presets.length-1;i>=0;i--){let n=this.presets[i];if(n.presetNumber===t&&n.bank===e)return i}return-1}getPresetName(e){return this.presets?e<0||e>=this.presets.length?null:this.presets[e].name:null}bankGetPresetName(e,t){return this.getPresetName(this.getPresetIndex(e,t))}channelNoteOn(e,t,i){!this._channels||e>this._channels.channelList.length||(this._channels.activeChannel=e,this.noteOn(this._channels.channelList[e].presetIndex,t,i))}channelNoteOff(e,t){const i=[];let n=null,r=null;for(const s of this._voices)-1===s.playingPreset||s.playingChannel!==e||s.playingKey!==t||s.ampEnv.segment>=$.Release||(!n||s.playIndex<n.playIndex?(n=r=s,i.push(s)):s.playIndex===n.playIndex&&(r=s,i.push(s)));if(this.channelInit(e).perNotePitchWheel.delete(t),n)for(const s of i)s!==n&&s!==r&&(s.playIndex!==n.playIndex||-1===s.playingPreset||s.playingChannel!==e||s.playingKey!==t||s.ampEnv.segment>=$.Release)||s.end(this.outSampleRate)}channelNoteOffAll(e){this.channelInit(e).perNotePitchWheel.clear();for(const t of this._voices)-1!==t.playingPreset&&t.playingChannel===e&&t.ampEnv.segment<$.Release&&t.end(this.outSampleRate)}channelSoundsOffAll(e){this.channelInit(e).perNotePitchWheel.clear();for(let t of this._voices)-1!==t.playingPreset&&t.playingChannel===e&&(t.ampEnv.segment<$.Release||0===t.ampEnv.parameters.release)&&t.endQuick(this.outSampleRate)}channelSetPresetIndex(e,t){this.channelInit(e).presetIndex=it.int32ToUint16(t)}channelSetPresetNumber(e,t,i=!1){const n=this.channelInit(e);let r=0;return i?(r=this.getPresetIndex(128|32767&n.bank,t),-1===r&&(r=this.getPresetIndex(128,t)),-1===r&&(r=this.getPresetIndex(128,0)),-1===r&&(r=this.getPresetIndex(2047&n.bank,t))):r=this.getPresetIndex(2047&n.bank,t),n.presetIndex=r,-1!==r}channelSetBank(e,t){this.channelInit(e).bank=it.int32ToUint16(t)}channelSetBankPreset(e,t,i){const n=this.channelInit(e),r=this.getPresetIndex(t,i);return-1!==r&&(n.presetIndex=it.int32ToUint16(r),n.bank=it.int32ToUint16(t),!0)}channelSetPan(e,t){for(const i of this._voices)if(i.playingChannel===e&&-1!==i.playingPreset){let e=i.region.pan+t-.5;e<=-.5?(i.panFactorLeft=1,i.panFactorRight=0):e>=.5?(i.panFactorLeft=0,i.panFactorRight=1):(i.panFactorLeft=Math.sqrt(.5-e),i.panFactorRight=Math.sqrt(.5+e))}this.channelInit(e).panOffset=t-.5}channelSetVolume(e,t){const i=this.channelInit(e),n=hi.gainToDecibels(t),r=n-i.gainDb;if(0!==r){for(const t of this._voices)t.playingChannel===e&&-1!==t.playingPreset&&(t.noteGainDb+=r);i.gainDb=n}}channelSetPitchWheel(e,t){const i=this.channelInit(e);i.pitchWheel!==t&&(i.pitchWheel=it.int32ToUint16(t),this.channelApplyPitch(e,i))}channelSetPerNotePitchWheel(e,t,i){const n=this.channelInit(e);n.perNotePitchWheel.has(t)&&n.perNotePitchWheel.get(t)===i||(n.perNotePitchWheel.set(t,i),this.channelApplyPitch(e,n,t))}channelApplyPitch(e,t,i=-1){for(const n of this._voices)n.playingChannel!==e||-1===n.playingPreset||-1!=i&&n.playingKey!==i||n.updatePitchRatio(t,this.outSampleRate)}channelSetPitchRange(e,t){const i=this.channelInit(e);i.pitchRange!==t&&(i.pitchRange=t,8192!==i.pitchWheel&&this.channelApplyPitch(e,i))}channelSetTuning(e,t){const i=this.channelInit(e);i.tuning!==t&&(i.tuning=t,this.channelApplyPitch(e,i))}channelMidiControl(e,t,i){let n=this.channelInit(e);switch(t){case 5:case 96:case 97:case 64:case 65:case 66:case 122:case 124:case 125:case 126:case 127:return;case 38:return n.midiData=it.int32ToUint16(16256&n.midiData|i),void(0===n.midiRpn?this.channelSetPitchRange(e,(n.midiData>>7)+.01*(127&n.midiData)):1===n.midiRpn?this.channelSetTuning(e,(0|n.tuning)+(n.midiData-8192)/8192):2===n.midiRpn&&this.channelSetTuning(e,i-64+(n.tuning-(0|n.tuning))));case 7:return n.midiVolume=it.int32ToUint16(127&n.midiVolume|i<<7),void this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));case 39:return n.midiVolume=it.int32ToUint16(16256&n.midiVolume|i),void this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));case 11:return n.midiExpression=it.int32ToUint16(127&n.midiExpression|i<<7),void this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));case 43:return n.midiExpression=it.int32ToUint16(16256&n.midiExpression|i),void this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));case 10:return n.midiPan=it.int32ToUint16(127&n.midiPan|i<<7),void this.channelSetPan(e,n.midiPan/16383);case 42:return n.midiPan=it.int32ToUint16(16256&n.midiPan|i),void this.channelSetPan(e,n.midiPan/16383);case 6:return n.midiData=it.int32ToUint16(127&n.midiData|i<<7),void(0===n.midiRpn?this.channelSetPitchRange(e,(n.midiData>>7)+.01*(127&n.midiData)):1===n.midiRpn?this.channelSetTuning(e,(0|n.tuning)+(n.midiData-8192)/8192):2===n.midiRpn&&6===t&&this.channelSetTuning(e,i-64+(n.tuning-(0|n.tuning))));case 0:return void(n.bank=it.int32ToUint16(32768|i));case 32:return void(n.bank=it.int32ToUint16((0!=(32768&n.bank)?(127&n.bank)<<7:0)|i));case 101:return void(n.midiRpn=it.int32ToUint16(127&(65535===n.midiRpn?0:n.midiRpn)|i<<7));case 100:return void(n.midiRpn=it.int32ToUint16(16256&(65535===n.midiRpn?0:n.midiRpn)|i));case 98:case 99:return void(n.midiRpn=65535);case 120:return void this.channelSoundsOffAll(e);case 123:return void this.channelNoteOffAll(e);case 121:return n.midiVolume=n.midiExpression=16383,n.midiPan=8192,n.bank=0,this.channelSetVolume(e,1),this.channelSetPan(e,.5),void this.channelSetPitchRange(e,2)}}channelGetPresetIndex(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].presetIndex:0}channelGetPresetBank(e){return this._channels&&e<this._channels.channelList.length?32767&this._channels.channelList[e].bank:0}channelGetPan(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].panOffset-.5:.5}channelGetVolume(e){return this._channels&&e<this._channels.channelList.length?hi.decibelsToGain(this._channels.channelList[e].gainDb):1}channelGetPitchWheel(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].pitchWheel:8192}channelGetPitchRange(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].pitchRange:2}channelGetTuning(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].tuning:0}resetPresets(){this.presets=[]}loadPresets(e,t){const i=new Array(e.phdrs.length-1);for(let t=0;t<e.phdrs.length-1;t++){const n=e.phdrs[t];let r=0;const s=i[t]=new ci;s.name=n.presetName,s.bank=n.bank,s.presetNumber=n.preset,s.fontSamples=e.fontSamples;let o=0;for(let i=n.presetBagNdx;i<e.phdrs[t+1].presetBagNdx;i++){let t=0,n=127,r=0,s=127;for(let a=e.pbags[i].genNdx;a<e.pbags[i+1].genNdx;a++){let i=e.pgens[a];if(i.genOper!==ii.GenKeyRange)if(i.genOper!==ii.GenVelRange){if(i.genOper===ii.GenInstrument&&!(i.genAmount.wordAmount>=e.insts.length))for(let a=e.insts[i.genAmount.wordAmount].instBagNdx;a<e.insts[i.genAmount.wordAmount+1].instBagNdx;a++){let i=0,l=127,c=0,h=127;for(let u=e.ibags[a].instGenNdx;u<e.ibags[a+1].instGenNdx;u++){let a=e.igens[u];a.genOper!==ii.GenKeyRange?a.genOper!==ii.GenVelRange?53===a.genOper&&l>=t&&i<=n&&h>=r&&c<=s&&o++:(c=a.genAmount.lowByteAmount,h=a.genAmount.highByteAmount):(i=a.genAmount.lowByteAmount,l=a.genAmount.highByteAmount)}}}else r=i.genAmount.lowByteAmount,s=i.genAmount.highByteAmount;else t=i.genAmount.lowByteAmount,n=i.genAmount.highByteAmount}}s.regions=new Array(o);let a=new di;a.clear(!0);for(let i=n.presetBagNdx;i<e.phdrs[t+1].presetBagNdx;i++){const t=e.pbags[i],o=new di(a);let l=!1;for(let n=t.genNdx;n<e.pbags[i+1].genNdx;n++){const t=e.pgens[n];if(t.genOper===ii.GenInstrument){let i=t.genAmount.wordAmount;if(i>=e.insts.length)continue;let n=new di;n.clear(!1);let a=e.insts[i];for(let t=a.instBagNdx;t<e.insts[i+1].instBagNdx;t++){let i=e.ibags[t],l=new di(n),c=!1;for(let n=i.instGenNdx;n<e.ibags[t+1].instGenNdx;n++){let t=e.igens[n];if(t.genOper===ii.GenSampleId){if(l.hiKey<o.loKey||l.loKey>o.hiKey)continue;if(l.hiVel<o.loVel||l.loVel>o.hiVel)continue;o.loKey>l.loKey&&(l.loKey=o.loKey),o.hiKey<l.hiKey&&(l.hiKey=o.hiKey),o.loVel>l.loVel&&(l.loVel=o.loVel),o.hiVel<l.hiVel&&(l.hiVel=o.hiVel),l.offset+=o.offset,l.end+=o.end,l.loopStart+=o.loopStart,l.loopEnd+=o.loopEnd,l.transpose+=o.transpose,l.tune+=o.tune,l.pitchKeyTrack+=o.pitchKeyTrack,l.attenuation+=o.attenuation,l.pan+=o.pan,l.ampEnv.delay+=o.ampEnv.delay,l.ampEnv.attack+=o.ampEnv.attack,l.ampEnv.hold+=o.ampEnv.hold,l.ampEnv.decay+=o.ampEnv.decay,l.ampEnv.sustain+=o.ampEnv.sustain,l.ampEnv.release+=o.ampEnv.release,l.modEnv.delay+=o.modEnv.delay,l.modEnv.attack+=o.modEnv.attack,l.modEnv.hold+=o.modEnv.hold,l.modEnv.decay+=o.modEnv.decay,l.modEnv.sustain+=o.modEnv.sustain,l.modEnv.release+=o.modEnv.release,l.initialFilterQ+=o.initialFilterQ,l.initialFilterFc+=o.initialFilterFc,l.modEnvToPitch+=o.modEnvToPitch,l.modEnvToFilterFc+=o.modEnvToFilterFc,l.delayModLFO+=o.delayModLFO,l.freqModLFO+=o.freqModLFO,l.modLfoToPitch+=o.modLfoToPitch,l.modLfoToFilterFc+=o.modLfoToFilterFc,l.modLfoToVolume+=o.modLfoToVolume,l.delayVibLFO+=o.delayVibLFO,l.freqVibLFO+=o.freqVibLFO,l.vibLfoToPitch+=o.vibLfoToPitch,l.ampEnv.envToSecs(!0),l.modEnv.envToSecs(!1),l.delayModLFO=l.delayModLFO<-11950?0:hi.timecents2Secs(l.delayModLFO),l.delayVibLFO=l.delayVibLFO<-11950?0:hi.timecents2Secs(l.delayVibLFO),l.pan<-.5?l.pan=-.5:l.pan>.5&&(l.pan=.5),(l.initialFilterQ<1500||l.initialFilterQ>13500)&&(l.initialFilterQ=0);let i=e.sHdrs[t.genAmount.wordAmount];l.offset+=i.start,l.end+=i.end,l.loopStart+=i.startLoop,l.loopEnd+=i.endLoop,i.endLoop>0&&(l.loopEnd-=1),-1===l.pitchKeyCenter&&(l.pitchKeyCenter=i.originalPitch),l.tune+=i.pitchCorrection,l.sampleRate=i.sampleRate,0!==l.end&&l.end<s.fontSamples.length?l.end++:l.end=s.fontSamples.length,s.regions[r]=new di(l),r++,c=!0}else l.operator(t.genOper,t.genAmount)}i!==e.ibags[a.instBagNdx]||c||(n=new di(l))}l=!0}else o.operator(t.genOper,t.genAmount)}t!==e.pbags[n.presetBagNdx]||l||(a=o)}}if(t&&this.presets)for(const e of i)this.presets.push(e);else this.presets=i}}class yi{constructor(){this._listeners=[]}on(e){this._listeners.push(e)}off(e){this._listeners=this._listeners.filter((t=>t!==e))}trigger(){for(const e of this._listeners)e()}}class _i{constructor(){this._listeners=[]}on(e){this._listeners.push(e)}off(e){this._listeners=this._listeners.filter((t=>t!==e))}trigger(e){for(const t of this._listeners)t(e)}}class wi{constructor(e){this.events=e}}class Si{constructor(e){this._isSoundFontLoaded=!1,this._isMidiLoaded=!1,this._tickPosition=0,this._timePosition=0,this._metronomeVolume=0,this._countInVolume=0,this._playedEventsQueue=new bi,this._midiEventsPlayedFilter=new Set,this.isReady=!1,this.state=j.Paused,this.ready=new yi,this.readyForPlayback=new yi,this.finished=new yi,this.soundFontLoaded=new yi,this.soundFontLoadFailed=new _i,this.midiLoaded=new _i,this.midiLoadFailed=new _i,this.stateChanged=new _i,this.positionChanged=new _i,this.midiEventsPlayed=new _i,Oe.debug("AlphaSynth","Initializing player"),this.state=j.Paused,Oe.debug("AlphaSynth","Creating output"),this.output=e,this.output.ready.on((()=>{this.isReady=!0,this.ready.trigger(),this.checkReadyForPlayback()})),this.output.sampleRequest.on((()=>{let e=new Float32Array(jt.MicroBufferSize*jt.MicroBufferCount*jt.AudioChannels),t=0;for(let i=0;i<jt.MicroBufferCount;i++){this._sequencer.fillMidiEventQueue();const i=this._synthesizer.synthesize(e,t,jt.MicroBufferSize);t+=jt.MicroBufferSize*jt.AudioChannels;for(const e of i)this._midiEventsPlayedFilter.has(e.event.command)&&this._playedEventsQueue.enqueue(e);if(this._sequencer.isFinished)break}t<e.length&&(e=e.subarray(0,t)),this.output.addSamples(e)})),this.output.samplesPlayed.on(this.onSamplesPlayed.bind(this)),Oe.debug("AlphaSynth","Creating synthesizer"),this._synthesizer=new vi(this.output.sampleRate),this._sequencer=new Kt(this._synthesizer),Oe.debug("AlphaSynth","Opening output"),this.output.open()}get isReadyForPlayback(){return this.isReady&&this._isSoundFontLoaded&&this._isMidiLoaded}get logLevel(){return Oe.logLevel}set logLevel(e){Oe.logLevel=e}get masterVolume(){return this._synthesizer.masterVolume}set masterVolume(e){e=Math.max(e,jt.MinVolume),this._synthesizer.masterVolume=e}get metronomeVolume(){return this._metronomeVolume}set metronomeVolume(e){e=Math.max(e,jt.MinVolume),this._metronomeVolume=e,this._synthesizer.metronomeVolume=e}get countInVolume(){return this._countInVolume}set countInVolume(e){e=Math.max(e,jt.MinVolume),this._countInVolume=e}get midiEventsPlayedFilter(){return Array.from(this._midiEventsPlayedFilter)}set midiEventsPlayedFilter(e){this._midiEventsPlayedFilter=new Set(e)}get playbackSpeed(){return this._sequencer.playbackSpeed}set playbackSpeed(e){e=hi.clamp(e,jt.MinPlaybackSpeed,jt.MaxPlaybackSpeed);let t=this._sequencer.playbackSpeed;this._sequencer.playbackSpeed=e,this.updateTimePosition(this._timePosition*(t/e),!0)}get tickPosition(){return this._tickPosition}set tickPosition(e){this.timePosition=this._sequencer.tickPositionToTimePosition(e)}get timePosition(){return this._timePosition}set timePosition(e){Oe.debug("AlphaSynth",`Seeking to position ${e}ms`),this._sequencer.seek(e),this.updateTimePosition(e,!0),this.output.resetSamples()}get playbackRange(){return this._sequencer.playbackRange}set playbackRange(e){this._sequencer.playbackRange=e,e&&(this.tickPosition=e.startTick)}get isLooping(){return this._sequencer.isLooping}set isLooping(e){this._sequencer.isLooping=e}destroy(){Oe.debug("AlphaSynth","Destroying player"),this.stop()}play(){return!(this.state!==j.Paused||!this._isMidiLoaded||(this.output.activate(),this.playInternal(),this._countInVolume>0&&(Oe.debug("AlphaSynth","Starting countin"),this._sequencer.startCountIn(),this._synthesizer.setupMetronomeChannel(this._countInVolume),this.tickPosition=0),this.output.play(),0))}playInternal(){Oe.debug("AlphaSynth","Starting playback"),this._synthesizer.setupMetronomeChannel(this.metronomeVolume),this.state=j.Playing,this.stateChanged.trigger(new $t(this.state,!1))}pause(){this.state!==j.Paused&&this._isMidiLoaded&&(Oe.debug("AlphaSynth","Pausing playback"),this.state=j.Paused,this.stateChanged.trigger(new $t(this.state,!1)),this.output.pause(),this._synthesizer.noteOffAll(!1))}playPause(){this.state===j.Paused&&this._isMidiLoaded?this.play():this.pause()}stop(){this._isMidiLoaded&&(Oe.debug("AlphaSynth","Stopping playback"),this.state=j.Paused,this.output.pause(),this._sequencer.stop(),this._synthesizer.noteOffAll(!0),this.tickPosition=this._sequencer.playbackRange?this._sequencer.playbackRange.startTick:0,this.stateChanged.trigger(new $t(this.state,!0)))}playOneTimeMidiFile(e){this.pause(),this._sequencer.loadOneTimeMidi(e),this._sequencer.stop(),this._synthesizer.noteOffAll(!0),this.tickPosition=0,this.output.play()}resetSoundFonts(){this.stop(),this._synthesizer.resetPresets(),this._isSoundFontLoaded=!1,this.soundFontLoaded.trigger()}loadSoundFont(e,t){this.pause();let i=at.fromBuffer(e);try{Oe.debug("AlphaSynth","Loading soundfont from bytes");let e=new Yt;e.load(i),this._synthesizer.loadPresets(e,t),this._isSoundFontLoaded=!0,this.soundFontLoaded.trigger(),Oe.debug("AlphaSynth","soundFont successfully loaded"),this.checkReadyForPlayback()}catch(e){Oe.error("AlphaSynth","Could not load soundfont from bytes "+e),this.soundFontLoadFailed.trigger(e)}}checkReadyForPlayback(){this.isReadyForPlayback&&(this._synthesizer.setupMetronomeChannel(this.metronomeVolume),this.readyForPlayback.trigger())}loadMidiFile(e){this.stop();try{Oe.debug("AlphaSynth","Loading midi from model"),this._sequencer.loadMidi(e),this._isMidiLoaded=!0,this.midiLoaded.trigger(new qt(0,this._sequencer.endTime,0,this._sequencer.endTick,!1)),Oe.debug("AlphaSynth","Midi successfully loaded"),this.checkReadyForPlayback(),this.tickPosition=0}catch(e){Oe.error("AlphaSynth","Could not load midi from model "+e),this.midiLoadFailed.trigger(e)}}setChannelMute(e,t){this._synthesizer.channelSetMute(e,t)}resetChannelStates(){this._synthesizer.resetChannelStates()}setChannelSolo(e,t){this._synthesizer.channelSetSolo(e,t)}setChannelVolume(e,t){t=Math.max(t,jt.MinVolume),this._synthesizer.channelSetMixVolume(e,t)}onSamplesPlayed(e){let t=e/this._synthesizer.outSampleRate*1e3;this.updateTimePosition(this._timePosition+t,!1),this.checkForFinish()}checkForFinish(){let e=0,t=0;this.playbackRange?(e=this.playbackRange.startTick,t=this.playbackRange.endTick):t=this._sequencer.endTick,this._tickPosition>=t&&(Oe.debug("AlphaSynth","Finished playback"),this._sequencer.isPlayingCountIn?(this._sequencer.resetCountIn(),this.timePosition=this._sequencer.currentTime,this.playInternal()):this._sequencer.isPlayingOneTimeMidi?(this._sequencer.resetOneTimeMidi(),this.state=j.Paused,this.output.pause(),this._synthesizer.noteOffAll(!1)):(this.finished.trigger(),this.isLooping?this.tickPosition=e:this.stop()))}updateTimePosition(e,t){const i=this._timePosition=e,n=this._tickPosition=this._sequencer.timePositionToTickPosition(i),r=this._sequencer.endTime,s=this._sequencer.endTick;if(this._sequencer.isPlayingOneTimeMidi||this._sequencer.isPlayingCountIn||(Oe.debug("AlphaSynth",`Position changed: (time: ${i}/${r}, tick: ${n}/${s}, Active Voices: ${this._synthesizer.activeVoiceCount}`),this.positionChanged.trigger(new qt(i,r,n,s,t))),t)this._playedEventsQueue.clear();else{const e=new bi;for(;!this._playedEventsQueue.isEmpty&&this._playedEventsQueue.peek().time<i;){const t=this._playedEventsQueue.dequeue();e.enqueue(t.event)}e.isEmpty||this.midiEventsPlayed.trigger(new wi(e.toArray()))}}}class Ci{constructor(){this.division=Te.QuarterTime,this.events=[]}addEvent(e){if(0===this.events.length)this.events.push(e);else{let t=this.events.length;for(;t>0&&this.events[t-1].tick>e.tick;)t--;this.events.splice(t,0,e)}}toBinary(){let e=at.empty();return this.writeTo(e),e.toArray()}writeTo(e){let t=new Uint8Array([77,84,104,100]);e.write(t,0,t.length),t=new Uint8Array([0,0,0,6]),e.write(t,0,t.length),t=new Uint8Array([0,0]),e.write(t,0,t.length);let i=1;t=new Uint8Array([i>>8&255,255&i]),e.write(t,0,t.length),i=this.division,t=new Uint8Array([i>>8&255,255&i]),e.write(t,0,t.length);let n=at.empty(),r=0;for(let e of this.events){let t=e.tick-r;Ci.writeVariableInt(n,t),e.writeTo(n),r=e.tick}t=new Uint8Array([77,84,114,107]),e.write(t,0,t.length);let s=n.toArray(),o=s.length;t=new Uint8Array([o>>24&255,o>>16&255,o>>8&255,255&o]),e.write(t,0,t.length),e.write(s,0,s.length)}static writeVariableInt(e,t){let i=new Uint8Array(4),n=0;do{i[n++]=127&t,t>>=7}while(t>0);for(;n>0;)n--,n>0?e.writeByte(128|i[n]):e.writeByte(i[n])}}class xi extends Wt{constructor(e,t,i,n,r){super(e,t,i,n,0),this.data=r}writeTo(e){e.writeByte(255),e.writeByte(this.metaStatus);let t=this.data.length;Ci.writeVariableInt(e,t),e.write(this.data,0,this.data.length)}}class ki extends Wt{constructor(e,t,i,n,r){super(e,t,i,n,0),this.value=r}writeTo(e){e.writeByte(255),e.writeByte(this.metaStatus),Ci.writeVariableInt(e,3);let t=new Uint8Array([this.value>>16&255,this.value>>8&255,255&this.value]);e.write(t,0,t.length)}}class Ei{constructor(){this.encoding="utf-8",this.mergePartGroupsInMusicXml=!1,this.beatTextAsLyrics=!1}}(ce=e.ScrollMode||(e.ScrollMode={}))[ce.Off=0]="Off",ce[ce.Continuous=1]="Continuous",ce[ce.OffScreen=2]="OffScreen";class Ti{constructor(){this.noteWideLength=480,this.noteWideAmplitude=2,this.noteSlightLength=480,this.noteSlightAmplitude=2,this.beatWideLength=240,this.beatWideAmplitude=3,this.beatSlightLength=240,this.beatSlightAmplitude=3}}class Li{constructor(){this.simpleSlidePitchOffset=6,this.simpleSlideDurationRatio=.25,this.shiftSlideDurationRatio=.5}}class Ni{constructor(){this.soundFont=null,this.scrollElement="html,body",this.enablePlayer=!1,this.enableCursor=!0,this.enableUserInteraction=!0,this.scrollOffsetX=0,this.scrollOffsetY=0,this.scrollMode=e.ScrollMode.Continuous,this.scrollSpeed=300,this.songBookBendDuration=75,this.songBookDipDuration=150,this.vibrato=new Ti,this.slide=new Li,this.playTripletFeel=!0}}class Mi{constructor(){this.core=new ra,this.display=new Se,this.notation=new fe,this.importer=new Ei,this.player=new Ni}setSongBookModeSettings(){this.notation.notationMode=e.NotationMode.SongBook,this.notation.smallGraceTabNotes=!1,this.notation.fingeringMode=e.FingeringMode.SingleNoteEffectBand,this.notation.extendBendArrowsOnTiedNotes=!1,this.notation.elements.set(n.ParenthesisOnTiedBends,!1),this.notation.elements.set(n.TabNotesOnTiedBends,!1),this.notation.elements.set(n.ZerosOnDiveWhammys,!0)}static get songBook(){let e=new Mi;return e.setSongBookModeSettings(),e}}class Oi extends Ft{constructor(e,t,i,n,r){super(e,t,i,0,0),this.noteKey=n,this.pitch=r}writeTo(e){let t=new Uint8Array([64,255&this.message,255&this.noteKey,0,this.pitch>>24&255,this.pitch>>16&255,this.pitch>>8&255,255&this.pitch]);e.write(t,0,t.length)}}class Di{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("marker",e.marker),t.set("text",e.text),t}static setProperty(e,t,i){switch(t){case"marker":return e.marker=i,!0;case"text":return e.text=i,!0}return!1}}class Ii{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("isLinear",e.isLinear),t.set("type",e.type),t.set("value",e.value),t.set("ratioPosition",e.ratioPosition),t.set("text",e.text),t}static setProperty(e,t,i){switch(t){case"islinear":return e.isLinear=i,!0;case"type":return e.type=be.parseEnum(i,o),!0;case"value":return e.value=i,!0;case"ratioposition":return e.ratioPosition=i,!0;case"text":return e.text=i,!0}return!1}}class Ai{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("type",e.type),t.set("length",e.length),t}static setProperty(e,t,i){switch(t){case"type":return e.type=be.parseEnum(i,A),!0;case"length":return e.length=i,!0}return!1}}class Pi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;t.set("alternateEndings",e.alternateEndings),t.set("keySignature",e.keySignature),t.set("keySignatureType",e.keySignatureType),t.set("isDoubleBar",e.isDoubleBar),t.set("isRepeatStart",e.isRepeatStart),t.set("repeatCount",e.repeatCount),t.set("timeSignatureNumerator",e.timeSignatureNumerator),t.set("timeSignatureDenominator",e.timeSignatureDenominator),t.set("timeSignatureCommon",e.timeSignatureCommon),t.set("tripletFeel",e.tripletFeel),t.set("section",Di.toJson(e.section)),t.set("tempoAutomation",Ii.toJson(e.tempoAutomation));{const i=new Map;t.set("fermata",i);for(const[t,n]of e.fermata)i.set(t.toString(),Ai.toJson(n))}return t.set("start",e.start),t.set("isAnacrusis",e.isAnacrusis),t}static setProperty(e,t,i){switch(t){case"alternateendings":return e.alternateEndings=i,!0;case"keysignature":return e.keySignature=be.parseEnum(i,N),!0;case"keysignaturetype":return e.keySignatureType=be.parseEnum(i,M),!0;case"isdoublebar":return e.isDoubleBar=i,!0;case"isrepeatstart":return e.isRepeatStart=i,!0;case"repeatcount":return e.repeatCount=i,!0;case"timesignaturenumerator":return e.timeSignatureNumerator=i,!0;case"timesignaturedenominator":return e.timeSignatureDenominator=i,!0;case"timesignaturecommon":return e.timeSignatureCommon=i,!0;case"tripletfeel":return e.tripletFeel=be.parseEnum(i,O),!0;case"fermata":return e.fermata=new Map,be.forEach(i,((t,i)=>{const n=new ht;Ai.fromJson(n,t),e.fermata.set(parseInt(i),n)})),!0;case"start":return e.start=i,!0;case"isanacrusis":return e.isAnacrusis=i,!0}return["section"].indexOf(t)>=0?(i?(e.section=new qe,Di.fromJson(e.section,i)):e.section=null,!0):["tempoautomation"].indexOf(t)>=0&&(i?(e.tempoAutomation=new ke,Ii.fromJson(e.tempoAutomation,i)):e.tempoAutomation=null,!0)}}class Ri{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("offset",e.offset),t.set("value",e.value),t}static setProperty(e,t,i){switch(t){case"offset":return e.offset=i,!0;case"value":return e.value=i,!0}return!1}}class Bi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("accentuated",e.accentuated),t.set("bendType",e.bendType),t.set("bendStyle",e.bendStyle),t.set("isContinuedBend",e.isContinuedBend),t.set("bendPoints",e.bendPoints.map((e=>Ri.toJson(e)))),t.set("fret",e.fret),t.set("string",e.string),t.set("octave",e.octave),t.set("tone",e.tone),t.set("percussionArticulation",e.percussionArticulation),t.set("isVisible",e.isVisible),t.set("isLeftHandTapped",e.isLeftHandTapped),t.set("isHammerPullOrigin",e.isHammerPullOrigin),t.set("hammerPullOriginNoteId",e.hammerPullOriginNoteId),t.set("hammerPullDestinationNoteId",e.hammerPullDestinationNoteId),t.set("isSlurDestination",e.isSlurDestination),t.set("slurOriginNoteId",e.slurOriginNoteId),t.set("slurDestinationNoteId",e.slurDestinationNoteId),t.set("harmonicType",e.harmonicType),t.set("harmonicValue",e.harmonicValue),t.set("isGhost",e.isGhost),t.set("isLetRing",e.isLetRing),t.set("isPalmMute",e.isPalmMute),t.set("isDead",e.isDead),t.set("isStaccato",e.isStaccato),t.set("slideInType",e.slideInType),t.set("slideOutType",e.slideOutType),t.set("vibrato",e.vibrato),t.set("tieOriginNoteId",e.tieOriginNoteId),t.set("tieDestinationNoteId",e.tieDestinationNoteId),t.set("isTieDestination",e.isTieDestination),t.set("leftHandFinger",e.leftHandFinger),t.set("rightHandFinger",e.rightHandFinger),t.set("isFingering",e.isFingering),t.set("trillValue",e.trillValue),t.set("trillSpeed",e.trillSpeed),t.set("durationPercent",e.durationPercent),t.set("accidentalMode",e.accidentalMode),t.set("dynamics",e.dynamics),t}static setProperty(e,t,n){switch(t){case"id":return e.id=n,!0;case"accentuated":return e.accentuated=be.parseEnum(n,s),!0;case"bendtype":return e.bendType=be.parseEnum(n,u),!0;case"bendstyle":return e.bendStyle=be.parseEnum(n,h),!0;case"iscontinuedbend":return e.isContinuedBend=n,!0;case"bendpoints":e.bendPoints=[];for(const t of n){const i=new Le;Ri.fromJson(i,t),e.addBendPoint(i)}return!0;case"fret":return e.fret=n,!0;case"string":return e.string=n,!0;case"octave":return e.octave=n,!0;case"tone":return e.tone=n,!0;case"percussionarticulation":return e.percussionArticulation=n,!0;case"isvisible":return e.isVisible=n,!0;case"islefthandtapped":return e.isLeftHandTapped=n,!0;case"ishammerpullorigin":return e.isHammerPullOrigin=n,!0;case"hammerpulloriginnoteid":return e.hammerPullOriginNoteId=n,!0;case"hammerpulldestinationnoteid":return e.hammerPullDestinationNoteId=n,!0;case"isslurdestination":return e.isSlurDestination=n,!0;case"sluroriginnoteid":return e.slurOriginNoteId=n,!0;case"slurdestinationnoteid":return e.slurDestinationNoteId=n,!0;case"harmonictype":return e.harmonicType=be.parseEnum(n,b),!0;case"harmonicvalue":return e.harmonicValue=n,!0;case"isghost":return e.isGhost=n,!0;case"isletring":return e.isLetRing=n,!0;case"ispalmmute":return e.isPalmMute=n,!0;case"isdead":return e.isDead=n,!0;case"isstaccato":return e.isStaccato=n,!0;case"slideintype":return e.slideInType=be.parseEnum(n,y),!0;case"slideouttype":return e.slideOutType=be.parseEnum(n,_),!0;case"vibrato":return e.vibrato=be.parseEnum(n,w),!0;case"tieoriginnoteid":return e.tieOriginNoteId=n,!0;case"tiedestinationnoteid":return e.tieDestinationNoteId=n,!0;case"istiedestination":return e.isTieDestination=n,!0;case"lefthandfinger":return e.leftHandFinger=be.parseEnum(n,i),!0;case"righthandfinger":return e.rightHandFinger=be.parseEnum(n,i),!0;case"isfingering":return e.isFingering=n,!0;case"trillvalue":return e.trillValue=n,!0;case"trillspeed":return e.trillSpeed=be.parseEnum(n,p),!0;case"durationpercent":return e.durationPercent=n,!0;case"accidentalmode":return e.accidentalMode=be.parseEnum(n,v),!0;case"dynamics":return e.dynamics=be.parseEnum(n,g),!0}return!1}}class Fi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("notes",e.notes.map((e=>Bi.toJson(e)))),t.set("isEmpty",e.isEmpty),t.set("whammyStyle",e.whammyStyle),t.set("ottava",e.ottava),t.set("isLegatoOrigin",e.isLegatoOrigin),t.set("duration",e.duration),t.set("automations",e.automations.map((e=>Ii.toJson(e)))),t.set("dots",e.dots),t.set("fadeIn",e.fadeIn),t.set("lyrics",e.lyrics),t.set("hasRasgueado",e.hasRasgueado),t.set("pop",e.pop),t.set("slap",e.slap),t.set("tap",e.tap),t.set("text",e.text),t.set("brushType",e.brushType),t.set("brushDuration",e.brushDuration),t.set("tupletDenominator",e.tupletDenominator),t.set("tupletNumerator",e.tupletNumerator),t.set("isContinuedWhammy",e.isContinuedWhammy),t.set("whammyBarType",e.whammyBarType),t.set("whammyBarPoints",e.whammyBarPoints.map((e=>Ri.toJson(e)))),t.set("vibrato",e.vibrato),t.set("chordId",e.chordId),t.set("graceType",e.graceType),t.set("pickStroke",e.pickStroke),t.set("tremoloSpeed",e.tremoloSpeed),t.set("crescendo",e.crescendo),t.set("displayStart",e.displayStart),t.set("playbackStart",e.playbackStart),t.set("displayDuration",e.displayDuration),t.set("playbackDuration",e.playbackDuration),t.set("dynamics",e.dynamics),t.set("invertBeamDirection",e.invertBeamDirection),t.set("preferredBeamDirection",e.preferredBeamDirection),t.set("beamingMode",e.beamingMode),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"notes":e.notes=[];for(const t of i){const i=new Ae;Bi.fromJson(i,t),e.addNote(i)}return!0;case"isempty":return e.isEmpty=i,!0;case"whammystyle":return e.whammyStyle=be.parseEnum(i,h),!0;case"ottava":return e.ottava=be.parseEnum(i,l),!0;case"islegatoorigin":return e.isLegatoOrigin=i,!0;case"duration":return e.duration=be.parseEnum(i,p),!0;case"automations":e.automations=[];for(const t of i){const i=new ke;Ii.fromJson(i,t),e.automations.push(i)}return!0;case"dots":return e.dots=i,!0;case"fadein":return e.fadeIn=i,!0;case"lyrics":return e.lyrics=i,!0;case"hasrasgueado":return e.hasRasgueado=i,!0;case"pop":return e.pop=i,!0;case"slap":return e.slap=i,!0;case"tap":return e.tap=i,!0;case"text":return e.text=i,!0;case"brushtype":return e.brushType=be.parseEnum(i,d),!0;case"brushduration":return e.brushDuration=i,!0;case"tupletdenominator":return e.tupletDenominator=i,!0;case"tupletnumerator":return e.tupletNumerator=i,!0;case"iscontinuedwhammy":return e.isContinuedWhammy=i,!0;case"whammybartype":return e.whammyBarType=be.parseEnum(i,E),!0;case"whammybarpoints":e.whammyBarPoints=[];for(const t of i){const i=new Le;Ri.fromJson(i,t),e.addWhammyBarPoint(i)}return!0;case"vibrato":return e.vibrato=be.parseEnum(i,w),!0;case"chordid":return e.chordId=i,!0;case"gracetype":return e.graceType=be.parseEnum(i,m),!0;case"pickstroke":return e.pickStroke=be.parseEnum(i,S),!0;case"tremolospeed":return e.tremoloSpeed=be.parseEnum(i,p),!0;case"crescendo":return e.crescendo=be.parseEnum(i,f),!0;case"displaystart":return e.displayStart=i,!0;case"playbackstart":return e.playbackStart=i,!0;case"displayduration":return e.displayDuration=i,!0;case"playbackduration":return e.playbackDuration=i,!0;case"dynamics":return e.dynamics=be.parseEnum(i,g),!0;case"invertbeamdirection":return e.invertBeamDirection=i,!0;case"preferredbeamdirection":return e.preferredBeamDirection=be.parseEnum(i,B),!0;case"beamingmode":return e.beamingMode=be.parseEnum(i,T),!0}return!1}}class Wi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("beats",e.beats.map((e=>Fi.toJson(e)))),t.set("isEmpty",e.isEmpty),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"beats":e.beats=[];for(const t of i){const i=new ze;Fi.fromJson(i,t),e.addBeat(i)}return!0;case"isempty":return e.isEmpty=i,!0}return!1}}class Vi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("clef",e.clef),t.set("clefOttava",e.clefOttava),t.set("voices",e.voices.map((e=>Wi.toJson(e)))),t.set("simileMark",e.simileMark),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"clef":return e.clef=be.parseEnum(i,a),!0;case"clefottava":return e.clefOttava=be.parseEnum(i,l),!0;case"voices":e.voices=[];for(const t of i){const i=new Je;Wi.fromJson(i,t),e.addVoice(i)}return!0;case"similemark":return e.simileMark=be.parseEnum(i,c),!0}return!1}}class zi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("name",e.name),t.set("firstFret",e.firstFret),t.set("strings",e.strings),t.set("barreFrets",e.barreFrets),t.set("showName",e.showName),t.set("showDiagram",e.showDiagram),t.set("showFingering",e.showFingering),t}static setProperty(e,t,i){switch(t){case"name":return e.name=i,!0;case"firstfret":return e.firstFret=i,!0;case"strings":return e.strings=i,!0;case"barrefrets":return e.barreFrets=i,!0;case"showname":return e.showName=i,!0;case"showdiagram":return e.showDiagram=i,!0;case"showfingering":return e.showFingering=i,!0}return!1}}class Hi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("isStandard",e.isStandard),t.set("name",e.name),t.set("tunings",e.tunings),t}static setProperty(e,t,i){switch(t){case"isstandard":return e.isStandard=i,!0;case"name":return e.name=i,!0;case"tunings":return e.tunings=i,!0}return!1}}class ji{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;t.set("bars",e.bars.map((e=>Vi.toJson(e))));{const i=new Map;t.set("chords",i);for(const[t,n]of e.chords)i.set(t.toString(),zi.toJson(n))}return t.set("capo",e.capo),t.set("transpositionPitch",e.transpositionPitch),t.set("displayTranspositionPitch",e.displayTranspositionPitch),t.set("stringTuning",Hi.toJson(e.stringTuning)),t.set("showTablature",e.showTablature),t.set("showStandardNotation",e.showStandardNotation),t.set("isPercussion",e.isPercussion),t.set("standardNotationLineCount",e.standardNotationLineCount),t}static setProperty(e,t,i){switch(t){case"bars":e.bars=[];for(const t of i){const i=new Ee;Vi.fromJson(i,t),e.addBar(i)}return!0;case"chords":return e.chords=new Map,be.forEach(i,((t,i)=>{const n=new He;zi.fromJson(n,t),e.addChord(i,n)})),!0;case"capo":return e.capo=i,!0;case"transpositionpitch":return e.transpositionPitch=i,!0;case"displaytranspositionpitch":return e.displayTranspositionPitch=i,!0;case"showtablature":return e.showTablature=i,!0;case"showstandardnotation":return e.showStandardNotation=i,!0;case"ispercussion":return e.isPercussion=i,!0;case"standardnotationlinecount":return e.standardNotationLineCount=i,!0}return["stringtuning"].indexOf(t)>=0&&(Hi.fromJson(e.stringTuning,i),!0)}}class Ui{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("volume",e.volume),t.set("balance",e.balance),t.set("port",e.port),t.set("program",e.program),t.set("primaryChannel",e.primaryChannel),t.set("secondaryChannel",e.secondaryChannel),t.set("isMute",e.isMute),t.set("isSolo",e.isSolo),t}static setProperty(e,t,i){switch(t){case"volume":return e.volume=i,!0;case"balance":return e.balance=i,!0;case"port":return e.port=i,!0;case"program":return e.program=i,!0;case"primarychannel":return e.primaryChannel=i,!0;case"secondarychannel":return e.secondaryChannel=i,!0;case"ismute":return e.isMute=i,!0;case"issolo":return e.isSolo=i,!0}return!1}}class Gi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("elementType",e.elementType),t.set("staffLine",e.staffLine),t.set("noteHeadDefault",e.noteHeadDefault),t.set("noteHeadHalf",e.noteHeadHalf),t.set("noteHeadWhole",e.noteHeadWhole),t.set("techniqueSymbol",e.techniqueSymbol),t.set("techniqueSymbolPlacement",e.techniqueSymbolPlacement),t.set("outputMidiNumber",e.outputMidiNumber),t}static setProperty(e,t,i){switch(t){case"elementtype":return e.elementType=i,!0;case"staffline":return e.staffLine=i,!0;case"noteheaddefault":return e.noteHeadDefault=be.parseEnum(i,C),!0;case"noteheadhalf":return e.noteHeadHalf=be.parseEnum(i,C),!0;case"noteheadwhole":return e.noteHeadWhole=be.parseEnum(i,C),!0;case"techniquesymbol":return e.techniqueSymbol=be.parseEnum(i,C),!0;case"techniquesymbolplacement":return e.techniqueSymbolPlacement=be.parseEnum(i,k),!0;case"outputmidinumber":return e.outputMidiNumber=i,!0}return!1}}class Ki{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("staves",e.staves.map((e=>ji.toJson(e)))),t.set("playbackInfo",Ui.toJson(e.playbackInfo)),t.set("color",me.toJson(e.color)),t.set("name",e.name),t.set("shortName",e.shortName),t.set("percussionArticulations",e.percussionArticulations.map((e=>Gi.toJson(e)))),t}static setProperty(e,t,i){switch(t){case"staves":e.staves=[];for(const t of i){const i=new Xe;ji.fromJson(i,t),e.addStaff(i)}return!0;case"color":return e.color=me.fromJson(i),!0;case"name":return e.name=i,!0;case"shortname":return e.shortName=i,!0;case"percussionarticulations":e.percussionArticulations=[];for(const t of i){const i=new De;Gi.fromJson(i,t),e.percussionArticulations.push(i)}return!0}return["playbackinfo"].indexOf(t)>=0&&(Ui.fromJson(e.playbackInfo,i),!0)}}class $i{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("hideDynamics",e.hideDynamics),t}static setProperty(e,t,i){switch(t){case"hidedynamics":return e.hideDynamics=i,!0}return!1}}class qi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("album",e.album),t.set("artist",e.artist),t.set("copyright",e.copyright),t.set("instructions",e.instructions),t.set("music",e.music),t.set("notices",e.notices),t.set("subTitle",e.subTitle),t.set("title",e.title),t.set("words",e.words),t.set("tab",e.tab),t.set("tempo",e.tempo),t.set("tempoLabel",e.tempoLabel),t.set("masterBars",e.masterBars.map((e=>Pi.toJson(e)))),t.set("tracks",e.tracks.map((e=>Ki.toJson(e)))),t.set("stylesheet",$i.toJson(e.stylesheet)),t}static setProperty(e,t,i){switch(t){case"album":return e.album=i,!0;case"artist":return e.artist=i,!0;case"copyright":return e.copyright=i,!0;case"instructions":return e.instructions=i,!0;case"music":return e.music=i,!0;case"notices":return e.notices=i,!0;case"subtitle":return e.subTitle=i,!0;case"title":return e.title=i,!0;case"words":return e.words=i,!0;case"tab":return e.tab=i,!0;case"tempo":return e.tempo=i,!0;case"tempolabel":return e.tempoLabel=i,!0;case"masterbars":e.masterBars=[];for(const t of i){const i=new Ue;Pi.fromJson(i,t),e.addMasterBar(i)}return!0;case"tracks":e.tracks=[];for(const t of i){const i=new Qe;Ki.fromJson(i,t),e.addTrack(i)}return!0}return["stylesheet"].indexOf(t)>=0&&($i.fromJson(e.stylesheet,i),!0)}}class Zi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("scriptFile",e.scriptFile),t.set("fontDirectory",e.fontDirectory),t.set("file",e.file),t.set("tex",e.tex),t.set("tracks",e.tracks),t.set("enableLazyLoading",e.enableLazyLoading),t.set("engine",e.engine),t.set("logLevel",e.logLevel),t.set("useWorkers",e.useWorkers),t.set("includeNoteBounds",e.includeNoteBounds),t}static setProperty(t,i,n){switch(i){case"scriptfile":return t.scriptFile=n,!0;case"fontdirectory":return t.fontDirectory=n,!0;case"file":return t.file=n,!0;case"tex":return t.tex=n,!0;case"tracks":return t.tracks=n,!0;case"enablelazyloading":return t.enableLazyLoading=n,!0;case"engine":return t.engine=n,!0;case"loglevel":return t.logLevel=be.parseEnum(n,e.LogLevel),!0;case"useworkers":return t.useWorkers=n,!0;case"includenotebounds":return t.includeNoteBounds=n,!0}return!1}}class Yi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("copyrightFont",_e.toJson(e.copyrightFont)),t.set("titleFont",_e.toJson(e.titleFont)),t.set("subTitleFont",_e.toJson(e.subTitleFont)),t.set("wordsFont",_e.toJson(e.wordsFont)),t.set("effectFont",_e.toJson(e.effectFont)),t.set("fretboardNumberFont",_e.toJson(e.fretboardNumberFont)),t.set("tablatureFont",_e.toJson(e.tablatureFont)),t.set("graceFont",_e.toJson(e.graceFont)),t.set("staffLineColor",me.toJson(e.staffLineColor)),t.set("barSeparatorColor",me.toJson(e.barSeparatorColor)),t.set("barNumberFont",_e.toJson(e.barNumberFont)),t.set("barNumberColor",me.toJson(e.barNumberColor)),t.set("fingeringFont",_e.toJson(e.fingeringFont)),t.set("markerFont",_e.toJson(e.markerFont)),t.set("mainGlyphColor",me.toJson(e.mainGlyphColor)),t.set("secondaryGlyphColor",me.toJson(e.secondaryGlyphColor)),t.set("scoreInfoColor",me.toJson(e.scoreInfoColor)),t}static setProperty(e,t,i){switch(t){case"copyrightfont":return e.copyrightFont=_e.fromJson(i),!0;case"titlefont":return e.titleFont=_e.fromJson(i),!0;case"subtitlefont":return e.subTitleFont=_e.fromJson(i),!0;case"wordsfont":return e.wordsFont=_e.fromJson(i),!0;case"effectfont":return e.effectFont=_e.fromJson(i),!0;case"fretboardnumberfont":return e.fretboardNumberFont=_e.fromJson(i),!0;case"tablaturefont":return e.tablatureFont=_e.fromJson(i),!0;case"gracefont":return e.graceFont=_e.fromJson(i),!0;case"stafflinecolor":return e.staffLineColor=me.fromJson(i),!0;case"barseparatorcolor":return e.barSeparatorColor=me.fromJson(i),!0;case"barnumberfont":return e.barNumberFont=_e.fromJson(i),!0;case"barnumbercolor":return e.barNumberColor=me.fromJson(i),!0;case"fingeringfont":return e.fingeringFont=_e.fromJson(i),!0;case"markerfont":return e.markerFont=_e.fromJson(i),!0;case"mainglyphcolor":return e.mainGlyphColor=me.fromJson(i),!0;case"secondaryglyphcolor":return e.secondaryGlyphColor=me.fromJson(i),!0;case"scoreinfocolor":return e.scoreInfoColor=me.fromJson(i),!0}return!1}}class Xi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("scale",e.scale),t.set("stretchForce",e.stretchForce),t.set("layoutMode",e.layoutMode),t.set("staveProfile",e.staveProfile),t.set("barsPerRow",e.barsPerRow),t.set("startBar",e.startBar),t.set("barCount",e.barCount),t.set("barCountPerPartial",e.barCountPerPartial),t.set("resources",Yi.toJson(e.resources)),t.set("padding",e.padding),t}static setProperty(t,i,n){switch(i){case"scale":return t.scale=n,!0;case"stretchforce":return t.stretchForce=n,!0;case"layoutmode":return t.layoutMode=be.parseEnum(n,e.LayoutMode),!0;case"staveprofile":return t.staveProfile=be.parseEnum(n,e.StaveProfile),!0;case"barsperrow":return t.barsPerRow=n,!0;case"startbar":return t.startBar=n,!0;case"barcount":return t.barCount=n,!0;case"barcountperpartial":return t.barCountPerPartial=n,!0;case"padding":return t.padding=n,!0}if(["resources"].indexOf(i)>=0)return Yi.fromJson(t.resources,n),!0;for(const e of["resources"])if(0===i.indexOf(e)&&Yi.setProperty(t.resources,i.substring(e.length),n))return!0;return!1}}class Qi{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;t.set("notationMode",e.notationMode),t.set("fingeringMode",e.fingeringMode);{const i=new Map;t.set("elements",i);for(const[t,n]of e.elements)i.set(t.toString(),n)}return t.set("rhythmMode",e.rhythmMode),t.set("rhythmHeight",e.rhythmHeight),t.set("transpositionPitches",e.transpositionPitches),t.set("displayTranspositionPitches",e.displayTranspositionPitches),t.set("smallGraceTabNotes",e.smallGraceTabNotes),t.set("extendBendArrowsOnTiedNotes",e.extendBendArrowsOnTiedNotes),t.set("extendLineEffectsToBeatEnd",e.extendLineEffectsToBeatEnd),t.set("slurHeight",e.slurHeight),t}static setProperty(t,i,r){switch(i){case"notationmode":return t.notationMode=be.parseEnum(r,e.NotationMode),!0;case"fingeringmode":return t.fingeringMode=be.parseEnum(r,e.FingeringMode),!0;case"elements":return t.elements=new Map,be.forEach(r,((e,i)=>{t.elements.set(be.parseEnum(i,n),e)})),!0;case"rhythmmode":return t.rhythmMode=be.parseEnum(r,e.TabRhythmMode),!0;case"rhythmheight":return t.rhythmHeight=r,!0;case"transpositionpitches":return t.transpositionPitches=r,!0;case"displaytranspositionpitches":return t.displayTranspositionPitches=r,!0;case"smallgracetabnotes":return t.smallGraceTabNotes=r,!0;case"extendbendarrowsontiednotes":return t.extendBendArrowsOnTiedNotes=r,!0;case"extendlineeffectstobeatend":return t.extendLineEffectsToBeatEnd=r,!0;case"slurheight":return t.slurHeight=r,!0}return!1}}class Ji{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("encoding",e.encoding),t.set("mergePartGroupsInMusicXml",e.mergePartGroupsInMusicXml),t.set("beatTextAsLyrics",e.beatTextAsLyrics),t}static setProperty(e,t,i){switch(t){case"encoding":return e.encoding=i,!0;case"mergepartgroupsinmusicxml":return e.mergePartGroupsInMusicXml=i,!0;case"beattextaslyrics":return e.beatTextAsLyrics=i,!0}return!1}}class en{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("noteWideLength",e.noteWideLength),t.set("noteWideAmplitude",e.noteWideAmplitude),t.set("noteSlightLength",e.noteSlightLength),t.set("noteSlightAmplitude",e.noteSlightAmplitude),t.set("beatWideLength",e.beatWideLength),t.set("beatWideAmplitude",e.beatWideAmplitude),t.set("beatSlightLength",e.beatSlightLength),t.set("beatSlightAmplitude",e.beatSlightAmplitude),t}static setProperty(e,t,i){switch(t){case"notewidelength":return e.noteWideLength=i,!0;case"notewideamplitude":return e.noteWideAmplitude=i,!0;case"noteslightlength":return e.noteSlightLength=i,!0;case"noteslightamplitude":return e.noteSlightAmplitude=i,!0;case"beatwidelength":return e.beatWideLength=i,!0;case"beatwideamplitude":return e.beatWideAmplitude=i,!0;case"beatslightlength":return e.beatSlightLength=i,!0;case"beatslightamplitude":return e.beatSlightAmplitude=i,!0}return!1}}class tn{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("simpleSlidePitchOffset",e.simpleSlidePitchOffset),t.set("simpleSlideDurationRatio",e.simpleSlideDurationRatio),t.set("shiftSlideDurationRatio",e.shiftSlideDurationRatio),t}static setProperty(e,t,i){switch(t){case"simpleslidepitchoffset":return e.simpleSlidePitchOffset=i,!0;case"simpleslidedurationratio":return e.simpleSlideDurationRatio=i,!0;case"shiftslidedurationratio":return e.shiftSlideDurationRatio=i,!0}return!1}}class nn{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("soundFont",e.soundFont),t.set("scrollElement",e.scrollElement),t.set("enablePlayer",e.enablePlayer),t.set("enableCursor",e.enableCursor),t.set("enableUserInteraction",e.enableUserInteraction),t.set("scrollOffsetX",e.scrollOffsetX),t.set("scrollOffsetY",e.scrollOffsetY),t.set("scrollMode",e.scrollMode),t.set("scrollSpeed",e.scrollSpeed),t.set("songBookBendDuration",e.songBookBendDuration),t.set("songBookDipDuration",e.songBookDipDuration),t.set("vibrato",en.toJson(e.vibrato)),t.set("slide",tn.toJson(e.slide)),t.set("playTripletFeel",e.playTripletFeel),t}static setProperty(t,i,n){switch(i){case"soundfont":return t.soundFont=n,!0;case"scrollelement":return t.scrollElement=n,!0;case"enableplayer":return t.enablePlayer=n,!0;case"enablecursor":return t.enableCursor=n,!0;case"enableuserinteraction":return t.enableUserInteraction=n,!0;case"scrolloffsetx":return t.scrollOffsetX=n,!0;case"scrolloffsety":return t.scrollOffsetY=n,!0;case"scrollmode":return t.scrollMode=be.parseEnum(n,e.ScrollMode),!0;case"scrollspeed":return t.scrollSpeed=n,!0;case"songbookbendduration":return t.songBookBendDuration=n,!0;case"songbookdipduration":return t.songBookDipDuration=n,!0;case"playtripletfeel":return t.playTripletFeel=n,!0}if(["vibrato"].indexOf(i)>=0)return en.fromJson(t.vibrato,n),!0;for(const e of["vibrato"])if(0===i.indexOf(e)&&en.setProperty(t.vibrato,i.substring(e.length),n))return!0;if(["slide"].indexOf(i)>=0)return tn.fromJson(t.slide,n),!0;for(const e of["slide"])if(0===i.indexOf(e)&&tn.setProperty(t.slide,i.substring(e.length),n))return!0;return!1}}class rn{static fromJson(e,t){t&&be.forEach(t,((t,i)=>this.setProperty(e,i.toLowerCase(),t)))}static toJson(e){if(!e)return null;const t=new Map;return t.set("core",Zi.toJson(e.core)),t.set("display",Xi.toJson(e.display)),t.set("notation",Qi.toJson(e.notation)),t.set("importer",Ji.toJson(e.importer)),t.set("player",nn.toJson(e.player)),t}static setProperty(e,t,i){if(["core",""].indexOf(t)>=0)return Zi.fromJson(e.core,i),!0;for(const n of["core",""])if(0===t.indexOf(n)&&Zi.setProperty(e.core,t.substring(n.length),i))return!0;if(["display",""].indexOf(t)>=0)return Xi.fromJson(e.display,i),!0;for(const n of["display",""])if(0===t.indexOf(n)&&Xi.setProperty(e.display,t.substring(n.length),i))return!0;if(["notation"].indexOf(t)>=0)return Qi.fromJson(e.notation,i),!0;for(const n of["notation"])if(0===t.indexOf(n)&&Qi.setProperty(e.notation,t.substring(n.length),i))return!0;if(["importer"].indexOf(t)>=0)return Ji.fromJson(e.importer,i),!0;for(const n of["importer"])if(0===t.indexOf(n)&&Ji.setProperty(e.importer,t.substring(n.length),i))return!0;if(["player"].indexOf(t)>=0)return nn.fromJson(e.player,i),!0;for(const n of["player"])if(0===t.indexOf(n)&&nn.setProperty(e.player,t.substring(n.length),i))return!0;return!1}}class sn{static jsonReplacer(e,t){if(t instanceof Map){if("fromEntries"in Object)return Object.fromEntries(t);{const e={};for(const[i,n]of t)e[i]=n;return e}}return ArrayBuffer.isView(t)?Array.apply([],[t]):t}static scoreToJson(e){let t=sn.scoreToJsObject(e);return JSON.stringify(t,sn.jsonReplacer)}static jsonToScore(e,t){return sn.jsObjectToScore(JSON.parse(e),t)}static scoreToJsObject(e){return qi.toJson(e)}static jsObjectToScore(e,t){let i=new $e;return qi.fromJson(i,e),i.finish(null!=t?t:new Mi),i}static settingsToJson(e){let t=sn.settingsToJsObject(e);return JSON.stringify(t,sn.jsonReplacer)}static jsonToSettings(e){return sn.jsObjectToSettings(JSON.parse(e))}static settingsToJsObject(e){return rn.toJson(e)}static jsObjectToSettings(e){let t=new Mi;return rn.fromJson(t,e),t}static jsObjectToMidiFile(e){let t=new Ci;t.division=e.division;let i=e.events;for(let e of i){let i=sn.jsObjectToMidiEvent(e);t.events.push(i)}return t}static jsObjectToMidiEvent(e){let t,i=e.track,n=e.tick,r=e.message;switch(e.type){case"SystemExclusiveEvent":t=new zt(i,n,0,0,e.data),t.message=r;break;case"MetaDataEvent":t=new xi(i,n,0,0,e.data),t.message=r;break;case"MetaNumberEvent":t=new ki(i,n,0,0,e.value),t.message=r;break;case"Midi20PerNotePitchBendEvent":t=new Oi(i,n,0,e.noteKey,e.pitch),t.message=r;break;default:t=new Ft(i,n,0,0,0),t.message=r}return t}static midiFileToJsObject(e){let t={};t.division=e.division;let i=[];t.events=i;for(let t of e.events)i.push(sn.midiEventToJsObject(t));return t}static midiEventToJsObject(e){let t={};return t.track=e.track,t.tick=e.tick,t.message=e.message,e instanceof zt?(t.type="SystemExclusiveEvent",t.data=e.data):e instanceof xi?(t.type="MetaDataEvent",t.data=e.data):e instanceof ki?(t.type="MetaNumberEvent",t.value=e.value):e instanceof Oi&&(t.type="Midi20PerNotePitchBendEvent",t.noteKey=e.noteKey,t.pitch=e.pitch),t}}class on{constructor(){this.ready=new yi,this.samplesPlayed=new _i,this.sampleRequest=new yi}get sampleRate(){return on.preferredSampleRate}open(){Oe.debug("AlphaSynth","Initializing webworker worker"),this._worker=na.globalThis,this._worker.addEventListener("message",this.handleMessage.bind(this)),this.ready.trigger()}handleMessage(e){let t=e.data;switch(t.cmd){case on.CmdOutputSampleRequest:this.sampleRequest.trigger();break;case on.CmdOutputSamplesPlayed:this.samplesPlayed.trigger(t.samples)}}addSamples(e){this._worker.postMessage({cmd:"alphaSynth.output.addSamples",samples:e})}play(){this._worker.postMessage({cmd:"alphaSynth.output.play"})}pause(){this._worker.postMessage({cmd:"alphaSynth.output.pause"})}resetSamples(){this._worker.postMessage({cmd:"alphaSynth.output.resetSamples"})}activate(){}}on.CmdOutputPrefix="alphaSynth.output.",on.CmdOutputAddSamples=on.CmdOutputPrefix+"addSamples",on.CmdOutputPlay=on.CmdOutputPrefix+"play",on.CmdOutputPause=on.CmdOutputPrefix+"pause",on.CmdOutputResetSamples=on.CmdOutputPrefix+"resetSamples",on.CmdOutputSampleRequest=on.CmdOutputPrefix+"sampleRequest",on.CmdOutputSamplesPlayed=on.CmdOutputPrefix+"samplesPlayed",on.preferredSampleRate=0;class an{constructor(e){this._main=e,this._main.addEventListener("message",this.handleMessage.bind(this)),this._player=new Si(new on),this._player.positionChanged.on(this.onPositionChanged.bind(this)),this._player.stateChanged.on(this.onPlayerStateChanged.bind(this)),this._player.finished.on(this.onFinished.bind(this)),this._player.soundFontLoaded.on(this.onSoundFontLoaded.bind(this)),this._player.soundFontLoadFailed.on(this.onSoundFontLoadFailed.bind(this)),this._player.soundFontLoadFailed.on(this.onSoundFontLoadFailed.bind(this)),this._player.midiLoaded.on(this.onMidiLoaded.bind(this)),this._player.midiLoadFailed.on(this.onMidiLoadFailed.bind(this)),this._player.readyForPlayback.on(this.onReadyForPlayback.bind(this)),this._player.midiEventsPlayed.on(this.onMidiEventsPlayed.bind(this)),this._main.postMessage({cmd:"alphaSynth.ready"})}static init(){let e=na.globalThis;e.addEventListener("message",(t=>{let i=t.data;switch(i.cmd){case"alphaSynth.initialize":on.preferredSampleRate=i.sampleRate,Oe.logLevel=i.logLevel,na.globalThis.alphaSynthWebWorker=new an(e)}}))}handleMessage(e){let t=e.data;switch(t.cmd){case"alphaSynth.setLogLevel":Oe.logLevel=t.value;break;case"alphaSynth.setMasterVolume":this._player.masterVolume=t.value;break;case"alphaSynth.setMetronomeVolume":this._player.metronomeVolume=t.value;break;case"alphaSynth.setPlaybackSpeed":this._player.playbackSpeed=t.value;break;case"alphaSynth.setTickPosition":this._player.tickPosition=t.value;break;case"alphaSynth.setTimePosition":this._player.timePosition=t.value;break;case"alphaSynth.setPlaybackRange":this._player.playbackRange=t.value;break;case"alphaSynth.setIsLooping":this._player.isLooping=t.value;break;case"alphaSynth.setCountInVolume":this._player.countInVolume=t.value;break;case"alphaSynth.setMidiEventsPlayedFilter":this._player.midiEventsPlayedFilter=t.value;break;case"alphaSynth.play":this._player.play();break;case"alphaSynth.pause":this._player.pause();break;case"alphaSynth.playPause":this._player.playPause();break;case"alphaSynth.stop":this._player.stop();break;case"alphaSynth.playOneTimeMidiFile":this._player.playOneTimeMidiFile(sn.jsObjectToMidiFile(t.midi));break;case"alphaSynth.loadSoundFontBytes":this._player.loadSoundFont(t.data,t.append);break;case"alphaSynth.resetSoundFonts":this._player.resetSoundFonts();break;case"alphaSynth.loadMidi":this._player.loadMidiFile(sn.jsObjectToMidiFile(t.midi));break;case"alphaSynth.setChannelMute":this._player.setChannelMute(t.channel,t.mute);break;case"alphaSynth.setChannelSolo":this._player.setChannelSolo(t.channel,t.solo);break;case"alphaSynth.setChannelVolume":this._player.setChannelVolume(t.channel,t.volume);break;case"alphaSynth.resetChannelStates":this._player.resetChannelStates()}}onPositionChanged(e){this._main.postMessage({cmd:"alphaSynth.positionChanged",currentTime:e.currentTime,endTime:e.endTime,currentTick:e.currentTick,endTick:e.endTick,isSeek:e.isSeek})}onPlayerStateChanged(e){this._main.postMessage({cmd:"alphaSynth.playerStateChanged",state:e.state,stopped:e.stopped})}onFinished(){this._main.postMessage({cmd:"alphaSynth.finished"})}onSoundFontLoaded(){this._main.postMessage({cmd:"alphaSynth.soundFontLoaded"})}onSoundFontLoadFailed(e){this._main.postMessage({cmd:"alphaSynth.soundFontLoadFailed",error:this.serializeException(e)})}serializeException(e){let t=JSON.parse(JSON.stringify(e));return e.message&&(t.message=e.message),e.stack&&(t.stack=e.stack),e.constructor&&e.constructor.name&&(t.type=e.constructor.name),t}onMidiLoaded(e){this._main.postMessage({cmd:"alphaSynth.midiLoaded",currentTime:e.currentTime,endTime:e.endTime,currentTick:e.currentTick,endTick:e.endTick,isSeek:e.isSeek})}onMidiLoadFailed(e){this._main.postMessage({cmd:"alphaSynth.midiLoaded",error:this.serializeException(e)})}onReadyForPlayback(){this._main.postMessage({cmd:"alphaSynth.readyForPlayback"})}onMidiEventsPlayed(e){this._main.postMessage({cmd:"alphaSynth.midiEventsPlayed",events:e.events.map(sn.midiEventToJsObject)})}}class ln{static generateFontLookup(e){if(!ln.FontSizeLookupTables.has(e))if(na.isRunningInWorker)ln.FontSizeLookupTables.set(e,new Uint8Array([8]));else{let t=document.createElement("canvas").getContext("2d");t.font=`11px ${e}`;let i=[];for(let e=32;e<255;e++){let n=String.fromCharCode(e);i.push(t.measureText(n).width)}let n=new Uint8Array(i);ln.FontSizeLookupTables.set(e,n)}}static measureString(e,t,i,n){let s,o=11;ln.FontSizeLookupTables.has(t)||ln.generateFontLookup(t),s=ln.FontSizeLookupTables.get(t);let a=1;0!=(n&r.Italic)&&(a*=1.2),0!=(n&r.Bold)&&(a*=1.2);let l=0;for(let t=0;t<e.length;t++){let n=Math.min(s.length-1,e.charCodeAt(t)-32);n>=0&&(l+=s[n]*i/o)}return l*a}}ln.Georgia=new Uint8Array([3,4,5,7,7,9,8,2,4,4,5,7,3,4,3,5,7,5,6,6,6,6,6,6,7,6,3,3,7,7,7,5,10,7,7,7,8,7,7,8,9,4,6,8,7,10,8,8,7,8,8,6,7,8,7,11,8,7,7,4,5,4,7,7,6,6,6,5,6,5,4,6,6,3,3,6,3,10,6,6,6,6,5,5,4,6,5,8,6,5,5,5,4,5,7,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,3,4,6,7,6,7,4,6,6,10,6,6,7,0,10,7,5,7,6,6,6,6,6,3,6,6,6,6,12,12,12,5,7,7,7,7,7,7,11,7,7,7,7,7,4,4,4,4,8,8,8,8,8,8,8,7,8,8,8,8,8,7,7,6,6,6,6,6,6,6,8,5,5,5,5,5,3,3,3,3,6,6,6,6,6,6,6,7,6,6,6,6,6,5,6]),ln.Arial=new Uint8Array([3,3,4,6,6,10,7,2,4,4,4,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,6,11,7,7,8,8,7,7,9,8,3,6,7,6,9,8,9,7,9,8,7,7,8,7,10,7,7,7,3,3,3,5,6,4,6,6,6,6,6,3,6,6,2,2,6,2,9,6,6,6,6,4,6,3,6,6,8,6,6,6,4,3,4,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,6,6,6,6,3,6,4,8,4,6,6,0,8,6,4,6,4,4,4,6,6,4,4,4,4,6,9,9,9,7,7,7,7,7,7,7,11,8,7,7,7,7,3,3,3,3,8,8,9,9,9,9,9,6,9,8,8,8,8,7,7,7,6,6,6,6,6,6,10,6,6,6,6,6,3,3,3,3,6,6,6,6,6,6,6,6,7,6,6,6,6,6,6]),ln.FontSizeLookupTables=new Map([["Arial",ln.Arial],["'Arial'",ln.Arial],['"Arial"',ln.Arial],["Georgia",ln.Georgia],["'Georgia'",ln.Georgia],['"Georgia"',ln.Georgia]]),ln.ControlChars=32;class cn{constructor(){this.width=0,this.height=0,this.totalWidth=0,this.totalHeight=0,this.firstMasterBarIndex=0,this.lastMasterBarIndex=0,this.renderResult=null}}class hn{constructor(){this.beats=[]}addBeat(e){e.barBounds=this,this.beats.push(e),this.masterBarBounds.addBeat(e)}findBeatAtPos(e){let t=null;for(let i of this.beats)if(!t||i.realBounds.x<e)t=i;else if(i.realBounds.x>e)break;return t}}class un{constructor(){this.notes=null}addNote(e){this.notes||(this.notes=[]),e.beatBounds=this,this.notes.push(e)}findNoteAtPos(e,t){if(!this.notes)return null;for(let i of this.notes){let n=i.noteHeadBounds.y+i.noteHeadBounds.h,r=i.noteHeadBounds.x+i.noteHeadBounds.w;if(i.noteHeadBounds.x>=e&&i.noteHeadBounds.y>=t&&e<=r&&t<=n)return i.note}return null}}class dn{constructor(){this.index=0,this.isFirstOfLine=!1,this.bars=[]}addBar(e){e.masterBarBounds=this,this.bars.push(e)}findBeatAtPos(e,t){let i=null;for(let t of this.bars){let n=t.findBeatAtPos(e);n&&(!i||i.realBounds.x<n.realBounds.x)&&(i=n)}return i?i.beat:null}finish(){this.bars.sort(((e,t)=>e.realBounds.y<t.realBounds.y?-1:e.realBounds.y>t.realBounds.y?1:e.realBounds.x<t.realBounds.x?-1:e.realBounds.x>t.realBounds.x?1:0))}addBeat(e){this.staveGroupBounds.boundsLookup.addBeat(e)}}class fn{}class pn{constructor(){this.index=0,this.bars=[]}finish(){for(let e of this.bars)e.finish()}addBar(e){this.boundsLookup.addMasterBar(e),e.staveGroupBounds=this,this.bars.push(e)}findBarAtPos(e){let t=null;for(let i of this.bars)if(!t||i.realBounds.x<e)t=i;else if(e>i.realBounds.x+i.realBounds.w)break;return t}}class gn{constructor(){this._beatLookup=new Map,this._masterBarLookup=new Map,this._currentStaveGroup=null,this.staveGroups=[],this.isFinished=!1}toJson(){let e={},t=[];e.staveGroups=t;for(let e of this.staveGroups){let i={};i.visualBounds=this.boundsToJson(e.visualBounds),i.realBounds=this.boundsToJson(e.realBounds),i.bars=[];for(let t of e.bars){let e={};e.lineAlignedBounds=this.boundsToJson(t.lineAlignedBounds),e.visualBounds=this.boundsToJson(t.visualBounds),e.realBounds=this.boundsToJson(t.realBounds),e.index=t.index,e.bars=[];for(let i of t.bars){let t={};t.visualBounds=this.boundsToJson(i.visualBounds),t.realBounds=this.boundsToJson(i.realBounds),t.beats=[];for(let e of i.beats){let i={};i.visualBounds=this.boundsToJson(e.visualBounds),i.realBounds=this.boundsToJson(e.realBounds);let n=i;if(n.beatIndex=e.beat.index,n.voiceIndex=e.beat.voice.index,n.barIndex=e.beat.voice.bar.index,n.staffIndex=e.beat.voice.bar.staff.index,n.trackIndex=e.beat.voice.bar.staff.track.index,e.notes){let t=i.notes=[];for(let i of e.notes){let e={};e.index=i.note.index,e.noteHeadBounds=this.boundsToJson(i.noteHeadBounds),t.push(e)}}t.beats.push(i)}e.bars.push(t)}i.bars.push(e)}t.push(i)}return e}static fromJson(e,t){let i=new gn,n=e.staveGroups;for(let e of n){let n=new pn;n.visualBounds=e.visualBounds,n.realBounds=e.realBounds,i.addStaveGroup(n);for(let i of e.bars){let e=new dn;e.index=i.index,e.isFirstOfLine=i.isFirstOfLine,e.lineAlignedBounds=i.lineAlignedBounds,e.visualBounds=i.visualBounds,e.realBounds=i.realBounds,n.addBar(e);for(let n of i.bars){let i=new hn;i.visualBounds=n.visualBounds,i.realBounds=n.realBounds,e.addBar(i);for(let e of n.beats){let n=new un;n.visualBounds=e.visualBounds,n.realBounds=e.realBounds;let r=e;if(n.beat=t.tracks[r.trackIndex].staves[r.staffIndex].bars[r.barIndex].voices[r.voiceIndex].beats[r.beatIndex],e.notes){n.notes=[];for(let t of e.notes){let e=new fn,i=t;e.note=n.beat.notes[i.index],e.noteHeadBounds=t.noteHeadBounds,n.addNote(e)}}i.addBeat(n)}}}}return i}boundsToJson(e){let t={};return t.x=e.x,t.y=e.y,t.w=e.w,t.h=e.h,t}finish(){for(let e of this.staveGroups)e.finish();this.isFinished=!0}addNote(e){this.findBeat(e.note.beat).addNote(e)}addStaveGroup(e){e.index=this.staveGroups.length,e.boundsLookup=this,this.staveGroups.push(e),this._currentStaveGroup=e}addMasterBar(e){e.staveGroupBounds?this._masterBarLookup.set(e.index,e):(e.staveGroupBounds=this._currentStaveGroup,this._masterBarLookup.set(e.index,e),this._currentStaveGroup.addBar(e))}addBeat(e){this._beatLookup.set(e.beat.id,e)}findMasterBarByIndex(e){return this._masterBarLookup.has(e)?this._masterBarLookup.get(e):null}findMasterBar(e){let t=e.index;return this._masterBarLookup.has(t)?this._masterBarLookup.get(t):null}findBeat(e){let t=e.id;return this._beatLookup.has(t)?this._beatLookup.get(t):null}getBeatAtPos(e,t){let i=0,n=this.staveGroups.length-1,r=-1;for(;i<=n;){let e=(n+i)/2|0,s=this.staveGroups[e];if(t>=s.realBounds.y&&t<=s.realBounds.y+s.realBounds.h){r=e;break}t<s.realBounds.y?n=e-1:i=e+1}if(-1===r)return null;let s=this.staveGroups[r].findBarAtPos(e);return s?s.findBeatAtPos(e,t):null}getNoteAtPos(e,t,i){let n=this.findBeat(e);return n?n.findNoteAtPos(t,i):null}}class mn{constructor(t){this._currentLayoutMode=e.LayoutMode.Page,this._currentRenderEngine=null,this._renderedTracks=null,this.canvas=null,this.score=null,this.tracks=null,this.layout=null,this.boundsLookup=null,this.width=0,this.preRender=new _i,this.renderFinished=new _i,this.partialRenderFinished=new _i,this.postRenderFinished=new yi,this.error=new _i,this.settings=t,this.recreateCanvas(),this.recreateLayout()}destroy(){this.score=null,this.canvas=null,this.layout=null,this.boundsLookup=null,this.tracks=null}recreateCanvas(){return this._currentRenderEngine!==this.settings.core.engine&&(this.canvas=na.getRenderEngineFactory(this.settings).createCanvas(),this._currentRenderEngine=this.settings.core.engine,!0)}recreateLayout(){return!(this.layout&&this._currentLayoutMode===this.settings.display.layoutMode||(this.layout=na.getLayoutEngineFactory(this.settings).createLayout(this),this._currentLayoutMode=this.settings.display.layoutMode,0))}renderScore(e,t){try{let i;if(this.score=e,t){i=[];for(let n of t)n>=0&&n<e.tracks.length&&i.push(e.tracks[n])}else i=e.tracks.slice(0);0===i.length&&e.tracks.length>0&&i.push(e.tracks[0]),this.tracks=i,this.render()}catch(e){this.error.trigger(e)}}renderTracks(e){0===e.length?this.score=null:this.score=e[0].score,this.tracks=e,this.render()}updateSettings(e){this.settings=e}render(){if(0!==this.width){if(this.boundsLookup=new gn,this.tracks&&0!==this.tracks.length){this.recreateCanvas(),this.canvas.lineWidth=this.settings.display.scale,this.canvas.settings=this.settings,Oe.debug("Rendering","Rendering "+this.tracks.length+" tracks");for(let e=0;e<this.tracks.length;e++){let t=this.tracks[e];Oe.debug("Rendering","Track "+e+": "+t.name)}this.preRender.trigger(!1),this.recreateLayout(),this.layoutAndRender(),this._renderedTracks=this.tracks,Oe.debug("Rendering","Rendering finished")}}else Oe.warning("Rendering","AlphaTab skipped rendering because of width=0 (element invisible)",null)}resizeRender(){this.recreateLayout()||this.recreateCanvas()||this._renderedTracks!==this.tracks||!this.tracks?(Oe.debug("Rendering","Starting full rerendering due to layout or canvas change",null),this.render()):this.layout.supportsResize?(Oe.debug("Rendering","Starting optimized rerendering for resize"),this.boundsLookup=new gn,this.preRender.trigger(!0),this.canvas.settings=this.settings,this.layout.resize(),this.layout.renderAnnotation(),this.onRenderFinished(),this.postRenderFinished.trigger()):Oe.warning("Rendering","Current layout does not support dynamic resizing, nothing was done",null),Oe.debug("Rendering","Resize finished")}layoutAndRender(){Oe.debug("Rendering","Rendering at scale "+this.settings.display.scale+" with layout "+this.layout.name,null),this.layout.layoutAndRender(),this.layout.renderAnnotation(),this.onRenderFinished(),this.postRenderFinished.trigger()}onRenderFinished(){const e=new cn;e.totalHeight=this.layout.height,e.totalWidth=this.layout.width,e.renderResult=this.canvas.onRenderFinished(),this.renderFinished.trigger(e)}}class bn{constructor(e){this._main=e,this._main.addEventListener("message",this.handleMessage.bind(this),!1)}static init(){na.globalThis.alphaTabWebWorker=new bn(na.globalThis)}handleMessage(e){let t=e.data;switch(t?t.cmd:""){case"alphaTab.initialize":let e=sn.jsObjectToSettings(t.settings);Oe.logLevel=e.core.logLevel,this._renderer=new mn(e),this._renderer.partialRenderFinished.on((e=>{this._main.postMessage({cmd:"alphaTab.partialRenderFinished",result:e})})),this._renderer.renderFinished.on((e=>{this._main.postMessage({cmd:"alphaTab.renderFinished",result:e})})),this._renderer.postRenderFinished.on((()=>{var e,t;this._main.postMessage({cmd:"alphaTab.postRenderFinished",boundsLookup:null!==(t=null===(e=this._renderer.boundsLookup)||void 0===e?void 0:e.toJson())&&void 0!==t?t:null})})),this._renderer.preRender.on((e=>{this._main.postMessage({cmd:"alphaTab.preRender",resize:e})})),this._renderer.error.on(this.error.bind(this));break;case"alphaTab.invalidate":this._renderer.render();break;case"alphaTab.resizeRender":this._renderer.resizeRender();break;case"alphaTab.setWidth":this._renderer.width=t.width;break;case"alphaTab.renderScore":this.updateFontSizes(t.fontSizes);let i=sn.jsObjectToScore(t.score,this._renderer.settings);this.renderMultiple(i,t.trackIndexes);break;case"alphaTab.updateSettings":this.updateSettings(t.settings)}}updateFontSizes(e){if(e){ln.FontSizeLookupTables||(ln.FontSizeLookupTables=new Map);for(let t in e)ln.FontSizeLookupTables.set(t,e[t])}}updateSettings(e){rn.fromJson(this._renderer.settings,e)}renderMultiple(e,t){try{this._renderer.renderScore(e,t)}catch(e){this.error(e)}}error(e){Oe.error("Worker","An unexpected error occurred in worker",e),this._main.postMessage({cmd:"alphaTab.error",error:e})}}class vn{constructor(){this._canvas=null,this._color=new me(0,0,0,255),this._font=new _e("Arial",10,r.Plain),this._lineWidth=0;let e=document.createElement("span");e.classList.add("at"),document.body.appendChild(e);let t=window.getComputedStyle(e),i=t.fontFamily;(i.startsWith('"')||i.startsWith("'"))&&(i=i.substr(1,i.length-2)),this._musicFont=new _e(i,parseFloat(t.fontSize),r.Plain),this._measureCanvas=document.createElement("canvas"),this._measureCanvas.width=10,this._measureCanvas.height=10,this._measureCanvas.style.width="10px",this._measureCanvas.style.height="10px",this._measureContext=this._measureCanvas.getContext("2d"),this._measureContext.textBaseline="hanging"}onRenderFinished(){return null}beginRender(e,t){this._canvas=document.createElement("canvas"),this._canvas.width=e*na.HighDpiFactor|0,this._canvas.height=t*na.HighDpiFactor|0,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px",this._context=this._canvas.getContext("2d"),this._context.textBaseline="hanging",this._context.scale(na.HighDpiFactor,na.HighDpiFactor),this._context.lineWidth=this._lineWidth}endRender(){let e=this._canvas;return this._canvas=null,e}get color(){return this._color}set color(e){this._color.rgba!==e.rgba&&(this._color=e,this._context.strokeStyle=e.rgba,this._context.fillStyle=e.rgba)}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this._context&&(this._context.lineWidth=e)}fillRect(e,t,i,n){i>0&&this._context.fillRect(0|e,0|t,i,n)}strokeRect(e,t,i,n){this._context.strokeRect(0|e,0|t,i,n)}beginPath(){this._context.beginPath()}closePath(){this._context.closePath()}moveTo(e,t){this._context.moveTo(e,t)}lineTo(e,t){this._context.lineTo(e,t)}quadraticCurveTo(e,t,i,n){this._context.quadraticCurveTo(e,t,i,n)}bezierCurveTo(e,t,i,n,r,s){this._context.bezierCurveTo(e,t,i,n,r,s)}fillCircle(e,t,i){this._context.beginPath(),this._context.arc(e,t,i,0,2*Math.PI,!0),this.fill()}strokeCircle(e,t,i){this._context.beginPath(),this._context.arc(e,t,i,0,2*Math.PI,!0),this.stroke()}fill(){this._context.fill()}stroke(){this._context.stroke()}get font(){return this._font}set font(e){this._font=e,this._context&&(this._context.font=e.toCssString(this.settings.display.scale)),this._measureContext.font=e.toCssString(this.settings.display.scale)}get textAlign(){switch(this._context.textAlign){case"left":return x.Left;case"center":return x.Center;case"right":return x.Right;default:return x.Left}}set textAlign(e){switch(e){case x.Left:this._context.textAlign="left";break;case x.Center:this._context.textAlign="center";break;case x.Right:this._context.textAlign="right"}}get textBaseline(){switch(this._context.textBaseline){case"hanging":return k.Top;case"middle":return k.Middle;case"bottom":return k.Bottom;default:return k.Top}}set textBaseline(e){switch(e){case k.Top:this._context.textBaseline="hanging";break;case k.Middle:this._context.textBaseline="middle";break;case k.Bottom:this._context.textBaseline="bottom"}}beginGroup(e){}endGroup(){}fillText(e,t,i){this._context.fillText(e,t,i)}measureText(e){return this._measureContext.measureText(e).width}fillMusicFontSymbol(e,t,i,n,r=!1){n!==C.None&&this.fillMusicFontSymbolText(e,t,i,String.fromCharCode(n),r)}fillMusicFontSymbols(e,t,i,n,r=!1){let s="";for(let e of n)e!==C.None&&(s+=String.fromCharCode(e));this.fillMusicFontSymbolText(e,t,i,s,r)}fillMusicFontSymbolText(e,t,i,n,r=!1){let s=this._context.textAlign,o=this._context.textBaseline,a=this._context.font;this._context.font=this._musicFont.toCssString(i),this._context.textBaseline="middle",this._context.textAlign=r?"center":"left",this._context.fillText(n,e,t),this._context.textBaseline=o,this._context.font=a,this._context.textAlign=s}beginRotate(e,t,i){this._context.save(),this._context.translate(e,t),this._context.rotate(i*Math.PI/180)}endRotate(){this._context.restore()}}class yn{constructor(e){this._midiFile=e}addTimeSignature(e,t,i){let n=0;for(;(i>>=1)>0;)n++;const r=new xi(0,e,255,V.TimeSignature,new Uint8Array([255&t,255&n,48,8]));this._midiFile.addEvent(r)}addRest(e,t,i){const n=new zt(e,t,z.SystemExclusive,zt.AlphaTabManufacturerId,new Uint8Array([H.Rest]));this._midiFile.addEvent(n)}addNote(e,t,i,n,r,s){const o=Te.dynamicToVelocity(r),a=new Ft(e,t,this.makeCommand(W.NoteOn,s),yn.fixValue(n),yn.fixValue(o));this._midiFile.addEvent(a);const l=new Ft(e,t+i,this.makeCommand(W.NoteOff,s),yn.fixValue(n),yn.fixValue(o));this._midiFile.addEvent(l)}makeCommand(e,t){return 240&e|15&t}static fixValue(e){return e>127?127:e<0?0:e}addControlChange(e,t,i,n,r){const s=new Ft(e,t,this.makeCommand(W.Controller,i),yn.fixValue(n),yn.fixValue(r));this._midiFile.addEvent(s)}addProgramChange(e,t,i,n){const r=new Ft(e,t,this.makeCommand(W.ProgramChange,i),yn.fixValue(n),0);this._midiFile.addEvent(r)}addTempo(e,t){const i=6e7/t|0,n=new ki(0,e,255,V.Tempo,i);this._midiFile.addEvent(n)}addBend(e,t,i,n){n=n>=jt.MaxPitchWheel?jt.MaxPitchWheel:Math.floor(n);const r=new Ft(e,t,this.makeCommand(W.PitchBend,i),127&n,n>>7&127);this._midiFile.addEvent(r)}addNoteBend(e,t,i,n,r){r=(r=r>=jt.MaxPitchWheel?jt.MaxPitchWheel:Math.floor(r))*jt.MaxPitchWheel20/jt.MaxPitchWheel;const s=new Oi(e,t,this.makeCommand(W.PerNotePitchBend,i),n,r);this._midiFile.addEvent(s)}finishTrack(e,t){const i=new xi(e,t,255,V.EndOfTrack,new Uint8Array(0));this._midiFile.addEvent(i)}}class _n{constructor(){this._highlightedBeats=new Map,this.start=0,this.end=0,this.isEmptyBar=!1,this.beatsToHighlight=[]}highlightBeat(e){this._highlightedBeats.has(e.id)||(this._highlightedBeats.set(e.id,!0),this.beatsToHighlight.push(e))}}!function(e){e[e.BankSelectCoarse=0]="BankSelectCoarse",e[e.ModulationCoarse=1]="ModulationCoarse",e[e.DataEntryCoarse=6]="DataEntryCoarse",e[e.VolumeCoarse=7]="VolumeCoarse",e[e.PanCoarse=10]="PanCoarse",e[e.ExpressionControllerCoarse=11]="ExpressionControllerCoarse",e[e.ModulationFine=33]="ModulationFine",e[e.DataEntryFine=38]="DataEntryFine",e[e.VolumeFine=39]="VolumeFine",e[e.PanFine=42]="PanFine",e[e.ExpressionControllerFine=43]="ExpressionControllerFine",e[e.HoldPedal=64]="HoldPedal",e[e.LegatoPedal=68]="LegatoPedal",e[e.NonRegisteredParameterFine=98]="NonRegisteredParameterFine",e[e.NonRegisteredParameterCourse=99]="NonRegisteredParameterCourse",e[e.RegisteredParameterFine=100]="RegisteredParameterFine",e[e.RegisteredParameterCourse=101]="RegisteredParameterCourse",e[e.ResetControllers=121]="ResetControllers",e[e.AllNotesOff=123]="AllNotesOff"}(q||(q={}));class wn{constructor(e){this._repeatStartIndex=0,this._repeatNumber=0,this._repeatOpen=!1,this.shouldPlay=!0,this.index=0,this.currentTick=0,this._score=e}get finished(){return this.index>=this._score.masterBars.length}processCurrent(){const e=this._score.masterBars[this.index],t=e.alternateEndings;e.repeatGroup.isClosed||e.repeatGroup.openings[e.repeatGroup.openings.length-1]!==e||(this._repeatNumber=0,this._repeatOpen=!1),!e.isRepeatStart&&0!==e.index||0!==this._repeatNumber?e.isRepeatStart&&(this.shouldPlay=!0):(this._repeatStartIndex=this.index,this._repeatOpen=!0),this._repeatOpen&&t>0&&(0==(t&1<<this._repeatNumber)?this.shouldPlay=!1:this.shouldPlay=!0),this.shouldPlay&&(this.currentTick+=e.calculateDuration())}moveNext(){const e=this._score.masterBars[this.index].repeatCount-1;this._repeatOpen&&e>0?this._repeatNumber<e?(this.index=this._repeatStartIndex,this._repeatNumber++):(this._repeatNumber=0,this._repeatOpen=!1,this.shouldPlay=!0,this.index++):this.index++}}class Sn{constructor(){this.start=0,this.end=0,this.tempo=0,this.beats=[],this.nextMasterBar=null}finish(){this.beats.sort(((e,t)=>e.start-t.start))}addBeat(e){this.beats.push(e)}}class Cn{constructor(){this.nextBeat=null,this.duration=0}}class xn{constructor(){this._currentMasterBar=null,this.masterBarLookup=new Map,this.masterBars=[]}finish(){let e=null,t=[];for(let i of this.masterBars){i.finish(),e&&(e.nextMasterBar=i);for(const e of i.beats){const i=[];for(let n of t)n.end>e.start&&(i.push(n),e.highlightBeat(n.beat),e.start<=n.start&&n.highlightBeat(e.beat));i.push(e),t=i}e=i}}findBeat(e,t){const i=this.findMasterBar(t);if(!i)return null;const n=new Map;for(const t of e)n.set(t.index,!0);let r=null,s=0,o=i.beats;for(let e=0;e<o.length;e++){let i=o[e];if(n.has(i.beat.voice.bar.staff.track.index))if(i.start<=t&&t<i.end)(!r||r.start<i.start)&&(r=o[e],s=e);else if(i.end>t)break}if(!r)return null;let a=null;for(let e=s+1;e<o.length;e++){const t=o[e];if(t.start>r.start&&n.has(t.beat.voice.bar.staff.track.index)){a=t;break}}if(!a&&i.nextMasterBar){o=i.nextMasterBar.beats;for(let e=0;e<o.length;e++){const t=o[e];if(n.has(t.beat.voice.bar.staff.track.index)){a=t;break}}}const l=new Cn;return l.currentBeat=r.beat,l.nextBeat=a?a.beat:null,l.duration=a?Te.ticksToMillis(a.start-r.start,i.tempo):Te.ticksToMillis(r.end-r.start,i.tempo),l.beatsToHighlight=r.beatsToHighlight,l}findMasterBar(e){const t=this.masterBars;let i=0,n=t.length-1;for(;i<=n;){const r=(n+i)/2|0,s=t[r];if(e>=s.start&&e<s.end)return s;e<s.start?n=r-1:i=r+1}return null}getMasterBar(e){if(!this.masterBarLookup.has(e.index)){const t=new Sn;return t.masterBar=e,t}return this.masterBarLookup.get(e.index)}getMasterBarStart(e){return this.masterBarLookup.has(e.index)?this.masterBarLookup.get(e.index).start:0}addMasterBar(e){this.masterBars.push(e),this._currentMasterBar=e,this.masterBarLookup.has(e.masterBar.index)||this.masterBarLookup.set(e.masterBar.index,e)}addBeat(e){var t;null===(t=this._currentMasterBar)||void 0===t||t.addBeat(e)}}class kn{constructor(){this.noteOnly=0,this.untilTieOrSlideEnd=0,this.letRingEnd=0}}class En{constructor(){this.firstBeatDuration=0,this.secondBeatStartOffset=0,this.secondBeatDuration=0}}class Tn{constructor(e,t,i){this._currentTempo=0,this._currentBarRepeatLookup=null,this._programsPerChannel=new Map,this.tickLookup=new xn,this._currentTripletFeel=null,this._score=e,this._settings=t||new Mi,this._currentTempo=this._score.tempo,this._handler=i}generate(){for(const e of this._score.tracks)this.generateTrack(e);Oe.debug("Midi","Begin midi generation");const e=new wn(this._score);let t=null;for(;!e.finished;){const i=e.index,n=this._score.masterBars[i],r=e.currentTick;if(e.processCurrent(),e.shouldPlay){this.generateMasterBar(n,t,r);for(const e of this._score.tracks)for(const t of e.staves)i<t.bars.length&&this.generateBar(t.bars[i],r)}e.moveNext(),t=n}for(const t of this._score.tracks)this._handler.finishTrack(t.index,e.currentTick);this.tickLookup.finish(),Oe.debug("Midi","Midi generation done")}generateTrack(e){this.generateChannel(e,e.playbackInfo.primaryChannel,e.playbackInfo),e.playbackInfo.primaryChannel!==e.playbackInfo.secondaryChannel&&this.generateChannel(e,e.playbackInfo.secondaryChannel,e.playbackInfo)}addProgramChange(e,t,i,n){this._programsPerChannel.has(i)&&this._programsPerChannel.get(i)===n||(this._handler.addProgramChange(e.index,t,i,n),this._programsPerChannel.set(i,n))}generateChannel(e,t,i){let n=Tn.toChannelShort(i.volume),r=Tn.toChannelShort(i.balance);this._handler.addControlChange(e.index,0,t,q.VolumeCoarse,n),this._handler.addControlChange(e.index,0,t,q.PanCoarse,r),this._handler.addControlChange(e.index,0,t,q.ExpressionControllerCoarse,127),this._handler.addControlChange(e.index,0,t,q.RegisteredParameterFine,0),this._handler.addControlChange(e.index,0,t,q.RegisteredParameterCourse,0),this._handler.addControlChange(e.index,0,t,q.DataEntryFine,0),this._handler.addControlChange(e.index,0,t,q.DataEntryCoarse,Tn.PitchBendRangeInSemitones),this.addProgramChange(e,0,t,i.program)}static toChannelShort(e){const t=Math.max(-32768,Math.min(32767,8*e-1));return Math.max(t,-1)+1}generateMasterBar(e,t,i){t&&t.timeSignatureDenominator===e.timeSignatureDenominator&&t.timeSignatureNumerator===e.timeSignatureNumerator||this._handler.addTimeSignature(i,e.timeSignatureNumerator,e.timeSignatureDenominator),t?e.tempoAutomation&&(this._handler.addTempo(i,e.tempoAutomation.value),this._currentTempo=e.tempoAutomation.value):(this._handler.addTempo(i,e.score.tempo),this._currentTempo=e.score.tempo);const n=new Sn;n.masterBar=e,n.start=i,n.tempo=this._currentTempo,n.end=n.start+e.calculateDuration(),this.tickLookup.addMasterBar(n)}generateBar(e,t){let i=this.getPlaybackBar(e);this._currentBarRepeatLookup=null;for(const n of i.voices)this.generateVoice(n,t,e)}getPlaybackBar(e){switch(e.simileMark){case c.Simple:e.previousBar&&(e=this.getPlaybackBar(e.previousBar));break;case c.FirstOfDouble:case c.SecondOfDouble:e.previousBar&&e.previousBar.previousBar&&(e=this.getPlaybackBar(e.previousBar.previousBar))}return e}generateVoice(e,t,i){if(!e.isEmpty||e.bar.isEmpty&&0===e.index)for(const n of e.beats)this.generateBeat(n,t,i)}generateBeat(e,t,i){let n=e.playbackStart,r=e.playbackDuration;e.voice.bar.isEmpty?r=e.voice.bar.masterBar.calculateDuration():e.voice.bar.masterBar.tripletFeel!==O.NoTripletFeel&&this._settings.player.playTripletFeel&&(this._currentTripletFeel?(n-=this._currentTripletFeel.secondBeatStartOffset,r=this._currentTripletFeel.secondBeatDuration,this._currentTripletFeel=null):(this._currentTripletFeel=Tn.calculateTripletFeelInfo(n,r,e),this._currentTripletFeel&&(r=this._currentTripletFeel.firstBeatDuration)));const s=new _n;s.start=t+n;const o=e.nextBeat?e.nextBeat.absolutePlaybackStart-e.absolutePlaybackStart:r;s.end=t+n,s.highlightBeat(e),s.end+=o>r?o:r,i===e.voice.bar?(s.beat=e,this.tickLookup.addBeat(s)):(s.isEmptyBar=!0,s.beat=i.voices[0].beats[0],this._currentBarRepeatLookup?this._currentBarRepeatLookup.end=s.end:(this._currentBarRepeatLookup=s,this.tickLookup.addBeat(this._currentBarRepeatLookup)));const a=e.voice.bar.staff.track;for(const i of e.automations)this.generateAutomation(e,i,t);if(e.isRest)this._handler.addRest(a.index,t+n,a.playbackInfo.primaryChannel);else{let i=this.getBrushInfo(e);for(const s of e.notes)this.generateNote(s,t+n,r,i)}if(e.vibrato!==w.None){let i=240,r=3;switch(e.vibrato){case w.Slight:i=this._settings.player.vibrato.beatSlightLength,r=this._settings.player.vibrato.beatSlightAmplitude;break;case w.Wide:i=this._settings.player.vibrato.beatWideLength,r=this._settings.player.vibrato.beatWideAmplitude}this.generateVibratorWithParams(t+n,e.playbackDuration,i,r,((t,i)=>{this._handler.addBend(e.voice.bar.staff.track.index,t,a.playbackInfo.secondaryChannel,i)}))}}static calculateTripletFeelInfo(e,t,i){let n;switch(i.voice.bar.masterBar.tripletFeel){case O.Triplet8th:case O.Dotted8th:case O.Scottish8th:n=p.Eighth;break;case O.Triplet16th:case O.Dotted16th:case O.Scottish16th:n=p.Sixteenth;break;default:return null}const r=Te.toTicks(n);if(t!==r)return null;if(e%r!=0)return null;if(!i.nextBeat||i.nextBeat.voice!==i.voice||i.playbackDuration!==r)return null;const s=new En;switch(i.voice.bar.masterBar.tripletFeel){case O.Triplet8th:s.firstBeatDuration=Te.applyTuplet(Te.toTicks(p.Quarter),3,2),s.secondBeatDuration=Te.applyTuplet(Te.toTicks(p.Eighth),3,2);break;case O.Dotted8th:s.firstBeatDuration=Te.applyDot(Te.toTicks(p.Eighth),!1),s.secondBeatDuration=Te.toTicks(p.Sixteenth);break;case O.Scottish8th:s.firstBeatDuration=Te.toTicks(p.Sixteenth),s.secondBeatDuration=Te.applyDot(Te.toTicks(p.Eighth),!1);break;case O.Triplet16th:s.firstBeatDuration=Te.applyTuplet(Te.toTicks(p.Eighth),3,2),s.secondBeatDuration=Te.applyTuplet(Te.toTicks(p.Sixteenth),3,2);break;case O.Dotted16th:s.firstBeatDuration=Te.applyDot(Te.toTicks(p.Sixteenth),!1),s.secondBeatDuration=Te.toTicks(p.ThirtySecond);break;case O.Scottish16th:s.firstBeatDuration=Te.toTicks(p.ThirtySecond),s.secondBeatDuration=Te.applyDot(Te.toTicks(p.Sixteenth),!1)}return s.secondBeatStartOffset=t-s.firstBeatDuration,s}generateNote(e,t,i,n){const r=e.beat.voice.bar.staff.track,s=e.beat.voice.bar.staff;let o=e.realValue;if(e.isPercussion){const t=Ie.getArticulation(e);t&&(o=t.outputMidiNumber)}const a=e.isStringed&&e.string<=n.length?n[e.string-1]:0,l=t+a,c=this.getNoteDuration(e,i);c.untilTieOrSlideEnd-=a,c.noteOnly-=a,c.letRingEnd-=a;const h=Tn.getDynamicValue(e),u=e.hasBend||e.beat.hasWhammyBar||e.beat.vibrato!==w.None?r.playbackInfo.secondaryChannel:r.playbackInfo.primaryChannel;let d=0;if(d=e.hasBend?Tn.getPitchWheel(e.bendPoints[0].value):e.beat.hasWhammyBar?Tn.getPitchWheel(e.beat.whammyBarPoints[0].value):e.isTieDestination||e.slideOrigin&&e.slideOrigin.slideOutType===_.Legato?-1:Tn.getPitchWheel(0),d>=0&&this._handler.addNoteBend(r.index,l,u,o,d),e.beat.fadeIn&&this.generateFadeIn(e,l,c),!e.isTrill||s.isPercussion){if(e.beat.isTremolo)this.generateTremoloPicking(e,l,c,o,h,u);else if(e.hasBend?this.generateBend(e,l,c,o,u):e.beat.hasWhammyBar&&0===e.index?this.generateWhammy(e.beat,l,c,u):e.slideInType!==y.None||e.slideOutType!==_.None?this.generateSlide(e,l,c,o,h,u):e.vibrato!==w.None&&this.generateVibrato(e,l,c,o,u),!(e.isTieDestination||e.slideOrigin&&e.slideOrigin.slideOutType===_.Legato)){let e=Math.max(c.untilTieOrSlideEnd,c.letRingEnd);this._handler.addNote(r.index,l,e,o,h,u)}}else this.generateTrill(e,l,c,o,h,u)}getNoteDuration(t,i){const n=new kn;if(n.noteOnly=i,n.untilTieOrSlideEnd=i,n.letRingEnd=i,t.isDead)return n.noteOnly=this.applyStaticDuration(Tn.DefaultDurationDead,i),n.untilTieOrSlideEnd=n.noteOnly,n.letRingEnd=n.noteOnly,n;if(t.isPalmMute)return n.noteOnly=this.applyStaticDuration(Tn.DefaultDurationPalmMute,i),n.untilTieOrSlideEnd=n.noteOnly,n.letRingEnd=n.noteOnly,n;if(t.isStaccato)return n.noteOnly=i/2|0,n.untilTieOrSlideEnd=n.noteOnly,n.letRingEnd=n.noteOnly,n;if(t.isTieOrigin){const e=t.tieDestination;if(e)if(t.isTieDestination){const t=this.getNoteDuration(e,e.beat.playbackDuration);n.untilTieOrSlideEnd=i+t.untilTieOrSlideEnd}else{const i=t.beat.absolutePlaybackStart,r=this.getNoteDuration(e,e.beat.playbackDuration),s=e.beat.absolutePlaybackStart+r.untilTieOrSlideEnd;n.untilTieOrSlideEnd=s-i}}else if(t.slideOutType===_.Legato){const e=t.slideTarget;if(e){const i=t.beat.absolutePlaybackStart,r=this.getNoteDuration(e,e.beat.playbackDuration),s=e.beat.absolutePlaybackStart+r.untilTieOrSlideEnd;n.untilTieOrSlideEnd=s-i}}if(t.isLetRing&&this._settings.notation.notationMode===e.NotationMode.GuitarPro){let e=t.beat,r=0;const s=t.beat.voice.bar.masterBar.calculateDuration();for(;e.nextBeat;){let i=e.nextBeat;if(i.isRest)break;if(t.isStringed&&i.hasNoteOnString(t.string))break;if(e=e.nextBeat,r=e.absolutePlaybackStart-t.beat.absolutePlaybackStart+e.playbackDuration,r>s){r=s;break}}e===t.beat?n.letRingEnd=i:n.letRingEnd=r}else n.letRingEnd=n.untilTieOrSlideEnd;return n}applyStaticDuration(e,t){const i=this._currentTempo*e/Le.MaxPosition|0;return Math.min(i,t)}static getDynamicValue(e){let t=e.dynamics;switch(!e.beat.voice.bar.staff.isPercussion&&e.hammerPullOrigin&&t--,e.isGhost&&t--,e.accentuated){case s.Normal:t++;break;case s.Heavy:t+=2}return t}generateFadeIn(e,t,i){const n=e.beat.voice.bar.staff.track,r=Tn.toChannelShort(n.playbackInfo.volume)/i.noteOnly,s=120,o=i.noteOnly/s|0,a=t+i.noteOnly;for(let e=o-1;e>=0;e--){const i=a-e*s,l=(i-t)*r;e===o-1&&(this._handler.addControlChange(n.index,t,n.playbackInfo.primaryChannel,q.VolumeCoarse,l),this._handler.addControlChange(n.index,t,n.playbackInfo.secondaryChannel,q.VolumeCoarse,l)),this._handler.addControlChange(n.index,i,n.playbackInfo.primaryChannel,q.VolumeCoarse,l),this._handler.addControlChange(n.index,i,n.playbackInfo.secondaryChannel,q.VolumeCoarse,l)}}generateVibrato(e,t,i,n,r){let s=0,o=0;switch(e.vibrato){case w.Slight:s=this._settings.player.vibrato.noteSlightLength,o=this._settings.player.vibrato.noteSlightAmplitude;break;case w.Wide:s=this._settings.player.vibrato.noteWideLength,o=this._settings.player.vibrato.noteWideAmplitude;break;default:return}const a=e.beat.voice.bar.staff.track;this.generateVibratorWithParams(t,i.noteOnly,s,o,((e,t)=>{this._handler.addNoteBend(a.index,e,r,n,t)}))}generateVibratorWithParams(e,t,i,n,r){const s=16,o=i/2|0,a=(e+=i)+t;for(;e<a;){let t=0;const l=e+i<a?i:a-e;for(;t<l;){let i=n*Math.sin(t*Math.PI/o);r(e+t|0,Tn.getPitchWheel(i)),t+=s}e+=i}}static getPitchWheel(e){return jt.DefaultPitchWheel+e/2*Tn.PitchValuePerSemitone}generateSlide(e,t,i,n,r,s){let o=e.slideOutType===_.Legato?i.noteOnly:i.untilTieOrSlideEnd,a=[],l=e.beat.voice.bar.staff.track;const c=this._settings.player.slide.simpleSlidePitchOffset,h=Math.floor(Le.MaxPosition*this._settings.player.slide.simpleSlideDurationRatio),u=Math.floor(Le.MaxPosition*this._settings.player.slide.shiftSlideDurationRatio);switch(e.slideInType){case y.IntoFromAbove:a.push(new Le(0,c)),a.push(new Le(h,0));break;case y.IntoFromBelow:a.push(new Le(0,-c)),a.push(new Le(h,0))}switch(e.slideOutType){case _.Legato:case _.Shift:a.push(new Le(u,0));const t=2*(e.slideTarget.realValue-e.realValue);a.push(new Le(Le.MaxPosition,t));break;case _.OutDown:a.push(new Le(Le.MaxPosition-h,0)),a.push(new Le(Le.MaxPosition,-c));break;case _.OutUp:a.push(new Le(Le.MaxPosition-h,0)),a.push(new Le(Le.MaxPosition,c))}this.generateWhammyOrBend(t,o,a,((e,t)=>{this._handler.addNoteBend(l.index,e,s,n,t)}))}generateBend(e,t,i,n,r){let s=e.bendPoints,o=e.beat.voice.bar.staff.track;const a=(e,t)=>{this._handler.addNoteBend(o.index,e,r,n,t)};let l,c=null;if(e.isTieOrigin&&this._settings.notation.extendBendArrowsOnTiedNotes){let t=e;for(;t.isTieOrigin&&!t.tieDestination.hasBend;)t=t.tieDestination;l=t.beat.absolutePlaybackStart-e.beat.absolutePlaybackStart+this.getNoteDuration(t,t.beat.playbackDuration).noteOnly}else if(e.isTieOrigin&&e.beat.graceType!==m.None){switch(e.tieDestination.bendType){case u.Bend:case u.BendRelease:case u.PrebendBend:c=e.tieDestination.bendPoints[1].value;break;case u.Prebend:case u.PrebendRelease:c=e.tieDestination.bendPoints[0].value}l=Math.max(i.noteOnly,Te.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo))}else l=i.noteOnly;s[0].value>0&&!e.isContinuedBend&&t>0&&t--;const d=Math.min(l,Te.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo));let f=[];switch(e.bendType){case u.Custom:f=s;break;case u.Bend:case u.Release:switch(e.bendStyle){case h.Default:f=s;break;case h.Gradual:f.push(new Le(0,e.bendPoints[0].value)),(!c||c<e.bendPoints[1].value)&&(c=e.bendPoints[1].value),f.push(new Le(Le.MaxPosition,c));break;case h.Fast:return(!c||c<e.bendPoints[1].value)&&(c=e.bendPoints[1].value),void(e.beat.graceType===m.BendGrace?this.generateSongBookWhammyOrBend(t,l,!0,[e.bendPoints[0].value,c],d,a):this.generateSongBookWhammyOrBend(t,l,!1,[e.bendPoints[0].value,c],d,a))}break;case u.BendRelease:switch(e.bendStyle){case h.Default:f=s;break;case h.Gradual:f.push(new Le(0,e.bendPoints[0].value)),f.push(new Le(Le.MaxPosition/2|0,e.bendPoints[1].value)),f.push(new Le(Le.MaxPosition,e.bendPoints[2].value));break;case h.Fast:return void this.generateSongBookWhammyOrBend(t,l,!1,[e.bendPoints[0].value,e.bendPoints[1].value,e.bendPoints[2].value],d,a)}break;case u.Hold:case u.Prebend:f=s;break;case u.PrebendBend:switch(e.bendStyle){case h.Default:f=s;break;case h.Gradual:f.push(new Le(0,e.bendPoints[0].value)),f.push(new Le(Le.MaxPosition,e.bendPoints[1].value));break;case h.Fast:return a(t,0|Tn.getPitchWheel(e.bendPoints[0].value)),(!c||c<e.bendPoints[1].value)&&(c=e.bendPoints[1].value),void this.generateSongBookWhammyOrBend(t,l,!1,[e.bendPoints[0].value,c],d,a)}break;case u.PrebendRelease:switch(e.bendStyle){case h.Default:f=s;break;case h.Gradual:f.push(new Le(0,e.bendPoints[0].value)),f.push(new Le(Le.MaxPosition,e.bendPoints[1].value));break;case h.Fast:return a(t,0|Tn.getPitchWheel(e.bendPoints[0].value)),void this.generateSongBookWhammyOrBend(t,l,!1,[e.bendPoints[0].value,e.bendPoints[1].value],d,a)}}this.generateWhammyOrBend(t,l,f,a)}generateSongBookWhammyOrBend(e,t,i,n,r,s){const o=i?e:e+t-r,a=r/(n.length-1);for(let e=0;e<n.length-1;e++){const t=Tn.getPitchWheel(n[e]),i=Tn.getPitchWheel(n[e+1]),r=o+a*e;this.generateBendValues(r,a,t,i,s)}}generateWhammy(e,t,i,n){const r=e.whammyBarPoints,s=e.voice.bar.staff.track,o=i.noteOnly;r[0].value>0&&!e.isContinuedWhammy&&t--;const a=(e,t)=>{this._handler.addBend(s.index,e,n,t)};let l=[];switch(e.whammyBarType){case E.Custom:l=r;break;case E.Dive:switch(e.whammyStyle){case h.Default:l=r;break;case h.Gradual:l.push(new Le(0,r[0].value)),l.push(new Le(Le.MaxPosition,r[1].value));break;case h.Fast:const e=Math.min(o,Te.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo));return void this.generateSongBookWhammyOrBend(t,o,!1,[r[0].value,r[1].value],e,a)}break;case E.Dip:switch(e.whammyStyle){case h.Default:l=r;break;case h.Gradual:l.push(new Le(0,r[0].value)),l.push(new Le(Le.MaxPosition/2|0,r[1].value)),l.push(new Le(Le.MaxPosition,r[2].value));break;case h.Fast:const e=Math.min(o,Te.millisToTicks(this._settings.player.songBookDipDuration,this._currentTempo));return void this.generateSongBookWhammyOrBend(t,o,!0,[r[0].value,r[1].value,r[2].value],e,a)}break;case E.Hold:case E.Predive:l=r;break;case E.PrediveDive:switch(e.whammyStyle){case h.Default:l=r;break;case h.Gradual:l.push(new Le(0,r[0].value)),l.push(new Le(Le.MaxPosition/2|0,r[0].value)),l.push(new Le(Le.MaxPosition,r[1].value));break;case h.Fast:const e=Tn.getPitchWheel(r[0].value);this._handler.addBend(s.index,t,n,0|e);const i=Math.min(o,Te.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo));return void this.generateSongBookWhammyOrBend(t,o,!1,[r[0].value,r[1].value],i,a)}}this.generateWhammyOrBend(t,o,l,a)}generateWhammyOrBend(e,t,i,n){const r=t/Le.MaxPosition;for(let t=0;t<i.length-1;t++){const s=i[t],o=i[t+1],a=Tn.getPitchWheel(s.value),l=Tn.getPitchWheel(o.value),c=r*(o.offset-s.offset),h=e+r*s.offset;this.generateBendValues(h,c,a,l,n)}}generateBendValues(e,t,i,n,r){const s=Te.ticksToMillis(t,this._currentTempo),o=Math.abs(n-i)/Tn.PitchValuePerSemitone,a=Math.max(Tn.MinBreakpointsPerSemitone*o,s/Tn.MillisecondsPerBreakpoint),l=t/a,c=(n-i)/a;for(let t=0;t<a;t++)r(0|e,Math.round(i)),i+=c,e+=l;i<n&&r(0|e,n)}generateTrill(e,t,i,n,r,s){const o=e.beat.voice.bar.staff.track,a=e.stringTuning+e.trillFret;let l=Te.toTicks(e.trillSpeed),c=!0,h=t,u=t+i.untilTieOrSlideEnd;for(;h+10<u;)h+l>=u&&(l=u-h),this._handler.addNote(o.index,h,l,c?a:n,r,s),c=!c,h+=l}generateTremoloPicking(e,t,i,n,r,s){const o=e.beat.voice.bar.staff.track;let a=Te.toTicks(e.beat.tremoloSpeed),l=t;const c=t+i.untilTieOrSlideEnd;for(;l+10<c;)l+a>=c&&(a=c-l),this._handler.addNote(o.index,l,a,n,r,s),l+=a}getBrushInfo(e){const t=new Int32Array(e.voice.bar.staff.tuning.length);if(e.brushType!==d.None){let i=0,n=0;for(const t of e.notes)t.isTieDestination||(i|=1<<t.string-1,n++);if(e.notes.length>0){let r=0;const s=e.brushDuration/(n-1)|0;for(let n=0;n<e.voice.bar.staff.tuning.length;n++){let o=e.brushType===d.ArpeggioDown||e.brushType===d.BrushDown?n:t.length-1-n;0!=(i&1<<o)&&(t[o]=r,r+=s)}}}return t}generateAutomation(e,t,i){switch(t.type){case o.Instrument:this.addProgramChange(e.voice.bar.staff.track,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.primaryChannel,255&(0|t.value)),this.addProgramChange(e.voice.bar.staff.track,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.secondaryChannel,255&(0|t.value));break;case o.Balance:let n=Tn.toChannelShort(t.value);this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.primaryChannel,q.PanCoarse,n),this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.secondaryChannel,q.PanCoarse,n);break;case o.Volume:let r=Tn.toChannelShort(t.value);this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.primaryChannel,q.VolumeCoarse,r),this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.secondaryChannel,q.VolumeCoarse,r)}}prepareSingleBeat(e){let t=-1,i=-1,n=e;for(;n&&(-1===t||-1===i);){for(const n of e.automations)switch(n.type){case o.Instrument:i=n.value;break;case o.Tempo:t=n.value}n=n.previousBeat}const r=e.voice.bar.staff.track,s=e.voice.bar.masterBar;-1===t&&(t=s.score.tempo),-1===i&&(i=r.playbackInfo.program);const a=r.playbackInfo.volume;this.generateTrack(r),this._handler.addTimeSignature(0,s.timeSignatureNumerator,s.timeSignatureDenominator),this._handler.addTempo(0,t);let l=Tn.toChannelShort(a);this._handler.addControlChange(0,0,r.playbackInfo.primaryChannel,q.VolumeCoarse,l),this._handler.addControlChange(0,0,r.playbackInfo.secondaryChannel,q.VolumeCoarse,l)}generateSingleBeat(e){this.prepareSingleBeat(e),this.generateBeat(e,-e.playbackStart,e.voice.bar)}generateSingleNote(e){this.prepareSingleBeat(e.beat),this.generateNote(e,-e.beat.playbackStart,e.beat.playbackDuration,new Int32Array(e.beat.voice.bar.staff.tuning.length))}}Tn.DefaultDurationDead=30,Tn.DefaultDurationPalmMute=80,Tn.PitchBendRangeInSemitones=16,Tn.PitchValuePerSemitone=jt.DefaultPitchWheel/Tn.PitchBendRangeInSemitones,Tn.MinBreakpointsPerSemitone=6,Tn.MillisecondsPerBreakpoint=150;class Ln{constructor(){this.startTick=0,this.endTick=0}}class Nn{constructor(e,t){this.width=0,this.height=0,this.x=e,this.y=t}get scale(){return this.renderer.scale}doLayout(){}paint(e,t,i){}}class Mn extends Nn{constructor(e=0,t=0){super(e,t),this.nextGlyph=null,this.previousGlyph=null}}class On extends Mn{constructor(e,t,i,n){super(e,t),this.glyphScale=0,this.glyphScale=i,this.symbol=n}paint(e,t,i){i.fillMusicFontSymbol(e+this.x,t+this.y,this.glyphScale*this.scale,this.symbol,!1)}}class Dn extends On{constructor(e,t,i,n){super(e,t,n?Dn.GraceScale:1,Dn.getSymbol(i)),this._isGrace=n,this._duration=i}paint(e,t,i){let n=this._isGrace?this.scale:0;i.fillMusicFontSymbol(e+this.x,t+this.y+n,this.glyphScale*this.scale,this.symbol,!1)}doLayout(){let e=(this._isGrace?Dn.GraceScale:1)*this.scale;switch(this._duration){case p.QuadrupleWhole:this.width=14*e;break;case p.DoubleWhole:case p.Whole:this.width=14*(this._isGrace?Dn.GraceScale:1)*this.scale;break;default:this.width=Dn.QuarterNoteHeadWidth*(this._isGrace?Dn.GraceScale:1)*this.scale}this.height=Dn.NoteHeadHeight*e}static getSymbol(e){switch(e){case p.QuadrupleWhole:return C.NoteheadDoubleWholeSquare;case p.DoubleWhole:return C.NoteheadDoubleWhole;case p.Whole:return C.NoteheadWhole;case p.Half:return C.NoteheadHalf;default:return C.NoteheadBlack}}}Dn.GraceScale=.75,Dn.NoteHeadHeight=8,Dn.QuarterNoteHeadWidth=9;class In extends On{constructor(e,t,i,n,r){super(e,t,r?Dn.GraceScale:1,In.getSymbol(i,n,r))}doLayout(){this.width=0}static getSymbol(e,t,i){if(i&&(e=p.Eighth),t===B.Up)switch(e){case p.Eighth:return C.FlagEighthUp;case p.Sixteenth:return C.FlagSixteenthUp;case p.ThirtySecond:return C.FlagThirtySecondUp;case p.SixtyFourth:return C.FlagSixtyFourthUp;case p.OneHundredTwentyEighth:return C.FlagOneHundredTwentyEighthUp;case p.TwoHundredFiftySixth:return C.FlagTwoHundredFiftySixthUp;default:return C.FlagEighthUp}switch(e){case p.Eighth:return C.FlagEighthDown;case p.Sixteenth:return C.FlagSixteenthDown;case p.ThirtySecond:return C.FlagThirtySecondDown;case p.SixtyFourth:return C.FlagSixtyFourthDown;case p.OneHundredTwentyEighth:case p.TwoHundredFiftySixth:return C.FlagOneHundredTwentyEighthDown;default:return C.FlagEighthDown}}}In.FlagWidth=11;class An extends Nn{constructor(e,t){super(0,0),this.ties=[],this.minWidth=0,this.beat=e,this.ties=[],this.voiceContainer=t}get onTimeX(){return this.onNotes.x+this.onNotes.centerX}registerLayoutingInfo(e){let t=this.onTimeX;this.beat.graceGroup&&!this.beat.graceGroup.isComplete&&(t+=An.GraceBeatPadding*this.renderer.scale);let i=this.onNotes.width-this.onNotes.centerX;const n=this.renderer.helpers.getBeamingHelperForBeat(this.beat);(n&&n.hasFlag||this.beat.graceType!==m.None)&&(i+=In.FlagWidth*this.scale*(this.beat.graceType!==m.None?Dn.GraceScale:1));for(const e of this.ties)i+=e.width;this.beat.graceType!==m.None&&(i+=An.GraceBeatPadding*this.renderer.scale),e.addBeatSpring(this.beat,t,i),e.setPreBeatSize(this.beat,this.preNotes.width),e.setOnBeatSize(this.beat,this.onNotes.width),e.setBeatCenterX(this.beat,this.onNotes.centerX)}applyLayoutingInfo(e){let t=e.getBeatCenterX(this.beat)-this.onNotes.centerX;this.beat.graceGroup&&!this.beat.graceGroup.isComplete&&(t+=An.GraceBeatPadding*this.renderer.scale),this.preNotes.x=t,this.preNotes.width=e.getPreBeatSize(this.beat),this.onNotes.width=e.getOnBeatSize(this.beat),this.onNotes.x=this.preNotes.x+this.preNotes.width,this.onNotes.updateBeamingHelper(),this.updateWidth()}doLayout(){this.preNotes.x=0,this.preNotes.renderer=this.renderer,this.preNotes.container=this,this.preNotes.doLayout(),this.onNotes.x=this.preNotes.x+this.preNotes.width,this.onNotes.renderer=this.renderer,this.onNotes.container=this,this.onNotes.doLayout();let e=this.beat.notes.length-1;for(;e>=0;)this.createTies(this.beat.notes[e--]);this.updateWidth()}updateWidth(){if(this.minWidth=this.preNotes.width+this.onNotes.width,!this.beat.isRest)if(1===this.onNotes.beamingHelper.beats.length)this.beat.duration>=p.Eighth&&(this.minWidth+=20*this.scale);else switch(this.beat.duration){case p.OneHundredTwentyEighth:case p.TwoHundredFiftySixth:this.minWidth+=10*this.scale}let e=0;for(let t of this.ties)t.width>e&&(e=t.width);this.minWidth+=e,this.width=this.minWidth}scaleToWidth(e){for(let e of this.ties)e.doLayout();this.onNotes.updateBeamingHelper(),this.width=e}createTies(e){}static getGroupId(e){return"b"+e.id}paint(e,t,i){if(this.beat.voice.isEmpty)return;if(this.preNotes.isEmpty&&this.onNotes.isEmpty&&0===this.ties.length)return;i.beginGroup(An.getGroupId(this.beat)),this.preNotes.paint(e+this.x,t+this.y,i),this.onNotes.paint(e+this.x,t+this.y,i);let n=e-this.voiceContainer.x-this.renderer.x,r=t-this.voiceContainer.y-this.renderer.y;for(let e=0,t=this.ties.length;e<t;e++){let t=this.ties[e];t.renderer=this.renderer,t.paint(n,r,i)}i.endGroup()}buildBoundingsLookup(e,t,i,n){let r=new un;r.beat=this.beat,r.visualBounds=new lt,r.visualBounds.x=t+this.x+this.onNotes.x,r.visualBounds.y=e.visualBounds.y,r.visualBounds.w=this.onNotes.width,r.visualBounds.h=e.visualBounds.h,r.realBounds=new lt,r.realBounds.x=t+this.x,r.realBounds.y=e.realBounds.y,r.realBounds.w=this.width,r.realBounds.h=e.realBounds.h,n&&(r.visualBounds.x=t+this.x,r.realBounds.x=r.visualBounds.x),e.addBeat(r),this.renderer.settings.core.includeNoteBounds&&this.onNotes.buildBoundingsLookup(r,t+this.x,i+this.y)}}An.GraceBeatPadding=3;class Pn{constructor(){this.oldWidth=0,this.newWidth=0,this.settings=null}core(){return this.settings&&this.causeIssue()?this.settings.core:new ra}causeIssue(){return this.settings=null,!0}}class Rn{constructor(e){this.bounds=null,this.beat=e}}class Bn{constructor(e,t){this._startTime=0,this._trackIndexes=null,this.score=null,this.tracks=[],this._tickCache=null,this.player=null,this._cursorWrapper=null,this._barCursor=null,this._beatCursor=null,this._selectionWrapper=null,this._previousTick=0,this._playerState=j.Paused,this._currentBeat=null,this._previousStateForCursor=j.Paused,this._previousCursorCache=null,this._lastScroll=0,this.playedBeatChanged=new _i,this._beatMouseDown=!1,this._selectionStart=null,this._selectionEnd=null,this.beatMouseDown=new _i,this.beatMouseMove=new _i,this.beatMouseUp=new _i,this.scoreLoaded=new _i,this.resize=new _i,this.renderStarted=new _i,this.renderFinished=new _i,this.postRenderFinished=new yi,this.error=new _i,this.playerReady=new yi,this.playerFinished=new yi,this.soundFontLoaded=new yi,this.midiLoad=new _i,this.midiLoaded=new _i,this.playerStateChanged=new _i,this.playerPositionChanged=new _i,this.midiEventsPlayed=new _i,this.uiFacade=e,this.container=e.rootContainer,e.initialize(this,t),Oe.logLevel=this.settings.core.logLevel,this.canvasElement=e.createCanvasElement(),this.container.appendChild(this.canvasElement),this.container.resize.on(na.throttle((()=>{this.container.width!==this.renderer.width&&this.triggerResize()}),e.resizeThrottle)),this.settings.core.useWorkers&&this.uiFacade.areWorkersSupported&&na.getRenderEngineFactory(this.settings).supportsWorkers?this.renderer=this.uiFacade.createWorkerRenderer():this.renderer=new mn(this.settings);let i=new Pn;i.oldWidth=this.renderer.width,i.newWidth=0|this.container.width,i.settings=this.settings,this.onResize(i),this.renderer.preRender.on(this.onRenderStarted.bind(this)),this.renderer.renderFinished.on((e=>{this.onRenderFinished(e)})),this.renderer.postRenderFinished.on((()=>{let e=Date.now()-this._startTime;Oe.debug("rendering","Rendering completed in "+e+"ms"),this.onPostRenderFinished()})),this.renderer.preRender.on((e=>{this._startTime=Date.now()})),this.renderer.partialRenderFinished.on(this.appendRenderResult.bind(this)),this.renderer.renderFinished.on((e=>{this.appendRenderResult(e),this.appendRenderResult(null)})),this.renderer.error.on(this.onError.bind(this)),this.settings.player.enablePlayer&&this.setupPlayer(),this.setupClickHandling(),this.uiFacade.beginInvoke((()=>{this.uiFacade.initialRender()}))}destroy(){this.player&&this.player.destroy(),this.uiFacade.destroy(),this.renderer.destroy()}updateSettings(){this.renderer.updateSettings(this.settings),this.settings.player.enablePlayer?this.setupPlayer():this.destroyPlayer()}load(e,t){try{return this.uiFacade.load(e,(e=>{this.renderScore(e,t)}),(e=>{this.onError(e)}))}catch(e){return this.onError(e),!1}}renderScore(e,t){let i=[];if(t)if(0===t.length)e.tracks.length>0&&i.push(e.tracks[0]);else if(1===t.length&&-1===t[0])for(let t of e.tracks)i.push(t);else for(let n of t)n>=0&&n<=e.tracks.length&&i.push(e.tracks[n]);else e.tracks.length>0&&i.push(e.tracks[0]);this.internalRenderTracks(e,i)}renderTracks(t){if(t.length>0){let i=t[0].score;for(let n of t)if(n.score!==i)return void this.onError(new he(e.AlphaTabErrorType.General,"All rendered tracks must belong to the same score."));this.internalRenderTracks(i,t)}}internalRenderTracks(e,t){if(e!==this.score){ge.applyPitchOffsets(this.settings,e),this.score=e,this.tracks=t,this._trackIndexes=[];for(let e of t)this._trackIndexes.push(e.index);this.onScoreLoaded(e),this.loadMidiForScore(),this.render()}else{this.tracks=t,this._trackIndexes=[];for(let e of t)this._trackIndexes.push(e.index);this.render()}}triggerResize(){if(this.container.isVisible){let e=new Pn;e.oldWidth=this.renderer.width,e.newWidth=this.container.width,e.settings=this.settings,this.onResize(e),this.renderer.updateSettings(this.settings),this.renderer.width=this.container.width,this.renderer.resizeRender()}else Oe.warning("Rendering","AlphaTab container was invisible while autosizing, waiting for element to become visible",null),this.uiFacade.rootContainerBecameVisible.on((()=>{Oe.debug("Rendering","AlphaTab container became visible, doing autosizing",null),this.triggerResize()}))}appendRenderResult(e){e&&(this.canvasElement.width=e.totalWidth,this.canvasElement.height=e.totalHeight,this._cursorWrapper&&(this._cursorWrapper.width=e.totalWidth,this._cursorWrapper.height=e.totalHeight)),e&&!e.renderResult||this.uiFacade.beginAppendRenderResults(e)}tex(e,t){try{let i=new tt,n=at.fromString(e);i.init(n,this.settings);let r=i.readScore();this.renderScore(r,t)}catch(e){this.onError(e)}}loadSoundFont(e,t=!1){return!!this.player&&this.uiFacade.loadSoundFont(e,t)}resetSoundFonts(){this.player&&this.player.resetSoundFonts()}render(){this.renderer&&(this.uiFacade.canRender?(this.renderer.width=this.container.width,this.renderer.renderScore(this.score,this._trackIndexes)):this.uiFacade.canRenderChanged.on((()=>this.render())))}get isReadyForPlayback(){return!!this.player&&this.player.isReadyForPlayback}get playerState(){return this.player?this.player.state:j.Paused}get masterVolume(){return this.player?this.player.masterVolume:0}set masterVolume(e){this.player&&(this.player.masterVolume=e)}get metronomeVolume(){return this.player?this.player.metronomeVolume:0}set metronomeVolume(e){this.player&&(this.player.metronomeVolume=e)}get countInVolume(){return this.player?this.player.countInVolume:0}set countInVolume(e){this.player&&(this.player.countInVolume=e)}get midiEventsPlayedFilter(){return this.player?this.player.midiEventsPlayedFilter:[]}set midiEventsPlayedFilter(e){this.player&&(this.player.midiEventsPlayedFilter=e)}get tickPosition(){return this.player?this.player.tickPosition:0}set tickPosition(e){this.player&&(this.player.tickPosition=e)}get timePosition(){return this.player?this.player.timePosition:0}set timePosition(e){this.player&&(this.player.timePosition=e)}get playbackRange(){return this.player?this.player.playbackRange:null}set playbackRange(e){this.player&&(this.player.playbackRange=e,this.settings.player.enableCursor&&this.updateSelectionCursor(e))}get playbackSpeed(){return this.player?this.player.playbackSpeed:0}set playbackSpeed(e){this.player&&(this.player.playbackSpeed=e)}get isLooping(){return!!this.player&&this.player.isLooping}set isLooping(e){this.player&&(this.player.isLooping=e)}destroyPlayer(){this.player&&(this.player.destroy(),this.player=null,this.destroyCursors())}setupPlayer(){this.player||(this.player=this.uiFacade.createWorkerPlayer(),this.player&&(this.player.ready.on((()=>{this.loadMidiForScore()})),this.player.readyForPlayback.on((()=>{if(this.onPlayerReady(),this.tracks)for(let e of this.tracks){let t=e.playbackInfo.volume/16;this.player.setChannelVolume(e.playbackInfo.primaryChannel,t),this.player.setChannelVolume(e.playbackInfo.secondaryChannel,t)}})),this.player.soundFontLoaded.on(this.onSoundFontLoaded.bind(this)),this.player.soundFontLoadFailed.on((e=>{this.onError(e)})),this.player.midiLoaded.on(this.onMidiLoaded.bind(this)),this.player.midiLoadFailed.on((e=>{this.onError(e)})),this.player.stateChanged.on(this.onPlayerStateChanged.bind(this)),this.player.positionChanged.on(this.onPlayerPositionChanged.bind(this)),this.player.midiEventsPlayed.on(this.onMidiEventsPlayed.bind(this)),this.player.finished.on(this.onPlayerFinished.bind(this)),this.settings.player.enableCursor?this.setupCursors():this.destroyCursors()))}loadMidiForScore(){if(!this.player||!this.score||!this.player.isReady)return;Oe.debug("AlphaTab","Generating Midi");let e=new Ci,t=new yn(e),i=new Tn(this.score,this.settings,t);i.generate(),this._tickCache=i.tickLookup,this.onMidiLoad(e),this.player.loadMidiFile(e)}changeTrackVolume(e,t){if(this.player)for(let i of e)this.player.setChannelVolume(i.playbackInfo.primaryChannel,t),this.player.setChannelVolume(i.playbackInfo.secondaryChannel,t)}changeTrackSolo(e,t){if(this.player)for(let i of e)this.player.setChannelSolo(i.playbackInfo.primaryChannel,t),this.player.setChannelSolo(i.playbackInfo.secondaryChannel,t)}changeTrackMute(e,t){if(this.player)for(let i of e)this.player.setChannelMute(i.playbackInfo.primaryChannel,t),this.player.setChannelMute(i.playbackInfo.secondaryChannel,t)}play(){return!!this.player&&this.player.play()}pause(){this.player&&this.player.pause()}playPause(){this.player&&this.player.playPause()}stop(){this.player&&this.player.stop()}playBeat(e){if(!this.player)return;let t=new Ci,i=new yn(t);new Tn(e.voice.bar.staff.track.score,this.settings,i).generateSingleBeat(e),this.player.playOneTimeMidiFile(t)}playNote(e){if(!this.player)return;let t=new Ci,i=new yn(t);new Tn(e.beat.voice.bar.staff.track.score,this.settings,i).generateSingleNote(e),this.player.playOneTimeMidiFile(t)}destroyCursors(){this._cursorWrapper&&(this.uiFacade.destroyCursors(),this._cursorWrapper=null,this._barCursor=null,this._beatCursor=null,this._selectionWrapper=null,this._previousTick=0,this._playerState=j.Paused)}setupCursors(){let e=this.uiFacade.createCursors();e&&(this._cursorWrapper=e.cursorWrapper,this._barCursor=e.barCursor,this._beatCursor=e.beatCursor,this._selectionWrapper=e.selectionWrapper,this._previousTick=0,this._playerState=j.Paused,this.renderer.postRenderFinished.on((()=>{this.cursorUpdateTick(this._previousTick,!1)})),this.player&&(this.player.positionChanged.on((e=>{this._previousTick=e.currentTick,this.uiFacade.beginInvoke((()=>{this.cursorUpdateTick(e.currentTick,!1)}))})),this.player.stateChanged.on((e=>{if(this._playerState=e.state,!e.stopped&&e.state===j.Paused){let e=this._currentBeat,t=this._tickCache;e&&t&&(this.player.tickPosition=t.getMasterBarStart(e.voice.bar.masterBar)+e.playbackStart)}}))))}cursorUpdateTick(e,t=!1){this.uiFacade.beginInvoke((()=>{let i=this._tickCache;if(i){let n=this.tracks;if(n.length>0){let r=i.findBeat(n,e);r&&this.cursorUpdateBeat(r.currentBeat,r.nextBeat,r.duration,t,r.beatsToHighlight)}}}))}cursorUpdateBeat(t,i,n,r,s=null){if(!t)return;let o=this.renderer.boundsLookup;if(!o)return;let a=this._currentBeat,l=this._previousCursorCache,c=this._previousStateForCursor;if(this._currentBeat=t,this._previousCursorCache=o,this._previousStateForCursor=this._playerState,t===a&&o===l&&c===this._playerState)return;let h=this._barCursor,u=this._beatCursor,d=o.findBeat(t);if(!d)return;let f=d.barBounds.masterBarBounds,p=f.visualBounds;if(h&&(h.top=p.y,h.left=p.x,h.width=p.w,h.height=p.h),u&&(u.stopAnimation(),u.top=p.y,u.left=d.visualBounds.x,u.height=p.h),this.uiFacade.removeHighlights(),this._playerState===j.Playing||r){if(n/=this.playbackSpeed,!r){if(s)for(let e of s){let t=An.getGroupId(e);this.uiFacade.highlightElements(t)}let e=f.visualBounds.x+f.visualBounds.w;if(i&&(i.voice.bar.index===t.voice.bar.index||i.voice.bar.index===t.voice.bar.index+1)){let t=o.findBeat(i);t&&t.barBounds.masterBarBounds.staveGroupBounds===f.staveGroupBounds&&(e=t.visualBounds.x)}u&&this.uiFacade.beginInvoke((()=>{u.transitionToX(n,e)}))}if(!this._beatMouseDown&&this.settings.player.scrollMode!==e.ScrollMode.Off){let t=this.uiFacade.getScrollContainer(),i=na.getLayoutEngineFactory(this.settings).vertical,n=this.settings.player.scrollMode,r=this.uiFacade.getOffset(t,this.container);if(i)switch(n){case e.ScrollMode.Continuous:let i=r.y+f.realBounds.y+this.settings.player.scrollOffsetY;i!==this._lastScroll&&(this._lastScroll=i,this.uiFacade.scrollToY(t,i,this.settings.player.scrollSpeed));break;case e.ScrollMode.OffScreen:let n=t.scrollTop+this.uiFacade.getOffset(null,t).h;if(f.visualBounds.y+f.visualBounds.h>=n||f.visualBounds.y<t.scrollTop){let e=f.realBounds.y+this.settings.player.scrollOffsetY;this._lastScroll=f.visualBounds.x,this.uiFacade.scrollToY(t,e,this.settings.player.scrollSpeed)}}else switch(n){case e.ScrollMode.Continuous:if(f.visualBounds.x!==this._lastScroll){let e=f.realBounds.x+this.settings.player.scrollOffsetX;this._lastScroll=f.visualBounds.x,this.uiFacade.scrollToX(t,e,this.settings.player.scrollSpeed)}break;case e.ScrollMode.OffScreen:let i=t.scrollLeft+this.uiFacade.getOffset(null,t).w;if(f.visualBounds.x+f.visualBounds.w>=i||f.visualBounds.x<t.scrollLeft){let e=f.realBounds.x+this.settings.player.scrollOffsetX;this._lastScroll=f.visualBounds.x,this.uiFacade.scrollToX(t,e,this.settings.player.scrollSpeed)}}}this.onPlayedBeatChanged(t)}}onPlayedBeatChanged(e){this.playedBeatChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playedBeatChanged",e)}onBeatMouseDown(e,t){this.settings.player.enablePlayer&&this.settings.player.enableCursor&&this.settings.player.enableUserInteraction&&(this._selectionStart=new Rn(t),this._selectionEnd=null),this._beatMouseDown=!0,this.beatMouseDown.trigger(t),this.uiFacade.triggerEvent(this.container,"beatMouseDown",t,e)}onBeatMouseMove(e,t){this.settings.player.enableUserInteraction&&(this._selectionEnd&&this._selectionEnd.beat===t||(this._selectionEnd=new Rn(t),this.cursorSelectRange(this._selectionStart,this._selectionEnd))),this.beatMouseMove.trigger(t),this.uiFacade.triggerEvent(this.container,"beatMouseMove",t,e)}onBeatMouseUp(e,t){if(this.settings.player.enableUserInteraction){if(this._selectionEnd){let e=this._selectionStart.beat.absolutePlaybackStart;if(this._selectionStart.beat.absolutePlaybackStart<e){let e=this._selectionStart;this._selectionStart=this._selectionEnd,this._selectionEnd=e}}if(this._selectionStart&&this._tickCache){let e=this._tickCache,t=e.getMasterBarStart(this._selectionStart.beat.voice.bar.masterBar);if(this._currentBeat=null,this._playerState===j.Paused&&this.cursorUpdateBeat(this._selectionStart.beat,null,0,!1,[this._selectionStart.beat]),this.tickPosition=t+this._selectionStart.beat.playbackStart,this._selectionEnd&&this._selectionStart.beat!==this._selectionEnd.beat){let i=e.getMasterBarStart(this._selectionEnd.beat.voice.bar.masterBar),n=new Ln;n.startTick=t+this._selectionStart.beat.playbackStart,n.endTick=i+this._selectionEnd.beat.playbackStart+this._selectionEnd.beat.playbackDuration-50,this.playbackRange=n}else this._selectionStart=null,this.playbackRange=null,this.cursorSelectRange(this._selectionStart,this._selectionEnd)}}this.beatMouseUp.trigger(t),this.uiFacade.triggerEvent(this.container,"beatMouseUp",t,e),this._beatMouseDown=!1}updateSelectionCursor(e){if(this._tickCache)if(e){const t=this._tickCache.findBeat(this.tracks,e.startTick),i=this._tickCache.findBeat(this.tracks,e.endTick);if(t&&i){const e=new Rn(t.currentBeat),n=new Rn(i.currentBeat);this.cursorSelectRange(e,n)}}else this.cursorSelectRange(null,null)}setupClickHandling(){this.canvasElement.mouseDown.on((e=>{var t,i;if(!e.isLeftMouseButton)return;this.settings.player.enableUserInteraction&&e.preventDefault();let n=e.getX(this.canvasElement),r=e.getY(this.canvasElement),s=null!==(i=null===(t=this.renderer.boundsLookup)||void 0===t?void 0:t.getBeatAtPos(n,r))&&void 0!==i?i:null;s&&this.onBeatMouseDown(e,s)})),this.canvasElement.mouseMove.on((e=>{var t,i;if(!this._beatMouseDown)return;let n=e.getX(this.canvasElement),r=e.getY(this.canvasElement),s=null!==(i=null===(t=this.renderer.boundsLookup)||void 0===t?void 0:t.getBeatAtPos(n,r))&&void 0!==i?i:null;s&&this.onBeatMouseMove(e,s)})),this.canvasElement.mouseUp.on((e=>{var t,i;if(!this._beatMouseDown)return;this.settings.player.enableUserInteraction&&e.preventDefault();let n=e.getX(this.canvasElement),r=e.getY(this.canvasElement),s=null!==(i=null===(t=this.renderer.boundsLookup)||void 0===t?void 0:t.getBeatAtPos(n,r))&&void 0!==i?i:null;this.onBeatMouseUp(e,s)})),this.renderer.postRenderFinished.on((()=>{this._selectionStart&&this.settings.player.enablePlayer&&this.settings.player.enableCursor&&this.settings.player.enableUserInteraction&&this.cursorSelectRange(this._selectionStart,this._selectionEnd)}))}cursorSelectRange(e,t){let i=this.renderer.boundsLookup;if(!i)return;let n=this._selectionWrapper;if(!n)return;if(n.clear(),!e||!t||e.beat===t.beat)return;e.bounds||(e.bounds=i.findBeat(e.beat)),t.bounds||(t.bounds=i.findBeat(t.beat));let r=e.beat.absolutePlaybackStart;if(t.beat.absolutePlaybackStart<r){let i=e;e=t,t=i}let s=e.bounds.realBounds.x,o=t.bounds.realBounds.x+t.bounds.realBounds.w;if(t.beat.index===t.beat.voice.beats.length-1&&(o=t.bounds.barBounds.masterBarBounds.realBounds.x+t.bounds.barBounds.masterBarBounds.realBounds.w),e.bounds.barBounds.masterBarBounds.staveGroupBounds!==t.bounds.barBounds.masterBarBounds.staveGroupBounds){let r=e.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.x,a=e.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.x+e.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.w,l=this.uiFacade.createSelectionElement();l.top=e.bounds.barBounds.masterBarBounds.visualBounds.y,l.left=s,l.width=a-s,l.height=e.bounds.barBounds.masterBarBounds.visualBounds.h,n.appendChild(l);let c=e.bounds.barBounds.masterBarBounds.staveGroupBounds.index+1,h=t.bounds.barBounds.masterBarBounds.staveGroupBounds.index;for(let e=c;e<h;e++){let t=i.staveGroups[e],s=this.uiFacade.createSelectionElement();s.top=t.visualBounds.y,s.left=r,s.width=a-r,s.height=t.visualBounds.h,n.appendChild(s)}let u=this.uiFacade.createSelectionElement();u.top=t.bounds.barBounds.masterBarBounds.visualBounds.y,u.left=r,u.width=o-r,u.height=t.bounds.barBounds.masterBarBounds.visualBounds.h,n.appendChild(u)}else{let t=this.uiFacade.createSelectionElement();t.top=e.bounds.barBounds.masterBarBounds.visualBounds.y,t.left=s,t.width=o-s,t.height=e.bounds.barBounds.masterBarBounds.visualBounds.h,n.appendChild(t)}}onScoreLoaded(e){this.scoreLoaded.trigger(e),this.uiFacade.triggerEvent(this.container,"scoreLoaded",e)}onResize(e){this.resize.trigger(e),this.uiFacade.triggerEvent(this.container,"resize",e)}onRenderStarted(e){this.renderStarted.trigger(e),this.uiFacade.triggerEvent(this.container,"renderStarted",e)}onRenderFinished(e){this.renderFinished.trigger(e),this.uiFacade.triggerEvent(this.container,"renderFinished",e)}onPostRenderFinished(){this.postRenderFinished.trigger(),this.uiFacade.triggerEvent(this.container,"postRenderFinished",null)}onError(e){Oe.error("API","An unexpected error occurred",e),this.error.trigger(e),this.uiFacade.triggerEvent(this.container,"error",e)}onPlayerReady(){this.playerReady.trigger(),this.uiFacade.triggerEvent(this.container,"playerReady",null)}onPlayerFinished(){this.playerFinished.trigger(),this.uiFacade.triggerEvent(this.container,"playerFinished",null)}onSoundFontLoaded(){this.soundFontLoaded.trigger(),this.uiFacade.triggerEvent(this.container,"soundFontLoaded",null)}onMidiLoad(e){this.midiLoad.trigger(e),this.uiFacade.triggerEvent(this.container,"midiLoad",e)}onMidiLoaded(e){this.midiLoaded.trigger(e),this.uiFacade.triggerEvent(this.container,"midiFileLoaded",e)}onPlayerStateChanged(e){this.playerStateChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playerStateChanged",e)}onPlayerPositionChanged(e){this.playerPositionChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playerPositionChanged",e)}onMidiEventsPlayed(e){this.midiEventsPlayed.trigger(e),this.uiFacade.triggerEvent(this.container,"midiEventsPlayed",e)}}class Fn extends he{constructor(t,i){super(e.AlphaTabErrorType.General,t),this.xhr=i,Object.setPrototypeOf(this,Fn.prototype)}}class Wn{static loadScoreAsync(e,t,i,n){let r=new XMLHttpRequest;r.open("GET",e,!0,null,null),r.responseType="arraybuffer",r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){let e=r.response;if(200===r.status||0===r.status&&e)try{let e=r.response,i=new Uint8Array(e),s=Wn.loadScoreFromBytes(i,n);t(s)}catch(e){i(e)}else 0===r.status?i(new Fn("You are offline!!\n Please Check Your Network.",r)):404===r.status?i(new Fn("Requested URL not found.",r)):500===r.status?i(new Fn("Internel Server Error.",r)):"parsererror"===r.statusText?i(new Fn("Error.\nParsing JSON Request failed.",r)):"timeout"===r.statusText?i(new Fn("Request Time out.",r)):i(new Fn("Unknow Error: "+r.responseText,r))}},r.send()}static loadScoreFromBytes(e,t){t||(t=new Mi);let i=na.buildImporters();Oe.debug("ScoreLoader","Loading score from "+e.length+" bytes using "+i.length+" importers",null);let n=null,r=at.fromBuffer(e);for(let e of i){r.reset();try{Oe.debug("ScoreLoader","Importing using importer "+e.name),e.init(r,t),n=e.readScore(),Oe.debug("ScoreLoader","Score imported using "+e.name);break}catch(t){if(!(t instanceof xe))throw Oe.error("ScoreLoader","Score import failed due to unexpected error: ",t),t;Oe.debug("ScoreLoader",e.name+" does not support the file")}}if(n)return n;throw Oe.error("ScoreLoader","No compatible importer found for file"),new xe("No compatible importer found for file")}}class Vn{constructor(e){this.mouseEvent=e}get isLeftMouseButton(){return 0===this.mouseEvent.button}getX(e){let t=e.element,i=t.getBoundingClientRect().left+t.ownerDocument.defaultView.pageXOffset;return this.mouseEvent.pageX-i}getY(e){let t=e.element,i=t.getBoundingClientRect().top+t.ownerDocument.defaultView.pageYOffset;return this.mouseEvent.pageY-i}preventDefault(){this.mouseEvent.preventDefault()}}class zn{constructor(e){this._resizeListeners=0,this.element=e,this.mouseDown={on:e=>{this.element.addEventListener("mousedown",(t=>{e(new Vn(t))}),!0)},off:e=>{}},this.mouseUp={on:e=>{this.element.addEventListener("mouseup",(t=>{e(new Vn(t))}),!0)},off:e=>{}},this.mouseMove={on:e=>{this.element.addEventListener("mousemove",(t=>{e(new Vn(t))}),!0)},off:e=>{}},this.resize={on:e=>{0===this._resizeListeners&&zn.resizeObserver.value.observe(this.element),this.element.addEventListener("resize",e,!0),this._resizeListeners++},off:e=>{this.element.removeEventListener("resize",e,!0),this._resizeListeners--,this._resizeListeners<=0&&(this._resizeListeners=0,zn.resizeObserver.value.unobserve(this.element))}}}get top(){return parseFloat(this.element.style.top)}set top(e){this.element.style.top=e+"px"}get left(){return parseFloat(this.element.style.top)}set left(e){this.element.style.left=e+"px"}get width(){return this.element.offsetWidth}set width(e){this.element.style.width=e+"px"}get scrollLeft(){return this.element.scrollLeft}set scrollLeft(e){this.element.scrollTop=e}get scrollTop(){return this.element.scrollLeft}set scrollTop(e){this.element.scrollTop=e}get height(){return this.element.offsetHeight}set height(e){this.element.style.height=e>=0?e+"px":"100%"}get isVisible(){return!!this.element.offsetWidth||!!this.element.offsetHeight||!!this.element.getClientRects().length}stopAnimation(){this.element.style.transition="none"}transitionToX(e,t){this.element.style.transition="all 0s linear",this.element.style.transitionDuration=e+"ms",this.element.style.left=t+"px"}appendChild(e){this.element.appendChild(e.element)}clear(){this.element.innerHTML=""}}zn.resizeObserver=new Ne((()=>new ResizeObserver((e=>{for(const t of e){let e=new CustomEvent("resize",{detail:t});t.target.dispatchEvent(e)}}))));class Hn{constructor(e){this._isStarted=!1,this.isFontLoaded=!1,this.fontLoaded=new _i,this._family=e}checkForFontAvailability(){if(na.isRunningInWorker)return void(this.isFontLoaded=!1);if(this._isStarted)return;this._isStarted=!0;let e=0,t=window.setInterval((()=>{e++,Oe.warning("Rendering",`Could not load font '${this._family}' within ${5*e} seconds`,null)}),5e3);Oe.debug("Font",`Start checking for font availablility: ${this._family}`),Oe.debug("Font",`[${this._family}] Font API available`);let i=()=>{document.fonts.load(`1em ${this._family}`).then((()=>(Oe.debug("Font",`[${this._family}] Font API signaled loaded`),document.fonts.check("1em "+this._family)?(Oe.debug("Rendering",`[${this._family}] Font API signaled available`),this.isFontLoaded=!0,window.clearInterval(t),this.fontLoaded.trigger(this._family)):(Oe.debug("Font",`[${this._family}] Font API loaded reported, but font not available, checking later again`,null),window.setTimeout((()=>{i()}),250)),!0)))};i()}}class jn{constructor(e){this._writePosition=0,this._readPosition=0,this.count=0,this._buffer=new Float32Array(e)}clear(){this._readPosition=0,this._writePosition=0,this.count=0,this._buffer=new Float32Array(this._buffer.length)}write(e,t,i){let n=0;i>this._buffer.length-this.count&&(i=this._buffer.length-this.count);const r=Math.min(this._buffer.length-this._writePosition,i);return this._buffer.set(e.subarray(t,t+r),this._writePosition),this._writePosition+=r,this._writePosition%=this._buffer.length,n+=r,n<i&&(this._buffer.set(e.subarray(t+n,t+n+i-n),this._writePosition),this._writePosition+=i-n,n=i),this.count+=n,n}read(e,t,i){i>this.count&&(i=this.count);let n=0;const r=Math.min(this._buffer.length-this._readPosition,i);return e.set(this._buffer.subarray(this._readPosition,this._readPosition+r),t),n+=r,this._readPosition+=r,this._readPosition%=this._buffer.length,n<i&&(e.set(this._buffer.subarray(this._readPosition,this._readPosition+i-n),t+n),this._readPosition+=i-n,n=i),this.count-=n,n}}class Un{constructor(){this._context=null,this._buffer=null,this._source=null,this._audioNode=null,this._outputBuffer=new Float32Array(0),this.ready=new yi,this.samplesPlayed=new _i,this.sampleRequest=new yi}get sampleRate(){return this._context?this._context.sampleRate:Un.PreferredSampleRate}open(){this.patchIosSampleRate(),this._circularBuffer=new jn(Un.BufferSize*Un.BufferCount),this._context=this.createAudioContext();let e=this._context;if("suspended"===e.state){let t=()=>{e.resume(),window.setTimeout((()=>{"running"===e.state&&(document.body.removeEventListener("touchend",t,!1),document.body.removeEventListener("click",t,!1))}),0)};document.body.addEventListener("touchend",t,!1),document.body.addEventListener("click",t,!1)}this.ready.trigger()}activate(){this._context||(this._context=this.createAudioContext()),this._context.resume()}patchIosSampleRate(){let e=navigator.userAgent;if(-1!==e.indexOf("iPhone")||0!==e.indexOf("iPad")){let e=this.createAudioContext(),t=e.createBuffer(1,1,Un.PreferredSampleRate),i=e.createBufferSource();i.buffer=t,i.connect(e.destination),i.start(0),i.disconnect(0),e.close()}}createAudioContext(){if("AudioContext"in na.globalThis)return new AudioContext;if("webkitAudioContext"in na.globalThis)return new webkitAudioContext;throw new he(e.AlphaTabErrorType.General,"AudioContext not found")}play(){let e=this._context;e&&("suspended"!==e.state&&"interrupted"!==e.state||e.resume(),this._buffer=e.createBuffer(2,4096,e.sampleRate),this._audioNode=e.createScriptProcessor(4096,0,2),this._audioNode.onaudioprocess=this.generateSound.bind(this),this._circularBuffer.clear(),this.requestBuffers(),this._source=e.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this._source.connect(this._audioNode,0,0),this._source.start(0),this._audioNode.connect(e.destination,0,0))}pause(){this._source&&(this._source.stop(0),this._source.disconnect(0)),this._source=null,this._audioNode&&this._audioNode.disconnect(0),this._audioNode=null}addSamples(e){this._circularBuffer.write(e,0,e.length)}resetSamples(){this._circularBuffer.clear()}requestBuffers(){let e=20480;if(this._circularBuffer.count<e&&this.sampleRequest)for(let e=0;e<5;e++)this.sampleRequest.trigger()}generateSound(e){let t=e.outputBuffer.getChannelData(0),i=e.outputBuffer.getChannelData(1),n=t.length+i.length,r=this._outputBuffer;r.length!=n&&(r=new Float32Array(n),this._outputBuffer=r),this._circularBuffer.read(r,0,Math.min(r.length,this._circularBuffer.count));let s=0;for(let e=0;e<t.length;e++)t[e]=r[s++],i[e]=r[s++];this.samplesPlayed.trigger(t.length),this.requestBuffers()}}Un.BufferSize=4096,Un.BufferCount=10,Un.PreferredSampleRate=44100;class Gn{constructor(e,t,i){this._workerIsReadyForPlayback=!1,this._workerIsReady=!1,this._outputIsReady=!1,this._state=j.Paused,this._masterVolume=0,this._metronomeVolume=0,this._countInVolume=0,this._playbackSpeed=0,this._tickPosition=0,this._timePosition=0,this._isLooping=!1,this._playbackRange=null,this._midiEventsPlayedFilter=[],this.ready=new yi,this.readyForPlayback=new yi,this.finished=new yi,this.soundFontLoaded=new yi,this.soundFontLoadFailed=new _i,this.midiLoaded=new _i,this.midiLoadFailed=new _i,this.stateChanged=new _i,this.positionChanged=new _i,this.midiEventsPlayed=new _i,this._workerIsReadyForPlayback=!1,this._workerIsReady=!1,this._outputIsReady=!1,this._state=j.Paused,this._masterVolume=0,this._metronomeVolume=0,this._playbackSpeed=0,this._tickPosition=0,this._timePosition=0,this._isLooping=!1,this._playbackRange=null,this._output=e,this._output.ready.on(this.onOutputReady.bind(this)),this._output.samplesPlayed.on(this.onOutputSamplesPlayed.bind(this)),this._output.sampleRequest.on(this.onOutputSampleRequest.bind(this)),this._output.open();try{let e=new Blob(["importScripts('"+t+"')"]);this._synth=new Worker(URL.createObjectURL(e))}catch(e){try{this._synth=new Worker(t)}catch(e){return void Oe.error("AlphaSynth","Failed to create WebWorker: "+e)}}this._synth.addEventListener("message",this.handleWorkerMessage.bind(this),!1),this._synth.postMessage({cmd:"alphaSynth.initialize",sampleRate:this._output.sampleRate,logLevel:i}),this.masterVolume=1,this.playbackSpeed=1,this.metronomeVolume=0}get isReady(){return this._workerIsReady&&this._outputIsReady}get isReadyForPlayback(){return this._workerIsReadyForPlayback}get state(){return this._state}get logLevel(){return Oe.logLevel}set logLevel(e){Oe.logLevel=e,this._synth.postMessage({cmd:"alphaSynth.setLogLevel",value:e})}get masterVolume(){return this._masterVolume}set masterVolume(e){e=Math.max(e,jt.MinVolume),this._masterVolume=e,this._synth.postMessage({cmd:"alphaSynth.setMasterVolume",value:e})}get metronomeVolume(){return this._metronomeVolume}set metronomeVolume(e){e=Math.max(e,jt.MinVolume),this._metronomeVolume=e,this._synth.postMessage({cmd:"alphaSynth.setMetronomeVolume",value:e})}get countInVolume(){return this._countInVolume}set countInVolume(e){e=Math.max(e,jt.MinVolume),this._countInVolume=e,this._synth.postMessage({cmd:"alphaSynth.setCountInVolume",value:e})}get midiEventsPlayedFilter(){return this._midiEventsPlayedFilter}set midiEventsPlayedFilter(e){this._midiEventsPlayedFilter=e,this._synth.postMessage({cmd:"alphaSynth.setMidiEventsPlayedFilter",value:e})}get playbackSpeed(){return this._playbackSpeed}set playbackSpeed(e){e=hi.clamp(e,jt.MinPlaybackSpeed,jt.MaxPlaybackSpeed),this._playbackSpeed=e,this._synth.postMessage({cmd:"alphaSynth.setPlaybackSpeed",value:e})}get tickPosition(){return this._tickPosition}set tickPosition(e){e<0&&(e=0),this._tickPosition=e,this._synth.postMessage({cmd:"alphaSynth.setTickPosition",value:e})}get timePosition(){return this._timePosition}set timePosition(e){e<0&&(e=0),this._timePosition=e,this._synth.postMessage({cmd:"alphaSynth.setTimePosition",value:e})}get isLooping(){return this._isLooping}set isLooping(e){this._isLooping=e,this._synth.postMessage({cmd:"alphaSynth.setIsLooping",value:e})}get playbackRange(){return this._playbackRange}set playbackRange(e){e&&(e.startTick<0&&(e.startTick=0),e.endTick<0&&(e.endTick=0)),this._playbackRange=e,this._synth.postMessage({cmd:"alphaSynth.setPlaybackRange",value:e})}destroy(){this._synth.terminate()}play(){return this._output.activate(),this._synth.postMessage({cmd:"alphaSynth.play"}),!0}pause(){this._synth.postMessage({cmd:"alphaSynth.pause"})}playPause(){this._output.activate(),this._synth.postMessage({cmd:"alphaSynth.playPause"})}stop(){this._synth.postMessage({cmd:"alphaSynth.stop"})}playOneTimeMidiFile(e){this._synth.postMessage({cmd:"alphaSynth.playOneTimeMidiFile",midi:sn.midiFileToJsObject(e)})}loadSoundFont(e,t){this._synth.postMessage({cmd:"alphaSynth.loadSoundFontBytes",data:e,append:t})}loadSoundFontFromUrl(e,t,i){Oe.debug("AlphaSynth",`Start loading Soundfont from url ${e}`);let n=new XMLHttpRequest;n.open("GET",e,!0,null,null),n.responseType="arraybuffer",n.onload=e=>{let i=new Uint8Array(n.response);this.loadSoundFont(i,t)},n.onerror=e=>{Oe.error("AlphaSynth","Loading failed: "+e.message),this.soundFontLoadFailed.trigger(new Fn(e.message,n))},n.onprogress=e=>{Oe.debug("AlphaSynth",`Soundfont downloading: ${e.loaded}/${e.total} bytes`),i(new sa(e.loaded,e.total))},n.send()}resetSoundFonts(){this._synth.postMessage({cmd:"alphaSynth.resetSoundFonts"})}loadMidiFile(e){this._synth.postMessage({cmd:"alphaSynth.loadMidi",midi:sn.midiFileToJsObject(e)})}setChannelMute(e,t){this._synth.postMessage({cmd:"alphaSynth.setChannelMute",channel:e,mute:t})}resetChannelStates(){this._synth.postMessage({cmd:"alphaSynth.resetChannelStates"})}setChannelSolo(e,t){this._synth.postMessage({cmd:"alphaSynth.setChannelSolo",channel:e,solo:t})}setChannelVolume(e,t){t=Math.max(t,jt.MinVolume),this._synth.postMessage({cmd:"alphaSynth.setChannelVolume",channel:e,volume:t})}handleWorkerMessage(e){let t=e.data;switch(t.cmd){case"alphaSynth.ready":this._workerIsReady=!0,this.checkReady();break;case"alphaSynth.readyForPlayback":this._workerIsReadyForPlayback=!0,this.checkReadyForPlayback();break;case"alphaSynth.positionChanged":this._timePosition=t.currentTime,this._tickPosition=t.currentTick,this.positionChanged.trigger(new qt(t.currentTime,t.endTime,t.currentTick,t.endTick,t.isSeek));break;case"alphaSynth.midiEventsPlayed":this.midiEventsPlayed.trigger(new wi(t.events.map(sn.jsObjectToMidiEvent)));break;case"alphaSynth.playerStateChanged":this._state=t.state,this.stateChanged.trigger(new $t(t.state,t.stopped));break;case"alphaSynth.finished":this.finished.trigger();break;case"alphaSynth.soundFontLoaded":this.soundFontLoaded.trigger();break;case"alphaSynth.soundFontLoadFailed":this.soundFontLoadFailed.trigger(t.error);break;case"alphaSynth.midiLoaded":this.checkReadyForPlayback(),this.midiLoaded.trigger(new qt(t.currentTime,t.endTime,t.currentTick,t.endTick,t.isSeek));break;case"alphaSynth.midiLoadFailed":this.checkReadyForPlayback(),this.midiLoadFailed.trigger(t.error);break;case"alphaSynth.output.addSamples":this._output.addSamples(t.samples);break;case"alphaSynth.output.play":this._output.play();break;case"alphaSynth.output.pause":this._output.pause();break;case"alphaSynth.output.resetSamples":this._output.resetSamples()}}checkReady(){this.isReady&&this.ready.trigger()}checkReadyForPlayback(){this.isReadyForPlayback&&this.readyForPlayback.trigger()}onOutputSampleRequest(){this._synth.postMessage({cmd:"alphaSynth.output.sampleRequest"})}onOutputSamplesPlayed(e){this._synth.postMessage({cmd:"alphaSynth.output.samplesPlayed",samples:e})}onOutputReady(){this._outputIsReady=!0,this.checkReady()}}class Kn{constructor(e,t){if(this._width=0,this.boundsLookup=null,this.preRender=new _i,this.partialRenderFinished=new _i,this.renderFinished=new _i,this.postRenderFinished=new yi,this.error=new _i,this._api=e,t.core.scriptFile){try{let e=`importScripts('${t.core.scriptFile}')`,i=new Blob([e]);this._worker=new Worker(URL.createObjectURL(i))}catch(e){try{this._worker=new Worker(t.core.scriptFile)}catch(t){return void Oe.error("Rendering",`Failed to create WebWorker: ${e}`)}}this._worker.postMessage({cmd:"alphaTab.initialize",settings:this.serializeSettingsForWorker(t)}),this._worker.addEventListener("message",this.handleWorkerMessage.bind(this))}else Oe.error("Rendering","Could not detect alphaTab script file, cannot initialize renderer")}destroy(){this._worker.terminate()}updateSettings(e){this._worker.postMessage({cmd:"alphaTab.updateSettings",settings:this.serializeSettingsForWorker(e)})}serializeSettingsForWorker(e){const t=sn.settingsToJsObject(e);return t.delete("player"),t}render(){this._worker.postMessage({cmd:"alphaTab.render"})}resizeRender(){this._worker.postMessage({cmd:"alphaTab.resizeRender"})}get width(){return this._width}set width(e){this._width=e,this._worker.postMessage({cmd:"alphaTab.setWidth",width:e})}handleWorkerMessage(e){let t=e.data;switch(t.cmd){case"alphaTab.preRender":this.preRender.trigger(t.resize);break;case"alphaTab.partialRenderFinished":this.partialRenderFinished.trigger(t.result);break;case"alphaTab.renderFinished":this.renderFinished.trigger(t.result);break;case"alphaTab.postRenderFinished":this.boundsLookup=gn.fromJson(t.boundsLookup,this._api.score),this.postRenderFinished.trigger();break;case"alphaTab.error":this.error.trigger(t.error)}}renderScore(e,t){let i=sn.scoreToJsObject(e);this._worker.postMessage({cmd:"alphaTab.renderScore",score:i,trackIndexes:t,fontSizes:ln.FontSizeLookupTables})}}class $n{constructor(e,t,i,n){this.cursorWrapper=e,this.barCursor=t,this.beatCursor=i,this.selectionWrapper=n}}class qn{constructor(e){this._fontCheckers=new Map,this._contents=null,this._file=null,this._totalResultCount=0,this._initialTrackIndexes=null,this.rootContainerBecameVisible=new yi,this.canRenderChanged=new yi,e.classList.add("alphaTab"),this.rootContainer=new zn(e),this.areWorkersSupported="Worker"in window,na.bravuraFontChecker.fontLoaded.on(this.onFontLoaded.bind(this)),this._intersectionObserver=new IntersectionObserver(this.onElementVisibilityChanged.bind(this),{threshold:[0,.01,1]}),this._intersectionObserver.observe(e)}get resizeThrottle(){return 10}get canRender(){return this.areAllFontsLoaded()}areAllFontsLoaded(){if(na.bravuraFontChecker.checkForFontAvailability(),!na.bravuraFontChecker.isFontLoaded)return!1;let e=!1;for(const t of this._fontCheckers.values())t.isFontLoaded||(e=!0);return!e&&(Oe.debug("Font","All fonts loaded: "+this._fontCheckers.size),!0)}onFontLoaded(e){ln.generateFontLookup(e),this.areAllFontsLoaded()&&this.canRenderChanged.trigger()}onElementVisibilityChanged(e){for(const t of e)if(t.isIntersecting){const e=t.target;e===this.rootContainer.element?(this.rootContainerBecameVisible.trigger(),this._intersectionObserver.unobserve(this.rootContainer.element)):"svg"in e.dataset&&(this.replacePlaceholder(e,e.dataset.svg),this._intersectionObserver.unobserve(e))}}createWorkerRenderer(){return new Kn(this._api,this._api.settings)}initialize(t,i){let n;this._api=t,n=i instanceof Mi?i:sn.jsObjectToSettings(i);let r=this.getDataAttributes();rn.fromJson(n,r),n.notation.notationMode===e.NotationMode.SongBook&&n.setSongBookModeSettings(),t.settings=n,this.setupFontCheckers(n),this._initialTrackIndexes=this.parseTracks(n.core.tracks),this._contents="";let s=t.container;n.core.tex&&(this._contents=s.element.innerHTML,s.element.innerHTML=""),this.createStyleElement(n),this._file=n.core.file}setupFontCheckers(e){this.registerFontChecker(e.display.resources.copyrightFont),this.registerFontChecker(e.display.resources.effectFont),this.registerFontChecker(e.display.resources.fingeringFont),this.registerFontChecker(e.display.resources.graceFont),this.registerFontChecker(e.display.resources.markerFont),this.registerFontChecker(e.display.resources.tablatureFont),this.registerFontChecker(e.display.resources.titleFont),this.registerFontChecker(e.display.resources.wordsFont),this.registerFontChecker(e.display.resources.barNumberFont),this.registerFontChecker(e.display.resources.fretboardNumberFont),this.registerFontChecker(e.display.resources.subTitleFont)}registerFontChecker(e){if(!this._fontCheckers.has(e.family)){let t=new Hn(e.family);this._fontCheckers.set(e.family,t),t.fontLoaded.on(this.onFontLoaded.bind(this)),t.checkForFontAvailability()}}destroy(){this.rootContainer.element.innerHTML=""}createCanvasElement(){let e=document.createElement("div");return e.className="at-surface",e.style.fontSize="0",e.style.overflow="hidden",e.style.lineHeight="0",new zn(e)}triggerEvent(e,t,i=null,n){let r=e.element;t="alphaTab."+t;let s=document.createEvent("CustomEvent"),o=n?n.mouseEvent:null;if(s.initCustomEvent(t,!1,!1,i),o&&(s.originalEvent=o),r.dispatchEvent(s),window&&"jQuery"in window){let e=window.jQuery,n=[];n.push(i),o&&n.push(o),e(r).trigger(t,n)}}load(e,t,i){if(e instanceof $e)return t(e),!0;if(e instanceof ArrayBuffer){let i=new Uint8Array(e);return t(Wn.loadScoreFromBytes(i,this._api.settings)),!0}return e instanceof Uint8Array?(t(Wn.loadScoreFromBytes(e,this._api.settings)),!0):"string"==typeof e&&(Wn.loadScoreAsync(e,t,i,this._api.settings),!0)}loadSoundFont(e,t){return!(!this._api.player||(e instanceof ArrayBuffer?(this._api.player.loadSoundFont(new Uint8Array(e),t),0):e instanceof Uint8Array?(this._api.player.loadSoundFont(e,t),0):"string"!=typeof e||(this._api.loadSoundFontFromUrl(e,t),0)))}initialRender(){this._api.renderer.preRender.on((e=>{this._totalResultCount=0}));const e=()=>{var e;this._api.renderer.width=0|this.rootContainer.width,this._api.renderer.updateSettings(this._api.settings),this._contents?(this._api.tex(this._contents,null!==(e=this._initialTrackIndexes)&&void 0!==e?e:void 0),this._initialTrackIndexes=null):this._file&&Wn.loadScoreAsync(this._file,(e=>{var t;this._api.renderScore(e,null!==(t=this._initialTrackIndexes)&&void 0!==t?t:void 0),this._initialTrackIndexes=null}),(e=>{this._api.onError(e)}),this._api.settings)};this.rootContainer.isVisible?e():this.rootContainerBecameVisible.on(e)}createStyleElement(e){let t=this._api.container.element.ownerDocument;na.createStyleElement(t,e.core.fontDirectory)}parseTracks(e){if(!e)return[];let t=[];if("string"==typeof e)try{if("all"===e)return[-1];e=JSON.parse(e)}catch(t){e=[0]}if("number"==typeof e)t.push(e);else if("length"in e){let i=e.length,n=e;for(let e=0;e<i;e++){let i=n[e],r=0;r="number"==typeof i?i:"index"in i?i.index:parseInt(i.toString()),(r>=0||-1===r)&&t.push(r)}}else"index"in e&&t.push(e.index);return t}getDataAttributes(){let e=new Map,t=this._api.container.element;if(t.dataset)for(let i of Object.keys(t.dataset)){let n=t.dataset[i];try{let e=n;n=JSON.parse(e)}catch(e){""===n&&(n=null)}e.set(i,n)}else for(let i=0;i<t.attributes.length;i++){let n=t.attributes.item(i),r=n.nodeName;if(r.startsWith("data-")){let t=r.substr(5).split("-"),i=t[0];for(let e=1;e<t.length;e++)i+=t[e].substr(0,1).toUpperCase()+t[e].substr(1);let s=n.nodeValue;try{s=JSON.parse(s)}catch(e){""===s&&(s=null)}e.set(i,s)}}return e}beginAppendRenderResults(e){let t=this._api.canvasElement.element;if(e){let i=e.renderResult;if("string"==typeof i){let n;this._totalResultCount<t.childElementCount?n=t.childNodes.item(this._totalResultCount):(n=document.createElement("div"),t.appendChild(n)),n.style.width=e.width+"px",n.style.height=e.height+"px",n.style.display="inline-block",this._api.settings.core.enableLazyLoading?(n.dataset.svg=i,this._intersectionObserver.observe(n)):this.replacePlaceholder(n,i)}else this._totalResultCount<t.childElementCount?t.replaceChild(e.renderResult,t.childNodes.item(this._totalResultCount)):t.appendChild(e.renderResult);this._totalResultCount++}else for(;t.childElementCount>this._totalResultCount;)t.removeChild(t.lastChild)}replacePlaceholder(e,t){var i;if("string"==typeof e.outerHTML)e.outerHTML=t;else{const n=document.createElement("div");n.innerHTML=t,null===(i=e.parentNode)||void 0===i||i.replaceChild(n.firstChild,e)}}createWorkerPlayer(){let e="ScriptProcessorNode"in window,t=na.scriptFile;if(!t)return Oe.error("Player","alphaTab script file could not be detected, player cannot initialize"),null;let i=null;return e&&(Oe.debug("Player","Will use webworkers for synthesizing and web audio api for playback"),i=new Gn(new Un,t,this._api.settings.core.logLevel)),i?i.ready.on((()=>{this._api.settings.player.soundFont&&this._api.loadSoundFontFromUrl(this._api.settings.player.soundFont,!1)})):Oe.error("Player","Player requires webworkers and web audio api, browser unsupported",null),i}beginInvoke(e){window.requestAnimationFrame((()=>{e()}))}highlightElements(e){let t=this._api.container.element.getElementsByClassName(e);for(let e=0;e<t.length;e++)t.item(e).classList.add("at-highlight")}removeHighlights(){let e=this._api.container.element.getElementsByClassName("at-highlight");for(;e.length>0;)e.item(0).classList.remove("at-highlight")}destroyCursors(){let e=this._api.container.element,t=e.querySelector(".at-cursors");e.removeChild(t)}createCursors(){let e=this._api.container.element,t=document.createElement("div");t.classList.add("at-cursors");let i=document.createElement("div");i.classList.add("at-selection");let n=document.createElement("div");n.classList.add("at-cursor-bar");let r=document.createElement("div");return r.classList.add("at-cursor-beat"),e.style.position="relative",e.style.textAlign="left",t.style.position="absolute",t.style.zIndex="1000",t.style.display="inline",t.style.pointerEvents="none",i.style.position="absolute",n.style.position="absolute",r.style.position="absolute",r.style.transition="all 0s linear",e.insertBefore(t,e.firstChild),t.appendChild(i),t.appendChild(n),t.appendChild(r),new $n(new zn(t),new zn(n),new zn(r),new zn(i))}getOffset(e,t){let i=t.element,n=i.getBoundingClientRect(),r=n.top+i.ownerDocument.defaultView.pageYOffset,s=n.left+i.ownerDocument.defaultView.pageXOffset;if(e){let t=e.element,i=t.nodeName.toLowerCase();if("html"!==i&&"body"!==i){let i=this.getOffset(null,e);r=r+t.scrollTop-i.y,s=s+t.scrollLeft-i.x}}let o=new lt;return o.x=s,o.y=r,o.w=n.width,o.h=n.height,o}getScrollContainer(){let e="string"==typeof this._api.settings.player.scrollElement?document.querySelector(this._api.settings.player.scrollElement):this._api.settings.player.scrollElement,t=e.nodeName.toLowerCase();return"html"!==t&&"body"!==t||(e="scrollingElement"in document?document.scrollingElement:-1!==navigator.userAgent.indexOf("WebKit")?document.body:document.documentElement),new zn(e)}createSelectionElement(){let e=document.createElement("div");return e.style.position="absolute",new zn(e)}scrollToY(e,t,i){this.internalScrollToY(e.element,t,i)}scrollToX(e,t,i){this.internalScrollToX(e.element,t,i)}internalScrollToY(e,t,i){let n=e.scrollTop,r=t-n,s=0,o=t=>{0===s&&(s=t);let a=t-s,l=Math.min(a/i,1);e.scrollTop=n+r*l|0,a<i&&window.requestAnimationFrame(o)};window.requestAnimationFrame(o)}internalScrollToX(e,t,i){let n=e.scrollLeft,r=t-n,s=0,o=t=>{0===s&&(s=t);let a=t-s,l=Math.min(a/i,1);e.scrollLeft=n+r*l|0,a<i&&window.requestAnimationFrame(o)};window.requestAnimationFrame(o)}}class Zn extends Bn{constructor(e,t){super(new qn(e),t),this.soundFontLoad=new _i}tex(e,t){let i=this.uiFacade;super.tex(e,i.parseTracks(t))}print(t,i=null){let n=window.open("","","width=0,height=0"),r=n.document.createElement("div");t?r.style.width=t:this.settings.display.layoutMode===e.LayoutMode.Horizontal?r.style.width="297mm":r.style.width="210mm",n.document.write("<!DOCTYPE html><html></head><body></body></html>"),n.document.body.appendChild(r);let s=void 0!==window.screenLeft?window.screenLeft:window.left,o=void 0!==window.screenTop?window.screenTop:window.top,a="innerWidth"in window?window.innerWidth:"clientWidth"in document.documentElement?document.documentElement.clientWidth:window.screen.width,l="innerHeight"in window?window.innerHeight:"clientHeight"in document.documentElement?document.documentElement.clientHeight:window.screen.height,c=r.offsetWidth+50,h=window.innerHeight,u=(a/2|0)-(c/2|0)+s,d=(l/2|0)-(h/2|0)+o;n.resizeTo(c,h),n.moveTo(u,d),n.focus();let f=sn.jsObjectToSettings(sn.settingsToJsObject(this.settings));f.core.enableLazyLoading=!1,f.core.useWorkers=!1,f.display.scale=.8,f.display.stretchForce=.8,rn.fromJson(f,i);let p=new Zn(r,f);p.renderer.postRenderFinished.on((()=>{p.canvasElement.height=-1,n.print()})),p.renderTracks(this.tracks)}downloadMidi(){if(!this.score)return;let e=new Ci,t=new yn(e);new Tn(this.score,this.settings,t).generate();let i=e.toBinary(),n=this.score.title?`${this.score.title}.mid`:"File.mid",r=document.createElement("a");r.download=n;let s=new Blob([i],{type:"audio/midi"}),o=URL.createObjectURL(s);r.href=o,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}changeTrackMute(e,t){let i=this.trackIndexesToTracks(this.uiFacade.parseTracks(e));super.changeTrackMute(i,t)}changeTrackSolo(e,t){let i=this.trackIndexesToTracks(this.uiFacade.parseTracks(e));super.changeTrackSolo(i,t)}changeTrackVolume(e,t){let i=this.trackIndexesToTracks(this.uiFacade.parseTracks(e));super.changeTrackVolume(i,t)}trackIndexesToTracks(e){if(!this.score)return[];let t=[];if(1===e.length&&-1===e[0])for(let e of this.score.tracks)t.push(e);else for(let i of e)i>=0&&i<this.score.tracks.length&&t.push(this.score.tracks[i]);return t}loadSoundFontFromUrl(e,t){this.player&&this.player.loadSoundFontFromUrl(e,t,(e=>{this.soundFontLoad.trigger(e),this.uiFacade.triggerEvent(this.container,"soundFontLoad",e)}))}}class Yn{constructor(){this._initListeners=[]}exec(e,t,i){if("string"!=typeof t&&(i=[t],t="init"),95===t.charCodeAt(0)||"exec"===t)return null;let n=new jQuery(e),r=n.data("alphaTab");if("destroy"===t&&!r)return null;if("init"!==t&&!r)throw new Error("alphaTab not initialized");let s=this[t];if(s){let e=[n,r].concat(i);return s.apply(this,e)}return Oe.error("Api","Method '"+t+"' does not exist on jQuery.alphaTab"),null}init(e,t,i){if(!t){t=new Zn(e[0],i),e.data("alphaTab",t);for(let n of this._initListeners)n(e,t,i)}}destroy(e,t){e.removeData("alphaTab"),t.destroy()}print(e,t,i,n){t.print(i,n)}load(e,t,i,n){return t.load(i,n)}render(e,t){t.render()}renderScore(e,t,i,n){t.renderScore(i,n)}renderTracks(e,t,i){t.renderTracks(i)}invalidate(e,t){t.render()}tex(e,t,i,n){t.tex(i,n)}muteTrack(e,t,i,n){t.changeTrackMute(i,n)}soloTrack(e,t,i,n){t.changeTrackSolo(i,n)}trackVolume(e,t,i,n){t.changeTrackVolume(i,n)}loadSoundFont(e,t,i,n){t.loadSoundFont(i,n)}resetSoundFonts(e,t){t.resetSoundFonts()}pause(e,t){t.pause()}play(e,t){return t.play()}playPause(e,t){t.playPause()}stop(e,t){t.stop()}api(e,t){return t}player(e,t){return t.player}isReadyForPlayback(e,t){return t.isReadyForPlayback}playerState(e,t){return t.playerState}masterVolume(e,t,i){return"number"==typeof i&&(t.masterVolume=i),t.masterVolume}metronomeVolume(e,t,i){return"number"==typeof i&&(t.metronomeVolume=i),t.metronomeVolume}countInVolume(e,t,i){return"number"==typeof i&&(t.countInVolume=i),t.countInVolume}midiEventsPlayedFilter(e,t,i){return Array.isArray(i)&&(t.midiEventsPlayedFilter=i),t.midiEventsPlayedFilter}playbackSpeed(e,t,i){return"number"==typeof i&&(t.playbackSpeed=i),t.playbackSpeed}tickPosition(e,t,i){return"number"==typeof i&&(t.tickPosition=i),t.tickPosition}timePosition(e,t,i){return"number"==typeof i&&(t.timePosition=i),t.timePosition}loop(e,t,i){return"boolean"==typeof i&&(t.isLooping=i),t.isLooping}renderer(e,t){return t.renderer}score(e,t){return t.score}settings(e,t){return t.settings}tracks(e,t){return t.tracks}_oninit(e){this._initListeners.push(e)}static restore(e){new jQuery(e).empty().removeData("alphaTab")}}class Xn{constructor(){this.buffer="",this._currentPath="",this._currentPathIsEmpty=!0,this.color=new me(255,255,255,255),this.lineWidth=1,this.font=new _e("Arial",10,r.Plain),this.textAlign=x.Left,this.textBaseline=k.Top}beginRender(e,t){this.buffer=`<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="${0|e}px" height="${0|t}px" class="at-surface-svg">\n`,this._currentPath="",this._currentPathIsEmpty=!0,this.textBaseline=k.Top}beginGroup(e){this.buffer+=`<g class="${e}">`}endGroup(){this.buffer+="</g>"}endRender(){return this.buffer+="</svg>",this.buffer}fillRect(e,t,i,n){i>0&&(this.buffer+=`<rect x="${0|e}" y="${0|t}" width="${i}" height="${n}" fill="${this.color.rgba}" />\n`)}strokeRect(e,t,i,n){this.buffer+=`<rect x="${0|e}" y="${0|t}" width="${i}" height="${n}" stroke="${this.color.rgba}"`,1!==this.lineWidth&&(this.buffer+=` stroke-width="${this.lineWidth}"`),this.buffer+=' fill="transparent" />\n'}beginPath(){}closePath(){this._currentPath+=" z"}moveTo(e,t){this._currentPath+=` M${e},${t}`}lineTo(e,t){this._currentPathIsEmpty=!1,this._currentPath+=` L${e},${t}`}quadraticCurveTo(e,t,i,n){this._currentPathIsEmpty=!1,this._currentPath+=` Q${e},${t},${i},${n}`}bezierCurveTo(e,t,i,n,r,s){this._currentPathIsEmpty=!1,this._currentPath+=` C${e},${t},${i},${n},${r},${s}`}fillCircle(e,t,i){this._currentPathIsEmpty=!1,this._currentPath+=` M${e-i},${t} A1,1 0 0,0 ${e+i},${t} A1,1 0 0,0 ${e-i},${t} z`,this.fill()}strokeCircle(e,t,i){this._currentPathIsEmpty=!1,this._currentPath+=` M${e-i},${t} A1,1 0 0,0 ${e+i},${t} A1,1 0 0,0 ${e-i},${t} z`,this.stroke()}fill(){this._currentPathIsEmpty||(this.buffer+=`<path d="${this._currentPath}"`,"#000000"!==this.color.rgba&&(this.buffer+=` fill="${this.color.rgba}"`),this.buffer+=' style="stroke: none"/>'),this._currentPath="",this._currentPathIsEmpty=!0}stroke(){if(!this._currentPathIsEmpty){let e=`<path d="${this._currentPath}" stroke="${this.color.rgba}"`;1!==this.lineWidth&&(e+=` stroke-width="${this.lineWidth}"`),e+=' style="fill: none" />',this.buffer+=e}this._currentPath="",this._currentPathIsEmpty=!0}fillText(e,t,i){if(""===e)return;let n=`<text x="${0|t}" y="${0|i}" style="stroke: none; font:${this.font.toCssString(this.settings.display.scale)}" ${this.getSvgBaseLine()}`;"#000000"!==this.color.rgba&&(n+=` fill="${this.color.rgba}"`),this.textAlign!==x.Left&&(n+=` text-anchor="${this.getSvgTextAlignment(this.textAlign)}"`),n+=`>${Xn.escapeText(e)}</text>`,this.buffer+=n}static escapeText(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}getSvgTextAlignment(e){switch(e){case x.Left:return"start";case x.Center:return"middle";case x.Right:return"end"}return""}getSvgBaseLine(){switch(this.textBaseline){case k.Top:return'dominant-baseline="hanging"';case k.Bottom:return'dominant-baseline="bottom"';case k.Middle:default:return""}}measureText(e){return e?ln.measureString(e,this.font.family,this.font.size,this.font.style):0}onRenderFinished(){return null}beginRotate(e,t,i){this.buffer+='<g transform="translate('+e+" ,"+t+") rotate( "+i+')">'}endRotate(){this.buffer+="</g>"}}class Qn extends Xn{constructor(){super()}fillMusicFontSymbol(e,t,i,n,r=!1){n!==C.None&&this.fillMusicFontSymbolText(e,t,i,`&#${n};`,r)}fillMusicFontSymbols(e,t,i,n,r=!1){let s="";for(let e of n)e!==C.None&&(s+=`&#${e};`);this.fillMusicFontSymbolText(e,t,i,s,r)}fillMusicFontSymbolText(e,t,i,n,r=!1){this.buffer+=`<g transform="translate(${e} ${t})" class="at" ><text`,this.buffer+=1!==i?` style="font-size: ${100*i}%; stroke:none"`:' style="stroke:none"',"#000000"!==this.color.rgba&&(this.buffer+=` fill="${this.color.rgba}"`),r&&(this.buffer+=' text-anchor="'+this.getSvgTextAlignment(x.Center)+'"'),this.buffer+=`>${n}</text></g>`}}class Jn{constructor(){this.isInAccolade=!0,this.isRelevantForBoundsLookup=!0,this.hideOnMultiTrack=!1,this.hideOnPercussionTrack=!1}canCreate(e,t){return!this.hideOnPercussionTrack||!t.isPercussion}}!function(e){e[e.PreNotes=0]="PreNotes",e[e.OnNotes=1]="OnNotes",e[e.MiddleNotes=2]="MiddleNotes",e[e.Stem=3]="Stem",e[e.PostNotes=4]="PostNotes",e[e.EndBeat=5]="EndBeat"}(Z||(Z={}));class er extends Nn{constructor(e,t){super(e,t),this.glyphs=null}get isEmpty(){return!this.glyphs||0===this.glyphs.length}doLayout(){if(!this.glyphs||0===this.glyphs.length)return void(this.width=0);let e=0;for(let t=0,i=this.glyphs.length;t<i;t++){let i=this.glyphs[t];i.renderer=this.renderer,i.doLayout(),e=Math.max(e,i.width)}this.width=e}addGlyph(e){this.glyphs||(this.glyphs=[]),this.renderer&&(e.renderer=this.renderer),this.glyphs.push(e)}paint(e,t,i){let n=this.glyphs;if(n&&0!==n.length)for(let r of n)r.paint(e+this.x,t+this.y,i)}}class tr extends er{constructor(){super(0,0),this.glyphs=[]}addGlyph(e){e.x=0===this.glyphs.length?0:this.glyphs[this.glyphs.length-1].x+this.glyphs[this.glyphs.length-1].width,e.renderer=this.renderer,e.doLayout(),this.width=e.x+e.width,super.addGlyph(e)}}class ir extends er{constructor(e,t,i){super(e,t),this.voice=i,this.beatGlyphs=[],this.tupletGroups=[]}scaleToWidth(e){const t=this.renderer.scale;let i=this.renderer.layoutingInfo.spaceToForce(e/t);this.scaleToForce(i)}scaleToForce(e){const t=this.renderer.scale;this.width=this.renderer.layoutingInfo.calculateVoiceWidth(e)*t;let i=this.renderer.layoutingInfo.buildOnTimePositions(e),n=this.beatGlyphs;for(let e=0,r=n.length;e<r;e++){let s=n[e];switch(s.beat.graceType){case m.None:s.x=i.get(s.beat.absoluteDisplayStart)*t-s.onTimeX;break;default:const r=s.beat.graceGroup.beats[0].absoluteDisplayStart,o=s.beat.graceGroup.id;if(s.beat.graceGroup.isComplete&&i.has(r)){s.x=i.get(r)*t-s.onTimeX;let e=this.renderer.layoutingInfo.allGraceRods.get(o),n=this.renderer.layoutingInfo.springs.get(r).preBeatWidth;s.x-=n,s.x-=e[s.beat.graceIndex].postSpringWidth,s.x+=e[s.beat.graceIndex].graceBeatWidth;const a=e[s.beat.graceGroup.beats.length-1];s.x-=a.graceBeatWidth}else{let t=this.renderer.layoutingInfo.incompleteGraceRods.get(o);const i=t[s.beat.graceIndex].postSpringWidth-t[s.beat.graceIndex].preSpringWidth;e>0?0===s.beat.graceIndex?s.x=n[e-1].x+n[e-1].width:s.x=n[e-1].x+t[s.beat.graceIndex-1].postSpringWidth-t[s.beat.graceIndex-1].preSpringWidth-i:s.x=-i}}if(e>0){let t=s.x-n[e-1].x;n[e-1].scaleToWidth(t)}if(e===r-1){let e=this.width-n[n.length-1].x;s.scaleToWidth(e)}}}registerLayoutingInfo(e){e.updateVoiceSize(this.width);let t=this.beatGlyphs;for(let i of t)i.registerLayoutingInfo(e)}applyLayoutingInfo(e){let t=this.beatGlyphs;for(let i of t)i.applyLayoutingInfo(e);this.scaleToForce(Math.max(this.renderer.settings.display.stretchForce,e.minStretchForce))}addGlyph(e){let t=e;e.x=0===this.beatGlyphs.length?0:this.beatGlyphs[this.beatGlyphs.length-1].x+this.beatGlyphs[this.beatGlyphs.length-1].width,e.renderer=this.renderer,e.doLayout(),this.beatGlyphs.push(t),this.width=e.x+e.width,t.beat.hasTuplet&&t.beat.tupletGroup.beats[0].id===t.beat.id&&this.tupletGroups.push(t.beat.tupletGroup)}doLayout(){}paint(e,t,i){i.color=0===this.voice.index?this.renderer.resources.mainGlyphColor:this.renderer.resources.secondaryGlyphColor;for(let n=0,r=this.beatGlyphs.length;n<r;n++)this.beatGlyphs[n].paint(e+this.x,t+this.y,i)}}ir.KeySizeBeat="Beat",function(e){e[e.None=0]="None",e[e.Natural=1]="Natural",e[e.Sharp=2]="Sharp",e[e.Flat=3]="Flat",e[e.NaturalQuarterNoteUp=4]="NaturalQuarterNoteUp",e[e.SharpQuarterNoteUp=5]="SharpQuarterNoteUp",e[e.FlatQuarterNoteUp=6]="FlatQuarterNoteUp",e[e.DoubleSharp=7]="DoubleSharp",e[e.DoubleFlat=8]="DoubleFlat"}(Y||(Y={}));class nr{constructor(){this.maxLine=-1e3,this.minLine=-1e3}}class rr{constructor(e){this._registeredAccidentals=new Map,this._appliedScoreLines=new Map,this._appliedScoreLinesByValue=new Map,this._notesByValue=new Map,this._beatLines=new Map,this.maxLineBeat=null,this.minLineBeat=null,this.maxLine=-1e3,this.minLine=-1e3,this._barRenderer=e,this._bar=e.bar}static getPercussionLine(e,t){var i,n;return t<e.staff.track.percussionArticulations.length?e.staff.track.percussionArticulations[t].staffLine:null!==(n=null===(i=Ie.getArticulationByValue(t))||void 0===i?void 0:i.staffLine)&&void 0!==n?n:0}static getNoteValue(e){if(e.isPercussion)return e.percussionArticulation;let t=e.displayValue;switch(e.accidentalMode){case v.ForceDoubleFlat:t+=2;break;case v.ForceDoubleSharp:t-=2;break;case v.ForceFlat:t+=1;break;case v.ForceSharp:t-=1}return t}applyAccidental(e){const t=rr.getNoteValue(e);let i=e.hasQuarterToneOffset;return this.getAccidental(t,i,e.beat,!1,e)}applyAccidentalForValue(e,t,i,n){return this.getAccidental(t,i,e,n,null)}static computeLineWithoutAccidentals(e,t){let i=0;const n=rr.getNoteValue(t);if(e.staff.isPercussion)i=rr.getPercussionLine(e,n);else{const r=t?t.accidentalMode:v.Default;i=rr.calculateNoteLine(e,n,r)}return i}getAccidental(e,t,i,n,r=null){let s=Y.None,o=0;if(this._bar.staff.isPercussion)o=rr.getPercussionLine(this._bar,e);else{const i=r?r.accidentalMode:v.Default;o=rr.calculateNoteLine(this._bar,e,i);let n=this._bar.masterBar.keySignature+7,a=e%12,l=n<7?Y.Flat:Y.Sharp,c=rr.KeySignatureLookup[n][a],h=rr.AccidentalNotes[a];if(t)switch(s=h?l:Y.Natural,s){case Y.Natural:s=Y.NaturalQuarterNoteUp;break;case Y.Sharp:s=Y.SharpQuarterNoteUp;break;case Y.Flat:s=Y.FlatQuarterNoteUp}else{switch(i){case v.ForceSharp:s=Y.Sharp;break;case v.ForceDoubleSharp:s=Y.DoubleSharp;break;case v.ForceFlat:s=Y.Flat;break;case v.ForceDoubleFlat:s=Y.DoubleFlat;break;default:h?s=l:c&&(s=Y.Natural)}let e=!1;if(r&&r.isTieDestination&&0===r.beat.index){const t=this._barRenderer.previousRenderer;t&&t.accidentalHelper.getNoteLine(r.tieOrigin)===o&&(e=!0)}e?s=Y.None:s!==Y.None?(this._registeredAccidentals.has(o)?this._registeredAccidentals.get(o)===s&&(s=Y.None):c&&s===l&&(s=Y.None),s!=Y.None&&this._registeredAccidentals.set(o,s)):this._registeredAccidentals.has(o)?this._registeredAccidentals.get(o)===Y.Natural?s=Y.None:(s=Y.Natural,this._registeredAccidentals.set(o,s)):this._registeredAccidentals.delete(o)}}return r?(this._appliedScoreLines.set(r.id,o),this._notesByValue.set(e,r)):this._appliedScoreLinesByValue.set(e,o),(-1e3===this.minLine||this.minLine<o)&&(this.minLine=o,this.minLineBeat=i),(-1e3===this.maxLine||this.maxLine>o)&&(this.maxLine=o,this.maxLineBeat=i),n||this.registerLine(i,o),s}registerLine(e,t){let i;this._beatLines.has(e.id)?i=this._beatLines.get(e.id):(i=new nr,this._beatLines.set(e.id,i)),(-1e3===i.minLine||t<i.minLine)&&(i.minLine=t),(-1e3===i.minLine||t>i.maxLine)&&(i.maxLine=t)}getMaxLine(e){return this._beatLines.has(e.id)?this._beatLines.get(e.id).maxLine:0}getMinLine(e){return this._beatLines.has(e.id)?this._beatLines.get(e.id).minLine:0}static calculateNoteLine(e,t,i){let n=t,r=e.masterBar.keySignature,s=e.clef,o=n%12,a=(n/12|0)-1,l=rr.OctaveSteps[s];return l-=a*rr.StepsPerOctave,l-=(ge.keySignatureIsSharp(r)||ge.keySignatureIsNatural(r)?rr.SharpNoteSteps:rr.FlatNoteSteps)[o],l}getNoteLine(e){return this._appliedScoreLines.get(e.id)}getNoteLineForValue(e,t=!1){return this._appliedScoreLinesByValue.has(e)?this._appliedScoreLinesByValue.get(e):t&&this._notesByValue.has(e)?this.getNoteLine(this._notesByValue.get(e)):0}}rr.KeySignatureLookup=[[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]],rr.AccidentalNotes=[!1,!0,!1,!0,!1,!1,!0,!1,!0,!1,!0,!1],rr.StepsPerOctave=7,rr.OctaveSteps=[38,32,30,26,38],rr.SharpNoteSteps=[0,0,1,1,2,3,3,4,4,5,5,6],rr.FlatNoteSteps=[0,1,1,2,2,3,4,4,5,5,6,6];class sr{constructor(){this.staffId="",this.up=0,this.down=0}}class or{constructor(){this.startBeat=null,this.startX=0,this.startY=0,this.endBeat=null,this.endX=0,this.endY=0}calcY(e){return this.startX===this.endX?this.startY:(this.endY-this.startY)/(this.endX-this.startX)*(e-this.startX)+this.startY}}class ar{constructor(e,t){this._beatLineXPositions=new Map,this._firstNonRestBeat=null,this._lastNonRestBeat=null,this.voice=null,this.beats=[],this.shortestDuration=p.QuadrupleWhole,this.fingeringCount=0,this.hasTuplet=!1,this._firstBeatLowestNoteCompareValue=-1,this._firstBeatHighestNoteCompareValue=-1,this._lastBeatLowestNoteCompareValue=-1,this._lastBeatHighestNoteCompareValue=-1,this.lowestNoteInHelper=null,this._lowestNoteCompareValueInHelper=-1,this.highestNoteInHelper=null,this._highestNoteCompareValueInHelper=-1,this.invertBeamDirection=!1,this.preferredBeamDirection=null,this.isGrace=!1,this.minRestLine=null,this.beatOfMinRestLine=null,this.maxRestLine=null,this.beatOfMaxRestLine=null,this.direction=B.Up,this.drawingInfos=new Map,this._staff=e,this._renderer=t,this.beats=[]}get isRestBeamHelper(){return 1===this.beats.length&&this.beats[0].isRest}get hasLine(){return 1===this.beats.length&&this.beats[0].duration>p.Whole}get hasFlag(){return 1===this.beats.length&&!this.beats[0].isRest&&(this.beats[0].duration>p.Quarter||this.beats[0].graceType!==m.None)}getBeatLineX(e){return this.hasBeatLineX(e)?this.direction===B.Up?this._beatLineXPositions.get(e.index).up:this._beatLineXPositions.get(e.index).down:0}hasBeatLineX(e){return this._beatLineXPositions.has(e.index)}registerBeatLineX(e,t,i,n){let r=this.getOrCreateBeatPositions(t);r.staffId=e,r.up=i,r.down=n;for(const e of this.drawingInfos.values())e.startBeat==t?e.startX=this.getBeatLineX(t):e.endBeat==t&&(e.endX=this.getBeatLineX(t))}getOrCreateBeatPositions(e){return this._beatLineXPositions.has(e.index)||this._beatLineXPositions.set(e.index,new sr),this._beatLineXPositions.get(e.index)}finish(){this.direction=this.calculateDirection()}calculateDirection(){let e=null;if(this.voice?null!==this.preferredBeamDirection?e=this.preferredBeamDirection:this.voice.index>0?e=this.invert(B.Down):(this.voice.bar.isMultiVoice||this.beats[0].graceType!==m.None)&&(e=this.invert(B.Up)):e=B.Up,this.highestNoteInHelper&&this.lowestNoteInHelper){let t=this._renderer.getNoteY(this.highestNoteInHelper,X.Center),i=this._renderer.getNoteY(this.lowestNoteInHelper,X.Center);if(null===e){const n=(t+i)/2;e=this.invert(this._renderer.middleYPosition<n?B.Up:B.Down)}this._renderer.completeBeamingHelper(this)}else e=this.invert(B.Up),this._renderer.completeBeamingHelper(this);return e}static computeLineHeightsForRest(e){switch(e){case p.QuadrupleWhole:case p.DoubleWhole:return[2,2];case p.Whole:return[0,1];case p.Half:return[1,0];case p.Quarter:return[3,3];case p.Eighth:return[2,2];case p.Sixteenth:return[2,4];case p.ThirtySecond:return[4,4];case p.SixtyFourth:return[4,6];case p.OneHundredTwentyEighth:return[6,6];case p.TwoHundredFiftySixth:return[6,8]}return[0,0]}applyRest(e,t){if(this._lastNonRestBeat&&e.index>=this._lastNonRestBeat.index||this._firstNonRestBeat&&e.index<=this._firstNonRestBeat.index)return;let i=t,n=t;const r=ar.computeLineHeightsForRest(e.duration);i-=r[0],n+=r[1],(null===this.minRestLine||this.minRestLine>i)&&(this.minRestLine=i,this.beatOfMinRestLine=e),(null===this.maxRestLine||this.maxRestLine<n)&&(this.maxRestLine=n,this.beatOfMaxRestLine=e)}invert(e){if(!this.invertBeamDirection)return e;switch(e){case B.Down:return B.Up;case B.Up:default:return B.Down}}checkBeat(e){e.invertBeamDirection&&(this.invertBeamDirection=!0),this.voice||(this.voice=e.voice);let t=!1;if(0===this.beats.length)t=!0;else switch(this.beats[this.beats.length-1].beamingMode){case T.Auto:t=ar.canJoin(this.beats[this.beats.length-1],e);break;case T.ForceSplitToNext:t=!1;break;case T.ForceMergeWithNext:t=!0}if(t){if(null!==e.preferredBeamDirection&&(this.preferredBeamDirection=e.preferredBeamDirection),e.isRest)0===this.beats.length&&this.beats.push(e);else{this.isRestBeamHelper&&(this.beats=[]),this.beats.push(e),e.graceType!==m.None&&(this.isGrace=!0),e.hasTuplet&&(this.hasTuplet=!0);let t=0;for(let n=0;n<e.notes.length;n++){let r=e.notes[n];r.leftHandFinger===i.Unknown&&r.rightHandFinger===i.Unknown||t++}t>this.fingeringCount&&(this.fingeringCount=t),this.checkNote(e.minNote),this.checkNote(e.maxNote),this.shortestDuration<e.duration&&(this.shortestDuration=e.duration),this._firstNonRestBeat||(this._firstNonRestBeat=e),this._lastNonRestBeat=e}e.hasTuplet&&(this.hasTuplet=!0)}return t}checkNote(e){if(!e)return;let t,i;this.voice&&e.isPercussion?(t=-rr.getPercussionLine(this.voice.bar,rr.getNoteValue(e)),i=t):(t=rr.getNoteValue(e),i=t,e.harmonicType!==b.None&&e.harmonicType!==b.Natural&&(i=e.realValue-this._staff.displayTranspositionPitch)),1===this.beats.length&&this.beats[0]===e.beat&&((-1===this._firstBeatLowestNoteCompareValue||t<this._firstBeatLowestNoteCompareValue)&&(this._firstBeatLowestNoteCompareValue=t),(-1===this._firstBeatHighestNoteCompareValue||i>this._firstBeatHighestNoteCompareValue)&&(this._firstBeatHighestNoteCompareValue=i)),(-1===this._lastBeatLowestNoteCompareValue||t<this._lastBeatLowestNoteCompareValue)&&(this._lastBeatLowestNoteCompareValue=t),(-1===this._lastBeatHighestNoteCompareValue||i>this._lastBeatHighestNoteCompareValue)&&(this._lastBeatHighestNoteCompareValue=i),(!this.lowestNoteInHelper||t<this._lowestNoteCompareValueInHelper)&&(this.lowestNoteInHelper=e,this._lowestNoteCompareValueInHelper=t),(!this.highestNoteInHelper||i>this._highestNoteCompareValueInHelper)&&(this.highestNoteInHelper=e,this._highestNoteCompareValueInHelper=i)}static canJoin(e,t){if(!e||!t||e.graceType!==t.graceType||e.graceType===m.BendGrace||t.graceType===m.BendGrace)return!1;if(e.graceType!==m.None&&t.graceType!==m.None)return!0;let i=e.voice.bar;if(i!==t.voice.bar)return!1;let n=e.playbackStart,r=t.playbackStart;if(!ar.canJoinDuration(e.duration)||!ar.canJoinDuration(t.duration))return n===r;if(e.tupletGroup!==t.tupletGroup)return!1;if(e.hasTuplet&&t.hasTuplet&&e.tupletGroup===t.tupletGroup&&e.tupletGroup.isFull)return!0;let s=Te.QuarterTime;switch(i.masterBar.timeSignatureDenominator){case 8:i.masterBar.timeSignatureNumerator%3==0&&(s+=Te.QuarterTime/2|0)}return(0|(s+n)/s)==(0|(s+r)/s)}static canJoinDuration(e){switch(e){case p.Whole:case p.Half:case p.Quarter:return!1;default:return!0}}static isFullBarJoin(e,t,i){return ge.getIndex(e.duration)-2-i>0&&ge.getIndex(t.duration)-2-i>0}get beatOfLowestNote(){return this.lowestNoteInHelper.beat}get beatOfHighestNote(){return this.highestNoteInHelper.beat}isPositionFrom(e,t){return!this._beatLineXPositions.has(t.index)||this._beatLineXPositions.get(t.index).staffId===e||!this._beatLineXPositions.get(t.index).staffId}}class lr{constructor(e,t){this.topY=0,this.bottomY=0,this.topY=e,this.bottomY=t}}class cr{constructor(e){this.topY=-1e3,this.bottomY=-1e3,this.slots=[],this.beat=e}addSlot(e,t){if(this.slots.push(new lr(e,t)),-1e3===this.topY)this.topY=e,this.bottomY=t;else{const i=Math.min(e,t),n=Math.max(e,t);i<this.topY&&(this.topY=i),n>this.bottomY&&(this.bottomY=n)}}}class hr{constructor(){this.reservedLayoutAreasByDisplayTime=new Map,this.restDurationsByDisplayTime=new Map}getBeatMinMaxY(){let e=-1e3,t=-1e3;for(const i of this.reservedLayoutAreasByDisplayTime.values())-1e3===e?(e=i.topY,t=i.bottomY):(e>i.topY&&(e=i.topY),t<i.bottomY&&(t=i.bottomY));return-1e3===e?[0,0]:[e,t]}reserveBeatSlot(e,t,i){t!=i&&(this.reservedLayoutAreasByDisplayTime.has(e.displayStart)||this.reservedLayoutAreasByDisplayTime.set(e.displayStart,new cr(e)),this.reservedLayoutAreasByDisplayTime.get(e.displayStart).addSlot(t,i),e.isRest&&this.registerRest(e))}registerRest(e){this.restDurationsByDisplayTime.has(e.displayStart)||this.restDurationsByDisplayTime.set(e.displayStart,new Map),this.restDurationsByDisplayTime.get(e.displayStart).has(e.playbackDuration)||this.restDurationsByDisplayTime.get(e.displayStart).set(e.playbackDuration,e.id)}applyRestCollisionOffset(e,t,i){if(e.voice.index>0&&this.reservedLayoutAreasByDisplayTime.has(e.playbackStart)){const n=ar.computeLineHeightsForRest(e.duration).map((e=>e*i));let r=t-n[0],s=t+n[1],o=r;const a=this.reservedLayoutAreasByDisplayTime.get(e.playbackStart);let l=!1;for(const e of a.slots)if(r>=e.topY&&r<=e.bottomY||s>=e.topY&&s<=e.bottomY){l=!0;break}if(l){o=1==e.voice.index?a.topY-n[1]-n[0]:a.bottomY;let t=o+n[0]+n[1];const s=2*i;let l=Math.ceil(Math.abs(o-r)/s);return a.addSlot(o,t),o<r?l*-s:l*s}}return 0}}class ur{constructor(e){this.beamHelpers=[],this.beamHelperLookup=[],this._renderer=e,this.collisionHelper=new hr}initialize(){var e=this._renderer,t=this._renderer.bar;let i=null,n=null;for(let r=0,s=t.voices.length;r<s;r++){let s=t.voices[r];this.beamHelpers.push([]),this.beamHelperLookup.push(new Map);for(let r=0,o=s.beats.length;r<o;r++){let o,a=s.beats[r];a.graceType!==m.None?o=n:(o=i,n=null),o&&o.checkBeat(a)||(o&&o.finish(),o=new ar(t.staff,e),o.checkBeat(a),a.graceType!==m.None?n=o:i=o,this.beamHelpers[s.index].push(o)),this.beamHelperLookup[s.index].set(a.index,o)}i&&i.finish(),n&&n.finish(),i=null,n=null}}getBeamingHelperForBeat(e){return this.beamHelperLookup[e.voice.index].get(e.index)}}(function(e){e[e.TopWithStem=0]="TopWithStem",e[e.Top=1]="Top",e[e.Center=2]="Center",e[e.Bottom=3]="Bottom",e[e.BottomWithStem=4]="BottomWithStem"})(X||(X={})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(Q||(Q={}));class dr{constructor(e,t){this._preBeatGlyphs=new tr,this._voiceContainers=new Map,this._postBeatGlyphs=new tr,this.x=0,this.y=0,this.width=0,this.height=0,this.index=0,this.topOverflow=0,this.bottomOverflow=0,this.isLinkedToPrevious=!1,this.canWrap=!0,this._wasFirstOfLine=!1,this._appliedLayoutingInfo=0,this.isFinalized=!1,this.topPadding=0,this.bottomPadding=0,this.scoreRenderer=e,this.bar=t,t&&(this.helpers=new ur(this))}get nextRenderer(){return this.bar&&this.bar.nextBar?this.scoreRenderer.layout.getRendererForBar(this.staff.staveId,this.bar.nextBar):null}get previousRenderer(){return this.bar&&this.bar.previousBar?this.scoreRenderer.layout.getRendererForBar(this.staff.staveId,this.bar.previousBar):null}get middleYPosition(){return 0}registerOverflowTop(e){e>this.topOverflow&&(this.topOverflow=e)}registerOverflowBottom(e){e>this.bottomOverflow&&(this.bottomOverflow=e)}scaleToWidth(e){let t=e-this._preBeatGlyphs.width-this._postBeatGlyphs.width;for(const e of this._voiceContainers.values())e.scaleToWidth(t);this._postBeatGlyphs.x=this._preBeatGlyphs.x+this._preBeatGlyphs.width+t,this.width=e}get resources(){return this.settings.display.resources}get settings(){return this.scoreRenderer.settings}get scale(){return this.settings.display.scale}get isFirstOfLine(){return 0===this.index}get isLast(){return!this.bar||this.bar.index===this.scoreRenderer.layout.lastBarIndex}registerLayoutingInfo(){let e=this.layoutingInfo,t=this._preBeatGlyphs.width;e.preBeatSize<t&&(e.preBeatSize=t);for(const t of this._voiceContainers.values())t.registerLayoutingInfo(e);let i=this._postBeatGlyphs.width;e.postBeatSize<i&&(e.postBeatSize=i)}applyLayoutingInfo(){if(this._appliedLayoutingInfo>=this.layoutingInfo.version)return!1;this._appliedLayoutingInfo=this.layoutingInfo.version,this._preBeatGlyphs.width=this.layoutingInfo.preBeatSize;let e=this._preBeatGlyphs.x+this._preBeatGlyphs.width;for(const t of this._voiceContainers.values()){t.x=this._preBeatGlyphs.x+this._preBeatGlyphs.width,t.applyLayoutingInfo(this.layoutingInfo);let i=t.x+t.width;e<i&&(e=i)}return this._postBeatGlyphs.x=Math.floor(e),this._postBeatGlyphs.width=this.layoutingInfo.postBeatSize,this.width=Math.ceil(this._postBeatGlyphs.x+this._postBeatGlyphs.width),!0}finalizeRenderer(){this.isFinalized=!0}doLayout(){if(this.bar){this.helpers.initialize(),this._preBeatGlyphs=new tr,this._preBeatGlyphs.renderer=this,this._voiceContainers.clear(),this._postBeatGlyphs=new tr,this._postBeatGlyphs.renderer=this;for(let e=0;e<this.bar.voices.length;e++){let t=this.bar.voices[e];if(this.hasVoiceContainer(t)){let i=new ir(0,0,t);i.renderer=this,this._voiceContainers.set(this.bar.voices[e].index,i)}}this.bar.simileMark===c.SecondOfDouble&&(this.canWrap=!1),this.createPreBeatGlyphs(),this.createBeatGlyphs(),this.createPostBeatGlyphs(),this.updateSizes();for(const e of this.helpers.beamHelpers)for(const t of e)t.finish()}}hasVoiceContainer(e){return!e.isEmpty||0===e.index}updateSizes(){this.staff.registerStaffTop(this.topPadding),this.staff.registerStaffBottom(this.height-this.bottomPadding);let e=this._voiceContainers,t=this.beatGlyphsStart,i=t;for(const n of e.values()){n.x=t,n.doLayout();let e=n.x+n.width;i<e&&(i=e)}this._postBeatGlyphs.x=Math.floor(i),this.width=Math.ceil(this._postBeatGlyphs.x+this._postBeatGlyphs.width),this.height+=this.layoutingInfo.height*this.scale}addPreBeatGlyph(e){e.renderer=this,this._preBeatGlyphs.addGlyph(e)}addBeatGlyph(e){e.renderer=this,e.preNotes.renderer=this,e.onNotes.renderer=this,e.onNotes.beamingHelper=this.helpers.beamHelperLookup[e.beat.voice.index].get(e.beat.index),this.getVoiceContainer(e.beat.voice).addGlyph(e)}getVoiceContainer(e){return this._voiceContainers.get(e.index)}getBeatContainer(e){var t;return null===(t=this.getVoiceContainer(e.voice))||void 0===t?void 0:t.beatGlyphs[e.index]}getPreNotesGlyphForBeat(e){var t;return null===(t=this.getBeatContainer(e))||void 0===t?void 0:t.preNotes}getOnNotesGlyphForBeat(e){var t;return null===(t=this.getBeatContainer(e))||void 0===t?void 0:t.onNotes}paint(e,t,i){this.paintBackground(e,t,i),i.color=this.resources.mainGlyphColor,this._preBeatGlyphs.paint(e+this.x,t+this.y,i);for(const n of this._voiceContainers.values())i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.paint(e+this.x,t+this.y,i);i.color=this.resources.mainGlyphColor,this._postBeatGlyphs.paint(e+this.x,t+this.y,i)}paintBackground(e,t,i){this.layoutingInfo.paint(e+this.x+this._preBeatGlyphs.x+this._preBeatGlyphs.width,t+this.y+this.height,i)}buildBoundingsLookup(e,t,i){let n=new hn;n.bar=this.bar,n.visualBounds=new lt,n.visualBounds.x=t+this.x,n.visualBounds.y=i+this.y+this.topPadding,n.visualBounds.w=this.width,n.visualBounds.h=this.height-this.topPadding-this.bottomPadding,n.realBounds=new lt,n.realBounds.x=t+this.x,n.realBounds.y=i+this.y,n.realBounds.w=this.width,n.realBounds.h=this.height,e.addBar(n);for(const[e,r]of this._voiceContainers){let s=this.bar.isEmpty&&0===e;if(!r.voice.isEmpty||s)for(let e=0,o=r.beatGlyphs.length;e<o;e++)r.beatGlyphs[e].buildBoundingsLookup(n,t+this.x+r.x,i+this.y+r.y,s)}}addPostBeatGlyph(e){this._postBeatGlyphs.addGlyph(e)}createPreBeatGlyphs(){this._wasFirstOfLine=this.isFirstOfLine}createBeatGlyphs(){for(let e=0;e<this.bar.voices.length;e++){let t=this.bar.voices[e];this.hasVoiceContainer(t)&&this.createVoiceGlyphs(this.bar.voices[e])}}createVoiceGlyphs(e){}createPostBeatGlyphs(){}get beatGlyphsStart(){return this._preBeatGlyphs.x+this._preBeatGlyphs.width}get postBeatGlyphsStart(){return this._postBeatGlyphs.x}getBeatX(e,t=Z.PreNotes){let i=this.getBeatContainer(e);if(i)switch(t){case Z.PreNotes:return i.voiceContainer.x+i.x;case Z.OnNotes:return i.voiceContainer.x+i.x+i.onNotes.x;case Z.MiddleNotes:return i.voiceContainer.x+i.x+i.onTimeX;case Z.Stem:const t=i.onNotes.beamingHelper?i.onNotes.beamingHelper.getBeatLineX(e):i.onNotes.x+i.onNotes.width/2;return i.voiceContainer.x+t;case Z.PostNotes:return i.voiceContainer.x+i.x+i.onNotes.x+i.onNotes.width;case Z.EndBeat:return i.voiceContainer.x+i.x+i.width}return 0}getNoteX(e,t){let i=this.getBeatContainer(e.beat);return i?i.voiceContainer.x+i.x+i.onNotes.x+i.onNotes.getNoteX(e,t):0}getNoteY(e,t){let i=this.getOnNotesGlyphForBeat(e.beat);return i?i.getNoteY(e,t):NaN}reLayout(){(this._wasFirstOfLine&&!this.isFirstOfLine||!this._wasFirstOfLine&&this.isFirstOfLine)&&(this._preBeatGlyphs=new tr,this._preBeatGlyphs.renderer=this,this.createPreBeatGlyphs()),this.updateSizes(),this.registerLayoutingInfo()}paintSimileMark(e,t,i){switch(this.bar.simileMark){case c.Simple:i.fillMusicFontSymbol(e+this.x+(this.width-20*this.scale)/2,t+this.y+this.height/2,1,C.Repeat1Bar,!1);break;case c.SecondOfDouble:i.fillMusicFontSymbol(e+this.x-28*this.scale/2,t+this.y+this.height/2,1,C.Repeat2Bars,!1)}}completeBeamingHelper(e){}}dr.LineSpacing=8,dr.StemWidth=.12*dr.LineSpacing,dr.StaffLineThickness=.13*dr.LineSpacing,dr.BeamThickness=.5*dr.LineSpacing,dr.BeamSpacing=.25*dr.LineSpacing,function(e){e[e.SinglePreBeat=0]="SinglePreBeat",e[e.SingleOnBeat=1]="SingleOnBeat",e[e.SingleOnBeatToEnd=2]="SingleOnBeatToEnd",e[e.GroupedOnBeat=3]="GroupedOnBeat",e[e.GroupedOnBeatToEnd=4]="GroupedOnBeatToEnd",e[e.FullBar=5]="FullBar"}(J||(J={}));class fr extends Nn{constructor(e,t){super(0,0),this._uniqueEffectGlyphs=[],this._effectGlyphs=[],this.isEmpty=!0,this.previousBand=null,this.isLinkedToPrevious=!1,this.firstBeat=null,this.lastBeat=null,this.height=0,this.slot=null,this.voice=e,this.info=t}doLayout(){super.doLayout();for(let e=0;e<this.renderer.bar.voices.length;e++)this._effectGlyphs.push(new Map),this._uniqueEffectGlyphs.push([])}createGlyph(e){if(e.voice===this.voice&&this.info.shouldCreateGlyph(this.renderer.settings,e)&&(!this.info.hideOnMultiTrack||0===this.renderer.staff.trackIndex)){if(this.isEmpty=!1,this.firstBeat&&!e.isBefore(this.firstBeat)||(this.firstBeat=e),!this.lastBeat||e.isAfter(this.lastBeat))switch(this.lastBeat=e,this.info.sizingMode){case J.SingleOnBeatToEnd:case J.GroupedOnBeatToEnd:this.lastBeat.nextBeat&&(this.lastBeat=this.lastBeat.nextBeat)}let t=this.createOrResizeGlyph(this.info.sizingMode,e);t.height>this.height&&(this.height=t.height)}}createOrResizeGlyph(e,t){let i;switch(e){case J.FullBar:return i=this.info.createNewGlyph(this.renderer,t),i.renderer=this.renderer,i.beat=t,i.doLayout(),this._effectGlyphs[t.voice.index].set(t.index,i),this._uniqueEffectGlyphs[t.voice.index].push(i),i;case J.SinglePreBeat:case J.SingleOnBeat:case J.SingleOnBeatToEnd:return i=this.info.createNewGlyph(this.renderer,t),i.renderer=this.renderer,i.beat=t,i.doLayout(),this._effectGlyphs[t.voice.index].set(t.index,i),this._uniqueEffectGlyphs[t.voice.index].push(i),i;case J.GroupedOnBeat:case J.GroupedOnBeatToEnd:let n=e===J.GroupedOnBeat?J.SingleOnBeat:J.SingleOnBeatToEnd;if(t.index>0||this.renderer.index>0){let e=t.previousBeat;if(this.info.shouldCreateGlyph(this.renderer.settings,e)){let i=null;if(t.index>0&&this._effectGlyphs[t.voice.index].has(e.index))i=this._effectGlyphs[t.voice.index].get(e.index);else if(this.renderer.index>0){let n=this.renderer.previousRenderer.getBand(this.voice,this.info.effectId)._effectGlyphs[t.voice.index];n.has(e.index)&&(i=n.get(e.index))}let r=this.createOrResizeGlyph(n,t);return i&&this.info.canExpand(e,t)&&(i.nextGlyph=r,r.previousGlyph=i,this.isLinkedToPrevious=!0),r}return this.createOrResizeGlyph(n,t)}return this.createOrResizeGlyph(n,t);default:return this.createOrResizeGlyph(J.SingleOnBeat,t)}}paint(e,t,i){super.paint(e,t,i);for(let n=0,r=this._uniqueEffectGlyphs.length;n<r;n++){let r=this._uniqueEffectGlyphs[n];for(let n=0,s=r.length;n<s;n++)r[n].paint(e+this.x,t+this.y,i)}}alignGlyphs(){for(let e=0;e<this._effectGlyphs.length;e++)for(const t of this._effectGlyphs[e].keys())this.alignGlyph(this.info.sizingMode,this.renderer.bar.voices[e].beats[t])}alignGlyph(e,t){let i,n=this._effectGlyphs[t.voice.index].get(t.index),r=this.renderer.getBeatContainer(t);switch(e){case J.SinglePreBeat:i=r.preNotes,n.x=this.renderer.beatGlyphsStart+i.x+r.x,n.width=i.width;break;case J.SingleOnBeat:case J.GroupedOnBeat:i=r.onNotes,n.x=this.renderer.beatGlyphsStart+i.x+r.x,n.width=i.width;break;case J.SingleOnBeatToEnd:case J.GroupedOnBeatToEnd:i=r.onNotes,n.x=this.renderer.beatGlyphsStart+i.x+r.x,r.beat.isLastOfVoice?n.width=this.renderer.width-n.x:n.width=r.width-r.preNotes.width-r.preNotes.x;break;case J.FullBar:n.width=this.renderer.width}}}class pr{constructor(){this.uniqueEffectId=null,this.y=0,this.height=0,this.firstBeat=null,this.lastBeat=null}}class gr{constructor(){this.bands=[],this.shared=new pr}update(e){e.info.canShareBand||(this.shared.uniqueEffectId=e.info.effectId),e.slot=this,this.bands.push(e),e.height>this.shared.height&&(this.shared.height=e.height),this.shared.firstBeat&&!e.firstBeat.isBefore(this.shared.firstBeat)||(this.shared.firstBeat=e.firstBeat),this.shared.lastBeat&&!e.lastBeat.isAfter(this.shared.lastBeat)||(this.shared.lastBeat=e.lastBeat)}canBeUsed(e){return(!this.shared.uniqueEffectId&&e.info.canShareBand||e.info.effectId===this.shared.uniqueEffectId)&&(!this.shared.firstBeat||this.shared.lastBeat.isBefore(e.firstBeat)||this.shared.lastBeat.isBefore(this.shared.firstBeat))}}class mr{constructor(){this.slots=[],this._effectSlot=new Map}getOrCreateSlot(e){if(this._effectSlot.has(e.info.effectId)){let t=this._effectSlot.get(e.info.effectId);if(t.canBeUsed(e))return t}for(let t of this.slots)if(t.canBeUsed(e))return t;let t=new gr;return this.slots.push(t),t}register(e){let t=this.getOrCreateSlot(e);t.update(e),this._effectSlot.set(e.info.effectId,t)}}class br extends er{constructor(){super(0,0)}doLayout(){let e=0;if(this.glyphs)for(let t=0,i=this.glyphs.length;t<i;t++){let i=this.glyphs[t];i.x=e,i.renderer=this.renderer,i.doLayout(),e+=i.width}this.width=e}noteLoop(e){for(let t=this.container.beat.notes.length-1;t>=0;t--)e(this.container.beat.notes[t])}}class vr extends br{constructor(){super(...arguments),this.centerX=0}updateBeamingHelper(){}buildBoundingsLookup(e,t,i){}getNoteX(e,t){return 0}getNoteY(e,t){return 0}}class yr extends dr{constructor(e,t,i){super(e,t),this._bands=[],this._bandLookup=new Map,this.sizingInfo=null,this._infos=i}updateSizes(){this.topOverflow=0,this.bottomOverflow=0,this.topPadding=0,this.bottomPadding=0,this.updateHeight(),super.updateSizes()}finalizeRenderer(){super.finalizeRenderer(),this.updateHeight()}updateHeight(){if(!this.sizingInfo)return;let e=0;for(let t of this.sizingInfo.slots){t.shared.y=e;for(let i of t.bands)i.y=e,i.height=t.shared.height;e+=t.shared.height}this.height=e}applyLayoutingInfo(){if(!super.applyLayoutingInfo())return!1;if(this.index>0){let e=this.previousRenderer;this.sizingInfo=e.sizingInfo}else this.sizingInfo=new mr;for(let e of this._bands)e.alignGlyphs(),e.isEmpty||this.sizingInfo.register(e);return this.updateHeight(),!0}scaleToWidth(e){super.scaleToWidth(e);for(let e of this._bands)e.alignGlyphs()}createBeatGlyphs(){this._bands=[],this._bandLookup=new Map;for(let e of this.bar.voices)if(this.hasVoiceContainer(e))for(let t of this._infos){let i=new fr(e,t);i.renderer=this,i.doLayout(),this._bands.push(i),this._bandLookup.set(e.index+"."+t.effectId,i)}for(let e of this.bar.voices)this.hasVoiceContainer(e)&&this.createVoiceGlyphs(e);for(let e of this._bands)e.isLinkedToPrevious&&(this.isLinkedToPrevious=!0)}createVoiceGlyphs(e){for(let t of e.beats){let i=new An(t,this.getVoiceContainer(e));i.preNotes=new br,i.onNotes=new vr,this.addBeatGlyph(i);for(let e of this._bands)e.createGlyph(t)}}paint(e,t,i){this.paintBackground(e,t,i);for(let n of this._bands)i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.isEmpty||n.paint(e+this.x,t+this.y,i)}getBand(e,t){let i=e.index+"."+t;return this._bandLookup.has(i)?this._bandLookup.get(i):null}}class _r extends Jn{constructor(e,t){super(),this._infos=t,this._staffId=e,this.isInAccolade=!1,this.isRelevantForBoundsLookup=!1}get staffId(){return this._staffId}create(e,t){return new yr(e,t,this._infos.filter((t=>e.settings.notation.isNotationElementVisible(t.notationElement))))}}class wr extends Mn{constructor(e,t,i){super(e,t),this._endingsString="",this._endings=[];for(let e=0;e<Ue.MaxAlternateEndings;e++)0!=(i&1<<e)&&this._endings.push(e)}doLayout(){super.doLayout(),this.height=this.renderer.resources.wordsFont.size+(wr.Padding*this.scale+2);let e="";for(let t=0,i=this._endings.length;t<i;t++)e+=this._endings[t]+1,e+=". ";this._endingsString=e}paint(e,t,i){super.paint(e,t,i);let n=i.textBaseline;if(i.textBaseline=k.Top,this._endings.length>0){let n=this.renderer.resources;i.font=n.wordsFont,i.moveTo(e+this.x,t+this.y+this.height),i.lineTo(e+this.x,t+this.y),i.lineTo(e+this.x+this.width,t+this.y),i.stroke(),i.fillText(this._endingsString,e+this.x+wr.Padding*this.scale,t+this.y*this.scale)}i.textBaseline=n}}wr.Padding=3;class Sr{get effectId(){return this.notationElement.toString()}}class Cr extends Sr{get notationElement(){return n.EffectAlternateEndings}get hideOnMultiTrack(){return!0}get canShareBand(){return!1}get sizingMode(){return J.FullBar}shouldCreateGlyph(e,t){return 0===t.voice.index&&0===t.index&&0!==t.voice.bar.masterBar.alternateEndings}createNewGlyph(e,t){return new wr(0,0,t.voice.bar.masterBar.alternateEndings)}canExpand(e,t){return!0}}class xr extends Mn{constructor(e,t,i,n,r=x.Left){super(e,t),this._lines=i.split("\n"),this.font=n,this.textAlign=r}doLayout(){super.doLayout(),this.height=this.font.size*this._lines.length}paint(e,t,i){let n=i.color;i.color=n,i.font=this.font;let r=i.textAlign;i.textAlign=this.textAlign;let s=t+this.y;for(let t of this._lines)i.fillText(t,e+this.x,s),s+=this.font.size;i.textAlign=r}}class kr extends Sr{get notationElement(){return n.EffectCapo}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(e,t){return 0===t.index&&0===t.voice.bar.index&&0!==t.voice.bar.staff.capo}createNewGlyph(e,t){return new xr(0,0,"Capo. fret "+t.voice.bar.staff.capo,e.resources.effectFont,x.Left)}canExpand(e,t){return!1}}class Er extends Sr{get notationElement(){return n.EffectChordNames}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(e,t){return t.hasChord}createNewGlyph(e,t){return new xr(0,0,t.chord.name,e.resources.effectFont,x.Center)}canExpand(e,t){return!1}}class Tr extends Mn{constructor(e){super(),this.forceGroupedRendering=!1,this.endOnBarLine=!1,this.endPosition=e}get isLinkedWithPrevious(){return!!this.previousGlyph&&this.previousGlyph.renderer.staff.staveGroup===this.renderer.staff.staveGroup}get isLinkedWithNext(){return!!this.nextGlyph&&this.nextGlyph.renderer.isFinalized&&this.nextGlyph.renderer.staff.staveGroup===this.renderer.staff.staveGroup}paint(e,t,i){if(this.isLinkedWithPrevious)return;if(!this.isLinkedWithNext&&!this.forceGroupedRendering)return void this.paintNonGrouped(e,t,i);let n;if(!this.isLinkedWithNext&&this.forceGroupedRendering)n=this;else for(n=this.nextGlyph;n.isLinkedWithNext;)n=n.nextGlyph;let r=n.renderer,s=n.beat,o=this.endPosition,a=e-this.renderer.x,l=this.calculateEndX(r,s,a,o);this.paintGrouped(e,t,l,i)}calculateEndX(e,t,i,n){return t?i+e.x+e.getBeatX(t,n):i+e.x+this.x+this.width}paintNonGrouped(e,t,i){let n=e-this.renderer.x,r=this.calculateEndX(this.renderer,this.beat,n,this.endPosition);this.paintGrouped(e,t,r,i)}}class Lr extends Tr{constructor(e,t,i){super(Z.EndBeat),this._crescendo=f.None,this._crescendo=i,this.x=e,this.y=t}doLayout(){super.doLayout(),this.height=17*this.scale}paintGrouped(e,t,i,n){let r=e+this.x,s=this.height*this.scale;n.beginPath(),this._crescendo===f.Crescendo?(i-=Lr.Padding*this.scale,n.moveTo(i,t+this.y),n.lineTo(r,t+this.y+s/2),n.lineTo(i,t+this.y+s)):(i-=Lr.Padding*this.scale,n.moveTo(r,t+this.y),n.lineTo(i,t+this.y+s/2),n.lineTo(r,t+this.y+s)),n.stroke()}}Lr.Padding=Dn.QuarterNoteHeadWidth/2|0;class Nr extends Sr{get notationElement(){return n.EffectCrescendo}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return J.GroupedOnBeatToEnd}shouldCreateGlyph(e,t){return t.crescendo!==f.None}createNewGlyph(e,t){return new Lr(0,0,t.crescendo)}canExpand(e,t){return e.crescendo===t.crescendo}}class Mr extends On{constructor(e,t,i){super(e,t,.6,Mr.getSymbol(i))}doLayout(){super.doLayout(),this.height=17*this.scale,this.y+=this.height/2}static getSymbol(e){switch(e){case g.PPP:return C.DynamicPPP;case g.PP:return C.DynamicPP;case g.P:return C.DynamicPiano;case g.MP:return C.DynamicMP;case g.MF:return C.DynamicMF;case g.F:return C.DynamicForte;case g.FF:return C.DynamicFF;case g.FFF:return C.DynamicFFF;default:return C.None}}}class Or extends Sr{get notationElement(){return n.EffectDynamics}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(e,t){return this.internalShouldCreateGlyph(t)}internalShouldCreateGlyph(e){if(e.voice.bar.staff.track.score.stylesheet.hideDynamics||e.isEmpty||e.voice.isEmpty||e.isRest||e.graceType!==m.None)return!1;let t=this.getPreviousDynamicsBeat(e),i=0===e.voice.index&&!t||e.dynamics!==(null==t?void 0:t.dynamics);if(i&&e.voice.index>0)for(let t of e.voice.bar.voices)if(t.index<e.voice.index){let n=t.getBeatAtPlaybackStart(e.playbackStart);n&&e.dynamics===n.dynamics&&this.internalShouldCreateGlyph(n)&&(i=!1)}return i}getPreviousDynamicsBeat(e){let t=e.previousBeat;for(;null!=t;){if(!t.isRest&&t.graceType===m.None)return t;t=t.previousBeat}return null}createNewGlyph(e,t){return new Mr(0,0,t.dynamics)}canExpand(e,t){return!0}}class Dr extends Mn{doLayout(){super.doLayout(),this.height=17*this.scale}paint(e,t,i){let n=6*this.scale,r=Math.max(this.width,14*this.scale),s=this.height/2;i.beginPath(),i.moveTo(e+this.x,t+this.y+s),i.quadraticCurveTo(e+this.x+r/2,t+this.y+s,e+this.x+r,t+this.y+s-n),i.moveTo(e+this.x,t+this.y+s),i.quadraticCurveTo(e+this.x+r/2,t+this.y+s,e+this.x+r,t+this.y+s+n),i.stroke()}}class Ir extends Sr{get notationElement(){return n.EffectFadeIn}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(e,t){return t.fadeIn}createNewGlyph(e,t){return new Dr}canExpand(e,t){return!0}}class Ar extends On{constructor(e,t,i){super(e,t,1,Ar.getSymbol(i))}static getSymbol(e){switch(e){case A.Short:return C.FermataShortAbove;case A.Medium:return C.FermataAbove;case A.Long:return C.FermataLongAbove;default:return C.None}}doLayout(){this.width=23*this.scale,this.height=12*this.scale}paint(e,t,i){super.paint(e-this.width/2,t+this.height,i)}}class Pr extends Sr{get notationElement(){return n.EffectFermata}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(e,t){return 0===t.voice.index&&!!t.fermata}createNewGlyph(e,t){return new Ar(0,0,t.fermata.type)}canExpand(e,t){return!0}}class Rr extends Sr{get notationElement(){return n.EffectFingering}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(t,i){return!(0!==i.voice.index||i.isRest||t.notation.fingeringMode!==e.FingeringMode.SingleNoteEffectBand&&t.notation.fingeringMode!==e.FingeringMode.SingleNoteEffectBandForcePiano)&&1===i.notes.length&&i.notes[0].isFingering}createNewGlyph(e,t){var n;let r=i.Unknown,s=!1,o=t.notes[0];o.leftHandFinger!==i.Unknown?(r=o.leftHandFinger,s=!0):o.rightHandFinger!==i.Unknown&&(r=o.rightHandFinger);let a=null!==(n=ge.fingerToString(e.settings,t,r,s))&&void 0!==n?n:"";return new xr(0,0,a,e.resources.fingeringFont,x.Left)}canExpand(e,t){return!0}}class Br extends Sr{constructor(){super(...arguments),this.lastCreateInfo=null}shouldCreateGlyph(e,t){this.lastCreateInfo=[];for(let e=0,i=t.notes.length;e<i;e++){let i=t.notes[e];this.shouldCreateGlyphForNote(i)&&this.lastCreateInfo.push(i)}return this.lastCreateInfo.length>0}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}canExpand(e,t){return!0}}class Fr extends Tr{constructor(e){super(Z.OnNotes),this._label=e}doLayout(){this.renderer.settings.notation.extendLineEffectsToBeatEnd&&(this.endPosition=Z.EndBeat,this.forceGroupedRendering=!0),super.doLayout(),this.height=this.renderer.resources.effectFont.size}paintNonGrouped(e,t,i){let n=this.renderer.resources;i.font=n.effectFont;let r=i.textAlign;i.textAlign=x.Center,i.fillText(this._label,e+this.x,t+this.y),i.textAlign=r}paintGrouped(e,t,i,n){this.paintNonGrouped(e,t,n);let r=3*this.scale,s=n.measureText(this._label),o=e+this.x+s/2+r,a=t+this.y+4*this.scale,l=8*this.scale;if(i>o){let e=o;for(;e<i;)n.beginPath(),n.moveTo(e,0|a),n.lineTo(Math.min(e+l,i),0|a),e+=l+r,n.stroke();n.beginPath(),n.moveTo(i,a-5*this.scale|0),n.lineTo(i,a+5*this.scale|0),n.stroke()}}}Fr.LineSpacing=3,Fr.LineTopPadding=4,Fr.LineTopOffset=5,Fr.LineSize=8;class Wr extends Br{constructor(e){switch(super(),this._beat=null,this._harmonicType=b.None,this._harmonicType=e,e){case b.None:this._effectId="harmonics-none";break;case b.Natural:this._effectId="harmonics-natural";break;case b.Artificial:this._effectId="harmonics-artificial";break;case b.Pinch:this._effectId="harmonics-pinch";break;case b.Tap:this._effectId="harmonics-tap";break;case b.Semi:this._effectId="harmonics-semi";break;case b.Feedback:this._effectId="harmonics-feedback"}}get effectId(){return this._effectId}get notationElement(){return n.EffectHarmonics}shouldCreateGlyphForNote(e){return!(!e.isHarmonic||e.harmonicType!==this._harmonicType||(e.beat!==this._beat&&(this._beat=e.beat),0))}get sizingMode(){return J.GroupedOnBeat}createNewGlyph(e,t){return new Fr(Wr.harmonicToString(this._harmonicType))}static harmonicToString(e){switch(e){case b.Natural:return"N.H.";case b.Artificial:return"A.H.";case b.Pinch:return"P.H.";case b.Tap:return"T.H.";case b.Semi:return"S.H.";case b.Feedback:return"Fdbk."}return""}}class Vr extends Sr{get notationElement(){return n.EffectLetRing}get canShareBand(){return!1}get hideOnMultiTrack(){return!1}shouldCreateGlyph(e,t){return t.isLetRing}get sizingMode(){return J.GroupedOnBeat}createNewGlyph(e,t){return new Fr("LetRing")}canExpand(e,t){return!0}}class zr extends Mn{constructor(e,t,i,n,r=x.Center){super(e,t),this._lines=i,this.font=n,this.textAlign=r}doLayout(){super.doLayout(),this.height=this.font.size*this._lines.length}paint(e,t,i){i.font=this.font;let n=i.textAlign;i.textAlign=this.textAlign;for(let n=0;n<this._lines.length;n++)this._lines[n]&&i.fillText(this._lines[n],e+this.x,t+this.y+n*this.font.size);i.textAlign=n}}class Hr extends Sr{get notationElement(){return n.EffectLyrics}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(e,t){return!!t.lyrics}createNewGlyph(e,t){return new zr(0,0,t.lyrics,e.resources.effectFont,x.Center)}canExpand(e,t){return!0}}class jr extends Sr{get notationElement(){return n.EffectMarker}get hideOnMultiTrack(){return!0}get canShareBand(){return!0}get sizingMode(){return J.SinglePreBeat}shouldCreateGlyph(e,t){return 0===t.voice.bar.staff.index&&0===t.voice.index&&0===t.index&&t.voice.bar.masterBar.isSectionStart}createNewGlyph(e,t){return new xr(0,0,t.voice.bar.masterBar.section.marker?"["+t.voice.bar.masterBar.section.marker+"] "+t.voice.bar.masterBar.section.text:t.voice.bar.masterBar.section.text,e.resources.markerFont,x.Left)}canExpand(e,t){return!0}}class Ur extends Tr{constructor(e,t){super(Z.PostNotes),this._ottava=e,this._aboveStaff=t}doLayout(){super.doLayout(),this.height=13*this.scale}paintNonGrouped(e,t,i){this.paintOttava(e,t,i)}paintOttava(e,t,i){let n=0;switch(this._ottava){case l._15ma:n=37*this.scale,i.fillMusicFontSymbol(e+this.x-n/2,t+this.y+this.height,.8,C.QuindicesimaAlta,!1);break;case l._8va:n=26*this.scale,i.fillMusicFontSymbol(e+this.x-n/2,t+this.y+this.height,.8,C.OttavaAlta,!1);break;case l._8vb:n=23*this.scale,i.fillMusicFontSymbol(e+this.x-n/2,t+this.y+this.height,.8,C.OttavaBassaVb,!1);break;case l._15mb:n=36*this.scale,i.fillMusicFontSymbols(e+this.x-n/2,t+this.y+this.height,.8,[C.Quindicesima,C.OctaveBaselineM,C.OctaveBaselineB],!1)}return n/2}paintGrouped(e,t,i,n){let r=this.paintOttava(e,t,n),s=3*this.scale,o=e+this.x+r+s,a=t+this.y;a+=this._aboveStaff?2*this.scale:this.height-2*this.scale;let l=8*this.scale;if(i>o){let e=o;for(;e<i;)n.beginPath(),n.moveTo(e,0|a),n.lineTo(Math.min(e+l,i),0|a),e+=l+s,n.stroke();n.beginPath(),this._aboveStaff?(n.moveTo(i,a),n.lineTo(i,t+this.y+this.height)):(n.moveTo(i,a),n.lineTo(i,t+this.y)),n.stroke()}}}class Gr extends Sr{constructor(e){super(),this._aboveStaff=e}get effectId(){return"ottavia-"+(this._aboveStaff?"above":"below")}get notationElement(){return n.EffectOttavia}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return J.GroupedOnBeat}shouldCreateGlyph(e,t){switch(t.ottava){case l._15ma:case l._8va:return this._aboveStaff;case l._8vb:case l._15mb:return!this._aboveStaff}return!1}createNewGlyph(e,t){return new Ur(t.ottava,this._aboveStaff)}canExpand(e,t){return e.ottava===t.ottava}}class Kr extends Br{get notationElement(){return n.EffectPalmMute}shouldCreateGlyphForNote(e){return e.isPalmMute}get sizingMode(){return J.GroupedOnBeat}createNewGlyph(e,t){return new Fr("P.M.")}constructor(){super()}}class $r extends Br{get notationElement(){return n.EffectPickSlide}shouldCreateGlyphForNote(e){return e.slideOutType===_.PickSlideDown||e.slideOutType===_.PickSlideUp}get sizingMode(){return J.GroupedOnBeat}createNewGlyph(e,t){return new Fr("P.S.")}constructor(){super()}}class qr extends On{constructor(e,t,i){super(e,t,Dn.GraceScale,qr.getSymbol(i))}doLayout(){this.width=9*this.scale,this.height=13*this.scale}paint(e,t,i){super.paint(e,t+this.height,i)}static getSymbol(e){switch(e){case S.Up:return C.StringsUpBow;case S.Down:return C.StringsDownBow;default:return C.None}}}class Zr extends Sr{get notationElement(){return n.EffectPickStroke}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(e,t){return t.pickStroke!==S.None}createNewGlyph(e,t){return new qr(0,0,t.pickStroke)}canExpand(e,t){return!0}}class Yr extends Tr{constructor(e){super(Z.EndBeat),this._stepSize=0,this._type=e}doLayout(){switch(super.doLayout(),this._type){case w.Slight:this._stepSize=12*this.scale;break;case w.Wide:this._stepSize=23*this.scale}this.height=18*this.scale}paintGrouped(e,t,i,n){let r=e+this.x,s=i-r,o=Math.max(1,s/this._stepSize);n.beginPath(),n.moveTo(r,t+this.y);for(let e=0;e<o;e++)n.lineTo(r+this._stepSize/2,t+this.y+this.height),n.lineTo(r+this._stepSize,t+this.y),r+=this._stepSize;n.stroke()}}class Xr extends Sr{get notationElement(){return n.EffectSlightBeatVibrato}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return J.GroupedOnBeatToEnd}shouldCreateGlyph(e,t){return t.vibrato===w.Slight}createNewGlyph(e,t){return new Yr(w.Slight)}canExpand(e,t){return!0}}class Qr extends Tr{constructor(e,t,i,n=1.2,r=!1){super(Z.EndBeat),this._scale=0,this._symbol=C.None,this._symbolSize=0,this._type=i,this._scale=n,this.x=e,this.y=t,this._partialWaves=r}doLayout(){super.doLayout();let e=0;switch(this._type){case w.Slight:this._symbol=C.WiggleTrill,this._symbolSize=9*this._scale,e=6*this._scale;break;case w.Wide:this._symbol=C.WiggleVibratoMediumFast,this._symbolSize=10*this._scale,e=10*this._scale}this.height=e*this.scale}paintGrouped(e,t,i,n){let r=i-(e+this.x),s=this._symbolSize*this.scale,o=r/s;this._partialWaves||(o=Math.floor(o)),o<1&&(o=1);let a=0;for(let i=0;i<o;i++)n.fillMusicFontSymbol(e+this.x+a,t+this.y+2*this.height,this._scale*this.scale,this._symbol,!1),a+=s}}class Jr extends Br{get notationElement(){return n.EffectSlightNoteVibrato}shouldCreateGlyphForNote(e){return e.vibrato===w.Slight||e.isTieDestination&&e.tieOrigin.vibrato===w.Slight}get sizingMode(){return J.GroupedOnBeatToEnd}createNewGlyph(e,t){return new Qr(0,0,w.Slight,1.2)}constructor(){super()}}class es extends Sr{get notationElement(){return n.EffectTap}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(e,t){return t.slap||t.pop||t.tap}createNewGlyph(e,t){let i=e.resources;return t.slap?new xr(0,0,"S",i.effectFont,x.Left):t.pop?new xr(0,0,"P",i.effectFont,x.Left):new xr(0,0,"T",i.effectFont,x.Left)}canExpand(e,t){return!0}}class ts extends Mn{constructor(e,t,i){super(e,t),this._tempo=0,this._tempo=i}doLayout(){super.doLayout(),this.height=25*this.scale}paint(e,t,i){let n=this.renderer.resources;i.font=n.markerFont,i.fillMusicFontSymbol(e+this.x,t+this.y+.8*this.height,this.scale*Dn.GraceScale,C.NoteQuarterUp,!1),i.fillText("= "+this._tempo,e+this.x+this.height/2,t+this.y+i.font.size/2)}}class is extends Sr{get notationElement(){return n.EffectTempo}get hideOnMultiTrack(){return!0}get canShareBand(){return!1}get sizingMode(){return J.SinglePreBeat}shouldCreateGlyph(e,t){return 0===t.voice.bar.staff.index&&0===t.voice.index&&0===t.index&&(!!t.voice.bar.masterBar.tempoAutomation||0===t.voice.bar.index)}createNewGlyph(e,t){let i=0;return i=t.voice.bar.masterBar.tempoAutomation?t.voice.bar.masterBar.tempoAutomation.value:t.voice.bar.staff.track.score.tempo,new ts(0,0,i)}canExpand(e,t){return!0}}class ns extends Sr{get notationElement(){return n.EffectText}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyph(e,t){return!!t.text}createNewGlyph(e,t){return new xr(0,0,t.text,e.resources.effectFont,x.Left)}canExpand(e,t){return!0}}class rs extends Mn{constructor(e,t){super(e,t)}doLayout(){super.doLayout(),this.height=20*this.scale}paint(e,t,i){let n=this.renderer.resources;i.font=n.markerFont;let r=i.measureText("tr");i.fillText("tr",e+this.x,t+this.y+i.font.size/2);let s=r+3*this.scale,o=this.width-s,a=1.2,l=11*this.scale*a,c=Math.max(1,(o-s)/l),h=s,u=t+this.y+this.height;for(let t=0;t<c;t++)i.fillMusicFontSymbol(e+this.x+h,u,a,C.WiggleTrill,!1),h+=l}}class ss extends Br{get notationElement(){return n.EffectTrill}shouldCreateGlyphForNote(e){return e.isTrill}get sizingMode(){return J.SingleOnBeat}createNewGlyph(e,t){return new rs(0,0)}}!function(e){e[e.Full=0]="Full",e[e.PartialLeft=1]="PartialLeft",e[e.PartialRight=2]="PartialRight"}(ee||(ee={}));class os extends Mn{constructor(e){super(0,0),this._tripletFeel=e}doLayout(){super.doLayout(),this.height=25*this.scale}paint(e,t,i){e+=this.x;let n=(t+=this.y)+this.height*Dn.GraceScale;i.font=this.renderer.resources.effectFont,i.fillText("(",e,t+.3*this.height);let r=e+10*this.scale,s=e+40*this.scale;switch(this._tripletFeel){case O.NoTripletFeel:this.renderBarNote(r,n,os.NoteScale,i,[ee.Full]),this.renderBarNote(s,n,os.NoteScale,i,[ee.Full]);break;case O.Triplet8th:this.renderBarNote(r,n,os.NoteScale,i,[ee.Full]),i.fillMusicFontSymbol(s,n,os.NoteScale,C.NoteQuarterUp,!1),i.fillMusicFontSymbol(s+os.NoteSeparation*this.scale,n,os.NoteScale,C.NoteEighthUp,!1),this.renderTriplet(s,t,i);break;case O.Triplet16th:this.renderBarNote(r,n,os.NoteScale,i,[ee.Full,ee.Full]),this.renderBarNote(s,n,os.NoteScale,i,[ee.Full,ee.PartialRight]),this.renderTriplet(s,t,i);break;case O.Dotted8th:this.renderBarNote(r,n,os.NoteScale,i,[ee.Full]),this.renderBarNote(s,n,os.NoteScale,i,[ee.Full,ee.PartialRight]),i.fillCircle(s+9*this.scale,n,this.scale);break;case O.Dotted16th:this.renderBarNote(r,n,os.NoteScale,i,[ee.Full,ee.Full]),this.renderBarNote(s,n,os.NoteScale,i,[ee.Full,ee.Full,ee.PartialRight]),i.fillCircle(s+9*this.scale,n,this.scale);break;case O.Scottish8th:this.renderBarNote(r,n,os.NoteScale,i,[ee.Full]),this.renderBarNote(s,n,os.NoteScale,i,[ee.Full,ee.PartialLeft]),i.fillCircle(s+os.NoteSeparation*this.scale+8*this.scale,n,this.scale);break;case O.Scottish16th:this.renderBarNote(r,n,os.NoteScale,i,[ee.Full,ee.Full]),this.renderBarNote(s,n,os.NoteScale,i,[ee.Full,ee.Full,ee.PartialLeft]),i.fillCircle(s+os.NoteSeparation*this.scale+8*this.scale,n,this.scale)}i.fillText("=",e+30*this.scale,t+5*this.scale),i.fillText(")",e+65*this.scale,t+.3*this.height)}renderBarNote(e,t,i,n,r){n.fillMusicFontSymbol(e,t,i,C.NoteQuarterUp,!1);let s=os.NoteSeparation/2*this.scale;for(let i=0;i<r.length;i++)switch(r[i]){case ee.Full:n.fillRect(e+4*this.scale,t-os.NoteHeight*this.scale+os.BarSeparation*this.scale*i,os.NoteSeparation*this.scale,os.BarHeight*this.scale);break;case ee.PartialLeft:n.fillRect(e+4*this.scale,t-os.NoteHeight*this.scale+os.BarSeparation*this.scale*i,s,os.BarHeight*this.scale);break;case ee.PartialRight:n.fillRect(e+4*this.scale+s,t-os.NoteHeight*this.scale+os.BarSeparation*this.scale*i,s,os.BarHeight*this.scale)}n.fillMusicFontSymbol(e+os.NoteSeparation*this.scale,t,i,C.NoteQuarterUp,!1)}renderTriplet(e,t,i){t+=2*this.scale;let n=this.renderer.resources.effectFont;i.font=new _e(n.family,.8*n.size,n.style);let r=e+os.NoteSeparation*this.scale+3*this.scale;i.beginPath(),i.moveTo(e,t+3*this.scale),i.lineTo(e,t),i.lineTo(e+5*this.scale,t),i.moveTo(r+5*this.scale,t+3*this.scale),i.lineTo(r+5*this.scale,t),i.lineTo(r,t),i.stroke(),i.fillText("3",e+7*this.scale,t-10*this.scale),i.font=n}}os.NoteScale=.4,os.NoteHeight=12,os.NoteSeparation=12,os.BarHeight=2,os.BarSeparation=3;class as extends Sr{get notationElement(){return n.EffectTripletFeel}get hideOnMultiTrack(){return!0}get canShareBand(){return!1}get sizingMode(){return J.SinglePreBeat}shouldCreateGlyph(e,t){return 0===t.index&&(0===t.voice.bar.masterBar.index&&t.voice.bar.masterBar.tripletFeel!==O.NoTripletFeel||t.voice.bar.masterBar.index>0&&t.voice.bar.masterBar.tripletFeel!==t.voice.bar.masterBar.previousMasterBar.tripletFeel)}createNewGlyph(e,t){return new os(t.voice.bar.masterBar.tripletFeel)}canExpand(e,t){return!0}}class ls extends Sr{get notationElement(){return n.EffectWhammyBar}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return J.GroupedOnBeat}shouldCreateGlyph(e,t){return t.hasWhammyBar}createNewGlyph(e,t){return new Fr("w/bar")}canExpand(e,t){return!0}}class cs extends Sr{get notationElement(){return n.EffectWideBeatVibrato}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return J.GroupedOnBeatToEnd}shouldCreateGlyph(e,t){return t.vibrato===w.Wide}createNewGlyph(e,t){return new Yr(w.Wide)}canExpand(e,t){return!0}}class hs extends Br{get notationElement(){return n.EffectWideNoteVibrato}shouldCreateGlyphForNote(e){return e.vibrato===w.Wide||e.isTieDestination&&e.tieOrigin.vibrato===w.Wide}get sizingMode(){return J.GroupedOnBeatToEnd}createNewGlyph(e,t){return new Qr(0,0,w.Wide,1.2)}}class us extends Mn{constructor(e,t,i){super(e,t),this._textRow=0,this._fretRow=0,this._firstFretSpacing=0,this._chord=i}doLayout(){super.doLayout();const e=this.scale;let t=this.renderer.resources;this._textRow=1.5*t.effectFont.size*e,this._fretRow=1.5*t.effectFont.size*e,this._chord.firstFret>1?this._firstFretSpacing=us.FretSpacing*e:this._firstFretSpacing=0,this.height=this._textRow+this._fretRow+(us.Frets-1)*us.FretSpacing*e+2*us.Padding*e,this.width=this._firstFretSpacing+(this._chord.staff.tuning.length-1)*us.StringSpacing*e+2*us.Padding*e}paint(e,t,i){e+=this.x+us.Padding*this.scale+this._firstFretSpacing,t+=this.y;let n=this.width-2*us.Padding*this.scale+this.scale-this._firstFretSpacing,r=us.StringSpacing*this.scale,s=us.FretSpacing*this.scale,o=this.renderer.resources,a=us.CircleRadius*this.scale,l=i.textAlign,c=i.textBaseline;i.font=o.effectFont,i.textAlign=x.Center,i.textBaseline=k.Top,this._chord.showName&&i.fillText(this._chord.name,e+this.width/2,t+o.effectFont.size/2),t+=this._textRow,e+=r/2,i.font=o.fretboardNumberFont,i.textBaseline=k.Middle;for(let n=0;n<this._chord.staff.tuning.length;n++){let s=e+n*r,o=t+this._fretRow/2,a=this._chord.strings[this._chord.staff.tuning.length-n-1];a<0?i.fillMusicFontSymbol(s,o,this.scale,C.FretboardX,!0):0===a?i.fillMusicFontSymbol(s,o,this.scale,C.FretboardO,!0):(a-=this._chord.firstFret-1,i.fillText(a.toString(),s,o))}t+=this._fretRow;for(let n=0;n<this._chord.staff.tuning.length;n++){let o=e+n*r;i.fillRect(o,t,1,s*us.Frets+this.scale)}this._chord.firstFret>1&&(i.textAlign=x.Left,i.fillText(this._chord.firstFret.toString(),e-this._firstFretSpacing,t+s/2)),i.fillRect(e,t-this.scale,n,2*this.scale);for(let r=0;r<=us.Frets;r++){let o=t+r*s;i.fillRect(e,o,n,this.scale)}let h=new Map;for(let e of this._chord.barreFrets){let t=[-1,-1];h.set(e-this._chord.firstFret,t)}for(let n=0;n<this._chord.strings.length;n++){let o=this._chord.strings[n];if(o>0){if(o-=this._chord.firstFret,h.has(o)){let e=h.get(o);(-1===e[0]||n<e[0])&&(e[0]=n),(-1===e[1]||n>e[1])&&(e[1]=n)}let l=t+o*s+s/2+.5*this.scale,c=e+(this._chord.strings.length-n-1)*r;i.fillCircle(c,l,a)}}for(const[n,o]of h){let l=t+n*s+s/2+.5*this.scale,c=e+(this._chord.strings.length-o[1]-1)*r,h=e+(this._chord.strings.length-o[0]-1)*r;i.fillRect(c,l-a,h-c,2*a)}i.textAlign=l,i.textBaseline=c}}us.Padding=5,us.Frets=5,us.CircleRadius=2.5,us.StringSpacing=10,us.FretSpacing=12;class ds extends er{constructor(e,t,i=x.Center){super(e,t),this._glyphWidth=0,this.glyphs=[],this._align=i}doLayout(){let e=0;switch(this._align){case x.Left:e=0;break;case x.Center:e=(this.width-this._glyphWidth)/2;break;case x.Right:e=this.width-this._glyphWidth}for(let t of this.glyphs)t.x=e,e+=t.width}addGlyphToRow(e){this.glyphs.push(e),this._glyphWidth+=e.width,e.height>this.height&&(this.height=e.height)}}class fs extends er{constructor(e,t,i=x.Center){super(e,t),this._rows=[],this.height=0,this.glyphs=[],this._align=i}doLayout(){let e=0,t=0,i=2*fs.Padding*this.scale;this._rows=[];let n=new ds(e,t,this._align);n.width=this.width;for(let r of this.glyphs)e+r.width<this.width?(n.addGlyphToRow(r),e+=r.width):(n.isEmpty||(n.doLayout(),this._rows.push(n),t+=n.height+i),e=0,n=new ds(e,t,this._align),n.width=this.width,n.addGlyphToRow(r),e+=r.width);n.isEmpty||(n.doLayout(),this._rows.push(n),t+=n.height+i),this.height=t+i}paint(e,t,i){for(let n of this._rows)n.paint(e+this.x,t+this.y+fs.Padding*this.scale,i)}}fs.Padding=3;class ps extends fs{constructor(e,t){super(e,t)}addChord(e){if(e.strings.length>0){let t=new us(0,0,e);t.renderer=this.renderer,t.doLayout(),this.glyphs.push(t)}}}class gs{constructor(e,t,i){this._sharedLayoutData=new Map,this.barRenderers=[],this.x=0,this.y=0,this.height=0,this.index=0,this.staffIndex=0,this.trackIndex=0,this.staveTop=0,this.topSpacing=20,this.bottomSpacing=5,this.staveBottom=0,this.isFirstInAccolade=!1,this.isLastInAccolade=!1,this._factory=i,this.trackIndex=e,this.modelStaff=t}get staveId(){return this._factory.staffId}getSharedLayoutData(e,t){return this._sharedLayoutData.has(e)?this._sharedLayoutData.get(e):t}setSharedLayoutData(e,t){this._sharedLayoutData.set(e,t)}get isInAccolade(){return this._factory.isInAccolade}get isRelevantForBoundsLookup(){return this._factory.isRelevantForBoundsLookup}registerStaffTop(e){this.staveTop=e}registerStaffBottom(e){this.staveBottom=e}addBarRenderer(e){e.staff=this,e.index=this.barRenderers.length,e.reLayout(),this.barRenderers.push(e),this.staveGroup.layout.registerBarRenderer(this.staveId,e)}addBar(e,t){let i;i=e?this._factory.create(this.staveGroup.layout.renderer,e):new dr(this.staveGroup.layout.renderer,e),i.staff=this,i.index=this.barRenderers.length,i.layoutingInfo=t,i.doLayout(),i.registerLayoutingInfo(),this.barRenderers.push(i),e&&this.staveGroup.layout.registerBarRenderer(this.staveId,i)}revertLastBar(){let e=this.barRenderers[this.barRenderers.length-1];return this.barRenderers.splice(this.barRenderers.length-1,1),this.staveGroup.layout.unregisterBarRenderer(this.staveId,e),e}scaleToWidth(e){this._sharedLayoutData=new Map;let t=(e-this.staveGroup.width)/this.barRenderers.length;for(let e=0,i=this.barRenderers.length;e<i;e++)this.barRenderers[e].scaleToWidth(this.barRenderers[e].width+t)}get topOverflow(){let e=0;for(let t=0,i=this.barRenderers.length;t<i;t++){let i=this.barRenderers[t];i.topOverflow>e&&(e=i.topOverflow)}return e}get bottomOverflow(){let e=0;for(let t=0,i=this.barRenderers.length;t<i;t++){let i=this.barRenderers[t];i.bottomOverflow>e&&(e=i.bottomOverflow)}return e}finalizeStaff(){let e=0;this.height=0;let t=this.topOverflow,i=this.bottomOverflow;for(let i=0;i<this.barRenderers.length;i++)this.barRenderers[i].x=e,this.barRenderers[i].y=this.topSpacing+t,this.height=Math.max(this.height,this.barRenderers[i].height),this.barRenderers[i].finalizeRenderer(),e+=this.barRenderers[i].width;this.height>0&&(this.height+=this.topSpacing+t+i+this.bottomSpacing)}paint(e,t,i,n,r){if(0!==this.height&&0!==r)for(let s=n,o=Math.min(n+r,this.barRenderers.length);s<o;s++)this.barRenderers[s].paint(e+this.x,t+this.y,i)}}class ms{constructor(){this.timePosition=0,this.longestDuration=0,this.smallestDuration=0,this.force=0,this.springConstant=0,this.preBeatWidth=0,this.graceBeatWidth=0,this.postSpringWidth=0,this.allDurations=new Set}get springWidth(){return this.preSpringWidth+this.postSpringWidth}get preSpringWidth(){return this.preBeatWidth+this.graceBeatWidth}}class bs{constructor(){this._timeSortedSprings=[],this._xMin=0,this._minTime=-1,this._onTimePositionsForce=0,this._onTimePositions=new Map,this._incompleteGraceRodsWidth=0,this.version=0,this.preBeatSizes=new Map,this.onBeatSizes=new Map,this.onBeatCenterX=new Map,this.preBeatSize=0,this.postBeatSize=0,this.voiceSize=0,this.minStretchForce=0,this.totalSpringConstant=0,this.incompleteGraceRods=new Map,this.allGraceRods=new Map,this.springs=new Map,this.height=0}updateVoiceSize(e){e>this.voiceSize&&(this.voiceSize=e,this.version++)}setPreBeatSize(e,t){(!this.preBeatSizes.has(e.index)||this.preBeatSizes.get(e.index)<t)&&(this.preBeatSizes.set(e.index,t),this.version++)}getPreBeatSize(e){return this.preBeatSizes.has(e.index)?this.preBeatSizes.get(e.index):0}setOnBeatSize(e,t){(!this.onBeatSizes.has(e.index)||this.onBeatSizes.get(e.index)<t)&&(this.onBeatSizes.set(e.index,t),this.version++)}getOnBeatSize(e){return this.onBeatSizes.has(e.index)?this.onBeatSizes.get(e.index):0}getBeatCenterX(e){return this.onBeatCenterX.has(e.index)?this.onBeatCenterX.get(e.index):0}setBeatCenterX(e,t){(!this.onBeatCenterX.has(e.index)||this.onBeatCenterX.get(e.index)<t)&&(this.onBeatCenterX.set(e.index,t),this.version++)}updateMinStretchForce(e){this.minStretchForce<e&&(this.minStretchForce=e)}addSpring(e,t,i,n,r){let s;if(this.version++,this.springs.has(e))s=this.springs.get(e),s.postSpringWidth<r&&(s.postSpringWidth=r),s.graceBeatWidth<i&&(s.graceBeatWidth=i),s.preBeatWidth<n&&(s.preBeatWidth=n),t<s.smallestDuration&&(s.smallestDuration=t),t>s.longestDuration&&(s.longestDuration=t),s.allDurations.add(t);else{if(s=new ms,s.timePosition=e,s.allDurations.add(t),this._timeSortedSprings.length>0){let e=this._timeSortedSprings[this._timeSortedSprings.length-1];for(const t of e.allDurations)e.timePosition}s.longestDuration=t,s.postSpringWidth=r,s.graceBeatWidth=i,s.preBeatWidth=n,this.springs.set(e,s);let o=this._timeSortedSprings,a=o.length-1;for(;a>0&&o[a].timePosition>e;)a--;this._timeSortedSprings.splice(a+1,0,s)}return(-1===this._minTime||this._minTime>e)&&(this._minTime=e),s}addBeatSpring(e,t,i){let n=e.absoluteDisplayStart;if(e.graceType!==m.None){const r=e.graceGroup.id;this.allGraceRods.has(r)||this.allGraceRods.set(r,new Array(e.graceGroup.beats.length)),e.graceGroup.isComplete||this.incompleteGraceRods.has(r)||this.incompleteGraceRods.set(r,new Array(e.graceGroup.beats.length));let s=this.allGraceRods.get(r)[e.graceIndex];if(s)s.postSpringWidth<i&&(s.postSpringWidth=i),s.preBeatWidth<t&&(s.preBeatWidth=t);else{const s=new ms;s.timePosition=n,s.postSpringWidth=i,s.preBeatWidth=t,e.graceGroup.isComplete||(this.incompleteGraceRods.get(r)[e.graceIndex]=s),this.allGraceRods.get(r)[e.graceIndex]=s}}else{let r=0;if(e.graceGroup&&this.allGraceRods.has(e.graceGroup.id))for(const t of this.allGraceRods.get(e.graceGroup.id))r+=t.springWidth;this.addSpring(n,e.displayDuration,r,t,i)}}finish(){for(const[e,t]of this.allGraceRods){let i=0;if(this.incompleteGraceRods.has(e))for(const e of t)i+=e.preBeatWidth,e.graceBeatWidth=i,i+=e.postSpringWidth;else for(let e=t.length-1;e>=0;e--)t[e].graceBeatWidth=i,i-=t[e].preBeatWidth+t[e].postSpringWidth}this._incompleteGraceRodsWidth=0;for(const e of this.incompleteGraceRods.values())for(const t of e)this._incompleteGraceRodsWidth+=t.preBeatWidth+t.postSpringWidth;this.calculateSpringConstants(),this.version++}calculateSpringConstants(){this._xMin=0;let e=this.springs;for(const t of e.values())t.springWidth<this._xMin&&(this._xMin=t.springWidth);let t=0,i=this._timeSortedSprings;if(0===i.length)return this.totalSpringConstant=-1,void(this.minStretchForce=-1);for(let e=0;e<i.length;e++){let n=i[e],r=0;if(e===i.length-1)r=n.longestDuration;else{let t=i[e+1];r=Math.abs(t.timePosition-n.timePosition)}n.springConstant=this.calculateSpringConstant(n,r),t+=1/n.springConstant}this.totalSpringConstant=1/t,this.minStretchForce=0;for(let e=0;e<i.length;e++){let t=i[e],n=0;if(e===i.length-1)n=t.postSpringWidth;else{let r=i[e+1];n=t.postSpringWidth+r.preSpringWidth}0===e&&(n+=t.preSpringWidth);let r=n*t.springConstant;this.updateMinStretchForce(r)}}paint(e,t,i){}calculateSpringConstant(e,t){return t<=0&&(t=Te.toTicks(p.SixtyFourth)),0===e.smallestDuration&&(e.smallestDuration=t),e.smallestDuration/t*(1/((1+.85*Math.log2(t/bs.MinDuration))*bs.MinDurationWidth))}spaceToForce(e){return-1!==this.totalSpringConstant?(this._timeSortedSprings.length>0&&(e-=this._timeSortedSprings[0].preSpringWidth),e-=this._incompleteGraceRodsWidth,Math.max(e,0)*this.totalSpringConstant):-1}calculateVoiceWidth(e){let t=0;return-1!==this.totalSpringConstant&&(t=this.calculateWidth(e,this.totalSpringConstant)),this._timeSortedSprings.length>0&&(t+=this._timeSortedSprings[0].preSpringWidth),t+=this._incompleteGraceRodsWidth,t}calculateWidth(e,t){return e/t}buildOnTimePositions(e){if(-1===this.totalSpringConstant)return new Map;if(ge.isAlmostEqualTo(this._onTimePositionsForce,e)&&this._onTimePositions)return this._onTimePositions;this._onTimePositionsForce=e;let t=this._onTimePositions=new Map,i=this._timeSortedSprings;if(0===i.length)return t;let n=i[0].preSpringWidth;for(let r=0;r<i.length;r++)t.set(i[r].timePosition,n),n+=this.calculateWidth(e,i[r].springConstant);return t}}bs.MinDuration=30,bs.MinDurationWidth=7;class vs{constructor(){this.width=0,this.isLinkedToPrevious=!1,this.canWrap=!0,this.renderers=[]}}class ys{constructor(e,t){this.staves=[],this.stavesRelevantForBoundsLookup=[],this.firstStaffInAccolade=null,this.lastStaffInAccolade=null,this.staveGroup=e,this.track=t}addStaff(e){this.staves.push(e),e.isRelevantForBoundsLookup&&this.stavesRelevantForBoundsLookup.push(e)}}class _s{constructor(){this._allStaves=[],this._firstStaffInAccolade=null,this._lastStaffInAccolade=null,this._accoladeSpacingCalculated=!1,this.x=0,this.y=0,this.index=0,this.accoladeSpacing=0,this.isFull=!1,this.width=0,this.isLast=!1,this.masterBarsRenderers=[],this.staves=[]}get firstBarIndex(){return this.masterBarsRenderers[0].masterBar.index}get lastBarIndex(){return this.masterBarsRenderers[this.masterBarsRenderers.length-1].masterBar.index}addMasterBarRenderers(e,t){if(0===e.length)return null;this.masterBarsRenderers.push(t),this.calculateAccoladeSpacing(e),t.layoutingInfo.preBeatSize=0;let i=0;for(let e=0,n=this.staves.length;e<n;e++){let n=this.staves[e];for(let e=0,r=n.staves.length;e<r;e++){let r=n.staves[e],s=t.renderers[i++];r.addBarRenderer(s)}}return this.updateWidth(),t}addBars(e,t){if(0===e.length)return null;let i=new vs;i.layoutingInfo=new bs,i.masterBar=e[0].score.masterBars[t],this.masterBarsRenderers.push(i),this.calculateAccoladeSpacing(e);let n=i.layoutingInfo;for(let e of this.staves)for(let r of e.staves){let s=e.track.staves[r.modelStaff.index].bars[t];r.addBar(s,n);let o=r.barRenderers[r.barRenderers.length-1];i.renderers.push(o),o.isLinkedToPrevious&&(i.isLinkedToPrevious=!0),o.canWrap||(i.canWrap=!1)}return n.finish(),i.width=this.updateWidth(),i}revertLastBar(){if(this.masterBarsRenderers.length>1){let e=this.masterBarsRenderers[this.masterBarsRenderers.length-1];this.masterBarsRenderers.splice(this.masterBarsRenderers.length-1,1);let t=0;for(let e=0,i=this._allStaves.length;e<i;e++){let i=this._allStaves[e].revertLastBar();t=Math.max(t,i.width)}return this.width-=t,e}return null}updateWidth(){let e=0;for(let t=0,i=this._allStaves.length;t<i;t++){let i=this._allStaves[t];i.barRenderers[i.barRenderers.length-1].applyLayoutingInfo(),i.barRenderers[i.barRenderers.length-1].width>e&&(e=i.barRenderers[i.barRenderers.length-1].width)}return this.width+=e,e}calculateAccoladeSpacing(e){if(!this._accoladeSpacingCalculated&&0===this.index)if(this._accoladeSpacingCalculated=!0,this.layout.renderer.settings.notation.isNotationElementVisible(n.TrackNames)){let t=this.layout.renderer.canvas,i=this.layout.renderer.settings.display.resources.effectFont;t.font=i;for(let i of e)this.accoladeSpacing=Math.ceil(Math.max(this.accoladeSpacing,t.measureText(i.shortName)));this.accoladeSpacing*=this.layout.scale,this.accoladeSpacing+=2*_s.AccoladeLabelSpacing*this.layout.scale,this.width+=this.accoladeSpacing}else this.accoladeSpacing=0}getStaveTrackGroup(e){for(let t=0,i=this.staves.length;t<i;t++){let i=this.staves[t];if(i.track===e)return i}return null}addStaff(e,t){let i=this.getStaveTrackGroup(e);i||(i=new ys(this,e),this.staves.push(i)),t.staveTrackGroup=i,t.staveGroup=this,t.index=this._allStaves.length,this._allStaves.push(t),i.addStaff(t),t.isInAccolade&&(this._firstStaffInAccolade||(this._firstStaffInAccolade=t,t.isFirstInAccolade=!0),i.firstStaffInAccolade||(i.firstStaffInAccolade=t),this._lastStaffInAccolade||(this._lastStaffInAccolade=t,t.isLastInAccolade=!0),this._lastStaffInAccolade&&(this._lastStaffInAccolade.isLastInAccolade=!1),this._lastStaffInAccolade=t,this._lastStaffInAccolade.isLastInAccolade=!0,i.lastStaffInAccolade=t)}get height(){return this._allStaves[this._allStaves.length-1].y+this._allStaves[this._allStaves.length-1].height}scaleToWidth(e){for(let t=0,i=this._allStaves.length;t<i;t++)this._allStaves[t].scaleToWidth(e);this.width=e}paint(e,t,i){this.paintPartial(e+this.x,t+this.y,i,0,this.masterBarsRenderers.length)}paintPartial(e,t,i,r,s){this.buildBoundingsLookup(e,t);for(let n=0,o=this._allStaves.length;n<o;n++)this._allStaves[n].paint(e,t,i,r,s);let o=this.layout.renderer.settings.display.resources;if(this.staves.length>0&&0===r){if(i.color=o.barSeparatorColor,this._firstStaffInAccolade&&this._lastStaffInAccolade){let n=t+this._firstStaffInAccolade.y+this._firstStaffInAccolade.staveTop+this._firstStaffInAccolade.topSpacing+this._firstStaffInAccolade.topOverflow,r=t+this._lastStaffInAccolade.y+this._lastStaffInAccolade.topSpacing+this._lastStaffInAccolade.topOverflow+this._lastStaffInAccolade.staveBottom,s=e+this._firstStaffInAccolade.x;i.beginPath(),i.moveTo(s,n),i.lineTo(s,r),i.stroke()}i.font=o.effectFont;for(let r=0,s=this.staves.length;r<s;r++){let s=this.staves[r];if(s.firstStaffInAccolade&&s.lastStaffInAccolade){let r=t+s.firstStaffInAccolade.y+s.firstStaffInAccolade.staveTop+s.firstStaffInAccolade.topSpacing+s.firstStaffInAccolade.topOverflow,o=t+s.lastStaffInAccolade.y+s.lastStaffInAccolade.topSpacing+s.lastStaffInAccolade.topOverflow+s.lastStaffInAccolade.staveBottom,a=e+s.firstStaffInAccolade.x,l=3*this.layout.renderer.settings.display.scale,c=l,h=r-4*l,u=o+4*l;0===this.index&&this.layout.renderer.settings.notation.isNotationElementVisible(n.TrackNames)&&i.fillText(s.track.shortName,e+_s.AccoladeLabelSpacing*this.layout.scale,r),i.fillRect(a-c-l,h,l,u-h);let d=a-c-l,f=a+2*l;i.beginPath(),i.moveTo(d,h),i.bezierCurveTo(d,h,d,h,f,h-l),i.bezierCurveTo(a,h+l,d,h+l,d,h+l),i.closePath(),i.fill(),i.beginPath(),i.moveTo(d,u),i.bezierCurveTo(d,u,a,u,f,u+l),i.bezierCurveTo(a,u-l,d,u-l,d,u-l),i.closePath(),i.fill()}}}}finalizeGroup(){let e=0;for(let t of this._allStaves)t.x=this.accoladeSpacing,t.y=e,t.finalizeStaff(),e+=t.height}buildBoundingsLookup(e,t){if(this.layout.renderer.boundsLookup.isFinished)return;if(!this._firstStaffInAccolade||!this._lastStaffInAccolade)return;let i=this._allStaves[this._allStaves.length-1],n=t+this.y+this._firstStaffInAccolade.y,r=t+this.y+this._lastStaffInAccolade.y+this._lastStaffInAccolade.height,s=t+this.y+this._allStaves[0].y,o=t+this.y+i.y+i.height,a=t+this.y+this._firstStaffInAccolade.y+this._firstStaffInAccolade.topSpacing+this._firstStaffInAccolade.topOverflow+(this._firstStaffInAccolade.barRenderers.length>0?this._firstStaffInAccolade.barRenderers[0].topPadding:0),l=r-n,c=t+this.y+i.y+i.height-i.bottomSpacing-i.bottomOverflow-(i.barRenderers.length>0?i.barRenderers[0].bottomPadding:0)-a,h=o-s,u=this.x+this._firstStaffInAccolade.x,d=new pn;d.visualBounds=new lt,d.visualBounds.x=e,d.visualBounds.y=t+this.y,d.visualBounds.w=this.width,d.visualBounds.h=this.height,d.realBounds=new lt,d.realBounds.x=e,d.realBounds.y=t+this.y,d.realBounds.w=this.width,d.realBounds.h=this.height,this.layout.renderer.boundsLookup.addStaveGroup(d);let f=new Map;for(let e=0;e<this.staves.length;e++)for(let i of this.staves[e].stavesRelevantForBoundsLookup)for(let e of i.barRenderers){let r;f.has(e.bar.masterBar.index)?r=f.get(e.bar.masterBar.index):(r=new dn,r.index=e.bar.masterBar.index,r.isFirstOfLine=e.isFirstOfLine,r.realBounds=new lt,r.realBounds.x=u+e.x,r.realBounds.y=s,r.realBounds.w=e.width,r.realBounds.h=h,r.visualBounds=new lt,r.visualBounds.x=u+e.x,r.visualBounds.y=n,r.visualBounds.w=e.width,r.visualBounds.h=l,r.lineAlignedBounds=new lt,r.lineAlignedBounds.x=u+e.x,r.lineAlignedBounds.y=a,r.lineAlignedBounds.w=e.width,r.lineAlignedBounds.h=c,this.layout.renderer.boundsLookup.addMasterBar(r),f.set(r.index,r)),e.buildBoundingsLookup(r,u,t+this.y+i.y)}}getBarX(e){if(!this._firstStaffInAccolade||0===this.layout.renderer.tracks.length)return 0;let t=this.layout.renderer.tracks[0].staves[0].bars[e];return this.layout.getRendererForBar(this._firstStaffInAccolade.staveId,t).x}}_s.AccoladeLabelSpacing=10;class ws extends er{constructor(e,t,i,n){super(e,t),this._tuning=i,this._trackLabel=n,this.glyphs=[]}doLayout(){if(!(this.glyphs.length>0)){this.createGlyphs(this._tuning);for(const e of this.glyphs)e.renderer=this.renderer,e.doLayout()}}createGlyphs(e){const t=this.renderer.scale,i=this.renderer.resources;this.height=0;const n=15*t;this._trackLabel.length>0&&(this.addGlyph(new xr(0,this.height,this._trackLabel,i.effectFont,x.Left)),this.height+=n),this.addGlyph(new xr(0,this.height,e.name,i.effectFont,x.Left));const r=64*t;if(this.renderer.scoreRenderer.canvas.font=i.effectFont,this.width=Math.max(this.renderer.scoreRenderer.canvas.measureText(this._trackLabel)*t,Math.max(this.renderer.scoreRenderer.canvas.measureText(e.name)*t,2*r)),this.height+=n,!e.isStandard){const s=.7,o=ws.CircleNumberHeight*s*t;let a=0|Math.ceil(e.tunings.length/2),l=0,c=this.height;for(let h=0,u=e.tunings.length;h<u;h++){const u=C.GuitarString0+(h+1);this.addGlyph(new On(l,c+o/1.2,s,u));const d="= "+Ye.getTextForTuning(e.tunings[h],!1);this.addGlyph(new xr(l+o+1*t,c,d,i.effectFont,x.Left)),c+=n,h===a-1&&(c=this.height,l+=r)}this.height+=a*n}this.width+=15*t}}ws.CircleNumberHeight=20;class Ss extends fs{constructor(e,t){super(e,t,x.Left)}addTuning(e,t){if(e.tunings.length>0){let i=new ws(0,0,e,t);i.renderer=this.renderer,i.doLayout(),this.glyphs.push(i)}}}class Cs{constructor(e){this._barRendererLookup=new Map,this.width=0,this.height=0,this.scoreInfoGlyphs=new Map,this.chordDiagrams=null,this.tuningGlyph=null,this.firstBarIndex=0,this.lastBarIndex=0,this.renderer=e}layoutAndRender(){let e=this.renderer.score,t=this.renderer.settings.display.startBar;t--,t=Math.min(e.masterBars.length-1,Math.max(0,t)),this.firstBarIndex=t;let i=this.renderer.settings.display.barCount;i<0&&(i=e.masterBars.length),i=t+i-1,i=Math.min(e.masterBars.length-1,Math.max(0,i)),this.lastBarIndex=i,this.createScoreInfoGlyphs(),this.doLayoutAndRender()}createScoreInfoGlyphs(){Oe.debug("ScoreLayout","Creating score info glyphs");let e=this.renderer.settings.notation,t=this.renderer.score,i=this.renderer.settings.display.resources;this.scoreInfoGlyphs=new Map,t.title&&e.isNotationElementVisible(n.ScoreTitle)&&this.scoreInfoGlyphs.set(n.ScoreTitle,new xr(0,0,t.title,i.titleFont,x.Center)),t.subTitle&&e.isNotationElementVisible(n.ScoreSubTitle)&&this.scoreInfoGlyphs.set(n.ScoreSubTitle,new xr(0,0,t.subTitle,i.subTitleFont,x.Center)),t.artist&&e.isNotationElementVisible(n.ScoreArtist)&&this.scoreInfoGlyphs.set(n.ScoreArtist,new xr(0,0,t.artist,i.subTitleFont,x.Center)),t.album&&e.isNotationElementVisible(n.ScoreAlbum)&&this.scoreInfoGlyphs.set(n.ScoreAlbum,new xr(0,0,t.album,i.subTitleFont,x.Center)),t.music&&t.music===t.words&&e.isNotationElementVisible(n.ScoreWordsAndMusic)?this.scoreInfoGlyphs.set(n.ScoreWordsAndMusic,new xr(0,0,"Music and Words by "+t.words,i.wordsFont,x.Center)):(t.music&&e.isNotationElementVisible(n.ScoreMusic)&&this.scoreInfoGlyphs.set(n.ScoreMusic,new xr(0,0,"Music by "+t.music,i.wordsFont,x.Right)),t.words&&e.isNotationElementVisible(n.ScoreWords)&&this.scoreInfoGlyphs.set(n.ScoreWords,new xr(0,0,"Words by "+t.words,i.wordsFont,x.Left)));const r=new dr(this.renderer,this.renderer.tracks[0].staves[0].bars[0]);if(e.isNotationElementVisible(n.GuitarTuning)){let e=[];for(let t of this.renderer.tracks)for(let i of t.staves)if(!i.isPercussion&&i.isStringed&&i.tuning.length>0&&i.showTablature){e.push(i);break}if(e.length>0){this.tuningGlyph=new Ss(0,0),this.tuningGlyph.renderer=r;for(const t of e)this.tuningGlyph.addTuning(t.stringTuning,e.length>1?t.track.name:"")}}if(e.isNotationElementVisible(n.ChordDiagrams)){this.chordDiagrams=new ps(0,0),this.chordDiagrams.renderer=r;let e=new Map;for(let t of this.renderer.tracks)for(let i of t.staves)for(const[t,n]of i.chords)e.has(t)||n.showDiagram&&(e.set(t,n),this.chordDiagrams.addChord(n))}}get scale(){return this.renderer.settings.display.scale}createEmptyStaveGroup(){let t=new _s;t.layout=this;for(let i=0;i<this.renderer.tracks.length;i++){let n=this.renderer.tracks[i],r=!1;for(let e of n.staves)if(e.showStandardNotation){r=!0;break}for(let s=0;s<n.staves.length;s++){let o,a=n.staves[s];if(a.isPercussion)o=e.StaveProfile.Score;else if(this.renderer.settings.display.staveProfile!==e.StaveProfile.Default)o=this.renderer.settings.display.staveProfile;else if(a.showTablature&&a.showStandardNotation)o=e.StaveProfile.ScoreTab;else if(a.showTablature)o=r?e.StaveProfile.TabMixed:e.StaveProfile.Tab;else{if(!a.showStandardNotation)continue;o=e.StaveProfile.Score}let l=na.staveProfiles.get(o);for(let e of l)e.canCreate(n,a)&&t.addStaff(n,new gs(i,a,e))}}return t}registerBarRenderer(e,t){this._barRendererLookup.has(e)||this._barRendererLookup.set(e,new Map),this._barRendererLookup.get(e).set(t.bar.id,t)}unregisterBarRenderer(e,t){this._barRendererLookup.has(e)&&this._barRendererLookup.get(e).delete(t.bar.id)}getRendererForBar(e,t){let i=t.id;return this._barRendererLookup.has(e)&&this._barRendererLookup.get(e).has(i)?this._barRendererLookup.get(e).get(i):null}renderAnnotation(){let e="rendered by alphaTab",t=this.renderer.canvas,i=this.renderer.settings.display.resources,n=12*this.renderer.settings.display.scale,s=2*n;this.height+=s;let o=this.width/2;t.beginRender(this.width,s),t.color=i.mainGlyphColor,t.font=new _e(i.copyrightFont.family,n,r.Bold),t.textAlign=x.Center,t.fillText(e,o,n);let a=t.endRender(),l=new cn;l.width=this.width,l.height=s,l.renderResult=a,l.totalWidth=this.width,l.totalHeight=this.height,l.firstMasterBarIndex=-1,l.lastMasterBarIndex=-1,this.renderer.partialRenderFinished.trigger(l)}}class xs{constructor(){this.width=0,this.masterBars=[]}}class ks extends Cs{constructor(e){super(e),this._group=null,this._pagePadding=null}get name(){return"HorizontalScreen"}get supportsResize(){return!1}resize(){}doLayoutAndRender(){this._pagePadding=this.renderer.settings.display.padding,this._pagePadding||(this._pagePadding=ks.PagePadding),1===this._pagePadding.length?this._pagePadding=[this._pagePadding[0],this._pagePadding[0],this._pagePadding[0],this._pagePadding[0]]:2===this._pagePadding.length&&(this._pagePadding=[this._pagePadding[0],this._pagePadding[1],this._pagePadding[0],this._pagePadding[1]]);let e=this.renderer.score,t=this.renderer.canvas,i=this.renderer.settings.display.startBar;i--,i=Math.min(e.masterBars.length-1,Math.max(0,i));let n=i,r=this.renderer.settings.display.barCount;r<=0&&(r=e.masterBars.length),r=i+r-1,r=Math.min(e.masterBars.length-1,Math.max(0,r)),this._group=this.createEmptyStaveGroup(),this._group.isLast=!0,this._group.x=this._pagePadding[0],this._group.y=this._pagePadding[1];let s=this.renderer.settings.display.barCountPerPartial,o=[],a=new xs;for(;n<=r;){let t=this._group.addBars(this.renderer.tracks,n);if(t)if(0===a.masterBars.length&&t.isLinkedToPrevious&&o.length>0){let i=o[o.length-1];i.masterBars.push(e.masterBars[n]),i.width+=t.width}else a.masterBars.push(e.masterBars[n]),a.width+=t.width,a.masterBars.length>=s&&(0===o.length&&(a.width+=this._group.x+this._group.accoladeSpacing),o.push(a),Oe.debug(this.name,"Finished partial from bar "+a.masterBars[0].index+" to "+a.masterBars[a.masterBars.length-1].index,null),a=new xs);n++}a.masterBars.length>0&&(0===o.length&&(a.width+=this._group.x+this._group.accoladeSpacing),o.push(a),Oe.debug(this.name,"Finished partial from bar "+a.masterBars[0].index+" to "+a.masterBars[a.masterBars.length-1].index,null)),this._group.finalizeGroup(),this.height=this._group.y+this._group.height+this._pagePadding[3],this.width=this._group.x+this._group.width+this._pagePadding[2],n=0;for(let e=0;e<o.length;e++){let i=o[e];t.beginRender(i.width,this.height),t.color=this.renderer.settings.display.resources.mainGlyphColor,t.textAlign=x.Left;let r=this._group.getBarX(i.masterBars[0].index)+this._group.accoladeSpacing;0===e&&(r-=this._group.x+this._group.accoladeSpacing),Oe.debug(this.name,"Rendering partial from bar "+i.masterBars[0].index+" to "+i.masterBars[i.masterBars.length-1].index,null),this._group.paintPartial(-r,this._group.y,this.renderer.canvas,n,i.masterBars.length);let s=t.endRender(),a=new cn;a.totalWidth=this.width,a.totalHeight=this.height,a.width=i.width,a.height=this.height,a.renderResult=s,a.firstMasterBarIndex=i.masterBars[0].index,a.lastMasterBarIndex=i.masterBars[i.masterBars.length-1].index,this.renderer.partialRenderFinished.trigger(a),n+=i.masterBars.length}}}ks.PagePadding=[20,20,20,20],ks.GroupSpacing=20;class Es extends Cs{constructor(e){super(e),this._groups=[],this._allMasterBarRenderers=[],this._barsFromPreviousGroup=[],this._pagePadding=null}get name(){return"PageView"}doLayoutAndRender(){this._pagePadding=this.renderer.settings.display.padding,this._pagePadding||(this._pagePadding=Es.PagePadding),1===this._pagePadding.length?this._pagePadding=[this._pagePadding[0],this._pagePadding[0],this._pagePadding[0],this._pagePadding[0]]:2===this._pagePadding.length&&(this._pagePadding=[this._pagePadding[0],this._pagePadding[1],this._pagePadding[0],this._pagePadding[1]]);let e=this._pagePadding[0],t=this._pagePadding[1];this.width=this.renderer.width,this._allMasterBarRenderers=[],t=this.layoutAndRenderScoreInfo(e,t,-1),t=this.layoutAndRenderTunings(t,-1),t=this.layoutAndRenderChordDiagrams(t,-1),t=this.layoutAndRenderScore(e,t),this.height=t+this._pagePadding[3]}get supportsResize(){return!0}resize(){let e=this._pagePadding[0],t=this._pagePadding[1];this.width=this.renderer.width;let i=this.height;t=this.layoutAndRenderScoreInfo(e,t,i),t=this.layoutAndRenderTunings(t,i),t=this.layoutAndRenderChordDiagrams(t,i),t=this.resizeAndRenderScore(e,t,i),this.height=t+this._pagePadding[3]}layoutAndRenderTunings(e,t=-1){if(!this.tuningGlyph)return e;let i=this.renderer.settings.display.resources;this.tuningGlyph.width=this.width,this.tuningGlyph.doLayout();let n=this.tuningGlyph.height+11*this.scale;e+=n;let r=this.renderer.canvas;r.beginRender(this.width,n),r.color=i.scoreInfoColor,r.textAlign=x.Center,this.tuningGlyph.paint(this._pagePadding[0],0,r);let s=r.endRender(),o=new cn;return o.width=this.width,o.height=n,o.renderResult=s,o.totalWidth=this.width,o.totalHeight=t<0?e:t,o.firstMasterBarIndex=-1,o.lastMasterBarIndex=-1,this.renderer.partialRenderFinished.trigger(o),e}layoutAndRenderChordDiagrams(e,t=-1){if(!this.chordDiagrams)return e;let i=this.renderer.settings.display.resources;this.chordDiagrams.width=this.width,this.chordDiagrams.doLayout();let n=this.renderer.canvas;n.beginRender(this.width,this.chordDiagrams.height),n.color=i.scoreInfoColor,n.textAlign=x.Center,this.chordDiagrams.paint(0,0,n);let r=n.endRender();e+=this.chordDiagrams.height;let s=new cn;return s.width=this.width,s.height=this.chordDiagrams.height,s.renderResult=r,s.totalWidth=this.width,s.totalHeight=t<0?e:t,s.firstMasterBarIndex=-1,s.lastMasterBarIndex=-1,this.renderer.partialRenderFinished.trigger(s),e}layoutAndRenderScoreInfo(e,t,i=-1){Oe.debug(this.name,"Layouting score info");let r=this.scale,s=this.renderer.settings.display.resources,o=[n.ScoreTitle,n.ScoreSubTitle,n.ScoreArtist,n.ScoreAlbum,n.ScoreWordsAndMusic];for(let e=0;e<o.length;e++)if(this.scoreInfoGlyphs.has(o[e])){let i=this.scoreInfoGlyphs.get(o[e]);i.x=this.width/2,i.y=t,i.textAlign=x.Center,t+=i.font.size*r}let a=!1,l=0;if(this.scoreInfoGlyphs.has(n.ScoreMusic)){let e=this.scoreInfoGlyphs.get(n.ScoreMusic);e.x=this.width-this._pagePadding[2],e.y=t,e.textAlign=x.Right,a=!0,l=e.font.size*r}if(this.scoreInfoGlyphs.has(n.ScoreWords)){let i=this.scoreInfoGlyphs.get(n.ScoreWords);i.x=e,i.y=t,i.textAlign=x.Left,a=!0,l=i.font.size*r}a&&(t+=l),t+=17*this.scale;let c=this.renderer.canvas;c.beginRender(this.width,t),c.color=s.scoreInfoColor,c.textAlign=x.Center;for(const e of this.scoreInfoGlyphs.values())e.paint(0,0,c);let h=c.endRender(),u=new cn;return u.width=this.width,u.height=t,u.renderResult=h,u.totalWidth=this.width,u.totalHeight=i<0?t:i,u.firstMasterBarIndex=-1,u.lastMasterBarIndex=-1,this.renderer.partialRenderFinished.trigger(u),t}resizeAndRenderScore(e,t,i){let n=this.renderer.canvas;if(-1!==this.renderer.settings.display.barsPerRow)for(let e=0;e<this._groups.length;e++){let r=this._groups[e];this.fitGroup(r),r.finalizeGroup(),t+=this.paintGroup(r,i,n)}else{this._groups=[];let r=0,s=this.maxWidth,o=this.createEmptyStaveGroup();for(o.index=this._groups.length,o.x=e,o.y=t;r<this._allMasterBarRenderers.length;){let a=this._allMasterBarRenderers[r];if(o.width+a.width<=s||0===o.masterBarsRenderers.length)o.addMasterBarRenderers(this.renderer.tracks,a),r++;else{for(;a&&!a.canWrap&&o.masterBarsRenderers.length>1;)a=o.revertLastBar(),r--;o.isFull=!0,o.isLast=this.lastBarIndex===o.lastBarIndex,this._groups.push(o),this.fitGroup(o),o.finalizeGroup(),t+=this.paintGroup(o,i,n),o=this.createEmptyStaveGroup(),o.index=this._groups.length,o.x=e,o.y=t}}o.isLast=this.lastBarIndex===o.lastBarIndex,this.fitGroup(o),o.finalizeGroup(),t+=this.paintGroup(o,i,n)}return t}layoutAndRenderScore(e,t){let i=this.renderer.canvas,n=this.firstBarIndex,r=this.lastBarIndex;for(this._groups=[];n<=r;){let s=this.createStaveGroup(n,r);this._groups.push(s),s.x=e,s.y=t,n=s.lastBarIndex+1,this.fitGroup(s),s.finalizeGroup(),Oe.debug(this.name,"Rendering partial from bar "+s.firstBarIndex+" to "+s.lastBarIndex,null),t+=this.paintGroup(s,t,i)}return t}paintGroup(e,t,i){let n=e.height+20*this.scale;i.beginRender(this.width,n),this.renderer.canvas.color=this.renderer.settings.display.resources.mainGlyphColor,this.renderer.canvas.textAlign=x.Left,e.paint(0,-e.y,i),t+=n;let r=i.endRender(),s=new cn;return s.totalWidth=this.width,s.totalHeight=t,s.width=this.width,s.height=n,s.renderResult=r,s.firstMasterBarIndex=e.firstBarIndex,s.lastMasterBarIndex=e.lastBarIndex,this.renderer.partialRenderFinished.trigger(s),n}fitGroup(e){(e.isFull||e.width>this.maxWidth)&&e.scaleToWidth(this.maxWidth),this.width=Math.max(this.width,e.width)}createStaveGroup(e,t){let i=this.createEmptyStaveGroup();i.index=this._groups.length;let n=this.renderer.settings.display.barsPerRow,r=this.maxWidth,s=t+1;for(let t=e;t<s;t++){if(this._barsFromPreviousGroup.length>0)for(let e of this._barsFromPreviousGroup)i.addMasterBarRenderers(this.renderer.tracks,e),t=e.masterBar.index;else{let e=i.addBars(this.renderer.tracks,t);e&&this._allMasterBarRenderers.push(e)}this._barsFromPreviousGroup=[];let e=!1;if((-1===n&&i.width>=r&&0!==i.masterBarsRenderers.length||i.masterBarsRenderers.length===n+1)&&(e=!0),e){let e=i.revertLastBar();if(e)for(this._barsFromPreviousGroup.push(e);e&&!e.canWrap&&i.masterBarsRenderers.length>1;)e=i.revertLastBar(),e&&this._barsFromPreviousGroup.push(e);return i.isFull=!0,i.isLast=!1,this._barsFromPreviousGroup.reverse(),i}i.x=0}return i.isLast=t===i.lastBarIndex,i}get maxWidth(){return this.renderer.width-this._pagePadding[0]-this._pagePadding[2]}}Es.PagePadding=[40,40,40,40],Es.GroupSpacing=20;class Ts extends On{constructor(e,t,i,n=!1){super(e,t,n?Dn.GraceScale:1,Ts.getMusicSymbol(i)),this._isGrace=n,this._accidentalType=i}static getMusicSymbol(e){switch(e){case Y.Natural:return C.AccidentalNatural;case Y.Sharp:return C.AccidentalSharp;case Y.Flat:return C.AccidentalFlat;case Y.NaturalQuarterNoteUp:return C.AccidentalQuarterToneNaturalArrowUp;case Y.SharpQuarterNoteUp:return C.AccidentalQuarterToneSharpArrowUp;case Y.FlatQuarterNoteUp:return C.AccidentalQuarterToneFlatArrowUp;case Y.DoubleSharp:return C.AccidentalDoubleSharp;case Y.DoubleFlat:return C.AccidentalDoubleFlat}return C.None}doLayout(){switch(this._accidentalType){case Y.DoubleFlat:this.width=18;break;default:this.width=8}this.width=this.width*(this._isGrace?Dn.GraceScale:1)*this.scale}}class Ls extends Nn{constructor(e,t,i){super(e,t),this._number=0,this._number=i}doLayout(){this.renderer.scoreRenderer.canvas.font=this.renderer.resources.barNumberFont,this.width=this.renderer.scoreRenderer.canvas.measureText(this._number.toString())+5*this.scale}paint(e,t,i){if(!this.renderer.staff.isFirstInAccolade)return;let n=this.renderer.resources,r=i.color;i.color=n.barNumberColor,i.font=n.barNumberFont,i.fillText(this._number.toString(),e+this.x,t+this.y),i.color=r}}class Ns extends Nn{constructor(e,t){super(e,t)}doLayout(){this.renderer.isLast?this.width=15*this.scale:this.renderer.nextRenderer&&this.renderer.nextRenderer.staff===this.renderer.staff&&this.renderer.nextRenderer.bar.masterBar.isRepeatStart?this.width=2*this.scale:(this.width=2*this.scale,this.renderer.bar.masterBar.isDoubleBar&&(this.width+=2*this.scale))}paint(e,t,i){let n=4*this.scale,r=t+this.y+this.renderer.topPadding,s=t+this.y+this.renderer.height-this.renderer.bottomPadding,o=e+this.x,a=s-r;this.renderer.isLast?(i.fillRect(o+this.width-n-n,r,this.scale,a),i.fillRect(o+this.width-n,r,n,a)):this.renderer.nextRenderer&&this.renderer.nextRenderer.staff===this.renderer.staff&&this.renderer.nextRenderer.bar.masterBar.isRepeatStart||(i.fillRect(o+this.width-this.scale,r,this.scale,a),this.renderer.bar.masterBar.isDoubleBar&&i.fillRect(o+this.width-5*this.scale,r,this.scale,a))}}class Ms extends On{constructor(e,t,i,n){super(e,t,1,Ms.getSymbol(i)),this._clef=i,this._clefOttava=n}doLayout(){switch(this._clef){case a.Neutral:this.width=15*this.scale;break;case a.C3:case a.C4:case a.F4:case a.G2:this.width=28*this.scale}}static getSymbol(e){switch(e){case a.Neutral:return C.UnpitchedPercussionClef1;case a.C3:case a.C4:return C.CClef;case a.F4:return C.FClef;case a.G2:return C.GClef;default:return C.None}}paint(e,t,i){let n;super.paint(e,t,i);let r=!1;switch(this._clefOttava){case l._15ma:n=new On(-4*this.scale,0,.5,C.Quindicesima),r=!0;break;case l._8va:n=new On(-2*this.scale,0,.5,C.Ottava),r=!0;break;case l._8vb:n=new On(-6*this.scale,0,.5,C.Ottava);break;case l._15mb:n=new On(-8*this.scale,0,.5,C.Quindicesima);break;default:return}let s=0,o=0;switch(this._clef){case a.Neutral:s=r?-12:15,o=0;break;case a.C3:case a.C4:s=r?-19:27,o=0;break;case a.F4:s=r?-9:27,o=-4;break;case a.G2:s=r?-37:30,o=0;break;default:return}n.renderer=this.renderer,n.doLayout();let c=this.width/2;n.paint(e+this.x+c+o*this.scale,t+this.y+s*this.scale,i)}}class Os extends Nn{constructor(e,t){super(e,t)}doLayout(){this.width=11*this.scale}paint(e,t,i){let n=4*this.scale,r=t+this.y+this.renderer.topPadding,s=t+this.y+this.renderer.height-this.renderer.bottomPadding,o=e+this.x,a=s-r,l=1.5*this.scale,c=(r+s)/2,h=3;i.fillCircle(o,c-l*h,l),i.fillCircle(o,c+l*h,l),o+=4*this.scale,i.beginPath(),i.moveTo(o,r),i.lineTo(o,s),i.stroke(),o+=3*this.scale+.5,i.fillRect(o,r,n,a)}}class Ds extends Nn{constructor(e,t,i){super(e,t),this._count=0,this._count=0,this._count=i}doLayout(){this.width=0}paint(e,t,i){let n=this.renderer.resources,r=i.textAlign;i.font=n.barNumberFont,i.textAlign=x.Right;let s="x"+this._count,o=i.measureText(s)/1.5;i.fillText(s,e+this.x-o,t+this.y),i.textAlign=r}}class Is extends Nn{constructor(e,t,i,n){super(e,t),this._dotOffset=0,this._circleSize=0,this._dotOffset=0,this._circleSize=0,this._dotOffset=n,this._circleSize=i}doLayout(){this.width=13*this.scale}paint(e,t,i){let n=4*this.scale,r=t+this.y+this.renderer.topPadding,s=t+this.y+this.renderer.height-this.renderer.bottomPadding,o=e+this.x+.5,a=s-r;i.fillRect(o,r,n,a),o+=2*n-.5,i.beginPath(),i.moveTo(o,r),i.lineTo(o,s),i.stroke(),o+=3*this.scale;let l=this._circleSize*this.scale,c=(r+s)/2;i.fillCircle(o,c-l*this._dotOffset,l),i.fillCircle(o,c+l*this._dotOffset,l)}}class As extends On{constructor(e,t,i){super(e,t,1,As.getSymbol(i))}static getSymbol(e){switch(e){case s.None:return C.None;case s.Normal:return C.ArticAccentAbove;case s.Heavy:return C.ArticMarcatoAbove;default:return C.None}}doLayout(){this.width=9*this.scale,this.height=9*this.scale}paint(e,t,i){super.paint(e-2*this.scale,t+this.height,i)}}class Ps extends Nn{constructor(e,t,i){super(e,t),this._size=0,this._size=i}doLayout(){this.width=this._size+3*this.scale}paint(e,t,i){i.fillCircle(e+this.x,t+this.y,this._size)}}class Rs extends On{constructor(e,t,i){super(e,t,i?Dn.GraceScale:1,C.NoteheadXOrnate),this._isGrace=i}doLayout(){this.width=9*(this._isGrace?Dn.GraceScale:1)*this.scale,this.height=Dn.NoteHeadHeight*this.scale}}class Bs extends On{constructor(e,t,i,n){super(e,t,n?Dn.GraceScale:1,Bs.getSymbol(i)),this._isGrace=n}static getSymbol(e){switch(e){case p.QuadrupleWhole:case p.DoubleWhole:case p.Whole:case p.Half:return C.NoteheadDiamondWhiteWide;default:return C.NoteheadDiamondBlackWide}}doLayout(){this.width=9*(this._isGrace?Dn.GraceScale:1)*this.scale,this.height=Dn.NoteHeadHeight*this.scale}}class Fs extends Nn{constructor(e,t,i){super(0,0),this.yOffset=0,this.startNoteRenderer=null,this.endNoteRenderer=null,this.tieDirection=B.Up,this.startBeat=e,this.endBeat=t,this.forEnd=i}doLayout(){this.width=0}paint(e,t,i){if(!this.endBeat)return;let n=this.startNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this.startBeat.voice.bar),r=this.endNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this.endBeat.voice.bar),s=0,o=0,a=0,l=0,c=!1;this.tieDirection=n?this.getBeamDirection(this.startBeat,n):this.getBeamDirection(this.endBeat,r),!this.forEnd&&n?(n!==r?(s=e+n.x+this.getStartX(),a=t+n.y+this.getStartY()+this.yOffset,r&&n.staff===r.staff?(o=e+r.x+this.getEndX(),l=t+r.y+this.getEndY()+this.yOffset):(o=e+n.x+n.width,l=a)):(s=e+n.x+this.getStartX(),o=e+r.x+this.getEndX(),a=t+n.y+this.getStartY()+this.yOffset,l=t+r.y+this.getEndY()+this.yOffset),c=!0):n&&n.staff===r.staff||(s=e+r.x,o=e+r.x+this.getEndX(),a=t+r.y+this.getEndY()+this.yOffset,l=a,c=!0),c&&(this.shouldDrawBendSlur()?Fs.drawBendSlur(i,s,a,o,l,this.tieDirection===B.Down,this.scale):Fs.paintTie(i,this.scale,s,a,o,l,this.tieDirection===B.Down,this.getTieHeight(s,a,o,l),4))}shouldDrawBendSlur(){return!1}getTieHeight(e,t,i,n){return 22}getBeamDirection(e,t){return B.Down}getStartY(){return 0}getEndY(){return 0}getStartX(){return 0}getEndX(){return 0}static paintTie(e,t,i,n,r,s,o=!1,a=22,l=4){if(i===r&&n===s)return;if(r<i){let e=i;i=r,r=e,e=n,n=s,s=e}a*=t,l*=t;let c=s-n,h=r-i,u=Math.sqrt(c*c+h*h);o?c*=-1:h*=-1,c/=u,h/=u;let d=(r+i)/2,f=(s+n)/2,p=d+a*c,g=f+a*h,m=d+(a-l)*c,b=f+(a-l)*h;e.beginPath(),e.moveTo(i,n),e.quadraticCurveTo(p,g,r,s),e.quadraticCurveTo(m,b,i,n),e.closePath(),e.fill()}static drawBendSlur(e,t,i,n,r,s,o,a){let l=r-i,c=n-t,h=Math.sqrt(l*l+c*c);s?l*=-1:c*=-1,l/=h,c/=h;let u=(n+t)/2,d=(r+i)/2,f=Fs.BendSlurHeight*o;n-t<20&&(f/=2);let p=u+f*l,g=d+f*c;if(e.beginPath(),e.moveTo(t,i),e.lineTo(p,g),e.lineTo(n,r),e.stroke(),a){let t=e.measureText(a),i=s?0:-e.font.size;e.fillText(a,p-t/2,g+i)}}}Fs.BendSlurHeight=11;class Ws extends Nn{constructor(e){super(0,0),this._isOpen=e}doLayout(){super.doLayout(),this.width=Ws.Size*this.scale}paint(e,t,i){this._isOpen?Fs.paintTie(i,this.scale,e+this.x+this.width,t+this.y+this.height,e+this.x+this.width,t+this.y,!1,6,3):Fs.paintTie(i,this.scale,e+this.x,t+this.y,e+this.x,t+this.y+this.height,!1,6,3)}}Ws.Size=6;class Vs{constructor(e,t){this.line=0,this.line=e,this.isGhost=t}}class zs extends Nn{constructor(e){super(0,0),this._infos=[],this._glyphs=[],this.isEmpty=!0,this._isOpen=e}addParenthesis(e){let t=this.renderer,i=t.getNoteLine(e),r=e.isGhost||this.isTiedBend(e)&&t.settings.notation.isNotationElementVisible(n.ParenthesisOnTiedBends);this.addParenthesisOnLine(i,r)}addParenthesisOnLine(e,t){let i=new Vs(e,t);this._infos.push(i),t&&(this.isEmpty=!1)}isTiedBend(e){return!!e.isTieDestination&&(!!e.tieOrigin.hasBend||this.isTiedBend(e.tieOrigin))}doLayout(){let e=this.renderer;this._infos.sort(((e,t)=>e.line-t.line));let t=null,i=e.getScoreHeight(1);for(let n=0,r=this._infos.length;n<r;n++){let r;if(this._infos[n].isGhost)if(t){let r=e.getScoreY(this._infos[n].line)+i;t.height=r-t.y}else r=new Ws(this._isOpen),r.renderer=this.renderer,r.y=e.getScoreY(this._infos[n].line)-i,r.height=2*i,r.doLayout(),this._glyphs.push(r),t=r;else t=null}this.width=this._glyphs.length>0?this._glyphs[0].width:0}paint(e,t,i){super.paint(e,t,i);for(let n of this._glyphs)n.paint(e+this.x,t+this.y,i)}}class Hs{constructor(e,t){this.line=0,this.glyph=e,this.line=t}}class js extends Nn{constructor(){super(0,0),this._infos=[],this._noteHeadPadding=0,this.minNote=null,this.maxNote=null,this.spacingChanged=new yi,this.upLineX=0,this.downLineX=0,this.displacedX=0,this.noteStartX=0}add(e,t){let i=new Hs(e,t);this._infos.push(i),(!this.minNote||this.minNote.line>i.line)&&(this.minNote=i),(!this.maxNote||this.maxNote.line<i.line)&&(this.maxNote=i)}get hasTopOverflow(){return!!this.minNote&&this.minNote.line<=0}get hasBottomOverflow(){return!!this.maxNote&&this.maxNote.line>8}doLayout(){this._infos.sort(((e,t)=>t.line-e.line));let e=0,t=!1,i=0,n=!1,r=this.direction,s=0;for(let o=0,a=this._infos.length;o<a;o++){let a=this._infos[o].glyph;a.renderer=this.renderer,a.doLayout();let l=!1;0===o?e=a.width:Math.abs(i-this._infos[o].line)<=1?t?t=!1:(l=!0,a.x=e,n=!0,t=!0):t=!1,r===B.Down?a.x=l?0:e:a.x=l?e:0,a.x+=this.noteStartX,i=this._infos[o].line,s=Math.max(s,a.x+a.width)}n?(this._noteHeadPadding=0,this.upLineX=e,this.downLineX=e):(this._noteHeadPadding=r===B.Down?-e:0,s+=this._noteHeadPadding,this.upLineX=s,this.downLineX=0),this.displacedX=e,this.width=s}paint(e,t,i){e+=this.x,t+=this.y;let n=this.renderer,r=3*this.scale,s=this.width-this.noteStartX+2*r;if(this.hasTopOverflow){let o=i.color;i.color=n.resources.staffLineColor;let a=-2;for(;a>=this.minNote.line;){let o=t+n.getScoreY(a);i.fillRect(e-r+this.noteStartX,o,s,this.scale),a-=2}i.color=o}if(this.hasBottomOverflow){let o=i.color;i.color=n.resources.staffLineColor;let a=10;for(;a<=this.maxNote.line;){let o=t+n.getScoreY(a);i.fillRect(e-r+this.noteStartX,o,s,this.scale),a+=2}i.color=o}let o=this._infos,a=e+this._noteHeadPadding;for(let e of o)e.glyph.renderer=this.renderer,e.glyph.paint(a,t,i)}}class Us extends On{constructor(e,t,i){super(e,t,1,Us.getSymbol(i))}doLayout(){this.width=12*this.scale}static getSymbol(e){switch(e){case p.ThirtySecond:return C.Tremolo3;case p.Sixteenth:return C.Tremolo2;case p.Eighth:return C.Tremolo1;default:return C.None}}}class Gs extends js{constructor(){super(),this._noteGlyphLookup=new Map,this._notes=[],this._tremoloPicking=null,this.aboveBeatEffects=new Map,this.belowBeatEffects=new Map}get direction(){return this.beamingHelper.direction}getNoteX(e,t){if(this._noteGlyphLookup.has(e.id)){let i=this._noteGlyphLookup.get(e.id),n=this.x+i.x+this._noteHeadPadding;switch(t){case Q.Left:break;case Q.Center:n+=i.width/2;break;case Q.Right:n+=i.width}return n}return 0}getNoteY(e,t){if(this._noteGlyphLookup.has(e.id)){const i=this._noteGlyphLookup.get(e.id);let n=this.y+i.y;switch(t){case X.TopWithStem:n-=this.renderer.getStemSize(this.beamingHelper);break;case X.Top:n-=i.height/2;break;case X.Center:break;case X.Bottom:n+=i.height/2;break;case X.BottomWithStem:n+=this.renderer.getStemSize(this.beamingHelper)}return n}return 0}addNoteGlyph(e,t,i){super.add(e,i),this._noteGlyphLookup.set(t.id,e),this._notes.push(t)}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.registerBeatLineX("score",this.beat,e+this.x+this.upLineX,e+this.x+this.downLineX)}doLayout(){super.doLayout();let e=this.direction;for(const e of this.aboveBeatEffects.values())e.renderer=this.renderer,e.doLayout();for(const e of this.belowBeatEffects.values())e.renderer=this.renderer,e.doLayout();if(this.beat.isTremolo){let t=0,i=e===B.Up?this.minNote:this.maxNote,n=e===B.Up?this.displacedX:0,r=this.beat.tremoloSpeed;switch(r){case p.ThirtySecond:t=e===B.Up?-15:15;break;case p.Sixteenth:t=e===B.Up?-12:15;break;case p.Eighth:t=e===B.Up?-10:10;break;default:t=e===B.Up?-10:15}this._tremoloPicking=new Us(n,i.glyph.y+t*this.scale,r),this._tremoloPicking.renderer=this.renderer,this._tremoloPicking.doLayout()}}buildBoundingsLookup(e,t,i){for(let n of this._notes)if(this._noteGlyphLookup.has(n.id)){let r=this._noteGlyphLookup.get(n.id),s=new fn;s.note=n,s.noteHeadBounds=new lt,s.noteHeadBounds.x=t+this.x+this._noteHeadPadding+r.x,s.noteHeadBounds.y=i+this.y+r.y-r.height/2,s.noteHeadBounds.w=r.width,s.noteHeadBounds.h=r.height,e.addNote(s)}}paint(e,t,i){let n=this.renderer,r=0,s=0,o=1,a=-o;this.beamingHelper.direction===B.Up?(s=n.getScoreY(this.minNote.line),r=n.getScoreY(this.maxNote.line-2)):(s=n.getScoreY(this.maxNote.line-1),r=n.getScoreY(this.minNote.line+1),a*=-1,o*=-1);for(const n of this.aboveBeatEffects.values())r+=a*n.height,n.paint(e+this.x+2*this.scale,t+this.y+r,i);for(const n of this.belowBeatEffects.values())s+=o*n.height,n.paint(e+this.x+2*this.scale,t+this.y+s,i);super.paint(e,t,i),this._tremoloPicking&&this._tremoloPicking.paint(e,t,i)}}class Ks extends On{constructor(e,t,i){super(e,t,1,Ks.getSymbol(i)),this._duration=i}static getSymbol(e){switch(e){case p.QuadrupleWhole:return C.RestLonga;case p.DoubleWhole:return C.RestDoubleWhole;case p.Whole:return C.RestWhole;case p.Half:return C.RestHalf;case p.Quarter:return C.RestQuarter;case p.Eighth:return C.RestEighth;case p.Sixteenth:return C.RestSixteenth;case p.ThirtySecond:return C.RestThirtySecond;case p.SixtyFourth:return C.RestSixtyFourth;case p.OneHundredTwentyEighth:return C.RestOneHundredTwentyEighth;case p.TwoHundredFiftySixth:return C.RestTwoHundredFiftySixth;default:return C.None}}static getSize(e){switch(e){case p.QuadrupleWhole:case p.DoubleWhole:case p.Whole:case p.Half:case p.Quarter:case p.Eighth:case p.Sixteenth:return 9;case p.ThirtySecond:return 12;case p.SixtyFourth:return 14;case p.OneHundredTwentyEighth:case p.TwoHundredFiftySixth:return 20}return 10}doLayout(){this.width=Ks.getSize(this._duration)*this.scale}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.registerBeatLineX("score",this.beat,e+this.x+this.width/2,e+this.x+this.width/2)}}class $s{constructor(){this.x=0,this.y=-3e3,this.width=0}}class qs extends er{constructor(){super(0,0)}doLayout(){if(!this.glyphs||0===this.glyphs.length)return void(this.width=0);this.glyphs.sort(((e,t)=>e.y<t.y?-1:e.y>t.y?1:0));let e=[];e.push(new $s);let t=21*this.scale;for(let i=0,n=this.glyphs.length;i<n;i++){let n=this.glyphs[i];n.renderer=this.renderer,n.doLayout();let r=0;for(;e[r].y>n.y;)r++,r===e.length&&e.push(new $s);n.x=r,e[r].y=n.y+t,e[r].width<n.width&&(e[r].width=n.width)}this.width=0;for(const t of e)this.width+=t.width,t.x=this.width;for(let t=0,i=this.glyphs.length;t<i;t++){let i=this.glyphs[t];const n=e[i.x];i.x=this.width-n.x}}}class Zs extends js{constructor(e,t=!1){super(),this._showParenthesis=!1,this._noteValueLookup=new Map,this._accidentals=new qs,this._preNoteParenthesis=null,this._postNoteParenthesis=null,this.isEmpty=!0,this.noteHeadOffset=0,this._beat=e,this._showParenthesis=t,t&&(this._preNoteParenthesis=new zs(!0),this._postNoteParenthesis=new zs(!1))}get direction(){return B.Up}containsNoteValue(e){return this._noteValueLookup.has(e)}getNoteValueY(e){return this._noteValueLookup.has(e)?this.y+this._noteValueLookup.get(e).y:0}addGlyph(e,t=!1){let i=this.renderer,n=new Dn(0,0,p.Quarter,!0),r=i.accidentalHelper.applyAccidentalForValue(this._beat,e,t,!0),s=i.accidentalHelper.getNoteLineForValue(e,!1);if(n.y=i.getScoreY(s),this._showParenthesis&&(this._preNoteParenthesis.renderer=this.renderer,this._postNoteParenthesis.renderer=this.renderer,this._preNoteParenthesis.addParenthesisOnLine(s,!0),this._postNoteParenthesis.addParenthesisOnLine(s,!0)),r!==Y.None){let e=new Ts(0,n.y,r,!0);e.renderer=this.renderer,this._accidentals.addGlyph(e)}this._noteValueLookup.set(e,n),this.add(n,s),this.isEmpty=!1}doLayout(){let e=0;this._showParenthesis&&(this._preNoteParenthesis.x=e,this._preNoteParenthesis.renderer=this.renderer,this._preNoteParenthesis.doLayout(),e+=this._preNoteParenthesis.width+Zs.ElementPadding*this.scale),this._accidentals.isEmpty||(e+=this._accidentals.width+Zs.ElementPadding*this.scale,this._accidentals.x=e,this._accidentals.renderer=this.renderer,this._accidentals.doLayout(),e+=this._accidentals.width+Zs.ElementPadding*this.scale),this.noteStartX=e,super.doLayout(),this.noteHeadOffset=this.noteStartX+(this.width-this.noteStartX)/2,this._showParenthesis&&(this._postNoteParenthesis.x=this.width+Zs.ElementPadding*this.scale,this._postNoteParenthesis.renderer=this.renderer,this._postNoteParenthesis.doLayout(),this.width+=this._postNoteParenthesis.width+Zs.ElementPadding*this.scale)}paint(e,t,i){this._accidentals.isEmpty||this._accidentals.paint(e+this.x,t+this.y,i),this._showParenthesis&&(this._preNoteParenthesis.paint(e+this.x,t+this.y,i),this._postNoteParenthesis.paint(e+this.x,t+this.y,i)),super.paint(e,t,i)}}Zs.ElementPadding=2;class Ys extends Nn{constructor(){super(...arguments),this.BendNoteHeads=[]}drawBendSlur(e,t,i,n,r,s,o,a){Fs.drawBendSlur(e,t,i,n,r,s,o,a)}doLayout(){super.doLayout(),this.width=0;for(let e of this.BendNoteHeads)e.doLayout(),this.width+=e.width+10*this.scale}getTieDirection(e,t){switch(t.getBeatDirection(e)){case B.Up:return B.Down;default:return B.Up}}}Ys.EndPadding=8;class Xs extends Le{constructor(e=0,t=0){super(e,t),this.lineValue=0,this.lineValue=t}}class Qs extends Nn{constructor(){super(0,0),this._notes=[],this._renderPoints=new Map,this._preBendMinValue=-1,this._bendMiddleMinValue=-1,this._bendEndMinValue=-1,this._bendEndContinuedMinValue=-1,this._releaseMinValue=-1,this._releaseContinuedMinValue=-1,this._maxBendValue=-1}addBends(e){this._notes.push(e);let t=this.createRenderingPoints(e);this._renderPoints.set(e.id,t),(-1===this._maxBendValue||this._maxBendValue<e.maxBendPoint.value)&&(this._maxBendValue=e.maxBendPoint.value);let i=0;switch(e.bendType){case u.Bend:i=t[1].value,e.isTieOrigin?(-1===this._bendEndContinuedMinValue||i<this._bendEndContinuedMinValue)&&(this._bendEndContinuedMinValue=i):(-1===this._bendEndMinValue||i<this._bendEndMinValue)&&(this._bendEndMinValue=i);break;case u.Release:i=t[1].value,e.isTieOrigin?(-1===this._releaseContinuedMinValue||i<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=i):i>0&&(-1===this._releaseMinValue||i<this._releaseMinValue)&&(this._releaseMinValue=i);break;case u.BendRelease:i=t[1].value,(-1===this._bendMiddleMinValue||i<this._bendMiddleMinValue)&&(this._bendMiddleMinValue=i),i=t[2].value,e.isTieOrigin?(-1===this._releaseContinuedMinValue||i<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=i):i>0&&(-1===this._releaseMinValue||i<this._releaseMinValue)&&(this._releaseMinValue=i);break;case u.Prebend:i=t[0].value,(-1===this._preBendMinValue||i<this._preBendMinValue)&&(this._preBendMinValue=i);break;case u.PrebendBend:i=t[0].value,(-1===this._preBendMinValue||i<this._preBendMinValue)&&(this._preBendMinValue=i),i=t[1].value,e.isTieOrigin?(-1===this._bendEndContinuedMinValue||i<this._bendEndContinuedMinValue)&&(this._bendEndContinuedMinValue=i):(-1===this._bendEndMinValue||i<this._bendEndMinValue)&&(this._bendEndMinValue=i);break;case u.PrebendRelease:i=t[0].value,(-1===this._preBendMinValue||i<this._preBendMinValue)&&(this._preBendMinValue=i),i=t[1].value,e.isTieOrigin?(-1===this._releaseContinuedMinValue||i<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=i):i>0&&(-1===this._releaseMinValue||i<this._releaseMinValue)&&(this._releaseMinValue=i)}}doLayout(){super.doLayout();let e=this._maxBendValue*Qs.BendValueHeight*this.scale;this.renderer.registerOverflowTop(e);let t=0;for(let e of this._notes){let i=this._renderPoints.get(e.id);switch(e.bendType){case u.Bend:i[1].lineValue=e.isTieOrigin?this._bendEndContinuedMinValue:this._bendEndMinValue;break;case u.Release:t=e.isTieOrigin?this._releaseContinuedMinValue:this._releaseMinValue,t>=0&&(i[1].lineValue=t);break;case u.BendRelease:i[1].lineValue=this._bendMiddleMinValue,t=e.isTieOrigin?this._releaseContinuedMinValue:this._releaseMinValue,t>=0&&(i[2].lineValue=t);break;case u.Prebend:i[0].lineValue=this._preBendMinValue;break;case u.PrebendBend:i[0].lineValue=this._preBendMinValue,i[1].lineValue=e.isTieOrigin?this._bendEndContinuedMinValue:this._bendEndMinValue;break;case u.PrebendRelease:i[0].lineValue=this._preBendMinValue,t=e.isTieOrigin?this._releaseContinuedMinValue:this._releaseMinValue,t>=0&&(i[1].lineValue=t)}}this.width=0,this._notes.sort(((e,t)=>e.isStringed?e.string-t.string:e.realValue-t.realValue))}createRenderingPoints(e){let t=[];switch(e.bendType){case u.Custom:for(let i of e.bendPoints)t.push(new Xs(i.offset,i.value));break;case u.BendRelease:t.push(new Xs(0,e.bendPoints[0].value)),t.push(new Xs(Le.MaxPosition/2|0,e.bendPoints[1].value)),t.push(new Xs(Le.MaxPosition,e.bendPoints[3].value));break;case u.Bend:case u.Hold:case u.Prebend:case u.PrebendBend:case u.PrebendRelease:case u.Release:t.push(new Xs(0,e.bendPoints[0].value)),t.push(new Xs(Le.MaxPosition,e.bendPoints[1].value))}return t}paint(e,t,i){let n=i.color;this._notes.length>1&&(i.color=this.renderer.resources.secondaryGlyphColor);for(let r of this._notes){let s=this._renderPoints.get(r.id),o=this.renderer,a=r,l=!1,c=null,d=!1,f=r.bendStyle===h.Gradual?"grad.":"",p=null;for(;a.isTieOrigin;){let e=a.tieDestination;if(c=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,e.beat.voice.bar),!c||o.staff!==c.staff)break;if(a=e,l=!0,a.hasBend||!this.renderer.settings.notation.extendBendArrowsOnTiedNotes){d=!0;break}}p=a.beat,c=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,p.voice.bar),p.isLastOfVoice&&!a.hasBend&&this.renderer.settings.notation.extendBendArrowsOnTiedNotes&&(p=null);let g=0,m=0,b=t+o.y;g=e+o.x,s[0].value>0||r.isContinuedBend?g+=o.getBeatX(r.beat,Z.MiddleNotes):g+=o.getNoteX(r,Q.Right),m=!p||p.isLastOfVoice&&!d?e+c.x+c.postBeatGlyphsStart:d||!p.nextBeat?e+c.x+c.getBeatX(p,Z.MiddleNotes):r.bendType===u.Hold?e+c.x+c.getBeatX(p.nextBeat,Z.OnNotes):e+c.x+c.getBeatX(p.nextBeat,Z.PreNotes),l||(m-=Qs.ArrowSize*this.scale);let v=(m-g)/Le.MaxPosition;i.beginPath();for(let e=0,t=s.length-1;e<t;e++){let t=s[e],n=s[e+1];0!==e||0===t.value||r.isTieDestination||this.paintBend(r,new Xs(0,0),t,g,b,v,f,i),r.bendType!==u.Prebend?(0===e&&(g+=2*this.scale),this.paintBend(r,t,n,g,b,v,f,i)):r.isTieOrigin&&r.tieDestination.hasBend&&(n=new Xs(Le.MaxPosition,t.value),n.lineValue=t.lineValue,this.paintBend(r,t,n,g,b,v,f,i))}i.color=n}}paintBend(e,t,i,n,r,s,o,a){let l=this.renderer,c=this.renderer.resources,h=l.lineOffset/2,u=n+s*t.offset,d=Qs.BendValueHeight*this.scale,f=r-d*t.lineValue;0===t.value?i.offset===t.offset?f+=l.getNoteY(e.beat.maxStringNote,X.Top):f+=l.getNoteY(e,X.Center):f+=h;let p=n+s*i.offset,g=r-d*i.lineValue;0===i.lineValue?g+=l.getNoteY(e,X.Center):g+=h;let m=0,b=Qs.ArrowSize*this.scale;if(i.value>t.value?(g+b>f&&(g=f-b),a.beginPath(),a.moveTo(p,g),a.lineTo(p-.5*b,g+b),a.lineTo(p+.5*b,g+b),a.closePath(),a.fill(),m=b):i.value!==t.value&&(g<f&&(g=f+b),a.beginPath(),a.moveTo(p,g),a.lineTo(p-.5*b,g-b),a.lineTo(p+.5*b,g-b),a.closePath(),a.fill(),m=-b),a.stroke(),t.value===i.value){if(t.lineValue>0){let e=p,t=Qs.DashSize*this.scale,i=u+t;if((e-u)/(2*t)<1)a.moveTo(e,f),a.lineTo(u,f);else for(;e>i;)a.moveTo(e,f),a.lineTo(e-t,f),e-=2*t;a.stroke()}}else p>u?(a.moveTo(u,f),a.bezierCurveTo((u+p)/2,f,p,f,p,g+m),a.stroke()):(a.moveTo(u,f),a.lineTo(p,g),a.stroke());if(o&&t.offset<i.offset){a.font=c.graceFont;let e=a.measureText(o),t=0,i=0;if(f>g){let n=Math.abs(f-g);t=n>1.3*a.font.size?f-n/2:f,i=(u+p-e)/2}else t=f,i=p-e;a.fillText(o,i,t)}if(0!==i.value&&t.value!==i.value){let e=i.value,n=i.value>t.value;e=Math.abs(e);let s="";if(4===e)s="full",e-=4;else if(e>=4||e<=-4){let t=e/4|0;s+=t,e-=4*t}if(e>0&&(s+=Qs.getFractionSign(e)),""!==s){g=r-d*i.value;let e=g;n||(e=f+1*Math.abs(g-f)/3),a.font=c.tablatureFont;let t=a.measureText(s),o=e-.5*c.tablatureFont.size-2*this.scale,l=p-t/2;a.fillText(s,l,o)}}}static getFractionSign(e){switch(e){case 1:return"";case 2:return"";case 3:return"";default:return e+"/ 4"}}}Qs.ArrowSize=6,Qs.DashSize=3,Qs.BendValueHeight=6;class Js extends Nn{constructor(e){super(0,0),this._isSimpleDip=!1,this._beat=e,this._renderPoints=this.createRenderingPoints(e)}createRenderingPoints(e){if(e.whammyBarType===E.Custom)return e.whammyBarPoints;let t=[];switch(e.whammyBarType){case E.Dive:case E.Hold:case E.PrediveDive:case E.Predive:t.push(new Le(0,e.whammyBarPoints[0].value)),t.push(new Le(Le.MaxPosition,e.whammyBarPoints[1].value));break;case E.Dip:t.push(new Le(0,e.whammyBarPoints[0].value)),t.push(new Le(Le.MaxPosition/2|0,e.whammyBarPoints[1].value)),t.push(new Le(Le.MaxPosition,e.whammyBarPoints[e.whammyBarPoints.length-1].value))}return t}doLayout(){super.doLayout(),this._isSimpleDip=this.renderer.settings.notation.notationMode===e.NotationMode.SongBook&&this._beat.whammyBarType===E.Dip;let t=null,i=null,r=this._beat;for(;r&&r.hasWhammyBar;)(!t||t.value>r.minWhammyPoint.value)&&(t=r.minWhammyPoint),(!i||i.value<r.maxWhammyPoint.value)&&(i=r.maxWhammyPoint),r=r.nextBeat;let s=i.value>0?Math.abs(this.getOffset(i.value)):0;(s>0||0!==this._beat.whammyBarPoints[0].value||this.renderer.settings.notation.isNotationElementVisible(n.ZerosOnDiveWhammys))&&(s+=2*this.renderer.resources.tablatureFont.size);let o=t.value<0?Math.abs(this.getOffset(t.value)):0;this.renderer.registerOverflowTop(s+o),s>this.renderer.staff.getSharedLayoutData(Js.TopOffsetSharedDataKey,-1)&&this.renderer.staff.setSharedLayoutData(Js.TopOffsetSharedDataKey,s)}getOffset(e){if(0===e)return 0;let t=Js.PerHalfSize*this.scale+Math.log2(Math.abs(e)/2)*Js.PerHalfSize*this.scale;return e<0&&(t=-t),t}paint(t,i,n){let r=this.renderer,s=this._beat.nextBeat,o=null,a=Z.PreNotes;s&&(o=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,s.voice.bar),o&&o.staff===r.staff&&(o===r||s.hasWhammyBar)?a=!s.hasWhammyBar||r.settings.notation.notationMode===e.NotationMode.SongBook&&s.whammyBarType===E.Dip?Z.PreNotes:Z.MiddleNotes:(s=null,o=null));let l=0,c=0;this._isSimpleDip?(l=t+r.x+r.getBeatX(this._beat,Z.OnNotes)-2*this.scale,c=t+r.x+r.getBeatX(this._beat,Z.PostNotes)+2*this.scale):(l=t+r.x+r.getBeatX(this._beat,Z.MiddleNotes),c=o?t+o.x+o.getBeatX(s,a):t+r.x+r.width-2*this.scale);let u=n.textAlign;if(n.textAlign=x.Center,this._renderPoints.length>=2){let e=(c-l)/Le.MaxPosition;n.beginPath();let t=i+this.renderer.staff.getSharedLayoutData(Js.TopOffsetSharedDataKey,0),r=this._beat.whammyStyle===h.Gradual?"grad.":"";for(let i=0,s=this._renderPoints.length-1;i<s;i++){let o=this._renderPoints[i],a=this._renderPoints[i+1],c=i<s-2?this._renderPoints[i+2]:null,h=0===i;0!==i||0===o.value||this._beat.isContinuedWhammy||(this.paintWhammy(!1,new Le(0,0),o,a,l,t,e,n),h=!1),this.paintWhammy(h,o,a,c,l,t,e,n,r),r=""}n.stroke()}n.textAlign=u}paintWhammy(e,t,i,r,s,o,a,l,c){let h=s+a*t.offset,u=s+a*i.offset,d=o-this.getOffset(t.value),f=o-this.getOffset(i.value);if(t.offset===i.offset){let e=Js.DashSize*this.scale;if(Math.abs(f-d)/(2*e)<1)l.moveTo(h,d),l.lineTo(u,f);else{let t=Math.max(d,f),i=Math.min(d,f);for(;t>i;)l.moveTo(h,i),l.lineTo(h,i+e),i+=2*e}l.stroke()}else if(t.value===i.value){let e=Js.DashSize*this.scale;if(Math.abs(u-h)/(2*e)<1)l.moveTo(h,d),l.lineTo(u,f);else{let t=Math.max(h,u),i=Math.min(h,u);for(;t>i;)l.moveTo(t,d),l.lineTo(t-e,d),t-=2*e}l.stroke()}else l.moveTo(h,d),l.lineTo(u,f);let p=this.renderer.resources;if(e&&!this._beat.isContinuedWhammy&&!this._isSimpleDip){let e=d;e-=p.tablatureFont.size+2*this.scale,this.renderer.settings.notation.isNotationElementVisible(n.ZerosOnDiveWhammys)&&l.fillText("0",h,e),c&&(e-=p.tablatureFont.size+2*this.scale,l.fillText(c,h,e))}let g=Math.abs(i.value);if((0!==g||this.renderer.settings.notation.isNotationElementVisible(n.ZerosOnDiveWhammys)&&!this._isSimpleDip)&&t.value!==i.value){let e="";if(i.value<0&&(e+="-"),g>=4){let t=g/4|0;e+=t,g-=4*t}else 0===g&&(e+="0");g>0&&(e+=Qs.getFractionSign(g));let n=0;this._isSimpleDip?n=Math.min(d,f)-p.tablatureFont.size-2*this.scale:(n=t.offset===i.offset?Math.min(d,f):f,n-=p.tablatureFont.size+2*this.scale,r&&r.value>i.value&&(n-=2*this.scale));let s=u;l.fillText(e,s,n)}}}Js.TopOffsetSharedDataKey="tab.whammy.topoffset",Js.PerHalfSize=6,Js.DashSize=3;class eo extends Ys{constructor(e){super(0,0),this._beat=e}doLayout(){let t=this.renderer.settings.notation.notationMode;switch(this._beat.whammyBarType){case E.None:case E.Custom:case E.Hold:return;case E.Dive:case E.PrediveDive:{let e=new Zs(this._beat,!1);e.renderer=this.renderer;let t=this._beat.whammyBarPoints[this._beat.whammyBarPoints.length-1];for(let i of this._beat.notes)i.isTieOrigin||e.addGlyph(this.getBendNoteValue(i,t),t.value%2!=0);e.doLayout(),this.BendNoteHeads.push(e)}break;case E.Dip:if(t===e.NotationMode.SongBook){let e=this.renderer.resources;this.renderer.simpleWhammyOverflow=1.5*e.tablatureFont.size+eo.SimpleDipHeight*this.scale+eo.SimpleDipPadding*this.scale}else{let t=new Zs(this._beat,!1);if(t.renderer=this.renderer,this.renderer.settings.notation.notationMode===e.NotationMode.GuitarPro){let e=this._beat.whammyBarPoints[1];for(let i of this._beat.notes)t.addGlyph(this.getBendNoteValue(i,this._beat.whammyBarPoints[1]),e.value%2!=0)}t.doLayout(),this.BendNoteHeads.push(t);let i=new Zs(this._beat,!1);if(i.renderer=this.renderer,this.renderer.settings.notation.notationMode===e.NotationMode.GuitarPro){let e=this._beat.whammyBarPoints[this._beat.whammyBarPoints.length-1];for(let t of this._beat.notes)i.addGlyph(this.getBendNoteValue(t,e),e.value%2!=0)}i.doLayout(),this.BendNoteHeads.push(i)}break;case E.Predive:}super.doLayout()}paint(t,i,n){let r=this._beat;switch(r.whammyBarType){case E.None:case E.Custom:return}let s=this.renderer.settings.notation.notationMode,o=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,r.voice.bar),a=t+o.x+o.getBeatX(r,Z.MiddleNotes),l=this.getTieDirection(r,o),c=1===this._beat.notes.length?l:B.Up,u=n.textAlign;for(let u=0;u<r.notes.length;u++){let d=r.notes[u],f=i+o.y;u>0&&u>=(this._beat.notes.length/2|0)&&(c=B.Down),c===B.Down?f+=o.getNoteY(d,X.Bottom):f+=o.getNoteY(d,X.Top);let p=t+o.x;r.isLastOfVoice?p+=o.width:p+=o.getBeatX(r,Z.EndBeat),p-=8*this.scale;let g=r.whammyStyle===h.Gradual&&0===u?"grad.":"",m=null;d.isTieOrigin&&(m=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,d.tieDestination.beat.voice.bar),m&&m.staff===o.staff?p=t+m.x+m.getBeatX(d.tieDestination.beat,Z.MiddleNotes):m=null);let b=Dn.NoteHeadHeight*this.scale*Dn.GraceScale*.5;c===B.Up&&(b=-b);let v=r.whammyBarPoints.length>0?this.getBendNoteValue(d,r.whammyBarPoints[r.whammyBarPoints.length-1]):0,y=0,_=!1;switch(this.BendNoteHeads.length>0&&this.BendNoteHeads[0].containsNoteValue(v)?(y=this.BendNoteHeads[0].getNoteValueY(v)+b,_=!0):m&&(d.isTieOrigin&&d.tieDestination.beat.hasWhammyBar||d.beat.isContinuedWhammy)?(y=i+m.y+m.getNoteY(d.tieDestination,X.Top),_=!0,c===B.Down&&(y+=Dn.NoteHeadHeight*this.scale)):d.isTieOrigin&&(y=m?i+m.y+m.getNoteY(d.tieDestination,X.Top):f,c===B.Down&&(y+=Dn.NoteHeadHeight*this.scale)),r.whammyBarType){case E.Hold:d.isTieOrigin&&Fs.paintTie(n,this.scale,a,f,p,y,l===B.Down,22,4);break;case E.Dive:0===u&&(this.BendNoteHeads[0].x=p-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=i+o.y,this.BendNoteHeads[0].paint(0,0,n),this.BendNoteHeads[0].containsNoteValue(v)&&(y+=this.BendNoteHeads[0].y)),_?this.drawBendSlur(n,a,f,p,y,c===B.Down,this.scale,g):d.isTieOrigin&&Fs.paintTie(n,this.scale,a,f,p,y,l===B.Down,22,4);break;case E.Dip:if(s===e.NotationMode.SongBook){if(0===u){let e=t+o.x+o.getBeatX(this._beat,Z.OnNotes)-2*this.scale,r=t+o.x+o.getBeatX(this._beat,Z.PostNotes)+2*this.scale,s=(e+r)/2,a=((this._beat.whammyBarPoints[1].value-this._beat.whammyBarPoints[0].value)/4|0).toString();n.font=this.renderer.resources.tablatureFont,n.fillText(a,s,i+this.y);let l=i+this.y+n.font.size+2*this.scale,c=l+eo.SimpleDipHeight*this.scale;this._beat.whammyBarPoints[1].value>this._beat.whammyBarPoints[0].value?(n.moveTo(e,c),n.lineTo(s,l),n.lineTo(r,c)):(n.moveTo(e,l),n.lineTo(s,c),n.lineTo(r,l)),n.stroke()}d.isTieOrigin&&Fs.paintTie(n,this.scale,a,f,p,y,l===B.Down,22,4)}else{let e=(a+p)/2;this.BendNoteHeads[0].x=e-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=i+o.y,this.BendNoteHeads[0].paint(0,0,n);let t=this.getBendNoteValue(d,r.whammyBarPoints[1]),s=this.BendNoteHeads[0].getNoteValueY(t)+b;this.drawBendSlur(n,a,f,e,s,c===B.Down,this.scale,g),this.BendNoteHeads[1].x=p-this.BendNoteHeads[1].noteHeadOffset,this.BendNoteHeads[1].y=i+o.y,this.BendNoteHeads[1].paint(0,0,n),y=this.BendNoteHeads[1].getNoteValueY(v)+b,this.drawBendSlur(n,e,s,p,y,c===B.Down,this.scale,g)}break;case E.PrediveDive:case E.Predive:let h=t+o.x+o.getBeatX(d.beat,Z.PreNotes);h+=o.getPreNotesGlyphForBeat(d.beat).prebendNoteHeadOffset;let m=i+o.y+o.getScoreY(o.accidentalHelper.getNoteLineForValue(d.displayValue-(d.beat.whammyBarPoints[0].value/2|0),!1))+b;this.drawBendSlur(n,h,m,a,f,c===B.Down,this.scale,g),this.BendNoteHeads.length>0&&(this.BendNoteHeads[0].x=p-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=i+o.y,this.BendNoteHeads[0].paint(0,0,n),this.drawBendSlur(n,a,f,p,y,c===B.Down,this.scale,g))}}n.textAlign=u}getBendNoteValue(e,t){return e.displayValueWithoutBend+(t.value/2|0)}}eo.SimpleDipHeight=2*Js.PerHalfSize,eo.SimpleDipPadding=2;class to extends Nn{constructor(e,t,i){super(e,t),this.width=i}}class io extends On{constructor(e,t,i,n,r){super(e,t,r?Dn.GraceScale:1,i.getSymbol(n)),this._isGrace=r,this._articulation=i}paint(e,t,i){let n=this._isGrace?this.scale:0;i.fillMusicFontSymbol(e+this.x,t+this.y+n,this.glyphScale*this.scale,this.symbol,!1),this._articulation.techniqueSymbol!==C.None&&this._articulation.techniqueSymbolPlacement===k.Middle&&i.fillMusicFontSymbol(e+this.x,t+this.y+n,this.glyphScale*this.scale,this._articulation.techniqueSymbol,!1)}doLayout(){let e=(this._isGrace?Dn.GraceScale:1)*this.scale;switch(this.symbol){case C.NoteheadWhole:this.width=14;break;case C.NoteheadCircleX:case C.NoteheadDiamondWhite:this.width=9;break;case C.NoteheadHeavyXHat:case C.NoteheadHeavyX:this.width=13;break;default:this.width=10}this.width=this.width*(this._isGrace?Dn.GraceScale:1)*this.scale,this.height=Dn.NoteHeadHeight*e}}class no extends On{constructor(e,t){super(e,t,Dn.GraceScale,C.ArticStaccatoAbove)}doLayout(){this.width=Dn.QuarterNoteHeadWidth*this.scale,this.height=7*this.scale}paint(e,t,i){super.paint(e+3*this.scale,t+5*this.scale,i)}}class ro extends On{constructor(e,t){super(e,t,.5,C.PictEdgeOfCymbal)}doLayout(){this.width=22*this.scale,this.height=15*this.scale}paint(e,t,i){super.paint(e-3*this.scale,t+this.height,i)}}class so extends On{constructor(e,t){super(e,t,Dn.GraceScale,C.GuitarGolpe)}doLayout(){this.width=9*this.scale,this.height=10*this.scale}paint(e,t,i){super.paint(e,t+this.height,i)}}class oo extends vr{constructor(){super(...arguments),this._collisionOffset=-1e3,this._skipPaint=!1,this.noteHeads=null,this.restGlyph=null}getNoteX(e,t){return this.noteHeads?this.noteHeads.getNoteX(e,t):0}buildBoundingsLookup(e,t,i){this.noteHeads&&this.noteHeads.buildBoundingsLookup(e,t+this.x,i+this.y)}getNoteY(e,t){return this.noteHeads?this.noteHeads.getNoteY(e,t):0}updateBeamingHelper(){if(this.noteHeads)this.noteHeads.updateBeamingHelper(this.container.x+this.x);else if(this.restGlyph&&(this.restGlyph.updateBeamingHelper(this.container.x+this.x),this.renderer.bar.isMultiVoice&&-1e3===this._collisionOffset)){this._collisionOffset=this.renderer.helpers.collisionHelper.applyRestCollisionOffset(this.container.beat,this.restGlyph.y,this.renderer.getScoreHeight(1)),this.y+=this._collisionOffset;const e=this.renderer.helpers.collisionHelper.restDurationsByDisplayTime;e.has(this.container.beat.playbackStart)&&e.get(this.container.beat.playbackStart).has(this.container.beat.playbackDuration)&&e.get(this.container.beat.playbackStart).get(this.container.beat.playbackDuration)!==this.container.beat.id&&(this._skipPaint=!0)}}paint(e,t,i){this._skipPaint||super.paint(e,t,i)}doLayout(){let e=this.renderer;if(!this.container.beat.isEmpty)if(this.container.beat.isRest){let t=2*Math.ceil((this.renderer.bar.staff.standardNotationLineCount-1)/2);if(this.container.beat.duration===p.Whole&&1!==this.renderer.bar.staff.standardNotationLineCount&&3!==this.renderer.bar.staff.standardNotationLineCount&&(t-=2),this.restGlyph=new Ks(0,e.getScoreY(t),this.container.beat.duration),this.restGlyph.beat=this.container.beat,this.restGlyph.beamingHelper=this.beamingHelper,this.addGlyph(this.restGlyph),this.renderer.bar.isMultiVoice)if(0===this.container.beat.voice.index){const t=ar.computeLineHeightsForRest(this.container.beat.duration);let i=this.restGlyph.y-e.getScoreHeight(t[0]),n=this.restGlyph.y+e.getScoreHeight(t[1]);this.renderer.helpers.collisionHelper.reserveBeatSlot(this.container.beat,i,n)}else this.renderer.helpers.collisionHelper.registerRest(this.container.beat);if(this.beamingHelper&&this.beamingHelper.applyRest(this.container.beat,t),this.container.beat.dots>0){this.addGlyph(new to(0,0,5*this.scale));for(let e=0;e<this.container.beat.dots;e++){let e=new er(0,0);this.createBeatDot(t,e),this.addGlyph(e)}}}else{this.noteHeads=new Gs,this.noteHeads.beat=this.container.beat,this.noteHeads.beamingHelper=this.beamingHelper;let t=new zs(!1);t.renderer=this.renderer;for(let e of this.container.beat.notes)e.isVisible&&(this.createNoteGlyph(e),t.addParenthesis(e));if(this.addGlyph(this.noteHeads),t.isEmpty||(this.addGlyph(new to(0,0,4*(this.container.beat.graceType!==m.None?Dn.GraceScale:1)*this.scale)),this.addGlyph(t)),this.container.beat.hasWhammyBar){let e=new eo(this.container.beat);e.renderer=this.renderer,e.doLayout(),this.container.ties.push(e)}if(this.container.beat.dots>0){this.addGlyph(new to(0,0,5*this.scale));for(let t=0;t<this.container.beat.dots;t++){let t=new er(0,0);for(let i of this.container.beat.notes)this.createBeatDot(e.getNoteLine(i),t);this.addGlyph(t)}}}super.doLayout(),this.container.beat.isEmpty?this.centerX=this.width/2:this.container.beat.isRest?this.centerX=this.restGlyph.x+this.restGlyph.width/2:this.centerX=this.noteHeads.x+this.noteHeads.width/2}createBeatDot(e,t){let i=this.renderer;t.addGlyph(new Ps(0,i.getScoreY(e),1.5*this.scale))}createNoteHeadGlyph(e){let t=this.container.beat.graceType!==m.None;if(e.beat.voice.bar.staff.isPercussion){const i=Ie.getArticulation(e);if(i)return new io(0,0,i,e.beat.duration,t);Oe.warning("Rendering",`No articulation found for percussion instrument ${e.percussionArticulation}`)}return e.isDead?new Rs(0,0,t):e.beat.graceType===m.BendGrace?new Dn(0,0,p.Quarter,!0):e.harmonicType===b.Natural?new Bs(0,0,e.beat.duration,t):new Dn(0,0,e.beat.duration,t)}createNoteGlyph(e){if(e.beat.graceType===m.BendGrace&&!e.hasBend)return;let t=this.renderer,i=this.createNoteHeadGlyph(e),n=t.getNoteLine(e);if(i.y=t.getScoreY(n),this.noteHeads.addNoteGlyph(i,e,n),e.harmonicType!==b.None&&e.harmonicType!==b.Natural){let r=e.displayValue+e.harmonicPitch;i=new Bs(0,0,e.beat.duration,this.container.beat.graceType!==m.None),n=t.accidentalHelper.getNoteLineForValue(r,!1),i.y=t.getScoreY(n),this.noteHeads.addNoteGlyph(i,e,n)}if(e.isStaccato&&!this.noteHeads.aboveBeatEffects.has("Staccato")&&this.noteHeads.belowBeatEffects.set("Staccato",new no(0,0)),e.accentuated!==s.Normal||this.noteHeads.aboveBeatEffects.has("Accent")||this.noteHeads.belowBeatEffects.set("Accent",new As(0,0,s.Normal)),e.accentuated!==s.Heavy||this.noteHeads.aboveBeatEffects.has("HAccent")||this.noteHeads.belowBeatEffects.set("HAccent",new As(0,0,s.Heavy)),e.isPercussion){const t=Ie.getArticulation(e);if(t&&t.techniqueSymbolPlacement!==k.Middle){const e=t.techniqueSymbolPlacement===k.Top?this.noteHeads.aboveBeatEffects:this.noteHeads.belowBeatEffects;switch(t.techniqueSymbol){case C.PictEdgeOfCymbal:e.set("PictEdgeOfCymbal",new ro(0,0));break;case C.ArticStaccatoAbove:e.set("ArticStaccatoAbove",new no(0,0));break;case C.StringsUpBow:e.set("StringsUpBow",new qr(0,0,S.Up));break;case C.StringsDownBow:e.set("StringsDownBow",new qr(0,0,S.Down));break;case C.GuitarGolpe:e.set("GuitarGolpe",new so(0,0))}}}}}class ao extends Nn{constructor(e){super(0,0),this._beat=e}doLayout(){this.width=10*this.scale}paint(e,t,i){let n=this.renderer,r=n.lineOffset,s=t+this.y+(n.getNoteY(this._beat.maxNote,X.Bottom)-r),o=t+this.y+n.getNoteY(this._beat.minNote,X.Top)+r,a=e+this.x+this.width/2,l=8*this.scale;if(this._beat.brushType!==d.None){let t=new Qr(0,0,w.Slight,1.2,!0);t.renderer=this.renderer,t.doLayout();let n=-t.height/2;if(this._beat.brushType===d.ArpeggioUp){let r=s+l,c=o-l;t.width=Math.abs(c-r),i.beginRotate(e+this.x+5*this.scale,c,-90),t.paint(0,n,i),i.endRotate(),i.beginPath(),i.moveTo(a,o),i.lineTo(a+l/2,o-l),i.lineTo(a-l/2,o-l),i.closePath(),i.fill()}else if(this._beat.brushType===d.ArpeggioDown){let r=s+l,c=o;t.width=Math.abs(c-r),i.beginRotate(e+this.x+5*this.scale,r,90),t.paint(0,n,i),i.endRotate(),i.beginPath(),i.moveTo(a,s),i.lineTo(a+l/2,s+l),i.lineTo(a-l/2,s+l),i.closePath(),i.fill()}}}}class lo extends br{constructor(){super(),this._prebends=null,this.accidentals=null}get prebendNoteHeadOffset(){return this._prebends?this._prebends.x+this._prebends.noteHeadOffset:0}doLayout(){if(!this.container.beat.isRest){let e=new qs,t=new zs(!0);t.renderer=this.renderer,this._prebends=new Zs(this.container.beat,!0),this._prebends.renderer=this.renderer;for(let i of this.container.beat.notes)if(i.isVisible){if(i.hasBend)switch(i.bendType){case u.PrebendBend:case u.Prebend:case u.PrebendRelease:this._prebends.addGlyph(i.displayValue-(i.bendPoints[0].value/2|0),!1)}else if(i.beat.hasWhammyBar)switch(i.beat.whammyBarType){case E.PrediveDive:case E.Predive:this._prebends.addGlyph(i.displayValue-(i.beat.whammyBarPoints[0].value/2|0),!1)}this.createAccidentalGlyph(i,e),t.addParenthesis(i)}this._prebends.isEmpty||(this.addGlyph(this._prebends),this.addGlyph(new to(0,0,4*(this.container.beat.graceType!==m.None?Dn.GraceScale:1)*this.scale))),this.container.beat.brushType!==d.None&&(this.addGlyph(new ao(this.container.beat)),this.addGlyph(new to(0,0,4*this.scale))),t.isEmpty||(this.addGlyph(t),this.addGlyph(new to(0,0,4*(this.container.beat.graceType!==m.None?Dn.GraceScale:1)*this.scale))),e.isEmpty||(this.accidentals=e,this.addGlyph(new to(0,0,2*(this.container.beat.graceType!==m.None?Dn.GraceScale:1)*this.scale)),this.addGlyph(e),this.addGlyph(new to(0,0,2*(this.container.beat.graceType!==m.None?Dn.GraceScale:1)*this.scale)))}super.doLayout()}createAccidentalGlyph(e,t){let i=this.renderer,n=i.accidentalHelper.applyAccidental(e),r=i.getNoteLine(e),s=this.container.beat.graceType!==m.None;if(n!==Y.None){let e=new Ts(0,i.getScoreY(r),n,s);e.renderer=this.renderer,t.addGlyph(e)}if(e.harmonicType!==b.None&&e.harmonicType!==b.Natural){let o=e.displayValue+e.harmonicPitch;n=i.accidentalHelper.applyAccidentalForValue(e.beat,o,s,!1),r=i.accidentalHelper.getNoteLineForValue(o,!1);let a=new Ts(0,i.getScoreY(r),n,s);a.renderer=this.renderer,t.addGlyph(a)}}}class co extends On{constructor(e,t,i,n){super(e,t,n,co.getSymbol(i)),this._digit=0,this._scale=0,this._digit=i,this._scale=n}doLayout(){this.width=this.getDigitWidth(this._digit)*this.scale*this._scale}getDigitWidth(e){switch(e){case 0:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:return 14;case 1:return 10;default:return 0}}static getSymbol(e){switch(e){case 0:return C.TimeSig0;case 1:return C.TimeSig1;case 2:return C.TimeSig2;case 3:return C.TimeSig3;case 4:return C.TimeSig4;case 5:return C.TimeSig5;case 6:return C.TimeSig6;case 7:return C.TimeSig7;case 8:return C.TimeSig8;case 9:return C.TimeSig9;default:return C.None}}}class ho extends er{constructor(e,t,i,n=1){super(e,t),this._number=0,this._scale=0,this._number=i,this._scale=n}doLayout(){let e=this._number;for(;e>0;){let t=new co(0,0,e%10,this._scale);this.addGlyph(t),e=e/10|0}if(this.glyphs){this.glyphs.reverse();let e=0;for(let t=0,i=this.glyphs.length;t<i;t++){let i=this.glyphs[t];i.x=e,i.y=0,i.renderer=this.renderer,i.doLayout(),e+=i.width}this.width=e}}}ho.numberHeight=18;class uo extends er{constructor(e,t,i,n,r){super(e,t),this._numerator=0,this._denominator=0,this._numerator=i,this._denominator=n,this._isCommon=r}doLayout(){if(this._isCommon&&2===this._numerator&&2===this._denominator){let e=new On(0,0,this.commonScale,C.TimeSigCutCommon);e.width=14*this.scale,this.addGlyph(e),super.doLayout()}else if(this._isCommon&&4===this._numerator&&4===this._denominator){let e=new On(0,0,this.commonScale,C.TimeSigCommon);e.width=14*this.scale,this.addGlyph(e),super.doLayout()}else{const e=ho.numberHeight*this.scale;let t=new ho(0,-e/2,this._numerator,this.numberScale),i=new ho(0,e/2,this._denominator,this.numberScale);this.addGlyph(t),this.addGlyph(i),super.doLayout();for(let e=0,t=this.glyphs.length;e<t;e++){let t=this.glyphs[e];t.x=(this.width-t.width)/2}}}}class fo extends uo{get commonScale(){return 1}get numberScale(){return 1}}class po extends Ys{constructor(e){super(0,0),this._notes=[],this._endNoteGlyph=null,this._middleNoteGlyph=null,this._beat=e}addBends(e){if(this._notes.push(e),!e.isTieOrigin)switch(e.bendType){case u.Bend:case u.PrebendRelease:case u.PrebendBend:{let t=this._endNoteGlyph;t||(t=this._endNoteGlyph=new Zs(e.beat,!1),t.renderer=this.renderer,this.BendNoteHeads.push(t));let i=e.bendPoints[e.bendPoints.length-1];t.addGlyph(this.getBendNoteValue(e,i),i.value%2!=0)}break;case u.Release:if(!e.isTieOrigin){let t=this._endNoteGlyph;t||(t=this._endNoteGlyph=new Zs(e.beat,!1),t.renderer=this.renderer,this.BendNoteHeads.push(t));let i=e.bendPoints[e.bendPoints.length-1];t.addGlyph(this.getBendNoteValue(e,i),i.value%2!=0)}break;case u.BendRelease:{let t=this._middleNoteGlyph;t||(t=this._middleNoteGlyph=new Zs(e.beat,!1),t.renderer=this.renderer,this.BendNoteHeads.push(t));let i=e.bendPoints[1];t.addGlyph(this.getBendNoteValue(e,e.bendPoints[1]),i.value%2!=0);let n=this._endNoteGlyph;n||(n=this._endNoteGlyph=new Zs(e.beat,!1),n.renderer=this.renderer,this.BendNoteHeads.push(n));let r=e.bendPoints[e.bendPoints.length-1];n.addGlyph(this.getBendNoteValue(e,r),r.value%2!=0)}}}paint(e,t,i){let n=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this._beat.voice.bar),r=e+n.x+n.getBeatX(this._beat,Z.MiddleNotes),s=e+n.x;this._beat.isLastOfVoice?s+=n.postBeatGlyphsStart:s+=n.getBeatX(this._beat.nextBeat,Z.PreNotes),s-=8*this.scale;let o=(r+s)/2;this._middleNoteGlyph&&(this._middleNoteGlyph.x=o-this._middleNoteGlyph.noteHeadOffset,this._middleNoteGlyph.y=t+n.y,this._middleNoteGlyph.paint(0,0,i)),this._endNoteGlyph&&(this._endNoteGlyph.x=s-this._endNoteGlyph.noteHeadOffset,this._endNoteGlyph.y=t+n.y,this._endNoteGlyph.paint(0,0,i)),this._notes.sort(((e,t)=>t.displayValue-e.displayValue));let a=this._beat.graceType===m.BendGrace?this._beat.nextBeat:this._beat,l=1===this._notes.length?this.getTieDirection(a,n):B.Up;for(let a=0;a<this._notes.length;a++){let c=this._notes[a];a>0&&a>=(this._notes.length/2|0)&&(l=B.Down);let d=t+n.y+n.getNoteY(c,X.Top),f=Dn.NoteHeadHeight*this.scale*Dn.GraceScale*.5;l===B.Down&&(d+=Dn.NoteHeadHeight*this.scale);let p=c.bendStyle===h.Gradual?"grad.":"";if(c.isTieOrigin){let s=c.tieDestination,o=s?this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,s.beat.voice.bar):null;if(o&&o.staff===n.staff){let n=e+o.x+o.getBeatX(s.beat,Z.MiddleNotes),a=t+o.y+o.getNoteY(s,X.Top);l===B.Down&&(a+=Dn.NoteHeadHeight*this.scale),c.bendType===u.Hold||c.bendType===u.Prebend?Fs.paintTie(i,this.scale,r,d,n,a,l===B.Down,22,4):this.drawBendSlur(i,r,d,n,a,l===B.Down,this.scale,p)}else{let s=e+n.x+n.width,o=c.tieDestination.realValue;n.accidentalHelper.applyAccidentalForValue(c.beat,o,!1,!0);let a=t+n.y+n.getScoreY(n.accidentalHelper.getNoteLineForValue(o,!1));c.bendType===u.Hold||c.bendType===u.Prebend?Fs.paintTie(i,this.scale,r,d,s,a,l===B.Down,22,4):this.drawBendSlur(i,r,d,s,a,l===B.Down,this.scale,p)}switch(c.bendType){case u.Prebend:case u.PrebendBend:case u.PrebendRelease:let s=e+n.x+n.getBeatX(c.beat,Z.PreNotes);s+=n.getPreNotesGlyphForBeat(c.beat).prebendNoteHeadOffset;let o=t+n.y+n.getScoreY(n.accidentalHelper.getNoteLineForValue(c.displayValue-(c.bendPoints[0].value/2|0),!1))+f;this.drawBendSlur(i,s,o,r,d,l===B.Down,this.scale)}}else{l===B.Up&&(f=-f);let a=0,h=0;switch(c.bendType){case u.Bend:a=this.getBendNoteValue(c,c.bendPoints[c.bendPoints.length-1]),h=this._endNoteGlyph.getNoteValueY(a)+f,this.drawBendSlur(i,r,d,s,h,l===B.Down,this.scale,p);break;case u.BendRelease:let g=this.getBendNoteValue(c,c.bendPoints[1]),m=this._middleNoteGlyph.getNoteValueY(g)+f;this.drawBendSlur(i,r,d,o,m,l===B.Down,this.scale,p),a=this.getBendNoteValue(c,c.bendPoints[c.bendPoints.length-1]),h=this._endNoteGlyph.getNoteValueY(a)+f,this.drawBendSlur(i,o,m,s,h,l===B.Down,this.scale,p);break;case u.Release:this.BendNoteHeads.length>0&&(a=this.getBendNoteValue(c,c.bendPoints[c.bendPoints.length-1]),h=this.BendNoteHeads[0].getNoteValueY(a)+f,this.drawBendSlur(i,r,d,s,h,l===B.Down,this.scale,p));break;case u.Prebend:case u.PrebendBend:case u.PrebendRelease:let b=e+n.x+n.getBeatX(c.beat,Z.PreNotes);b+=n.getPreNotesGlyphForBeat(c.beat).prebendNoteHeadOffset;let v=t+n.y+n.getScoreY(n.accidentalHelper.getNoteLineForValue(c.displayValue-(c.bendPoints[0].value/2|0),!1))+f;this.drawBendSlur(i,b,v,r,d,l===B.Down,this.scale),this.BendNoteHeads.length>0&&(a=this.getBendNoteValue(c,c.bendPoints[c.bendPoints.length-1]),h=this.BendNoteHeads[0].getNoteValueY(a)+f,this.drawBendSlur(i,r,d,s,h,l===B.Down,this.scale,p))}}}}getBendNoteValue(e,t){return e.displayValueWithoutBend+(t.value/2|0)}}class go extends Fs{constructor(e,t,i=!1){super(e,t,i)}doLayout(){super.doLayout()}getBeamDirection(e,t){if(e.isRest)return B.Up;switch(t.getBeatDirection(e)){case B.Up:return B.Down;default:return B.Up}}getStartY(){if(this.startBeat.isRest)return this.startNoteRenderer.getScoreY(9);switch(this.tieDirection){case B.Up:return this.startNoteRenderer.getNoteY(this.startBeat.maxNote,X.Top);default:return this.startNoteRenderer.getNoteY(this.startBeat.minNote,X.Bottom)}}getEndY(){const e=this.endNoteRenderer;if(this.endBeat.isRest)switch(this.tieDirection){case B.Up:return e.getScoreY(9);default:return e.getScoreY(0)}const t=this.startNoteRenderer.getBeatDirection(this.startBeat),i=e.getBeatDirection(this.endBeat);if(t!==i&&this.startBeat.graceType===m.None)if(i===this.tieDirection)switch(this.tieDirection){case B.Up:return e.getNoteY(this.endBeat.maxNote,X.TopWithStem);default:return e.getNoteY(this.endBeat.minNote,X.BottomWithStem)}else switch(this.tieDirection){case B.Up:return e.getNoteY(this.endBeat.maxNote,X.BottomWithStem);default:return e.getNoteY(this.endBeat.minNote,X.TopWithStem)}switch(this.tieDirection){case B.Up:return e.getNoteY(this.endBeat.maxNote,X.Top);default:return e.getNoteY(this.endBeat.minNote,X.Bottom)}}getStartX(){return this.startNoteRenderer.getBeatX(this.startBeat,Z.MiddleNotes)}getEndX(){const e=this.endNoteRenderer.getBeatDirection(this.endBeat);return this.endNoteRenderer.getBeatX(this.endBeat,this.endBeat.duration>p.Whole&&e===this.tieDirection?Z.Stem:Z.MiddleNotes)}}class mo extends Nn{constructor(e,t,i,n){super(0,0),this._outType=t,this._inType=e,this._startNote=i,this._parent=n}doLayout(){this.width=0}paint(e,t,i){this.paintSlideIn(e,t,i),this.drawSlideOut(e,t,i)}paintSlideIn(e,t,i){let n=this.renderer,r=12*this.scale,s=e+n.x+n.getNoteX(this._startNote,Q.Left)-2*this.scale,o=t+n.y+n.getNoteY(this._startNote,X.Center),a=s-r,l=t+n.y;switch(this._inType){case y.IntoFromBelow:l+=n.getNoteY(this._startNote,X.Bottom);break;case y.IntoFromAbove:l+=n.getNoteY(this._startNote,X.Top);break;default:return}let c=this.getAccidentalsWidth(n,this._startNote.beat);a-=c,s-=c,this.paintSlideLine(i,!1,a,s,l,o)}getAccidentalsWidth(e,t){let i=e.getPreNotesGlyphForBeat(t);return i&&i.accidentals?i.accidentals.width:0}drawSlideOut(e,t,i){let n=this.renderer,r=12*this.scale,s=3*this.scale,o=1*this.scale,a=2*this.scale,l=0,c=0,h=0,u=0,d=!1;switch(this._outType){case _.Shift:case _.Legato:if(l=e+n.x+n.getBeatX(this._startNote.beat,Z.PostNotes)+s,c=t+n.y+n.getNoteY(this._startNote,X.Center),this._startNote.slideTarget){let i=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this._startNote.slideTarget.beat.voice.bar);i&&i.staff===n.staff?(h=e+i.x+i.getBeatX(this._startNote.slideTarget.beat,Z.PreNotes)-o,u=t+i.y+i.getNoteY(this._startNote.slideTarget,X.Center)):(h=e+n.x+this._parent.x,u=c),this._startNote.slideTarget.realValue>this._startNote.realValue?(c+=a,u-=a):(c-=a,u+=a)}else h=e+n.x+this._parent.x,u=c;break;case _.OutUp:l=e+n.x+n.getNoteX(this._startNote,Q.Right),c=t+n.y+n.getNoteY(this._startNote,X.Center),h=l+r,u=t+n.y+n.getNoteY(this._startNote,X.Top);break;case _.OutDown:l=e+n.x+n.getNoteX(this._startNote,Q.Right),c=t+n.y+n.getNoteY(this._startNote,X.Center),h=l+r,u=t+n.y+n.getNoteY(this._startNote,X.Bottom);break;case _.PickSlideUp:l=e+n.x+n.getNoteX(this._startNote,Q.Right)+s,c=t+n.y+n.getNoteY(this._startNote,X.Center),u=t+n.y+n.getNoteY(this._startNote,X.Top),h=e+n.x+n.width,this._startNote.beat.nextBeat&&this._startNote.beat.nextBeat.voice===this._startNote.beat.voice&&(h=e+n.x+n.getBeatX(this._startNote.beat.nextBeat,Z.PreNotes)),d=!0;break;case _.PickSlideDown:l=e+n.x+n.getNoteX(this._startNote,Q.Right)+s,c=t+n.y+n.getNoteY(this._startNote,X.Center),u=t+n.y+n.getNoteY(this._startNote,X.Bottom),h=e+n.x+n.width,this._startNote.beat.nextBeat&&this._startNote.beat.nextBeat.voice===this._startNote.beat.voice&&(h=e+n.x+n.getBeatX(this._startNote.beat.nextBeat,Z.PreNotes)),d=!0;break;default:return}this.paintSlideLine(i,d,l,h,c,u)}paintSlideLine(e,t,i,n,r,s){if(t){let t=new Qr(0,0,w.Slight,1.2);t.renderer=this.renderer,t.doLayout(),r-=t.height/2;let o=n-i,a=(s-=t.height/2)-r,l=Math.sqrt(Math.pow(a,2)+Math.pow(o,2));t.width=o;let c=Math.asin(a/l)*(180/Math.PI);e.beginRotate(i,r,c),t.paint(0,0,e),e.endRotate()}else e.beginPath(),e.moveTo(i,r),e.lineTo(n,s),e.stroke()}}class bo extends go{constructor(e,t,i=!1){super(e.beat,t.beat,i),this._startNote=e,this._endNote=t}getTieHeight(e,t,i,n){return Math.log2(i-e+1)*this.renderer.settings.notation.slurHeight}getStartY(){if(this.isStartCentered())switch(this.tieDirection){case B.Up:return this.startNoteRenderer.getNoteY(this._startNote,X.Top);default:return this.startNoteRenderer.getNoteY(this._startNote,X.Bottom)}return this.startNoteRenderer.getNoteY(this._startNote,X.Center)}getEndY(){if(!this.isEndCentered())return this.endNoteRenderer.getNoteY(this._endNote,X.Center);if(this.isEndOnStem())switch(this.tieDirection){case B.Up:return this.endNoteRenderer.getNoteY(this._endNote,X.TopWithStem);default:return this.endNoteRenderer.getNoteY(this._endNote,X.BottomWithStem)}else switch(this.tieDirection){case B.Up:return this.endNoteRenderer.getNoteY(this._endNote,X.Top);default:return this.endNoteRenderer.getNoteY(this._endNote,X.Bottom)}}isStartCentered(){return this._startNote===this._startNote.beat.maxNote&&this.tieDirection===B.Up||this._startNote===this._startNote.beat.minNote&&this.tieDirection===B.Down}isEndCentered(){return this._startNote.beat.graceType===m.None&&(this._endNote===this._endNote.beat.maxNote&&this.tieDirection===B.Up||this._endNote===this._endNote.beat.minNote&&this.tieDirection===B.Down)}isEndOnStem(){const e=this.endNoteRenderer;return this.startNoteRenderer.getBeatDirection(this.startBeat)!==e.getBeatDirection(this.endBeat)&&this.startBeat.graceType===m.None}getStartX(){return this.isStartCentered()?this.startNoteRenderer.getBeatX(this._startNote.beat,Z.MiddleNotes):this.startNoteRenderer.getNoteX(this._startNote,Q.Right)}getEndX(){return this.isEndCentered()?this.isEndOnStem()?this.endNoteRenderer.getBeatX(this._endNote.beat,Z.Stem):this.endNoteRenderer.getNoteX(this._endNote,Q.Center):this.endNoteRenderer.getBeatX(this._endNote.beat,Z.PreNotes)}}class vo extends Fs{constructor(e,t,i=!1){super(e?e.beat:null,t?t.beat:null,i),this.startNote=e,this.endNote=t}shouldDrawBendSlur(){return this.renderer.settings.notation.extendBendArrowsOnTiedNotes&&!!this.startNote.bendOrigin&&this.startNote.isTieOrigin}doLayout(){super.doLayout()}getBeamDirection(e,t){switch(t.getBeatDirection(e)){case B.Up:return B.Down;default:return B.Up}}getStartY(){if(this.startBeat.isRest)return this.startNoteRenderer.getScoreY(9);switch(this.tieDirection){case B.Up:return this.startNoteRenderer.getNoteY(this.startNote,X.Top);default:return this.startNoteRenderer.getNoteY(this.startNote,X.Bottom)}}getEndY(){const e=this.endNoteRenderer;if(this.endBeat.isRest)switch(this.tieDirection){case B.Up:return e.getScoreY(9);default:return e.getScoreY(0)}switch(this.tieDirection){case B.Up:return e.getNoteY(this.endNote,X.Top);default:return e.getNoteY(this.endNote,X.Bottom)}}getStartX(){return this.startNoteRenderer.getBeatX(this.startNote.beat,Z.PostNotes)}getEndX(){return this.endNoteRenderer.getBeatX(this.endNote.beat,Z.PreNotes)}}class yo extends An{constructor(e,t){super(e,t),this._bend=null,this._effectSlur=null,this._effectEndSlur=null}doLayout(){if(this._effectSlur=null,this._effectEndSlur=null,super.doLayout(),this.beat.isLegatoOrigin){if(!this.beat.previousBeat||!this.beat.previousBeat.isLegatoOrigin){let e=this.beat.nextBeat;for(;e.nextBeat&&e.nextBeat.isLegatoDestination;)e=e.nextBeat;this.ties.push(new go(this.beat,e,!1))}}else if(this.beat.isLegatoDestination&&!this.beat.isLegatoOrigin){let e=this.beat.previousBeat;for(;e.previousBeat&&e.previousBeat.isLegatoOrigin;)e=e.previousBeat;this.ties.push(new go(e,this.beat,!0))}this._bend&&(this._bend.renderer=this.renderer,this._bend.doLayout(),this.updateWidth())}createTies(e){if(e.isVisible){if(e.isTieOrigin&&!e.hasBend&&!e.beat.hasWhammyBar&&e.beat.graceType!==m.BendGrace&&e.tieDestination&&e.tieDestination.isVisible){let t=new vo(e,e.tieDestination,!1);this.ties.push(t)}if(e.isTieDestination&&!e.tieOrigin.hasBend&&!e.beat.hasWhammyBar){let t=new vo(e.tieOrigin,e,!0);this.ties.push(t)}if(e.slideInType!==y.None||e.slideOutType!==_.None){let t=new mo(e.slideInType,e.slideOutType,e,this);this.ties.push(t)}if(e.isSlurOrigin&&e.slurDestination&&e.slurDestination.isVisible){let t=new bo(e,e.slurDestination,!1);this.ties.push(t)}if(e.isSlurDestination){let t=new bo(e.slurOrigin,e,!0);this.ties.push(t)}if(!this._effectSlur&&e.isEffectSlurOrigin&&e.effectSlurDestination&&(this._effectSlur=new bo(e,e.effectSlurDestination,!1),this.ties.push(this._effectSlur)),!this._effectEndSlur&&e.beat.isEffectSlurDestination&&e.beat.effectSlurOrigin){let t=this.onNotes.beamingHelper.direction,i=t===B.Up?e.beat.effectSlurOrigin.minNote:e.beat.effectSlurOrigin.maxNote,n=t===B.Up?e.beat.minNote:e.beat.maxNote;this._effectEndSlur=new bo(i,n,!0),this.ties.push(this._effectEndSlur)}e.hasBend&&(this._bend||(this._bend=new po(e.beat),this._bend.renderer=this.renderer,this.ties.push(this._bend)),this._bend.addBends(e))}}}class _o extends dr{constructor(e,t){super(e,t),this.simpleWhammyOverflow=0,this._firstLineY=0,this._startSpacing=!1,this.accidentalHelper=new rr(this)}getBeatDirection(e){return this.helpers.getBeamingHelperForBeat(e).direction}get lineOffset(){return(dr.LineSpacing+1)*this.scale}updateSizes(){let e=this.resources,t=e.tablatureFont.size/2+.2*e.tablatureFont.size;this.topPadding=t*this.scale,this.bottomPadding=t*this.scale,this.height=4*this.lineOffset+this.topPadding+this.bottomPadding,this.updateFirstLineY(),super.updateSizes()}updateFirstLineY(){let e=4*this.lineOffset,t=(this.bar.staff.standardNotationLineCount-1)*this.lineOffset;this._firstLineY=(e-t)/2}doLayout(){if(this.updateFirstLineY(),super.doLayout(),!this.bar.isEmpty&&this.accidentalHelper.maxLineBeat){let e=this.getScoreY(-2),t=this.getScoreY(6),i=this.simpleWhammyOverflow;this.registerOverflowTop(i);let n=this.getScoreY(this.accidentalHelper.maxLine),r=this.helpers.getBeamingHelperForBeat(this.accidentalHelper.maxLineBeat);r.direction===B.Up&&(n-=this.getStemSize(r),n-=r.fingeringCount*this.resources.graceFont.size,r.hasTuplet&&(n-=2*this.resources.effectFont.size)),r.hasTuplet&&(n-=1.5*this.resources.effectFont.size),n<e&&this.registerOverflowTop(Math.abs(n)+i);let s=this.getScoreY(this.accidentalHelper.minLine),o=this.helpers.getBeamingHelperForBeat(this.accidentalHelper.minLineBeat);o.direction===B.Down&&(s+=this.getStemSize(o),s+=o.fingeringCount*this.resources.graceFont.size),s>t&&this.registerOverflowBottom(Math.abs(s)-t)}}paint(e,t,i){super.paint(e,t,i),this.paintBeams(e,t,i),this.paintTuplets(e,t,i)}paintTuplets(e,t,i){for(let n of this.bar.voices)if(this.hasVoiceContainer(n)){let r=this.getVoiceContainer(n);for(let n of r.tupletGroups)this.paintTupletHelper(e+this.beatGlyphsStart,t,i,n)}}paintBeams(e,t,i){for(let n=0,r=this.helpers.beamHelpers.length;n<r;n++){let r=this.helpers.beamHelpers[n];for(let n=0,s=r.length;n<s;n++){let s=r[n];this.paintBeamHelper(e+this.beatGlyphsStart,t,i,s)}}}paintBeamHelper(e,t,i,n){i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.isRestBeamHelper||(1===n.beats.length?this.paintFlag(e,t,i,n):this.paintBar(e,t,i,n))}paintTupletHelper(e,t,i,n){let r,s=this.resources,o=i.textAlign,a=i.textBaseline;i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,i.textAlign=x.Center,i.textBaseline=k.Middle;let l=n.beats[0].tupletNumerator,c=n.beats[0].tupletDenominator;r=2===l&&3===c?"2":3===l&&2===c?"3":4===l&&6===c?"4":5===l&&4===c?"5":6===l&&4===c?"6":7===l&&4===c?"7":9===l&&8===c?"9":10===l&&8===c?"10":11===l&&8===c?"11":12===l&&8===c?"12":13===l&&8===c?"13":l+":"+c;let h=10*this.scale,u=5*this.scale;if(1!==n.beats.length&&n.isFull){let o=n.beats[0],a=n.beats[n.beats.length-1],l=null,c=null;for(let e=0;e<n.beats.length;e++)if(!n.beats[e].isRest){l=n.beats[e];break}for(let e=n.beats.length-1;e>=0;e--)if(!n.beats[e].isRest){c=n.beats[e];break}let d=!1;l||(l=o,d=!0),c||(c=a);let f=this.helpers.beamHelperLookup[n.voice.index].get(o.index),p=this.helpers.beamHelperLookup[n.voice.index].get(a.index),g=f.getBeatLineX(o),m=p.getBeatLineX(a),b=this.helpers.beamHelperLookup[n.voice.index].get(l.index),v=this.helpers.beamHelperLookup[n.voice.index].get(c.index),y=f.direction,_=this.calculateBeamYWithDirection(b,g,y),w=this.calculateBeamYWithDirection(v,m,y);d&&(_=Math.max(_,w),w=_),i.font=s.effectFont;let S=i.measureText(r),C=3*this.scale,x=(g+m)/2,k=x-S/2-C,E=x+S/2+C,T=(w-_)/(m-g),L=_-T*g,N=T*k+L,M=T*x+L,O=T*E+L;y===B.Down&&(h*=-1,u*=-1),i.beginPath(),i.moveTo(e+this.x+g,t+this.y+_-h|0),i.lineTo(e+this.x+g,t+this.y+_-h-u|0),i.lineTo(e+this.x+k,t+this.y+N-h-u|0),i.stroke(),i.beginPath(),i.moveTo(e+this.x+E,t+this.y+O-h-u|0),i.lineTo(e+this.x+m,t+this.y+w-h-u|0),i.lineTo(e+this.x+m,t+this.y+w-h|0),i.stroke(),i.fillText(r,e+this.x+x,t+this.y+M-h-u)}else for(let o=0,a=n.beats.length;o<a;o++){let a=n.beats[o],l=this.helpers.beamHelperLookup[n.voice.index].get(a.index);if(!l)continue;let c=l.direction,d=l.getBeatLineX(a),f=this.calculateBeamYWithDirection(l,d,c);c===B.Down&&(h*=-1,u*=-1),i.font=s.effectFont,i.fillText(r,e+this.x+d,t+this.y+f-h-u)}i.textAlign=o,i.textBaseline=a}getStemSize(e){let t=1===e.beats.length?this.getFlagStemSize(e.shortestDuration):this.getBarStemSize(e.shortestDuration);return e.isGrace&&(t*=Dn.GraceScale),t}getBarStemSize(e){let t=0;switch(e){case p.QuadrupleWhole:case p.Half:case p.Quarter:case p.Eighth:case p.Sixteenth:t=6;break;case p.ThirtySecond:t=8;break;case p.SixtyFourth:case p.OneHundredTwentyEighth:t=9;break;case p.TwoHundredFiftySixth:t=10;break;default:t=0}return this.getScoreHeight(t)}getFlagStemSize(e){let t=0;switch(e){case p.QuadrupleWhole:case p.Half:case p.Quarter:case p.Eighth:case p.Sixteenth:case p.ThirtySecond:case p.SixtyFourth:case p.OneHundredTwentyEighth:case p.TwoHundredFiftySixth:t=6;break;default:t=0}return this.getScoreHeight(t)}get middleYPosition(){return this.getScoreY(this.bar.staff.standardNotationLineCount-1)}getNoteY(e,t){let i=super.getNoteY(e,t);if(isNaN(i)){const t=rr.computeLineWithoutAccidentals(this.bar,e);i=this.getScoreY(t)}return i}calculateBeamY(e,t){return this.calculateBeamYWithDirection(e,t,e.direction)}applyLayoutingInfo(){const e=super.applyLayoutingInfo();if(e&&this.bar.isMultiVoice){let e=this.getScoreY(-2),t=this.getScoreY(6),i=this.helpers.collisionHelper.getBeatMinMaxY();i[0]<e&&this.registerOverflowTop(Math.abs(i[0])),i[1]>t&&this.registerOverflowBottom(Math.abs(i[1])-t)}return e}calculateBeamYWithDirection(e,t,i){let n=this.getStemSize(e);if(!e.drawingInfos.has(i)){let t=new or;e.drawingInfos.set(i,t);const r=e.beats[0],s=e.beats[e.beats.length-1];let o=e.isRestBeamHelper;t.startBeat=r,t.startX=e.getBeatLineX(r),t.startY=o?i===B.Up?this.getScoreY(e.minRestLine):this.getScoreY(e.maxRestLine):i===B.Up?this.getScoreY(this.accidentalHelper.getMinLine(r))-n:this.getScoreY(this.accidentalHelper.getMaxLine(r))+n,t.endBeat=s,t.endX=e.getBeatLineX(s),t.endY=o?i===B.Up?this.getScoreY(e.minRestLine):this.getScoreY(e.maxRestLine):i===B.Up?this.getScoreY(this.accidentalHelper.getMinLine(s))-n:this.getScoreY(this.accidentalHelper.getMaxLine(s))+n;let a=10*this.scale;if(i===B.Down&&t.startY>t.endY&&t.startY-t.endY>a&&(t.endY=t.startY-a),i===B.Down&&t.endY>t.startY&&t.endY-t.startY>a&&(t.startY=t.endY-a),i===B.Up&&t.startY<t.endY&&t.endY-t.startY>a&&(t.endY=t.startY+a),i===B.Up&&t.endY<t.startY&&t.startY-t.endY>a&&(t.startY=t.endY+a),e.beats.length>1){if(i===B.Up){let i=this.getScoreY(this.accidentalHelper.getMinLine(e.beatOfHighestNote))-n;const r=t.calcY(e.getBeatLineX(e.beatOfHighestNote))-i;r>0&&(t.startY-=r,t.endY-=r)}else{const i=this.getScoreY(this.accidentalHelper.getMaxLine(e.beatOfLowestNote))+n-t.calcY(e.getBeatLineX(e.beatOfLowestNote));i>0&&(t.startY+=i,t.endY+=i)}if(null!==e.minRestLine||null!==e.maxRestLine){const n=ge.getIndex(e.shortestDuration)-2;let r=e.isGrace?Dn.GraceScale:1,s=n*(dr.BeamSpacing+dr.BeamThickness)*this.scale*r;if(s+=dr.BeamSpacing,i===B.Up&&null!==e.minRestLine){let i=this.getScoreY(e.minRestLine)-s;const n=t.calcY(e.getBeatLineX(e.beatOfMinRestLine))-i;n>0&&(t.startY-=n,t.endY-=n)}else if(i===B.Down&&null!==e.maxRestLine){const i=this.getScoreY(e.maxRestLine)+s-t.calcY(e.getBeatLineX(e.beatOfMaxRestLine));i>0&&(t.startY+=i,t.endY+=i)}}}}return e.drawingInfos.get(i).calcY(t)}paintBar(e,t,i,n){for(let r=0,s=n.beats.length;r<s;r++){let s=n.beats[r],o=s.graceType!==m.None?Dn.GraceScale:1,a=n.getBeatLineX(s),l=n.direction,c=t+this.y;c+=l===B.Up?this.getScoreY(this.accidentalHelper.getMaxLine(s)):this.getScoreY(this.accidentalHelper.getMinLine(s));let h=t+this.y;h+=this.calculateBeamY(n,a),i.lineWidth=_o.StemWidth*this.scale,i.beginPath(),i.moveTo(e+this.x+a,c),i.lineTo(e+this.x+a,h),i.stroke(),i.lineWidth=this.scale;let u=h;l===B.Down?u+=2*i.font.size:0!==r&&(u-=1.5*i.font.size),this.paintFingering(i,s,e+this.x+a,l,u);let d=6*this.scale*o,f=(dr.BeamSpacing+dr.BeamThickness)*this.scale*o,p=dr.BeamThickness*this.scale*o,g=ge.getIndex(s.duration)-2,b=t+this.y;l===B.Down&&(f=-f,p=-p);for(let t=0;t<g;t++){let o=0,l=0,c=0,h=0,u=b+t*f;if(r<n.beats.length-1){if(ar.isFullBarJoin(s,n.beats[r+1],t))o=a,l=n.getBeatLineX(n.beats[r+1]);else{if(0!==r&&ar.isFullBarJoin(n.beats[r-1],s,t))continue;o=a,l=o+d}c=u+this.calculateBeamY(n,o),h=u+this.calculateBeamY(n,l),_o.paintSingleBar(i,e+this.x+o,c,e+this.x+l,h,p)}else r>0&&!ar.isFullBarJoin(s,n.beats[r-1],t)&&(o=a-d,l=a,c=u+this.calculateBeamY(n,o),h=u+this.calculateBeamY(n,l),_o.paintSingleBar(i,e+this.x+o,c,e+this.x+l,h,p))}}}static paintSingleBar(e,t,i,n,r,s){e.beginPath(),e.moveTo(t,i),e.lineTo(n,r),e.lineTo(n,r+s),e.lineTo(t,i+s),e.closePath(),e.fill()}paintFlag(t,i,n,r){let s=r.beats[0];if(s.graceType===m.BendGrace||s.graceType!==m.None&&this.settings.notation.notationMode===e.NotationMode.SongBook)return;let o=s.graceType!==m.None,a=o?Dn.GraceScale:1,l=this.getFlagStemSize(r.shortestDuration),c=r.getBeatLineX(s),h=r.direction,u=this.getScoreY(this.accidentalHelper.getMinLine(s)),d=this.getScoreY(this.accidentalHelper.getMaxLine(s)),f=0,p=0;if(h===B.Down?(d+=l*a,f=d,p=i+this.y+d):(u-=l*a,f=u,p=i+this.y+u),this.paintFingering(n,s,t+this.x+c,h,p),r.hasLine){if(n.lineWidth=dr.StemWidth*this.scale,n.beginPath(),n.moveTo(t+this.x+c,i+this.y+u),n.lineTo(t+this.x+c,i+this.y+d),n.stroke(),n.lineWidth=this.scale,s.graceType===m.BeforeBeat){let e=15*this.scale,r=12*this.scale;n.beginPath(),h===B.Down?(n.moveTo(t+this.x+c-r/2,i+this.y+d-e),n.lineTo(t+this.x+c+r/2,i+this.y+d)):(n.moveTo(t+this.x+c-r/2,i+this.y+u+e),n.lineTo(t+this.x+c+r/2,i+this.y+u)),n.stroke()}if(r.hasFlag){let e=new In(c-this.scale/2,f,s.duration,h,o);e.renderer=this,e.doLayout(),e.paint(t+this.x,i+this.y,n)}}}paintFingering(t,n,r,s,o){let a=this.settings;if(a.notation.fingeringMode!==e.FingeringMode.ScoreDefault&&a.notation.fingeringMode!==e.FingeringMode.ScoreForcePiano)return;s===B.Up?r-=10*this.scale:r+=3*this.scale;let l=n.notes.slice(0);l.sort(((e,t)=>e.realValue-t.realValue));for(let e=0;e<l.length;e++){let s=l[e],c=null;s.leftHandFinger!==i.Unknown?c=ge.fingerToString(a,n,s.leftHandFinger,!0):s.rightHandFinger!==i.Unknown&&(c=ge.fingerToString(a,n,s.rightHandFinger,!1)),c&&(t.fillText(c,r,o),o-=0|t.font.size)}}createPreBeatGlyphs(){if(super.createPreBeatGlyphs(),this.bar.masterBar.isRepeatStart&&this.addPreBeatGlyph(new Is(0,0,1.5,3)),this.isFirstOfLine||this.bar.clef!==this.bar.previousBar.clef||this.bar.clefOttava!==this.bar.previousBar.clefOttava){let e=0;switch(this.bar.clef){case a.Neutral:e=this.bar.staff.standardNotationLineCount-1;break;case a.F4:e=2;break;case a.C3:e=4;break;case a.C4:e=2;break;case a.G2:e=6}this.createStartSpacing(),this.addPreBeatGlyph(new Ms(0,this.getScoreY(e)+.5*dr.StaffLineThickness,this.bar.clef,this.bar.clefOttava))}(0===this.index&&0!==this.bar.masterBar.keySignature||this.bar.previousBar&&this.bar.masterBar.keySignature!==this.bar.previousBar.masterBar.keySignature)&&(this.createStartSpacing(),this.createKeySignatureGlyphs()),(!this.bar.previousBar||this.bar.previousBar&&this.bar.masterBar.timeSignatureNumerator!==this.bar.previousBar.masterBar.timeSignatureNumerator||this.bar.previousBar&&this.bar.masterBar.timeSignatureDenominator!==this.bar.previousBar.masterBar.timeSignatureDenominator)&&(this.createStartSpacing(),this.createTimeSignatureGlyphs()),this.addPreBeatGlyph(new Ls(0,this.getScoreHeight(-.5),this.bar.index+1))}createBeatGlyphs(){for(let e=0;e<this.bar.voices.length;e++){let t=this.bar.voices[e];this.hasVoiceContainer(t)&&this.createVoiceGlyphs(t)}}createPostBeatGlyphs(){super.createPostBeatGlyphs(),this.bar.masterBar.isRepeatEnd?(this.addPostBeatGlyph(new Os(this.x,0)),this.bar.masterBar.repeatCount>2&&this.addPostBeatGlyph(new Ds(0,this.getScoreHeight(-.5),this.bar.masterBar.repeatCount))):this.addPostBeatGlyph(new Ns(0,0))}createStartSpacing(){this._startSpacing||(this.addPreBeatGlyph(new to(0,0,2*this.scale)),this._startSpacing=!0)}createKeySignatureGlyphs(){let e=0,t=this.bar.masterBar.keySignature,i=this.bar.previousBar?this.bar.previousBar.masterBar.keySignature:0;switch(this.bar.clef){case a.Neutral:e=0;break;case a.G2:e=1;break;case a.F4:e=2;break;case a.C3:e=-1;break;case a.C4:e=1}let n=new Map,r=[];if(ge.keySignatureIsSharp(t))for(let i=0;i<Math.abs(t);i++){let t=_o.SharpKsSteps[i]+e;r.push(new Ts(0,this.getScoreY(t),Y.Sharp,!1)),n.set(t,!0)}else for(let i=0;i<Math.abs(t);i++){let t=_o.FlatKsSteps[i]+e;r.push(new Ts(0,this.getScoreY(t),Y.Flat,!1)),n.set(t,!0)}let s=Math.abs(i),o=ge.keySignatureIsSharp(i)?_o.SharpKsSteps:_o.FlatKsSteps;for(let t=0;t<s;t++){let i=o[t]+e;n.has(i)||this.addPreBeatGlyph(new Ts(0,this.getScoreY(o[t]+e),Y.Natural,!1))}for(let e of r)this.addPreBeatGlyph(e)}createTimeSignatureGlyphs(){this.addPreBeatGlyph(new to(0,0,5*this.scale));const e=this.bar.staff.standardNotationLineCount-1;this.addPreBeatGlyph(new fo(0,this.getScoreY(e),this.bar.masterBar.timeSignatureNumerator,this.bar.masterBar.timeSignatureDenominator,this.bar.masterBar.timeSignatureCommon))}createVoiceGlyphs(e){for(let t=0,i=e.beats.length;t<i;t++){let i=e.beats[t],n=new yo(i,this.getVoiceContainer(e));n.preNotes=new lo,n.onNotes=new oo,this.addBeatGlyph(n)}}getNoteLine(e){return this.accidentalHelper.getNoteLine(e)}getScoreY(e){return this._firstLineY+this.lineOffset+this.getScoreHeight(e)}getScoreHeight(e){return this.lineOffset/2*e}paintBackground(e,t,i){super.paintBackground(e,t,i);let n=this.resources;i.color=n.staffLineColor;for(let n=0;n<this.bar.staff.standardNotationLineCount;n++){const r=t+this.y+this.getScoreY(2*n);i.fillRect(e+this.x,0|r,this.width,this.scale*dr.StaffLineThickness)}i.color=n.mainGlyphColor,this.paintSimileMark(e,t,i)}completeBeamingHelper(e){if(this.bar.isMultiVoice&&e.highestNoteInHelper&&e.lowestNoteInHelper){let t=this.getNoteY(e.highestNoteInHelper,X.Center),i=this.getNoteY(e.lowestNoteInHelper,X.Center),n=this.getStemSize(e);e.hasTuplet&&(n+=2*this.resources.effectFont.size),e.direction==B.Up?t-=n:i+=n;for(const n of e.beats)this.helpers.collisionHelper.reserveBeatSlot(n,t,i)}}}_o.StaffId="score",_o.SharpKsSteps=[-1,2,-2,1,4,0,3],_o.FlatKsSteps=[3,0,4,1,5,2,6];class wo extends Jn{get staffId(){return _o.StaffId}create(e,t){return new _o(e,t)}constructor(){super()}}class So extends Nn{constructor(e,t,i,n){super(0,0),this._inType=e,this._outType=t,this._startNote=i,this._parent=n}doLayout(){this.width=0}paint(e,t,i){this.paintSlideIn(e,t,i),this.paintSlideOut(e,t,i)}paintSlideIn(e,t,i){let n=this.renderer,r=12*this.scale,s=3*this.scale,o=0,a=0,l=0,c=0;switch(this._inType){case y.IntoFromBelow:l=e+n.x+n.getNoteX(this._startNote,Q.Left),c=t+n.y+n.getNoteY(this._startNote,X.Center),o=l-r,a=t+n.y+n.getNoteY(this._startNote,X.Center)+s;break;case y.IntoFromAbove:l=e+n.x+n.getNoteX(this._startNote,Q.Left),c=t+n.y+n.getNoteY(this._startNote,X.Center),o=l-r,a=t+n.y+n.getNoteY(this._startNote,X.Center)-s;break;default:return}this.paintSlideLine(i,!1,o,l,a,c)}paintSlideOut(e,t,i){let n=this.renderer,r=12*this.scale,s=3*this.scale,o=0,a=0,l=0,c=0,h=!1;const u=2*this.scale;switch(this._outType){case _.Shift:case _.Legato:if(o=e+n.x+n.getBeatX(this._startNote.beat,Z.PostNotes),a=t+n.y+n.getNoteY(this._startNote,X.Center),this._startNote.slideTarget){let i=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this._startNote.slideTarget.beat.voice.bar);i&&i.staff===n.staff?(l=e+i.x+i.getBeatX(this._startNote.slideTarget.beat,Z.OnNotes)-u,c=t+i.y+i.getNoteY(this._startNote.slideTarget,X.Center)):(l=e+n.x+this._parent.x,c=a),this._startNote.slideTarget.fret>this._startNote.fret?(a+=s,c-=s):(a-=s,c+=s)}else l=e+n.x+this._parent.x,c=a;break;case _.OutUp:o=e+n.x+n.getNoteX(this._startNote,Q.Right),a=t+n.y+n.getNoteY(this._startNote,X.Center),l=o+r-u,c=t+n.y+n.getNoteY(this._startNote,X.Center)-s;break;case _.OutDown:o=e+n.x+n.getNoteX(this._startNote,Q.Right),a=t+n.y+n.getNoteY(this._startNote,X.Center),l=o+r-u,c=t+n.y+n.getNoteY(this._startNote,X.Center)+s;break;case _.PickSlideDown:o=e+n.x+n.getNoteX(this._startNote,Q.Right),a=t+n.y+n.getNoteY(this._startNote,X.Center),l=e+n.x+n.getBeatX(this._startNote.beat,Z.EndBeat),c=a+3*s,h=!0;break;case _.PickSlideUp:o=e+n.x+n.getNoteX(this._startNote,Q.Right),a=t+n.y+n.getNoteY(this._startNote,X.Center),l=e+n.x+n.getBeatX(this._startNote.beat,Z.EndBeat),c=a-3*s,h=!0;break;default:return}this.paintSlideLine(i,h,o,l,a,c)}paintSlideLine(e,t,i,n,r,s){if(t){let t=new Qr(0,0,w.Slight,1.2);t.renderer=this.renderer,t.doLayout(),r-=t.height/2;let o=n-i,a=(s-=t.height/2)-r,l=Math.sqrt(Math.pow(a,2)+Math.pow(o,2));t.width=o;let c=Math.asin(a/l)*(180/Math.PI);e.beginRotate(i,r,c),t.paint(0,0,e),e.endRotate()}else e.beginPath(),e.moveTo(i,r),e.lineTo(n,s),e.stroke()}}class Co extends Fs{constructor(e,t,i=!1){super(e.beat,t.beat,i),this.startNote=e,this.endNote=t}getTieHeight(e,t,i,n){return this.startNote===this.endNote?15:super.getTieHeight(e,t,i,n)}getBeamDirection(e,t){return this.startNote===this.endNote?B.Up:Co.getBeamDirectionForNote(this.startNote)}static getBeamDirectionForNote(e){return e.string>3?B.Up:B.Down}getStartY(){return this.startNote===this.endNote?this.startNoteRenderer.getNoteY(this.startNote,X.Center):this.tieDirection===B.Up?this.startNoteRenderer.getNoteY(this.startNote,X.Top):this.startNoteRenderer.getNoteY(this.startNote,X.Bottom)}getEndY(){return this.getStartY()}getStartX(){return this.startNote===this.endNote?this.getEndX()-20*this.scale:this.startNoteRenderer.getNoteX(this.startNote,Q.Center)}getEndX(){return this.startNote===this.endNote?this.endNoteRenderer.getNoteX(this.endNote,Q.Left):this.endNoteRenderer.getNoteX(this.endNote,Q.Center)}}class xo extends Co{constructor(e,t,i,n=!1){super(e,t,n),this._direction=Co.getBeamDirectionForNote(e),this._forSlide=i}getTieHeight(e,t,i,n){return Math.log(i-e+1)*this.renderer.settings.notation.slurHeight}tryExpand(e,t,i,n){if(this._forSlide!==i)return!1;if(this.forEnd!==n)return!1;if(this.startNote.beat.id!==e.beat.id)return!1;if(this.endNote.beat.id!==t.beat.id)return!1;if(this._direction!==Co.getBeamDirectionForNote(e))return!1;switch(this._direction){case B.Up:e.realValue>this.startNote.realValue&&(this.startNote=e,this.startBeat=e.beat),t.realValue>this.endNote.realValue&&(this.endNote=t,this.endBeat=t.beat);break;case B.Down:e.realValue<this.startNote.realValue&&(this.startNote=e,this.startBeat=e.beat),t.realValue<this.endNote.realValue&&(this.endNote=t,this.endBeat=t.beat)}return!0}paint(e,t,i){let n=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this.startBeat.voice.bar),r=this.getBeamDirection(this.startBeat,n),s="tab.slur."+this.startNote.beat.id+"."+this.endNote.beat.id+"."+r,o=this.renderer;o.staff.getSharedLayoutData(s,!1)||(o.staff.setSharedLayoutData(s,!0),super.paint(e,t,i))}}class ko extends An{constructor(e,t){super(e,t),this._bend=null,this._effectSlurs=[]}doLayout(){this._effectSlurs=[],super.doLayout(),this._bend&&(this._bend.renderer=this.renderer,this._bend.doLayout(),this.updateWidth())}createTies(e){if(!e.isVisible)return;let t=this.renderer;if(e.isTieOrigin&&t.showTiedNotes&&e.tieDestination.isVisible){let t=new Co(e,e.tieDestination,!1);this.ties.push(t)}if(e.isTieDestination&&t.showTiedNotes){let t=new Co(e.tieOrigin,e,!0);this.ties.push(t)}if(e.isLeftHandTapped&&!e.isHammerPullDestination){let t=new Co(e,e,!1);this.ties.push(t)}if(e.isEffectSlurOrigin&&e.effectSlurDestination){let t=!1;for(let i of this._effectSlurs)if(i.tryExpand(e,e.effectSlurDestination,!1,!1)){t=!0;break}if(!t){let t=new xo(e,e.effectSlurDestination,!1,!1);this._effectSlurs.push(t),this.ties.push(t)}}if(e.isEffectSlurDestination&&e.effectSlurOrigin){let t=!1;for(let i of this._effectSlurs)if(i.tryExpand(e.effectSlurOrigin,e,!1,!0)){t=!0;break}if(!t){let t=new xo(e.effectSlurOrigin,e,!1,!0);this._effectSlurs.push(t),this.ties.push(t)}}if(e.slideInType!==y.None||e.slideOutType!==_.None){let t=new So(e.slideInType,e.slideOutType,e,this);this.ties.push(t)}e.hasBend&&(this._bend||(this._bend=new Qs,this._bend.renderer=this.renderer,this.ties.push(this._bend)),this._bend.addBends(e))}}class Eo extends Nn{constructor(e,t,i){super(e,t),this._noteString=null,this._trillNoteString=null,this._trillNoteStringWidth=0,this.isEmpty=!1,this.noteStringWidth=0,this._note=i}doLayout(){let t=this._note,i=t.fret-t.beat.voice.bar.staff.transpositionPitch;if(t.harmonicType===b.Natural&&0!==t.harmonicValue&&(i=t.harmonicValue-t.beat.voice.bar.staff.transpositionPitch),t.isTieDestination)0===t.beat.index&&this.renderer.settings.notation.notationMode==e.NotationMode.GuitarPro||(t.bendType===u.Bend||t.bendType===u.BendRelease)&&this.renderer.settings.notation.isNotationElementVisible(n.TabNotesOnTiedBends)?this._noteString="("+(t.tieOrigin.fret-t.beat.voice.bar.staff.transpositionPitch)+")":this._noteString="";else if(this._noteString=t.isDead?"x":i.toString(),t.isGhost)this._noteString="("+this._noteString+")";else if(t.harmonicType===b.Natural){let e=this._noteString.indexOf(String.fromCharCode(46));e>=0&&(this._noteString=this._noteString.substr(0,e+2)),this._noteString="<"+this._noteString+">"}if(t.isTrill)this._trillNoteString="("+(t.trillFret-t.beat.voice.bar.staff.transpositionPitch)+")";else if(ge.isAlmostEqualTo(t.harmonicValue,0))this._trillNoteString="";else switch(t.harmonicType){case b.Artificial:case b.Pinch:case b.Tap:case b.Semi:case b.Feedback:let e=(i+t.harmonicValue).toString(),n=e.indexOf(String.fromCharCode(46));n>=0&&(e=e.substr(0,n+2)),this._trillNoteString="<"+e+">";break;default:this._trillNoteString=""}this.isEmpty=!this._noteString,this.isEmpty||(this.renderer.scoreRenderer.canvas.font=this.renderer.resources.tablatureFont,this.width=this.noteStringWidth=this.renderer.scoreRenderer.canvas.measureText(this._noteString)*this.scale,this.height=this.renderer.scoreRenderer.canvas.font.size,this._trillNoteString&&(this.renderer.scoreRenderer.canvas.font=this.renderer.resources.graceFont,this._trillNoteStringWidth=3*this.scale+this.renderer.scoreRenderer.canvas.measureText(this._trillNoteString),this.width+=this._trillNoteStringWidth))}paint(e,t,i){if(this.isEmpty)return;let n=this.noteStringWidth+this._trillNoteStringWidth,r=e+this.x+(this.width-n)/2,s=this.renderer.scoreRenderer.canvas.font;this.renderer.scoreRenderer.canvas.font=this.renderer.resources.graceFont,i.fillText(this._trillNoteString,r+this.noteStringWidth+3*this.scale,t+this.y),this.renderer.scoreRenderer.canvas.font=s,i.fillText(this._noteString,r,t+this.y)}buildBoundingsLookup(e,t,i){let n=new fn;n.note=this._note,n.noteHeadBounds=new lt,n.noteHeadBounds.x=t+this.x,n.noteHeadBounds.y=i+this.y-this.height/2,n.noteHeadBounds.w=this.width,n.noteHeadBounds.h=this.height,this.renderer.scoreRenderer.boundsLookup.addNote(n)}}class To extends Nn{constructor(e,t,i){super(e,t),this._notes=[],this.minStringNote=null,this.beatEffects=new Map,this.notesPerString=new Map,this.noteStringWidth=0,this._isGrace=i}buildBoundingsLookup(e,t,i){for(const n of this._notes)n.buildBoundingsLookup(e,t+this.x,i+this.y)}getNoteX(e,t){if(this.notesPerString.has(e.string)){let i=this.notesPerString.get(e.string),n=this.x+i.x;switch(t){case Q.Left:break;case Q.Center:n+=i.noteStringWidth/2;break;case Q.Right:n+=i.width}return n}return 0}getNoteY(e,t){if(this.notesPerString.has(e.string)){const i=this.notesPerString.get(e.string);let n=this.y+i.y;switch(t){case X.Top:case X.TopWithStem:n-=i.height/2+2*this.scale;break;case X.Center:break;case X.Bottom:case X.BottomWithStem:n+=i.height/2}return n}return 0}doLayout(){let e=0,t=0;for(let i=0,n=this._notes.length;i<n;i++){let n=this._notes[i];n.renderer=this.renderer,n.doLayout(),n.width>e&&(e=n.width),n.noteStringWidth>t&&(t=n.noteStringWidth)}this.noteStringWidth=t;let i=this.renderer.resources.tablatureFont.size,n=this.getNoteY(this.minStringNote,X.Center)+i/2,r=7*this.scale;for(const e of this.beatEffects.values())e.y+=n,e.x+=this.width/2,e.renderer=this.renderer,n+=r,e.doLayout();this.width=e}addNoteGlyph(e,t){this._notes.push(e),this.notesPerString.set(t.string,e),(!this.minStringNote||t.string<this.minStringNote.string)&&(this.minStringNote=t)}paint(e,t,i){e+=this.x,t+=this.y;let n=this.renderer.resources,r=i.textBaseline;i.textBaseline=k.Middle,i.font=this._isGrace?n.graceFont:n.tablatureFont;let s=this._notes,o=this.width;for(let n of s)n.renderer=this.renderer,n.width=o,n.paint(e,t,i);i.textBaseline=r;for(const n of this.beatEffects.values())n.paint(e,t,i)}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.isPositionFrom("tab",this.beat)&&this.beamingHelper.registerBeatLineX("tab",this.beat,e+this.x+this.width/2,e+this.x+this.width/2)}}class Lo extends On{constructor(e,t,i,n){super(e,t,1,Ks.getSymbol(n)),this._isVisibleRest=i,this._duration=n}doLayout(){this._isVisibleRest?this.width=Ks.getSize(this._duration)*this.scale:this.width=10*this.scale}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.isPositionFrom("tab",this.beat)&&this.beamingHelper.registerBeatLineX("tab",this.beat,e+this.x+this.width/2,e+this.x+this.width/2)}paint(e,t,i){this._isVisibleRest&&super.paint(e,t,i)}}class No extends vr{constructor(){super(...arguments),this.noteNumbers=null,this.restGlyph=null}getNoteX(e,t){return this.noteNumbers?this.noteNumbers.getNoteX(e,t):0}getNoteY(e,t){return this.noteNumbers?this.noteNumbers.getNoteY(e,t):0}buildBoundingsLookup(e,t,i){this.noteNumbers&&this.noteNumbers.buildBoundingsLookup(e,t+this.x,i+this.y)}doLayout(){let t=this.renderer;if(this.container.beat.isRest){let e=Math.floor((this.renderer.bar.staff.tuning.length-1)/2),i=t.getTabY(e);if(this.restGlyph=new Lo(0,i,t.showRests,this.container.beat.duration),this.restGlyph.beat=this.container.beat,this.restGlyph.beamingHelper=this.beamingHelper,this.addGlyph(this.restGlyph),this.container.beat.dots>0&&t.showRests){this.addGlyph(new to(0,0,5*this.scale));for(let e=0;e<this.container.beat.dots;e++)this.addGlyph(new Ps(0,i,1.5*this.scale))}}else{let i=this.renderer.settings.notation.smallGraceTabNotes&&this.container.beat.graceType!==m.None;this.noteNumbers=new To(0,0,i),this.noteNumbers.beat=this.container.beat,this.noteNumbers.beamingHelper=this.beamingHelper;for(let e of this.container.beat.notes)e.isVisible&&this.createNoteGlyph(e);if(this.addGlyph(this.noteNumbers),this.container.beat.hasWhammyBar){let e=new Js(this.container.beat);e.renderer=this.renderer,e.doLayout(),this.container.ties.push(e)}if(this.container.beat.isTremolo&&!this.noteNumbers.beatEffects.has("tremolo")){let e=0,t=this.container.beat.tremoloSpeed;switch(t){case p.ThirtySecond:e=10;break;case p.Sixteenth:e=5;break;case p.Eighth:e=0}this.noteNumbers.beatEffects.set("tremolo",new Us(5*this.scale,e*this.scale,t))}if(this.container.beat.dots>0&&t.settings.notation.rhythmMode!==e.TabRhythmMode.Hidden){this.addGlyph(new to(0,0,5*this.scale));for(let e=0;e<this.container.beat.dots;e++)this.addGlyph(new Ps(0,t.lineOffset*t.bar.staff.tuning.length+t.settings.notation.rhythmHeight*t.scale,1.5*this.scale))}}if(!this.glyphs)return;let i=0;for(let e=0,t=this.glyphs.length;e<t;e++){let t=this.glyphs[e];t.x=i,t.renderer=this.renderer,t.doLayout(),i+=t.width}this.width=i,this.container.beat.isEmpty?this.centerX=this.width/2:this.container.beat.isRest?this.centerX=this.restGlyph.x+this.restGlyph.width/2:this.centerX=this.noteNumbers.x+this.noteNumbers.noteStringWidth/2}updateBeamingHelper(){this.container.beat.isRest?this.restGlyph.updateBeamingHelper(this.container.x+this.x):this.noteNumbers.updateBeamingHelper(this.container.x+this.x)}createNoteGlyph(e){let t=this.renderer,i=new Eo(0,0,e),n=e.beat.voice.bar.staff.tuning.length-e.string;i.y=t.getTabY(n),i.renderer=this.renderer,i.doLayout(),this.noteNumbers.addNoteGlyph(i,e);let r=i.y-i.height/2,s=r+i.height;this.renderer.helpers.collisionHelper.reserveBeatSlot(this.container.beat,r,s)}}class Mo extends Nn{constructor(e){super(0,0),this._beat=e}doLayout(){this.width=10*this.scale}paint(e,t,i){let n=this.renderer,r=t+this.x+n.getNoteY(this._beat.maxNote,X.Top),s=t+this.y+n.getNoteY(this._beat.minNote,X.Bottom),o=e+this.x+this.width/2|0,a=8*this.scale;if(this._beat.brushType!==d.None){if(this._beat.brushType===d.BrushUp||this._beat.brushType===d.BrushDown)i.beginPath(),i.moveTo(o,r),i.lineTo(o,s),i.stroke();else if(this._beat.brushType===d.ArpeggioUp){let t=new Qr(0,0,w.Slight,1.2,!0);t.renderer=this.renderer,t.doLayout();let n=r,o=s-a;t.width=Math.abs(o-n),i.beginRotate(e+this.x+4*this.scale,o,-90),t.paint(0,-t.height/2,i),i.endRotate()}else if(this._beat.brushType===d.ArpeggioDown){let t=new Qr(0,0,w.Slight,1.2,!0);t.renderer=this.renderer,t.doLayout();let n=r+a,o=s;t.width=Math.abs(o-n),i.beginRotate(e+this.x+4*this.scale,n,90),t.paint(0,-t.height/2,i),i.endRotate()}this._beat.brushType===d.BrushUp||this._beat.brushType===d.ArpeggioUp?(i.beginPath(),i.moveTo(o,s),i.lineTo(o+a/2,s-a),i.lineTo(o-a/2,s-a),i.closePath(),i.fill()):(i.beginPath(),i.moveTo(o,r),i.lineTo(o+a/2,r+a),i.lineTo(o-a/2,r+a),i.closePath(),i.fill())}}}class Oo extends br{doLayout(){this.container.beat.brushType===d.None||this.container.beat.isRest||(this.addGlyph(new Mo(this.container.beat)),this.addGlyph(new to(0,0,4*this.scale))),super.doLayout()}constructor(){super()}}class Do extends Nn{constructor(e,t){super(e,t)}doLayout(){this.width=28*this.scale}paint(e,t,i){let n=this.renderer.bar.staff.tuning.length,r=n<=4?C.FourStringTabClef:C.SixStringTabClef,s=n<=4?n/4.5:n/6.5;i.fillMusicFontSymbol(e+this.x+5*this.scale,t+this.y,s*this.scale,r,!1)}}class Io extends uo{get commonScale(){return 1}get numberScale(){return this.renderer.bar.staff.tuning.length<=4?Dn.GraceScale:1}}class Ao extends dr{constructor(e,t){super(e,t),this._firstLineY=0,this._tupletSize=0,this.showTimeSignature=!1,this.showRests=!1,this.showTiedNotes=!1,this._startSpacing=!1}get lineOffset(){return(Ao.TabLineSpacing+1)*this.scale}updateSizes(){let t=this.resources,i=(t.tablatureFont.size/2+.2*t.tablatureFont.size)*this.scale;this.topPadding=i,this.bottomPadding=i,this.height=this.lineOffset*(this.bar.staff.tuning.length-1)+2*i,this.settings.notation.rhythmMode!==e.TabRhythmMode.Hidden&&(this.height+=this.settings.notation.rhythmHeight*this.settings.display.scale,this.bottomPadding+=this.settings.notation.rhythmHeight*this.settings.display.scale),this.updateFirstLineY(),super.updateSizes()}updateFirstLineY(){let e=this.resources;this._firstLineY=(e.tablatureFont.size/2+.2*e.tablatureFont.size)*this.scale}doLayout(){if(this.updateFirstLineY(),super.doLayout(),this.settings.notation.rhythmMode!==e.TabRhythmMode.Hidden){let e=!1;for(let t of this.bar.voices)if(this.hasVoiceContainer(t)&&this.getVoiceContainer(t).tupletGroups.length>0){e=!0;break}e&&(this._tupletSize=.8*this.resources.effectFont.size,this.registerOverflowBottom(this._tupletSize))}}createPreBeatGlyphs(){if(super.createPreBeatGlyphs(),this.bar.masterBar.isRepeatStart&&this.addPreBeatGlyph(new Is(0,0,1.5,3)),this.isFirstOfLine){let e=(this.bar.staff.tuning.length-1)/2;this.addPreBeatGlyph(new Do(5*this.scale,this.getTabY(e)))}this.showTimeSignature&&(!this.bar.previousBar||this.bar.previousBar&&this.bar.masterBar.timeSignatureNumerator!==this.bar.previousBar.masterBar.timeSignatureNumerator||this.bar.previousBar&&this.bar.masterBar.timeSignatureDenominator!==this.bar.previousBar.masterBar.timeSignatureDenominator)&&(this.createStartSpacing(),this.createTimeSignatureGlyphs()),this.addPreBeatGlyph(new Ls(0,this.getTabHeight(-.5),this.bar.index+1))}createStartSpacing(){this._startSpacing||(this.addPreBeatGlyph(new to(0,0,2*this.scale)),this._startSpacing=!0)}createTimeSignatureGlyphs(){this.addPreBeatGlyph(new to(0,0,5*this.scale));const e=(this.bar.staff.tuning.length+1)/2-1;this.addPreBeatGlyph(new Io(0,this.getTabY(e),this.bar.masterBar.timeSignatureNumerator,this.bar.masterBar.timeSignatureDenominator,this.bar.masterBar.timeSignatureCommon))}createVoiceGlyphs(e){for(let t=0,i=e.beats.length;t<i;t++){let i=e.beats[t],n=new ko(i,this.getVoiceContainer(e));n.preNotes=new Oo,n.onNotes=new No,this.addBeatGlyph(n)}}createPostBeatGlyphs(){super.createPostBeatGlyphs(),this.bar.masterBar.isRepeatEnd?(this.addPostBeatGlyph(new Os(this.x,0)),this.bar.masterBar.repeatCount>2&&this.addPostBeatGlyph(new Ds(0,this.getTabY(-1),this.bar.masterBar.repeatCount))):this.addPostBeatGlyph(new Ns(0,0))}getTabY(e){return this._firstLineY+this.getTabHeight(e)}getTabHeight(e){return this.lineOffset*e}get middleYPosition(){return this.getTabY(this.bar.staff.tuning.length-1)}paintBackground(e,t,i){super.paintBackground(e,t,i);let n=this.resources;i.color=n.staffLineColor;let r=this.scale,s=[];for(let e=0,t=this.bar.staff.tuning.length;e<t;e++)s.push([]);for(let e of this.bar.voices)if(this.hasVoiceContainer(e)){let t=this.getVoiceContainer(e);for(let e of t.beatGlyphs){let i=e.onNotes,n=i.noteNumbers;if(n)for(const[o,a]of n.notesPerString)a.isEmpty||s[this.bar.staff.tuning.length-o].push(new Float32Array([t.x+e.x+i.x+n.x,n.width+r]))}}for(let e of s)e.sort(((e,t)=>e[0]>t[0]?1:e[0]<t[0]?-1:0));for(let n=0,r=this.bar.staff.tuning.length;n<r;n++){const r=this.getTabY(n);let o=0;for(let a of s[n])i.fillRect(e+this.x+o,t+this.y+r|0,a[0]-o,this.scale*dr.StaffLineThickness),o=a[0]+a[1];i.fillRect(e+this.x+o,t+this.y+r|0,this.width-o,this.scale*dr.StaffLineThickness)}i.color=n.mainGlyphColor,this.paintSimileMark(e,t,i)}paint(t,i,n){super.paint(t,i,n),this.settings.notation.rhythmMode!==e.TabRhythmMode.Hidden&&(this.paintBeams(t,i,n),this.paintTuplets(t,i,n))}paintBeams(e,t,i){for(let n=0,r=this.helpers.beamHelpers.length;n<r;n++){let r=this.helpers.beamHelpers[n];for(let n=0,s=r.length;n<s;n++){let s=r[n];this.paintBeamHelper(e+this.beatGlyphsStart,t,i,s)}}}paintTuplets(e,t,i){for(let n of this.bar.voices)if(this.hasVoiceContainer(n)){let r=this.getVoiceContainer(n);for(let n of r.tupletGroups)this.paintTupletHelper(e+this.beatGlyphsStart,t,i,n)}}paintBeamHelper(t,i,n,r){n.color=0===r.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,r.isRestBeamHelper||(1===r.beats.length||this.settings.notation.rhythmMode===e.TabRhythmMode.ShowWithBeams?this.paintFooter(t,i,n,r):this.paintBar(t,i,n,r))}paintBar(e,t,i,n){for(let r=0,s=n.beats.length;r<s;r++){let s=n.beats[r];if(n.hasBeatLineX(s)){let o=n.getBeatLineX(s),a=t+this.y,l=t+this.y+this.height-this._tupletSize,c=this.getOnNotesGlyphForBeat(s);c.noteNumbers?a+=c.noteNumbers.getNoteY(c.noteNumbers.minStringNote,X.Bottom)+this.lineOffset/2:a+=this.height-this.settings.notation.rhythmHeight*this.settings.display.scale-this._tupletSize,this.paintBeamingStem(s,t+this.y,e+this.x+o,a,l,i);let h=6*this.scale,u=-6*this.scale,d=3*this.scale,f=ge.getIndex(s.duration)-2,p=l;for(let t=0;t<f;t++){let a=0,l=0,c=0,f=0,g=p+t*u;if(1===n.beats.length)a=o,l=o+h,c=g,f=g,Ao.paintSingleBar(i,e+this.x+a,c,e+this.x+l,f,d);else if(r<n.beats.length-1){if(ar.isFullBarJoin(s,n.beats[r+1],t))a=o,l=n.getBeatLineX(n.beats[r+1]);else{if(0!==r&&ar.isFullBarJoin(n.beats[r-1],s,t))continue;a=o,l=a+h}c=g,f=g,Ao.paintSingleBar(i,e+this.x+a,c,e+this.x+l,f,d)}else r>0&&!ar.isFullBarJoin(s,n.beats[r-1],t)&&(a=o-h,l=o,c=g,f=g,Ao.paintSingleBar(i,e+this.x+a,c,e+this.x+l,f,d))}}}}paintTupletHelper(e,t,i,n){let r,s=this.resources,o=i.textAlign,a=i.textBaseline;i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,i.textAlign=x.Center,i.textBaseline=k.Middle;let l=n.beats[0].tupletNumerator,c=n.beats[0].tupletDenominator;if(r=2===l&&3===c?"2":3===l&&2===c?"3":4===l&&6===c?"4":5===l&&4===c?"5":6===l&&4===c?"6":7===l&&4===c?"7":9===l&&8===c?"9":10===l&&8===c?"10":11===l&&8===c?"11":12===l&&8===c?"12":13===l&&8===c?"13":l+":"+c,1!==n.beats.length&&n.isFull){let o=n.beats[0],a=n.beats[n.beats.length-1],l=this.helpers.beamHelperLookup[n.voice.index].get(o.index),c=this.helpers.beamHelperLookup[n.voice.index].get(a.index);if(l&&c){let n=l.getBeatLineX(o),h=c.getBeatLineX(a);i.font=s.effectFont;let u=i.measureText(r),d=3*this.scale,f=(n+h)/2,p=f-u/2-d,g=f+u/2+d,m=t+this.y+this.height-this._tupletSize+.5*s.effectFont.size,b=.25*-s.effectFont.size,v=-5*this.scale;i.beginPath(),i.moveTo(e+this.x+n,m-b|0),i.lineTo(e+this.x+n,m-b-v|0),i.lineTo(e+this.x+p,m-b-v|0),i.stroke(),i.beginPath(),i.moveTo(e+this.x+g,m-b-v|0),i.lineTo(e+this.x+h,m-b-v|0),i.lineTo(e+this.x+h,m-b|0),i.stroke(),i.fillText(r,e+this.x+f,m-b-v)}}else for(let o=0,a=n.beats.length;o<a;o++){let a=n.beats[o],l=this.helpers.beamHelperLookup[n.voice.index].get(a.index);if(!l)continue;let c=l.getBeatLineX(a),h=t+this.y+this.height-this._tupletSize+.5*s.effectFont.size;i.font=s.effectFont,i.fillText(r,e+this.x+c,h)}i.textAlign=o,i.textBaseline=a}static paintSingleBar(e,t,i,n,r,s){e.beginPath(),e.moveTo(t,i),e.lineTo(n,r),e.lineTo(n,r-s),e.lineTo(t,i-s),e.closePath(),e.fill()}paintBeamingStem(e,t,i,n,r,s){s.beginPath();let o=[];this.helpers.collisionHelper.reservedLayoutAreasByDisplayTime.has(e.displayStart)&&(o=this.helpers.collisionHelper.reservedLayoutAreasByDisplayTime.get(e.displayStart).slots.slice(),o.sort(((e,t)=>e.topY-t.topY)));let a=r;for(;a>n;){s.moveTo(i,a);let e=n;if(!(o.length>0)){s.lineTo(i,n);break}{const n=o.pop();e=t+n.bottomY,s.lineTo(i,e),a=t+n.topY}}s.stroke()}paintFooter(e,t,i,n){for(let r of n.beats){if(r.graceType!==m.None||r.duration===p.Whole||r.duration===p.DoubleWhole||r.duration===p.QuadrupleWhole)return;let s=n.getBeatLineX(r),o=t+this.y,a=t+this.y+this.height-this._tupletSize,l=this.getOnNotesGlyphForBeat(r);if(l.noteNumbers?o+=l.noteNumbers.getNoteY(l.noteNumbers.minStringNote,X.Bottom):o+=this.height-this.settings.notation.rhythmHeight*this.settings.display.scale-this._tupletSize,this.paintBeamingStem(r,t+this.y,e+this.x+s,o,a,i),r.duration>p.Quarter){let t=new In(0,0,r.duration,B.Down,!1);t.renderer=this,t.doLayout(),t.paint(e+this.x+s,a,i)}}}}Ao.StaffId="tab",Ao.TabLineSpacing=10;class Po extends Jn{constructor(e,t,i){super(),this._showTimeSignature=e,this._showRests=t,this._showTiedNotes=i,this.hideOnPercussionTrack=!0}get staffId(){return Ao.StaffId}canCreate(e,t){return t.tuning.length>0&&super.canCreate(e,t)}create(e,t){let i=new Ao(e,t);return i.showRests=this._showRests,i.showTimeSignature=this._showTimeSignature,i.showTiedNotes=this._showTiedNotes,i}}class Ro extends Mn{constructor(){super(0,0)}doLayout(){super.doLayout();const e=this.renderer.resources.effectFont;this.height=e.size+Ro.Padding*this.scale}paint(e,t,i){let n=this.renderer.resources;i.font=n.effectFont;let r=i.textAlign;i.textAlign=x.Center,i.fillText("T",e+this.x,t+this.y+i.font.size/2),i.textAlign=r,i.strokeCircle(e+this.x,t+this.y+i.font.size/2+(Ro.Padding-1)*this.scale,i.font.size/1.6)}}Ro.Padding=4;class Bo extends Br{get notationElement(){return n.EffectTap}get sizingMode(){return J.SingleOnBeat}shouldCreateGlyphForNote(e){return e.isLeftHandTapped}createNewGlyph(e,t){return new Ro}}class Fo{constructor(){this.noteRange=1,this.x=0,this.y=0}}!function(e){e[e.None=0]="None",e[e.Rectangle=1]="Rectangle",e[e.Ellipse=2]="Ellipse",e[e.Circle=3]="Circle"}(te||(te={}));class Wo extends Fo{constructor(){super(...arguments),this.align=x.Left,this.frame=te.None,this.text="",this.fontFace="",this.weight=0,this.height=0}}class Vo extends Fo{constructor(){super(...arguments),this.chord=new He}}class zo extends Fo{}class Ho extends Fo{}class jo extends Fo{constructor(){super(...arguments),this.number=0}}class Uo extends Fo{constructor(){super(...arguments),this.decrescendo=!1}}class Go extends Fo{constructor(){super(...arguments),this.allNumbers=!1,this.firstNumber=0,this.lastNumber=0}}class Ko extends Fo{constructor(){super(...arguments),this.octave=1}}class $o extends Fo{}class qo{constructor(){this.defaultClef=a.G2,this.description="",this.percussion=!1,this.instrument=0,this.volume=0,this.transpose=0,this.index=0}}class Zo{constructor(){this.from=0,this.to=0,this.curly=!1}}class Yo{constructor(){this.currentBarIndex=-1,this.currentBarComplete=!0,this.currentBarDuration=0,this.currentPosition=0,this.voiceStemDir=null,this.repeatCount=0,this.repeatEnd=null}}class Xo{constructor(){this._trackChannel=0,this._beamingMode=T.Auto,this._isFirstSystem=!0,this._staffLookup=new Map,this._brackets=[],this._staffLayoutLookup=new Map,this._staffLayouts=[],this._timeSignature=new Ue,this._voiceStates=new Map}parseXml(e,t){this._galleryObjects=new Map,this._tieStarts=[],this._tieStartIds=new Map,this._voiceCounts=new Map,this._slurs=new Map,this._crescendo=new Map,this._isFirstSystem=!0;let i=new gt;try{i.parse(e)}catch(e){throw new xe("Could not parse XML",e)}this.parseDom(i),this.consolidate(),this.score.finish(t)}consolidate(){let e=this.score.tempo;for(const t of this.score.tracks){const i=this._voiceCounts.get(t.index);for(const n of t.staves){for(;n.bars.length<this.score.masterBars.length;)this.addNewBar(n);for(const t of n.bars){for(;t.voices.length<i;)t.addVoice(new Je);for(const e of t.voices)if(0===e.beats.length){const t=new ze;t.isEmpty=!0,e.addBeat(t)}const n=t.masterBar;n.tempoAutomation&&(n.tempoAutomation.value!==e?e=n.tempoAutomation.value:n.tempoAutomation=null)}}}Xo.applyEffectRange(this._slurs,((e,t)=>{t.isLegatoOrigin=!0})),Xo.applyEffectRange(this._crescendo,((e,t)=>{t.crescendo=e.decrescendo?f.Decrescendo:f.Crescendo}))}static applyEffectRange(e,t){for(const[i,n]of e){const e=n.noteRange;let r=i;for(let i=0;i<e;i++)if(t(n,r),r.index+1<r.voice.beats.length)r=r.voice.beats[r.index+1];else{if(!(r.voice.bar.index+1<r.voice.bar.staff.bars.length))break;r=r.voice.bar.staff.bars[r.voice.bar.index+1].voices[r.voice.index].beats[0]}}}parseDom(e){let t=e.firstElement;if(t){if("score"!==t.localName)throw new xe("Root node of XML was not GPIF");this.score=new $e,this.score.tempo=120;for(let e of t.childNodes)if(e.nodeType===P.Element)switch(e.localName){case"info":this.parseInfo(e);break;case"layout":this.parseLayout(e);break;case"gallery":this.parseGallery(e);break;case"pageObjects":this.parsePageObjects(e);break;case"systems":this.parseSystems(e)}}}parseLayout(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"staves":this.parseLayoutStaves(t);break;case"brackets":this.parseBrackets(t)}const t=this._brackets.filter((e=>e.curly));t.sort(((e,t)=>e.from-t.from));let i=0,n=null;for(let e=0;e<this._staffLayouts.length;e++){const r=this._staffLayouts[e];for(;i<t.length&&e>t[i].to;)i++;n&&i<t.length&&e>t[i].from&&e<=t[i].to?n.ensureStaveCount(n.staves.length+1):(n=new Qe,n.ensureStaveCount(1),n.name=r.description,n.playbackInfo.volume=Math.floor(r.volume/128*16),n.playbackInfo.program=r.instrument,r.percussion?(n.playbackInfo.primaryChannel=9,n.playbackInfo.secondaryChannel=9):(n.playbackInfo.primaryChannel=this._trackChannel++,n.playbackInfo.secondaryChannel=this._trackChannel++),this.score.addTrack(n));const s=n.staves[n.staves.length-1];s.isPercussion=r.percussion,s.transpositionPitch=r.transpose,s.displayTranspositionPitch=0,s.showTablature=!1,this._staffLookup.set(r.index,s)}}parseBrackets(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"bracket":this.parseBracket(t)}}parseBracket(e){const t=new Zo;t.from=parseInt(e.getAttribute("from")),t.to=parseInt(e.getAttribute("to")),e.attributes.has("curly")&&(t.curly="true"===e.attributes.get("curly")),this._brackets.push(t)}parseLayoutStaves(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"staffLayout":this.parseStaffLayout(t)}}parseStaffLayout(e){const t=new qo;t.description=e.getAttribute("description");for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"notation":i.attributes.has("defaultClef")&&(t.defaultClef=this.parseClef(i.attributes.get("defaultClef")));break;case"sound":i.attributes.has("percussion")&&(t.percussion="true"===i.attributes.get("percussion")),i.attributes.has("instr")&&(t.instrument=parseInt(i.attributes.get("instr"))),i.attributes.has("volume")&&(t.volume=parseInt(i.attributes.get("volume"))),i.attributes.has("transpose")&&(t.transpose=parseInt(i.attributes.get("transpose")))}this._staffLayoutLookup.set(t.description,t),t.index=this._staffLayouts.length,this._staffLayouts.push(t)}parseClef(e){switch(e){case"treble":return a.G2;case"bass":return a.F4;case"alto":case"tenor":return a.C4}return a.G2}parseClefOttava(e){return e.endsWith("-")?l._8vb:e.endsWith("+")?l._8va:l.Regular}parseSystems(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"system":this.parseSystem(t)}}parseSystem(e){e.attributes.has("tempo")&&0===this.score.masterBars.length&&(this.score.tempo=parseInt(e.attributes.get("tempo"))),"0"===e.getAttribute("beamGrouping")&&(this._beamingMode=T.ForceSplitToNext);for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"staves":this.parseStaves(e,t)}this._isFirstSystem=!1}parseStaves(e,t){let i=this.score.masterBars.length;for(let n of t.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"staff":this.parseStaff(e,i,n)}}parseStaff(e,t,i){const n=i.getAttribute("layout");this._currentStaffLayout=this._staffLayoutLookup.get(n),this._timeSignature.timeSignatureNumerator=4,this._timeSignature.timeSignatureDenominator=4,this._timeSignature.timeSignatureCommon=!1,this.parseTime(i.getAttribute("defaultTime"));const r=this._staffLookup.get(this._currentStaffLayout.index);for(;r.bars.length<t;)this.addNewBar(r);for(let s of i.childNodes)if(s.nodeType===P.Element)switch(s.localName){case"voices":this.parseVoices(n,r,e,t,s)}}parseTime(e){switch(e){case"allaBreve":case"C":this._timeSignature.timeSignatureNumerator=2,this._timeSignature.timeSignatureDenominator=2,this._timeSignature.timeSignatureCommon=!0;break;case"longAllaBreve":this._timeSignature.timeSignatureNumerator=4,this._timeSignature.timeSignatureDenominator=4,this._timeSignature.timeSignatureCommon=!0;break;default:if(e.indexOf("/")>0){const t=e.split("/");this._timeSignature.timeSignatureNumerator=parseInt(t[0]),this._timeSignature.timeSignatureDenominator=parseInt(t[1]),this._timeSignature.timeSignatureCommon=!1}}}parseVoices(e,t,i,n,r){let s=0;for(let o of r.childNodes)if(o.nodeType===P.Element)switch(o.localName){case"voice":this.parseVoice(e,t,i,s,n,o),s++}}getOrCreateBar(e,t){return t<e.bars.length?e.bars[t]:this.addNewBar(e)}addNewBar(e){let t=new Ee;if(e.bars.length>0?(t.clef=e.bars[e.bars.length-1].clef,t.clefOttava=e.bars[e.bars.length-1].clefOttava):t.clef=this._currentStaffLayout.defaultClef,e.addBar(t),e.bars.length>this.score.masterBars.length){let e=new Ue;this.score.addMasterBar(e),e.index>0&&(e.keySignature=e.previousMasterBar.keySignature,e.keySignatureType=e.previousMasterBar.keySignatureType,e.tripletFeel=e.previousMasterBar.tripletFeel),e.timeSignatureDenominator=this._timeSignature.timeSignatureDenominator,e.timeSignatureNumerator=this._timeSignature.timeSignatureNumerator,e.timeSignatureCommon=this._timeSignature.timeSignatureCommon}return t}newBar(e,t){this._currentVoiceState.currentBarIndex++,this._currentBar=this.getOrCreateBar(e,this._currentVoiceState.currentBarIndex),this._currentVoiceState.currentBarDuration=this._currentBar.masterBar.calculateDuration(!1),this._currentVoiceState.currentBarComplete=!1,this._currentVoiceState.currentPosition=0,this.ensureVoice(e,t)}parseVoice(e,t,i,n,r,s){const a=e+"_"+n;if(this._currentVoiceState&&!this._currentVoiceState.currentBarComplete&&(this._currentBar.masterBar.isAnacrusis=!0),this._voiceStates.has(a)?(this._currentVoiceState=this._voiceStates.get(a),this._currentBar=this.getOrCreateBar(t,this._currentVoiceState.currentBarIndex),this.ensureVoice(t,n)):(this._currentVoiceState=new Yo,this._currentVoiceState.currentBarIndex=r-1,this._voiceStates.set(a,this._currentVoiceState),this.newBar(t,n)),s.attributes.has("stemDir"))switch(s.attributes.get("stemDir")){case"up":this._currentVoiceState.voiceStemDir=B.Up;break;case"down":this._currentVoiceState.voiceStemDir=B.Down;break;default:this._currentVoiceState.voiceStemDir=null}else this._currentVoiceState.voiceStemDir=null;const l=s.findChildElement("noteObjects");if(i.attributes.has("tempo")&&(this._currentBar.masterBar.tempoAutomation=new ke,this._currentBar.masterBar.tempoAutomation.isLinear=!0,this._currentBar.masterBar.tempoAutomation.type=o.Tempo,this._currentBar.masterBar.tempoAutomation.value=parseInt(i.attributes.get("tempo"))),l)for(let e of l.childNodes)if(e.nodeType===P.Element)switch(this._currentVoiceState.currentBarComplete&&"barline"!==e.localName&&this.newBar(t,n),e.localName){case"clefSign":this._currentBar.clef=this.parseClef(e.getAttribute("clef")),this._currentBar.clefOttava=this.parseClefOttava(e.getAttribute("clef"));break;case"keySign":this._currentBar.masterBar.keySignature=parseInt(e.getAttribute("fifths"));break;case"timeSign":this.parseTime(e.getAttribute("time")),this._currentBar.masterBar.timeSignatureDenominator=this._timeSignature.timeSignatureDenominator,this._currentBar.masterBar.timeSignatureNumerator=this._timeSignature.timeSignatureNumerator,this._currentBar.masterBar.timeSignatureCommon=this._timeSignature.timeSignatureCommon,this._currentVoiceState.currentPosition=0,this._currentVoiceState.currentBarDuration=this._currentBar.masterBar.calculateDuration(!1);break;case"barline":switch(e.getAttribute("type")){case"double":this._currentBar.masterBar.isDoubleBar=!0,this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break;case"end":this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0);break;case"repEnd":this._currentVoiceState.repeatEnd=this._currentBar.masterBar,this._currentBar.masterBar.repeatCount<this._currentVoiceState.repeatCount&&(this._currentBar.masterBar.repeatCount=this._currentVoiceState.repeatCount),this.parseBarDrawObject(e),this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break;case"repBegin":this.newBar(t,n),this._currentBar.masterBar.isRepeatStart=!0,this._currentVoiceState.repeatEnd=null,this._currentVoiceState.repeatCount=0;break;case"repEndBegin":this._currentVoiceState.repeatEnd=this._currentBar.masterBar,this._currentBar.masterBar.repeatCount<this._currentVoiceState.repeatCount&&(this._currentBar.masterBar.repeatCount=this._currentVoiceState.repeatCount),this.parseBarDrawObject(e),this.newBar(t,n),this._currentBar.masterBar.isRepeatStart=!0;break;case"dashed":this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break;case"single":default:this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0}break;case"chord":let i=new ze;this.initFromPreviousBeat(i,this._currentVoice),i.beamingMode=this._beamingMode,this._currentVoiceState.voiceStemDir&&(i.preferredBeamDirection=this._currentVoiceState.voiceStemDir),this.parseDuration(this._currentBar,i,e.findChildElement("duration")),i.updateDurations(),this._currentVoiceState.currentPosition+=i.playbackDuration,this._currentVoice.addBeat(i),this.parseChord(i,e),this._currentVoiceState.currentPosition>=this._currentVoiceState.currentBarDuration&&(this._currentVoiceState.currentBarComplete=!0);break;case"rest":const r=this.parseRestDurations(this._currentBar,e.findChildElement("duration"));r&&(this.initFromPreviousBeat(r,this._currentVoice),r.updateDurations(),this._currentVoiceState.currentPosition+=r.playbackDuration,this._currentVoice.addBeat(r),this._currentVoiceState.currentPosition>=this._currentVoiceState.currentBarDuration&&(this._currentVoiceState.currentBarComplete=!0))}}initFromPreviousBeat(e,t){let i=this.getLastBeat(t);i&&(e.dynamics=i.dynamics)}getLastBeat(e){if(e.beats.length>0)return e.beats[e.beats.length-1];if(e.bar.index>0){const t=e.bar.staff.bars[e.bar.index-1];if(e.index<t.voices.length){const i=t.voices[e.index];return this.getLastBeat(i)}}return null}ensureVoice(e,t){for(;this._currentBar.voices.length<t+1;)this._currentBar.addVoice(new Je);(!this._voiceCounts.has(e.track.index)||this._voiceCounts.get(e.track.index)<this._currentBar.voices.length)&&this._voiceCounts.set(e.track.index,this._currentBar.voices.length),this._currentVoice=this._currentBar.voices[t]}parseChord(e,t){const i=new Ae;for(let n of t.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"stem":switch(n.getAttribute("dir")){case"up":e.preferredBeamDirection=B.Up;break;case"down":e.preferredBeamDirection=B.Down}break;case"articulation":switch(n.getAttribute("type")){case"staccato":i.isStaccato=!0;break;case"normalAccent":i.accentuated=s.Normal;break;case"strongAccent":i.accentuated=s.Heavy}break;case"lyric":this.parseLyric(e,n);break;case"drawObjects":this.parseBeatDrawObject(e,n);break;case"heads":this.parseHeads(e,i,n);break;case"beam":switch(n.getAttribute("group")){case"force":e.beamingMode=T.ForceMergeWithNext;break;case"divide":e.beamingMode=T.ForceSplitToNext}}}parseHeads(e,t,i){for(let n of i.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"head":this.parseHead(e,t,n)}}parseHead(e,t,i){const n=new Ae,r=ge.parseTuning(i.getAttribute("pitch"));n.octave=r.octave-1,n.tone=r.noteValue,n.isStaccato=t.isStaccato,n.accentuated=t.accentuated,e.addNote(n);for(let e of i.childNodes)if(e.nodeType===P.Element)switch(e.localName){case"alter":e.attributes.has("step")&&(n.tone+=parseInt(e.attributes.get("step")));break;case"tie":e.attributes.has("begin")?this._tieStartIds.has(n.id)||(this._tieStartIds.set(n.id,!0),this._tieStarts.push(n)):e.attributes.has("end")&&this._tieStarts.length>0&&!n.isTieDestination&&(n.isTieDestination=!0,n.tieOriginNoteId=this._tieStarts[0].id,this._tieStarts.splice(0,1),this._tieStartIds.delete(n.id))}}parseBeatDrawObject(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"drawObj":const t=this.parseDrawObj(i);if(t)if(t instanceof Wo)t.fontFace.startsWith("capella")?"u"===t.text?(e.fermata=new ht,e.fermata.type=A.Medium):"f"===t.text?e.dynamics=g.F:"j"===t.text&&(e.dynamics=g.MF):this._isFirstSystem&&""===this.score.title&&t.align===x.Center&&t.height>16&&t.weight>400?this.score.title=t.text:this._isFirstSystem&&""===this.score.artist&&t.align===x.Center&&t.y<0?this.score.artist=t.text:this._isFirstSystem&&""===this.score.music&&t.align===x.Right&&t.y<0?this.score.music=t.text:t.text.startsWith("by capella")||(e.text=t.text);else if(t instanceof Vo);else if(t instanceof Ho)e.vibrato=w.Slight;else if(t instanceof Uo)e.crescendo=t.decrescendo?f.Decrescendo:f.Crescendo,t.noteRange++,this._crescendo.set(e,t);else if(t instanceof zo){const i=t;this._slurs.set(e,i)}else t instanceof Go&&this.applyVolta(t)}}parseBarDrawObject(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"drawObj":const e=this.parseDrawObj(t);e&&e instanceof Go&&this.applyVolta(e)}}applyVolta(e){if(e.lastNumber>0?(this._currentVoiceState.repeatCount=e.lastNumber,this._currentVoiceState.repeatEnd&&this._currentVoiceState.repeatEnd.repeatCount<this._currentVoiceState.repeatCount&&(this._currentVoiceState.repeatEnd.repeatCount=this._currentVoiceState.repeatCount)):e.firstNumber>0&&(this._currentVoiceState.repeatCount=e.firstNumber,this._currentVoiceState.repeatEnd&&this._currentVoiceState.repeatEnd.repeatCount<this._currentVoiceState.repeatCount&&(this._currentVoiceState.repeatEnd.repeatCount=this._currentVoiceState.repeatCount)),e.lastNumber>0&&e.firstNumber>0){let t=0;for(let i=e.firstNumber;i<=e.lastNumber;i++)t|=1<<i-1;this._currentBar.masterBar.alternateEndings=t}else e.lastNumber>0?this._currentBar.masterBar.alternateEndings=1<<e.lastNumber-1:e.firstNumber>0&&(this._currentBar.masterBar.alternateEndings=1<<e.firstNumber-1)}parseLyric(e,t){for(let i of t.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"verse":e.lyrics||(e.lyrics=[]);let t=i.innerText;"true"===i.getAttribute("hyphen")&&(t+="-"),e.lyrics.push(t)}}parseRestDurations(e,t){const i=t.getAttribute("base");if(-1!==i.indexOf("/")){let i=new ze;return i.beamingMode=this._beamingMode,this.parseDuration(e,i,t),i}if(1===parseInt(i)){let e=new ze;return e.beamingMode=this._beamingMode,e.duration=p.Whole,e}return Oe.warning("Importer","Multi-Bar rests are not supported"),null}parseDurationValue(e){switch(e){case"2/1":return p.DoubleWhole;case"1/1":return p.Whole;case"1/2":return p.Half;case"1/4":return p.Quarter;case"1/8":return p.Eighth;case"1/16":return p.Sixteenth;case"1/32":return p.ThirtySecond;case"1/64":return p.SixtyFourth;case"1/128":return p.OneHundredTwentyEighth;default:return Oe.warning("Importer","Unsupported duration"),p.Quarter}}parseDuration(e,t,i){const n=i.getAttribute("base");t.duration=this.parseDurationValue(n),i.attributes.has("dots")&&(t.dots=parseInt(i.attributes.get("dots")));const r=i.findChildElement("tuplet");if(r){t.tupletNumerator=parseInt(r.getAttribute("count"));const e="true"===r.getAttribute("tripartite")?3:1,i="true"===r.getAttribute("prolong")?0:1;let n=0;for(;e*Math.pow(2,n+i)<t.tupletNumerator;)n++;t.tupletDenominator=e*Math.pow(2,n)}}parsePageObjects(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"drawObj":const e=this.parseDrawObj(t);if(e&&e instanceof Wo)switch(e.align){case x.Center:this.score.title?this.score.subTitle||(this.score.subTitle=t.innerText):this.score.title=t.innerText;break;case x.Right:this.score.artist||(this.score.artist=t.innerText)}}}parseGallery(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"drawObj":const e=this.parseDrawObj(t);e&&this._galleryObjects.set(t.getAttribute("name"),e)}}parseDrawObj(e){let t=null,i=1;for(let n of e.childNodes)if(n.nodeType===P.Element)switch(n.localName){case"text":t=this.parseText(n);break;case"guitar":t=this.parseGuitar(n);break;case"slur":t=this.parseSlur(n);break;case"wavyLine":t=this.parseWavyLine(n);break;case"bracket":t=this.parseTupletBracket(n);break;case"wedge":t=this.parseWedge(n);break;case"volta":t=this.parseVolta(n);break;case"octaveClef":t=this.parseOctaveClef(n);break;case"trill":t=this.parseTrill(n);break;case"basic":n.attributes.has("noteRange")&&(i=parseInt(n.attributes.get("noteRange")))}return t&&(t.noteRange=i),t}parseTrill(e){return new $o}parseOctaveClef(e){const t=new Ko;return e.attributes.has("octave")&&(t.octave=parseInt(e.attributes.get("octave"))),t}parseVolta(e){const t=new Go;return t.allNumbers="true"===e.attributes.get("allNumbers"),e.attributes.has("firstNumber")&&(t.firstNumber=parseInt(e.attributes.get("firstNumber"))),e.attributes.has("lastNumber")&&(t.lastNumber=parseInt(e.attributes.get("lastNumber"))),t}parseWedge(e){const t=new Uo;return t.decrescendo="true"===e.attributes.get("decrescendo"),t}parseTupletBracket(e){const t=new jo;return e.attributes.has("number")&&(t.number=parseInt(e.attributes.get("number"))),t}parseWavyLine(e){return new Ho}parseSlur(e){return new zo}parseGuitar(e){const t=new Vo,i=e.innerText.trim();for(let e=0;e<i.length;e++)"/"===i.charAt(e)?t.chord.strings.push(0):t.chord.strings.push(parseInt(i.charAt(e)));return t}parseText(e){const t=new Wo;switch(e.attributes.has("x")&&(t.x=parseFloat(e.attributes.get("x"))),e.attributes.has("x")&&(t.y=parseFloat(e.attributes.get("y"))),e.getAttribute("align")){case"left":t.align=x.Left;break;case"center":t.align=x.Center;break;case"right":t.align=x.Right}switch(e.getAttribute("frame")){case"rectangle":t.frame=te.Rectangle;break;case"ellipse":t.frame=te.Ellipse;break;case"circle":t.frame=te.Circle;break;case"none":t.frame=te.None}if(e.firstElement){for(let i of e.childNodes)if(i.nodeType===P.Element)switch(i.localName){case"font":t.fontFace=i.getAttribute("face"),i.attributes.has("weight")&&(t.weight=parseInt(i.attributes.get("weight"))),i.attributes.has("height")&&(t.height=parseInt(i.attributes.get("height")));break;case"content":t.text=i.innerText}}else t.text=e.innerText;return t}parseInfo(e){for(let t of e.childNodes)if(t.nodeType===P.Element)switch(t.localName){case"author":this.score.tab=t.firstChild.innerText;break;case"comment":this.score.notices=t.firstChild.innerText}}}class Qo extends Ce{get name(){return"Capella"}constructor(){super()}readScore(){Oe.debug(this.name,"Loading ZIP entries");let e,t=null;if(e=new Mt(this.data).read(),Oe.debug(this.name,"Zip entries loaded"),e.length>0)for(let i of e)switch(i.fileName){case"score.xml":t=nt.toString(i.data,this.settings.importer.encoding)}else this.data.reset(),t=nt.toString(this.data.readAll(),this.settings.importer.encoding);if(!t)throw new xe("No valid capella file");Oe.debug(this.name,"Start Parsing score.xml");try{let e=new Xo;return e.parseXml(t,this.settings),Oe.debug(this.name,"score.xml parsed"),e.score}catch(e){throw new xe("Failed to parse CapXML",e)}}}class Jo{constructor(e){this._targets=new Set,this._callback=e,window.addEventListener("resize",this.onWindowResize.bind(this),!1)}observe(e){this._targets.add(e)}unobserve(e){this._targets.delete(e)}disconnect(){this._targets.clear()}onWindowResize(){const e=[];for(const t of this._targets)e.push({target:t,contentRect:void 0,borderBoxSize:void 0,contentBoxSize:[]});this._callback(e,this)}}class ea{constructor(e){this._elements=[];let t=null;const i=this._check.bind(this);this._check=()=>{t||(t=setTimeout((()=>{i(),t=null}),100))},this._callback=e,window.addEventListener("resize",this._check,!0),document.addEventListener("scroll",this._check,!0)}observe(e){this._elements.indexOf(e)>=0||(this._elements.push(e),this._check())}unobserve(e){this._elements=this._elements.filter((t=>t!=e))}_check(){const e=[];this._elements.forEach((t=>{const i=t.getBoundingClientRect();i.top+i.height>=0&&i.top<=window.innerHeight&&i.left+i.width>=0&&i.left<=window.innerWidth&&e.push({target:t,isIntersecting:!0})})),e.length&&this._callback(e,this)}}class ta{constructor(e,t){this.vertical=e,this.createLayout=t}}class ia{constructor(e,t){this.supportsWorkers=e,this.createCanvas=t}}class na{static createStyleElement(e,t){let i=e.getElementById("alphaTabStyle");if(!i){if(!t)return void Oe.error("AlphaTab","Font directory could not be detected, cannot create style element");i=e.createElement("style"),i.id="alphaTabStyle";let n=`\n            @font-face {\n                font-family: 'alphaTab';\n                 src: url('${t}Bravura.eot');\n                 src: url('${t}Bravura.eot?#iefix') format('embedded-opentype')\n                      , url('${t}Bravura.woff') format('woff')\n                      , url('${t}Bravura.otf') format('opentype')\n                      , url('${t}Bravura.svg#Bravura') format('svg');\n                 font-weight: normal;\n                 font-style: normal;\n            }\n            .at-surface * {\n                cursor: default;\n                vertical-align: top;\n                overflow: visible;\n            }\n            .at-surface-svg text {\n                dominant-baseline: central;\n            }             \n            .at {\n                 font-family: 'alphaTab';\n                 speak: none;\n                 font-style: normal;\n                 font-weight: normal;\n                 font-variant: normal;\n                 text-transform: none;\n                 line-height: 1;\n                 line-height: 1;\n                 -webkit-font-smoothing: antialiased;\n                 -moz-osx-font-smoothing: grayscale;\n                 font-size: ${na.MusicFontSize}px;\n                 overflow: visible !important;\n            }`;i.innerHTML=n,e.getElementsByTagName("head").item(0).appendChild(i),na.bravuraFontChecker.checkForFontAvailability()}}static get globalThis(){if(void 0===na._globalThis){try{na._globalThis=globalThis}catch(e){}void 0===na._globalThis&&(na._globalThis=self),void 0===na._globalThis&&(na._globalThis=window),void 0===na._globalThis&&(na._globalThis=Function("return this")())}return this._globalThis}static get isRunningInWorker(){return"WorkerGlobalScope"in na.globalThis}static throttle(e,t){let i=0;return()=>{window.clearTimeout(i),i=window.setTimeout(e,t)}}static detectScriptFile(){return na.isRunningInWorker?null:document.currentScript.src}static registerJQueryPlugin(){if(!na.isRunningInWorker&&na.globalThis&&"jQuery"in na.globalThis){let e=na.globalThis.jQuery,t=new Yn;e.fn.alphaTab=function(e){const i=Array.prototype.slice.call(arguments,1);return 1===this.length?t.exec(this[0],e,i):this.each(((n,r)=>{t.exec(r,e,i)}))},e.alphaTab={restore:Yn.restore},e.fn.alphaTab.fn=t}}static createScoreRenderer(e){return new mn(e)}static getRenderEngineFactory(e){return e.core.engine&&na.renderEngines.has(e.core.engine)?na.renderEngines.get(e.core.engine):na.renderEngines.get("default")}static getLayoutEngineFactory(t){return t.display.layoutMode&&na.layoutEngines.has(t.display.layoutMode)?na.layoutEngines.get(t.display.layoutMode):na.layoutEngines.get(e.LayoutMode.Page)}static buildImporters(){return[new rt,new Rt,new Ot,new Bt,new Qo,new tt]}static createDefaultRenderEngines(){const e=new Map;return e.set("svg",new ia(!0,(()=>new Qn))),e.set("default",e.get("svg")),na.createPlatformSpecificRenderEngines(e),e}static createPlatformSpecificRenderEngines(e){e.set("html5",new ia(!1,(()=>new vn)))}static createDefaultStaveProfiles(){const t=new Map;t.set(e.StaveProfile.ScoreTab,[new _r("score-effects",[new is,new as,new jr,new ns,new Er,new Pr,new ls,new ss,new Gr(!0),new cs,new Xr,new hs,new Jr,new Bo,new Cr]),new wo,new _r("tab-effects",[new Nr,new Gr(!1),new Or,new Hr,new ss,new cs,new Xr,new hs,new Jr,new es,new Ir,new Wr(b.Natural),new Wr(b.Artificial),new Wr(b.Pinch),new Wr(b.Tap),new Wr(b.Semi),new Wr(b.Feedback),new Vr,new kr,new Rr,new Kr,new Zr,new $r,new Bo]),new Po(!1,!1,!1)]),t.set(e.StaveProfile.Score,[new _r("score-effects",[new is,new as,new jr,new ns,new Er,new Pr,new ls,new ss,new Gr(!0),new cs,new Xr,new hs,new Jr,new Ir,new Vr,new Kr,new Zr,new $r,new Bo,new Cr]),new wo,new _r("score-bottom-effects",[new Nr,new Gr(!1),new Or,new Hr])]);let i=[new is,new as,new jr,new ns,new Er,new Pr,new ss,new cs,new Xr,new hs,new Jr,new es,new Ir,new Wr(b.Artificial),new Wr(b.Pinch),new Wr(b.Tap),new Wr(b.Semi),new Wr(b.Feedback),new Vr,new kr,new Rr,new Kr,new Zr,new $r,new Bo,new Cr];return t.set(e.StaveProfile.Tab,[new _r("tab-effects",i),new Po(!0,!0,!0),new _r("tab-bottom-effects",[new Hr])]),t.set(e.StaveProfile.TabMixed,[new _r("tab-effects",i),new Po(!1,!1,!1),new _r("tab-bottom-effects",[new Hr])]),t}static createDefaultLayoutEngines(){const t=new Map;return t.set(e.LayoutMode.Page,new ta(!0,(e=>new Es(e)))),t.set(e.LayoutMode.Horizontal,new ta(!1,(e=>new ks(e)))),t}static platformInit(){na.registerJQueryPlugin(),na.isRunningInWorker?(bn.init(),an.init()):(na.HighDpiFactor=window.devicePixelRatio,"ResizeObserver"in globalThis||(globalThis.ResizeObserver=Jo),"IntersectionObserver"in na.globalThis||(na.globalThis.IntersectionObserver=ea))}}na.MusicFontSize=34,na.HighDpiFactor=1,na._globalThis=void 0,na.scriptFile=na.detectScriptFile(),na.bravuraFontChecker=new Hn("alphaTab"),na.renderEngines=na.createDefaultRenderEngines(),na.layoutEngines=na.createDefaultLayoutEngines(),na.staveProfiles=na.createDefaultStaveProfiles(),na.platformInit();class ra{constructor(){if(this.scriptFile=null,this.fontDirectory=null,this.file=null,this.tex=!1,this.tracks=null,this.enableLazyLoading=!0,this.engine="default",this.logLevel=e.LogLevel.Info,this.useWorkers=!0,this.includeNoteBounds=!1,!na.isRunningInWorker&&na.globalThis.ALPHATAB_ROOT?(this.scriptFile=na.globalThis.ALPHATAB_ROOT,this.scriptFile=ra.ensureFullUrl(this.scriptFile),this.scriptFile=ra.appendScriptName(this.scriptFile)):this.scriptFile=na.scriptFile,!na.isRunningInWorker&&na.globalThis.ALPHATAB_FONT)this.fontDirectory=na.globalThis.ALPHATAB_FONT,this.fontDirectory=ra.ensureFullUrl(this.fontDirectory);else if(this.fontDirectory=this.scriptFile,this.fontDirectory){let e=this.fontDirectory.lastIndexOf(String.fromCharCode(47));e>=0&&(this.fontDirectory=this.fontDirectory.substr(0,e)+"/font/")}}static ensureFullUrl(e){var t,i,n;if(!e)return"";if(!e.startsWith("http")&&!e.startsWith("https")&&!e.startsWith("file")){let r="",s=na.globalThis.location;if(r+=null===(t=s.protocol)||void 0===t?void 0:t.toString(),r+="//".toString(),s.hostname&&(r+=null===(i=s.hostname)||void 0===i?void 0:i.toString()),s.port&&(r+=":".toString(),r+=null===(n=s.port)||void 0===n?void 0:n.toString()),!e.startsWith("/")){let e=s.pathname.split("/").slice(0,-1).join("/");e.length>0&&(e.startsWith("/")||(r+="/".toString()),r+=null==e?void 0:e.toString())}return e.startsWith("/")||(r+="/".toString()),r+=null==e?void 0:e.toString(),r}return e}static appendScriptName(e){return e&&!e.endsWith(".js")&&(e.endsWith("/")||(e+="/"),e+="alphaTab.js"),e}}class sa{constructor(e,t){this.loaded=e,this.total=t}}class oa{}oa.version="1.2.1",oa.date="2021-04-02T17:52:30.858Z";class aa{init(e,t){this.data=e,this.settings=t}export(e,t=null){const i=at.withCapacity(1024);return this.init(i,null!=t?t:new Mi),this.writeScore(e),i.toArray()}}!function(e){e[e.SteelGuitar=1]="SteelGuitar",e[e.AcousticGuitar=2]="AcousticGuitar",e[e.TwelveStringGuitar=3]="TwelveStringGuitar",e[e.ElectricGuitar=4]="ElectricGuitar",e[e.Bass=5]="Bass",e[e.ClassicalGuitar=23]="ClassicalGuitar",e[e.UprightBass=6]="UprightBass",e[e.Ukulele=7]="Ukulele",e[e.Banjo=8]="Banjo",e[e.Mandolin=9]="Mandolin",e[e.Piano=10]="Piano",e[e.Synth=12]="Synth",e[e.Strings=11]="Strings",e[e.Brass=13]="Brass",e[e.Reed=14]="Reed",e[e.Woodwind=15]="Woodwind",e[e.Vocal=16]="Vocal",e[e.PitchedIdiophone=17]="PitchedIdiophone",e[e.Fx=21]="Fx",e[e.PercussionKit=18]="PercussionKit",e[e.Idiophone=19]="Idiophone",e[e.Membraphone=20]="Membraphone"}(ie||(ie={}));class la{constructor(e,t,i=null){if(this.icon=ie.Piano,this.icon=e,this.instrumentSetName=t,i)this.instrumentSetType=i;else{const e=t.split(" ");e[0]=e[0].substr(0,1).toLowerCase()+e[0].substr(1),this.instrumentSetType=e.join("")}}}class ca{constructor(){this._rhythmIdLookup=new Map}writeXml(e){const t=new gt;return this._rhythmIdLookup=new Map,this.writeDom(t,e),t.toString("",!0)}writeDom(e,t){const i=e.addElement("GPIF");i.addElement("GPVersion").innerText="7";const n=i.addElement("GPRevision");n.innerText="7",n.attributes.set("required","12021"),n.attributes.set("recommended","12023"),n.innerText="12025",i.addElement("Encoding").addElement("EncodingDescription").innerText="GP7",this.writeScoreNode(i,t),this.writeMasterTrackNode(i,t),this.writeAudioTracksNode(i,t),this.writeTracksNode(i,t),this.writeMasterBarsNode(i,t);const r=i.addElement("Bars"),s=i.addElement("Voices"),o=i.addElement("Beats"),a=i.addElement("Notes"),l=i.addElement("Rhythms");for(const e of t.tracks)for(const t of e.staves)for(const e of t.bars){this.writeBarNode(r,e);for(const t of e.voices){this.writeVoiceNode(s,t);for(const e of t.beats){this.writeBeatNode(o,e,l);for(const t of e.notes)this.writeNoteNode(a,t)}}}}writeNoteNode(e,t){const n=e.addElement("Note");n.attributes.set("id",t.id.toString()),this.writeNoteProperties(n,t),t.isGhost&&(n.addElement("AntiAccent").innerText="normal"),t.isLetRing&&n.addElement("LetRing"),t.isTrill&&(n.addElement("Trill").innerText=t.trillValue.toString());let r=0;switch(t.isStaccato&&(r|=1),t.accentuated){case s.Normal:r|=8;break;case s.Heavy:r|=4}if(r>0&&(n.addElement("Accent").innerText=r.toString()),t.isTieOrigin||t.isTieDestination){const e=n.addElement("Tie");e.attributes.set("origin",t.isTieOrigin?"true":"false"),e.attributes.set("destination",t.isTieDestination?"true":"false")}switch(t.vibrato){case w.Slight:n.addElement("Vibrato").innerText="Slight";break;case w.Wide:n.addElement("Vibrato").innerText="Wide"}if(t.isFingering){switch(t.leftHandFinger){case i.Thumb:n.addElement("LeftFingering").innerText="P";break;case i.IndexFinger:n.addElement("LeftFingering").innerText="I";break;case i.MiddleFinger:n.addElement("LeftFingering").innerText="M";break;case i.AnnularFinger:n.addElement("LeftFingering").innerText="A";break;case i.LittleFinger:n.addElement("LeftFingering").innerText="C"}switch(t.rightHandFinger){case i.Thumb:n.addElement("RightFingering").innerText="P";break;case i.IndexFinger:n.addElement("RightFingering").innerText="I";break;case i.MiddleFinger:n.addElement("RightFingering").innerText="M";break;case i.AnnularFinger:n.addElement("RightFingering").innerText="A";break;case i.LittleFinger:n.addElement("RightFingering").innerText="C"}}t.percussionArticulation>=0?n.addElement("InstrumentArticulation").innerText=t.percussionArticulation.toString():n.addElement("InstrumentArticulation").innerText="0"}writeNoteProperties(e,t){const i=e.addElement("Properties");if(this.writeConcertPitch(i,t),this.writeTransposedPitch(i,t),t.isStringed&&(this.writeSimplePropertyNode(i,"String","String",(t.string-1).toString()),this.writeSimplePropertyNode(i,"Fret","Fret",t.fret.toString()),this.writeSimplePropertyNode(i,"Midi","Number",t.realValue.toString())),t.isPiano&&(this.writeSimplePropertyNode(i,"Octave","Number",t.octave.toString()),this.writeSimplePropertyNode(i,"Tone","Step",t.tone.toString()),this.writeSimplePropertyNode(i,"Midi","Number",t.realValue.toString())),t.beat.tap&&this.writeSimplePropertyNode(i,"Tapped","Enable",null),t.harmonicType!==b.None){switch(t.harmonicType){case b.Natural:this.writeSimplePropertyNode(i,"HarmonicType","HType","Natural");break;case b.Artificial:this.writeSimplePropertyNode(i,"HarmonicType","HType","Artificial");break;case b.Pinch:this.writeSimplePropertyNode(i,"HarmonicType","HType","Pinch");break;case b.Tap:this.writeSimplePropertyNode(i,"HarmonicType","HType","Tap");break;case b.Semi:this.writeSimplePropertyNode(i,"HarmonicType","HType","Semi");break;case b.Feedback:this.writeSimplePropertyNode(i,"HarmonicType","HType","Feedback")}0!==t.harmonicValue&&this.writeSimplePropertyNode(i,"HarmonicFret","HFret",t.harmonicValue.toString())}t.isDead&&this.writeSimplePropertyNode(i,"Muted","Enable",null),t.isPalmMute&&this.writeSimplePropertyNode(i,"PalmMuted","Enable",null),t.hasBend&&this.writeBend(i,t),t.isHammerPullOrigin&&this.writeSimplePropertyNode(i,"HopoOrigin","Enable",null),t.isHammerPullDestination&&this.writeSimplePropertyNode(i,"HopoDestination","Enable",null),t.isLeftHandTapped&&this.writeSimplePropertyNode(i,"LeftHandTapped","Enable",null);let n=0;switch(t.slideInType){case y.IntoFromAbove:n|=32;break;case y.IntoFromBelow:n|=16}switch(t.slideOutType){case _.Shift:n|=1;break;case _.Legato:n|=2;break;case _.OutDown:n|=4;break;case _.OutUp:n|=8;break;case _.PickSlideDown:n|=64;break;case _.PickSlideUp:n|=128}n>0&&this.writeSimplePropertyNode(i,"Slide","Flags",n.toString())}writeTransposedPitch(e,t){t.isPercussion?this.writePitch(e,"ConcertPitch","C","-1",""):this.writePitchForValue(e,"TransposedPitch",t.displayValueWithoutBend,t.accidentalMode)}writeConcertPitch(e,t){t.isPercussion?this.writePitch(e,"ConcertPitch","C","-1",""):this.writePitchForValue(e,"ConcertPitch",t.realValueWithoutHarmonic,t.accidentalMode)}writePitchForValue(e,t,i,n){let r=0,s=0,o="",a="";const l=()=>{r=i%12,s=i/12|0,o=Ye.defaultSteps[r],a=Ye.defaultAccidentals[r]};switch(l(),n){case v.Default:break;case v.ForceNone:case v.ForceNatural:a="";break;case v.ForceSharp:a="#";break;case v.ForceDoubleSharp:"#"===a&&(i-=2,l()),a="x";break;case v.ForceFlat:"#"===a&&(i+=1,l()),a="b";break;case v.ForceDoubleFlat:"#"===a&&(i+=2,l()),a="bb"}this.writePitch(e,t,o,s.toString(),a)}writePitch(e,t,i,n,r){const s=e.addElement("Property");s.attributes.set("name",t);const o=s.addElement("Pitch");o.addElement("Step").innerText=i,o.addElement("Accidental").innerText=r,o.addElement("Octave").innerText=n}writeBend(e,t){t.hasBend&&t.bendPoints.length<=4&&this.writeStandardBend(e,t.bendPoints)}writeStandardBend(e,t){this.writeSimplePropertyNode(e,"Bended","Enable",null);var i,n,r=t[0],s=t[t.length-1];switch(t.length){case 4:i=t[1],n=t[2];break;case 3:i=t[1],n=t[1];break;case 2:default:n=i=new Le((r.offset+s.offset)/2,(r.value+s.value)/2)}this.writeSimplePropertyNode(e,"BendDestinationOffset","Float",this.toBendOffset(s.offset).toString()),this.writeSimplePropertyNode(e,"BendDestinationValue","Float",this.toBendValue(s.value).toString()),this.writeSimplePropertyNode(e,"BendMiddleOffset1","Float",this.toBendOffset(i.offset).toString()),this.writeSimplePropertyNode(e,"BendMiddleOffset2","Float",this.toBendOffset(n.offset).toString()),this.writeSimplePropertyNode(e,"BendMiddleValue","Float",this.toBendValue(i.value).toString()),this.writeSimplePropertyNode(e,"BendOriginOffset","Float",this.toBendOffset(r.offset).toString()),this.writeSimplePropertyNode(e,"BendOriginValue","Float",this.toBendValue(r.value).toString())}toBendValue(e){return 25*e}toBendOffset(e){return e/Le.MaxPosition*100}writeBeatNode(e,t,i){const n=e.addElement("Beat");if(n.attributes.set("id",t.id.toString()),n.addElement("Dynamic").innerText=g[t.dynamics],t.fadeIn&&(n.addElement("Fadding").innerText="FadeIn"),t.isTremolo)switch(t.tremoloSpeed){case p.Eighth:n.addElement("Tremolo").innerText="1/2";break;case p.Sixteenth:n.addElement("Tremolo").innerText="1/4";break;case p.ThirtySecond:n.addElement("Tremolo").innerText="1/8"}switch(t.hasChord&&n.addElement("Chord").setCData(t.chordId),t.crescendo!==f.None&&(n.addElement("Hairpin").innerText=f[t.crescendo]),t.brushType){case d.ArpeggioUp:n.addElement("Arpeggio").innerText="Up";break;case d.ArpeggioDown:n.addElement("Arpeggio").innerText="Down"}switch(t.text&&n.addElement("FreeText").setCData(t.text),t.graceType){case m.OnBeat:case m.BeforeBeat:n.addElement("GraceNotes").innerText=m[t.graceType]}if(t.ottava!==l.Regular&&(n.addElement("Ottavia").innerText=l[t.ottava].substr(1)),t.hasWhammyBar&&this.writeWhammyNode(n,t),t.isLegatoOrigin||t.isLegatoDestination){const e=n.addElement("Legato");e.attributes.set("origin",t.isLegatoOrigin?"true":"false"),e.attributes.set("destination",t.isLegatoDestination?"true":"false")}if(this.writeRhythm(n,t,i),null!==t.preferredBeamDirection)switch(t.preferredBeamDirection){case B.Up:n.addElement("TransposedPitchStemOrientation").innerText="Upward";break;case B.Down:n.addElement("TransposedPitchStemOrientation").innerText="Downward"}n.addElement("ConcertPitchStemOrientation").innerText="Undefined",t.isRest||(n.addElement("Notes").innerText=t.notes.map((e=>e.id)).join(" ")),this.writeBeatProperties(n,t),this.writeBeatXProperties(n,t),t.lyrics&&t.lyrics.length>0&&this.writeBeatLyrics(n,t.lyrics)}writeBeatLyrics(e,t){const i=e.addElement("Lyrics");for(const e of t)i.addElement("Line").setCData(e)}writeBeatXProperties(e,t){const i=e.addElement("XProperties");t.brushDuration>0&&this.writeSimpleXPropertyNode(i,"687935489","Int",t.brushDuration.toString())}writeBeatProperties(e,t){const i=e.addElement("Properties");switch(t.brushType){case d.BrushUp:this.writeSimplePropertyNode(i,"Brush","Direction","Up");break;case d.BrushDown:this.writeSimplePropertyNode(i,"Brush","Direction","Down")}switch(t.pickStroke){case S.Up:this.writeSimplePropertyNode(i,"PickStroke","Direction","Up");break;case S.Down:this.writeSimplePropertyNode(i,"PickStroke","Direction","Down")}switch(t.slap&&this.writeSimplePropertyNode(i,"Slapped","Enable",null),t.pop&&this.writeSimplePropertyNode(i,"Popped","Enable",null),t.vibrato){case w.Wide:this.writeSimplePropertyNode(i,"VibratoWTremBar","Strength","Wide");break;case w.Slight:this.writeSimplePropertyNode(i,"VibratoWTremBar","Strength","Slight")}}writeRhythm(e,t,i){const n=`${t.duration}_${t.dots}_${t.tupletNumerator}_${t.tupletDenominator}';`;let r;if(this._rhythmIdLookup.has(n))r=this._rhythmIdLookup.get(n);else{r=this._rhythmIdLookup.size.toString(),this._rhythmIdLookup.set(n,r);const e=i.addElement("Rhythm");if(e.attributes.set("id",r),t.hasTuplet){const i=e.addElement("PrimaryTuplet");i.attributes.set("num",t.tupletNumerator.toString()),i.attributes.set("den",t.tupletDenominator.toString())}t.dots>0&&e.addElement("AugmentationDot").attributes.set("count",t.dots.toString());let s="Quarter";switch(t.duration){case p.QuadrupleWhole:s="Long";break;case p.DoubleWhole:s="DoubleWhole";break;case p.Whole:s="Whole";break;case p.Half:s="Half";break;case p.Quarter:s="Quarter";break;case p.Eighth:s="Eighth";break;case p.Sixteenth:s="16th";break;case p.ThirtySecond:s="32nd";break;case p.SixtyFourth:s="64th";break;case p.OneHundredTwentyEighth:s="128th";break;case p.TwoHundredFiftySixth:s="256th"}e.addElement("NoteValue").innerText=s}e.addElement("Rhythm").attributes.set("ref",r)}writeWhammyNode(e,t){t.hasWhammyBar&&t.whammyBarPoints.length<=4&&this.writeStandardWhammy(e,t.whammyBarPoints)}writeStandardWhammy(e,t){const i=e.addElement("Whammy");var n,r,s=t[0],o=t[t.length-1];switch(t.length){case 4:n=t[1],r=t[2];break;case 3:n=t[1],r=t[1];break;case 2:default:r=n=new Le((s.offset+o.offset)/2,(s.value+o.value)/2)}i.attributes.set("destinationOffset",this.toBendOffset(o.offset).toString()),i.attributes.set("destinationValue",this.toBendValue(o.value).toString()),i.attributes.set("middleOffset1",this.toBendOffset(n.offset).toString()),i.attributes.set("middleOffset2",this.toBendOffset(r.offset).toString()),i.attributes.set("middleValue",this.toBendValue(n.value).toString()),i.attributes.set("originOffset",this.toBendOffset(s.offset).toString()),i.attributes.set("originValue",this.toBendValue(s.value).toString())}writeScoreNode(e,t){const i=e.addElement("Score");i.addElement("Title").setCData(t.title),i.addElement("SubTitle").setCData(t.subTitle),i.addElement("Artist").setCData(t.artist),i.addElement("Album").setCData(t.album),i.addElement("Words").setCData(t.words),i.addElement("Music").setCData(t.music),i.addElement("WordsAndMusic").setCData(t.words===t.music?t.words:""),i.addElement("Copyright").setCData(t.copyright),i.addElement("Tabber").setCData(t.tab),i.addElement("Instructions").setCData(t.instructions),i.addElement("Notices").setCData(t.notices),i.addElement("FirstPageHeader").setCData(""),i.addElement("FirstPageFooter").setCData(""),i.addElement("PageHeader").setCData(""),i.addElement("PageFooter").setCData(""),i.addElement("ScoreSystemsDefaultLayout").setCData("4"),i.addElement("ScoreSystemsLayout").setCData("4"),i.addElement("ScoreZoomPolicy").innerText="Value",i.addElement("ScoreZoom").innerText="1",i.addElement("MultiVoice").innerText="1>"}writeMasterTrackNode(e,t){const i=e.addElement("MasterTrack");i.addElement("Tracks").innerText=t.tracks.map((e=>e.index)).join(" ");const n=i.addElement("Automations");t.masterBars.length>0&&t.masterBars[0].isAnacrusis&&i.addElement("Anacrusis");const r=n.addElement("Automation");r.addElement("Type").innerText="Tempo",r.addElement("Linear").innerText="false",r.addElement("Bar").innerText="0",r.addElement("Position").innerText="0",r.addElement("Visible").innerText="true",r.addElement("Value").innerText=`${t.tempo} 2`,t.tempoLabel&&(r.addElement("Text").innerText=t.tempoLabel);for(const e of t.masterBars)if(e.index>0&&e.tempoAutomation){const t=n.addElement("Automation");t.addElement("Type").innerText="Tempo",t.addElement("Linear").innerText=e.tempoAutomation.isLinear?"true":"false",t.addElement("Bar").innerText=e.index.toString(),t.addElement("Position").innerText=e.tempoAutomation.ratioPosition.toString(),t.addElement("Visible").innerText="true",t.addElement("Value").innerText=`${e.tempoAutomation.value} 2`,e.tempoAutomation.text&&(t.addElement("Text").innerText=e.tempoAutomation.text)}}writeAudioTracksNode(e,t){e.addElement("AudioTracks")}writeTracksNode(e,t){const i=e.addElement("Tracks");for(const e of t.tracks)this.writeTrackNode(i,e)}writeTrackNode(e,t){const i=e.addElement("Track");i.attributes.set("id",t.index.toString()),i.addElement("Name").setCData(t.name),i.addElement("ShortName").setCData(t.shortName),i.addElement("Color").innerText=`${t.color.r} ${t.color.g} ${t.color.b}`,i.addElement("SystemsDefautLayout").innerText="3",i.addElement("SystemsLayout").innerText="1",i.addElement("AutoBrush"),i.addElement("PalmMute").innerText="0",i.addElement("PlayingStyle").innerText=de.isGuitar(t.playbackInfo.program)?"StringedPick":"Default",i.addElement("UseOneChannelPerString"),i.addElement("IconId").innerText=ca.getIconId(t.playbackInfo).toString(),this.writeInstrumentSetNode(i,t),this.writeTransposeNode(i,t),this.writeRseNode(i,t),i.addElement("ForcedSound").innerText="-1",this.writeMidiConnectionNode(i,t),t.playbackInfo.isSolo?i.addElement("PlaybackState").innerText="Solo":t.playbackInfo.isMute?i.addElement("PlaybackState").innerText="Mute":i.addElement("PlaybackState").innerText="Default",i.addElement("AudioEngineState").innerText="MIDI",this.writeLyricsNode(i,t),this.writeStavesNode(i,t),this.writeSoundsAndAutomations(i,t)}static getIconId(e){return 9===e.primaryChannel?ca.DrumKitProgramInfo.icon:ca.MidiProgramInfoLookup.has(e.program)?ca.MidiProgramInfoLookup.get(e.program).icon:ie.SteelGuitar}writeSoundAndAutomation(e,t,i,n,r,s,o,a=0){const l=e.addElement("Sound");l.addElement("Name").setCData(i),l.addElement("Label").setCData(i),l.addElement("Path").setCData(n),l.addElement("Role").setCData(r);const c=l.addElement("MIDI");c.addElement("LSB").innerText="0",c.addElement("MSB").innerText="0",c.addElement("Program").innerText=o.toString();const h=t.addElement("Automation");h.addElement("Type").innerText="Sound",h.addElement("Linear").innerText="false",h.addElement("Bar").innerText=s.toString(),h.addElement("Position").innerText=a.toString(),h.addElement("Visible").innerText="true",h.addElement("Value").setCData(`${n};${i};${r}`)}writeSoundsAndAutomations(e,t){const i=e.addElement("Sounds"),n=e.addElement("Automations");if(t.staves.length>0&&t.staves[0].bars.length>0){const e=`Track_${t.index}_Initial`,r=`Midi/${t.playbackInfo.program}`,s="Factory";let a=!1;for(const l of t.staves)for(const c of l.bars)for(const l of c.voices)for(const h of l.beats){const l=h.getAutomation(o.Instrument),u=0===c.index&&0===h.index;if(l){const o=u?e:`ProgramChange_${h.id}`,d=u?r:`Midi/${l.value}`,f=u?s:"User";u||a||(this.writeSoundAndAutomation(i,n,e,r,s,t.staves[0].bars[0].index,t.playbackInfo.program),a=!0),this.writeSoundAndAutomation(i,n,o,d,f,c.index,l.value,l.ratioPosition),u&&(a=!0)}}}}writeMidiConnectionNode(e,t){const i=e.addElement("MidiConnection");i.addElement("Port").innerText=t.playbackInfo.port.toString(),i.addElement("PrimaryChannel").innerText=t.playbackInfo.primaryChannel.toString(),i.addElement("SecondaryChannel").innerText=t.playbackInfo.secondaryChannel.toString(),i.addElement("ForeOneChannelPerString").innerText="false"}writeRseNode(e,t){const i=e.addElement("RSE").addElement("ChannelStrip");i.attributes.set("version","E56"),i.addElement("Parameters").innerText=`0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1 0.5 ${t.playbackInfo.balance/16} ${t.playbackInfo.volume/16} 0.5 0.5 0.5`}writeStavesNode(e,t){const i=e.addElement("Staves");for(const e of t.staves)this.writeStaffNode(i,e)}writeStaffNode(e,t){const i=e.addElement("Staff").addElement("Properties");if(this.writeSimplePropertyNode(i,"CapoFret","Fret",t.capo.toString()),this.writeSimplePropertyNode(i,"FretCount","Fret","24"),t.tuning.length>0){const e=i.addElement("Property");switch(e.attributes.set("name","Tuning"),e.addElement("Pitches").innerText=t.tuning.slice().reverse().join(" "),e.addElement("Label").setCData(t.tuningName),e.addElement("LabelVisible").innerText=t.tuningName?"true":"false",e.addElement("Flat"),t.tuning.length){case 3:e.addElement("Instrument").innerText="Shamisen";break;case 4:105===t.track.playbackInfo.program?e.addElement("Instrument").innerText="Banjo":42==t.track.playbackInfo.program?e.addElement("Instrument").innerText="Cello":43==t.track.playbackInfo.program?e.addElement("Instrument").innerText="Contrabass":40==t.track.playbackInfo.program?e.addElement("Instrument").innerText="Violin":41==t.track.playbackInfo.program?e.addElement("Instrument").innerText="Viola":e.addElement("Instrument").innerText="Bass";break;case 5:105===t.track.playbackInfo.program?e.addElement("Instrument").innerText="Banjo":e.addElement("Instrument").innerText="Bass";break;case 6:105===t.track.playbackInfo.program?e.addElement("Instrument").innerText="Banjo":t.track.playbackInfo.program<=39?e.addElement("Instrument").innerText="Bass":e.addElement("Instrument").innerText="Guitar";break;case 7:t.track.playbackInfo.program<=39?e.addElement("Instrument").innerText="Bass":e.addElement("Instrument").innerText="Guitar";break;default:e.addElement("Instrument").innerText="Guitar"}}this.writeSimplePropertyNode(i,"PartialCapoFret","Fret","0"),this.writeSimplePropertyNode(i,"PartialCapoStringFlags","Bitset",t.tuning.map((e=>"0")).join("")),this.writeSimplePropertyNode(i,"TuningFlat","Enable",null),this.writeDiagramCollection(i,t,"DiagramCollection"),this.writeDiagramCollection(i,t,"DiagramWorkingSet")}writeDiagramCollection(e,t,n){const r=e.addElement("Property");r.attributes.set("name",n);const s=r.addElement("Items");for(const[e,n]of t.chords){const t=s.addElement("Item");t.attributes.set("id",e),t.attributes.set("name",n.name);const r=t.addElement("Diagram");r.attributes.set("stringCount",n.strings.length.toString()),r.attributes.set("fretCount","5"),r.attributes.set("baseFret",(n.firstFret-1).toString()),r.attributes.set("barStates",n.strings.map((e=>"1")).join(" "));const o=[],a=new Map;for(let e=0;e<n.strings.length;e++){let t=n.strings[e];if(-1!==t){const i=r.addElement("Fret"),s=n.strings.length-1-e;i.attributes.set("string",s.toString()),i.attributes.set("fret",(t-n.firstFret+1).toString()),a.has(t)||(a.set(t,[]),o.push(t)),a.get(t).push(s)}}o.sort();const l=r.addElement("Fingering");if(n.barreFrets.length>0){const e=[i.LittleFinger,i.AnnularFinger,i.MiddleFinger,i.IndexFinger];for(const t of o){const r=a.get(t);if(r.length>1&&n.barreFrets.indexOf(t)>=0){const s=e.length>0?e.pop():i.IndexFinger;for(const e of r){const r=l.addElement("Position");switch(s){case i.LittleFinger:r.attributes.set("finger","Pinky");break;case i.AnnularFinger:r.attributes.set("finger","Ring");break;case i.MiddleFinger:r.attributes.set("finger","Middle");break;case i.IndexFinger:r.attributes.set("finger","Index")}r.attributes.set("fret",(t-n.firstFret+1).toString()),r.attributes.set("string",e.toString())}}}}const c=r.addElement("Property");c.attributes.set("name","ShowName"),c.attributes.set("type","bool"),c.attributes.set("value",n.showName?"true":"false");const h=r.addElement("Property");h.attributes.set("name","ShowDiagram"),h.attributes.set("type","bool"),h.attributes.set("value",n.showDiagram?"true":"false");const u=r.addElement("Property");u.attributes.set("name","ShowFingering"),u.attributes.set("type","bool"),u.attributes.set("value",n.showFingering?"true":"false");const d=r.addElement("Chord"),f=d.addElement("KeyNote");f.attributes.set("step","C"),f.attributes.set("accidental","Natural");const p=d.addElement("BassNote");p.attributes.set("step","C"),p.attributes.set("accidental","Natural");const g=d.addElement("Degree");g.attributes.set("interval","Third"),g.attributes.set("alteration","Major"),g.attributes.set("omitted","false");const m=d.addElement("Degree");m.attributes.set("interval","Fifth"),m.attributes.set("alteration","Perfect"),m.attributes.set("omitted","false")}}writeSimplePropertyNode(e,t,i,n){const r=e.addElement("Property");r.attributes.set("name",t);const s=r.addElement(i);return null!==n&&(s.innerText=n),r}writeSimpleXPropertyNode(e,t,i,n){const r=e.addElement("XProperty");r.attributes.set("id",t);const s=r.addElement(i);return null!==n&&(s.innerText=n),r}writeLyricsNode(e,t){const i=e.addElement("Lyrics");i.attributes.set("dispatched","true");let n=[];for(const e of t.staves[0].bars)for(const t of e.voices)if(!t.isEmpty)for(const i of t.beats)if(i.lyrics)for(let t=0;t<i.lyrics.length;t++){for(;t>=n.length;){const t=new je;t.startBar=e.index,t.text="[Empty]",n.push(t)}const r=n[t];r.text="[Empty]"==r.text?i.lyrics[t]:r.text+" "+i.lyrics[t].split(" ").join("+")}for(let e=0;e<n.length;e++){const t=i.addElement("Line");t.addElement("Text").setCData(n[e].text),t.addElement("Offset").innerText=n[e].startBar.toString()}}writeTransposeNode(e,t){const i=e.addElement("Transpose"),n=Math.floor(t.staves[0].displayTranspositionPitch/12),r=t.staves[0].displayTranspositionPitch-12*n;i.addElement("Chromatic").innerText=r.toString(),i.addElement("Octave").innerText=n.toString()}writeInstrumentSetNode(e,t){const i=e.addElement("InstrumentSet"),n=t.staves[0];if(i.addElement("LineCount").innerText=n.standardNotationLineCount.toString(),t.percussionArticulations.length>0||n.isPercussion){const e=t.percussionArticulations.length>0?t.percussionArticulations:Array.from(Ie.instrumentArticulations.values());i.addElement("Name").innerText=ca.DrumKitProgramInfo.instrumentSetName,i.addElement("Type").innerText=ca.DrumKitProgramInfo.instrumentSetType;let n="",s=null,o=new Map;const a=i.addElement("Elements");for(const t of e){{var r=a.addElement("Element");let e=t.elementType;if(o.has(e)){const t=o.get(e);e+=" "+t,o.set(e,t+1)}else o.set(e,1);n=e,r.addElement("Name").innerText=e,r.addElement("Type").innerText=t.elementType,s=r.addElement("Articulations")}const e=s.addElement("Articulation");switch(e.addElement("Name").innerText=n+" "+s.childNodes.length,e.addElement("StaffLine").innerText=t.staffLine.toString(),e.addElement("Noteheads").innerText=[this.mapMusicSymbol(t.noteHeadDefault),this.mapMusicSymbol(t.noteHeadHalf),this.mapMusicSymbol(t.noteHeadWhole)].join(" "),t.techniqueSymbolPlacement){case k.Top:e.addElement("TechniquePlacement").innerText="below";break;case k.Middle:e.addElement("TechniquePlacement").innerText="inside";break;case k.Bottom:e.addElement("TechniquePlacement").innerText="above"}e.addElement("TechniqueSymbol").innerText=this.mapMusicSymbol(t.techniqueSymbol),e.addElement("InputMidiNumbers").innerText="",e.addElement("OutputMidiNumber").innerText=t.outputMidiNumber.toString()}}else{const e=ca.MidiProgramInfoLookup.has(t.playbackInfo.program)?ca.MidiProgramInfoLookup.get(t.playbackInfo.program):ca.MidiProgramInfoLookup.get(0);i.addElement("Name").innerText=e.instrumentSetName,i.addElement("Type").innerText=e.instrumentSetType;const n=i.addElement("Elements").addElement("Element");n.addElement("Pitched").innerText="Pitched",n.addElement("Type").innerText="pitched",n.addElement("SoundbankName").innerText="";const r=n.addElement("Articulations").addElement("Articulation");r.addElement("Name").innerText="",r.addElement("StaffLine").innerText="0",r.addElement("Noteheads").innerText="noteheadBlack noteheadHalf noteheadWhole",r.addElement("TechniquePlacement").innerText="outside",r.addElement("TechniqueSymbol").innerText="",r.addElement("InputMidiNumbers").innerText="",r.addElement("OutputRSESound").innerText="",r.addElement("OutputMidiNumber").innerText="0"}}mapMusicSymbol(e){if(e===C.None)return"";let t=C[e];return t.substring(0,1).toLowerCase()+t.substring(1)}writeMasterBarsNode(e,t){const i=e.addElement("MasterBars");for(const e of t.masterBars)this.writeMasterBarNode(i,e)}writeMasterBarNode(e,t){const i=e.addElement("MasterBar"),n=i.addElement("Key");n.addElement("AccidentalCount").innerText=t.keySignature.toString(),n.addElement("Mode").innerText=M[t.keySignatureType],n.addElement("Sharps").innerText="Sharps",i.addElement("Time").innerText=`${t.timeSignatureNumerator}/${t.timeSignatureDenominator}`;let r=[];for(const e of t.score.tracks)for(const i of e.staves)r.push(i.bars[t.index].id.toString());if(i.addElement("Bars").innerText=r.join(" "),t.isDoubleBar&&i.addElement("DoubleBar"),t.isSectionStart){const e=i.addElement("Section");e.addElement("Letter").setCData(t.section.marker),e.addElement("Text").setCData(t.section.text)}if(t.isRepeatStart||t.isRepeatEnd){const e=i.addElement("Repeat");e.attributes.set("start",t.isRepeatStart?"true":"false"),e.attributes.set("end",t.isRepeatEnd?"true":"false"),t.isRepeatEnd&&e.attributes.set("count",t.repeatCount.toString())}if(t.alternateEndings>0){let e=t.alternateEndings;const n=[];let r=0;for(;e>0;)1==(e>>r&1)&&(n.push(r+1),e&=~(1<<r)),r++;i.addElement("AlternateEndings").innerText=n.join(" ")}t.tripletFeel!==O.NoTripletFeel&&(i.addElement("TripletFeel").innerText=O[t.tripletFeel]),this.writeFermatas(i,t)}writeFermatas(e,t){if(0!==t.fermata.size&&t.fermata.size>0){const i=e.addElement("Fermatas");for(const[e,n]of t.fermata)this.writeFermata(i,e,n)}}writeFermata(e,t,i){let n=-1,r=1;if(t>0)for(;r<10&&(n=t/Te.QuarterTime*r,n!==Math.floor(n));)n=-1,r++;else n=0,r=1;if(-1===n)return;const s=e.addElement("Fermata");s.addElement("Type").innerText=A[i.type],s.addElement("Length").innerText=i.length.toString(),s.addElement("Offset").innerText=`${n}/${r}`}writeBarNode(e,t){const i=e.addElement("Bar");i.attributes.set("id",t.id.toString()),i.addElement("Voices").innerText=t.voices.map((e=>e.isEmpty?"-1":e.id.toString())).join(" "),i.addElement("Clef").innerText=a[t.clef],t.clefOttava!==l.Regular&&(i.addElement("Ottavia").innerText=l[t.clefOttava].substr(1)),t.simileMark!==c.None&&(i.addElement("SimileMark").innerText=c[t.simileMark])}writeVoiceNode(e,t){if(t.isEmpty)return;const i=e.addElement("Voice");i.attributes.set("id",t.id.toString()),i.addElement("Beats").innerText=t.beats.map((e=>e.id)).join(" ")}}ca.MidiProgramInfoLookup=new Map([[0,new la(ie.Piano,"Acoustic Piano")],[1,new la(ie.Piano,"Acoustic Piano")],[2,new la(ie.Piano,"Electric Piano")],[3,new la(ie.Piano,"Acoustic Piano")],[4,new la(ie.Piano,"Electric Piano")],[5,new la(ie.Piano,"Electric Piano")],[6,new la(ie.Piano,"Harpsichord")],[7,new la(ie.Piano,"Harpsichord")],[8,new la(ie.PitchedIdiophone,"Celesta")],[9,new la(ie.PitchedIdiophone,"Vibraphone")],[10,new la(ie.PitchedIdiophone,"Vibraphone")],[11,new la(ie.PitchedIdiophone,"Vibraphone")],[12,new la(ie.PitchedIdiophone,"Xylophone")],[13,new la(ie.PitchedIdiophone,"Xylophone")],[14,new la(ie.PitchedIdiophone,"Vibraphone")],[15,new la(ie.Banjo,"Banjo")],[16,new la(ie.Piano,"Electric Organ")],[17,new la(ie.Piano,"Electric Organ")],[18,new la(ie.Piano,"Electric Organ")],[19,new la(ie.Piano,"Electric Organ")],[20,new la(ie.Piano,"Electric Organ")],[21,new la(ie.Piano,"Electric Organ")],[22,new la(ie.Woodwind,"Recorder")],[23,new la(ie.Piano,"Electric Organ")],[24,new la(ie.ClassicalGuitar,"Nylon Guitar")],[25,new la(ie.SteelGuitar,"Steel Guitar")],[26,new la(ie.SteelGuitar,"Electric Guitar")],[27,new la(ie.ElectricGuitar,"Electric Guitar")],[28,new la(ie.ElectricGuitar,"Electric Guitar")],[29,new la(ie.ElectricGuitar,"Electric Guitar")],[30,new la(ie.SteelGuitar,"Electric Guitar")],[31,new la(ie.SteelGuitar,"Electric Guitar")],[32,new la(ie.Bass,"Acoustic Bass")],[33,new la(ie.Bass,"Electric Bass")],[34,new la(ie.Bass,"Electric Bass")],[35,new la(ie.Bass,"Acoustic Bass")],[36,new la(ie.Bass,"Electric Bass")],[37,new la(ie.Bass,"Electric Bass")],[38,new la(ie.Synth,"Synth Bass")],[39,new la(ie.Synth,"Synth Bass")],[40,new la(ie.Strings,"Violin")],[41,new la(ie.Strings,"Viola")],[42,new la(ie.Strings,"Cello")],[43,new la(ie.Strings,"Contrabass")],[44,new la(ie.Strings,"Violin")],[45,new la(ie.Strings,"Violin")],[46,new la(ie.Piano,"Harp")],[47,new la(ie.Membraphone,"Timpani")],[48,new la(ie.Strings,"Violin")],[49,new la(ie.Strings,"Violin")],[50,new la(ie.Strings,"Violin")],[51,new la(ie.Strings,"Violin")],[52,new la(ie.Vocal,"Voice")],[53,new la(ie.Vocal,"Voice")],[54,new la(ie.Vocal,"Voice")],[55,new la(ie.Synth,"Pad Synthesizer")],[56,new la(ie.Brass,"Trumpet")],[57,new la(ie.Brass,"Trombone")],[58,new la(ie.Brass,"Tuba")],[59,new la(ie.Brass,"Trumpet")],[60,new la(ie.Brass,"French Horn")],[61,new la(ie.Brass,"Trumpet")],[62,new la(ie.Brass,"Trumpet")],[63,new la(ie.Brass,"Trumpet")],[64,new la(ie.Reed,"Saxophone")],[65,new la(ie.Reed,"Saxophone")],[66,new la(ie.Reed,"Saxophone")],[67,new la(ie.Reed,"Saxophone")],[68,new la(ie.Reed,"Oboe")],[69,new la(ie.Reed,"English Horn")],[70,new la(ie.Reed,"Bassoon")],[71,new la(ie.Reed,"Clarinet")],[72,new la(ie.Reed,"Piccolo")],[73,new la(ie.Woodwind,"Flute")],[74,new la(ie.Woodwind,"Recorder")],[75,new la(ie.Woodwind,"Flute")],[76,new la(ie.Woodwind,"Recorder")],[77,new la(ie.Woodwind,"Flute")],[78,new la(ie.Woodwind,"Recorder")],[79,new la(ie.Woodwind,"Flute")],[80,new la(ie.Synth,"Lead Synthesizer")],[81,new la(ie.Synth,"Lead Synthesizer")],[82,new la(ie.Synth,"Lead Synthesizer")],[83,new la(ie.Synth,"Lead Synthesizer")],[84,new la(ie.Synth,"Lead Synthesizer")],[85,new la(ie.Synth,"Lead Synthesizer")],[86,new la(ie.Synth,"Lead Synthesizer")],[87,new la(ie.Synth,"Lead Synthesizer")],[88,new la(ie.Synth,"Pad Synthesizer")],[89,new la(ie.Synth,"Pad Synthesizer")],[90,new la(ie.Synth,"Pad Synthesizer")],[91,new la(ie.Synth,"Pad Synthesizer")],[92,new la(ie.Synth,"Pad Synthesizer")],[93,new la(ie.Synth,"Pad Synthesizer")],[94,new la(ie.Synth,"Pad Synthesizer")],[95,new la(ie.Synth,"Pad Synthesizer")],[96,new la(ie.Fx,"Pad Synthesizer")],[97,new la(ie.Fx,"Pad Synthesizer")],[98,new la(ie.Fx,"Pad Synthesizer")],[99,new la(ie.Fx,"Pad Synthesizer")],[100,new la(ie.Fx,"Lead Synthesizer")],[101,new la(ie.Fx,"Lead Synthesizer")],[102,new la(ie.Fx,"Lead Synthesizer")],[103,new la(ie.Fx,"Trumpet")],[104,new la(ie.ElectricGuitar,"Banjo")],[105,new la(ie.Banjo,"Banjo")],[106,new la(ie.Ukulele,"Ukulele")],[107,new la(ie.Banjo,"Banjo")],[108,new la(ie.PitchedIdiophone,"Xylophone")],[109,new la(ie.Reed,"Bassoon")],[110,new la(ie.Strings,"Violin")],[111,new la(ie.Woodwind,"Flute")],[112,new la(ie.PitchedIdiophone,"Xylophone")],[113,new la(ie.Idiophone,"Celesta")],[114,new la(ie.PitchedIdiophone,"Vibraphone")],[115,new la(ie.Idiophone,"Xylophone")],[116,new la(ie.Membraphone,"Xylophone")],[117,new la(ie.Membraphone,"Xylophone")],[118,new la(ie.Membraphone,"Xylophone")],[119,new la(ie.Idiophone,"Celesta")],[120,new la(ie.Fx,"Steel Guitar")],[121,new la(ie.Fx,"Recorder")],[122,new la(ie.Fx,"Recorder")],[123,new la(ie.Fx,"Recorder")],[124,new la(ie.Fx,"Recorder")],[125,new la(ie.Fx,"Recorder")],[126,new la(ie.Fx,"Recorder")],[127,new la(ie.Fx,"Timpani")]]),ca.DrumKitProgramInfo=new la(ie.PercussionKit,"Drums","drumKit");class ha{constructor(){this._checkValue=ha.CrcInit,this.reset()}static buildCrc32Lookup(){const e=3988292384,t=new Uint32Array(256);for(let i=0;i<t.length;i++){let n=i;for(let t=0;t<8;t++)n=1==(1&n)?n>>>1^e:n>>>1;t[i]=n}return t}get value(){return~this._checkValue}update(e,t,i){for(let n=0;n<i;n++)this._checkValue=ha.Crc32Lookup[255&(this._checkValue^e[t+n])]^this._checkValue>>>8}reset(){this._checkValue=ha.CrcInit}}ha.Crc32Lookup=ha.buildCrc32Lookup(),ha.CrcInit=4294967295;class ua{}ua.MAX_WBITS=15,ua.WSIZE=1<<ua.MAX_WBITS,ua.WMASK=ua.WSIZE-1,ua.MIN_MATCH=3,ua.MAX_MATCH=258,ua.DEFAULT_MEM_LEVEL=8,ua.PENDING_BUF_SIZE=1<<ua.DEFAULT_MEM_LEVEL+8,ua.HASH_BITS=ua.DEFAULT_MEM_LEVEL+7,ua.HASH_SIZE=1<<ua.HASH_BITS,ua.HASH_SHIFT=(ua.HASH_BITS+ua.MIN_MATCH-1)/ua.MIN_MATCH,ua.HASH_MASK=ua.HASH_SIZE-1,ua.MIN_LOOKAHEAD=ua.MAX_MATCH+ua.MIN_MATCH+1,ua.MAX_DIST=ua.WSIZE-ua.MIN_LOOKAHEAD;class da{constructor(e,t,i,n){this.length=null,this.numCodes=0,this.codes=null,this.huffman=e,this.minNumCodes=i,this.maxLength=n,this.freqs=new Int16Array(t),this.bitLengthCounts=new Int32Array(n)}reset(){for(let e=0;e<this.freqs.length;e++)this.freqs[e]=0;this.codes=null,this.length=null}buildTree(){let e=this.freqs.length,t=new Int32Array(e),i=0,n=0;for(let r=0;r<e;r++){let e=this.freqs[r];if(0!=e){let s,o=i++;for(;o>0&&this.freqs[t[s=Math.floor((o-1)/2)]]>e;)t[o]=t[s],o=s;t[o]=r,n=r}}for(;i<2;){let e=n<2?++n:0;t[i++]=e}this.numCodes=Math.max(n+1,this.minNumCodes);let r=i,s=new Int32Array(4*i-2),o=new Int32Array(2*i-1),a=r;for(let e=0;e<i;e++){let i=t[e];s[2*e]=i,s[2*e+1]=-1,o[e]=this.freqs[i]<<8,t[e]=e}do{let e=t[0],n=t[--i],r=0,l=1;for(;l<i;)l+1<i&&o[t[l]]>o[t[l+1]]&&l++,t[r]=t[l],r=l,l=2*l+1;let c=o[n];for(;(l=r)>0&&o[t[r=Math.floor((l-1)/2)]]>c;)t[l]=t[r];t[l]=n;let h=t[0];n=a++,s[2*n]=e,s[2*n+1]=h;let u=Math.min(255&o[e],255&o[h]);for(o[n]=c=o[e]+o[h]-u+1,r=0,l=1;l<i;)l+1<i&&o[t[l]]>o[t[l+1]]&&l++,t[r]=t[l],r=l,l=2*r+1;for(;(l=r)>0&&o[t[r=Math.floor((l-1)/2)]]>c;)t[l]=t[r];t[l]=n}while(i>1);this.buildLength(s)}buildLength(e){this.length=new Uint8Array(this.freqs.length);let t=Math.floor(e.length/2),i=Math.floor((t+1)/2),n=0;for(let e=0;e<this.maxLength;e++)this.bitLengthCounts[e]=0;let r=new Int32Array(t);r[t-1]=0;for(let i=t-1;i>=0;i--)if(-1!=e[2*i+1]){let t=r[i]+1;t>this.maxLength&&(t=this.maxLength,n++),r[e[2*i]]=r[e[2*i+1]]=t}else{let t=r[i];this.bitLengthCounts[t-1]++,this.length[e[2*i]]=r[i]}if(0==n)return;let s=this.maxLength-1;do{for(;0==this.bitLengthCounts[--s];);do{this.bitLengthCounts[s]--,this.bitLengthCounts[++s]++,n-=1<<this.maxLength-1-s}while(n>0&&s<this.maxLength-1)}while(n>0);this.bitLengthCounts[this.maxLength-1]+=n,this.bitLengthCounts[this.maxLength-2]-=n;let o=2*i;for(let t=this.maxLength;0!=t;t--){let i=this.bitLengthCounts[t-1];for(;i>0;){let n=2*e[o++];-1==e[n+1]&&(this.length[e[n]]=t,i--)}}}getEncodedLength(){let e=0;for(let t=0;t<this.freqs.length;t++)e+=this.freqs[t]*this.length[t];return e}calcBLFreq(e){let t,i,n,r=-1,s=0;for(;s<this.numCodes;){n=1;let o=this.length[s];for(0==o?(t=138,i=3):(t=6,i=3,r!=o&&(e.freqs[o]++,n=0)),r=o,s++;s<this.numCodes&&r==this.length[s]&&(s++,!(++n>=t)););n<i?e.freqs[r]+=n:0!=r?e.freqs[da.Repeat3To6]++:n<=10?e.freqs[da.Repeat3To10]++:e.freqs[da.Repeat11To138]++}}setStaticCodes(e,t){this.codes=e,this.length=t}buildCodes(){let e=new Int32Array(this.maxLength),t=0;this.codes=new Int16Array(this.freqs.length);for(let i=0;i<this.maxLength;i++)e[i]=t,t+=this.bitLengthCounts[i]<<15-i;for(let t=0;t<this.numCodes;t++){let i=this.length[t];i>0&&(this.codes[t]=fa.bitReverse(e[i-1]),e[i-1]+=1<<16-i)}}writeTree(e){let t,i,n,r=-1,s=0;for(;s<this.numCodes;){n=1;let o=this.length[s];for(0==o?(t=138,i=3):(t=6,i=3,r!=o&&(e.writeSymbol(o),n=0)),r=o,s++;s<this.numCodes&&r==this.length[s]&&(s++,!(++n>=t)););if(n<i)for(;n-- >0;)e.writeSymbol(r);else 0!=r?(e.writeSymbol(da.Repeat3To6),this.huffman.pending.writeBits(n-3,2)):n<=10?(e.writeSymbol(da.Repeat3To10),this.huffman.pending.writeBits(n-3,3)):(e.writeSymbol(da.Repeat11To138),this.huffman.pending.writeBits(n-11,7))}}writeSymbol(e){this.huffman.pending.writeBits(65535&this.codes[e],this.length[e])}}da.Repeat3To6=16,da.Repeat3To10=17,da.Repeat11To138=18;class fa{constructor(e){this.last_lit=0,this.extra_bits=0,this.pending=e,this.literalTree=new da(this,fa.LITERAL_NUM,257,15),this.distTree=new da(this,fa.DIST_NUM,1,15),this.blTree=new da(this,fa.BITLEN_NUM,4,7),this.d_buf=new Int16Array(fa.BUFSIZE),this.l_buf=new Uint8Array(fa.BUFSIZE)}static staticInit(){fa.staticLCodes=new Int16Array(fa.LITERAL_NUM),fa.staticLLength=new Uint8Array(fa.LITERAL_NUM);let e=0;for(;e<144;)fa.staticLCodes[e]=fa.bitReverse(48+e<<8),fa.staticLLength[e++]=8;for(;e<256;)fa.staticLCodes[e]=fa.bitReverse(256+e<<7),fa.staticLLength[e++]=9;for(;e<280;)fa.staticLCodes[e]=fa.bitReverse(-256+e<<9),fa.staticLLength[e++]=7;for(;e<fa.LITERAL_NUM;)fa.staticLCodes[e]=fa.bitReverse(-88+e<<8),fa.staticLLength[e++]=8;for(fa.staticDCodes=new Int16Array(fa.DIST_NUM),fa.staticDLength=new Uint8Array(fa.DIST_NUM),e=0;e<fa.DIST_NUM;e++)fa.staticDCodes[e]=fa.bitReverse(e<<11),fa.staticDLength[e]=5}static bitReverse(e){return fa.bit4Reverse[15&e]<<12|fa.bit4Reverse[e>>4&15]<<8|fa.bit4Reverse[e>>8&15]<<4|fa.bit4Reverse[e>>12]}isFull(){return this.last_lit>=fa.BUFSIZE}reset(){this.last_lit=0,this.extra_bits=0,this.literalTree.reset(),this.distTree.reset(),this.blTree.reset()}flushStoredBlock(e,t,i,n){this.pending.writeBits((fa.STORED_BLOCK<<1)+(n?1:0),3),this.pending.alignToByte(),this.pending.writeShort(i),this.pending.writeShort(~i),this.pending.writeBlock(e,t,i),this.reset()}flushBlock(e,t,i,n){this.literalTree.freqs[fa.EOF_SYMBOL]++,this.literalTree.buildTree(),this.distTree.buildTree(),this.literalTree.calcBLFreq(this.blTree),this.distTree.calcBLFreq(this.blTree),this.blTree.buildTree();let r=4;for(let e=18;e>r;e--)this.blTree.length[fa.BL_ORDER[e]]>0&&(r=e+1);let s=14+3*r+this.blTree.getEncodedLength()+this.literalTree.getEncodedLength()+this.distTree.getEncodedLength()+this.extra_bits,o=this.extra_bits;for(let e=0;e<fa.LITERAL_NUM;e++)o+=this.literalTree.freqs[e]*fa.staticLLength[e];for(let e=0;e<fa.DIST_NUM;e++)o+=this.distTree.freqs[e]*fa.staticDLength[e];s>=o&&(s=o),t>=0&&i+4<s>>3?this.flushStoredBlock(e,t,i,n):s==o?(this.pending.writeBits((fa.STATIC_TREES<<1)+(n?1:0),3),this.literalTree.setStaticCodes(fa.staticLCodes,fa.staticLLength),this.distTree.setStaticCodes(fa.staticDCodes,fa.staticDLength),this.compressBlock(),this.reset()):(this.pending.writeBits((fa.DYN_TREES<<1)+(n?1:0),3),this.sendAllTrees(r),this.compressBlock(),this.reset())}sendAllTrees(e){this.blTree.buildCodes(),this.literalTree.buildCodes(),this.distTree.buildCodes(),this.pending.writeBits(this.literalTree.numCodes-257,5),this.pending.writeBits(this.distTree.numCodes-1,5),this.pending.writeBits(e-4,4);for(let t=0;t<e;t++)this.pending.writeBits(this.blTree.length[fa.BL_ORDER[t]],3);this.literalTree.writeTree(this.blTree),this.distTree.writeTree(this.blTree)}compressBlock(){for(let e=0;e<this.last_lit;e++){let t=255&this.l_buf[e],i=this.d_buf[e];if(0!=i--){let e=fa.Lcode(t);this.literalTree.writeSymbol(e);let n=Math.floor((e-261)/4);n>0&&n<=5&&this.pending.writeBits(t&(1<<n)-1,n);let r=fa.Dcode(i);this.distTree.writeSymbol(r),n=Math.floor(r/2)-1,n>0&&this.pending.writeBits(i&(1<<n)-1,n)}else this.literalTree.writeSymbol(t)}this.literalTree.writeSymbol(fa.EOF_SYMBOL)}tallyDist(e,t){this.d_buf[this.last_lit]=e,this.l_buf[this.last_lit++]=t-3;let i=fa.Lcode(t-3);this.literalTree.freqs[i]++,i>=265&&i<285&&(this.extra_bits+=Math.floor((i-261)/4));let n=fa.Dcode(e-1);return this.distTree.freqs[n]++,n>=4&&(this.extra_bits+=Math.floor(n/2)-1),this.isFull()}tallyLit(e){return this.d_buf[this.last_lit]=0,this.l_buf[this.last_lit++]=e,this.literalTree.freqs[e]++,this.isFull()}static Lcode(e){if(255==e)return 285;let t=257;for(;e>=8;)t+=4,e>>=1;return t+e}static Dcode(e){let t=0;for(;e>=4;)t+=2,e>>=1;return t+e}}fa.BUFSIZE=1<<ua.DEFAULT_MEM_LEVEL+6,fa.LITERAL_NUM=286,fa.STORED_BLOCK=0,fa.STATIC_TREES=1,fa.DYN_TREES=2,fa.DIST_NUM=30,fa.BL_ORDER=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fa.bit4Reverse=new Uint8Array([0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]),fa.BITLEN_NUM=19,fa.EOF_SYMBOL=256,fa.staticInit();class pa{constructor(e){this.maxChain=128,this.niceLength=128,this.goodLength=8,this.insertHashIndex=0,this.lookahead=0,this.inputBuf=null,this.inputOff=0,this.inputEnd=0,this.prevAvailable=!1,this.matchStart=0,this.matchLen=0,this.pending=e,this.huffman=new fa(e),this.inputCrc=new ha,this.window=new Uint8Array(2*ua.WSIZE),this.head=new Int16Array(ua.HASH_SIZE),this.prev=new Int16Array(ua.WSIZE),this.blockStart=1,this.strstart=1}reset(){this.huffman.reset(),this.inputCrc.reset(),this.blockStart=1,this.strstart=1,this.lookahead=0,this.prevAvailable=!1,this.matchLen=ua.MIN_MATCH-1;for(let e=0;e<ua.HASH_SIZE;e++)this.head[e]=0;for(let e=0;e<ua.WSIZE;e++)this.prev[e]=0}updateHash(){this.insertHashIndex=this.window[this.strstart]<<ua.HASH_SHIFT^this.window[this.strstart+1]}needsInput(){return this.inputEnd==this.inputOff}setInput(e,t,i){let n=t+i;this.inputBuf=e,this.inputOff=t,this.inputEnd=n}deflate(e,t){let i;do{this.fillWindow();let n=e&&this.inputOff==this.inputEnd;i=this.deflateSlow(n,t)}while(this.pending.isFlushed&&i);return i}deflateSlow(e,t){if(this.lookahead<ua.MIN_LOOKAHEAD&&!e)return!1;for(;this.lookahead>=ua.MIN_LOOKAHEAD||e;){if(0==this.lookahead)return this.prevAvailable&&this.huffman.tallyLit(255&this.window[this.strstart-1]),this.prevAvailable=!1,this.huffman.flushBlock(this.window,this.blockStart,this.strstart-this.blockStart,t),this.blockStart=this.strstart,!1;this.strstart>=2*ua.WSIZE-ua.MIN_LOOKAHEAD&&this.slideWindow();let e=this.matchStart,i=this.matchLen;if(this.lookahead>=ua.MIN_MATCH){let e=this.insertString();0!=e&&this.strstart-e<=ua.MAX_DIST&&this.findLongestMatch(e)&&this.matchLen==ua.MIN_MATCH&&this.strstart-this.matchStart>pa.TooFar&&(this.matchLen=ua.MIN_MATCH-1)}if(i>=ua.MIN_MATCH&&this.matchLen<=i){this.huffman.tallyDist(this.strstart-1-e,i),i-=2;do{this.strstart++,this.lookahead--,this.lookahead>=ua.MIN_MATCH&&this.insertString()}while(--i>0);this.strstart++,this.lookahead--,this.prevAvailable=!1,this.matchLen=ua.MIN_MATCH-1}else this.prevAvailable&&this.huffman.tallyLit(255&this.window[this.strstart-1]),this.prevAvailable=!0,this.strstart++,this.lookahead--;if(this.huffman.isFull()){let e=this.strstart-this.blockStart;this.prevAvailable&&e--;let i=t&&0==this.lookahead&&!this.prevAvailable;return this.huffman.flushBlock(this.window,this.blockStart,e,i),this.blockStart+=e,!i}}return!0}findLongestMatch(e){let t,i=this.strstart,n=i+Math.min(ua.MAX_MATCH,this.lookahead)-1,r=Math.max(i-ua.MAX_DIST,0),s=this.window,o=this.prev,a=this.maxChain,l=Math.min(this.niceLength,this.lookahead);if(this.matchLen=Math.max(this.matchLen,ua.MIN_MATCH-1),i+this.matchLen>n)return!1;let c=s[i+this.matchLen-1],h=s[i+this.matchLen];this.matchLen>=this.goodLength&&(a>>=2);do{if(t=e,i=this.strstart,s[t+this.matchLen]==h&&s[t+this.matchLen-1]==c&&s[t]==s[i]&&s[++t]==s[++i]){switch((n-i)%8){case 1:if(s[++i]==s[++t])break;break;case 2:if(s[++i]==s[++t]&&s[++i]==s[++t])break;break;case 3:if(s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t])break;break;case 4:if(s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t])break;break;case 5:if(s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t])break;break;case 6:if(s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t])break;break;case 7:if(s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t])break}if(s[i]==s[t])do{if(i==n){++i,++t;break}}while(s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]&&s[++i]==s[++t]);if(i-this.strstart>this.matchLen){if(this.matchStart=e,this.matchLen=i-this.strstart,this.matchLen>=l)break;c=s[i-1],h=s[i]}}}while((e=65535&o[e&ua.WMASK])>r&&0!=--a);return this.matchLen>=ua.MIN_MATCH}insertString(){let e,t=(this.insertHashIndex<<ua.HASH_SHIFT^this.window[this.strstart+(ua.MIN_MATCH-1)])&ua.HASH_MASK;return this.prev[this.strstart&ua.WMASK]=e=this.head[t],this.head[t]=this.strstart,this.insertHashIndex=t,65535&e}fillWindow(){if(this.strstart>=ua.WSIZE+ua.MAX_DIST&&this.slideWindow(),this.lookahead<ua.MIN_LOOKAHEAD&&this.inputOff<this.inputEnd){let e=2*ua.WSIZE-this.lookahead-this.strstart;e>this.inputEnd-this.inputOff&&(e=this.inputEnd-this.inputOff),this.window.set(this.inputBuf.subarray(this.inputOff,this.inputOff+e),this.strstart+this.lookahead),this.inputCrc.update(this.inputBuf,this.inputOff,e),this.inputOff+=e,this.lookahead+=e}this.lookahead>=ua.MIN_MATCH&&this.updateHash()}slideWindow(){this.window.set(this.window.subarray(ua.WSIZE,ua.WSIZE+ua.WSIZE),0),this.matchStart-=ua.WSIZE,this.strstart-=ua.WSIZE,this.blockStart-=ua.WSIZE;for(let e=0;e<ua.HASH_SIZE;++e){let t=65535&this.head[e];this.head[e]=t>=ua.WSIZE?t-ua.WSIZE:0}for(let e=0;e<ua.WSIZE;e++){let t=65535&this.prev[e];this.prev[e]=t>=ua.WSIZE?t-ua.WSIZE:0}}}pa.TooFar=4096;class ga{constructor(e){this._start=0,this._end=0,this._bits=0,this.bitCount=0,this._buffer=new Uint8Array(e)}get isFlushed(){return 0===this._end}reset(){this._start=0,this._end=0,this.bitCount=0}writeShortMSB(e){this._buffer[this._end++]=e>>8&255,this._buffer[this._end++]=255&e}writeShort(e){this._buffer[this._end++]=e,this._buffer[this._end++]=e>>8}writeBlock(e,t,i){this._buffer.set(e.subarray(t,t+i),this._end),this._end+=i}flush(e,t,i){return this.bitCount>=8&&(this._buffer[this._end++]=255&this._bits,this._bits>>=8,this.bitCount-=8),i>this._end-this._start?(i=this._end-this._start,e.set(this._buffer.subarray(this._start,this._start+i),t),this._start=0,this._end=0):(e.set(this._buffer.subarray(this._start,this._start+i),t),this._start+=i),i}writeBits(e,t){this._bits|=e<<this.bitCount,this.bitCount+=t,this.bitCount>=16&&(this._buffer[this._end++]=255&this._bits,this._buffer[this._end++]=this._bits>>8&255,this._bits>>=16,this.bitCount-=16)}alignToByte(){this.bitCount>0&&(this._buffer[this._end++]=255&this._bits,this.bitCount>8&&(this._buffer[this._end++]=this._bits>>8&255)),this._bits=0,this.bitCount=0}}class ma{constructor(){this._state=0,this._pending=new ga(ua.PENDING_BUF_SIZE),this._engine=new pa(this._pending),this.reset()}get inputCrc(){return this._engine.inputCrc.value}get isNeedingInput(){return this._engine.needsInput()}get isFinished(){return this._state==ma.FinishedState&&this._pending.isFlushed}reset(){this._state=ma.BusyState,this._pending.reset(),this._engine.reset()}setInput(e,t,i){this._engine.setInput(e,t,i)}deflate(e,t,i){let n=i;for(;;){let r=this._pending.flush(e,t,i);if(t+=r,0==(i-=r)||this._state==ma.FinishedState)break;if(!this._engine.deflate(0!=(this._state&ma.IsFlushing),0!=(this._state&ma.IsFinishing)))switch(this._state){case ma.BusyState:return n-i;case ma.FlushingState:let e=8+(7&-this._pending.bitCount);for(;e>0;)this._pending.writeBits(2,10),e-=10;this._state=ma.BusyState;break;case ma.FinishingState:this._pending.alignToByte(),this._state=ma.FinishedState}}return n-i}finish(){this._state|=ma.IsFlushing|ma.IsFinishing}}ma.IsFlushing=4,ma.IsFinishing=8,ma.BusyState=16,ma.FlushingState=20,ma.FinishingState=28,ma.FinishedState=30;class ba{constructor(e,t,i,n,r){this.entry=e,this.crc32=t,this.localHeaderOffset=i,this.compressionMode=n,this.compressedSize=r}}class va{constructor(e){this._centralDirectoryHeaders=[],this._deflater=new ma,this._data=e}writeEntry(e){const t=Nt.CompressionMethodDeflate,i=at.empty(),n=this.compress(i,e.data,t),r=i.toArray(),s=new ba(e,n,this._data.bytesWritten,t,i.length);this._centralDirectoryHeaders.push(s),nt.writeInt32LE(this._data,Nt.LocalFileHeaderSignature),nt.writeUInt16LE(this._data,10),nt.writeUInt16LE(this._data,2048),nt.writeUInt16LE(this._data,t),nt.writeInt16LE(this._data,0),nt.writeInt16LE(this._data,0),nt.writeInt32LE(this._data,n),nt.writeInt32LE(this._data,r.length),nt.writeInt32LE(this._data,e.data.length),nt.writeInt16LE(this._data,e.fullName.length),nt.writeInt16LE(this._data,0);const o=nt.stringToBytes(e.fullName);this._data.write(o,0,o.length),this._data.write(r,0,r.length)}compress(e,t,i){if(i!=Nt.CompressionMethodDeflate){const i=new ha;return i.update(t,0,t.length),e.write(t,0,t.length),i.value}{let i=new Uint8Array(512);for(this._deflater.reset(),this._deflater.setInput(t,0,t.length);!this._deflater.isNeedingInput;){const t=this._deflater.deflate(i,0,i.length);if(t<=0)break;e.write(i,0,t)}for(this._deflater.finish();!this._deflater.isFinished;){const t=this._deflater.deflate(i,0,i.length);if(t<=0)break;e.write(i,0,t)}return this._deflater.inputCrc}}end(){const e=this._data.bytesWritten;for(const e of this._centralDirectoryHeaders)this.writeCentralDirectoryHeader(e);const t=this._data.bytesWritten;this.writeEndOfCentralDirectoryRecord(e,t)}writeEndOfCentralDirectoryRecord(e,t){nt.writeInt32LE(this._data,Nt.EndOfCentralDirSignature),nt.writeInt16LE(this._data,0),nt.writeInt16LE(this._data,0),nt.writeInt16LE(this._data,this._centralDirectoryHeaders.length),nt.writeInt16LE(this._data,this._centralDirectoryHeaders.length),nt.writeInt32LE(this._data,t-e),nt.writeInt32LE(this._data,e),nt.writeInt16LE(this._data,0)}writeCentralDirectoryHeader(e){nt.writeInt32LE(this._data,Nt.CentralFileHeaderSignature),nt.writeUInt16LE(this._data,10),nt.writeUInt16LE(this._data,10),nt.writeUInt16LE(this._data,2048),nt.writeUInt16LE(this._data,e.compressionMode),nt.writeInt16LE(this._data,0),nt.writeInt16LE(this._data,0),nt.writeInt32LE(this._data,e.crc32),nt.writeInt32LE(this._data,e.compressedSize),nt.writeInt32LE(this._data,e.entry.data.length),nt.writeInt16LE(this._data,e.entry.fullName.length),nt.writeInt16LE(this._data,0),nt.writeInt16LE(this._data,0),nt.writeInt16LE(this._data,0),nt.writeInt16LE(this._data,0),nt.writeInt32LE(this._data,0),nt.writeInt32LE(this._data,e.localHeaderOffset);const t=nt.stringToBytes(e.entry.fullName);this._data.write(t,0,t.length)}}class ya extends aa{get name(){return"Guitar Pro 7"}constructor(){super()}writeScore(e){Oe.debug(this.name,"Writing data entries");const t=(new ca).writeXml(e),i=ct.writeForScore(e),n=wt.writeForScore(e);Oe.debug(this.name,"Writing ZIP entries");let r=new va(this.data);r.writeEntry(new Nt("VERSION",nt.stringToBytes("7.0"))),r.writeEntry(new Nt("Content/",new Uint8Array(0))),r.writeEntry(new Nt("Content/BinaryStylesheet",i)),r.writeEntry(new Nt("Content/PartConfiguration",n)),r.writeEntry(new Nt("Content/score.gpif",nt.stringToBytes(t))),r.end()}}const _a=oa,wa={ScoreImporter:Ce,ScoreLoader:Wn,UnsupportedFormatError:xe},Sa={ScoreExporter:aa,Gp7Exporter:ya},Ca={BeatTickLookup:_n,MasterBarTickLookup:Sn,MidiTickLookup:xn,MidiTickLookupFindBeatResult:Cn,MidiFile:Ci,ControllerType:q,MetaDataEvent:xi,MetaEvent:Wt,MetaEventType:V,MetaNumberEvent:ki,MidiEvent:Ft,MidiEventType:W,Midi20PerNotePitchBendEvent:Oi,SystemCommonEvent:Vt,SystemCommonType:z,SystemExclusiveEvent:zt,MidiFileGenerator:Tn,AlphaSynthMidiFileHandler:yn},xa={AccentuationType:s,AccidentalType:Y,AutomationType:o,Automation:ke,Bar:Ee,Beat:ze,BendPoint:Le,BendStyle:h,BendType:u,BrushType:d,Chord:He,Clef:a,Color:me,CrescendoType:f,Duration:p,DynamicValue:g,FermataType:A,Fermata:ht,Fingers:i,FontStyle:r,Font:_e,GraceType:m,HarmonicType:b,InstrumentArticulation:De,JsonConverter:sn,KeySignature:N,KeySignatureType:M,Lyrics:je,MasterBar:Ue,MusicFontSymbol:C,Note:Ae,NoteAccidentalMode:v,Ottavia:l,PickStroke:S,PlaybackInformation:Ze,RenderStylesheet:Ge,RepeatGroup:Ke,Score:$e,Section:qe,SimileMark:c,SlideInType:y,SlideOutType:_,Staff:Xe,Track:Qe,TripletFeel:O,Tuning:Ye,TupletGroup:Pe,VibratoType:w,Voice:Je,WhammyType:E},ka={ScoreRenderer:mn,RenderFinishedEventArgs:cn,BarBounds:hn,BeatBounds:un,Bounds:lt,BoundsLookup:gn,MasterBarBounds:dn,NoteBounds:fn,StaveGroupBounds:pn},Ea={AlphaSynth:Si,PlaybackRange:Ln,PlayerState:j,PlayerStateChangedEventArgs:$t,PositionChangedEventArgs:qt,AlphaSynthWebWorkerApi:Gn};e.AlphaTabApi=Zn,e.AlphaTabError=he,e.CoreSettings=ra,e.DisplaySettings=Se,e.FileLoadError=Fn,e.FormatError=ue,e.ImporterSettings=Ei,e.Logger=Oe,e.NotationSettings=fe,e.PlayerSettings=Ni,e.ProgressEventArgs=sa,e.RenderingResources=we,e.ResizeEventArgs=Pn,e.Settings=Mi,e.VibratoPlaybackSettings=Ti,e.exporter=Sa,e.importer=wa,e.meta=_a,e.midi=Ca,e.model=xa,e.rendering=ka,e.synth=Ea,Object.defineProperty(e,"__esModule",{value:!0})}(t)},87077:(e,t,i)=>{"use strict";i.d(t,{Ni:()=>p,Xn:()=>g});var n=i(93552),r=i(67294);var s=function(){function e(e){this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.before=null}var t=e.prototype;return t.insert=function(e){if(this.ctr%(this.isSpeedy?65e3:1)==0){var t,i=function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}(this);t=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(i,t),this.tags.push(i)}var n=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(n);try{var s=105===e.charCodeAt(1)&&64===e.charCodeAt(0);r.insertRule(e,s?0:r.cssRules.length)}catch(e){0}}else n.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}();const o=function(e){function t(e,n,l,c,d){for(var f,p,g,m,_,S=0,C=0,x=0,k=0,E=0,D=0,A=g=f=0,R=0,B=0,F=0,W=0,V=l.length,z=V-1,H="",j="",U="",G="";R<V;){if(p=l.charCodeAt(R),R===z&&0!==C+k+x+S&&(0!==C&&(p=47===C?10:47),k=x=S=0,V++,z++),0===C+k+x+S){if(R===z&&(0<B&&(H=H.replace(u,"")),0<H.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:H+=l.charAt(R)}p=59}switch(p){case 123:for(f=(H=H.trim()).charCodeAt(0),g=1,W=++R;R<V;){switch(p=l.charCodeAt(R)){case 123:g++;break;case 125:g--;break;case 47:switch(p=l.charCodeAt(R+1)){case 42:case 47:e:{for(A=R+1;A<z;++A)switch(l.charCodeAt(A)){case 47:if(42===p&&42===l.charCodeAt(A-1)&&R+2!==A){R=A+1;break e}break;case 10:if(47===p){R=A+1;break e}}R=A}}break;case 91:p++;case 40:p++;case 34:case 39:for(;R++<z&&l.charCodeAt(R)!==p;);}if(0===g)break;R++}switch(g=l.substring(W,R),0===f&&(f=(H=H.replace(h,"").trim()).charCodeAt(0)),f){case 64:switch(0<B&&(H=H.replace(u,"")),p=H.charCodeAt(1)){case 100:case 109:case 115:case 45:B=n;break;default:B=O}if(W=(g=t(n,B,g,p,d+1)).length,0<I&&(_=a(3,g,B=i(O,H,F),n,L,T,W,p,d,c),H=B.join(""),void 0!==_&&0===(W=(g=_.trim()).length)&&(p=0,g="")),0<W)switch(p){case 115:H=H.replace(w,o);case 100:case 109:case 45:g=H+"{"+g+"}";break;case 107:g=(H=H.replace(b,"$1 $2"))+"{"+g+"}",g=1===M||2===M&&s("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=H+g,112===c&&(j+=g,g="")}else g="";break;default:g=t(n,i(n,H,F),g,c,d+1)}U+=g,g=F=B=A=f=0,H="",p=l.charCodeAt(++R);break;case 125:case 59:if(1<(W=(H=(0<B?H.replace(u,""):H).trim()).length))switch(0===A&&(f=H.charCodeAt(0),45===f||96<f&&123>f)&&(W=(H=H.replace(" ",":")).length),0<I&&void 0!==(_=a(1,H,n,e,L,T,j.length,c,d,c))&&0===(W=(H=_.trim()).length)&&(H="\0\0"),f=H.charCodeAt(0),p=H.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){G+=H+l.charAt(R);break}default:58!==H.charCodeAt(W-1)&&(j+=r(H,f,p,H.charCodeAt(2)))}F=B=A=f=0,H="",p=l.charCodeAt(++R)}}switch(p){case 13:case 10:47===C?C=0:0===1+f&&107!==c&&0<H.length&&(B=1,H+="\0"),0<I*P&&a(0,H,n,e,L,T,j.length,c,d,c),T=1,L++;break;case 59:case 125:if(0===C+k+x+S){T++;break}default:switch(T++,m=l.charAt(R),p){case 9:case 32:if(0===k+S+C)switch(E){case 44:case 58:case 9:case 32:m="";break;default:32!==p&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===k+C+S&&(B=F=1,m="\f"+m);break;case 108:if(0===k+C+S+N&&0<A)switch(R-A){case 2:112===E&&58===l.charCodeAt(R-3)&&(N=E);case 8:111===D&&(N=D)}break;case 58:0===k+C+S&&(A=R);break;case 44:0===C+x+k+S&&(B=1,m+="\r");break;case 34:case 39:0===C&&(k=k===p?0:0===k?p:k);break;case 91:0===k+C+x&&S++;break;case 93:0===k+C+x&&S--;break;case 41:0===k+C+S&&x--;break;case 40:if(0===k+C+S){if(0===f)switch(2*E+3*D){case 533:break;default:f=1}x++}break;case 64:0===C+x+k+S+A+g&&(g=1);break;case 42:case 47:if(!(0<k+S+x))switch(C){case 0:switch(2*p+3*l.charCodeAt(R+1)){case 235:C=47;break;case 220:W=R,C=42}break;case 42:47===p&&42===E&&W+2!==R&&(33===l.charCodeAt(W+2)&&(j+=l.substring(W,R+1)),m="",C=0)}}0===C&&(H+=m)}D=E,E=p,R++}if(0<(W=j.length)){if(B=n,0<I&&(void 0!==(_=a(2,j,B,e,L,T,W,c,d,c))&&0===(j=_).length))return G+j+U;if(j=B.join(",")+"{"+j+"}",0!=M*N){switch(2!==M||s(j,2)||(N=0),N){case 111:j=j.replace(y,":-moz-$1")+j;break;case 112:j=j.replace(v,"::-webkit-input-$1")+j.replace(v,"::-moz-$1")+j.replace(v,":-ms-input-$1")+j}N=0}}return G+j+U}function i(e,t,i){var r=t.trim().split(g);t=r;var s=r.length,o=e.length;switch(o){case 0:case 1:var a=0;for(e=0===o?"":e[0]+" ";a<s;++a)t[a]=n(e,t[a],i).trim();break;default:var l=a=0;for(t=[];a<s;++a)for(var c=0;c<o;++c)t[l++]=n(e[c]+" ",r[a],i).trim()}return t}function n(e,t,i){var n=t.charCodeAt(0);switch(33>n&&(n=(t=t.trim()).charCodeAt(0)),n){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*i&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,i,n){var o=e+";",a=2*t+3*i+4*n;if(944===a){e=o.indexOf(":",9)+1;var l=o.substring(e,o.length-1).trim();return l=o.substring(0,e).trim()+l+";",1===M||2===M&&s(l,1)?"-webkit-"+l+l:l}if(0===M||2===M&&!s(o,1))return o;switch(a){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(E,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(l=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+l+o;case 1005:return f.test(o)?o.replace(d,":-webkit-")+o.replace(d,":-moz-")+o:o;case 1e3:switch(t=(l=o.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=o.replace(_,"tb");break;case 232:l=o.replace(_,"tb-rl");break;case 220:l=o.replace(_,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+l+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,a=(l=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:o=o.replace(l,"-webkit-"+l)+";"+o;break;case 207:case 102:o=o.replace(l,"-webkit-"+(102<a?"inline-":"")+"box")+";"+o.replace(l,"-webkit-"+l)+";"+o.replace(l,"-ms-"+l+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return l=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+l+"-ms-flex-"+l+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(C,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(C,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===k.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,i,n).replace(":fill-available",":stretch"):o.replace(l,"-webkit-"+l)+o.replace(l,"-moz-"+l.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===i+n&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function s(e,t){var i=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?i:10);return i=e.substring(i+1,e.length-1),A(2!==t?n:n.replace(x,"$1"),i,t)}function o(e,t){var i=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return i!==t+";"?i.replace(S," or ($1)").substring(4):"("+t+")"}function a(e,t,i,n,r,s,o,a,l,h){for(var u,d=0,f=t;d<I;++d)switch(u=D[d].call(c,e,f,i,n,r,s,o,a,l,h)){case void 0:case!1:case!0:case null:break;default:f=u}if(f!==t)return f}function l(e){return void 0!==(e=e.prefix)&&(A=null,e?"function"!=typeof e?M=1:(M=2,A=e):M=0),l}function c(e,i){var n=e;if(33>n.charCodeAt(0)&&(n=n.trim()),n=[n],0<I){var r=a(-1,i,n,n,L,T,0,0,0,0);void 0!==r&&"string"==typeof r&&(i=r)}var s=t(O,n,i,0,0);return 0<I&&(void 0!==(r=a(-2,s,n,n,L,T,s.length,0,0,0))&&(s=r)),"",N=0,T=L=1,s}var h=/^\0+/g,u=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,g=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,b=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,y=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,S=/([\s\S]*?);/g,C=/-self|flex-/g,x=/[^]*?(:[rp][el]a[\w-]+)[^]*/,k=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,T=1,L=1,N=0,M=1,O=[],D=[],I=0,A=null,P=0;return c.use=function e(t){switch(t){case void 0:case null:I=D.length=0;break;default:if("function"==typeof t)D[I++]=t;else if("object"==typeof t)for(var i=0,n=t.length;i<n;++i)e(t[i]);else P=0|!!t}return e},c.set=l,void 0!==e&&l(e),c};var a="/*|*/";function l(e){e&&c.current.insert(e+"}")}var c={current:null},h=function(e,t,i,n,r,s,o,h,u,d){switch(e){case 1:switch(t.charCodeAt(0)){case 64:return c.current.insert(t+";"),"";case 108:if(98===t.charCodeAt(2))return""}break;case 2:if(0===h)return t+a;break;case 3:switch(h){case 102:case 112:return c.current.insert(i[0]+t),"";default:return t+(0===d?a:"")}case-2:t.split("/*|*/}").forEach(l)}};const u=function(e){void 0===e&&(e={});var t,i=e.key||"css";void 0!==e.prefix&&(t={prefix:e.prefix});var n=new o(t);var r,a={};r=e.container||document.head;var l,u=document.querySelectorAll("style[data-emotion-"+i+"]");Array.prototype.forEach.call(u,(function(e){e.getAttribute("data-emotion-"+i).split(" ").forEach((function(e){a[e]=!0})),e.parentNode!==r&&r.appendChild(e)})),n.use(e.stylisPlugins)(h),l=function(e,t,i,r){var s=t.name;c.current=i,n(e,t.styles),r&&(d.inserted[s]=!0)};var d={key:i,sheet:new s({key:i,container:r,nonce:e.nonce,speedy:e.speedy}),nonce:e.nonce,inserted:a,registered:{},insert:l};return d};i(85354);var d=i(2015),f=(Object.prototype.hasOwnProperty,(0,r.createContext)("undefined"!=typeof HTMLElement?u():null)),p=(0,r.createContext)({}),g=(f.Provider,function(e){var t=function(t,i){return(0,r.createElement)(f.Consumer,null,(function(n){return e(t,n,i)}))};return(0,r.forwardRef)(t)});var m=i(68087);r.Component;var b=function e(t){for(var i=t.length,n=0,r="";n<i;n++){var s=t[n];if(null!=s){var o=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))o=e(s);else for(var a in o="",s)s[a]&&a&&(o&&(o+=" "),o+=a);break;default:o=s}o&&(r&&(r+=" "),r+=o)}}return r};function v(e,t,i){var n=[],r=(0,m.f)(e,n,i);return n.length<2?i:r+t(n)}g((function(e,t){return(0,r.createElement)(p.Consumer,null,(function(i){var n=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=(0,d.O)(i,t.registered);return(0,m.M)(t,r,!1),t.key+"-"+r.name},r={css:n,cx:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return v(t.registered,n,b(i))},theme:i},s=e.children(r);return!0,s}))}))},12717:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=function(e){var t={};return function(i){return void 0===t[i]&&(t[i]=e(i)),t[i]}}},2015:(e,t,i)=>{"use strict";i.d(t,{O:()=>g});const n=function(e){for(var t,i=0,n=0,r=e.length;r>=4;++n,r-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),i=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&i)+(59797*(i>>>16)<<16);switch(r){case 3:i^=(255&e.charCodeAt(n+2))<<16;case 2:i^=(255&e.charCodeAt(n+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(n)))+(59797*(i>>>16)<<16)}return(((i=1540483477*(65535&(i^=i>>>13))+(59797*(i>>>16)<<16))^i>>>15)>>>0).toString(36)};const r={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var s=i(12717),o=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!=typeof e},h=(0,s.Z)((function(e){return l(e)?e:e.replace(o,"-$&").toLowerCase()})),u=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(a,(function(e,t,i){return f={name:t,styles:i,next:f},t}))}return 1===r[e]||l(e)||"number"!=typeof t||0===t?t:t+"px"};function d(e,t,i,n){if(null==i)return"";if(void 0!==i.__emotion_styles)return i;switch(typeof i){case"boolean":return"";case"object":if(1===i.anim)return f={name:i.name,styles:i.styles,next:f},i.name;if(void 0!==i.styles){var r=i.next;if(void 0!==r)for(;void 0!==r;)f={name:r.name,styles:r.styles,next:f},r=r.next;return i.styles+";"}return function(e,t,i){var n="";if(Array.isArray(i))for(var r=0;r<i.length;r++)n+=d(e,t,i[r],!1);else for(var s in i){var o=i[s];if("object"!=typeof o)null!=t&&void 0!==t[o]?n+=s+"{"+t[o]+"}":c(o)&&(n+=h(s)+":"+u(s,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=d(e,t,o,!1);switch(s){case"animation":case"animationName":n+=h(s)+":"+a+";";break;default:n+=s+"{"+a+"}"}}else for(var l=0;l<o.length;l++)c(o[l])&&(n+=h(s)+":"+u(s,o[l])+";")}return n}(e,t,i);case"function":if(void 0!==e){var s=f,o=i(e);return f=s,d(e,t,o,n)}break;case"string":}if(null==t)return i;var a=t[i];return void 0===a||n?i:a}var f,p=/label:\s*([^\s;\n{]+)\s*;/g;var g=function(e,t,i){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,s="";f=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,s+=d(i,t,o,!1)):s+=o[0];for(var a=1;a<e.length;a++)s+=d(i,t,e[a],46===s.charCodeAt(s.length-1)),r&&(s+=o[a]);p.lastIndex=0;for(var l,c="";null!==(l=p.exec(s));)c+="-"+l[1];return{name:n(s)+c,styles:s,next:f}}},80395:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var n=i(59713),r=i.n(n),s=i(67294),o=i(12717),a=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const l=(0,o.Z)((function(e){return a.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var c=i(87077),h=i(68087),u=i(2015),d=l,f=function(e){return"theme"!==e&&"innerRef"!==e},p=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?d:f};function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(i,!0).forEach((function(t){r()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b=function e(t,i){var n,r,o;void 0!==i&&(n=i.label,o=i.target,r=t.__emotion_forwardProp&&i.shouldForwardProp?function(e){return t.__emotion_forwardProp(e)&&i.shouldForwardProp(e)}:i.shouldForwardProp);var a=t.__emotion_real===t,l=a&&t.__emotion_base||t;"function"!=typeof r&&a&&(r=t.__emotion_forwardProp);var d=r||p(l),f=!d("as");return function(){var g=arguments,b=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&b.push("label:"+n+";"),null==g[0]||void 0===g[0].raw)b.push.apply(b,g);else{0,b.push(g[0][0]);for(var v=g.length,y=1;y<v;y++)b.push(g[y],g[0][y])}var _=(0,c.Xn)((function(e,t,i){return(0,s.createElement)(c.Ni.Consumer,null,(function(n){var a=f&&e.as||l,c="",g=[],m=e;if(null==e.theme){for(var v in m={},e)m[v]=e[v];m.theme=n}"string"==typeof e.className?c=(0,h.f)(t.registered,g,e.className):null!=e.className&&(c=e.className+" ");var y=(0,u.O)(b.concat(g),t.registered,m);(0,h.M)(t,y,"string"==typeof a);c+=t.key+"-"+y.name,void 0!==o&&(c+=" "+o);var _=f&&void 0===r?p(a):d,w={};for(var S in e)f&&"as"===S||_(S)&&(w[S]=e[S]);return w.className=c,w.ref=i||e.innerRef,(0,s.createElement)(a,w)}))}));return _.displayName=void 0!==n?n:"Styled("+("string"==typeof l?l:l.displayName||l.name||"Component")+")",_.defaultProps=t.defaultProps,_.__emotion_real=_,_.__emotion_base=l,_.__emotion_styles=b,_.__emotion_forwardProp=r,Object.defineProperty(_,"toString",{value:function(){return"."+o}}),_.withComponent=function(t,n){return e(t,void 0!==n?m({},i||{},{},n):i).apply(void 0,b)},_}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){b[e]=b(e)}));const v=b},68087:(e,t,i)=>{"use strict";i.d(t,{f:()=>n,M:()=>r});function n(e,t,i){var n="";return i.split(" ").forEach((function(i){void 0!==e[i]?t.push(e[i]):n+=i+" "})),n}var r=function(e,t,i){var n=e.key+"-"+t.name;if(!1===i&&void 0===e.registered[n]&&(e.registered[n]=t.styles),void 0===e.inserted[t.name]){var r=t;do{e.insert("."+n,r,e.sheet,!0);r=r.next}while(void 0!==r)}}},21513:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}(i(53593))},53593:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(35747),s=n(i(11227)).default("@kwsites/file-exists");t.exists=function(e,i=t.READABLE){return function(e,t,i){s("checking %s",e);try{const n=r.statSync(e);return n.isFile()&&t?(s("[OK] path represents a file"),!0):n.isDirectory()&&i?(s("[OK] path represents a directory"),!0):(s("[FAIL] path represents something other than a file or directory"),!1)}catch(e){if("ENOENT"===e.code)return s("[FAIL] path is not accessible: %o",e),!1;throw s("[FATAL] %o",e),e}}(e,(i&t.FILE)>0,(i&t.FOLDER)>0)},t.FILE=1,t.FOLDER=2,t.READABLE=t.FILE+t.FOLDER},12443:(e,t)=>{"use strict";function i(){let e,t,i="pending";return{promise:new Promise(((i,n)=>{e=i,t=n})),done(t){"pending"===i&&(i="resolved",e(t))},fail(e){"pending"===i&&(i="rejected",t(e))},get fulfilled(){return"pending"!==i},get status(){return i}}}Object.defineProperty(t,"__esModule",{value:!0}),t.createDeferred=t.deferred=void 0,t.deferred=i,t.createDeferred=i,t.default=i},62087:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=i(22122),r=i(81253),s=i(67294),o=(i(45697),i(86010)),a=i(14670),l=i(93871),c=s.forwardRef((function(e,t){var i=e.children,a=e.classes,c=e.className,h=e.color,u=void 0===h?"inherit":h,d=e.component,f=void 0===d?"svg":d,p=e.fontSize,g=void 0===p?"medium":p,m=e.htmlColor,b=e.titleAccess,v=e.viewBox,y=void 0===v?"0 0 24 24":v,_=(0,r.Z)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return s.createElement(f,(0,n.Z)({className:(0,o.Z)(a.root,c,"inherit"!==u&&a["color".concat((0,l.Z)(u))],"default"!==g&&"medium"!==g&&a["fontSize".concat((0,l.Z)(g))]),focusable:"false",viewBox:y,color:m,"aria-hidden":!b||void 0,role:b?"img":void 0,ref:t},_),i,b?s.createElement("title",null,b):null)}));c.muiName="SvgIcon";const h=(0,a.Z)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(c)},59693:(e,t,i)=>{"use strict";i.d(t,{mi:()=>a,_4:()=>c,Fq:()=>h,_j:()=>u,$n:()=>d});var n=i(60288);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),i)}function s(e){if(e.type)return e;if("#"===e.charAt(0))return s(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),i=e.match(t);return i&&1===i[0].length&&(i=i.map((function(e){return e+e}))),i?"rgb".concat(4===i.length?"a":"","(").concat(i.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),i=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(i))throw new Error((0,n.Z)(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:i,values:r=r.map((function(e){return parseFloat(e)}))}}function o(e){var t=e.type,i=e.values;return-1!==t.indexOf("rgb")?i=i.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(i[1]="".concat(i[1],"%"),i[2]="".concat(i[2],"%")),"".concat(t,"(").concat(i.join(", "),")")}function a(e,t){var i=l(e),n=l(t);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)}function l(e){var t="hsl"===(e=s(e)).type?s(function(e){var t=(e=s(e)).values,i=t[0],n=t[1]/100,r=t[2]/100,a=n*Math.min(r,1-r),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+i/30)%12;return r-a*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",h=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(c+="a",h.push(t[3])),o({type:c,values:h})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return l(e)>.5?u(e,t):d(e,t)}function h(e,t){return e=s(e),t=r(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,o(e)}function u(e,t){if(e=s(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var i=0;i<3;i+=1)e.values[i]*=1-t;return o(e)}function d(e,t){if(e=s(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;return o(e)}},57850:(e,t,i)=>{"use strict";i.d(t,{A:()=>B,Z:()=>F});var n=i(81253),r=i(35953),s=i(22122),o=["xs","sm","md","lg","xl"];function a(e){var t=e.values,i=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,a=void 0===r?"px":r,l=e.step,c=void 0===l?5:l,h=(0,n.Z)(e,["values","unit","step"]);function u(e){var t="number"==typeof i[e]?i[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function d(e,t){var n=o.indexOf(t);return n===o.length-1?u(e):"@media (min-width:".concat("number"==typeof i[e]?i[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==n&&"number"==typeof i[o[n+1]]?i[o[n+1]]:t)-c/100).concat(a,")")}return(0,s.Z)({keys:o,values:i,up:u,down:function(e){var t=o.indexOf(e)+1,n=i[o[t]];return t===o.length?u("xs"):"@media (max-width:".concat(("number"==typeof n&&t>0?n:e)-c/100).concat(a,")")},between:d,only:function(e){return d(e,e)},width:function(e){return i[e]}},h)}var l=i(96156);function c(e,t,i){var n;return(0,s.Z)({gutters:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,s.Z)({paddingLeft:t(2),paddingRight:t(2)},i,(0,l.Z)({},e.up("sm"),(0,s.Z)({paddingLeft:t(3),paddingRight:t(3)},i[e.up("sm")])))},toolbar:(n={minHeight:56},(0,l.Z)(n,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,l.Z)(n,e.up("sm"),{minHeight:64}),n)},i)}var h=i(60288);const u={black:"#000",white:"#fff"};const d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};const f={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};const p={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"};const g={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};const m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};const b={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};const v={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var y=i(59693),_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:u.white,default:d[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},w={text:{primary:u.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:d[800],default:"#303030"},action:{active:u.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function S(e,t,i,n){var r=n.light||n,s=n.dark||1.5*n;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:"light"===t?e.light=(0,y.$n)(e.main,r):"dark"===t&&(e.dark=(0,y._j)(e.main,s)))}function C(e){var t=e.primary,i=void 0===t?{light:f[300],main:f[500],dark:f[700]}:t,o=e.secondary,a=void 0===o?{light:p.A200,main:p.A400,dark:p.A700}:o,l=e.error,c=void 0===l?{light:g[300],main:g[500],dark:g[700]}:l,C=e.warning,x=void 0===C?{light:m[300],main:m[500],dark:m[700]}:C,k=e.info,E=void 0===k?{light:b[300],main:b[500],dark:b[700]}:k,T=e.success,L=void 0===T?{light:v[300],main:v[500],dark:v[700]}:T,N=e.type,M=void 0===N?"light":N,O=e.contrastThreshold,D=void 0===O?3:O,I=e.tonalOffset,A=void 0===I?.2:I,P=(0,n.Z)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function R(e){return(0,y.mi)(e,w.text.primary)>=D?w.text.primary:_.text.primary}var B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,s.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error((0,h.Z)(4,t));if("string"!=typeof e.main)throw new Error((0,h.Z)(5,JSON.stringify(e.main)));return S(e,"light",i,A),S(e,"dark",n,A),e.contrastText||(e.contrastText=R(e.main)),e},F={dark:w,light:_};return(0,r.Z)((0,s.Z)({common:u,type:M,primary:B(i),secondary:B(a,"A400","A200","A700"),error:B(c),warning:B(x),info:B(E),success:B(L),grey:d,contrastThreshold:D,getContrastText:R,augmentColor:B,tonalOffset:A},F[M]),P)}function x(e){return Math.round(1e5*e)/1e5}function k(e){return x(e)}var E={textTransform:"uppercase"},T='"Roboto", "Helvetica", "Arial", sans-serif';function L(e,t){var i="function"==typeof t?t(e):t,o=i.fontFamily,a=void 0===o?T:o,l=i.fontSize,c=void 0===l?14:l,h=i.fontWeightLight,u=void 0===h?300:h,d=i.fontWeightRegular,f=void 0===d?400:d,p=i.fontWeightMedium,g=void 0===p?500:p,m=i.fontWeightBold,b=void 0===m?700:m,v=i.htmlFontSize,y=void 0===v?16:v,_=i.allVariants,w=i.pxToRem,S=(0,n.Z)(i,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var C=c/14,L=w||function(e){return"".concat(e/y*C,"rem")},N=function(e,t,i,n,r){return(0,s.Z)({fontFamily:a,fontWeight:e,fontSize:L(t),lineHeight:i},a===T?{letterSpacing:"".concat(x(n/t),"em")}:{},r,_)},M={h1:N(u,96,1.167,-1.5),h2:N(u,60,1.2,-.5),h3:N(f,48,1.167,0),h4:N(f,34,1.235,.25),h5:N(f,24,1.334,0),h6:N(g,20,1.6,.15),subtitle1:N(f,16,1.75,.15),subtitle2:N(g,14,1.57,.1),body1:N(f,16,1.5,.15),body2:N(f,14,1.43,.15),button:N(g,14,1.75,.4,E),caption:N(f,12,1.66,.4),overline:N(f,12,2.66,1,E)};return(0,r.Z)((0,s.Z)({htmlFontSize:y,pxToRem:L,round:k,fontFamily:a,fontSize:c,fontWeightLight:u,fontWeightRegular:f,fontWeightMedium:g,fontWeightBold:b},M),S,{clone:!1})}function N(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const M=["none",N(0,2,1,-1,0,1,1,0,0,1,3,0),N(0,3,1,-2,0,2,2,0,0,1,5,0),N(0,3,3,-2,0,3,4,0,0,1,8,0),N(0,2,4,-1,0,4,5,0,0,1,10,0),N(0,3,5,-1,0,5,8,0,0,1,14,0),N(0,3,5,-1,0,6,10,0,0,1,18,0),N(0,4,5,-2,0,7,10,1,0,2,16,1),N(0,5,5,-3,0,8,10,1,0,3,14,2),N(0,5,6,-3,0,9,12,1,0,3,16,2),N(0,6,6,-3,0,10,14,1,0,4,18,3),N(0,6,7,-4,0,11,15,1,0,4,20,3),N(0,7,8,-4,0,12,17,2,0,5,22,4),N(0,7,8,-4,0,13,19,2,0,5,24,4),N(0,7,9,-4,0,14,21,2,0,5,26,4),N(0,8,9,-5,0,15,22,2,0,6,28,5),N(0,8,10,-5,0,16,24,2,0,6,30,5),N(0,8,11,-5,0,17,26,2,0,6,32,5),N(0,9,11,-5,0,18,28,2,0,7,34,6),N(0,9,12,-6,0,19,29,2,0,7,36,6),N(0,10,13,-6,0,20,31,3,0,8,38,7),N(0,10,13,-6,0,21,33,3,0,8,40,7),N(0,10,14,-6,0,22,35,3,0,8,42,7),N(0,11,14,-7,0,23,36,3,0,9,44,8),N(0,11,15,-7,0,24,38,3,0,9,46,8)];const O={borderRadius:4};var D=i(38681);function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,D.h)({spacing:e}),i=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return 0===i.length?t(1):1===i.length?t(i[0]):i.map((function(e){if("string"==typeof e)return e;var i=t(e);return"number"==typeof i?"".concat(i,"px"):i})).join(" ")};return Object.defineProperty(i,"unit",{get:function(){return e}}),i.mui=!0,i}var A=i(43366),P=i(92781);function R(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,i=void 0===t?{}:t,s=e.mixins,o=void 0===s?{}:s,l=e.palette,h=void 0===l?{}:l,u=e.spacing,d=e.typography,f=void 0===d?{}:d,p=(0,n.Z)(e,["breakpoints","mixins","palette","spacing","typography"]),g=C(h),m=a(i),b=I(u),v=(0,r.Z)({breakpoints:m,direction:"ltr",mixins:c(m,b,o),overrides:{},palette:g,props:{},shadows:M,typography:L(g,f),spacing:b,shape:O,transitions:A.ZP,zIndex:P.Z},p),y=arguments.length,_=new Array(y>1?y-1:0),w=1;w<y;w++)_[w-1]=arguments[w];return v=_.reduce((function(e,t){return(0,r.Z)(e,t)}),v)}function B(){return R.apply(void 0,arguments)}const F=R},99700:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=(0,i(57850).Z)()},43366:(e,t,i)=>{"use strict";i.d(t,{x9:()=>s,ZP:()=>a});var n=i(81253),r={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function o(e){return"".concat(Math.round(e),"ms")}const a={easing:r,duration:s,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.duration,a=void 0===i?s.standard:i,l=t.easing,c=void 0===l?r.easeInOut:l,h=t.delay,u=void 0===h?0:h;(0,n.Z)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"==typeof a?a:o(a)," ").concat(c," ").concat("string"==typeof u?u:o(u))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}}},14670:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var n=i(22122),r=i(81253),s=i(67294),o=(i(45697),i(8679)),a=i.n(o),l=i(30115),c=i(93869),h=i(159);const u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i){var o=t.defaultTheme,u=t.withTheme,d=void 0!==u&&u,f=t.name,p=(0,r.Z)(t,["defaultTheme","withTheme","name"]);var g=f,m=(0,l.Z)(e,(0,n.Z)({defaultTheme:o,Component:i,name:f||i.displayName,classNamePrefix:g},p)),b=s.forwardRef((function(e,t){e.classes;var a,l=e.innerRef,u=(0,r.Z)(e,["classes","innerRef"]),p=m((0,n.Z)({},i.defaultProps,e)),g=u;return("string"==typeof f||d)&&(a=(0,h.Z)()||o,f&&(g=(0,c.Z)({theme:a,name:f,props:u})),d&&!g.theme&&(g.theme=a)),s.createElement(i,(0,n.Z)({ref:l||t,classes:p},g))}));return a()(b,i),b}};var d=i(99700);const f=function(e,t){return u(e,(0,n.Z)({defaultTheme:d.Z},t))}},92781:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},93871:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(60288);function r(e){if("string"!=typeof e)throw new Error((0,n.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},82568:(e,t,i)=>{"use strict";function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((function(e,t){return null==t?e:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];e.apply(this,n),t.apply(this,n)}}),(function(){}))}i.d(t,{Z:()=>n})},63786:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(22122),r=i(67294),s=i(62087);function o(e,t){var i=function(t,i){return r.createElement(s.Z,(0,n.Z)({ref:i},t),e)};return i.muiName=s.Z.muiName,r.memo(r.forwardRef(i))}},79437:(e,t,i)=>{"use strict";function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function n(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var o=this,a=function(){e.apply(o,r)};clearTimeout(t),t=setTimeout(a,i)}return n.clear=function(){clearTimeout(t)},n}i.d(t,{Z:()=>n})},28546:(e,t,i)=>{"use strict";i.r(t),i.d(t,{capitalize:()=>n.Z,createChainedFunction:()=>r.Z,createSvgIcon:()=>s.Z,debounce:()=>o.Z,deprecatedPropType:()=>a,isMuiElement:()=>l.Z,ownerDocument:()=>c.Z,ownerWindow:()=>h.Z,requirePropFactory:()=>u,setRef:()=>d.Z,unstable_useId:()=>b.Z,unsupportedProp:()=>f,useControlled:()=>p.Z,useEventCallback:()=>g.Z,useForkRef:()=>m.Z,useIsFocusVisible:()=>v.Z});var n=i(93871),r=i(82568),s=i(63786),o=i(79437);function a(e,t){return function(){return null}}var l=i(83711),c=i(30626),h=i(80713);function u(e){return function(){return null}}var d=i(34236);function f(e,t,i,n,r){return null}var p=i(22775),g=i(55192),m=i(17294),b=i(95001),v=i(24896)},83711:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(67294);function r(e,t){return n.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},30626:(e,t,i)=>{"use strict";function n(e){return e&&e.ownerDocument||document}i.d(t,{Z:()=>n})},80713:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(30626);function r(e){return(0,n.Z)(e).defaultView||window}},34236:(e,t,i)=>{"use strict";function n(e,t){"function"==typeof e?e(t):e&&(e.current=t)}i.d(t,{Z:()=>n})},95001:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(67294);function r(e){var t=n.useState(e),i=t[0],r=t[1],s=e||i;return n.useEffect((function(){null==i&&r("mui-".concat(Math.round(1e5*Math.random())))}),[i]),s}},22775:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(67294);function r(e){var t=e.controlled,i=e.default,r=(e.name,e.state,n.useRef(void 0!==t).current),s=n.useState(i),o=s[0],a=s[1];return[r?t:o,n.useCallback((function(e){r||a(e)}),[])]}},55192:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(67294),r="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;function s(e){var t=n.useRef(e);return r((function(){t.current=e})),n.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},17294:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(67294),r=i(34236);function s(e,t){return n.useMemo((function(){return null==e&&null==t?null:function(i){(0,r.Z)(e,i),(0,r.Z)(t,i)}}),[e,t])}},24896:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var n=i(67294),r=i(73935),s=!0,o=!1,a=null,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(s=!0)}function h(){s=!1}function u(){"hidden"===this.visibilityState&&o&&(s=!0)}function d(e){var t,i,n,r=e.target;try{return r.matches(":focus-visible")}catch(e){}return s||(i=(t=r).type,!("INPUT"!==(n=t.tagName)||!l[i]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable)}function f(){o=!0,window.clearTimeout(a),a=window.setTimeout((function(){o=!1}),100)}function p(){return{isFocusVisible:d,onBlurVisible:f,ref:n.useCallback((function(e){var t,i=r.findDOMNode(e);null!=i&&((t=i.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",h,!0),t.addEventListener("pointerdown",h,!0),t.addEventListener("touchstart",h,!0),t.addEventListener("visibilitychange",u,!0))}),[])}}},40341:(e,t)=>{"use strict";var i=60103,n=60106,r=60107,s=60108,o=60114,a=60109,l=60110,c=60112,h=60113,u=60120,d=60115,f=60116,p=60121,g=60122,m=60117,b=60129,v=60131;if("function"==typeof Symbol&&Symbol.for){var y=Symbol.for;i=y("react.element"),n=y("react.portal"),r=y("react.fragment"),s=y("react.strict_mode"),o=y("react.profiler"),a=y("react.provider"),l=y("react.context"),c=y("react.forward_ref"),h=y("react.suspense"),u=y("react.suspense_list"),d=y("react.memo"),f=y("react.lazy"),p=y("react.block"),g=y("react.server.block"),m=y("react.fundamental"),b=y("react.debug_trace_mode"),v=y("react.legacy_hidden")}function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case r:case o:case s:case h:case u:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case d:case a:return e;default:return t}}case n:return t}}}},65122:(e,t,i)=>{"use strict";i(40341)},96470:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z"}),"CreateNewFolder");t.Z=o},28428:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=o},67879:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"}),"Description");t.Z=o},35025:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.Z=o},64566:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.Z=o},81146:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");t.Z=o},73770:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"Pause");t.Z=o},66652:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M8 5v14l11-7z"}),"PlayArrow");t.Z=o},9753:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"}),"Repeat");t.Z=o},428:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}),"Replay");t.Z=o},20008:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"}),"SkipPrevious");t.Z=o},43776:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}),"Timer");t.Z=o},52541:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"}),"VolumeDown");t.Z=o},90651:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M7 9v6h4l5 5V4l-5 5H7z"}),"VolumeMute");t.Z=o},91366:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"}),"VolumeOff");t.Z=o},97429:(e,t,i)=>{"use strict";var n=i(95318),r=i(20862);t.Z=void 0;var s=r(i(67294)),o=(0,n(i(2108)).default)(s.createElement("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"}),"VolumeUp");t.Z=o},2108:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=i(28546)},82674:(e,t)=>{"use strict";var i=60103,n=60106,r=60107,s=60108,o=60114,a=60109,l=60110,c=60112,h=60113,u=60120,d=60115,f=60116,p=60121,g=60122,m=60117,b=60129,v=60131;if("function"==typeof Symbol&&Symbol.for){var y=Symbol.for;i=y("react.element"),n=y("react.portal"),r=y("react.fragment"),s=y("react.strict_mode"),o=y("react.profiler"),a=y("react.provider"),l=y("react.context"),c=y("react.forward_ref"),h=y("react.suspense"),u=y("react.suspense_list"),d=y("react.memo"),f=y("react.lazy"),p=y("react.block"),g=y("react.server.block"),m=y("react.fundamental"),b=y("react.debug_trace_mode"),v=y("react.legacy_hidden")}function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case r:case o:case s:case h:case u:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case d:case a:return e;default:return t}}case n:return t}}}},74352:(e,t,i)=>{"use strict";i(82674)},17076:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__"},93869:(e,t,i)=>{"use strict";function n(e){var t=e.theme,i=e.name,n=e.props;if(!t||!t.props||!t.props[i])return n;var r,s=t.props[i];for(r in s)void 0===n[r]&&(n[r]=s[r]);return n}i.d(t,{Z:()=>n})},30115:(e,t,i)=>{"use strict";i.d(t,{Z:()=>di});var n=i(81253),r=i(22122),s=i(67294),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};const a="object"===("undefined"==typeof window?"undefined":o(window))&&"object"===("undefined"==typeof document?"undefined":o(document))&&9===document.nodeType;var l=i(5991),c=i(93552),h=i(63349),u=i(19756),d={}.constructor;function f(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(f);if(e.constructor!==d)return e;var t={};for(var i in e)t[i]=f(e[i]);return t}function p(e,t,i){void 0===e&&(e="unnamed");var n=i.jss,r=f(t),s=n.plugins.onCreateRule(e,r,i);return s||(e[0],null)}var g=function(e,t){for(var i="",n=0;n<e.length&&"!important"!==e[n];n++)i&&(i+=t),i+=e[n];return i},m=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var i="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)i&&(i+=", "),i+=g(e[n]," ");else i=g(e,", ");return t||"!important"!==e[e.length-1]||(i+=" !important"),i};function b(e,t){for(var i="",n=0;n<t;n++)i+="  ";return i+e}function v(e,t,i){void 0===i&&(i={});var n="";if(!t)return n;var r=i.indent,s=void 0===r?0:r,o=t.fallbacks;if(e&&s++,o)if(Array.isArray(o))for(var a=0;a<o.length;a++){var l=o[a];for(var c in l){var h=l[c];null!=h&&(n&&(n+="\n"),n+=b(c+": "+m(h)+";",s))}}else for(var u in o){var d=o[u];null!=d&&(n&&(n+="\n"),n+=b(u+": "+m(d)+";",s))}for(var f in t){var p=t[f];null!=p&&"fallbacks"!==f&&(n&&(n+="\n"),n+=b(f+": "+m(p)+";",s))}return(n||i.allowEmpty)&&e?(n&&(n="\n"+n+"\n"),b(e+" {"+n,--s)+b("}",s)):n}var y=/([[\].#*$><+~=|^:(),"'`\s])/g,_="undefined"!=typeof CSS&&CSS.escape,w=function(e){return _?_(e):e.replace(y,"\\$1")},S=function(){function e(e,t,i){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var n=i.sheet,r=i.Renderer;this.key=e,this.options=i,this.style=t,n?this.renderer=n.renderer:r&&(this.renderer=new r)}return e.prototype.prop=function(e,t,i){if(void 0===t)return this.style[e];var n=!!i&&i.force;if(!n&&this.style[e]===t)return this;var r=t;i&&!1===i.process||(r=this.options.jss.plugins.onChangeValue(t,e,this));var s=null==r||!1===r,o=e in this.style;if(s&&!o&&!n)return this;var a=s&&o;if(a?delete this.style[e]:this.style[e]=r,this.renderable&&this.renderer)return a?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,r),this;var l=this.options.sheet;return l&&l.attached,this},e}(),C=function(e){function t(t,i,n){var r;(r=e.call(this,t,i,n)||this).selectorText=void 0,r.id=void 0,r.renderable=void 0;var s=n.selector,o=n.scoped,a=n.sheet,l=n.generateId;return s?r.selectorText=s:!1!==o&&(r.id=l((0,h.Z)((0,h.Z)(r)),a),r.selectorText="."+w(r.id)),r}(0,c.Z)(t,e);var i=t.prototype;return i.applyTo=function(e){var t=this.renderer;if(t){var i=this.toJSON();for(var n in i)t.setProperty(e,n,i[n])}return this},i.toJSON=function(){var e={};for(var t in this.style){var i=this.style[t];"object"!=typeof i?e[t]=i:Array.isArray(i)&&(e[t]=m(i))}return e},i.toString=function(e){var t=this.options.sheet,i=!!t&&t.options.link?(0,r.Z)({},e,{allowEmpty:!0}):e;return v(this.selectorText,this.style,i)},(0,l.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,i=this.renderable;if(i&&t)t.setSelector(i,e)||t.replaceRule(i,this)}},get:function(){return this.selectorText}}]),t}(S),x={onCreateRule:function(e,t,i){return"@"===e[0]||i.parent&&"keyframes"===i.parent.type?null:new C(e,t,i)}},k={indent:1,children:!0},E=/@([\w-]+)/,T=function(){function e(e,t,i){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e;var n=e.match(E);for(var s in this.at=n?n[1]:"unknown",this.query=i.name||"@"+this.at,this.options=i,this.rules=new Y((0,r.Z)({},i,{parent:this})),t)this.rules.add(s,t[s]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,i){var n=this.rules.add(e,t,i);return n?(this.options.jss.plugins.onProcessRule(n),n):null},t.toString=function(e){if(void 0===e&&(e=k),null==e.indent&&(e.indent=k.indent),null==e.children&&(e.children=k.children),!1===e.children)return this.query+" {}";var t=this.rules.toString(e);return t?this.query+" {\n"+t+"\n}":""},e}(),L=/@media|@supports\s+/,N={onCreateRule:function(e,t,i){return L.test(e)?new T(e,t,i):null}},M={indent:1,children:!0},O=/@keyframes\s+([\w-]+)/,D=function(){function e(e,t,i){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var n=e.match(O);n&&n[1]?this.name=n[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var s=i.scoped,o=i.sheet,a=i.generateId;for(var l in this.id=!1===s?this.name:w(a(this,o)),this.rules=new Y((0,r.Z)({},i,{parent:this})),t)this.rules.add(l,t[l],(0,r.Z)({},i,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){if(void 0===e&&(e=M),null==e.indent&&(e.indent=M.indent),null==e.children&&(e.children=M.children),!1===e.children)return this.at+" "+this.id+" {}";var t=this.rules.toString(e);return t&&(t="\n"+t+"\n"),this.at+" "+this.id+" {"+t+"}"},e}(),I=/@keyframes\s+/,A=/\$([\w-]+)/g,P=function(e,t){return"string"==typeof e?e.replace(A,(function(e,i){return i in t?t[i]:e})):e},R=function(e,t,i){var n=e[t],r=P(n,i);r!==n&&(e[t]=r)},B={onCreateRule:function(e,t,i){return"string"==typeof e&&I.test(e)?new D(e,t,i):null},onProcessStyle:function(e,t,i){return"style"===t.type&&i?("animation-name"in e&&R(e,"animation-name",i.keyframes),"animation"in e&&R(e,"animation",i.keyframes),e):e},onChangeValue:function(e,t,i){var n=i.options.sheet;if(!n)return e;switch(t){case"animation":case"animation-name":return P(e,n.keyframes);default:return e}}},F=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).renderable=void 0,t}return(0,c.Z)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,i=!!t&&t.options.link?(0,r.Z)({},e,{allowEmpty:!0}):e;return v(this.key,this.style,i)},t}(S),W={onCreateRule:function(e,t,i){return i.parent&&"keyframes"===i.parent.type?new F(e,t,i):null}},V=function(){function e(e,t,i){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=i}return e.prototype.toString=function(e){if(Array.isArray(this.style)){for(var t="",i=0;i<this.style.length;i++)t+=v(this.at,this.style[i]),this.style[i+1]&&(t+="\n");return t}return v(this.at,this.style,e)},e}(),z=/@font-face/,H={onCreateRule:function(e,t,i){return z.test(e)?new V(e,t,i):null}},j=function(){function e(e,t,i){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=i}return e.prototype.toString=function(e){return v(this.key,this.style,e)},e}(),U={onCreateRule:function(e,t,i){return"@viewport"===e||"@-ms-viewport"===e?new j(e,t,i):null}},G=function(){function e(e,t,i){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.value=t,this.options=i}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",i=0;i<this.value.length;i++)t+=this.key+" "+this.value[i]+";",this.value[i+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),K={"@charset":!0,"@import":!0,"@namespace":!0},$=[x,N,B,W,H,U,{onCreateRule:function(e,t,i){return e in K?new G(e,t,i):null}}],q={process:!0},Z={force:!0,process:!0},Y=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,i){var n=this.options,s=n.parent,o=n.sheet,a=n.jss,l=n.Renderer,c=n.generateId,h=n.scoped,u=(0,r.Z)({classes:this.classes,parent:s,sheet:o,jss:a,Renderer:l,generateId:c,scoped:h,name:e,keyframes:this.keyframes,selector:void 0},i),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(u.selector="."+w(this.classes[d]));var f=p(d,t,u);if(!f)return null;this.register(f);var g=void 0===u.index?this.index.length:u.index;return this.index.splice(g,0,f),f},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof C?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof D&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof C?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof D&&delete this.keyframes[e.name]},t.update=function(){var e,t,i;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.map[e],t,i);else for(var n=0;n<this.index.length;n++)this.updateOne(this.index[n],t,i)},t.updateOne=function(t,i,n){void 0===n&&(n=q);var r=this.options,s=r.jss.plugins,o=r.sheet;if(t.rules instanceof e)t.rules.update(i,n);else{var a=t,l=a.style;if(s.onUpdate(i,t,o,n),n.process&&l&&l!==a.style){for(var c in s.onProcessStyle(a.style,a,o),a.style){var h=a.style[c];h!==l[c]&&a.prop(c,h,Z)}for(var u in l){var d=a.style[u],f=l[u];null==d&&d!==f&&a.prop(u,null,Z)}}}},t.toString=function(e){for(var t="",i=this.options.sheet,n=!!i&&i.options.link,r=0;r<this.index.length;r++){var s=this.index[r].toString(e);(s||n)&&(t&&(t+="\n"),t+=s)}return t},e}(),X=function(){function e(e,t){for(var i in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,r.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Y(this.options),e)this.rules.add(i,e[i]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,i){var n=this.queue;this.attached&&!n&&(this.queue=[]);var r=this.rules.add(e,t,i);return r?(this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(n?n.push(r):(this.insertRule(r),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),r):r:(this.deployed=!1,r)):null},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var i=[];for(var n in e){var r=this.addRule(n,e[n],t);r&&i.push(r)}return i},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,i){return this.rules.updateOne(e,t,i),this},t.toString=function(e){return this.rules.toString(e)},e}(),Q=function(){function e(){this.plugins={internal:[],external:[]},this.registry=void 0}var t=e.prototype;return t.onCreateRule=function(e,t,i){for(var n=0;n<this.registry.onCreateRule.length;n++){var r=this.registry.onCreateRule[n](e,t,i);if(r)return r}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,i){for(var n=0;n<this.registry.onProcessStyle.length;n++)t.style=this.registry.onProcessStyle[n](t.style,t,i)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,i,n){for(var r=0;r<this.registry.onUpdate.length;r++)this.registry.onUpdate[r](e,t,i,n)},t.onChangeValue=function(e,t,i){for(var n=e,r=0;r<this.registry.onChangeValue.length;r++)n=this.registry.onChangeValue[r](n,t,i);return n},t.use=function(e,t){void 0===t&&(t={queue:"external"});var i=this.plugins[t.queue];-1===i.indexOf(e)&&(i.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var i in t)i in e&&e[i].push(t[i]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),J=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,i=e.options.index;if(-1===t.indexOf(e))if(0===t.length||i>=this.index)t.push(e);else for(var n=0;n<t.length;n++)if(t[n].options.index>i)return void t.splice(n,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,i=t.attached,n=(0,u.Z)(t,["attached"]),r="",s=0;s<this.registry.length;s++){var o=this.registry[s];null!=i&&o.attached!==i||(r&&(r+="\n"),r+=o.toString(n))}return r},(0,l.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),ee="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),te="2f1acc6c3a606b082e5eef5e54414ffb";null==ee[te]&&(ee[te]=0);var ie=ee[te]++,ne=function(e){void 0===e&&(e={});var t=0;return function(i,n){t+=1;var r="",s="";return n&&(n.options.classNamePrefix&&(s=n.options.classNamePrefix),null!=n.options.jss.id&&(r=String(n.options.jss.id))),e.minify?""+(s||"c")+ie+r+t:s+i.key+"-"+ie+(r?"-"+r:"")+"-"+t}},re=function(e){var t;return function(){return t||(t=e()),t}},se=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(e){return""}},oe=function(e,t,i){try{var n=i;if(Array.isArray(i)&&(n=m(i,!0),"!important"===i[i.length-1]))return e.style.setProperty(t,n,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,n):e.style.setProperty(t,n)}catch(e){return!1}return!0},ae=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(e){}},le=function(e,t){return e.selectorText=t,e.selectorText===t},ce=re((function(){return document.querySelector("head")}));function he(e){var t=J.registry;if(t.length>0){var i=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.attached&&n.options.index>t.index&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e);if(i&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element};if((i=function(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.attached&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e))&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&"string"==typeof n){var r=function(e){for(var t=ce(),i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];if(8===n.nodeType&&n.nodeValue.trim()===e)return n}return null}(n);if(r)return{parent:r.parentNode,node:r.nextSibling}}return!1}var ue=re((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),de=function(e,t,i){try{if("insertRule"in e)e.insertRule(t,i);else if("appendRule"in e){e.appendRule(t)}}catch(e){return!1}return e.cssRules[i]},fe=function(e,t){var i=e.cssRules.length;return void 0===t||t>i?i:t},pe=function(){function e(e){this.getPropertyValue=se,this.setProperty=oe,this.removeProperty=ae,this.setSelector=le,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,this.cssRules=[],e&&J.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},i=t.media,n=t.meta,r=t.element;this.element=r||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),n&&this.element.setAttribute("data-meta",n);var s=ue();s&&this.element.setAttribute("nonce",s)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var i=t.insertionPoint,n=he(t);if(!1!==n&&n.parent)n.parent.insertBefore(e,n.node);else if(i&&"number"==typeof i.nodeType){var r=i,s=r.parentNode;s&&s.insertBefore(e,r.nextSibling)}else ce().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var i=0;i<e.index.length;i++)this.insertRule(e.index[i],i,t)},t.insertRule=function(e,t,i){if(void 0===i&&(i=this.element.sheet),e.rules){var n=e,r=i;if("conditional"===e.type||"keyframes"===e.type){var s=fe(i,t);if(!1===(r=de(i,n.toString({children:!1}),s)))return!1;this.refCssRule(e,s,r)}return this.insertRules(n.rules,r),r}var o=e.toString();if(!o)return!1;var a=fe(i,t),l=de(i,o,a);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,a,l),l)},t.refCssRule=function(e,t,i){e.renderable=i,e.options.parent instanceof X&&(this.cssRules[t]=i)},t.deleteRule=function(e){var t=this.element.sheet,i=this.indexOf(e);return-1!==i&&(t.deleteRule(i),this.cssRules.splice(i,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var i=this.indexOf(e);return-1!==i&&(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(t,i))},t.getRules=function(){return this.element.sheet.cssRules},e}(),ge=0,me=function(){function e(e){this.id=ge++,this.version="10.7.1",this.plugins=new Q,this.options={id:{minify:!1},createGenerateId:ne,Renderer:a?pe:null,plugins:[]},this.generateId=ne({minify:!1});for(var t=0;t<$.length;t++)this.plugins.use($[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,r.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var i=t.index;"number"!=typeof i&&(i=0===J.index?0:J.index+1);var n=new X(e,(0,r.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:i}));return this.plugins.onProcessSheet(n),n},t.removeStyleSheet=function(e){return e.detach(),J.remove(e),this},t.createRule=function(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),"object"==typeof e)return this.createRule(void 0,e,t);var n=(0,r.Z)({},i,{name:e,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var s=p(e,t,n);return s&&this.plugins.onProcessRule(s),s},t.use=function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach((function(t){e.plugins.use(t)})),this},e}();function be(e){var t=null;for(var i in e){var n=e[i],r=typeof n;if("function"===r)t||(t={}),t[i]=n;else if("object"===r&&null!==n&&!Array.isArray(n)){var s=be(n);s&&(t||(t={}),t[i]=s)}}return t}var ve="object"==typeof CSS&&null!=CSS&&"number"in CSS,ye=function(e){return new me(e)};ye();var _e=i(65835);const we={set:function(e,t,i,n){var r=e.get(t);r||(r=new Map,e.set(t,r)),r.set(i,n)},get:function(e,t,i){var n=e.get(t);return n?n.get(i):void 0},delete:function(e,t,i){e.get(t).delete(i)}};var Se=i(159),Ce=(i(45697),i(17076)),xe=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var ke=Date.now(),Ee="fnValues"+ke,Te="fnStyle"+ ++ke;const Le=function(){return{onCreateRule:function(e,t,i){if("function"!=typeof t)return null;var n=p(e,{},i);return n[Te]=t,n},onProcessStyle:function(e,t){if(Ee in t||Te in t)return e;var i={};for(var n in e){var r=e[n];"function"==typeof r&&(delete e[n],i[n]=r)}return t[Ee]=i,e},onUpdate:function(e,t,i,n){var r=t,s=r[Te];s&&(r.style=s(e)||{});var o=r[Ee];if(o)for(var a in o)r.prop(a,o[a](e),n)}}};var Ne="@global",Me="@global ",Oe=function(){function e(e,t,i){for(var n in this.type="global",this.at=Ne,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=e,this.options=i,this.rules=new Y((0,r.Z)({},i,{parent:this})),t)this.rules.add(n,t[n]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,i){var n=this.rules.add(e,t,i);return n&&this.options.jss.plugins.onProcessRule(n),n},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(){return this.rules.toString()},e}(),De=function(){function e(e,t,i){this.type="global",this.at=Ne,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=e,this.options=i;var n=e.substr(Me.length);this.rule=i.jss.createRule(n,t,(0,r.Z)({},i,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Ie=/\s*,\s*/g;function Ae(e,t){for(var i=e.split(Ie),n="",r=0;r<i.length;r++)n+=t+" "+i[r].trim(),i[r+1]&&(n+=", ");return n}const Pe=function(){return{onCreateRule:function(e,t,i){if(!e)return null;if(e===Ne)return new Oe(e,t,i);if("@"===e[0]&&e.substr(0,Me.length)===Me)return new De(e,t,i);var n=i.parent;return n&&("global"===n.type||n.options.parent&&"global"===n.options.parent.type)&&(i.scoped=!1),!1===i.scoped&&(i.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var i=e.options,n=e.style,s=n?n[Ne]:null;if(s){for(var o in s)t.addRule(o,s[o],(0,r.Z)({},i,{selector:Ae(o,e.selector)}));delete n[Ne]}}(e,t),function(e,t){var i=e.options,n=e.style;for(var s in n)if("@"===s[0]&&s.substr(0,Ne.length)===Ne){var o=Ae(s.substr(Ne.length),e.selector);t.addRule(o,n[s],(0,r.Z)({},i,{selector:o})),delete n[s]}}(e,t))}}};var Re=/\s*,\s*/g,Be=/&/g,Fe=/\$([\w-]+)/g;const We=function(){function e(e,t){return function(i,n){var r=e.getRule(n)||t&&t.getRule(n);return r?(r=r).selector:n}}function t(e,t){for(var i=t.split(Re),n=e.split(Re),r="",s=0;s<i.length;s++)for(var o=i[s],a=0;a<n.length;a++){var l=n[a];r&&(r+=", "),r+=-1!==l.indexOf("&")?l.replace(Be,o):o+" "+l}return r}function i(e,t,i){if(i)return(0,r.Z)({},i,{index:i.index+1});var n=e.options.nestingLevel;n=void 0===n?1:n+1;var s=(0,r.Z)({},e.options,{nestingLevel:n,index:t.indexOf(e)+1});return delete s.name,s}return{onProcessStyle:function(n,s,o){if("style"!==s.type)return n;var a,l,c=s,h=c.options.parent;for(var u in n){var d=-1!==u.indexOf("&"),f="@"===u[0];if(d||f){if(a=i(c,h,a),d){var p=t(u,c.selector);l||(l=e(h,o)),p=p.replace(Fe,l),h.addRule(p,n[u],(0,r.Z)({},a,{selector:p}))}else f&&h.addRule(u,{},a).addRule(c.key,n[u],{selector:c.selector});delete n[u]}}return n}}};var Ve=/[A-Z]/g,ze=/^ms-/,He={};function je(e){return"-"+e.toLowerCase()}const Ue=function(e){if(He.hasOwnProperty(e))return He[e];var t=e.replace(Ve,je);return He[e]=ze.test(t)?"-"+t:t};function Ge(e){var t={};for(var i in e){t[0===i.indexOf("--")?i:Ue(i)]=e[i]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Ge):t.fallbacks=Ge(e.fallbacks)),t}const Ke=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Ge(e[t]);return e}return Ge(e)},onChangeValue:function(e,t,i){if(0===t.indexOf("--"))return e;var n=Ue(t);return t===n?e:(i.prop(n,e),null)}}};var $e=ve&&CSS?CSS.px:"px",qe=ve&&CSS?CSS.ms:"ms",Ze=ve&&CSS?CSS.percent:"%";function Ye(e){var t=/(-[a-z])/g,i=function(e){return e[1].toUpperCase()},n={};for(var r in e)n[r]=e[r],n[r.replace(t,i)]=e[r];return n}var Xe=Ye({"animation-delay":qe,"animation-duration":qe,"background-position":$e,"background-position-x":$e,"background-position-y":$e,"background-size":$e,border:$e,"border-bottom":$e,"border-bottom-left-radius":$e,"border-bottom-right-radius":$e,"border-bottom-width":$e,"border-left":$e,"border-left-width":$e,"border-radius":$e,"border-right":$e,"border-right-width":$e,"border-top":$e,"border-top-left-radius":$e,"border-top-right-radius":$e,"border-top-width":$e,"border-width":$e,"border-block":$e,"border-block-end":$e,"border-block-end-width":$e,"border-block-start":$e,"border-block-start-width":$e,"border-block-width":$e,"border-inline":$e,"border-inline-end":$e,"border-inline-end-width":$e,"border-inline-start":$e,"border-inline-start-width":$e,"border-inline-width":$e,"border-start-start-radius":$e,"border-start-end-radius":$e,"border-end-start-radius":$e,"border-end-end-radius":$e,margin:$e,"margin-bottom":$e,"margin-left":$e,"margin-right":$e,"margin-top":$e,"margin-block":$e,"margin-block-end":$e,"margin-block-start":$e,"margin-inline":$e,"margin-inline-end":$e,"margin-inline-start":$e,padding:$e,"padding-bottom":$e,"padding-left":$e,"padding-right":$e,"padding-top":$e,"padding-block":$e,"padding-block-end":$e,"padding-block-start":$e,"padding-inline":$e,"padding-inline-end":$e,"padding-inline-start":$e,"mask-position-x":$e,"mask-position-y":$e,"mask-size":$e,height:$e,width:$e,"min-height":$e,"max-height":$e,"min-width":$e,"max-width":$e,bottom:$e,left:$e,top:$e,right:$e,inset:$e,"inset-block":$e,"inset-block-end":$e,"inset-block-start":$e,"inset-inline":$e,"inset-inline-end":$e,"inset-inline-start":$e,"box-shadow":$e,"text-shadow":$e,"column-gap":$e,"column-rule":$e,"column-rule-width":$e,"column-width":$e,"font-size":$e,"font-size-delta":$e,"letter-spacing":$e,"text-decoration-thickness":$e,"text-indent":$e,"text-stroke":$e,"text-stroke-width":$e,"word-spacing":$e,motion:$e,"motion-offset":$e,outline:$e,"outline-offset":$e,"outline-width":$e,perspective:$e,"perspective-origin-x":Ze,"perspective-origin-y":Ze,"transform-origin":Ze,"transform-origin-x":Ze,"transform-origin-y":Ze,"transform-origin-z":Ze,"transition-delay":qe,"transition-duration":qe,"vertical-align":$e,"flex-basis":$e,"shape-margin":$e,size:$e,gap:$e,grid:$e,"grid-gap":$e,"row-gap":$e,"grid-row-gap":$e,"grid-column-gap":$e,"grid-template-rows":$e,"grid-template-columns":$e,"grid-auto-rows":$e,"grid-auto-columns":$e,"box-shadow-x":$e,"box-shadow-y":$e,"box-shadow-blur":$e,"box-shadow-spread":$e,"font-line-height":$e,"text-shadow-x":$e,"text-shadow-y":$e,"text-shadow-blur":$e});function Qe(e,t,i){if(null==t)return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=Qe(e,t[n],i);else if("object"==typeof t)if("fallbacks"===e)for(var r in t)t[r]=Qe(r,t[r],i);else for(var s in t)t[s]=Qe(e+"-"+s,t[s],i);else if("number"==typeof t&&!1===isNaN(t)){var o=i[e]||Xe[e];return!o||0===t&&o===$e?t.toString():"function"==typeof o?o(t).toString():""+t+o}return t}const Je=function(e){void 0===e&&(e={});var t=Ye(e);return{onProcessStyle:function(e,i){if("style"!==i.type)return e;for(var n in e)e[n]=Qe(n,e[n],t);return e},onChangeValue:function(e,i){return Qe(i,e,t)}}};var et=i(85061),tt="",it="",nt="",rt="",st=a&&"ontouchstart"in document.documentElement;if(a){var ot={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},at=document.createElement("p").style;for(var lt in ot)if(lt+"Transform"in at){tt=lt,it=ot[lt];break}"Webkit"===tt&&"msHyphens"in at&&(tt="ms",it=ot.ms,rt="edge"),"Webkit"===tt&&"-apple-trailing-word"in at&&(nt="apple")}var ct=tt,ht=it,ut=nt,dt=rt,ft=st;var pt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===ct?"-webkit-"+e:ht+e)}},gt={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===ct?ht+"print-"+e:e)}},mt=/[-\s]+(.)?/g;function bt(e,t){return t?t.toUpperCase():""}function vt(e){return e.replace(mt,bt)}function yt(e){return vt("-"+e)}var _t,wt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===ct){var i="mask-image";if(vt(i)in t)return e;if(ct+yt(i)in t)return ht+e}return e}},St={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==ut||ft?e:ht+e)}},Ct={noPrefill:["transform"],supportedProperty:function(e,t,i){return"transform"===e&&(i.transform?e:ht+e)}},xt={noPrefill:["transition"],supportedProperty:function(e,t,i){return"transition"===e&&(i.transition?e:ht+e)}},kt={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===ct||"ms"===ct&&"edge"!==dt?ht+e:e)}},Et={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===ct||"ms"===ct||"apple"===ut?ht+e:e)}},Tt={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===ct?"WebkitColumn"+yt(e)in t&&ht+"column-"+e:"Moz"===ct&&("page"+yt(e)in t&&"page-"+e))}},Lt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===ct)return e;var i=e.replace("-inline","");return ct+yt(i)in t&&ht+i}},Nt={supportedProperty:function(e,t){return vt(e)in t&&e}},Mt={supportedProperty:function(e,t){var i=yt(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:ct+i in t?ht+e:"Webkit"!==ct&&"Webkit"+i in t&&"-webkit-"+e}},Ot={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===ct?""+ht+e:e)}},Dt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===ct?ht+"scroll-chaining":e)}},It={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},At={supportedProperty:function(e,t){var i=It[e];return!!i&&(ct+yt(i)in t&&ht+i)}},Pt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Rt=Object.keys(Pt),Bt=function(e){return ht+e},Ft=[pt,gt,wt,St,Ct,xt,kt,Et,Tt,Lt,Nt,Mt,Ot,Dt,At,{supportedProperty:function(e,t,i){var n=i.multiple;if(Rt.indexOf(e)>-1){var r=Pt[e];if(!Array.isArray(r))return ct+yt(r)in t&&ht+r;if(!n)return!1;for(var s=0;s<r.length;s++)if(!(ct+yt(r[0])in t))return!1;return r.map(Bt)}return!1}}],Wt=Ft.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Vt=Ft.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,et.Z)(t.noPrefill)),e}),[]),zt={};if(a){_t=document.createElement("p");var Ht=window.getComputedStyle(document.documentElement,"");for(var jt in Ht)isNaN(jt)||(zt[Ht[jt]]=Ht[jt]);Vt.forEach((function(e){return delete zt[e]}))}function Ut(e,t){if(void 0===t&&(t={}),!_t)return e;if(null!=zt[e])return zt[e];"transition"!==e&&"transform"!==e||(t[e]=e in _t.style);for(var i=0;i<Wt.length&&(zt[e]=Wt[i](e,_t.style,t),!zt[e]);i++);try{_t.style[e]=""}catch(e){return!1}return zt[e]}var Gt,Kt={},$t={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},qt=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Zt(e,t,i){if("var"===t)return"var";if("all"===t)return"all";if("all"===i)return", all";var n=t?Ut(t):", "+Ut(i);return n||(t||i)}function Yt(e,t){var i=t;if(!Gt||"content"===e)return t;if("string"!=typeof i||!isNaN(parseInt(i,10)))return i;var n=e+i;if(null!=Kt[n])return Kt[n];try{Gt.style[e]=i}catch(e){return Kt[n]=!1,!1}if($t[e])i=i.replace(qt,Zt);else if(""===Gt.style[e]&&("-ms-flex"===(i=ht+i)&&(Gt.style[e]="-ms-flexbox"),Gt.style[e]=i,""===Gt.style[e]))return Kt[n]=!1,!1;return Gt.style[e]="",Kt[n]=i,Kt[n]}a&&(Gt=document.createElement("p"));const Xt=function(){function e(t){for(var i in t){var n=t[i];if("fallbacks"===i&&Array.isArray(n))t[i]=n.map(e);else{var r=!1,s=Ut(i);s&&s!==i&&(r=!0);var o=!1,a=Yt(s,m(n));a&&a!==n&&(o=!0),(r||o)&&(r&&delete t[i],t[s||i]=a||n)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===ct?e:"@"+ht+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,i){return"style"!==i.type?t:e(t)},onChangeValue:function(e,t){return Yt(t,m(e))||e}}};const Qt=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,i){if("style"!==i.type)return t;for(var n={},r=Object.keys(t).sort(e),s=0;s<r.length;s++)n[r[s]]=t[r[s]];return n}}};var Jt=ye({plugins:[Le(),Pe(),We(),Ke(),Je(),"undefined"==typeof window?null:Xt(),Qt()]}),ei={disableGeneration:!1,generateClassName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,i=void 0!==t&&t,n=e.productionPrefix,r=void 0===n?"jss":n,s=e.seed,o=void 0===s?"":s,a=""===o?"":"".concat(o,"-"),l=0,c=function(){return l+=1};return function(e,t){var n=t.options.name;if(n&&0===n.indexOf("Mui")&&!t.options.link&&!i){if(-1!==xe.indexOf(e.key))return"Mui-".concat(e.key);var s="".concat(a).concat(n,"-").concat(e.key);return t.options.theme[Ce.Z]&&""===o?"".concat(s,"-").concat(c()):s}return"".concat(a).concat(r).concat(c())}}(),jss:Jt,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},ti=s.createContext(ei);var ii=-1e9;function ni(){return ii+=1}var ri=i(35953);function si(e){var t="function"==typeof e;return{create:function(i,n){var s;try{s=t?e(i):e}catch(e){throw e}if(!n||!i.overrides||!i.overrides[n])return s;var o=i.overrides[n],a=(0,r.Z)({},s);return Object.keys(o).forEach((function(e){a[e]=(0,ri.Z)(a[e],o[e])})),a},options:{}}}const oi={};function ai(e,t,i){var n=e.state;if(e.stylesOptions.disableGeneration)return t||{};n.cacheClasses||(n.cacheClasses={value:null,lastProp:null,lastJSS:{}});var r=!1;return n.classes!==n.cacheClasses.lastJSS&&(n.cacheClasses.lastJSS=n.classes,r=!0),t!==n.cacheClasses.lastProp&&(n.cacheClasses.lastProp=t,r=!0),r&&(n.cacheClasses.value=(0,_e.Z)({baseClasses:n.cacheClasses.lastJSS,newClasses:t,Component:i})),n.cacheClasses.value}function li(e,t){var i=e.state,n=e.theme,s=e.stylesOptions,o=e.stylesCreator,a=e.name;if(!s.disableGeneration){var l=we.get(s.sheetsManager,o,n);l||(l={refs:0,staticSheet:null,dynamicStyles:null},we.set(s.sheetsManager,o,n,l));var c=(0,r.Z)({},o.options,s,{theme:n,flip:"boolean"==typeof s.flip?s.flip:"rtl"===n.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var h=s.sheetsRegistry;if(0===l.refs){var u;s.sheetsCache&&(u=we.get(s.sheetsCache,o,n));var d=o.create(n,a);u||((u=s.jss.createStyleSheet(d,(0,r.Z)({link:!1},c))).attach(),s.sheetsCache&&we.set(s.sheetsCache,o,n,u)),h&&h.add(u),l.staticSheet=u,l.dynamicStyles=be(d)}if(l.dynamicStyles){var f=s.jss.createStyleSheet(l.dynamicStyles,(0,r.Z)({link:!0},c));f.update(t),f.attach(),i.dynamicSheet=f,i.classes=(0,_e.Z)({baseClasses:l.staticSheet.classes,newClasses:f.classes}),h&&h.add(f)}else i.classes=l.staticSheet.classes;l.refs+=1}}function ci(e,t){var i=e.state;i.dynamicSheet&&i.dynamicSheet.update(t)}function hi(e){var t=e.state,i=e.theme,n=e.stylesOptions,r=e.stylesCreator;if(!n.disableGeneration){var s=we.get(n.sheetsManager,r,i);s.refs-=1;var o=n.sheetsRegistry;0===s.refs&&(we.delete(n.sheetsManager,r,i),n.jss.removeStyleSheet(s.staticSheet),o&&o.remove(s.staticSheet)),t.dynamicSheet&&(n.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function ui(e,t){var i,n=s.useRef([]),r=s.useMemo((function(){return{}}),t);n.current!==r&&(n.current=r,i=e()),s.useEffect((function(){return function(){i&&i()}}),[r])}function di(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.name,o=t.classNamePrefix,a=t.Component,l=t.defaultTheme,c=void 0===l?oi:l,h=(0,n.Z)(t,["name","classNamePrefix","Component","defaultTheme"]),u=si(e),d=i||o||"makeStyles";u.options={index:ni(),name:i,meta:d,classNamePrefix:d};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Se.Z)()||c,n=(0,r.Z)({},s.useContext(ti),h),o=s.useRef(),l=s.useRef();ui((function(){var r={name:i,state:{},stylesCreator:u,stylesOptions:n,theme:t};return li(r,e),l.current=!1,o.current=r,function(){hi(r)}}),[t,u]),s.useEffect((function(){l.current&&ci(o.current,e),l.current=!0}));var d=ai(o.current,e.classes,a);return d};return f}},65835:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(22122);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,i=e.newClasses;e.Component;if(!i)return t;var r=(0,n.Z)({},t);return Object.keys(i).forEach((function(e){i[e]&&(r[e]="".concat(t[e]," ").concat(i[e]))})),r}},83800:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=i(67294).createContext(null)},159:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(67294),r=i(83800);function s(){return n.useContext(r.Z)}},71410:(e,t,i)=>{"use strict";i.d(t,{k:()=>o});i(85061);var n=i(90484),r=(i(45697),{xs:0,sm:600,md:960,lg:1280,xl:1920}),s={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function o(e,t,i){if(Array.isArray(t)){var r=e.theme.breakpoints||s;return t.reduce((function(e,n,s){return e[r.up(r.keys[s])]=i(t[s]),e}),{})}if("object"===(0,n.Z)(t)){var o=e.theme.breakpoints||s;return Object.keys(t).reduce((function(e,n){return e[o.up(n)]=i(t[n]),e}),{})}return i(t)}},19668:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(35953);const r=function(e,t){return t?(0,n.Z)(e,t,{clone:!1}):e}},38681:(e,t,i)=>{"use strict";i.d(t,{h:()=>f,Z:()=>m});var n=i(28481),r=i(71410),s=i(19668);var o,a,l={m:"margin",p:"padding"},c={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},h={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},u=(o=function(e){if(e.length>2){if(!h[e])return[e];e=h[e]}var t=e.split(""),i=(0,n.Z)(t,2),r=i[0],s=i[1],o=l[r],a=c[s]||"";return Array.isArray(a)?a.map((function(e){return o+e})):[o+a]},a={},function(e){return void 0===a[e]&&(a[e]=o(e)),a[e]}),d=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function f(e){var t=e.spacing||8;return"number"==typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"==typeof t?t:function(){}}function p(e,t){return function(i){return e.reduce((function(e,n){return e[n]=function(e,t){if("string"==typeof t||null==t)return t;var i=e(Math.abs(t));return t>=0?i:"number"==typeof i?-i:"-".concat(i)}(t,i),e}),{})}}function g(e){var t=f(e.theme);return Object.keys(e).map((function(i){if(-1===d.indexOf(i))return null;var n=p(u(i),t),s=e[i];return(0,r.k)(e,s,n)})).reduce(s.Z,{})}g.propTypes={},g.filterProps=d;const m=g},35953:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(22122),r=i(90484);function s(e){return e&&"object"===(0,r.Z)(e)&&e.constructor===Object}function o(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=i.clone?(0,n.Z)({},e):e;return s(e)&&s(t)&&Object.keys(t).forEach((function(n){"__proto__"!==n&&(s(t[n])&&n in e?r[n]=o(e[n],t[n],i):r[n]=t[n])})),r}},60288:(e,t,i)=>{"use strict";function n(e){for(var t="https://material-ui.com/production-error/?code="+e,i=1;i<arguments.length;i+=1)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}i.d(t,{Z:()=>n})},43092:(e,t,i)=>{"use strict";var n=i(67294),r=n.useState,s=n.useCallback,o=n.useLayoutEffect;function a(e){return e?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}}e.exports=function(e){var t=r(a(e?e.current:{})),i=t[0],n=t[1],l=s((function(){e.current&&n(a(e.current))}),[e]);return o((function(){if(e.current){if(l(),"function"==typeof ResizeObserver){var t=new ResizeObserver((function(){l()}));return t.observe(e.current),function(){t.disconnect(e.current),t=null}}return window.addEventListener("resize",l),function(){window.removeEventListener("resize",l)}}}),[e.current]),i}},99869:(e,t,i)=>{e=i.nmd(e);var n=i(92184),r=i(35747),s=i(85622);e.exports=function t(o){var a,l=r.readFileSync(o,"utf-8"),c=s.dirname(o),h=s.join(__dirname,"common"),u={fs:r,dirname:h,console,module:e,staveRequire:function(e){return t(s.join(c,e))}};try{a=n.runInNewContext(l,u,{timeout:1e3})}catch(e){console.error(e)}return Object.keys(i.c).forEach((function(e){delete i.c[e]})),a}},90396:(e,t,i)=>{"use strict";i.r(t);var n={};i.r(n),i.d(n,{CancellationTokenSource:()=>QW,Emitter:()=>JW,KeyCode:()=>eV,KeyMod:()=>tV,MarkerSeverity:()=>oV,MarkerTag:()=>aV,Position:()=>iV,Range:()=>nV,Selection:()=>rV,SelectionDirection:()=>sV,Token:()=>cV,Uri:()=>lV,editor:()=>hV,languages:()=>uV});var r=i(67294),s=i(73935),o=i(36774);function a(e){var t,i,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=a(e[t]))&&(n&&(n+=" "),n+=i);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function l(){for(var e,t,i=0,n="";i<arguments.length;)(e=arguments[i++])&&(t=a(e))&&(n&&(n+=" "),n+=t);return n}var c=i(22122),h=i(81253),u=i(45697),d=i.n(u),f=i(79437),p=i(19756),g=i(93552);const m=!1,b=r.createContext(null);var v="unmounted",y="exited",_="entering",w="entered",S="exiting",C=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var r,s=i&&!i.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?s?(r=y,n.appearStatus=_):r=w:r=t.unmountOnExit||t.mountOnEnter?v:y,n.state={status:r},n.nextCallback=null,n}(0,g.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===v?{status:y}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var i=this.state.status;this.props.in?i!==_&&i!==w&&(t=_):i!==_&&i!==w||(t=S)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,i,n=this.props.timeout;return e=t=i=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,i=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:i}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===_?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===y&&this.setState({status:v})},i.performEnter=function(e){var t=this,i=this.props.enter,n=this.context?this.context.isMounting:e,r=this.props.nodeRef?[n]:[s.findDOMNode(this),n],o=r[0],a=r[1],l=this.getTimeouts(),c=n?l.appear:l.enter;!e&&!i||m?this.safeSetState({status:w},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:_},(function(){t.props.onEntering(o,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:w},(function(){t.props.onEntered(o,a)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,i=this.getTimeouts(),n=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!m?(this.props.onExit(n),this.safeSetState({status:S},(function(){e.props.onExiting(n),e.onTransitionEnd(i.exit,(function(){e.safeSetState({status:y},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:y},(function(){e.props.onExited(n)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,i=!0;return this.nextCallback=function(n){i&&(i=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(i&&!n){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],o=r[0],a=r[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===v)return null;var t=this.props,i=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,p.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(b.Provider,{value:null},"function"==typeof i?i(e,n):r.cloneElement(r.Children.only(i),n))},t}(r.Component);function x(){}C.contextType=b,C.propTypes={},C.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:x,onEntering:x,onEntered:x,onExit:x,onExiting:x,onExited:x},C.UNMOUNTED=v,C.EXITED=y,C.ENTERING=_,C.ENTERED=w,C.EXITING=S;const k=C;var E=i(17294),T=i(159),L=i(99700);function N(){return(0,T.Z)()||L.Z}var M=i(43366),O=function(e){return e.scrollTop};function D(e,t){var i=e.timeout,n=e.style,r=void 0===n?{}:n;return{duration:r.transitionDuration||"number"==typeof i?i:i[t.mode]||0,delay:r.transitionDelay}}function I(e,t){var i=function(e,t){var i,n=t.getBoundingClientRect();if(t.fakeTransform)i=t.fakeTransform;else{var r=window.getComputedStyle(t);i=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("transform")}var s=0,o=0;if(i&&"none"!==i&&"string"==typeof i){var a=i.split("(")[1].split(")")[0].split(",");s=parseInt(a[4],10),o=parseInt(a[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(s-n.left,"px)"):"right"===e?"translateX(-".concat(n.left+n.width-s,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(o-n.top,"px)"):"translateY(-".concat(n.top+n.height-o,"px)")}(e,t);i&&(t.style.webkitTransform=i,t.style.transform=i)}var A={enter:M.x9.enteringScreen,exit:M.x9.leavingScreen};const P=r.forwardRef((function(e,t){var i=e.children,n=e.direction,o=void 0===n?"down":n,a=e.in,l=e.onEnter,u=e.onEntered,d=e.onEntering,p=e.onExit,g=e.onExited,m=e.onExiting,b=e.style,v=e.timeout,y=void 0===v?A:v,_=e.TransitionComponent,w=void 0===_?k:_,S=(0,h.Z)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),C=N(),x=r.useRef(null),T=r.useCallback((function(e){x.current=s.findDOMNode(e)}),[]),L=(0,E.Z)(i.ref,T),M=(0,E.Z)(L,t),P=function(e){return function(t){e&&(void 0===t?e(x.current):e(x.current,t))}},R=P((function(e,t){I(o,e),O(e),l&&l(e,t)})),B=P((function(e,t){var i=D({timeout:y,style:b},{mode:"enter"});e.style.webkitTransition=C.transitions.create("-webkit-transform",(0,c.Z)({},i,{easing:C.transitions.easing.easeOut})),e.style.transition=C.transitions.create("transform",(0,c.Z)({},i,{easing:C.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",d&&d(e,t)})),F=P(u),W=P(m),V=P((function(e){var t=D({timeout:y,style:b},{mode:"exit"});e.style.webkitTransition=C.transitions.create("-webkit-transform",(0,c.Z)({},t,{easing:C.transitions.easing.sharp})),e.style.transition=C.transitions.create("transform",(0,c.Z)({},t,{easing:C.transitions.easing.sharp})),I(o,e),p&&p(e)})),z=P((function(e){e.style.webkitTransition="",e.style.transition="",g&&g(e)})),H=r.useCallback((function(){x.current&&I(o,x.current)}),[o]);return r.useEffect((function(){if(!a&&"down"!==o&&"right"!==o){var e=(0,f.Z)((function(){x.current&&I(o,x.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[o,a]),r.useEffect((function(){a||H()}),[a,H]),r.createElement(w,(0,c.Z)({nodeRef:x,onEnter:R,onEntered:F,onEntering:B,onExit:V,onExited:z,onExiting:W,appear:!0,in:a,timeout:y},S),(function(e,t){return r.cloneElement(i,(0,c.Z)({ref:M,style:(0,c.Z)({visibility:"exited"!==e||a?void 0:"hidden"},b,i.props.style)},t))}))}));var R=i(14670),B=i(59693),F=i(30115);const W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,F.Z)(e,(0,c.Z)({defaultTheme:L.Z},t))};var V=i(28481),z=i(86010),H=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.collapsedHeight,a=e.collapsedSize,l=void 0===a?"0px":a,u=e.component,d=void 0===u?"div":u,f=e.disableStrictModeCompat,p=void 0!==f&&f,g=e.in,m=e.onEnter,b=e.onEntered,v=e.onEntering,y=e.onExit,_=e.onExited,w=e.onExiting,S=e.style,C=e.timeout,x=void 0===C?M.x9.standard:C,T=e.TransitionComponent,L=void 0===T?k:T,O=(0,h.Z)(e,["children","classes","className","collapsedHeight","collapsedSize","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),I=N(),A=r.useRef(),P=r.useRef(null),R=r.useRef(),B="number"==typeof(o||l)?"".concat(o||l,"px"):o||l;r.useEffect((function(){return function(){clearTimeout(A.current)}}),[]);var F=I.unstable_strictMode&&!p,W=r.useRef(null),H=(0,E.Z)(t,F?W:void 0),j=function(e){return function(t,i){if(e){var n=F?[W.current,t]:[t,i],r=(0,V.Z)(n,2),s=r[0],o=r[1];void 0===o?e(s):e(s,o)}}},U=j((function(e,t){e.style.height=B,m&&m(e,t)})),G=j((function(e,t){var i=P.current?P.current.clientHeight:0,n=D({style:S,timeout:x},{mode:"enter"}).duration;if("auto"===x){var r=I.transitions.getAutoHeightDuration(i);e.style.transitionDuration="".concat(r,"ms"),R.current=r}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style.height="".concat(i,"px"),v&&v(e,t)})),K=j((function(e,t){e.style.height="auto",b&&b(e,t)})),$=j((function(e){var t=P.current?P.current.clientHeight:0;e.style.height="".concat(t,"px"),y&&y(e)})),q=j(_),Z=j((function(e){var t=P.current?P.current.clientHeight:0,i=D({style:S,timeout:x},{mode:"exit"}).duration;if("auto"===x){var n=I.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),R.current=n}else e.style.transitionDuration="string"==typeof i?i:"".concat(i,"ms");e.style.height=B,w&&w(e)}));return r.createElement(L,(0,c.Z)({in:g,onEnter:U,onEntered:K,onEntering:G,onExit:$,onExited:q,onExiting:Z,addEndListener:function(e,t){var i=F?e:t;"auto"===x&&(A.current=setTimeout(i,R.current||0))},nodeRef:F?W:void 0,timeout:"auto"===x?null:x},O),(function(e,t){return r.createElement(d,(0,c.Z)({className:(0,z.Z)(n.root,n.container,s,{entered:n.entered,exited:!g&&"0px"===B&&n.hidden}[e]),style:(0,c.Z)({minHeight:B},S),ref:H},t),r.createElement("div",{className:n.wrapper,ref:P},r.createElement("div",{className:n.wrapperInner},i)))}))}));H.muiSupportAuto=!0;const j=(0,R.Z)((function(e){return{root:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}}),{name:"MuiCollapse"})(H);var U=i(62087),G=i(30626),K=i(55192);function $(e){return e.substring(2).toLowerCase()}const q=function(e){var t=e.children,i=e.disableReactTree,n=void 0!==i&&i,o=e.mouseEvent,a=void 0===o?"onClick":o,l=e.onClickAway,c=e.touchEvent,h=void 0===c?"onTouchEnd":c,u=r.useRef(!1),d=r.useRef(null),f=r.useRef(!1),p=r.useRef(!1);r.useEffect((function(){return setTimeout((function(){f.current=!0}),0),function(){f.current=!1}}),[]);var g=r.useCallback((function(e){d.current=s.findDOMNode(e)}),[]),m=(0,E.Z)(t.ref,g),b=(0,K.Z)((function(e){var t=p.current;if(p.current=!1,f.current&&d.current&&!function(e){return document.documentElement.clientWidth<e.clientX||document.documentElement.clientHeight<e.clientY}(e))if(u.current)u.current=!1;else{var i;if(e.composedPath)i=e.composedPath().indexOf(d.current)>-1;else i=!(0,G.Z)(d.current).documentElement.contains(e.target)||d.current.contains(e.target);i||!n&&t||l(e)}})),v=function(e){return function(i){p.current=!0;var n=t.props[e];n&&n(i)}},y={ref:m};return!1!==h&&(y[h]=v(h)),r.useEffect((function(){if(!1!==h){var e=$(h),t=(0,G.Z)(d.current),i=function(){u.current=!0};return t.addEventListener(e,b),t.addEventListener("touchmove",i),function(){t.removeEventListener(e,b),t.removeEventListener("touchmove",i)}}}),[b,h]),!1!==a&&(y[a]=v(a)),r.useEffect((function(){if(!1!==a){var e=$(a),t=(0,G.Z)(d.current);return t.addEventListener(e,b),function(){t.removeEventListener(e,b)}}}),[b,a]),r.createElement(r.Fragment,null,r.cloneElement(t,y))};i(93963);function Z(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}var Q=r.createContext(),J={root:{},anchorOriginTopCenter:{},anchorOriginBottomCenter:{},anchorOriginTopRight:{},anchorOriginBottomRight:{},anchorOriginTopLeft:{},anchorOriginBottomLeft:{}},ee={containerRoot:{},containerAnchorOriginTopCenter:{},containerAnchorOriginBottomCenter:{},containerAnchorOriginTopRight:{},containerAnchorOriginBottomRight:{},containerAnchorOriginTopLeft:{},containerAnchorOriginBottomLeft:{}},te={default:20,dense:4},ie={default:6,dense:2},ne={maxSnack:3,dense:!1,hideIconVariant:!1,variant:"default",autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:P,transitionDuration:{enter:225,exit:195}},re=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},se=function(e){return Object.keys(e).filter((function(e){return!ee[e]})).reduce((function(t,i){var n;return Y({},t,((n={})[i]=e[i],n))}),{})},oe={TIMEOUT:"timeout",CLICKAWAY:"clickaway",MAXSNACK:"maxsnack",INSTRUCTED:"instructed"},ae=function(e){return"containerAnchorOrigin"+e},le=function(e){var t=e.vertical,i=e.horizontal;return"anchorOrigin"+re(t)+re(i)},ce=function(e){return"variant"+re(e)},he=function(e){return!!e||0===e},ue=function(e){return"number"==typeof e||null===e};function de(e,t,i){return void 0===e&&(e={}),void 0===t&&(t={}),void 0===i&&(i={}),Y({},i,{},t,{},e)}var fe=function(e){var t;return{root:(t={display:"flex",flexWrap:"wrap",flexGrow:1},t[e.breakpoints.up("sm")]={flexGrow:"initial",minWidth:288},t)}},pe=(0,r.forwardRef)((function(e,t){var i=e.classes,n=e.className,s=X(e,["classes","className"]);return r.createElement("div",Object.assign({ref:t,className:l(i.root,n)},s))})),ge=(0,R.Z)(fe)(pe),me={right:"left",left:"right",bottom:"up",top:"down"},be=function(e){return"center"!==e.horizontal?me[e.horizontal]:me[e.vertical]},ve=function(e){return r.createElement(U.Z,Object.assign({},e),r.createElement("path",{d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41\n        10.59L10 14.17L17.59 6.58L19 8L10 17Z"}))},ye=function(e){return r.createElement(U.Z,Object.assign({},e),r.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},_e=function(e){return r.createElement(U.Z,Object.assign({},e),r.createElement("path",{d:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,\n        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,\n        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"}))},we=function(e){return r.createElement(U.Z,Object.assign({},e),r.createElement("path",{d:"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,\n        0 22,12A10,10 0 0,0 12,2Z"}))},Se={fontSize:20,marginInlineEnd:8},Ce={default:void 0,success:r.createElement(ve,{style:Se}),warning:r.createElement(ye,{style:Se}),error:r.createElement(_e,{style:Se}),info:r.createElement(we,{style:Se})};function xe(e,t){return e.reduce((function(e,i){return null==i?e:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var o=[].concat(r);t&&-1===o.indexOf(t)&&o.push(t),e.apply(this,o),i.apply(this,o)}}),(function(){}))}var ke="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function Ee(e){var t=(0,r.useRef)(e);return ke((function(){t.current=e})),(0,r.useCallback)((function(){return t.current.apply(void 0,arguments)}),[])}var Te=(0,r.forwardRef)((function(e,t){var i=e.children,n=e.autoHideDuration,s=e.ClickAwayListenerProps,o=e.disableWindowBlurListener,a=void 0!==o&&o,l=e.onClose,c=e.onMouseEnter,h=e.onMouseLeave,u=e.open,d=e.resumeHideDuration,f=X(e,["children","autoHideDuration","ClickAwayListenerProps","disableWindowBlurListener","onClose","onMouseEnter","onMouseLeave","open","resumeHideDuration"]),p=(0,r.useRef)(),g=Ee((function(){l&&l.apply(void 0,arguments)})),m=Ee((function(e){l&&null!=e&&(clearTimeout(p.current),p.current=setTimeout((function(){g(null,oe.TIMEOUT)}),e))}));(0,r.useEffect)((function(){return u&&m(n),function(){clearTimeout(p.current)}}),[u,n,m]);var b=function(){clearTimeout(p.current)},v=(0,r.useCallback)((function(){null!=n&&m(null!=d?d:.5*n)}),[n,d,m]);return(0,r.useEffect)((function(){if(!a&&u)return window.addEventListener("focus",v),window.addEventListener("blur",b),function(){window.removeEventListener("focus",v),window.removeEventListener("blur",b)}}),[a,v,u]),(0,r.createElement)(q,Y({onClickAway:function(e){l&&l(e,oe.CLICKAWAY)}},s),(0,r.createElement)("div",Y({onMouseEnter:function(e){c&&c(e),b()},onMouseLeave:function(e){h&&h(e),v()},ref:t},f),i))})),Le=function(e){var t=e.palette.mode||e.palette.type,i=(0,B._4)(e.palette.background.default,"light"===t?.8:.98);return Y({},J,{contentRoot:Y({},e.typography.body2,{backgroundColor:i,color:e.palette.getContrastText(i),alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"}),lessPadding:{paddingLeft:20},variantSuccess:{backgroundColor:"#43a047",color:"#fff"},variantError:{backgroundColor:"#d32f2f",color:"#fff"},variantInfo:{backgroundColor:"#2196f3",color:"#fff"},variantWarning:{backgroundColor:"#ff9800",color:"#fff"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8},wrappedRoot:{position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0}})},Ne=function(e){var t=e.classes,i=X(e,["classes"]),n=(0,r.useRef)(),s=(0,r.useState)(!0),o=s[0],a=s[1];(0,r.useEffect)((function(){return function(){n.current&&clearTimeout(n.current)}}),[]);var c=xe([i.snack.onClose,i.onClose],i.snack.key),h=i.style,u=i.ariaAttributes,d=i.className,f=i.hideIconVariant,p=i.iconVariant,g=i.snack,m=i.action,b=i.content,v=i.TransitionComponent,y=i.TransitionProps,_=i.transitionDuration,w=X(i,["style","dense","ariaAttributes","className","hideIconVariant","iconVariant","snack","action","content","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),S=g.key,C=g.open,x=g.className,k=g.variant,E=g.content,T=g.action,L=g.ariaAttributes,N=g.anchorOrigin,M=g.message,O=g.TransitionComponent,D=g.TransitionProps,I=g.transitionDuration,A=X(g,["persist","key","open","entered","requestClose","className","variant","content","action","ariaAttributes","anchorOrigin","message","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),P=Y({},Ce,{},p)[k],R=Y({"aria-describedby":"notistack-snackbar"},de(L,u)),B=O||v||ne.TransitionComponent,F=de(I,_,ne.transitionDuration),W=Y({direction:be(N)},de(D,y)),V=T||m;"function"==typeof V&&(V=V(S));var z=E||b;"function"==typeof z&&(z=z(S,g.message));var H=["onEnter","onEntering","onEntered","onExit","onExiting","onExited"].reduce((function(e,t){var n;return Y({},e,((n={})[t]=xe([i.snack[t],i[t]],i.snack.key),n))}),{});return r.createElement(j,{unmountOnExit:!0,timeout:175,in:o,onExited:H.onExited},r.createElement(Te,Object.assign({},w,A,{open:C,className:l(t.root,t.wrappedRoot,t[le(N)]),onClose:c}),r.createElement(B,Object.assign({appear:!0,in:C,timeout:F},W,{onExit:H.onExit,onExiting:H.onExiting,onExited:function(){n.current=setTimeout((function(){a(!o)}),125)},onEnter:H.onEnter,onEntering:H.onEntering,onEntered:xe([H.onEntered,function(){i.snack.requestClose&&c(null,oe.INSTRCUTED)}])}),z||r.createElement(ge,Object.assign({},R,{role:"alert",style:h,className:l(t.contentRoot,t[ce(k)],d,x,!f&&P&&t.lessPadding)}),r.createElement("div",{id:R["aria-describedby"],className:t.message},f?null:P,M),V&&r.createElement("div",{className:t.action},V)))))},Me=(0,R.Z)(Le)(Ne),Oe="& > .MuiCollapse-container",De="& > .MuiCollapse-container > .MuiCollapse-wrapper",Ie=W((function(e){var t,i,n,r,s;return{root:(t={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:e.zIndex.snackbar,height:"auto",width:"auto",transition:"top 300ms ease 0ms, right 300ms ease 0ms, bottom 300ms ease 0ms, left 300ms ease 0ms, margin 300ms ease 0ms, max-width 300ms ease 0ms",pointerEvents:"none"},t[Oe]={pointerEvents:"all"},t[De]={padding:ie.default+"px 0px",transition:"padding 300ms ease 0ms"},t.maxWidth="calc(100% - "+2*te.default+"px)",t[e.breakpoints.down("xs")]={width:"100%",maxWidth:"calc(100% - 32px)"},t),rootDense:(i={},i[De]={padding:ie.dense+"px 0px"},i),top:{top:te.default-ie.default,flexDirection:"column"},bottom:{bottom:te.default-ie.default,flexDirection:"column-reverse"},left:(n={left:te.default},n[e.breakpoints.up("sm")]={alignItems:"flex-start"},n[e.breakpoints.down("xs")]={left:"16px"},n),right:(r={right:te.default},r[e.breakpoints.up("sm")]={alignItems:"flex-end"},r[e.breakpoints.down("xs")]={right:"16px"},r),center:(s={left:"50%",transform:"translateX(-50%)"},s[e.breakpoints.up("sm")]={alignItems:"center"},s)}})),Ae=function(e){var t=Ie(),i=e.className,n=e.anchorOrigin,s=e.dense,o=X(e,["className","anchorOrigin","dense"]),a=l(t[n.vertical],t[n.horizontal],t.root,i,s&&t.rootDense);return r.createElement("div",Object.assign({className:a},o))},Pe=r.memo(Ae),Re=function(e){var t,i,n,o,a;function c(t){var i;return(i=e.call(this,t)||this).enqueueSnackbar=function(e,t){void 0===t&&(t={});var n=t,r=n.key,s=n.preventDuplicate,o=X(n,["key","preventDuplicate"]),a=he(r),l=a?r:(new Date).getTime()+Math.random(),c=function(e,t,i){return function(n){return"autoHideDuration"===n?ue(e.autoHideDuration)?e.autoHideDuration:ue(t.autoHideDuration)?t.autoHideDuration:ne.autoHideDuration:e[n]||t[n]||i[n]}}(o,i.props,ne),h=Y({key:l},o,{message:e,open:!0,entered:!1,requestClose:!1,variant:c("variant"),anchorOrigin:c("anchorOrigin"),autoHideDuration:c("autoHideDuration")});return o.persist&&(h.autoHideDuration=void 0),i.setState((function(t){if(void 0===s&&i.props.preventDuplicate||s){var n=function(t){return a?t.key===r:t.message===e},o=t.queue.findIndex(n)>-1,l=t.snacks.findIndex(n)>-1;if(o||l)return t}return i.handleDisplaySnack(Y({},t,{queue:[].concat(t.queue,[h])}))})),l},i.handleDisplaySnack=function(e){return e.snacks.length>=i.maxSnack?i.handleDismissOldest(e):i.processQueue(e)},i.processQueue=function(e){var t=e.queue,i=e.snacks;return t.length>0?Y({},e,{snacks:[].concat(i,[t[0]]),queue:t.slice(1,t.length)}):e},i.handleDismissOldest=function(e){if(e.snacks.some((function(e){return!e.open||e.requestClose})))return e;var t=!1,n=!1;e.snacks.reduce((function(e,t){return e+(t.open&&t.persist?1:0)}),0)===i.maxSnack&&(n=!0);var r=e.snacks.map((function(e){return t||e.persist&&!n?Y({},e):(t=!0,e.entered?(e.onClose&&e.onClose(null,oe.MAXSNACK,e.key),i.props.onClose&&i.props.onClose(null,oe.MAXSNACK,e.key),Y({},e,{open:!1})):Y({},e,{requestClose:!0}))}));return Y({},e,{snacks:r})},i.handleEnteredSnack=function(e,t,n){if(!he(n))throw new Error("handleEnteredSnack Cannot be called with undefined key");i.setState((function(e){return{snacks:e.snacks.map((function(e){return e.key===n?Y({},e,{entered:!0}):Y({},e)}))}}))},i.handleCloseSnack=function(e,t,n){if(i.props.onClose&&i.props.onClose(e,t,n),t!==oe.CLICKAWAY){var r=void 0===n;i.setState((function(e){var t=e.snacks,i=e.queue;return{snacks:t.map((function(e){return r||e.key===n?e.entered?Y({},e,{open:!1}):Y({},e,{requestClose:!0}):Y({},e)})),queue:i.filter((function(e){return e.key!==n}))}}))}},i.closeSnackbar=function(e){var t=i.state.snacks.find((function(t){return t.key===e}));he(e)&&t&&t.onClose&&t.onClose(null,oe.INSTRUCTED,e),i.handleCloseSnack(null,oe.INSTRUCTED,e)},i.handleExitedSnack=function(e,t,n){var r=t||n;if(!he(r))throw new Error("handleExitedSnack Cannot be called with undefined key");i.setState((function(e){var t=i.processQueue(Y({},e,{snacks:e.snacks.filter((function(e){return e.key!==r}))}));return 0===t.queue.length?t:i.handleDismissOldest(t)}))},i.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:i.enqueueSnackbar,closeSnackbar:i.closeSnackbar}},i}return i=e,(t=c).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,c.prototype.render=function(){var e=this,t=this.state.contextValue,i=this.props,n=i.iconVariant,o=i.dense,a=void 0===o?ne.dense:o,c=i.hideIconVariant,h=void 0===c?ne.hideIconVariant:c,u=i.domRoot,d=i.children,f=i.classes,p=void 0===f?{}:f,g=X(i,["maxSnack","preventDuplicate","variant","anchorOrigin","iconVariant","dense","hideIconVariant","domRoot","children","classes"]),m=this.state.snacks.reduce((function(e,t){var i,n,r=(n=t.anchorOrigin,""+re(n.vertical)+re(n.horizontal)),s=e[r]||[];return Y({},e,((i={})[r]=[].concat(s,[t]),i))}),{}),b=Object.keys(m).map((function(t){var i=m[t];return r.createElement(Pe,{key:t,dense:a,anchorOrigin:i[0].anchorOrigin,className:l(p.containerRoot,p[ae(t)])},i.map((function(t){return r.createElement(Me,Object.assign({},g,{key:t.key,snack:t,dense:a,iconVariant:n,hideIconVariant:h,classes:se(p),onClose:e.handleCloseSnack,onExited:xe([e.handleExitedSnack,e.props.onExited]),onEntered:xe([e.handleEnteredSnack,e.props.onEntered])}))})))}));return r.createElement(Q.Provider,{value:t},d,u?(0,s.createPortal)(b,u):b)},n=c,(o=[{key:"maxSnack",get:function(){return this.props.maxSnack||ne.maxSnack}}])&&Z(n.prototype,o),a&&Z(n,a),c}(r.Component),Be=r.createContext(null);var Fe=function(e){e()},We=function(){return Fe},Ve={notify:function(){}};var ze=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=Ve,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=We(),t=null,i=null;return{clear:function(){t=null,i=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],i=t;i;)e.push(i),i=i.next;return e},subscribe:function(e){var n=!0,r=i={callback:e,next:null,prev:i};return r.prev?r.prev.next=r:t=r,function(){n&&null!==t&&(n=!1,r.next?r.next.prev=r.prev:i=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Ve)},e}(),He="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;const je=function(e){var t=e.store,i=e.context,n=e.children,s=(0,r.useMemo)((function(){var e=new ze(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),o=(0,r.useMemo)((function(){return t.getState()}),[t]);He((function(){var e=s.subscription;return e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[s,o]);var a=i||Be;return r.createElement(a.Provider,{value:s},n)};var Ue=i(8679),Ge=i.n(Ue);i(59864);function Ke(){return(0,r.useContext)(Be)}function $e(e){void 0===e&&(e=Be);var t=e===Be?Ke:function(){return(0,r.useContext)(e)};return function(){return t().store}}var qe=$e();function Ze(e){void 0===e&&(e=Be);var t=e===Be?qe:$e(e);return function(){return t().dispatch}}var Ye=Ze(),Xe=function(e,t){return e===t};function Qe(e){void 0===e&&(e=Be);var t=e===Be?Ke:function(){return(0,r.useContext)(e)};return function(e,i){void 0===i&&(i=Xe);var n=t(),s=function(e,t,i,n){var s,o=(0,r.useReducer)((function(e){return e+1}),0)[1],a=(0,r.useMemo)((function(){return new ze(i,n)}),[i,n]),l=(0,r.useRef)(),c=(0,r.useRef)(),h=(0,r.useRef)(),u=(0,r.useRef)(),d=i.getState();try{if(e!==c.current||d!==h.current||l.current){var f=e(d);s=void 0!==u.current&&t(f,u.current)?u.current:f}else s=u.current}catch(e){throw l.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+l.current.stack+"\n\n"),e}return He((function(){c.current=e,h.current=d,u.current=s,l.current=void 0})),He((function(){function e(){try{var e=i.getState(),n=c.current(e);if(t(n,u.current))return;u.current=n,h.current=e}catch(e){l.current=e}o()}return a.onStateChange=e,a.trySubscribe(),e(),function(){return a.tryUnsubscribe()}}),[i,a]),s}(e,i,n.store,n.subscription);return(0,r.useDebugValue)(s),s}}var Je,et=Qe();function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?ot(e):t}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Je=s.unstable_batchedUpdates,Fe=Je;var ct=function(e){function t(){var e,i;it(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return lt(ot(i=rt(this,(e=st(t)).call.apply(e,[this].concat(r)))),"state",{bootstrapped:!1}),lt(ot(i),"_unsubscribe",void 0),lt(ot(i),"handlePersistorState",(function(){i.props.persistor.getState().bootstrapped&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).finally((function(){return i.setState({bootstrapped:!0})})):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())})),i}var i,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,e),i=t,(n=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&nt(i.prototype,n),r&&nt(i,r),t}(r.PureComponent);function ht(e){return"/"===e.charAt(0)}function ut(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}lt(ct,"defaultProps",{children:null,loading:null});const dt=function(e,t){void 0===t&&(t="");var i,n=e&&e.split("/")||[],r=t&&t.split("/")||[],s=e&&ht(e),o=t&&ht(t),a=s||o;if(e&&ht(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";if(r.length){var l=r[r.length-1];i="."===l||".."===l||""===l}else i=!1;for(var c=0,h=r.length;h>=0;h--){var u=r[h];"."===u?ut(r,h):".."===u?(ut(r,h),c++):c&&(ut(r,h),c--)}if(!a)for(;c--;c)r.unshift("..");!a||""===r[0]||r[0]&&ht(r[0])||r.unshift("");var d=r.join("/");return i&&"/"!==d.substr(-1)&&(d+="/"),d};function ft(e){var t=e.pathname,i=e.search,n=e.hash,r=t||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function pt(e,t,i,n){var r;"string"==typeof e?(r=function(e){var t=e||"/",i="",n="",r=t.indexOf("#");-1!==r&&(n=t.substr(r),t=t.substr(0,r));var s=t.indexOf("?");return-1!==s&&(i=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===i?"":i,hash:"#"===n?"":n}}(e)).state=t:(void 0===(r=(0,c.Z)({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return i&&(r.key=i),n?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=dt(r.pathname,n.pathname)):r.pathname=n.pathname:r.pathname||(r.pathname="/"),r}function gt(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,i,n,r){if(null!=e){var s="function"==typeof e?e(t,i):e;"string"==typeof s?"function"==typeof n?n(s,r):r(!0):r(!1!==s)}else r(!0)},appendListener:function(e){var i=!0;function n(){i&&e.apply(void 0,arguments)}return t.push(n),function(){i=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,i)}))}}}"undefined"==typeof window||!window.document||window.document.createElement;function mt(e,t,i){return Math.min(Math.max(e,t),i)}function bt(e){void 0===e&&(e={});var t=e,i=t.getUserConfirmation,n=t.initialEntries,r=void 0===n?["/"]:n,s=t.initialIndex,o=void 0===s?0:s,a=t.keyLength,l=void 0===a?6:a,h=gt();function u(e){(0,c.Z)(b,e),b.length=b.entries.length,h.notifyListeners(b.location,b.action)}function d(){return Math.random().toString(36).substr(2,l)}var f=mt(o,0,r.length-1),p=r.map((function(e){return pt(e,void 0,"string"==typeof e?d():e.key||d())})),g=ft;function m(e){var t=mt(b.index+e,0,b.entries.length-1),n=b.entries[t];h.confirmTransitionTo(n,"POP",i,(function(e){e?u({action:"POP",location:n,index:t}):u()}))}var b={length:p.length,action:"POP",location:p[f],index:f,entries:p,createHref:g,push:function(e,t){var n="PUSH",r=pt(e,t,d(),b.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b.index+1,i=b.entries.slice(0);i.length>t?i.splice(t,i.length-t,r):i.push(r),u({action:n,location:r,index:t,entries:i})}}))},replace:function(e,t){var n="REPLACE",r=pt(e,t,d(),b.location);h.confirmTransitionTo(r,n,i,(function(e){e&&(b.entries[b.index]=r,u({action:n,location:r}))}))},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=b.index+e;return t>=0&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),h.setPrompt(e)},listen:function(e){return h.appendListener(e)}};return b}var vt=1073741823,yt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function _t(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(i,n){e=i,t.forEach((function(t){return t(e,n)}))}}}const wt=r.createContext||function(e,t){var i,n,s="__create-react-context-"+function(){var e="__global_unique_id__";return yt[e]=(yt[e]||0)+1}()+"__",o=function(e){function i(){var t;return(t=e.apply(this,arguments)||this).emitter=_t(t.props.value),t}(0,g.Z)(i,e);var n=i.prototype;return n.getChildContext=function(){var e;return(e={})[s]=this.emitter,e},n.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var i,n=this.props.value,r=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)?(i="function"==typeof t?t(n,r):vt,0!==(i|=0)&&this.emitter.set(e.value,i)):i=0}},n.render=function(){return this.props.children},i}(r.Component);o.childContextTypes=((i={})[s]=d().object.isRequired,i);var a=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,i){0!=((0|e.observedBits)&i)&&e.setState({value:e.getValue()})},e}(0,g.Z)(i,t);var n=i.prototype;return n.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?vt:t},n.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?vt:e},n.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},n.getValue=function(){return this.context[s]?this.context[s].get():e},n.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},i}(r.Component);return a.contextTypes=((n={})[s]=d().object,n),{Provider:o,Consumer:a}};var St="Invariant failed";const Ct=function(e,t){if(!e)throw new Error(St)};var xt=i(39658),kt=i.n(xt),Et=function(e){var t=wt();return t.displayName=e,t}("Router-History"),Tt=function(e){var t=wt();return t.displayName=e,t}("Router"),Lt=function(e){function t(t){var i;return(i=e.call(this,t)||this).state={location:t.history.location},i._isMounted=!1,i._pendingLocation=null,t.staticContext||(i.unlisten=t.history.listen((function(e){i._isMounted?i.setState({location:e}):i._pendingLocation=e}))),i}(0,g.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var i=t.prototype;return i.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&this.unlisten()},i.render=function(){return r.createElement(Tt.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},r.createElement(Et.Provider,{children:this.props.children||null,value:this.props.history}))},t}(r.Component);r.Component;r.Component;var Nt={},Mt=0;function Ot(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var i=t,n=i.path,r=i.exact,s=void 0!==r&&r,o=i.strict,a=void 0!==o&&o,l=i.sensitive,c=void 0!==l&&l;return[].concat(n).reduce((function(t,i){if(!i&&""!==i)return null;if(t)return t;var n=function(e,t){var i=""+t.end+t.strict+t.sensitive,n=Nt[i]||(Nt[i]={});if(n[e])return n[e];var r=[],s={regexp:kt()(e,r,t),keys:r};return Mt<1e4&&(n[e]=s,Mt++),s}(i,{end:s,strict:a,sensitive:c}),r=n.regexp,o=n.keys,l=r.exec(e);if(!l)return null;var h=l[0],u=l.slice(1),d=e===h;return s&&!d?null:{path:i,url:"/"===i&&""===h?"/":h,isExact:d,params:o.reduce((function(e,t,i){return e[t.name]=u[i],e}),{})}}),null)}var Dt=function(e){function t(){return e.apply(this,arguments)||this}return(0,g.Z)(t,e),t.prototype.render=function(){var e=this;return r.createElement(Tt.Consumer,null,(function(t){t||Ct(!1);var i=e.props.location||t.location,n=e.props.computedMatch?e.props.computedMatch:e.props.path?Ot(i.pathname,e.props):t.match,s=(0,c.Z)({},t,{location:i,match:n}),o=e.props,a=o.children,l=o.component,h=o.render;return Array.isArray(a)&&0===a.length&&(a=null),r.createElement(Tt.Provider,{value:s},s.match?a?"function"==typeof a?a(s):a:l?r.createElement(l,s):h?h(s):null:"function"==typeof a?a(s):null)}))},t}(r.Component);function It(e){return"/"===e.charAt(0)?e:"/"+e}function At(e,t){if(!e)return t;var i=It(e);return 0!==t.pathname.indexOf(i)?t:(0,c.Z)({},t,{pathname:t.pathname.substr(i.length)})}function Pt(e){return"string"==typeof e?e:ft(e)}function Rt(e){return function(){Ct(!1)}}function Bt(){}r.Component;var Ft=function(e){function t(){return e.apply(this,arguments)||this}return(0,g.Z)(t,e),t.prototype.render=function(){var e=this;return r.createElement(Tt.Consumer,null,(function(t){t||Ct(!1);var i,n,s=e.props.location||t.location;return r.Children.forEach(e.props.children,(function(e){if(null==n&&r.isValidElement(e)){i=e;var o=e.props.path||e.props.from;n=o?Ot(s.pathname,(0,c.Z)({},e.props,{path:o})):t.match}})),n?r.cloneElement(i,{location:s,computedMatch:n}):null}))},t}(r.Component);r.useContext;function Wt(e){return"/"===e.charAt(0)?e:"/"+e}function Vt(e){return"/"===e.charAt(0)?e.substr(1):e}function zt(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function Ht(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function jt(e){var t=e.pathname,i=e.search,n=e.hash,r=t||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function Ut(e,t,i,n){var r;"string"==typeof e?(r=function(e){var t=e||"/",i="",n="",r=t.indexOf("#");-1!==r&&(n=t.substr(r),t=t.substr(0,r));var s=t.indexOf("?");return-1!==s&&(i=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===i?"":i,hash:"#"===n?"":n}}(e)).state=t:(void 0===(r=(0,c.Z)({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return i&&(r.key=i),n?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=dt(r.pathname,n.pathname)):r.pathname=n.pathname:r.pathname||(r.pathname="/"),r}function Gt(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,i,n,r){if(null!=e){var s="function"==typeof e?e(t,i):e;"string"==typeof s?"function"==typeof n?n(s,r):r(!0):r(!1!==s)}else r(!0)},appendListener:function(e){var i=!0;function n(){i&&e.apply(void 0,arguments)}return t.push(n),function(){i=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,i)}))}}}var Kt=!("undefined"==typeof window||!window.document||!window.document.createElement);function $t(e,t){t(window.confirm(e))}var qt="popstate",Zt="hashchange";function Yt(){try{return window.history.state||{}}catch(e){return{}}}function Xt(e){void 0===e&&(e={}),Kt||Ct(!1);var t,i=window.history,n=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,r=!(-1===window.navigator.userAgent.indexOf("Trident")),s=e,o=s.forceRefresh,a=void 0!==o&&o,l=s.getUserConfirmation,h=void 0===l?$t:l,u=s.keyLength,d=void 0===u?6:u,f=e.basename?Ht(Wt(e.basename)):"";function p(e){var t=e||{},i=t.key,n=t.state,r=window.location,s=r.pathname+r.search+r.hash;return f&&(s=zt(s,f)),Ut(s,n,i)}function g(){return Math.random().toString(36).substr(2,d)}var m=Gt();function b(e){(0,c.Z)(N,e),N.length=i.length,m.notifyListeners(N.location,N.action)}function v(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||w(p(e.state))}function y(){w(p(Yt()))}var _=!1;function w(e){if(_)_=!1,b();else{m.confirmTransitionTo(e,"POP",h,(function(t){t?b({action:"POP",location:e}):function(e){var t=N.location,i=C.indexOf(t.key);-1===i&&(i=0);var n=C.indexOf(e.key);-1===n&&(n=0);var r=i-n;r&&(_=!0,k(r))}(e)}))}}var S=p(Yt()),C=[S.key];function x(e){return f+jt(e)}function k(e){i.go(e)}var E=0;function T(e){1===(E+=e)&&1===e?(window.addEventListener(qt,v),r&&window.addEventListener(Zt,y)):0===E&&(window.removeEventListener(qt,v),r&&window.removeEventListener(Zt,y))}var L=!1;var N={length:i.length,action:"POP",location:S,createHref:x,push:function(e,t){var r="PUSH",s=Ut(e,t,g(),N.location);m.confirmTransitionTo(s,r,h,(function(e){if(e){var t=x(s),o=s.key,l=s.state;if(n)if(i.pushState({key:o,state:l},null,t),a)window.location.href=t;else{var c=C.indexOf(N.location.key),h=C.slice(0,c+1);h.push(s.key),C=h,b({action:r,location:s})}else window.location.href=t}}))},replace:function(e,t){var r="REPLACE",s=Ut(e,t,g(),N.location);m.confirmTransitionTo(s,r,h,(function(e){if(e){var t=x(s),o=s.key,l=s.state;if(n)if(i.replaceState({key:o,state:l},null,t),a)window.location.replace(t);else{var c=C.indexOf(N.location.key);-1!==c&&(C[c]=s.key),b({action:r,location:s})}else window.location.replace(t)}}))},go:k,goBack:function(){k(-1)},goForward:function(){k(1)},block:function(e){void 0===e&&(e=!1);var t=m.setPrompt(e);return L||(T(1),L=!0),function(){return L&&(L=!1,T(-1)),t()}},listen:function(e){var t=m.appendListener(e);return T(1),function(){T(-1),t()}}};return N}var Qt="hashchange",Jt={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+Vt(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:Vt,decodePath:Wt},slash:{encodePath:Wt,decodePath:Wt}};function ei(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function ti(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function ii(e){window.location.replace(ei(window.location.href)+"#"+e)}function ni(e){void 0===e&&(e={}),Kt||Ct(!1);var t=window.history,i=(window.navigator.userAgent.indexOf("Firefox"),e),n=i.getUserConfirmation,r=void 0===n?$t:n,s=i.hashType,o=void 0===s?"slash":s,a=e.basename?Ht(Wt(e.basename)):"",l=Jt[o],h=l.encodePath,u=l.decodePath;function d(){var e=u(ti());return a&&(e=zt(e,a)),Ut(e)}var f=Gt();function p(e){(0,c.Z)(E,e),E.length=t.length,f.notifyListeners(E.location,E.action)}var g=!1,m=null;function b(){var e=ti(),t=h(e);if(e!==t)ii(t);else{var i=d(),n=E.location;if(!g&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(n,i))return;if(m===jt(i))return;m=null,function(e){if(g)g=!1,p();else{var t="POP";f.confirmTransitionTo(e,t,r,(function(i){i?p({action:t,location:e}):function(e){var t=E.location,i=w.lastIndexOf(jt(t));-1===i&&(i=0);var n=w.lastIndexOf(jt(e));-1===n&&(n=0);var r=i-n;r&&(g=!0,S(r))}(e)}))}}(i)}}var v=ti(),y=h(v);v!==y&&ii(y);var _=d(),w=[jt(_)];function S(e){t.go(e)}var C=0;function x(e){1===(C+=e)&&1===e?window.addEventListener(Qt,b):0===C&&window.removeEventListener(Qt,b)}var k=!1;var E={length:t.length,action:"POP",location:_,createHref:function(e){var t=document.querySelector("base"),i="";return t&&t.getAttribute("href")&&(i=ei(window.location.href)),i+"#"+h(a+jt(e))},push:function(e,t){var i="PUSH",n=Ut(e,void 0,void 0,E.location);f.confirmTransitionTo(n,i,r,(function(e){if(e){var t=jt(n),r=h(a+t);if(ti()!==r){m=t,function(e){window.location.hash=e}(r);var s=w.lastIndexOf(jt(E.location)),o=w.slice(0,s+1);o.push(t),w=o,p({action:i,location:n})}else p()}}))},replace:function(e,t){var i="REPLACE",n=Ut(e,void 0,void 0,E.location);f.confirmTransitionTo(n,i,r,(function(e){if(e){var t=jt(n),r=h(a+t);ti()!==r&&(m=t,ii(r));var s=w.indexOf(jt(E.location));-1!==s&&(w[s]=t),p({action:i,location:n})}}))},go:S,goBack:function(){S(-1)},goForward:function(){S(1)},block:function(e){void 0===e&&(e=!1);var t=f.setPrompt(e);return k||(x(1),k=!0),function(){return k&&(k=!1,x(-1)),t()}},listen:function(e){var t=f.appendListener(e);return x(1),function(){x(-1),t()}}};return E}var ri=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).history=Xt(t.props),t}return(0,g.Z)(t,e),t.prototype.render=function(){return r.createElement(Lt,{history:this.history,children:this.props.children})},t}(r.Component);r.Component;var si=function(e,t){return"function"==typeof e?e(t):e},oi=function(e,t){return"string"==typeof e?Ut(e,null,null,t):e},ai=function(e){return e},li=r.forwardRef;void 0===li&&(li=ai);var ci=li((function(e,t){var i=e.innerRef,n=e.navigate,s=e.onClick,o=(0,p.Z)(e,["innerRef","navigate","onClick"]),a=o.target,l=(0,c.Z)({},o,{onClick:function(e){try{s&&s(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}});return l.ref=ai!==li&&t||i,r.createElement("a",l)}));var hi=li((function(e,t){var i=e.component,n=void 0===i?ci:i,s=e.replace,o=e.to,a=e.innerRef,l=(0,p.Z)(e,["component","replace","to","innerRef"]);return r.createElement(Tt.Consumer,null,(function(e){e||Ct(!1);var i=e.history,h=oi(si(o,e.location),e.location),u=h?i.createHref(h):"",d=(0,c.Z)({},l,{href:u,navigate:function(){var t=si(o,e.location);(s?i.replace:i.push)(t)}});return ai!==li?d.ref=t||a:d.innerRef=a,r.createElement(n,d)}))})),ui=function(e){return e},di=r.forwardRef;void 0===di&&(di=ui);di((function(e,t){var i=e["aria-current"],n=void 0===i?"page":i,s=e.activeClassName,o=void 0===s?"active":s,a=e.activeStyle,l=e.className,h=e.exact,u=e.isActive,d=e.location,f=e.sensitive,g=e.strict,m=e.style,b=e.to,v=e.innerRef,y=(0,p.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return r.createElement(Tt.Consumer,null,(function(e){e||Ct(!1);var i=d||e.location,s=oi(si(b,i),i),p=s.pathname,_=p&&p.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=_?Ot(i.pathname,{path:_,exact:h,sensitive:f,strict:g}):null,S=!!(u?u(w,i):w),C=S?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((function(e){return e})).join(" ")}(l,o):l,x=S?(0,c.Z)({},m,{},a):m,k=(0,c.Z)({"aria-current":S&&n||null,className:C,style:x,to:s},y);return ui!==di?k.ref=t||v:k.innerRef=v,r.createElement(hi,k)}))}));const fi="/";var pi=i(97262),gi=i.n(pi);function mi(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function bi(e){this.setState(function(t){var i=this.constructor.getDerivedStateFromProps(e,t);return null!=i?i:null}.bind(this))}function vi(e,t){try{var i=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(i,n)}finally{this.props=i,this.state=n}}function yi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wi(e,t,i){return t&&_i(e.prototype,t),i&&_i(e,i),e}function Si(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ci(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function xi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(i),!0).forEach((function(t){Si(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ci(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ki(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ti(e,t)}function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ti(e,t){return(Ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Li(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ni(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mi(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Ni(e):t}function Oi(e){return function(){var t,i=Ei(e);if(Li()){var n=Ei(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return Mi(this,t)}}mi.__suppressDeprecationWarning=!0,bi.__suppressDeprecationWarning=!0,vi.__suppressDeprecationWarning=!0;var Di=function(e){ki(i,e);var t=Oi(i);function i(){return yi(this,i),t.apply(this,arguments)}return wi(i,[{key:"render",value:function(){var e=this.props,t=e.children,i=e.className,n=e.split,s=e.style,o=e.size,a=e.eleRef,l=["Pane",n,i],c={flex:1,position:"relative",outline:"none"};return void 0!==o&&("vertical"===n?c.width=o:(c.height=o,c.display="flex"),c.flex="none"),c=Object.assign({},c,s||{}),r.createElement("div",{ref:a,className:l.join(" "),style:c},t)}}]),i}(r.PureComponent);Di.propTypes={className:d().string.isRequired,children:d().node.isRequired,size:d().oneOfType([d().string,d().number]),split:d().oneOf(["vertical","horizontal"]),style:gi(),eleRef:d().func},Di.defaultProps={};var Ii="Resizer",Ai=function(e){ki(i,e);var t=Oi(i);function i(){return yi(this,i),t.apply(this,arguments)}return wi(i,[{key:"render",value:function(){var e=this.props,t=e.className,i=e.onClick,n=e.onDoubleClick,s=e.onMouseDown,o=e.onTouchEnd,a=e.onTouchStart,l=e.resizerClassName,c=e.split,h=e.style,u=[l,c,t];return r.createElement("span",{role:"presentation",className:u.join(" "),style:h,onMouseDown:function(e){return s(e)},onTouchStart:function(e){e.preventDefault(),a(e)},onTouchEnd:function(e){e.preventDefault(),o(e)},onClick:function(e){i&&(e.preventDefault(),i(e))},onDoubleClick:function(e){n&&(e.preventDefault(),n(e))}})}}]),i}(r.Component);function Pi(e,t){if(e.selection)e.selection.empty();else try{t.getSelection().removeAllRanges()}catch(e){}}function Ri(e,t,i,n){if("number"==typeof n){var r="number"==typeof t?t:0,s="number"==typeof i&&i>=0?i:1/0;return Math.max(r,Math.min(s,n))}return void 0!==e?e:t}Ai.propTypes={className:d().string.isRequired,onClick:d().func,onDoubleClick:d().func,onMouseDown:d().func.isRequired,onTouchStart:d().func.isRequired,onTouchEnd:d().func.isRequired,split:d().oneOf(["vertical","horizontal"]),style:gi(),resizerClassName:d().string.isRequired},Ai.defaultProps={resizerClassName:Ii};var Bi=function(e){ki(i,e);var t=Oi(i);function i(e){var n;yi(this,i),(n=t.call(this,e)).onMouseDown=n.onMouseDown.bind(Ni(n)),n.onTouchStart=n.onTouchStart.bind(Ni(n)),n.onMouseMove=n.onMouseMove.bind(Ni(n)),n.onTouchMove=n.onTouchMove.bind(Ni(n)),n.onMouseUp=n.onMouseUp.bind(Ni(n));var r=e.size,s=e.defaultSize,o=e.minSize,a=e.maxSize,l=e.primary,c=void 0!==r?r:Ri(s,o,a,null);return n.state={active:!1,resized:!1,pane1Size:"first"===l?c:void 0,pane2Size:"second"===l?c:void 0,instanceProps:{size:r}},n}return wi(i,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(i.getSizeUpdate(this.props,this.state))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}},{key:"onMouseDown",value:function(e){var t=Object.assign({},e,{touches:[{clientX:e.clientX,clientY:e.clientY}]});this.onTouchStart(t)}},{key:"onTouchStart",value:function(e){var t=this.props,i=t.allowResize,n=t.onDragStarted,r=t.split;if(i){Pi(document,window);var s="vertical"===r?e.touches[0].clientX:e.touches[0].clientY;"function"==typeof n&&n(),this.setState({active:!0,position:s})}}},{key:"onMouseMove",value:function(e){var t=Object.assign({},e,{touches:[{clientX:e.clientX,clientY:e.clientY}]});this.onTouchMove(t)}},{key:"onTouchMove",value:function(e){var t=this.props,i=t.allowResize,n=t.maxSize,r=t.minSize,s=t.onChange,o=t.split,a=t.step,l=this.state,c=l.active,h=l.position;if(i&&c){Pi(document,window);var u="first"===this.props.primary,d=u?this.pane1:this.pane2,f=u?this.pane2:this.pane1;if(d){var p=d,g=f;if(p.getBoundingClientRect){var m=p.getBoundingClientRect().width,b=p.getBoundingClientRect().height,v="vertical"===o?m:b,y=h-("vertical"===o?e.touches[0].clientX:e.touches[0].clientY);if(a){if(Math.abs(y)<a)return;y=~~(y/a)*a}var _=u?y:-y;parseInt(window.getComputedStyle(p).order)>parseInt(window.getComputedStyle(g).order)&&(_=-_);var w=n;if(void 0!==n&&n<=0){var S=this.splitPane;w="vertical"===o?S.getBoundingClientRect().width+n:S.getBoundingClientRect().height+n}var C=v-_,x=h-y;C<r?C=r:void 0!==n&&C>w?C=w:this.setState({position:x,resized:!0}),s&&s(C),this.setState(Si({draggedSize:C},u?"pane1Size":"pane2Size",C))}}}}},{key:"onMouseUp",value:function(){var e=this.props,t=e.allowResize,i=e.onDragFinished,n=this.state,r=n.active,s=n.draggedSize;t&&r&&("function"==typeof i&&i(s),this.setState({active:!1}))}},{key:"render",value:function(){var e=this,t=this.props,i=t.allowResize,n=t.children,s=t.className,o=t.onResizerClick,a=t.onResizerDoubleClick,l=t.paneClassName,c=t.pane1ClassName,h=t.pane2ClassName,u=t.paneStyle,d=t.pane1Style,f=t.pane2Style,p=t.resizerClassName,g=t.resizerStyle,m=t.split,b=t.style,v=this.state,y=v.pane1Size,_=v.pane2Size,w=i?"":"disabled",S=p?"".concat(p," ").concat(Ii):p,C=function(e){return r.Children.toArray(e).filter((function(e){return e}))}(n),x=xi({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},b);"vertical"===m?Object.assign(x,{flexDirection:"row",left:0,right:0}):Object.assign(x,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"});var k=["SplitPane",s,m,w],E=xi({},u,{},d),T=xi({},u,{},f),L=["Pane1",l,c].join(" "),N=["Pane2",l,h].join(" ");return r.createElement("div",{className:k.join(" "),ref:function(t){e.splitPane=t},style:x},r.createElement(Di,{className:L,key:"pane1",eleRef:function(t){e.pane1=t},size:y,split:m,style:E},C[0]),r.createElement(Ai,{className:w,onClick:o,onDoubleClick:a,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,key:"resizer",resizerClassName:S,split:m,style:g||{}}),r.createElement(Di,{className:N,key:"pane2",eleRef:function(t){e.pane2=t},size:_,split:m,style:T},C[1]))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return i.getSizeUpdate(e,t)}},{key:"getSizeUpdate",value:function(e,t){var i={};if(t.instanceProps.size===e.size&&void 0!==e.size)return{};var n=void 0!==e.size?e.size:Ri(e.defaultSize,e.minSize,e.maxSize,t.draggedSize);void 0!==e.size&&(i.draggedSize=n);var r="first"===e.primary;return i[r?"pane1Size":"pane2Size"]=n,i[r?"pane2Size":"pane1Size"]=void 0,i.instanceProps={size:e.size},i}}]),i}(r.Component);Bi.propTypes={allowResize:d().bool,children:d().arrayOf(d().node).isRequired,className:d().string,primary:d().oneOf(["first","second"]),minSize:d().oneOfType([d().string,d().number]),maxSize:d().oneOfType([d().string,d().number]),defaultSize:d().oneOfType([d().string,d().number]),size:d().oneOfType([d().string,d().number]),split:d().oneOf(["vertical","horizontal"]),onDragStarted:d().func,onDragFinished:d().func,onChange:d().func,onResizerClick:d().func,onResizerDoubleClick:d().func,style:gi(),resizerStyle:gi(),paneClassName:d().string,pane1ClassName:d().string,pane2ClassName:d().string,paneStyle:gi(),pane1Style:gi(),pane2Style:gi(),resizerClassName:d().string,step:d().number},Bi.defaultProps={allowResize:!0,minSize:50,primary:"first",split:"vertical",paneClassName:"",pane1ClassName:"",pane2ClassName:""},function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var i=null,n=null,r=null;if("function"==typeof t.componentWillMount?i="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(i="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?r="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==i||null!==n||null!==r){var s=e.displayName||e.name,o="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+s+" uses "+o+" but also contains the following legacy lifecycles:"+(null!==i?"\n  "+i:"")+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=mi,t.componentWillReceiveProps=bi),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=vi;var a=t.componentDidUpdate;t.componentDidUpdate=function(e,t,i){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:i;a.call(this,e,t,n)}}}(Bi);const Fi=Bi;var Wi=i(57850),Vi=i(83800),zi=i(17076);const Hi=function(e){var t=e.children,i=e.theme,n=(0,T.Z)(),s=r.useMemo((function(){var e=null===n?i:function(e,t){return"function"==typeof t?t(e):(0,c.Z)({},e,t)}(n,i);return null!=e&&(e[zi.Z]=null!==n),e}),[i,n]);return r.createElement(Vi.Z.Provider,{value:s},t)};var ji={WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box"},Ui=function(e){return(0,c.Z)({color:e.palette.text.primary},e.typography.body2,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}})};const Gi=(0,R.Z)((function(e){return{"@global":{html:ji,"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,c.Z)({margin:0},Ui(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})}}}),{name:"MuiCssBaseline"})((function(e){var t=e.children,i=void 0===t?null:t;return e.classes,r.createElement(r.Fragment,null,i)}));var Ki=i(85061),$i=i(19668);function qi(e,t){var i={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(i[n]=e[n])})),i}function Zi(e){var t=function(t){var i=e(t);return t.css?(0,c.Z)({},(0,$i.Z)(i,e((0,c.Z)({theme:t.theme},t.css))),qi(t.css,[e.filterProps])):t.sx?(0,c.Z)({},(0,$i.Z)(i,e((0,c.Z)({theme:t.theme},t.sx))),qi(t.sx,[e.filterProps])):i};return t.propTypes={},t.filterProps=["css","sx"].concat((0,Ki.Z)(e.filterProps)),t}const Yi=Zi;const Xi=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=function(e){return t.reduce((function(t,i){var n=i(e);return n?(0,$i.Z)(t,n):t}),{})};return n.propTypes={},n.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),n};var Qi=i(96156),Ji=i(71410);function en(e,t){return t&&"string"==typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}const tn=function(e){var t=e.prop,i=e.cssProperty,n=void 0===i?e.prop:i,r=e.themeKey,s=e.transform,o=function(e){if(null==e[t])return null;var i=e[t],o=en(e.theme,r)||{};return(0,Ji.k)(e,i,(function(e){var t;return"function"==typeof o?t=o(e):Array.isArray(o)?t=o[e]||e:(t=en(o,e)||e,s&&(t=s(t))),!1===n?t:(0,Qi.Z)({},n,t)}))};return o.propTypes={},o.filterProps=[t],o};function nn(e){return"number"!=typeof e?e:"".concat(e,"px solid")}const rn=Xi(tn({prop:"border",themeKey:"borders",transform:nn}),tn({prop:"borderTop",themeKey:"borders",transform:nn}),tn({prop:"borderRight",themeKey:"borders",transform:nn}),tn({prop:"borderBottom",themeKey:"borders",transform:nn}),tn({prop:"borderLeft",themeKey:"borders",transform:nn}),tn({prop:"borderColor",themeKey:"palette"}),tn({prop:"borderRadius",themeKey:"shape"}));const sn=Xi(tn({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),tn({prop:"display"}),tn({prop:"overflow"}),tn({prop:"textOverflow"}),tn({prop:"visibility"}),tn({prop:"whiteSpace"}));const on=Xi(tn({prop:"flexBasis"}),tn({prop:"flexDirection"}),tn({prop:"flexWrap"}),tn({prop:"justifyContent"}),tn({prop:"alignItems"}),tn({prop:"alignContent"}),tn({prop:"order"}),tn({prop:"flex"}),tn({prop:"flexGrow"}),tn({prop:"flexShrink"}),tn({prop:"alignSelf"}),tn({prop:"justifyItems"}),tn({prop:"justifySelf"}));const an=Xi(tn({prop:"gridGap"}),tn({prop:"gridColumnGap"}),tn({prop:"gridRowGap"}),tn({prop:"gridColumn"}),tn({prop:"gridRow"}),tn({prop:"gridAutoFlow"}),tn({prop:"gridAutoColumns"}),tn({prop:"gridAutoRows"}),tn({prop:"gridTemplateColumns"}),tn({prop:"gridTemplateRows"}),tn({prop:"gridTemplateAreas"}),tn({prop:"gridArea"}));const ln=Xi(tn({prop:"position"}),tn({prop:"zIndex",themeKey:"zIndex"}),tn({prop:"top"}),tn({prop:"right"}),tn({prop:"bottom"}),tn({prop:"left"}));const cn=Xi(tn({prop:"color",themeKey:"palette"}),tn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}));const hn=tn({prop:"boxShadow",themeKey:"shadows"});function un(e){return e<=1?"".concat(100*e,"%"):e}var dn=tn({prop:"width",transform:un}),fn=tn({prop:"maxWidth",transform:un}),pn=tn({prop:"minWidth",transform:un}),gn=tn({prop:"height",transform:un}),mn=tn({prop:"maxHeight",transform:un}),bn=tn({prop:"minHeight",transform:un});tn({prop:"size",cssProperty:"width",transform:un}),tn({prop:"size",cssProperty:"height",transform:un});const vn=Xi(dn,fn,pn,gn,mn,bn,tn({prop:"boxSizing"}));var yn=i(38681);const _n=Xi(tn({prop:"fontFamily",themeKey:"typography"}),tn({prop:"fontSize",themeKey:"typography"}),tn({prop:"fontStyle",themeKey:"typography"}),tn({prop:"fontWeight",themeKey:"typography"}),tn({prop:"letterSpacing"}),tn({prop:"lineHeight"}),tn({prop:"textAlign"}));function wn(e,t){var i={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(i[n]=e[n])})),i}const Sn=function(e){var t=function(e){return function(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.name,o=(0,h.Z)(n,["name"]),a=s,l="function"==typeof t?function(e){return{root:function(i){return t((0,c.Z)({theme:e},i))}}}:{root:t},u=(0,F.Z)(l,(0,c.Z)({Component:e,name:s||e.displayName,classNamePrefix:a},o));t.filterProps&&(i=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var d=r.forwardRef((function(t,n){var s=t.children,o=t.className,a=t.clone,l=t.component,d=(0,h.Z)(t,["children","className","clone","component"]),f=u(t),p=(0,z.Z)(f.root,o),g=d;if(i&&(g=wn(g,i)),a)return r.cloneElement(s,(0,c.Z)({className:(0,z.Z)(s.props.className,p)},g));if("function"==typeof s)return s((0,c.Z)({className:p},g));var m=l||e;return r.createElement(m,(0,c.Z)({ref:n,className:p},g),s)}));return Ge()(d,e),d}}(e);return function(e,i){return t(e,(0,c.Z)({defaultTheme:L.Z},i))}};var Cn=Yi(Xi(rn,sn,on,an,ln,cn,hn,vn,yn.Z,_n));const xn=Sn("div")(Cn,{name:"MuiBox"});var kn,En=i(73054),Tn=i.n(En),Ln=i(35747),Nn=i.n(Ln),Mn=i(58933);function On(e,t,...i){return function(e,t){let i;return i=0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,i){const n=i[0];return void 0!==t[n]?t[n]:e})),i}(t,i)}const Dn="en";let In,An,Pn,Rn=!1,Bn=!1,Fn=!1,Wn=!1,Vn=!1,zn=!1,Hn=!1,jn=null;const Un="object"==typeof self?self:"object"==typeof global?global:{};let Gn;void 0!==Un.vscode&&void 0!==Un.vscode.process?Gn=Un.vscode.process:"undefined"!=typeof process&&(Gn=process);const Kn="string"==typeof(null===(kn=null==Gn?void 0:Gn.versions)||void 0===kn?void 0:kn.electron)&&"renderer"===Gn.type,$n=Kn&&(null==Gn?void 0:Gn.sandboxed),qn="string"==typeof(()=>{if($n)return"bypassHeatCheck";const e=null==Gn?void 0:Gn.env.VSCODE_BROWSER_CODE_LOADING;return"string"==typeof e?"none"===e||"code"===e||"bypassHeatCheck"===e||"bypassHeatCheckAndEagerCompile"===e?e:"bypassHeatCheck":void 0})();if("object"!=typeof navigator||Kn)if("object"==typeof Gn){Rn="win32"===Gn.platform,Bn="darwin"===Gn.platform,Fn="linux"===Gn.platform,Wn=Fn&&!!Gn.env.SNAP&&!!Gn.env.SNAP_REVISION,In=Dn,jn=Dn;const e=Gn.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),i=t.availableLanguages["*"];In=t.locale,jn=i||Dn,An=t._translationsConfigFile}catch(e){}Vn=!0}else console.error("Unable to resolve platform.");else Pn=navigator.userAgent,Rn=Pn.indexOf("Windows")>=0,Bn=Pn.indexOf("Macintosh")>=0,Hn=(Pn.indexOf("Macintosh")>=0||Pn.indexOf("iPad")>=0||Pn.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Fn=Pn.indexOf("Linux")>=0,zn=!0,In=navigator.language,jn=In;let Zn=0;Bn?Zn=1:Rn?Zn=3:Fn&&(Zn=2);const Yn=Rn,Xn=Bn,Qn=Fn,Jn=Vn,er=zn,tr=Hn,ir=Pn,nr=function(){if(Un.setImmediate)return Un.setImmediate.bind(Un);if("function"==typeof Un.postMessage&&!Un.importScripts){let e=[];Un.addEventListener("message",(t=>{if(t.data&&t.data.vscodeSetImmediateId)for(let i=0,n=e.length;i<n;i++){const n=e[i];if(n.id===t.data.vscodeSetImmediateId)return e.splice(i,1),void n.callback()}}));let t=0;return i=>{const n=++t;e.push({id:n,callback:i}),Un.postMessage({vscodeSetImmediateId:n},"*")}}if("function"==typeof(null==Gn?void 0:Gn.nextTick))return Gn.nextTick.bind(Gn);const e=Promise.resolve();return t=>e.then(t)}(),rr=Bn||Hn?2:Rn?1:3;let sr=!0,or=!1;function ar(){if(!or){or=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2;const t=new Uint16Array(e.buffer);sr=513===t[0]}return sr}const lr="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";const cr=function(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of lr)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}();function hr(e){let t=cr;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}const ur={maxLen:1e3,windowSize:15,timeBudget:150};function dr(e,t,i,n,r=ur){if(i.length>r.maxLen){let s=e-r.maxLen/2;return s<0?s=0:n+=s,dr(e,t,i=i.substring(s,e+r.maxLen/2),n,r)}const s=Date.now(),o=e-1-n;let a=-1,l=null;for(let e=1;!(Date.now()-s>=r.timeBudget);e++){const n=o-r.windowSize*e;t.lastIndex=Math.max(0,n);const s=fr(t,i,o,a);if(!s&&l)break;if(l=s,n<=0)break;a=n}if(l){let e={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return t.lastIndex=0,e}return null}function fr(e,t,i,n){let r;for(;r=e.exec(t);){const t=r.index||0;if(t<=i&&e.lastIndex>=i)return r;if(n>0&&t>n)return null}return null}class pr{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class gr{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class mr{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class br{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}compute(e,t,i){return i}}class vr{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}validate(e){return this.defaultValue}}class yr{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}validate(e){return void 0===e?this.defaultValue:e}compute(e,t,i){return i}}function _r(e,t){return void 0===e?t:"false"!==e&&Boolean(e)}class wr extends yr{constructor(e,t,i,n){void 0!==n&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return _r(e,this.defaultValue)}}class Sr extends yr{constructor(e,t,i,n,r,s){void 0!==s&&(s.type="integer",s.default=i,s.minimum=n,s.maximum=r),super(e,t,i,s),this.minimum=n,this.maximum=r}static clampedInt(e,t,i,n){if(void 0===e)return t;let r=parseInt(e,10);return isNaN(r)?t:(r=Math.max(i,r),r=Math.min(n,r),0|r)}validate(e){return Sr.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class Cr extends yr{constructor(e,t,i,n,r){void 0!==r&&(r.type="number",r.default=i),super(e,t,i,r),this.validationFn=n}static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if("number"==typeof e)return e;if(void 0===e)return t;const i=parseFloat(e);return isNaN(i)?t:i}validate(e){return this.validationFn(Cr.float(e,this.defaultValue))}}class xr extends yr{static string(e,t){return"string"!=typeof e?t:e}constructor(e,t,i,n){void 0!==n&&(n.type="string",n.default=i),super(e,t,i,n)}validate(e){return xr.string(e,this.defaultValue)}}function kr(e,t,i){return"string"!=typeof e||-1===i.indexOf(e)?t:e}class Er extends yr{constructor(e,t,i,n,r){void 0!==r&&(r.type="string",r.enum=n,r.default=i),super(e,t,i,r),this._allowedValues=n}validate(e){return kr(e,this.defaultValue,this._allowedValues)}}class Tr extends br{constructor(e,t,i,n,r,s,o){void 0!==o&&(o.type="string",o.enum=r,o.default=n),super(e,t,i,o),this._allowedValues=r,this._convert=s}validate(e){return"string"!=typeof e||-1===this._allowedValues.indexOf(e)?this.defaultValue:this._convert(e)}}var Lr;!function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(Lr||(Lr={}));class Nr extends br{constructor(){super(41,"fontLigatures",Nr.OFF,{anyOf:[{type:"boolean",description:On(0,"Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:On(0,"Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:On(0,"Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return void 0===e?this.defaultValue:"string"==typeof e?"false"===e?Nr.OFF:"true"===e?Nr.ON:e:Boolean(e)?Nr.ON:Nr.OFF}}Nr.OFF='"liga" off, "calt" off',Nr.ON='"liga" on, "calt" on';class Mr extends br{constructor(){super(43,"fontWeight",Ar.fontWeight,{anyOf:[{type:"number",minimum:Mr.MINIMUM_VALUE,maximum:Mr.MAXIMUM_VALUE,errorMessage:On(0,'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Mr.SUGGESTION_VALUES}],default:Ar.fontWeight,description:On(0,'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return"normal"===e||"bold"===e?e:String(Sr.clampedInt(e,Ar.fontWeight,Mr.MINIMUM_VALUE,Mr.MAXIMUM_VALUE))}}Mr.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],Mr.MINIMUM_VALUE=1,Mr.MAXIMUM_VALUE=1e3;class Or extends vr{constructor(){super(128,[46,55,35,62,90,57,58,92,115,118,119,120,2])}compute(e,t,i){return Or.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=e.scrollBeyondLastLine?t-1:0,n=(e.viewLineCount+i)/(e.pixelRatio*e.height);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:i,desiredRatio:n,minimapLineCount:Math.floor(e.viewLineCount/n)}}static _computeMinimapLayout(e,t){const i=e.outerWidth,n=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const s=t.stableMinimapLayoutInput,o=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,a=e.lineHeight,l=e.typicalHalfwidthCharacterWidth,c=e.scrollBeyondLastLine,h=e.minimap.renderCharacters;let u=r>=2?Math.round(2*e.minimap.scale):e.minimap.scale;const d=e.minimap.maxColumn,f=e.minimap.size,p=e.minimap.side,g=e.verticalScrollbarWidth,m=e.viewLineCount,b=e.remainingWidth,v=e.isViewportWrapping,y=h?2:3;let _=Math.floor(r*n);const w=_/r;let S=!1,C=!1,x=y*u,k=u/r,E=1;if("fill"===f||"fit"===f){const{typicalViewportLineCount:i,extraLinesBeyondLastLine:s,desiredRatio:l,minimapLineCount:h}=Or.computeContainedMinimapLineCount({viewLineCount:m,scrollBeyondLastLine:c,height:n,lineHeight:a,pixelRatio:r});if(m/h>1)S=!0,C=!0,u=1,x=1,k=u/r;else{let n=!1,c=u+1;if("fit"===f){const i=Math.ceil((m+s)*x);v&&o&&b<=t.stableFitRemainingWidth?(n=!0,c=t.stableFitMaxMinimapScale):(n=i>_,v&&n?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=b):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0))}if("fill"===f||n){S=!0;const e=u;x=Math.min(a*r,Math.max(1,Math.floor(1/l))),u=Math.min(c,Math.max(1,Math.floor(x/y))),u>e&&(E=Math.min(2,u/e)),k=u/r/E,_=Math.ceil(Math.max(i,m+s)*x),v&&n&&(t.stableFitMaxMinimapScale=u)}}}const T=Math.floor(d*k),L=Math.min(T,Math.max(0,Math.floor((b-g-2)*k/(l+k)))+8);let N=Math.floor(r*L);const M=N/r;N=Math.floor(N*E);return{renderMinimap:h?1:2,minimapLeft:"left"===p?0:i-L-g,minimapWidth:L,minimapHeightIsEditorHeight:S,minimapIsSampling:C,minimapScale:u,minimapLineHeight:x,minimapCanvasInnerWidth:N,minimapCanvasInnerHeight:_,minimapCanvasOuterWidth:M,minimapCanvasOuterHeight:w}}static computeLayout(e,t){const i=0|t.outerWidth,n=0|t.outerHeight,r=0|t.lineHeight,s=0|t.lineNumbersDigitCount,o=t.typicalHalfwidthCharacterWidth,a=t.maxDigitWidth,l=t.pixelRatio,c=t.viewLineCount,h=e.get(120),u="inherit"===h?e.get(119):h,d="inherit"===u?e.get(115):u,f=e.get(118),p=e.get(2),g=t.isDominatedByLongLines,m=e.get(46),b=0!==e.get(57).renderType,v=e.get(58),y=e.get(92),_=e.get(62),w=e.get(90),S=w.verticalScrollbarSize,C=w.verticalHasArrows,x=w.arrowSize,k=w.horizontalScrollbarSize,E=e.get(55),T=e.get(35);let L;if("string"==typeof E&&/^\d+(\.\d+)?ch$/.test(E)){const e=parseFloat(E.substr(0,E.length-2));L=Sr.clampedInt(e*o,0,0,1e3)}else L=Sr.clampedInt(E,0,0,1e3);T&&(L+=16);let N=0;if(b){const e=Math.max(s,v);N=Math.round(e*a)}let M=0;m&&(M=r);let O=0,D=O+M,I=D+N,A=I+L;const P=i-M-N-L;let R=!1,B=!1,F=-1;2!==p&&("inherit"===u&&g?(R=!0,B=!0):"on"===d||"bounded"===d?B=!0:"wordWrapColumn"===d&&(F=f));const W=Or._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:r,typicalHalfwidthCharacterWidth:o,pixelRatio:l,scrollBeyondLastLine:y,minimap:_,verticalScrollbarWidth:S,viewLineCount:c,remainingWidth:P,isViewportWrapping:B},t.memory||new mr);0!==W.renderMinimap&&0===W.minimapLeft&&(O+=W.minimapWidth,D+=W.minimapWidth,I+=W.minimapWidth,A+=W.minimapWidth);const V=P-W.minimapWidth,z=Math.max(1,Math.floor((V-S-2)/o)),H=C?x:0;return B&&(F=Math.max(1,z),"bounded"===d&&(F=Math.min(F,f))),{width:i,height:n,glyphMarginLeft:O,glyphMarginWidth:M,lineNumbersLeft:D,lineNumbersWidth:N,decorationsLeft:I,decorationsWidth:L,contentLeft:A,contentWidth:V,minimap:W,viewportColumn:z,isWordWrapMinified:R,isViewportWrapping:B,wrappingColumn:F,verticalScrollbarWidth:S,horizontalScrollbarHeight:k,overviewRuler:{top:H,width:S,height:n-2*H,right:0}}}}function Dr(e){const t=e.get(85);return"editable"===t?e.get(78):"on"!==t}function Ir(e,t){if("string"!=typeof e)return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}const Ar={fontFamily:Xn?"Menlo, Monaco, 'Courier New', monospace":Qn?"'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:Xn?12:14,lineHeight:0,letterSpacing:0},Pr=4,Rr=4,Br=!0,Fr=!0,Wr=!0,Vr=!0,zr=[];function Hr(e){return zr[e.id]=e,e}const jr={acceptSuggestionOnCommitCharacter:Hr(new wr(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:On(0,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Hr(new Er(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",On(0,"Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:On(0,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Hr(new class extends br{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[On(0,"The editor will use platform APIs to detect when a Screen Reader is attached."),On(0,"The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),On(0,"The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:On(0,"Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return 0===i?e.accessibilitySupport:i}}),accessibilityPageSize:Hr(new Sr(3,"accessibilityPageSize",10,1,1073741824,{description:On(0,"Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:Hr(new xr(4,"ariaLabel",On(0,"Editor content"))),autoClosingBrackets:Hr(new Er(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",On(0,"Use language configurations to determine when to autoclose brackets."),On(0,"Autoclose brackets only when the cursor is to the left of whitespace."),""],description:On(0,"Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:Hr(new Er(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",On(0,"Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:On(0,"Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Hr(new Er(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",On(0,"Type over closing quotes or brackets only if they were automatically inserted."),""],description:On(0,"Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Hr(new Er(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",On(0,"Use language configurations to determine when to autoclose quotes."),On(0,"Autoclose quotes only when the cursor is to the left of whitespace."),""],description:On(0,"Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Hr(new Tr(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],(function(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}),{enumDescriptions:[On(0,"The editor will not insert indentation automatically."),On(0,"The editor will keep the current line's indentation."),On(0,"The editor will keep the current line's indentation and honor language defined brackets."),On(0,"The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),On(0,"The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:On(0,"Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Hr(new wr(10,"automaticLayout",!1)),autoSurround:Hr(new Er(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[On(0,"Use language configurations to determine when to automatically surround selections."),On(0,"Surround with quotes but not brackets."),On(0,"Surround with brackets but not quotes."),""],description:On(0,"Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),stickyTabStops:Hr(new wr(102,"stickyTabStops",!1,{description:On(0,"Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Hr(new wr(12,"codeLens",!0,{description:On(0,"Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Hr(new xr(13,"codeLensFontFamily","",{description:On(0,"Controls the font family for CodeLens.")})),codeLensFontSize:Hr(new Sr(14,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,description:On(0,"Controls the font size in pixels for CodeLens. When set to `0`, the 90% of `#editor.fontSize#` is used.")})),colorDecorators:Hr(new wr(15,"colorDecorators",!0,{description:On(0,"Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:Hr(new wr(16,"columnSelection",!1,{description:On(0,"Enable that the selection with the mouse and keys is doing column selection.")})),comments:Hr(new class extends br{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(17,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:On(0,"Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:On(0,"Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{insertSpace:_r(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:_r(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}),contextmenu:Hr(new wr(18,"contextmenu",!0)),copyWithSyntaxHighlighting:Hr(new wr(19,"copyWithSyntaxHighlighting",!0,{description:On(0,"Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Hr(new Tr(20,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],(function(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}),{description:On(0,"Control the cursor animation style.")})),cursorSmoothCaretAnimation:Hr(new wr(21,"cursorSmoothCaretAnimation",!1,{description:On(0,"Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Hr(new Tr(22,"cursorStyle",Lr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],(function(e){switch(e){case"line":return Lr.Line;case"block":return Lr.Block;case"underline":return Lr.Underline;case"line-thin":return Lr.LineThin;case"block-outline":return Lr.BlockOutline;case"underline-thin":return Lr.UnderlineThin}}),{description:On(0,"Controls the cursor style.")})),cursorSurroundingLines:Hr(new Sr(23,"cursorSurroundingLines",0,0,1073741824,{description:On(0,"Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Hr(new Er(24,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[On(0,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),On(0,"`cursorSurroundingLines` is enforced always.")],description:On(0,"Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:Hr(new Sr(25,"cursorWidth",0,0,1073741824,{markdownDescription:On(0,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Hr(new wr(26,"disableLayerHinting",!1)),disableMonospaceOptimizations:Hr(new wr(27,"disableMonospaceOptimizations",!1)),domReadOnly:Hr(new wr(28,"domReadOnly",!1)),dragAndDrop:Hr(new wr(29,"dragAndDrop",!0,{description:On(0,"Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Hr(new class extends wr{constructor(){super(30,"emptySelectionClipboard",!0,{description:On(0,"Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}),extraEditorClassName:Hr(new xr(31,"extraEditorClassName","")),fastScrollSensitivity:Hr(new Cr(32,"fastScrollSensitivity",5,(e=>e<=0?5:e),{markdownDescription:On(0,"Scrolling speed multiplier when pressing `Alt`.")})),find:Hr(new class extends br{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:!0,autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(33,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:On(0,"Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"boolean",default:e.seedSearchStringFromSelection,description:On(0,"Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[On(0,"Never turn on Find in selection automatically (default)."),On(0,"Always turn on Find in selection automatically."),On(0,"Turn on Find in selection automatically when multiple lines of content are selected.")],description:On(0,"Controls the condition for turning on find in selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:On(0,"Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Xn},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:On(0,"Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:On(0,"Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{cursorMoveOnType:_r(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:_r(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection),autoFindInSelection:"boolean"==typeof e.autoFindInSelection?e.autoFindInSelection?"always":"never":kr(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:_r(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:_r(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:_r(t.loop,this.defaultValue.loop)}}}),fixedOverflowWidgets:Hr(new wr(34,"fixedOverflowWidgets",!1)),folding:Hr(new wr(35,"folding",!0,{description:On(0,"Controls whether the editor has code folding enabled.")})),foldingStrategy:Hr(new Er(36,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[On(0,"Use a language-specific folding strategy if available, else the indentation-based one."),On(0,"Use the indentation-based folding strategy.")],description:On(0,"Controls the strategy for computing folding ranges.")})),foldingHighlight:Hr(new wr(37,"foldingHighlight",!0,{description:On(0,"Controls whether the editor should highlight folded ranges.")})),unfoldOnClickAfterEndOfLine:Hr(new wr(38,"unfoldOnClickAfterEndOfLine",!1,{description:On(0,"Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Hr(new xr(39,"fontFamily",Ar.fontFamily,{description:On(0,"Controls the font family.")})),fontInfo:Hr(new class extends vr{constructor(){super(40)}compute(e,t,i){return e.fontInfo}}),fontLigatures2:Hr(new Nr),fontSize:Hr(new class extends yr{constructor(){super(42,"fontSize",Ar.fontSize,{type:"number",minimum:6,maximum:100,default:Ar.fontSize,description:On(0,"Controls the font size in pixels.")})}validate(e){let t=Cr.float(e,this.defaultValue);return 0===t?Ar.fontSize:Cr.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}),fontWeight:Hr(new Mr),formatOnPaste:Hr(new wr(44,"formatOnPaste",!1,{description:On(0,"Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Hr(new wr(45,"formatOnType",!1,{description:On(0,"Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Hr(new wr(46,"glyphMargin",!0,{description:On(0,"Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Hr(new class extends br{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[On(0,"Show peek view of the results (default)"),On(0,"Go to the primary result and show a peek view"),On(0,"Go to the primary result and enable peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(47,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:On(0,"This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:On(0,"Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:On(0,"Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:On(0,"Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:On(0,"Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:On(0,"Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:On(0,"Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:On(0,"Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:On(0,"Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:On(0,"Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:On(0,"Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,i,n,r,s;if(!e||"object"!=typeof e)return this.defaultValue;const o=e;return{multiple:kr(o.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:null!==(t=o.multipleDefinitions)&&void 0!==t?t:kr(o.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:null!==(i=o.multipleTypeDefinitions)&&void 0!==i?i:kr(o.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:null!==(n=o.multipleDeclarations)&&void 0!==n?n:kr(o.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:null!==(r=o.multipleImplementations)&&void 0!==r?r:kr(o.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:null!==(s=o.multipleReferences)&&void 0!==s?s:kr(o.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:xr.string(o.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:xr.string(o.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:xr.string(o.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:xr.string(o.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:xr.string(o.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}),hideCursorInOverviewRuler:Hr(new wr(48,"hideCursorInOverviewRuler",!1,{description:On(0,"Controls whether the cursor should be hidden in the overview ruler.")})),highlightActiveIndentGuide:Hr(new wr(49,"highlightActiveIndentGuide",!0,{description:On(0,"Controls whether the editor should highlight the active indent guide.")})),hover:Hr(new class extends br{constructor(){const e={enabled:!0,delay:300,sticky:!0};super(50,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:On(0,"Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:On(0,"Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:On(0,"Controls whether the hover should remain visible when mouse is moved over it.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:_r(t.enabled,this.defaultValue.enabled),delay:Sr.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:_r(t.sticky,this.defaultValue.sticky)}}}),inDiffEditor:Hr(new wr(51,"inDiffEditor",!1)),letterSpacing:Hr(new Cr(53,"letterSpacing",Ar.letterSpacing,(e=>Cr.clamp(e,-5,20)),{description:On(0,"Controls the letter spacing in pixels.")})),lightbulb:Hr(new class extends br{constructor(){const e={enabled:!0};super(54,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:On(0,"Enables the code action lightbulb in the editor.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;return{enabled:_r(e.enabled,this.defaultValue.enabled)}}}),lineDecorationsWidth:Hr(new yr(55,"lineDecorationsWidth",10)),lineHeight:Hr(new class extends Sr{constructor(){super(56,"lineHeight",Ar.lineHeight,0,150,{description:On(0,"Controls the line height. Use 0 to compute the line height from the font size.")})}compute(e,t,i){return e.fontInfo.lineHeight}}),lineNumbers:Hr(new class extends br{constructor(){super(57,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[On(0,"Line numbers are not rendered."),On(0,"Line numbers are rendered as absolute number."),On(0,"Line numbers are rendered as distance in lines to cursor position."),On(0,"Line numbers are rendered every 10 lines.")],default:"on",description:On(0,"Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return void 0!==e&&("function"==typeof e?(t=4,i=e):t="interval"===e?3:"relative"===e?2:"on"===e?1:0),{renderType:t,renderFn:i}}}),lineNumbersMinChars:Hr(new Sr(58,"lineNumbersMinChars",5,1,300)),linkedEditing:Hr(new wr(59,"linkedEditing",!1,{description:On(0,"Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:Hr(new wr(60,"links",!0,{description:On(0,"Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Hr(new Er(61,"matchBrackets","always",["always","near","never"],{description:On(0,"Highlight matching brackets.")})),minimap:Hr(new class extends br{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(62,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:On(0,"Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[On(0,"The minimap has the same size as the editor contents (and might scroll)."),On(0,"The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),On(0,"The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:On(0,"Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:On(0,"Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:On(0,"Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:On(0,"Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:On(0,"Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:On(0,"Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:_r(t.enabled,this.defaultValue.enabled),size:kr(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:kr(t.side,this.defaultValue.side,["right","left"]),showSlider:kr(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:_r(t.renderCharacters,this.defaultValue.renderCharacters),scale:Sr.clampedInt(t.scale,1,1,3),maxColumn:Sr.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}),mouseStyle:Hr(new Er(63,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Hr(new Cr(64,"mouseWheelScrollSensitivity",1,(e=>0===e?1:e),{markdownDescription:On(0,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Hr(new wr(65,"mouseWheelZoom",!1,{markdownDescription:On(0,"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Hr(new wr(66,"multiCursorMergeOverlapping",!0,{description:On(0,"Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Hr(new Tr(67,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],(function(e){return"ctrlCmd"===e?Xn?"metaKey":"ctrlKey":"altKey"}),{markdownEnumDescriptions:[On(0,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),On(0,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:On(0,"The modifier to be used to add multiple cursors with the mouse. The Go To Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Hr(new Er(68,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[On(0,"Each cursor pastes a single line of the text."),On(0,"Each cursor pastes the full text.")],markdownDescription:On(0,"Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:Hr(new wr(69,"occurrencesHighlight",!0,{description:On(0,"Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:Hr(new wr(70,"overviewRulerBorder",!0,{description:On(0,"Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Hr(new Sr(71,"overviewRulerLanes",3,0,3)),padding:Hr(new class extends br{constructor(){super(72,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:On(0,"Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:On(0,"Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{top:Sr.clampedInt(t.top,0,0,1e3),bottom:Sr.clampedInt(t.bottom,0,0,1e3)}}}),parameterHints:Hr(new class extends br{constructor(){const e={enabled:!0,cycle:!1};super(73,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:On(0,"Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:On(0,"Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:_r(t.enabled,this.defaultValue.enabled),cycle:_r(t.cycle,this.defaultValue.cycle)}}}),peekWidgetDefaultFocus:Hr(new Er(74,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[On(0,"Focus the tree when opening peek"),On(0,"Focus the editor when opening peek")],description:On(0,"Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:Hr(new wr(75,"definitionLinkOpensInPeek",!1,{description:On(0,"Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Hr(new class extends br{constructor(){const e={other:!0,comments:!1,strings:!1};super(76,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:On(0,"Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:On(0,"Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:On(0,"Enable quick suggestions outside of strings and comments.")}}}],default:e,description:On(0,"Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if("boolean"==typeof e)return e;if(e&&"object"==typeof e){const t=e,i={other:_r(t.other,this.defaultValue.other),comments:_r(t.comments,this.defaultValue.comments),strings:_r(t.strings,this.defaultValue.strings)};return!!(i.other&&i.comments&&i.strings)||!!(i.other||i.comments||i.strings)&&i}return this.defaultValue}}),quickSuggestionsDelay:Hr(new Sr(77,"quickSuggestionsDelay",10,0,1073741824,{description:On(0,"Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Hr(new wr(78,"readOnly",!1)),renameOnType:Hr(new wr(79,"renameOnType",!1,{description:On(0,"Controls whether the editor auto renames on type."),markdownDeprecationMessage:On(0,"Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Hr(new wr(80,"renderControlCharacters",!1,{description:On(0,"Controls whether the editor should render control characters.")})),renderIndentGuides:Hr(new wr(81,"renderIndentGuides",!0,{description:On(0,"Controls whether the editor should render indent guides.")})),renderFinalNewline:Hr(new wr(82,"renderFinalNewline",!0,{description:On(0,"Render last line number when the file ends with a newline.")})),renderLineHighlight:Hr(new Er(83,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",On(0,"Highlights both the gutter and the current line.")],description:On(0,"Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Hr(new wr(84,"renderLineHighlightOnlyWhenFocus",!1,{description:On(0,"Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Hr(new Er(85,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Hr(new Er(86,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",On(0,"Render whitespace characters except for single spaces between words."),On(0,"Render whitespace characters only on selected text."),On(0,"Render only trailing whitespace characters."),""],description:On(0,"Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Hr(new Sr(87,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:Hr(new wr(88,"roundedSelection",!0,{description:On(0,"Controls whether selections should have rounded corners.")})),rulers:Hr(new class extends br{constructor(){const e=[],t={type:"number",description:On(0,"Number of monospace characters at which this editor ruler will render.")};super(89,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:On(0,"Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:On(0,"Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let i of e)if("number"==typeof i)t.push({column:Sr.clampedInt(i,0,0,1e4),color:null});else if(i&&"object"==typeof i){const e=i;t.push({column:Sr.clampedInt(e.column,0,0,1e4),color:e.color})}return t.sort(((e,t)=>e.column-t.column)),t}return this.defaultValue}}),scrollbar:Hr(new class extends br{constructor(){super(90,"scrollbar",{vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e,i=Sr.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=Sr.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Sr.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Ir(t.vertical,this.defaultValue.vertical),horizontal:Ir(t.horizontal,this.defaultValue.horizontal),useShadows:_r(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:_r(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:_r(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:_r(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:_r(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Sr.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:Sr.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:_r(t.scrollByPage,this.defaultValue.scrollByPage)}}}),scrollBeyondLastColumn:Hr(new Sr(91,"scrollBeyondLastColumn",5,0,1073741824,{description:On(0,"Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Hr(new wr(92,"scrollBeyondLastLine",!0,{description:On(0,"Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Hr(new wr(93,"scrollPredominantAxis",!0,{description:On(0,"Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Hr(new wr(94,"selectionClipboard",!0,{description:On(0,"Controls whether the Linux primary clipboard should be supported."),included:Qn})),selectionHighlight:Hr(new wr(95,"selectionHighlight",!0,{description:On(0,"Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Hr(new wr(96,"selectOnLineNumbers",!0)),showFoldingControls:Hr(new Er(97,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[On(0,"Always show the folding controls."),On(0,"Only show the folding controls when the mouse is over the gutter.")],description:On(0,"Controls when the folding controls on the gutter are shown.")})),showUnused:Hr(new wr(98,"showUnused",!0,{description:On(0,"Controls fading out of unused code.")})),showDeprecated:Hr(new wr(123,"showDeprecated",!0,{description:On(0,"Controls strikethrough deprecated variables.")})),inlayHints:Hr(new class extends br{constructor(){const e={enabled:!0,fontSize:0,fontFamily:Ar.fontFamily};super(124,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:On(0,"Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,description:On(0,"Controls font size of inlay hints in the editor. When set to `0`, the 90% of `#editor.fontSize#` is used.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,description:On(0,"Controls font family of inlay hints in the editor.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:_r(t.enabled,this.defaultValue.enabled),fontSize:Sr.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:xr.string(t.fontFamily,this.defaultValue.fontFamily)}}}),snippetSuggestions:Hr(new Er(99,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[On(0,"Show snippet suggestions on top of other suggestions."),On(0,"Show snippet suggestions below other suggestions."),On(0,"Show snippets suggestions with other suggestions."),On(0,"Do not show snippet suggestions.")],description:On(0,"Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Hr(new class extends br{constructor(){super(100,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:On(0,"Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return e&&"object"==typeof e?{selectLeadingAndTrailingWhitespace:_r(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}:this.defaultValue}}),smoothScrolling:Hr(new wr(101,"smoothScrolling",!1,{description:On(0,"Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Hr(new Sr(103,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Hr(new class extends br{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(104,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[On(0,"Insert suggestion without overwriting text right of the cursor."),On(0,"Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:On(0,"Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:On(0,"Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:On(0,"Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:On(0,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:On(0,"Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:On(0,"Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:On(0,"Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:On(0,"Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:On(0,"Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:On(0,"This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:On(0,"This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:On(0,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{insertMode:kr(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:_r(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:_r(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:_r(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:_r(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:_r(t.showIcons,this.defaultValue.showIcons),showStatusBar:_r(t.showStatusBar,this.defaultValue.showStatusBar),preview:_r(t.preview,this.defaultValue.preview),showInlineDetails:_r(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:_r(t.showMethods,this.defaultValue.showMethods),showFunctions:_r(t.showFunctions,this.defaultValue.showFunctions),showConstructors:_r(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:_r(t.showDeprecated,this.defaultValue.showDeprecated),showFields:_r(t.showFields,this.defaultValue.showFields),showVariables:_r(t.showVariables,this.defaultValue.showVariables),showClasses:_r(t.showClasses,this.defaultValue.showClasses),showStructs:_r(t.showStructs,this.defaultValue.showStructs),showInterfaces:_r(t.showInterfaces,this.defaultValue.showInterfaces),showModules:_r(t.showModules,this.defaultValue.showModules),showProperties:_r(t.showProperties,this.defaultValue.showProperties),showEvents:_r(t.showEvents,this.defaultValue.showEvents),showOperators:_r(t.showOperators,this.defaultValue.showOperators),showUnits:_r(t.showUnits,this.defaultValue.showUnits),showValues:_r(t.showValues,this.defaultValue.showValues),showConstants:_r(t.showConstants,this.defaultValue.showConstants),showEnums:_r(t.showEnums,this.defaultValue.showEnums),showEnumMembers:_r(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:_r(t.showKeywords,this.defaultValue.showKeywords),showWords:_r(t.showWords,this.defaultValue.showWords),showColors:_r(t.showColors,this.defaultValue.showColors),showFiles:_r(t.showFiles,this.defaultValue.showFiles),showReferences:_r(t.showReferences,this.defaultValue.showReferences),showFolders:_r(t.showFolders,this.defaultValue.showFolders),showTypeParameters:_r(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:_r(t.showSnippets,this.defaultValue.showSnippets),showUsers:_r(t.showUsers,this.defaultValue.showUsers),showIssues:_r(t.showIssues,this.defaultValue.showIssues)}}}),inlineSuggest:Hr(new class extends br{constructor(){const e={enabled:!1};super(52,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:On(0,"Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;return{enabled:_r(e.enabled,this.defaultValue.enabled)}}}),suggestFontSize:Hr(new Sr(105,"suggestFontSize",0,0,1e3,{markdownDescription:On(0,"Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:Hr(new Sr(106,"suggestLineHeight",0,0,1e3,{markdownDescription:On(0,"Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:Hr(new wr(107,"suggestOnTriggerCharacters",!0,{description:On(0,"Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Hr(new Er(108,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[On(0,"Always select the first suggestion."),On(0,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),On(0,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:On(0,"Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Hr(new Er(109,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[On(0,"Tab complete will insert the best matching suggestion when pressing tab."),On(0,"Disable tab completions."),On(0,"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:On(0,"Enables tab completions.")})),tabIndex:Hr(new Sr(110,"tabIndex",0,-1,1073741824)),unusualLineTerminators:Hr(new Er(111,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[On(0,"Unusual line terminators are automatically removed."),On(0,"Unusual line terminators are ignored."),On(0,"Unusual line terminators prompt to be removed.")],description:On(0,"Remove unusual line terminators that might cause problems.")})),useShadowDOM:Hr(new wr(112,"useShadowDOM",!0)),useTabStops:Hr(new wr(113,"useTabStops",!0,{description:On(0,"Inserting and deleting whitespace follows tab stops.")})),wordSeparators:Hr(new xr(114,"wordSeparators",lr,{description:On(0,"Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Hr(new Er(115,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[On(0,"Lines will never wrap."),On(0,"Lines will wrap at the viewport width."),On(0,"Lines will wrap at `#editor.wordWrapColumn#`."),On(0,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:On(0,"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Hr(new xr(116,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;")),wordWrapBreakBeforeCharacters:Hr(new xr(117,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:Hr(new Sr(118,"wordWrapColumn",80,1,1073741824,{markdownDescription:On(0,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Hr(new Er(119,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Hr(new Er(120,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:Hr(new Tr(121,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],(function(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}),{enumDescriptions:[On(0,"No indentation. Wrapped lines begin at column 1."),On(0,"Wrapped lines get the same indentation as the parent."),On(0,"Wrapped lines get +1 indentation toward the parent."),On(0,"Wrapped lines get +2 indentation toward the parent.")],description:On(0,"Controls the indentation of wrapped lines.")})),wrappingStrategy:Hr(new Er(122,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[On(0,"Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),On(0,"Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:On(0,"Controls the algorithm that computes wrapping points.")})),editorClassName:Hr(new class extends vr{constructor(){super(125,[63,31])}compute(e,t,i){const n=["monaco-editor"];return t.get(31)&&n.push(t.get(31)),e.extraEditorClassName&&n.push(e.extraEditorClassName),"default"===t.get(63)?n.push("mouse-default"):"copy"===t.get(63)&&n.push("mouse-copy"),t.get(98)&&n.push("showUnused"),t.get(123)&&n.push("showDeprecated"),n.join(" ")}}),pixelRatio:Hr(new class extends vr{constructor(){super(126)}compute(e,t,i){return e.pixelRatio}}),tabFocusMode:Hr(new class extends vr{constructor(){super(127,[78])}compute(e,t,i){return!!t.get(78)||e.tabFocusMode}}),layoutInfo:Hr(new Or),wrappingInfo:Hr(new class extends vr{constructor(){super(129,[128])}compute(e,t,i){const n=t.get(128);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}})};const Ur=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e}),0)}}emit(e){this.listeners.forEach((t=>{t(e)}))}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function Gr(e){Zr(e)||Ur.onUnexpectedError(e)}function Kr(e){Zr(e)||Ur.onUnexpectedExternalError(e)}function $r(e){if(e instanceof Error){let{name:t,message:i}=e;return{$isError:!0,name:t,message:i,stack:e.stacktrace||e.stack}}return e}const qr="Canceled";function Zr(e){return e instanceof Error&&e.name===qr&&e.message===qr}function Yr(){const e=new Error(qr);return e.name=e.message,e}function Xr(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}var Qr;!function(e){e.is=function(e){return e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]};const t=Object.freeze([]);e.empty=function(){return t},e.single=function*(e){yield e},e.from=function(e){return e||t},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){for(const i of e)if(t(i))return!0;return!1},e.find=function(e,t){for(const i of e)if(t(i))return i},e.filter=function*(e,t){for(const i of e)t(i)&&(yield i)},e.map=function*(e,t){let i=0;for(const n of e)yield t(n,i++)},e.concat=function*(...e){for(const t of e)for(const e of t)yield e},e.concatNested=function*(e){for(const t of e)for(const e of t)yield e},e.reduce=function(e,t,i){let n=i;for(const i of e)n=t(n,i);return n},e.slice=function*(e,t,i=e.length){for(t<0&&(t+=e.length),i<0?i+=e.length:i>e.length&&(i=e.length);t<i;t++)yield e[t]},e.consume=function(t,i=Number.POSITIVE_INFINITY){const n=[];if(0===i)return[n,t];const r=t[Symbol.iterator]();for(let t=0;t<i;t++){const t=r.next();if(t.done)return[n,e.empty()];n.push(t.value)}return[n,{[Symbol.iterator]:()=>r}]},e.equals=function(e,t,i=((e,t)=>e===t)){const n=e[Symbol.iterator](),r=t[Symbol.iterator]();for(;;){const e=n.next(),t=r.next();if(e.done!==t.done)return!1;if(e.done)return!0;if(!i(e.value,t.value))return!1}}}(Qr||(Qr={}));let Jr=null;function es(e){Jr&&Jr.markTracked(e)}function ts(e){return Jr?(Jr.trackDisposable(e),e):e}class is extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function ns(e){if(Qr.is(e)){let t=[];for(const i of e)if(i){es(i);try{i.dispose()}catch(e){t.push(e)}}if(1===t.length)throw t[0];if(t.length>1)throw new is(t);return Array.isArray(e)?[]:e}if(e)return es(e),e.dispose(),e}function rs(...e){return e.forEach(es),ss((()=>ns(e)))}function ss(e){const t=ts({dispose:()=>{es(t),e()}});return t}class os{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(es(this),this._isDisposed=!0,this.clear())}clear(){try{ns(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return es(e),this._isDisposed?os.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}os.DISABLE_DISPOSED_WARNING=!1;class as{constructor(){this._store=new os,ts(this)}dispose(){es(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}as.None=Object.freeze({dispose(){}});class ls{constructor(){this._isDisposed=!1,ts(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),e&&es(e),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,es(this),null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}}class cs{constructor(e){this.object=e}dispose(){}}class hs{constructor(e){this.element=e,this.next=hs.Undefined,this.prev=hs.Undefined}}hs.Undefined=new hs(void 0);class us{constructor(){this._first=hs.Undefined,this._last=hs.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===hs.Undefined}clear(){let e=this._first;for(;e!==hs.Undefined;){const t=e.next;e.prev=hs.Undefined,e.next=hs.Undefined,e=t}this._first=hs.Undefined,this._last=hs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new hs(e);if(this._first===hs.Undefined)this._first=i,this._last=i;else if(t){const e=this._last;this._last=i,i.prev=e,e.next=i}else{const e=this._first;this._first=i,i.next=e,e.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==hs.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==hs.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==hs.Undefined&&e.next!==hs.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===hs.Undefined&&e.next===hs.Undefined?(this._first=hs.Undefined,this._last=hs.Undefined):e.next===hs.Undefined?(this._last=this._last.prev,this._last.next=hs.Undefined):e.prev===hs.Undefined&&(this._first=this._first.next,this._first.prev=hs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==hs.Undefined;)yield e.element,e=e.next}}const ds=Un.performance&&"function"==typeof Un.performance.now;class fs{constructor(e){this._highResolution=ds&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new fs(e)}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?Un.performance.now():Date.now()}}var ps;!function(e){function t(e){return(t,i=null,n)=>{let r,s=!1;return r=e((e=>{if(!s)return r?r.dispose():s=!0,t.call(i,e)}),null,n),s&&r.dispose(),r}}function i(e,t){return o(((i,n=null,r)=>e((e=>i.call(n,t(e))),null,r)))}function n(e,t){return o(((i,n=null,r)=>e((e=>{t(e),i.call(n,e)}),null,r)))}function r(e,t){return o(((i,n=null,r)=>e((e=>t(e)&&i.call(n,e)),null,r)))}function s(e,t,n){let r=n;return i(e,(e=>(r=t(r,e),r)))}function o(e){let t;const i=new ms({onFirstListenerAdd(){t=e(i.fire,i)},onLastListenerRemove(){t.dispose()}});return i.event}function a(e,t,i=100,n=!1,r){let s,o,a,l=0;const c=new ms({leakWarningThreshold:r,onFirstListenerAdd(){s=e((e=>{l++,o=t(o,e),n&&!a&&(c.fire(o),o=void 0),clearTimeout(a),a=setTimeout((()=>{const e=o;o=void 0,a=void 0,(!n||l>1)&&c.fire(e),l=0}),i)}))},onLastListenerRemove(){s.dispose()}});return c.event}function l(e,t=((e,t)=>e===t)){let i,n=!0;return r(e,(e=>{const r=n||!t(e,i);return n=!1,i=e,r}))}e.None=()=>as.None,e.once=t,e.map=i,e.forEach=n,e.filter=r,e.signal=function(e){return e},e.any=function(...e){return(t,i=null,n)=>rs(...e.map((e=>e((e=>t.call(i,e)),null,n))))},e.reduce=s,e.snapshot=o,e.debounce=a,e.stopwatch=function(e){const n=(new Date).getTime();return i(t(e),(e=>(new Date).getTime()-n))},e.latch=l,e.split=function(t,i){return[e.filter(t,i),e.filter(t,(e=>!i(e)))]},e.buffer=function(e,t=!1,i=[]){let n=i.slice(),r=e((e=>{n?n.push(e):o.fire(e)}));const s=()=>{n&&n.forEach((e=>o.fire(e))),n=null},o=new ms({onFirstListenerAdd(){r||(r=e((e=>o.fire(e))))},onFirstListenerDidAdd(){n&&(t?setTimeout(s):s())},onLastListenerRemove(){r&&r.dispose(),r=null}});return o.event};class c{constructor(e){this.event=e}map(e){return new c(i(this.event,e))}forEach(e){return new c(n(this.event,e))}filter(e){return new c(r(this.event,e))}reduce(e,t){return new c(s(this.event,e,t))}latch(){return new c(l(this.event))}debounce(e,t=100,i=!1,n){return new c(a(this.event,e,t,i,n))}on(e,t,i){return this.event(e,t,i)}once(e,i,n){return t(this.event)(e,i,n)}}e.chain=function(e){return new c(e)},e.fromNodeEventEmitter=function(e,t,i=(e=>e)){const n=(...e)=>r.fire(i(...e)),r=new ms({onFirstListenerAdd:()=>e.on(t,n),onLastListenerRemove:()=>e.removeListener(t,n)});return r.event},e.fromDOMEventEmitter=function(e,t,i=(e=>e)){const n=(...e)=>r.fire(i(...e)),r=new ms({onFirstListenerAdd:()=>e.addEventListener(t,n),onLastListenerRemove:()=>e.removeEventListener(t,n)});return r.event},e.fromPromise=function(e){const t=new ms;let i=!1;return e.then(void 0,(()=>null)).then((()=>{i?t.fire(void 0):setTimeout((()=>t.fire(void 0)),0)})),i=!0,t.event},e.toPromise=function(e){return new Promise((i=>t(e)(i)))}}(ps||(ps={}));class gs{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${gs._idPool++}`}start(e){this._stopWatch=new fs(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}gs._idPool=0;class ms{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=(null===(t=this._options)||void 0===t?void 0:t._profName)?new gs(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,i)=>{var n;this._listeners||(this._listeners=new us);const r=this._listeners.isEmpty();r&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const s=this._listeners.push(t?[e,t]:e);r&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const o=null===(n=this._leakageMon)||void 0===n?void 0:n.check(this._listeners.size);let a;return a={dispose:()=>{if(o&&o(),a.dispose=ms._noop,!this._disposed&&(s(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}},i instanceof os?i.add(a):Array.isArray(i)&&i.push(a),a}),this._event}fire(e){var t,i;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new us);for(let t of this._listeners)this._deliveryQueue.push([t,e]);for(null===(t=this._perfMon)||void 0===t||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[e,t]=this._deliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){Gr(e)}}null===(i=this._perfMon)||void 0===i||i.stop()}}dispose(){var e,t,i,n,r;this._disposed||(this._disposed=!0,null===(e=this._listeners)||void 0===e||e.clear(),null===(t=this._deliveryQueue)||void 0===t||t.clear(),null===(n=null===(i=this._options)||void 0===i?void 0:i.onLastListenerRemove)||void 0===n||n.call(i),null===(r=this._leakageMon)||void 0===r||r.dispose())}}ms._noop=function(){};class bs extends ms{constructor(e){super(e),this._isPaused=0,this._eventQueue=new us,this._mergeFn=null==e?void 0:e.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0==--this._isPaused)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&0!==this._eventQueue.size;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(0!==this._isPaused?this._eventQueue.push(e):super.fire(e))}}class vs{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,n)=>e((e=>{const n=this.buffers[this.buffers.length-1];n?n.push((()=>t.call(i,e))):t.call(i,e)}),void 0,n)}bufferEvents(e){const t=[];this.buffers.push(t);const i=e();return this.buffers.pop(),t.forEach((e=>e())),i}}class ys{constructor(){this.listening=!1,this.inputEvent=ps.None,this.inputEventListener=as.None,this.emitter=new ms({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const _s=Object.freeze((function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}));var ws;!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||(t instanceof Ss||!(!t||"object"!=typeof t)&&("boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested))},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ps.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:_s})}(ws||(ws={}));class Ss{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?_s:(this._emitter||(this._emitter=new ms),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class Cs{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Ss),this._token}cancel(){this._token?this._token instanceof Ss&&this._token.cancel():this._token=ws.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Ss&&this._token.dispose():this._token=ws.None}}class xs{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const ks=new xs,Es=new xs,Ts=new xs;var Ls;function Ns(e,t){if(0===e)return null;const i=(65535&e)>>>0,n=(4294901760&e)>>>16;return new Ds(0!==n?[Ms(i,t),Ms(n,t)]:[Ms(i,t)])}function Ms(e,t){const i=!!(2048&e),n=!!(256&e);return new Os(2===t?n:i,!!(1024&e),!!(512&e),2===t?i:n,255&e)}!function(){function e(e,t,i=t,n=i){ks.define(e,t),Es.define(e,i),Ts.define(e,n)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")}(),function(e){e.toString=function(e){return ks.keyCodeToStr(e)},e.fromString=function(e){return ks.strToKeyCode(e)},e.toUserSettingsUS=function(e){return Es.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return Ts.keyCodeToStr(e)},e.fromUserSettings=function(e){return Es.strToKeyCode(e)||Ts.strToKeyCode(e)}}(Ls||(Ls={}));class Os{constructor(e,t,i,n,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}toChord(){return new Ds([this])}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}class Ds{constructor(e){if(0===e.length)throw Xr("parts");this.parts=e}}class Is{constructor(e,t,i,n,r,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=r,this.keyAriaLabel=s}}let As;if(void 0!==Un.vscode&&void 0!==Un.vscode.process){const e=Un.vscode.process;As={get platform(){return e.platform},get env(){return e.env},cwd:()=>e.cwd(),nextTick:e=>nr(e)}}else As="undefined"!=typeof process?{get platform(){return process.platform},get env(){return process.env},cwd:()=>process.env.VSCODE_CWD||process.cwd(),nextTick:e=>process.nextTick(e)}:{get platform(){return Yn?"win32":Xn?"darwin":"linux"},nextTick:e=>nr(e),get env(){return{}},cwd:()=>"/"};const Ps=As.cwd,Rs=As.env,Bs=As.platform,Fs=46,Ws=47,Vs=92,zs=58;class Hs extends Error{constructor(e,t,i){let n;"string"==typeof t&&0===t.indexOf("not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";const r=-1!==e.indexOf(".")?"property":"argument";let s=`The "${e}" ${r} ${n} of type ${t}`;s+=". Received type "+typeof i,super(s),this.code="ERR_INVALID_ARG_TYPE"}}function js(e,t){if("string"!=typeof e)throw new Hs(t,"string",e)}function Us(e){return e===Ws||e===Vs}function Gs(e){return e===Ws}function Ks(e){return e>=65&&e<=90||e>=97&&e<=122}function $s(e,t,i,n){let r="",s=0,o=-1,a=0,l=0;for(let c=0;c<=e.length;++c){if(c<e.length)l=e.charCodeAt(c);else{if(n(l))break;l=Ws}if(n(l)){if(o===c-1||1===a);else if(2===a){if(r.length<2||2!==s||r.charCodeAt(r.length-1)!==Fs||r.charCodeAt(r.length-2)!==Fs){if(r.length>2){const e=r.lastIndexOf(i);-1===e?(r="",s=0):(r=r.slice(0,e),s=r.length-1-r.lastIndexOf(i)),o=c,a=0;continue}if(0!==r.length){r="",s=0,o=c,a=0;continue}}t&&(r+=r.length>0?`${i}..`:"..",s=2)}else r.length>0?r+=`${i}${e.slice(o+1,c)}`:r=e.slice(o+1,c),s=c-o-1;o=c,a=0}else l===Fs&&-1!==a?++a:a=-1}return r}function qs(e,t){if(null===t||"object"!=typeof t)throw new Hs("pathObject","Object",t);const i=t.dir||t.root,n=t.base||`${t.name||""}${t.ext||""}`;return i?i===t.root?`${i}${n}`:`${i}${e}${n}`:n}const Zs={resolve(...e){let t="",i="",n=!1;for(let r=e.length-1;r>=-1;r--){let s;if(r>=0){if(s=e[r],js(s,"path"),0===s.length)continue}else 0===t.length?s=Ps():(s=Rs[`=${t}`]||Ps(),(void 0===s||s.slice(0,2).toLowerCase()!==t.toLowerCase()&&s.charCodeAt(2)===Vs)&&(s=`${t}\\`));const o=s.length;let a=0,l="",c=!1;const h=s.charCodeAt(0);if(1===o)Us(h)&&(a=1,c=!0);else if(Us(h))if(c=!0,Us(s.charCodeAt(1))){let e=2,t=e;for(;e<o&&!Us(s.charCodeAt(e));)e++;if(e<o&&e!==t){const i=s.slice(t,e);for(t=e;e<o&&Us(s.charCodeAt(e));)e++;if(e<o&&e!==t){for(t=e;e<o&&!Us(s.charCodeAt(e));)e++;e!==o&&e===t||(l=`\\\\${i}\\${s.slice(t,e)}`,a=e)}}}else a=1;else Ks(h)&&s.charCodeAt(1)===zs&&(l=s.slice(0,2),a=2,o>2&&Us(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(t.length>0){if(l.toLowerCase()!==t.toLowerCase())continue}else t=l;if(n){if(t.length>0)break}else if(i=`${s.slice(a)}\\${i}`,n=c,c&&t.length>0)break}return i=$s(i,!n,"\\",Us),n?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){js(e,"path");const t=e.length;if(0===t)return".";let i,n=0,r=!1;const s=e.charCodeAt(0);if(1===t)return Gs(s)?"\\":e;if(Us(s))if(r=!0,Us(e.charCodeAt(1))){let r=2,s=r;for(;r<t&&!Us(e.charCodeAt(r));)r++;if(r<t&&r!==s){const o=e.slice(s,r);for(s=r;r<t&&Us(e.charCodeAt(r));)r++;if(r<t&&r!==s){for(s=r;r<t&&!Us(e.charCodeAt(r));)r++;if(r===t)return`\\\\${o}\\${e.slice(s)}\\`;r!==s&&(i=`\\\\${o}\\${e.slice(s,r)}`,n=r)}}}else n=1;else Ks(s)&&e.charCodeAt(1)===zs&&(i=e.slice(0,2),n=2,t>2&&Us(e.charCodeAt(2))&&(r=!0,n=3));let o=n<t?$s(e.slice(n),!r,"\\",Us):"";return 0!==o.length||r||(o="."),o.length>0&&Us(e.charCodeAt(t-1))&&(o+="\\"),void 0===i?r?`\\${o}`:o:r?`${i}\\${o}`:`${i}${o}`},isAbsolute(e){js(e,"path");const t=e.length;if(0===t)return!1;const i=e.charCodeAt(0);return Us(i)||t>2&&Ks(i)&&e.charCodeAt(1)===zs&&Us(e.charCodeAt(2))},join(...e){if(0===e.length)return".";let t,i;for(let n=0;n<e.length;++n){const r=e[n];js(r,"path"),r.length>0&&(void 0===t?t=i=r:t+=`\\${r}`)}if(void 0===t)return".";let n=!0,r=0;if("string"==typeof i&&Us(i.charCodeAt(0))){++r;const e=i.length;e>1&&Us(i.charCodeAt(1))&&(++r,e>2&&(Us(i.charCodeAt(2))?++r:n=!1))}if(n){for(;r<t.length&&Us(t.charCodeAt(r));)r++;r>=2&&(t=`\\${t.slice(r)}`)}return Zs.normalize(t)},relative(e,t){if(js(e,"from"),js(t,"to"),e===t)return"";const i=Zs.resolve(e),n=Zs.resolve(t);if(i===n)return"";if((e=i.toLowerCase())===(t=n.toLowerCase()))return"";let r=0;for(;r<e.length&&e.charCodeAt(r)===Vs;)r++;let s=e.length;for(;s-1>r&&e.charCodeAt(s-1)===Vs;)s--;const o=s-r;let a=0;for(;a<t.length&&t.charCodeAt(a)===Vs;)a++;let l=t.length;for(;l-1>a&&t.charCodeAt(l-1)===Vs;)l--;const c=l-a,h=o<c?o:c;let u=-1,d=0;for(;d<h;d++){const i=e.charCodeAt(r+d);if(i!==t.charCodeAt(a+d))break;i===Vs&&(u=d)}if(d!==h){if(-1===u)return n}else{if(c>h){if(t.charCodeAt(a+d)===Vs)return n.slice(a+d+1);if(2===d)return n.slice(a+d)}o>h&&(e.charCodeAt(r+d)===Vs?u=d:2===d&&(u=3)),-1===u&&(u=0)}let f="";for(d=r+u+1;d<=s;++d)d!==s&&e.charCodeAt(d)!==Vs||(f+=0===f.length?"..":"\\..");return a+=u,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===Vs&&++a,n.slice(a,l))},toNamespacedPath(e){if("string"!=typeof e)return e;if(0===e.length)return"";const t=Zs.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Vs){if(t.charCodeAt(1)===Vs){const e=t.charCodeAt(2);if(63!==e&&e!==Fs)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(Ks(t.charCodeAt(0))&&t.charCodeAt(1)===zs&&t.charCodeAt(2)===Vs)return`\\\\?\\${t}`;return e},dirname(e){js(e,"path");const t=e.length;if(0===t)return".";let i=-1,n=0;const r=e.charCodeAt(0);if(1===t)return Us(r)?e:".";if(Us(r)){if(i=n=1,Us(e.charCodeAt(1))){let r=2,s=r;for(;r<t&&!Us(e.charCodeAt(r));)r++;if(r<t&&r!==s){for(s=r;r<t&&Us(e.charCodeAt(r));)r++;if(r<t&&r!==s){for(s=r;r<t&&!Us(e.charCodeAt(r));)r++;if(r===t)return e;r!==s&&(i=n=r+1)}}}}else Ks(r)&&e.charCodeAt(1)===zs&&(i=t>2&&Us(e.charCodeAt(2))?3:2,n=i);let s=-1,o=!0;for(let i=t-1;i>=n;--i)if(Us(e.charCodeAt(i))){if(!o){s=i;break}}else o=!1;if(-1===s){if(-1===i)return".";s=i}return e.slice(0,s)},basename(e,t){void 0!==t&&js(t,"ext"),js(e,"path");let i,n=0,r=-1,s=!0;if(e.length>=2&&Ks(e.charCodeAt(0))&&e.charCodeAt(1)===zs&&(n=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(i=e.length-1;i>=n;--i){const l=e.charCodeAt(i);if(Us(l)){if(!s){n=i+1;break}}else-1===a&&(s=!1,a=i+1),o>=0&&(l===t.charCodeAt(o)?-1==--o&&(r=i):(o=-1,r=a))}return n===r?r=a:-1===r&&(r=e.length),e.slice(n,r)}for(i=e.length-1;i>=n;--i)if(Us(e.charCodeAt(i))){if(!s){n=i+1;break}}else-1===r&&(s=!1,r=i+1);return-1===r?"":e.slice(n,r)},extname(e){js(e,"path");let t=0,i=-1,n=0,r=-1,s=!0,o=0;e.length>=2&&e.charCodeAt(1)===zs&&Ks(e.charCodeAt(0))&&(t=n=2);for(let a=e.length-1;a>=t;--a){const t=e.charCodeAt(a);if(Us(t)){if(!s){n=a+1;break}}else-1===r&&(s=!1,r=a+1),t===Fs?-1===i?i=a:1!==o&&(o=1):-1!==i&&(o=-1)}return-1===i||-1===r||0===o||1===o&&i===r-1&&i===n+1?"":e.slice(i,r)},format:qs.bind(null,"\\"),parse(e){js(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.length;let n=0,r=e.charCodeAt(0);if(1===i)return Us(r)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Us(r)){if(n=1,Us(e.charCodeAt(1))){let t=2,r=t;for(;t<i&&!Us(e.charCodeAt(t));)t++;if(t<i&&t!==r){for(r=t;t<i&&Us(e.charCodeAt(t));)t++;if(t<i&&t!==r){for(r=t;t<i&&!Us(e.charCodeAt(t));)t++;t===i?n=t:t!==r&&(n=t+1)}}}}else if(Ks(r)&&e.charCodeAt(1)===zs){if(i<=2)return t.root=t.dir=e,t;if(n=2,Us(e.charCodeAt(2))){if(3===i)return t.root=t.dir=e,t;n=3}}n>0&&(t.root=e.slice(0,n));let s=-1,o=n,a=-1,l=!0,c=e.length-1,h=0;for(;c>=n;--c)if(r=e.charCodeAt(c),Us(r)){if(!l){o=c+1;break}}else-1===a&&(l=!1,a=c+1),r===Fs?-1===s?s=c:1!==h&&(h=1):-1!==s&&(h=-1);return-1!==a&&(-1===s||0===h||1===h&&s===a-1&&s===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,s),t.base=e.slice(o,a),t.ext=e.slice(s,a))),t.dir=o>0&&o!==n?e.slice(0,o-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},Ys={resolve(...e){let t="",i=!1;for(let n=e.length-1;n>=-1&&!i;n--){const r=n>=0?e[n]:Ps();js(r,"path"),0!==r.length&&(t=`${r}/${t}`,i=r.charCodeAt(0)===Ws)}return t=$s(t,!i,"/",Gs),i?`/${t}`:t.length>0?t:"."},normalize(e){if(js(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===Ws,i=e.charCodeAt(e.length-1)===Ws;return 0===(e=$s(e,!t,"/",Gs)).length?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute:e=>(js(e,"path"),e.length>0&&e.charCodeAt(0)===Ws),join(...e){if(0===e.length)return".";let t;for(let i=0;i<e.length;++i){const n=e[i];js(n,"path"),n.length>0&&(void 0===t?t=n:t+=`/${n}`)}return void 0===t?".":Ys.normalize(t)},relative(e,t){if(js(e,"from"),js(t,"to"),e===t)return"";if((e=Ys.resolve(e))===(t=Ys.resolve(t)))return"";const i=e.length,n=i-1,r=t.length-1,s=n<r?n:r;let o=-1,a=0;for(;a<s;a++){const i=e.charCodeAt(1+a);if(i!==t.charCodeAt(1+a))break;i===Ws&&(o=a)}if(a===s)if(r>s){if(t.charCodeAt(1+a)===Ws)return t.slice(1+a+1);if(0===a)return t.slice(1+a)}else n>s&&(e.charCodeAt(1+a)===Ws?o=a:0===a&&(o=0));let l="";for(a=1+o+1;a<=i;++a)a!==i&&e.charCodeAt(a)!==Ws||(l+=0===l.length?"..":"/..");return`${l}${t.slice(1+o)}`},toNamespacedPath:e=>e,dirname(e){if(js(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===Ws;let i=-1,n=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===Ws){if(!n){i=t;break}}else n=!1;return-1===i?t?"/":".":t&&1===i?"//":e.slice(0,i)},basename(e,t){void 0!==t&&js(t,"ext"),js(e,"path");let i,n=0,r=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(i=e.length-1;i>=0;--i){const l=e.charCodeAt(i);if(l===Ws){if(!s){n=i+1;break}}else-1===a&&(s=!1,a=i+1),o>=0&&(l===t.charCodeAt(o)?-1==--o&&(r=i):(o=-1,r=a))}return n===r?r=a:-1===r&&(r=e.length),e.slice(n,r)}for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===Ws){if(!s){n=i+1;break}}else-1===r&&(s=!1,r=i+1);return-1===r?"":e.slice(n,r)},extname(e){js(e,"path");let t=-1,i=0,n=-1,r=!0,s=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a!==Ws)-1===n&&(r=!1,n=o+1),a===Fs?-1===t?t=o:1!==s&&(s=1):-1!==t&&(s=-1);else if(!r){i=o+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===i+1?"":e.slice(t,n)},format:qs.bind(null,"/"),parse(e){js(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.charCodeAt(0)===Ws;let n;i?(t.root="/",n=1):n=0;let r=-1,s=0,o=-1,a=!0,l=e.length-1,c=0;for(;l>=n;--l){const t=e.charCodeAt(l);if(t!==Ws)-1===o&&(a=!1,o=l+1),t===Fs?-1===r?r=l:1!==c&&(c=1):-1!==r&&(c=-1);else if(!a){s=l+1;break}}if(-1!==o){const n=0===s&&i?1:s;-1===r||0===c||1===c&&r===o-1&&r===s+1?t.base=t.name=e.slice(n,o):(t.name=e.slice(n,r),t.base=e.slice(n,o),t.ext=e.slice(r,o))}return s>0?t.dir=e.slice(0,s-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Ys.win32=Zs.win32=Zs,Ys.posix=Zs.posix=Ys;const Xs="win32"===Bs?Zs.normalize:Ys.normalize,Qs="win32"===Bs?Zs.resolve:Ys.resolve,Js="win32"===Bs?Zs.relative:Ys.relative,eo="win32"===Bs?Zs.dirname:Ys.dirname,to="win32"===Bs?Zs.basename:Ys.basename,io="win32"===Bs?Zs.extname:Ys.extname,no="win32"===Bs?Zs.sep:Ys.sep,ro=/^\w[\w\d+.-]*$/,so=/^\//,oo=/^\/\//;function ao(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!ro.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!so.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(oo.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}const lo="",co="/",ho=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class uo{constructor(e,t,i,n,r,s=!1){"object"==typeof e?(this.scheme=e.scheme||lo,this.authority=e.authority||lo,this.path=e.path||lo,this.query=e.query||lo,this.fragment=e.fragment||lo):(this.scheme=function(e,t){return e||t?e:"file"}(e,s),this.authority=t||lo,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==co&&(t=co+t):t=co}return t}(this.scheme,i||lo),this.query=n||lo,this.fragment=r||lo,ao(this,s))}static isUri(e){return e instanceof uo||!!e&&("string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString)}get fsPath(){return vo(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:r,fragment:s}=e;return void 0===t?t=this.scheme:null===t&&(t=lo),void 0===i?i=this.authority:null===i&&(i=lo),void 0===n?n=this.path:null===n&&(n=lo),void 0===r?r=this.query:null===r&&(r=lo),void 0===s?s=this.fragment:null===s&&(s=lo),t===this.scheme&&i===this.authority&&n===this.path&&r===this.query&&s===this.fragment?this:new po(t,i,n,r,s)}static parse(e,t=!1){const i=ho.exec(e);return i?new po(i[2]||lo,So(i[4]||lo),So(i[5]||lo),So(i[7]||lo),So(i[9]||lo),t):new po(lo,lo,lo,lo,lo)}static file(e){let t=lo;if(Yn&&(e=e.replace(/\\/g,co)),e[0]===co&&e[1]===co){const i=e.indexOf(co,2);-1===i?(t=e.substring(2),e=co):(t=e.substring(2,i),e=e.substring(i)||co)}return new po("file",t,e,lo,lo)}static from(e){const t=new po(e.scheme,e.authority,e.path,e.query,e.fragment);return ao(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return i=Yn&&"file"===e.scheme?uo.file(Zs.join(vo(e,!0),...t)).path:Ys.join(e.path,...t),e.with({path:i})}toString(e=!1){return yo(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof uo)return e;{const t=new po(e);return t._formatted=e.external,t._fsPath=e._sep===fo?e.fsPath:null,t}}return e}}const fo=Yn?1:void 0;class po extends uo{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=vo(this,!1)),this._fsPath}toString(e=!1){return e?yo(this,!0):(this._formatted||(this._formatted=yo(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=fo),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const go={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function mo(e,t){let i,n=-1;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||45===s||46===s||95===s||126===s||t&&47===s)-1!==n&&(i+=encodeURIComponent(e.substring(n,r)),n=-1),void 0!==i&&(i+=e.charAt(r));else{void 0===i&&(i=e.substr(0,r));const t=go[s];void 0!==t?(-1!==n&&(i+=encodeURIComponent(e.substring(n,r)),n=-1),i+=t):-1===n&&(n=r)}}return-1!==n&&(i+=encodeURIComponent(e.substring(n))),void 0!==i?i:e}function bo(e){let t;for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);35===n||63===n?(void 0===t&&(t=e.substr(0,i)),t+=go[n]):void 0!==t&&(t+=e[i])}return void 0!==t?t:e}function vo(e,t){let i;return i=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,Yn&&(i=i.replace(/\//g,"\\")),i}function yo(e,t){const i=t?bo:mo;let n="",{scheme:r,authority:s,path:o,query:a,fragment:l}=e;if(r&&(n+=r,n+=":"),(s||"file"===r)&&(n+=co,n+=co),s){let e=s.indexOf("@");if(-1!==e){const t=s.substr(0,e);s=s.substr(e+1),e=t.indexOf(":"),-1===e?n+=i(t,!1):(n+=i(t.substr(0,e),!1),n+=":",n+=i(t.substr(e+1),!1)),n+="@"}s=s.toLowerCase(),e=s.indexOf(":"),-1===e?n+=i(s,!1):(n+=i(s.substr(0,e),!1),n+=s.substr(e))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2)){const e=o.charCodeAt(1);e>=65&&e<=90&&(o=`/${String.fromCharCode(e+32)}:${o.substr(3)}`)}else if(o.length>=2&&58===o.charCodeAt(1)){const e=o.charCodeAt(0);e>=65&&e<=90&&(o=`${String.fromCharCode(e+32)}:${o.substr(2)}`)}n+=i(o,!0)}return a&&(n+="?",n+=i(a,!1)),l&&(n+="#",n+=t?l:mo(l,!1)),n}function _o(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+_o(e.substr(3)):e}}const wo=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function So(e){return e.match(wo)?e.replace(wo,(e=>_o(e))):e}class Co{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new Co(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return Co.equals(this,e)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Co.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(e){return Co.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){let i=0|e.lineNumber,n=0|t.lineNumber;if(i===n){return(0|e.column)-(0|t.column)}return i-n}clone(){return new Co(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Co(e.lineNumber,e.column)}static isIPosition(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column}}class xo{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return xo.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return xo.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn))}containsRange(e){return xo.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)))}strictContainsRange(e){return xo.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)))}plusRange(e){return xo.plusRange(this,e)}static plusRange(e,t){let i,n,r,s;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,s=e.endColumn),new xo(i,n,r,s)}intersectRanges(e){return xo.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,s=e.endColumn,o=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,c=t.endColumn;return i<o?(i=o,n=a):i===o&&(n=Math.max(n,a)),r>l?(r=l,s=c):r===l&&(s=Math.min(s,c)),i>r||i===r&&n>s?null:new xo(i,n,r,s)}equalsRange(e){return xo.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return xo.getEndPosition(this)}static getEndPosition(e){return new Co(e.endLineNumber,e.endColumn)}getStartPosition(){return xo.getStartPosition(this)}static getStartPosition(e){return new Co(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new xo(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new xo(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return xo.collapseToStart(this)}static collapseToStart(e){return new xo(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new xo(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new xo(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const i=0|e.startLineNumber,n=0|t.startLineNumber;if(i===n){const i=0|e.startColumn,n=0|t.startColumn;if(i===n){const i=0|e.endLineNumber,n=0|t.endLineNumber;if(i===n){return(0|e.endColumn)-(0|t.endColumn)}return i-n}return i-n}return i-n}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}}class ko extends xo{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return ko.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return 0===this.getDirection()?new ko(this.startLineNumber,this.startColumn,e,t):new ko(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Co(this.positionLineNumber,this.positionColumn)}setStartPosition(e,t){return 0===this.getDirection()?new ko(e,t,this.endLineNumber,this.endColumn):new ko(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new ko(e.lineNumber,e.column,t.lineNumber,t.column)}static liftSelection(e){return new ko(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn}static createWithDirection(e,t,i,n,r){return 0===r?new ko(e,t,i,n):new ko(i,n,e,t)}}class Eo{constructor(e,t,i){this.offset=0|e,this.type=t,this.language=i}toString(){return"("+this.offset+", "+this.type+")"}}class To{constructor(e,t){this.tokens=e,this.endState=t}}class Lo{constructor(e,t){this.tokens=e,this.endState=t}}var No,Mo,Oo,Do,Io,Ao,Po,Ro,Bo,Fo,Wo,Vo,zo,Ho,jo,Uo,Go,Ko,$o,qo,Zo,Yo,Xo,Qo,Jo,ea,ta,ia,na,ra,sa,oa,aa,la,ca,ha;!function(e){e[e.Unknown=0]="Unknown",e[e.Disabled=1]="Disabled",e[e.Enabled=2]="Enabled"}(No||(No={})),function(e){e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"}(Mo||(Mo={})),function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"}(Oo||(Oo={})),function(e){e[e.Deprecated=1]="Deprecated"}(Do||(Do={})),function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(Io||(Io={})),function(e){e[e.EXACT=0]="EXACT",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW"}(Ao||(Ao={})),function(e){e[e.NotSet=0]="NotSet",e[e.ContentFlush=1]="ContentFlush",e[e.RecoverFromMarkers=2]="RecoverFromMarkers",e[e.Explicit=3]="Explicit",e[e.Paste=4]="Paste",e[e.Undo=5]="Undo",e[e.Redo=6]="Redo"}(Po||(Po={})),function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(Ro||(Ro={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(Bo||(Bo={})),function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"}(Fo||(Fo={})),function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.autoClosingBrackets=5]="autoClosingBrackets",e[e.autoClosingDelete=6]="autoClosingDelete",e[e.autoClosingOvertype=7]="autoClosingOvertype",e[e.autoClosingQuotes=8]="autoClosingQuotes",e[e.autoIndent=9]="autoIndent",e[e.automaticLayout=10]="automaticLayout",e[e.autoSurround=11]="autoSurround",e[e.codeLens=12]="codeLens",e[e.codeLensFontFamily=13]="codeLensFontFamily",e[e.codeLensFontSize=14]="codeLensFontSize",e[e.colorDecorators=15]="colorDecorators",e[e.columnSelection=16]="columnSelection",e[e.comments=17]="comments",e[e.contextmenu=18]="contextmenu",e[e.copyWithSyntaxHighlighting=19]="copyWithSyntaxHighlighting",e[e.cursorBlinking=20]="cursorBlinking",e[e.cursorSmoothCaretAnimation=21]="cursorSmoothCaretAnimation",e[e.cursorStyle=22]="cursorStyle",e[e.cursorSurroundingLines=23]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=24]="cursorSurroundingLinesStyle",e[e.cursorWidth=25]="cursorWidth",e[e.disableLayerHinting=26]="disableLayerHinting",e[e.disableMonospaceOptimizations=27]="disableMonospaceOptimizations",e[e.domReadOnly=28]="domReadOnly",e[e.dragAndDrop=29]="dragAndDrop",e[e.emptySelectionClipboard=30]="emptySelectionClipboard",e[e.extraEditorClassName=31]="extraEditorClassName",e[e.fastScrollSensitivity=32]="fastScrollSensitivity",e[e.find=33]="find",e[e.fixedOverflowWidgets=34]="fixedOverflowWidgets",e[e.folding=35]="folding",e[e.foldingStrategy=36]="foldingStrategy",e[e.foldingHighlight=37]="foldingHighlight",e[e.unfoldOnClickAfterEndOfLine=38]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=39]="fontFamily",e[e.fontInfo=40]="fontInfo",e[e.fontLigatures=41]="fontLigatures",e[e.fontSize=42]="fontSize",e[e.fontWeight=43]="fontWeight",e[e.formatOnPaste=44]="formatOnPaste",e[e.formatOnType=45]="formatOnType",e[e.glyphMargin=46]="glyphMargin",e[e.gotoLocation=47]="gotoLocation",e[e.hideCursorInOverviewRuler=48]="hideCursorInOverviewRuler",e[e.highlightActiveIndentGuide=49]="highlightActiveIndentGuide",e[e.hover=50]="hover",e[e.inDiffEditor=51]="inDiffEditor",e[e.inlineSuggest=52]="inlineSuggest",e[e.letterSpacing=53]="letterSpacing",e[e.lightbulb=54]="lightbulb",e[e.lineDecorationsWidth=55]="lineDecorationsWidth",e[e.lineHeight=56]="lineHeight",e[e.lineNumbers=57]="lineNumbers",e[e.lineNumbersMinChars=58]="lineNumbersMinChars",e[e.linkedEditing=59]="linkedEditing",e[e.links=60]="links",e[e.matchBrackets=61]="matchBrackets",e[e.minimap=62]="minimap",e[e.mouseStyle=63]="mouseStyle",e[e.mouseWheelScrollSensitivity=64]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=65]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=66]="multiCursorMergeOverlapping",e[e.multiCursorModifier=67]="multiCursorModifier",e[e.multiCursorPaste=68]="multiCursorPaste",e[e.occurrencesHighlight=69]="occurrencesHighlight",e[e.overviewRulerBorder=70]="overviewRulerBorder",e[e.overviewRulerLanes=71]="overviewRulerLanes",e[e.padding=72]="padding",e[e.parameterHints=73]="parameterHints",e[e.peekWidgetDefaultFocus=74]="peekWidgetDefaultFocus",e[e.definitionLinkOpensInPeek=75]="definitionLinkOpensInPeek",e[e.quickSuggestions=76]="quickSuggestions",e[e.quickSuggestionsDelay=77]="quickSuggestionsDelay",e[e.readOnly=78]="readOnly",e[e.renameOnType=79]="renameOnType",e[e.renderControlCharacters=80]="renderControlCharacters",e[e.renderIndentGuides=81]="renderIndentGuides",e[e.renderFinalNewline=82]="renderFinalNewline",e[e.renderLineHighlight=83]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=84]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=85]="renderValidationDecorations",e[e.renderWhitespace=86]="renderWhitespace",e[e.revealHorizontalRightPadding=87]="revealHorizontalRightPadding",e[e.roundedSelection=88]="roundedSelection",e[e.rulers=89]="rulers",e[e.scrollbar=90]="scrollbar",e[e.scrollBeyondLastColumn=91]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=92]="scrollBeyondLastLine",e[e.scrollPredominantAxis=93]="scrollPredominantAxis",e[e.selectionClipboard=94]="selectionClipboard",e[e.selectionHighlight=95]="selectionHighlight",e[e.selectOnLineNumbers=96]="selectOnLineNumbers",e[e.showFoldingControls=97]="showFoldingControls",e[e.showUnused=98]="showUnused",e[e.snippetSuggestions=99]="snippetSuggestions",e[e.smartSelect=100]="smartSelect",e[e.smoothScrolling=101]="smoothScrolling",e[e.stickyTabStops=102]="stickyTabStops",e[e.stopRenderingLineAfter=103]="stopRenderingLineAfter",e[e.suggest=104]="suggest",e[e.suggestFontSize=105]="suggestFontSize",e[e.suggestLineHeight=106]="suggestLineHeight",e[e.suggestOnTriggerCharacters=107]="suggestOnTriggerCharacters",e[e.suggestSelection=108]="suggestSelection",e[e.tabCompletion=109]="tabCompletion",e[e.tabIndex=110]="tabIndex",e[e.unusualLineTerminators=111]="unusualLineTerminators",e[e.useShadowDOM=112]="useShadowDOM",e[e.useTabStops=113]="useTabStops",e[e.wordSeparators=114]="wordSeparators",e[e.wordWrap=115]="wordWrap",e[e.wordWrapBreakAfterCharacters=116]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=117]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=118]="wordWrapColumn",e[e.wordWrapOverride1=119]="wordWrapOverride1",e[e.wordWrapOverride2=120]="wordWrapOverride2",e[e.wrappingIndent=121]="wrappingIndent",e[e.wrappingStrategy=122]="wrappingStrategy",e[e.showDeprecated=123]="showDeprecated",e[e.inlayHints=124]="inlayHints",e[e.editorClassName=125]="editorClassName",e[e.pixelRatio=126]="pixelRatio",e[e.tabFocusMode=127]="tabFocusMode",e[e.layoutInfo=128]="layoutInfo",e[e.wrappingInfo=129]="wrappingInfo"}(Wo||(Wo={})),function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(Vo||(Vo={})),function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"}(zo||(zo={})),function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(Ho||(Ho={})),function(e){e[e.Other=0]="Other",e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(jo||(jo={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(Uo||(Uo={})),function(e){e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",e[e.US_QUOTE=90]="US_QUOTE",e[e.OEM_8=91]="OEM_8",e[e.OEM_102=92]="OEM_102",e[e.NUMPAD_0=93]="NUMPAD_0",e[e.NUMPAD_1=94]="NUMPAD_1",e[e.NUMPAD_2=95]="NUMPAD_2",e[e.NUMPAD_3=96]="NUMPAD_3",e[e.NUMPAD_4=97]="NUMPAD_4",e[e.NUMPAD_5=98]="NUMPAD_5",e[e.NUMPAD_6=99]="NUMPAD_6",e[e.NUMPAD_7=100]="NUMPAD_7",e[e.NUMPAD_8=101]="NUMPAD_8",e[e.NUMPAD_9=102]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=104]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",e[e.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",e[e.ABNT_C1=110]="ABNT_C1",e[e.ABNT_C2=111]="ABNT_C2",e[e.MAX_VALUE=112]="MAX_VALUE"}(Go||(Go={})),function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(Ko||(Ko={})),function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}($o||($o={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(qo||(qo={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXTAREA=1]="TEXTAREA",e[e.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",e[e.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",e[e.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",e[e.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",e[e.CONTENT_TEXT=6]="CONTENT_TEXT",e[e.CONTENT_EMPTY=7]="CONTENT_EMPTY",e[e.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",e[e.CONTENT_WIDGET=9]="CONTENT_WIDGET",e[e.OVERVIEW_RULER=10]="OVERVIEW_RULER",e[e.SCROLLBAR=11]="SCROLLBAR",e[e.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",e[e.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"}(Zo||(Zo={})),function(e){e[e.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",e[e.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",e[e.TOP_CENTER=2]="TOP_CENTER"}(Yo||(Yo={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(Xo||(Xo={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"}(Qo||(Qo={})),function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"}(Jo||(Jo={})),function(e){e[e.Smooth=0]="Smooth",e[e.Immediate=1]="Immediate"}(ea||(ea={})),function(e){e[e.Auto=1]="Auto",e[e.Hidden=2]="Hidden",e[e.Visible=3]="Visible"}(ta||(ta={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(ia||(ia={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(na||(na={})),function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"}(ra||(ra={})),function(e){e[e.Deprecated=1]="Deprecated"}(sa||(sa={})),function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"}(oa||(oa={})),function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(aa||(aa={})),function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(la||(la={})),function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"}(ca||(ca={}));class ua{static chord(e,t){return function(e,t){return(e|(65535&t)<<16>>>0)>>>0}(e,t)}}function da(){return{editor:void 0,languages:void 0,CancellationTokenSource:Cs,Emitter:ms,KeyCode:Go,KeyMod:ua,Position:Co,Range:xo,Selection:ko,SelectionDirection:ia,MarkerSeverity:Ko,MarkerTag:$o,Uri:uo,Token:Eo}}ua.CtrlCmd=2048,ua.Shift=1024,ua.Alt=512,ua.WinCtrl=256,function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(ha||(ha={}));const fa=ga("instantiationService");function pa(e,t,i,n){t[ha.DI_TARGET]===t?t[ha.DI_DEPENDENCIES].push({id:e,index:i,optional:n}):(t[ha.DI_DEPENDENCIES]=[{id:e,index:i,optional:n}],t[ha.DI_TARGET]=t)}function ga(e){if(ha.serviceIds.has(e))return ha.serviceIds.get(e);const t=function(e,i,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");pa(t,e,n,!1)};return t.toString=()=>e,ha.serviceIds.set(e,t),t}function ma(e){return function(t,i,n){if(3!==arguments.length)throw new Error("@optional-decorator can only be used to decorate a parameter");pa(e,t,n,!0)}}const ba=ga("codeEditorService");class va{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new ms,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}}function ya(){return va.INSTANCE.getZoomLevel()}function _a(){return va.INSTANCE.getPixelRatio()}va.INSTANCE=new va;const wa=navigator.userAgent,Sa=wa.indexOf("Firefox")>=0,Ca=wa.indexOf("AppleWebKit")>=0,xa=wa.indexOf("Chrome")>=0,ka=!xa&&wa.indexOf("Safari")>=0,Ea=!xa&&!ka&&Ca,Ta=wa.indexOf("Android")>=0,La=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,Na=(e,t,i)=>{const n=e=>r.fire(e),r=new ms({onFirstListenerAdd:()=>{e.addEventListener(t,n,i)},onLastListenerRemove:()=>{e.removeEventListener(t,n,i)}});return r.event};class Ma{constructor(e,t,i){const n=e=>this.emitter.fire(e);this.emitter=new ms({onFirstListenerAdd:()=>e.addEventListener(t,n,i),onLastListenerRemove:()=>e.removeEventListener(t,n,i)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function Oa(e){return e.preventDefault(),e.stopPropagation(),e}let Da=new Array(230),Ia=new Array(112);!function(){for(let e=0;e<Ia.length;e++)Ia[e]=-1;function e(e,t){Da[e]=t,Ia[t]=e}e(3,7),e(8,1),e(9,2),e(13,3),e(16,4),e(17,5),e(18,6),e(19,7),e(20,8),e(27,9),e(32,10),e(33,11),e(34,12),e(35,13),e(36,14),e(37,15),e(38,16),e(39,17),e(40,18),e(45,19),e(46,20),e(48,21),e(49,22),e(50,23),e(51,24),e(52,25),e(53,26),e(54,27),e(55,28),e(56,29),e(57,30),e(65,31),e(66,32),e(67,33),e(68,34),e(69,35),e(70,36),e(71,37),e(72,38),e(73,39),e(74,40),e(75,41),e(76,42),e(77,43),e(78,44),e(79,45),e(80,46),e(81,47),e(82,48),e(83,49),e(84,50),e(85,51),e(86,52),e(87,53),e(88,54),e(89,55),e(90,56),e(93,58),e(96,93),e(97,94),e(98,95),e(99,96),e(100,97),e(101,98),e(102,99),e(103,100),e(104,101),e(105,102),e(106,103),e(107,104),e(108,105),e(109,106),e(110,107),e(111,108),e(112,59),e(113,60),e(114,61),e(115,62),e(116,63),e(117,64),e(118,65),e(119,66),e(120,67),e(121,68),e(122,69),e(123,70),e(124,71),e(125,72),e(126,73),e(127,74),e(128,75),e(129,76),e(130,77),e(144,78),e(145,79),e(186,80),e(187,81),e(188,82),e(189,83),e(190,84),e(191,85),e(192,86),e(193,110),e(194,111),e(219,87),e(220,88),e(221,89),e(222,90),e(223,91),e(226,92),e(229,109),Sa?(e(59,80),e(107,81),e(109,83),Xn&&e(224,57)):Ca&&(e(91,57),e(Xn?93:92,57))}();const Aa=Xn?256:2048,Pa=Xn?2048:256;class Ra{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=function(e){if(e.charCode){let t=String.fromCharCode(e.charCode).toUpperCase();return Ls.fromString(t)}return Da[e.keyCode]||0}(t),this.code=t.code,this.ctrlKey=this.ctrlKey||5===this.keyCode,this.altKey=this.altKey||6===this.keyCode,this.shiftKey=this.shiftKey||4===this.keyCode,this.metaKey=this.metaKey||57===this.keyCode,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Aa),this.altKey&&(t|=512),this.shiftKey&&(t|=1024),this.metaKey&&(t|=Pa),t|=e,t}_computeRuntimeKeybinding(){let e=0;return 5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode),new Os(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let Ba=!1,Fa=null;function Wa(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,i=e.parent.location;if("null"!==t.origin&&"null"!==i.origin&&(t.protocol!==i.protocol||t.hostname!==i.hostname||t.port!==i.port))return Ba=!0,null}catch(e){return Ba=!0,null}return e.parent}class Va{static getSameOriginWindowChain(){if(!Fa){Fa=[];let e,t=window;do{e=Wa(t),e?Fa.push({window:t,iframeElement:t.frameElement||null}):Fa.push({window:t,iframeElement:null}),t=e}while(t)}return Fa.slice(0)}static hasDifferentOriginAncestor(){return Fa||this.getSameOriginWindowChain(),Ba}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0,r=this.getSameOriginWindowChain();for(const e of r){if(i+=e.window.scrollY,n+=e.window.scrollX,e.window===t)break;if(!e.iframeElement)break;let r=e.iframeElement.getBoundingClientRect();i+=r.top,n+=r.left}return{top:i,left:n}}}class za{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=0===e.button,this.middleButton=1===e.button,this.rightButton=2===e.button,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,"dblclick"===e.type&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,"number"==typeof e.pageX?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=Va.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Ha{constructor(e,t=0,i=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t,e){let t=e,i=e;if(void 0!==t.wheelDeltaY)this.deltaY=t.wheelDeltaY/120;else if(void 0!==i.VERTICAL_AXIS&&i.axis===i.VERTICAL_AXIS)this.deltaY=-i.detail/3;else if("wheel"===e.type){const t=e;t.deltaMode===t.DOM_DELTA_LINE?this.deltaY=Sa&&!Xn?-e.deltaY/3:-e.deltaY:this.deltaY=-e.deltaY/40}if(void 0!==t.wheelDeltaX)this.deltaX=ka&&Yn?-t.wheelDeltaX/120:t.wheelDeltaX/120;else if(void 0!==i.HORIZONTAL_AXIS&&i.axis===i.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if("wheel"===e.type){const t=e;t.deltaMode===t.DOM_DELTA_LINE?this.deltaX=Sa&&!Xn?-e.deltaX/3:-e.deltaX:this.deltaX=-e.deltaX/40}0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}var ja=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};function Ua(e){const t=new Cs,i=e(t.token),n=new Promise(((e,n)=>{t.token.onCancellationRequested((()=>{n(Yr())})),Promise.resolve(i).then((i=>{t.dispose(),e(i)}),(e=>{t.dispose(),n(e)}))}));return new class{cancel(){t.cancel()}then(e,t){return n.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return n.finally(e)}}}class Ga{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{this.queuedPromise=null;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise((t=>{this.activePromise.then(e,e).then(t)}))}return new Promise(((e,t)=>{this.queuedPromise.then(e,t)}))}return this.activePromise=e(),new Promise(((e,t)=>{this.activePromise.then((t=>{this.activePromise=null,e(t)}),(e=>{this.activePromise=null,t(e)}))}))}}class Ka{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,t)=>{this.doResolve=e,this.doReject=t})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}}))),this.timeout=setTimeout((()=>{this.timeout=null,this.doResolve&&this.doResolve(null)}),t),this.completionPromise}isTriggered(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(Yr()),this.completionPromise=null)}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancelTimeout()}}class $a{constructor(e){this.delayer=new Ka(e),this.throttler=new Ga}trigger(e,t){return this.delayer.trigger((()=>this.throttler.queue(e)),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}function qa(e,t){return t?new Promise(((i,n)=>{const r=setTimeout(i,e);t.onCancellationRequested((()=>{clearTimeout(r),n(Yr())}))})):Ua((t=>qa(e,t)))}function Za(e,t=0){const i=setTimeout(e,t);return ss((()=>clearTimeout(i)))}class Ya{constructor(e,t){this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),t))}}class Xa{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval((()=>{e()}),t)}}class Qa{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let Ja;!function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){const e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});Ja=t=>{const i=setTimeout((()=>t(e)));let n=!1;return{dispose(){n||(n=!0,clearTimeout(i))}}}}else Ja=(e,t)=>{const i=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(i))}}}}();class el{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=Ja((()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}var tl,il;!function(e){e.allSettled=function(e){return ja(this,void 0,void 0,(function*(){return"function"==typeof Promise.allSettled?function(e){return ja(this,void 0,void 0,(function*(){return Promise.allSettled(e)}))}(e):function(e){return ja(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>e.then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))}))}(e)}))},e.settled=function(e){return ja(this,void 0,void 0,(function*(){let t;const i=yield Promise.all(e.map((e=>e.then((e=>e),(e=>{t||(t=e)})))));if(void 0!==t)throw t;return i}))}}(tl||(tl={})),function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.userData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebook="vscode-notebook",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp"}(il||(il={}));const nl=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let i=this._hosts[t];i&&-1!==i.indexOf(":")&&(i=`[${i}]`);const n=this._ports[t],r=this._connectionTokens[t];let s=`path=${encodeURIComponent(e.path)}`;return"string"==typeof r&&(s+=`&tkn=${encodeURIComponent(r)}`),uo.from({scheme:er?this._preferredWebSchema:il.vscodeRemoteResource,authority:`${i}:${n}`,path:"/vscode-remote-resource",query:s})}};const rl=new class{constructor(){this.FALLBACK_AUTHORITY="vscode-app"}asBrowserUri(e,t,i){const n=this.toUri(e,t);return n.scheme===il.vscodeRemote?nl.rewrite(n):Jn&&(i||qn)&&n.scheme===il.file?n.with({scheme:il.vscodeFileResource,authority:n.authority||this.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return uo.isUri(e)?e:uo.parse(t.toUrl(e))}},sl=(Jn||document.queryCommandSupported&&document.queryCommandSupported("copy")||navigator&&navigator.clipboard&&navigator.clipboard.writeText,Jn||navigator&&navigator.clipboard&&navigator.clipboard.readText,Jn||La||navigator.keyboard,"ontouchstart"in window||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints,window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0));function ol(e){for(;e.firstChild;)e.firstChild.remove()}function al(e){var t;return null!==(t=null==e?void 0:e.isConnected)&&void 0!==t&&t}class ll{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function cl(e,t,i,n){return new ll(e,t,i,n)}function hl(e){return function(t){return e(new za(t))}}let ul=function(e,t,i,n){let r=i;return"click"===t||"mousedown"===t?r=hl(i):"keydown"!==t&&"keypress"!==t&&"keyup"!==t||(r=function(e){return function(t){return e(new Ra(t))}}(i)),cl(e,t,r,n)};function dl(e,t){return cl(e,"mouseout",(i=>{let n=i.relatedTarget;for(;n&&n!==e;)n=n.parentNode;n!==e&&t(i)}))}let fl,pl,gl=null;class ml{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Gr(e)}}static sort(e,t){return t.priority-e.priority}}!function(){let e=[],t=null,i=!1,n=!1,r=()=>{for(i=!1,t=e,e=[],n=!0;t.length>0;){t.sort(ml.sort),t.shift().execute()}n=!1};pl=(t,n=0)=>{let s=new ml(t,n);return e.push(s),i||(i=!0,function(e){if(!gl){const e=e=>setTimeout((()=>e((new Date).getTime())),0);gl=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}gl.call(self,e)}(r)),s},fl=(e,i)=>{if(n){let n=new ml(e,i);return t.push(n),n}return pl(e,i)}}();const bl=function(e,t){return t};class vl extends as{constructor(e,t,i,n=bl,r=8){super();let s=null,o=0,a=this._register(new Ya),l=()=>{o=(new Date).getTime(),i(s),s=null};this._register(cl(e,t,(e=>{s=n(s,e);let t=(new Date).getTime()-o;t>=r?(a.cancel(),l()):a.setIfNotSet(l,r-t)})))}}function yl(e,t,i,n,r){return new vl(e,t,i,n,r)}function _l(e){return document.defaultView.getComputedStyle(e,null)}function wl(e){if(e!==document.body)return new Cl(e.clientWidth,e.clientHeight);if(tr&&window.visualViewport)return new Cl(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Cl(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Cl(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Cl(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class Sl{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){let n=_l(e),r="0";return n&&(r=n.getPropertyValue?n.getPropertyValue(t):n.getAttribute(i)),Sl.convertToPixels(e,r)}static getBorderLeftWidth(e){return Sl.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Sl.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Sl.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Sl.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Sl.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Sl.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Sl.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Sl.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Sl.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Sl.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Sl.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Sl.getDimension(e,"margin-bottom","marginBottom")}}class Cl{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Cl(e,t):this}static is(e){return"object"==typeof e&&"number"==typeof e.height&&"number"==typeof e.width}static lift(e){return e instanceof Cl?e:new Cl(e.width,e.height)}static equals(e,t){return e===t||!(!e||!t)&&(e.width===t.width&&e.height===t.height)}}function xl(e){let t=e.getBoundingClientRect();return{left:t.left+kl.scrollX,top:t.top+kl.scrollY,width:t.width,height:t.height}}const kl=new class{get scrollX(){return"number"==typeof window.scrollX?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return"number"==typeof window.scrollY?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function El(e){let t=Sl.getMarginLeft(e)+Sl.getMarginRight(e);return e.offsetWidth+t}function Tl(e){let t=Sl.getBorderLeftWidth(e)+Sl.getBorderRightWidth(e),i=Sl.getPaddingLeft(e)+Sl.getPaddingRight(e);return e.offsetWidth-t-i}function Ll(e){let t=Sl.getBorderTopWidth(e)+Sl.getBorderBottomWidth(e),i=Sl.getPaddingTop(e)+Sl.getPaddingBottom(e);return e.offsetHeight-t-i}function Nl(e){let t=Sl.getMarginTop(e)+Sl.getMarginBottom(e);return e.offsetHeight+t}function Ml(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function Ol(e,t,i){for(;e&&e.nodeType===e.ELEMENT_NODE;){if(e.classList.contains(t))return e;if(i)if("string"==typeof i){if(e.classList.contains(i))return null}else if(e===i)return null;e=e.parentNode}return null}function Dl(e,t,i){return!!Ol(e,t,i)}function Il(e){return e&&!!e.host&&!!e.mode}function Al(e){return!!Pl(e)}function Pl(e){for(;e.parentNode;){if(e===document.body)return null;e=e.parentNode}return Il(e)?e:null}function Rl(){let e=document.activeElement;for(;null==e?void 0:e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Bl(e=document.getElementsByTagName("head")[0]){let t=document.createElement("style");return t.type="text/css",t.media="screen",e.appendChild(t),t}let Fl=null;function Wl(){return Fl||(Fl=Bl()),Fl}function Vl(e,t,i=Wl()){i&&t&&i.sheet.insertRule(e+"{"+t+"}",0)}function zl(e,t=Wl()){if(!t)return;let i=function(e){var t,i;return(null===(t=null==e?void 0:e.sheet)||void 0===t?void 0:t.rules)?e.sheet.rules:(null===(i=null==e?void 0:e.sheet)||void 0===i?void 0:i.cssRules)?e.sheet.cssRules:[]}(t),n=[];for(let t=0;t<i.length;t++){-1!==i[t].selectorText.indexOf(e)&&n.push(t)}for(let e=n.length-1;e>=0;e--)t.sheet.deleteRule(n[e])}function Hl(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}const jl={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Ca?"webkitAnimationStart":"animationstart",ANIMATION_END:Ca?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Ca?"webkitAnimationIteration":"animationiteration"},Ul=function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)};class Gl extends as{constructor(e){super(),this._onDidFocus=this._register(new ms),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new ms),this.onDidBlur=this._onDidBlur.event;let t=Ml(document.activeElement,e),i=!1;const n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(i=!0,window.setTimeout((()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())}),0))};this._refreshStateHandler=()=>{Ml(document.activeElement,e)!==t&&(t?r():n())},this._register(Na(e,jl.FOCUS,!0)(n)),this._register(Na(e,jl.BLUR,!0)(r))}}function Kl(e){return new Gl(e)}function $l(e,...t){if(e.append(...t),1===t.length&&"string"!=typeof t[0])return t[0]}function ql(e,...t){e.innerText="",$l(e,...t)}const Zl=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Yl;function Xl(e,t,i,...n){let r=Zl.exec(t);if(!r)throw new Error("Bad use of emmet");i=Object.assign({},i||{});let s,o=r[1]||"div";return s=e!==Yl.HTML?document.createElementNS(e,o):document.createElement(o),r[3]&&(s.id=r[3]),r[4]&&(s.className=r[4].replace(/\./g," ").trim()),Object.keys(i).forEach((e=>{const t=i[e];void 0!==t&&(/^on\w+$/.test(e)?s[e]=t:"selected"===e?t&&s.setAttribute(e,"true"):s.setAttribute(e,t))})),s.append(...n),s}function Ql(e,t,...i){return Xl(Yl.HTML,e,t,...i)}function Jl(...e){for(let t of e)t.style.display="",t.removeAttribute("aria-hidden")}function ec(...e){for(let t of e)t.style.display="none",t.setAttribute("aria-hidden","true")}function tc(e){return Array.prototype.slice.call(document.getElementsByTagName(e),0)}function ic(e){const t=window.devicePixelRatio*e;return Math.max(1,Math.floor(t))/window.devicePixelRatio}function nc(e){window.open(e,"_blank","noopener")}function rc(e){return e?`url('${rl.asBrowserUri(e).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function sc(e){return`'${e.replace(/'/g,"%27")}'`}!function(e){e.HTML="http://www.w3.org/1999/xhtml",e.SVG="http://www.w3.org/2000/svg"}(Yl||(Yl={})),Ql.SVG=function(e,t,...i){return Xl(Yl.SVG,e,t,...i)},nl.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");class oc extends ms{constructor(){super(),this._subscriptions=new os,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Na(window,"keydown",!0)((e=>{if(e.defaultPrevented)return;const t=new Ra(e);if(6!==t.keyCode||!e.repeat){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(6===t.keyCode)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}}))),this._subscriptions.add(Na(window,"keyup",!0)((e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))}))),this._subscriptions.add(Na(document.body,"mousedown",!0)((e=>{this._keyStatus.lastKeyPressed=void 0}))),this._subscriptions.add(Na(document.body,"mouseup",!0)((e=>{this._keyStatus.lastKeyPressed=void 0}))),this._subscriptions.add(Na(document.body,"mousemove",!0)((e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)}))),this._subscriptions.add(Na(window,"blur")((e=>{this.resetKeyStatus()})))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return oc.instance||(oc.instance=new oc),oc.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}const ac=/{(\d+)}/g;function lc(e,...t){return 0===t.length?e:e.replace(ac,(function(e,i){const n=parseInt(i,10);return isNaN(n)||n<0||n>=t.length?e:t[n]}))}function cc(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function hc(e,t){if(!e||!t)return e;const i=t.length;if(0===i||0===e.length)return e;let n=0;for(;e.indexOf(t,n)===n;)n+=i;return e.substring(n)}function uc(e,t){if(!e||!t)return e;const i=t.length,n=e.length;if(0===i||0===n)return e;let r=n,s=-1;for(;s=e.lastIndexOf(t,r-1),-1!==s&&s+i===r;){if(0===s)return"";r=s}return e.substring(0,r)}function dc(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=cc(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let n="";return i.global&&(n+="g"),i.matchCase||(n+="i"),i.multiline&&(n+="m"),i.unicode&&(n+="u"),new RegExp(e,n)}function fc(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")}function pc(e){return e.split(/\r\n|\r|\n/)}function gc(e){for(let t=0,i=e.length;t<i;t++){const i=e.charCodeAt(t);if(32!==i&&9!==i)return t}return-1}function mc(e,t=0,i=e.length){for(let n=t;n<i;n++){const i=e.charCodeAt(n);if(32!==i&&9!==i)return e.substring(t,n)}return e.substring(t,i)}function bc(e,t=e.length-1){for(let i=t;i>=0;i--){const t=e.charCodeAt(i);if(32!==t&&9!==t)return i}return-1}function vc(e,t){return e<t?-1:e>t?1:0}function yc(e,t,i=0,n=e.length,r=0,s=t.length){for(;i<n&&r<s;i++,r++){let n=e.charCodeAt(i),s=t.charCodeAt(r);if(n<s)return-1;if(n>s)return 1}const o=n-i,a=s-r;return o<a?-1:o>a?1:0}function _c(e,t){return wc(e,t,0,e.length,0,t.length)}function wc(e,t,i=0,n=e.length,r=0,s=t.length){for(;i<n&&r<s;i++,r++){let o=e.charCodeAt(i),a=t.charCodeAt(r);if(o===a)continue;const l=o-a;if((32!==l||!Cc(a))&&(-32!==l||!Cc(o)))return Sc(o)&&Sc(a)?l:yc(e.toLowerCase(),t.toLowerCase(),i,n,r,s)}const o=n-i,a=s-r;return o<a?-1:o>a?1:0}function Sc(e){return e>=97&&e<=122}function Cc(e){return e>=65&&e<=90}function xc(e){return Sc(e)||Cc(e)}function kc(e,t){return e.length===t.length&&Ec(e,t)}function Ec(e,t,i=e.length){for(let n=0;n<i;n++){const i=e.charCodeAt(n),r=t.charCodeAt(n);if(i!==r)if(xc(i)&&xc(r)){const e=Math.abs(i-r);if(0!==e&&32!==e)return!1}else if(String.fromCharCode(i).toLowerCase()!==String.fromCharCode(r).toLowerCase())return!1}return!0}function Tc(e,t){const i=t.length;return!(t.length>e.length)&&Ec(e,t,i)}function Lc(e,t){let i,n=Math.min(e.length,t.length);for(i=0;i<n;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return n}function Nc(e,t){let i,n=Math.min(e.length,t.length);const r=e.length-1,s=t.length-1;for(i=0;i<n;i++)if(e.charCodeAt(r-i)!==t.charCodeAt(s-i))return i;return n}function Mc(e){return 55296<=e&&e<=56319}function Oc(e){return 56320<=e&&e<=57343}function Dc(e,t){return t-56320+(e-55296<<10)+65536}function Ic(e,t,i){const n=e.charCodeAt(i);if(Mc(n)&&i+1<t){const t=e.charCodeAt(i+1);if(Oc(t))return Dc(n,t)}return n}function Ac(e,t){const i=e.charCodeAt(t-1);if(Oc(i)&&t>1){const n=e.charCodeAt(t-2);if(Mc(n))return Dc(n,i)}return i}function Pc(e,t){const i=Yc.getInstance(),n=t,r=e.length,s=Ic(e,r,t);t+=s>=65536?2:1;let o=i.getGraphemeBreakType(s);for(;t<r;){const n=Ic(e,r,t),s=i.getGraphemeBreakType(n);if(Zc(o,s))break;t+=n>=65536?2:1,o=s}return t-n}const Rc=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function Bc(e){return Rc.test(e)}const Fc=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD00-\uDDFF\uDE70-\uDED6])/;const Wc=/^[\t\n\r\x20-\x7E]*$/;function Vc(e){return Wc.test(e)}const zc=/[\u2028\u2029]/;function Hc(e){return zc.test(e)}function jc(e){return(e=+e)>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function Uc(e){return e>=127462&&e<=127487||8986===e||8987===e||9200===e||9203===e||e>=9728&&e<=10175||11088===e||11093===e||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129003||e>=129280&&e<=129535||e>=129648&&e<=129750}const Gc=String.fromCharCode(65279);function Kc(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}function $c(e){return(e%=52)<26?String.fromCharCode(97+e):String.fromCharCode(65+e-26)}function qc(e){return Yc.getInstance().getGraphemeBreakType(e)}function Zc(e,t){return 0===e?5!==t&&7!==t:(2!==e||3!==t)&&(4===e||2===e||3===e||(4===t||2===t||3===t||(8!==e||8!==t&&9!==t&&11!==t&&12!==t)&&((11!==e&&9!==e||9!==t&&10!==t)&&((12!==e&&10!==e||10!==t)&&(5!==t&&13!==t&&(7!==t&&(1!==e&&((13!==e||14!==t)&&(6!==e||6!==t)))))))))}class Yc{constructor(){this._data=JSON.parse("[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]")}static getInstance(){return Yc._INSTANCE||(Yc._INSTANCE=new Yc),Yc._INSTANCE}getGraphemeBreakType(e){if(e<32)return 10===e?3:13===e?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let n=1;for(;n<=i;)if(e<t[3*n])n*=2;else{if(!(e>t[3*n+1]))return t[3*n+2];n=2*n+1}return 0}}function Xc(e,t){if(0===e)return 0;const i=function(e,t){let i=Ac(t,e);e-=Qc(i);for(;Jc(i)||65039===i||8419===i;){if(0===e)return;i=Ac(t,e),e-=Qc(i)}if(!Uc(i))return;if(e>=0){const i=Ac(t,e);8205===i&&(e-=Qc(i))}return e}(e,t);if(void 0!==i)return i;return e-=Qc(Ac(t,e))}function Qc(e){return e>=65536?2:1}function Jc(e){return 127995<=e&&e<=127999}var eh,th;Yc._INSTANCE=null;class ih{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}class nh{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(46===this._value.charCodeAt(this._to)){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?yc(e,this._value,0,e.length,this._from,this._to):wc(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class rh{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?yc(e,this._value,0,e.length,this._from,this._to):wc(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class sh{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new rh(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return _c(e,this._value.scheme);if(2===this._states[this._stateIdx])return _c(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return vc(e,this._value.query);if(5===this._states[this._stateIdx])return vc(e,this._value.fragment);throw new Error}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}}class oh{isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class ah{constructor(e){this._iter=e}static forUris(e=(()=>!1)){return new ah(new sh(e))}static forStrings(){return new ah(new ih)}static forConfigKeys(){return new ah(new nh)}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let n;for(this._root||(this._root=new oh,this._root.segment=i.value()),n=this._root;;){const e=i.cmp(n.segment);if(e>0)n.left||(n.left=new oh,n.left.segment=i.value()),n=n.left;else if(e<0)n.right||(n.right=new oh,n.right.segment=i.value()),n=n.right;else{if(!i.hasNext())break;i.next(),n.mid||(n.mid=new oh,n.mid.segment=i.value()),n=n.mid}}const r=n.value;return n.value=t,n.key=e,r}get(e){var t;return null===(t=this._getNode(e))||void 0===t?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),i=i.mid}}return i}has(e){const t=this._getNode(e);return!(void 0===(null==t?void 0:t.value)&&void 0===(null==t?void 0:t.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),n=[];let r=this._root;for(;r;){const e=i.cmp(r.segment);if(e>0)n.push([1,r]),r=r.left;else if(e<0)n.push([-1,r]),r=r.right;else{if(!i.hasNext()){for(t?(r.left=void 0,r.mid=void 0,r.right=void 0):r.value=void 0;n.length>0&&r.isEmpty();){let[e,t]=n.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}r=t}break}i.next(),n.push([0,r]),r=r.mid}}}findSubstr(e){const t=this._iter.reset(e);let i,n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),i=n.value||i,n=n.mid}}return n&&n.value||i}findSuperstr(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())return i.mid?this._entries(i.mid):void 0;t.next(),i=i.mid}}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e,t=0){t>5e3?console.log("potential CYCLE detected",(new Error).stack):e&&(yield*this._entries(e.left,t++),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid,t++),yield*this._entries(e.right,t++))}}class lh{constructor(e,t){this[eh]="ResourceMap",e instanceof lh?(this.map=new Map(e.map),this.toKey=null!=t?t:lh.defaultToKey):(this.map=new Map,this.toKey=null!=e?e:lh.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),t),this}get(e){return this.map.get(this.toKey(e))}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){void 0!==t&&(e=e.bind(t));for(let[t,i]of this.map)e(i,uo.parse(t),this)}values(){return this.map.values()}*keys(){for(let e of this.map.keys())yield uo.parse(e)}*entries(){for(let e of this.map.entries())yield[uo.parse(e[0]),e[1]]}*[(eh=Symbol.toStringTag,Symbol.iterator)](){for(let e of this.map)yield[uo.parse(e[0]),e[1]]}}lh.defaultToKey=e=>e.toString();class ch{constructor(){this[th]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return 0!==t&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,0!==i&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:default:this.addItemLast(n)}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:i.key,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:i.value,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:[i.key,i.value],done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}[(th=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i,i.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(2===t){if(e===this._tail)return;const t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i,i.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,i)=>{e.push([i,t])})),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class hh extends ch{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}const uh="undefined"!=typeof Buffer,dh="undefined"!=typeof TextDecoder;let fh;class ph{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return uh&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new ph(e)}toString(){return uh?this.buffer.toString():dh?(fh||(fh=new TextDecoder),fh.decode(this.buffer)):function(e){const t=e.byteLength,i=[];let n=0;for(;n<t;){const r=e[n];let s;if(s=r>=240&&n+3<t?(7&e[n++])<<18>>>0|(63&e[n++])<<12>>>0|(63&e[n++])<<6>>>0|(63&e[n++])<<0>>>0:r>=224&&n+2<t?(15&e[n++])<<12>>>0|(63&e[n++])<<6>>>0|(63&e[n++])<<0>>>0:r>=192&&n+1<t?(31&e[n++])<<6>>>0|(63&e[n++])<<0>>>0:e[n++],s>=0&&s<=55295||s>=57344&&s<=65535)i.push(String.fromCharCode(s));else if(s>=65536&&s<=1114111){const e=s-65536,t=55296+((1047552&e)>>>10),n=56320+((1023&e)>>>0);i.push(String.fromCharCode(t)),i.push(String.fromCharCode(n))}else i.push(String.fromCharCode(65533))}return i.join("")}(this.buffer)}}function gh(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function mh(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t}function bh(e,t){return e[t]*Math.pow(2,24)+e[t+1]*Math.pow(2,16)+e[t+2]*Math.pow(2,8)+e[t+3]}function vh(e,t,i){e[i+3]=t,t>>>=8,e[i+2]=t,t>>>=8,e[i+1]=t,t>>>=8,e[i]=t}function yh(e,t){return e[t]}function _h(e,t,i){e[i]=t}function wh(e){let t=JSON.parse(e);return t=Sh(t),t}function Sh(e,t=0){if(!e||t>200)return e;if("object"==typeof e){switch(e.$mid){case 1:return uo.revive(e);case 2:return new RegExp(e.source,e.flags)}if(e instanceof ph||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=Sh(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=Sh(e[i],t+1))}return e}function Ch(e){return-1===e.indexOf("/")&&(e=function(e){return e.replace(/[\\/]/g,Ys.sep)}(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function xh(e){return vo(e,!0)}const kh=new class{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:vc(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t||!(!e||!t)&&this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return uo.joinPath(e,...t)}basenameOrAuthority(e){return Eh(e)||e.authority}basename(e){return Ys.basename(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===il.file?t=uo.file(eo(xh(e))).path:(t=Ys.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===il.file?uo.file(Xs(xh(e))).path:Ys.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===il.file){const i=uo.file(Qs(xh(e),t));return e.with({authority:i.authority,path:i.path})}return t=Ch(t),e.with({path:Ys.resolve(e.path,t)})}}((()=>!1)),Eh=(kh.isEqual.bind(kh),kh.basenameOrAuthority.bind(kh),kh.basename.bind(kh)),Th=(kh.dirname.bind(kh),kh.joinPath.bind(kh),kh.normalizePath.bind(kh));kh.resolvePath.bind(kh);var Lh;function Nh(e){return"string"==typeof e}function Mh(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function Oh(e){return"number"==typeof e&&!isNaN(e)}function Dh(e){return!0===e||!1===e}function Ih(e){return void 0===e}function Ah(e){return Ih(e)||null===e}function Ph(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function Rh(e){return"function"==typeof e}function Bh(e,t){if(Nh(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(Rh(t)){try{if(e instanceof t)return}catch(e){}if(!Ah(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Fh(e){const t=[];for(const i of function(e){let t=[],i=Object.getPrototypeOf(e);for(;Object.prototype!==i;)t=t.concat(Object.getOwnPropertyNames(i)),i=Object.getPrototypeOf(i);return t}(e))"function"==typeof e[i]&&t.push(i);return t}function Wh(e,t){const i=e=>function(){const i=Array.prototype.slice.call(arguments,0);return t(e,i)};let n={};for(const t of e)n[t]=i(t);return n}function Vh(e){return null===e?void 0:e}!function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach((e=>{const[t,n]=e.split(":");t&&n&&i.set(t,n)}));const n=t.path.substring(0,t.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}}(Lh||(Lh={}));const zh=ga("commandService"),Hh=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new ms,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if("string"==typeof e){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.description){const t=[];for(let i of e.description.args)t.push(i.constraint);const i=e.handler;e.handler=function(e,...n){return function(e,t){const i=Math.min(e.length,t.length);for(let n=0;n<i;n++)Bh(e[n],t[n])}(n,t),i(e,...n)}}const{id:i}=e;let n=this._commands.get(i);n||(n=new us,this._commands.set(i,n));let r=n.unshift(e),s=ss((()=>{r();const e=this._commands.get(i);(null==e?void 0:e.isEmpty())&&this._commands.delete(i)}));return this._onDidRegisterCommand.fire(i),s}registerCommandAlias(e,t){return Hh.registerCommand(e,((e,...i)=>e.get(zh).executeCommand(t,...i)))}getCommand(e){const t=this._commands.get(e);if(t&&!t.isEmpty())return Qr.first(t)}getCommands(){const e=new Map;for(const t of this._commands.keys()){const i=this.getCommand(t);i&&e.set(t,i)}return e}};var jh;Hh.registerCommand("noop",(()=>{})),function(e){e[e.API=0]="API",e[e.USER=1]="USER"}(jh||(jh={}));var Uh=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const Gh=ga("openerService");Object.freeze({_serviceBrand:void 0,registerOpener:()=>as.None,registerValidator:()=>as.None,registerExternalUriResolver:()=>as.None,setDefaultExternalOpener(){},registerExternalOpener:()=>as.None,open(){return Uh(this,void 0,void 0,(function*(){return!1}))},resolveExternalUri(e){return Uh(this,void 0,void 0,(function*(){return{resolved:e,dispose(){}}}))}});function Kh(e,t){return uo.isUri(e)?kc(e.scheme,t):Tc(e,t+":")}var $h=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},qh=function(e,t){return function(i,n){t(i,n,e)}},Zh=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};let Yh=class{constructor(e){this._commandService=e}open(e,t){return Zh(this,void 0,void 0,(function*(){if(!Kh(e,il.command))return!1;if(!(null==t?void 0:t.allowCommands))return!0;"string"==typeof e&&(e=uo.parse(e));let i=[];try{i=wh(decodeURIComponent(e.query))}catch(t){try{i=wh(e.query)}catch(e){}}return Array.isArray(i)||(i=[i]),yield this._commandService.executeCommand(e.path,...i),!0}))}};Yh=$h([qh(0,zh)],Yh);let Xh=class{constructor(e){this._editorService=e}open(e,t){return Zh(this,void 0,void 0,(function*(){let i;"string"==typeof e&&(e=uo.parse(e));const n=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return n&&(i={startLineNumber:parseInt(n[1]),startColumn:n[2]?parseInt(n[2]):1},e=e.with({fragment:""})),e.scheme===il.file&&(e=Th(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:i,context:(null==t?void 0:t.fromUserGesture)?jh.USER:jh.API},null==t?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),null==t?void 0:t.openToSide),!0}))}};Xh=$h([qh(0,ba)],Xh);let Qh=class{constructor(e,t){this._openers=new us,this._validators=new us,this._resolvers=new us,this._resolvedUriTargets=new lh((e=>e.with({path:null,fragment:null,query:null}).toString())),this._externalOpeners=new us,this._defaultExternalOpener={openExternal:e=>Zh(this,void 0,void 0,(function*(){return Kh(e,il.http)||Kh(e,il.https)?nc(e):window.location.href=e,!0}))},this._openers.push({open:(e,t)=>Zh(this,void 0,void 0,(function*(){return!!((null==t?void 0:t.openExternal)||Kh(e,il.mailto)||Kh(e,il.http)||Kh(e,il.https))&&(yield this._doOpenExternal(e,t),!0)}))}),this._openers.push(new Yh(t)),this._openers.push(new Xh(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var i;return Zh(this,void 0,void 0,(function*(){const n="string"==typeof e?uo.parse(e):e,r=null!==(i=this._resolvedUriTargets.get(n))&&void 0!==i?i:e;for(const e of this._validators)if(!(yield e.shouldOpen(r)))return!1;for(const i of this._openers){if(yield i.open(e,t))return!0}return!1}))}resolveExternalUri(e,t){return Zh(this,void 0,void 0,(function*(){for(const i of this._resolvers)try{const n=yield i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch(e){}throw new Error("Could not resolve external URI: "+e.toString())}))}_doOpenExternal(e,t){return Zh(this,void 0,void 0,(function*(){const i="string"==typeof e?uo.parse(e):e;let n,r;try{n=(yield this.resolveExternalUri(i,t)).resolved}catch(e){n=i}if(r="string"==typeof e&&i.toString()===n.toString()?e:encodeURI(n.toString(!0)),null==t?void 0:t.allowContributedOpeners){const e="string"==typeof(null==t?void 0:t.allowContributedOpeners)?null==t?void 0:t.allowContributedOpeners:void 0;for(const t of this._externalOpeners){if(yield t.openExternal(r,{sourceUri:i,preferredOpenerId:e},ws.None))return!0}}return this._defaultExternalOpener.openExternal(r,{sourceUri:i},ws.None)}))}dispose(){this._validators.clear()}};function Jh(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function eu(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach((i=>{e[i]&&"object"==typeof e[i]?t[i]=eu(e[i]):t[i]=e[i]})),t}Qh=$h([qh(0,ba),qh(1,zh)],Qh);const tu=Object.prototype.hasOwnProperty;function iu(e,t,i=!0){return Mh(e)?(Mh(t)&&Object.keys(t).forEach((n=>{n in e?i&&(Mh(e[n])&&Mh(t[n])?iu(e[n],t[n],i):e[n]=t[n]):e[n]=t[n]})),e):t}function nu(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let i,n;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!nu(e[i],t[i]))return!1}else{const r=[];for(n in e)r.push(n);r.sort();const s=[];for(n in t)s.push(n);if(s.sort(),!nu(r,s))return!1;for(i=0;i<r.length;i++)if(!nu(e[r[i]],t[r[i]]))return!1}return!0}function ru(e,t,i){const n=t(e);return void 0===n?i:n}const su={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class ou extends as{constructor(e,t={}){super(),this._onDidUpdate=this._register(new ms),this._editor=e,this._options=iu(t,su,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose((()=>this.dispose()))),this._register(this._editor.onDidUpdateDiff((()=>this._onDiffUpdated()))),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition((e=>{this.ignoreSelectionChange||(this.nextIdx=-1)}))),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel((e=>{this.revealFirst=!0}))),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&null!==this._editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach((e=>{!this._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach((e=>{this.ranges.push({rhs:!0,range:new xo(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})})):this.ranges.push({rhs:!0,range:new xo(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber,1)})})),this.ranges.sort(((e,t)=>e.range.getStartPosition().isBeforeOrEqual(t.range.getStartPosition())?-1:t.range.getStartPosition().isBeforeOrEqual(e.range.getStartPosition())?1:0)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,i=this._editor.getPosition();if(i){for(let n=0,r=this.ranges.length;n<r&&!t;n++){let r=this.ranges[n].range;i.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=n+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0}_move(e,t){if(Jh(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;-1===this.nextIdx?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let i=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let e=i.range.getStartPosition();this._editor.setPosition(e),this._editor.revealPositionInCenter(e,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}const au=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new ms,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},lu=Xn?1.5:1.35;class cu{constructor(e){this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=0|e.lineHeight,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,i,n){const r=e.get(39),s=e.get(43),o=e.get(42),a=e.get(41),l=e.get(56),c=e.get(53);return cu._create(r,s,o,a,l,c,t,i,n)}static _create(e,t,i,n,r,s,o,a,l){0===r?r=Math.round(lu*i):r<8&&(r=8);const c=1+(l?0:.1*au.getZoomLevel());return new cu({zoomLevel:o,pixelRatio:a,fontFamily:e,fontWeight:t,fontSize:i*=c,fontFeatureSettings:n,lineHeight:r*=c,letterSpacing:s})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(){return/[,"']/.test(this.fontFamily)?this.fontFamily:/[+ ]/.test(this.fontFamily)?`"${this.fontFamily}"`:this.fontFamily}}class hu extends cu{constructor(e,t){super(e),this.version=1,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}const uu={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var du,fu;!function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(du||(du={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(fu||(fu={}));class pu{constructor(e){this.tabSize=Math.max(1,0|e.tabSize),this.indentSize=0|e.tabSize,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=0|e.defaultEOL,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace)}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class gu{constructor(e,t){this.range=e,this.matches=t}}class mu{constructor(e,t,i,n,r,s){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=r,this._isTracked=s}}class bu{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function vu(e,t){return(t<<5)-t+e|0}function yu(e,t){t=vu(149417,t);for(let i=0,n=e.length;i<n;i++)t=vu(e.charCodeAt(i),t);return t}function _u(e,t,i=32){const n=i-t;return(e<<t|(~((1<<n)-1)&e)>>>n)>>>0}function wu(e,t=0,i=e.byteLength,n=0){for(let r=0;r<i;r++)e[t+r]=n}function Su(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join(""):function(e,t,i="0"){for(;e.length<t;)e=i+e;return e}((e>>>0).toString(16),t/4)}class Cu{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(0===t)return;const i=this._buff;let n,r,s=this._buffLen,o=this._leftoverHighSurrogate;for(0!==o?(n=o,r=-1,o=0):(n=e.charCodeAt(0),r=0);;){let a=n;if(Mc(n)){if(!(r+1<t)){o=n;break}{const t=e.charCodeAt(r+1);Oc(t)?(r++,a=Dc(n,t)):a=65533}}else Oc(n)&&(a=65533);if(s=this._push(i,s,a),r++,!(r<t))break;n=e.charCodeAt(r)}this._buffLen=s,this._leftoverHighSurrogate=o}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(1984&i)>>>6,e[t++]=128|(63&i)>>>0):i<65536?(e[t++]=224|(61440&i)>>>12,e[t++]=128|(4032&i)>>>6,e[t++]=128|(63&i)>>>0):(e[t++]=240|(1835008&i)>>>18,e[t++]=128|(258048&i)>>>12,e[t++]=128|(4032&i)>>>6,e[t++]=128|(63&i)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Su(this._h0)+Su(this._h1)+Su(this._h2)+Su(this._h3)+Su(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,wu(this._buff,this._buffLen),this._buffLen>56&&(this._step(),wu(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=Cu._bigBlock32,t=this._buffDV;for(let i=0;i<64;i+=4)e.setUint32(i,t.getUint32(i,!1),!1);for(let t=64;t<320;t+=4)e.setUint32(t,_u(e.getUint32(t-12,!1)^e.getUint32(t-32,!1)^e.getUint32(t-56,!1)^e.getUint32(t-64,!1),1),!1);let i,n,r,s=this._h0,o=this._h1,a=this._h2,l=this._h3,c=this._h4;for(let t=0;t<80;t++)t<20?(i=o&a|~o&l,n=1518500249):t<40?(i=o^a^l,n=1859775393):t<60?(i=o&a|o&l|a&l,n=2400959708):(i=o^a^l,n=3395469782),r=_u(s,5)+i+c+n+e.getUint32(4*t,!1)&4294967295,c=l,l=a,a=_u(o,30),o=s,s=r;this._h0=this._h0+s&4294967295,this._h1=this._h1+o&4294967295,this._h2=this._h2+a&4294967295,this._h3=this._h3+l&4294967295,this._h4=this._h4+c&4294967295}}Cu._bigBlock32=new DataView(new ArrayBuffer(320));const xu="**",ku="[/\\\\]",Eu="[^/\\\\]",Tu=/\//g;function Lu(e){switch(e){case 0:return"";case 1:return"[^/\\\\]*?";default:return"(?:[/\\\\]|[^/\\\\]+[/\\\\]|[/\\\\][^/\\\\]+)*?"}}function Nu(e,t){if(!e)return[];const i=[];let n=!1,r=!1,s="";for(const o of e){switch(o){case t:if(!n&&!r){i.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":r=!0;break;case"]":r=!1}s+=o}return s&&i.push(s),i}function Mu(e){if(!e)return"";let t="";const i=Nu(e,"/");if(i.every((e=>e===xu)))t=".*";else{let e=!1;i.forEach(((n,r)=>{if(n===xu)return void(e||(t+=Lu(2),e=!0));let s=!1,o="",a=!1,l="";for(const e of n)if("}"!==e&&s)o+=e;else if(!a||"]"===e&&l)switch(e){case"{":s=!0;continue;case"[":a=!0;continue;case"}":const i=`(?:${Nu(o,",").map((e=>Mu(e))).join("|")})`;t+=i,s=!1,o="";break;case"]":t+="["+l+"]",a=!1,l="";break;case"?":t+=Eu;continue;case"*":t+=Lu(1);continue;default:t+=cc(e)}else{let t;t="-"===e?e:"^"!==e&&"!"!==e||l?"/"===e?"":cc(e):"^",l+=t}r<i.length-1&&(i[r+1]!==xu||r+2<i.length)&&(t+=ku),e=!1}))}return t}const Ou=/^\*\*\/\*\.[\w\.-]+$/,Du=/^\*\*\/([\w\.-]+)\/?$/,Iu=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,Au=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,Pu=/^\*\*((\/[\w\.-]+)+)\/?$/,Ru=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Bu=new hh(1e4),Fu=function(){return!1},Wu=function(){return null};function Vu(e,t){if(!e)return Wu;let i;i="string"!=typeof e?e.pattern:e,i=i.trim();const n=`${i}_${!!t.trimForExclusions}`;let r,s=Bu.get(n);if(s)return zu(s,e);if(Ou.test(i)){const e=i.substr(4);s=function(t,n){return"string"==typeof t&&t.endsWith(e)?i:null}}else s=(r=Du.exec(Hu(i,t)))?function(e,t){const i=`/${e}`,n=`\\${e}`,r=function(r,s){return"string"!=typeof r?null:s?s===e?t:null:r===e||r.endsWith(i)||r.endsWith(n)?t:null},s=[e];return r.basenames=s,r.patterns=[t],r.allBasenames=s,r}(r[1],i):(t.trimForExclusions?Au:Iu).test(i)?function(e,t){const i=Gu(e.slice(1,-1).split(",").map((e=>Vu(e,t))).filter((e=>e!==Wu)),e),n=i.length;if(!n)return Wu;if(1===n)return i[0];const r=function(t,n){for(let r=0,s=i.length;r<s;r++)if(i[r](t,n))return e;return null},s=i.find((e=>!!e.allBasenames));s&&(r.allBasenames=s.allBasenames);const o=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);o.length&&(r.allPaths=o);return r}(i,t):(r=Pu.exec(Hu(i,t)))?ju(r[1].substr(1),i,!0):(r=Ru.exec(Hu(i,t)))?ju(r[1],i,!1):function(e){try{const t=new RegExp(`^${Mu(e)}$`);return function(i){return t.lastIndex=0,"string"==typeof i&&t.test(i)?e:null}}catch(e){return Wu}}(i);return Bu.set(n,s),zu(s,e)}function zu(e,t){return"string"==typeof t?e:function(i,n){return function(e,t,i,n=no){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(i){if(!Tc(e,t))return!1;if(t.length===e.length)return!0;let i=t.length;return t.charAt(t.length-1)===n&&i--,e.charAt(i)===n}return t.charAt(t.length-1)!==n&&(t+=n),0===e.indexOf(t)}(i,t.base)?e(Js(t.base,i),n):null}}function Hu(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function ju(e,t,i){const n=no===Ys.sep,r=n?e:e.replace(Tu,no),s=no+r,o=Ys.sep+e,a=i?function(i,a){return"string"!=typeof i||i!==r&&!i.endsWith(s)&&(n||i!==e&&!i.endsWith(o))?null:t}:function(i,s){return"string"!=typeof i||i!==r&&(n||i!==e)?null:t};return a.allPaths=[(i?"*/":"./")+e],a}function Uu(e,t,i){return!(!e||"string"!=typeof t)&&function(e,t={}){if(!e)return Fu;if("string"==typeof e||function(e){const t=e;return t&&"string"==typeof t.base&&"string"==typeof t.pattern}(e)){const i=Vu(e,t);if(i===Wu)return Fu;const n=function(e,t){return!!i(e,t)};return i.allBasenames&&(n.allBasenames=i.allBasenames),i.allPaths&&(n.allPaths=i.allPaths),n}return function(e,t){const i=Gu(Object.getOwnPropertyNames(e).map((i=>function(e,t,i){if(!1===t)return Wu;const n=Vu(e,i);if(n===Wu)return Wu;if("boolean"==typeof t)return n;if(t){const i=t.when;if("string"==typeof i){const t=(t,r,s,o)=>{if(!o||!n(t,r))return null;const a=o(i.replace("$(basename)",s));return(l=a)&&"function"==typeof l.then?a.then((t=>t?e:null)):a?e:null;var l};return t.requiresSiblings=!0,t}}return n}(i,e[i],t))).filter((e=>e!==Wu))),n=i.length;if(!n)return Wu;if(!i.some((e=>!!e.requiresSiblings))){if(1===n)return i[0];const e=function(e,t){for(let n=0,r=i.length;n<r;n++){const r=i[n](e,t);if(r)return r}return null},t=i.find((e=>!!e.allBasenames));t&&(e.allBasenames=t.allBasenames);const r=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);return r.length&&(e.allPaths=r),e}const r=function(e,t,n){let r;for(let s=0,o=i.length;s<o;s++){const o=i[s];o.requiresSiblings&&n&&(t||(t=to(e)),r||(r=t.substr(0,t.length-io(e).length)));const a=o(e,t,r,n);if(a)return a}return null},s=i.find((e=>!!e.allBasenames));s&&(r.allBasenames=s.allBasenames);const o=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);o.length&&(r.allPaths=o);return r}(e,t)}(e)(t,void 0,i)}function Gu(e,t){const i=e.filter((e=>!!e.basenames));if(i.length<2)return e;const n=i.reduce(((e,t)=>{const i=t.basenames;return i?e.concat(i):e}),[]);let r;if(t){r=[];for(let e=0,i=n.length;e<i;e++)r.push(t)}else r=i.reduce(((e,t)=>{const i=t.patterns;return i?e.concat(i):e}),[]);const s=function(e,t){if("string"!=typeof e)return null;if(!t){let i;for(i=e.length;i>0;i--){const t=e.charCodeAt(i-1);if(47===t||92===t)break}t=e.substr(i)}const i=n.indexOf(t);return-1!==i?r[i]:null};s.basenames=n,s.patterns=r,s.allBasenames=n;const o=e.filter((e=>!e.basenames));return o.push(s),o}function Ku(e,t,i,n){if(Array.isArray(e)){let r=0;for(const s of e){const e=Ku(s,t,i,n);if(10===e)return e;e>r&&(r=e)}return r}if("string"==typeof e)return n?"*"===e?5:e===i?10:0:0;if(e){const{language:r,pattern:s,scheme:o,hasAccessToAllModels:a}=e;if(!n&&!a)return 0;let l=0;if(o)if(o===t.scheme)l=10;else{if("*"!==o)return 0;l=5}if(r)if(r===i)l=10;else{if("*"!==r)return 0;l=Math.max(l,5)}if(s){let e;if(e="string"==typeof s?s:Object.assign(Object.assign({},s),{base:Xs(s.base)}),e!==t.fsPath&&!Uu(e,t.fsPath))return 0;l=10}return l}return 0}const $u=ga("modelService");function qu(e){return!e.isTooLargeForSyncing()&&!e.isForSimpleWidget}function Zu(e){return"string"!=typeof e&&(Array.isArray(e)?e.every(Zu):!!e.exclusive)}class Yu{constructor(){this._clock=0,this._entries=[],this._onDidChange=new ms}get onDidChange(){return this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),ss((()=>{if(i){let e=this._entries.indexOf(i);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}}))}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let e of this._entries)e._score>0&&t.push(e.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,(e=>t.push(e.provider))),t}orderedGroups(e){const t=[];let i,n;return this._orderedForEach(e,(e=>{i&&n===e._score?i.push(e.provider):(n=e._score,i=[e.provider],t.push(i))})),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(const e of this._entries)e._score>0&&t(e)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageIdentifier().language};if(!this._lastCandidate||this._lastCandidate.language!==t.language||this._lastCandidate.uri!==t.uri){this._lastCandidate=t;for(let t of this._entries)if(t._score=Ku(t.selector,e.uri,e.getLanguageIdentifier().language,qu(e)),Zu(t.selector)&&t._score>0){for(let e of this._entries)e._score=0;t._score=1e3;break}this._entries.sort(Yu._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}const Xu=new class{constructor(){this._icons=new Map,this._onDidRegister=new ms}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}},Qu=Xu;function Ju(e,t){return new ed(e,t)}class ed{constructor(e,t,i){this.id=e,this.definition=t,this.description=i,Xu.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}var td;!function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9\\-]+",e.iconModifierExpression="~[A-Za-z]+";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(e){if(e instanceof ed)return["codicon","codicon-"+e.id];const n=t.exec(e.id);if(!n)return i(ed.error);let[,r,s]=n;const o=["codicon","codicon-"+r];return s&&o.push("codicon-modifier-"+s.substr(1)),o}e.asClassNameArray=i,e.asClassName=function(e){return i(e).join(" ")},e.asCSSSelector=function(e){return"."+i(e).join(".")}}(td||(td={})),function(e){e.add=new e("add",{fontCharacter:"\\ea60"}),e.plus=new e("plus",{fontCharacter:"\\ea60"}),e.gistNew=new e("gist-new",{fontCharacter:"\\ea60"}),e.repoCreate=new e("repo-create",{fontCharacter:"\\ea60"}),e.lightbulb=new e("lightbulb",{fontCharacter:"\\ea61"}),e.lightBulb=new e("light-bulb",{fontCharacter:"\\ea61"}),e.repo=new e("repo",{fontCharacter:"\\ea62"}),e.repoDelete=new e("repo-delete",{fontCharacter:"\\ea62"}),e.gistFork=new e("gist-fork",{fontCharacter:"\\ea63"}),e.repoForked=new e("repo-forked",{fontCharacter:"\\ea63"}),e.gitPullRequest=new e("git-pull-request",{fontCharacter:"\\ea64"}),e.gitPullRequestAbandoned=new e("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),e.recordKeys=new e("record-keys",{fontCharacter:"\\ea65"}),e.keyboard=new e("keyboard",{fontCharacter:"\\ea65"}),e.tag=new e("tag",{fontCharacter:"\\ea66"}),e.tagAdd=new e("tag-add",{fontCharacter:"\\ea66"}),e.tagRemove=new e("tag-remove",{fontCharacter:"\\ea66"}),e.person=new e("person",{fontCharacter:"\\ea67"}),e.personFollow=new e("person-follow",{fontCharacter:"\\ea67"}),e.personOutline=new e("person-outline",{fontCharacter:"\\ea67"}),e.personFilled=new e("person-filled",{fontCharacter:"\\ea67"}),e.gitBranch=new e("git-branch",{fontCharacter:"\\ea68"}),e.gitBranchCreate=new e("git-branch-create",{fontCharacter:"\\ea68"}),e.gitBranchDelete=new e("git-branch-delete",{fontCharacter:"\\ea68"}),e.sourceControl=new e("source-control",{fontCharacter:"\\ea68"}),e.mirror=new e("mirror",{fontCharacter:"\\ea69"}),e.mirrorPublic=new e("mirror-public",{fontCharacter:"\\ea69"}),e.star=new e("star",{fontCharacter:"\\ea6a"}),e.starAdd=new e("star-add",{fontCharacter:"\\ea6a"}),e.starDelete=new e("star-delete",{fontCharacter:"\\ea6a"}),e.starEmpty=new e("star-empty",{fontCharacter:"\\ea6a"}),e.comment=new e("comment",{fontCharacter:"\\ea6b"}),e.commentAdd=new e("comment-add",{fontCharacter:"\\ea6b"}),e.alert=new e("alert",{fontCharacter:"\\ea6c"}),e.warning=new e("warning",{fontCharacter:"\\ea6c"}),e.search=new e("search",{fontCharacter:"\\ea6d"}),e.searchSave=new e("search-save",{fontCharacter:"\\ea6d"}),e.logOut=new e("log-out",{fontCharacter:"\\ea6e"}),e.signOut=new e("sign-out",{fontCharacter:"\\ea6e"}),e.logIn=new e("log-in",{fontCharacter:"\\ea6f"}),e.signIn=new e("sign-in",{fontCharacter:"\\ea6f"}),e.eye=new e("eye",{fontCharacter:"\\ea70"}),e.eyeUnwatch=new e("eye-unwatch",{fontCharacter:"\\ea70"}),e.eyeWatch=new e("eye-watch",{fontCharacter:"\\ea70"}),e.circleFilled=new e("circle-filled",{fontCharacter:"\\ea71"}),e.primitiveDot=new e("primitive-dot",{fontCharacter:"\\ea71"}),e.closeDirty=new e("close-dirty",{fontCharacter:"\\ea71"}),e.debugBreakpoint=new e("debug-breakpoint",{fontCharacter:"\\ea71"}),e.debugBreakpointDisabled=new e("debug-breakpoint-disabled",{fontCharacter:"\\ea71"}),e.debugHint=new e("debug-hint",{fontCharacter:"\\ea71"}),e.primitiveSquare=new e("primitive-square",{fontCharacter:"\\ea72"}),e.edit=new e("edit",{fontCharacter:"\\ea73"}),e.pencil=new e("pencil",{fontCharacter:"\\ea73"}),e.info=new e("info",{fontCharacter:"\\ea74"}),e.issueOpened=new e("issue-opened",{fontCharacter:"\\ea74"}),e.gistPrivate=new e("gist-private",{fontCharacter:"\\ea75"}),e.gitForkPrivate=new e("git-fork-private",{fontCharacter:"\\ea75"}),e.lock=new e("lock",{fontCharacter:"\\ea75"}),e.mirrorPrivate=new e("mirror-private",{fontCharacter:"\\ea75"}),e.close=new e("close",{fontCharacter:"\\ea76"}),e.removeClose=new e("remove-close",{fontCharacter:"\\ea76"}),e.x=new e("x",{fontCharacter:"\\ea76"}),e.repoSync=new e("repo-sync",{fontCharacter:"\\ea77"}),e.sync=new e("sync",{fontCharacter:"\\ea77"}),e.clone=new e("clone",{fontCharacter:"\\ea78"}),e.desktopDownload=new e("desktop-download",{fontCharacter:"\\ea78"}),e.beaker=new e("beaker",{fontCharacter:"\\ea79"}),e.microscope=new e("microscope",{fontCharacter:"\\ea79"}),e.vm=new e("vm",{fontCharacter:"\\ea7a"}),e.deviceDesktop=new e("device-desktop",{fontCharacter:"\\ea7a"}),e.file=new e("file",{fontCharacter:"\\ea7b"}),e.fileText=new e("file-text",{fontCharacter:"\\ea7b"}),e.more=new e("more",{fontCharacter:"\\ea7c"}),e.ellipsis=new e("ellipsis",{fontCharacter:"\\ea7c"}),e.kebabHorizontal=new e("kebab-horizontal",{fontCharacter:"\\ea7c"}),e.mailReply=new e("mail-reply",{fontCharacter:"\\ea7d"}),e.reply=new e("reply",{fontCharacter:"\\ea7d"}),e.organization=new e("organization",{fontCharacter:"\\ea7e"}),e.organizationFilled=new e("organization-filled",{fontCharacter:"\\ea7e"}),e.organizationOutline=new e("organization-outline",{fontCharacter:"\\ea7e"}),e.newFile=new e("new-file",{fontCharacter:"\\ea7f"}),e.fileAdd=new e("file-add",{fontCharacter:"\\ea7f"}),e.newFolder=new e("new-folder",{fontCharacter:"\\ea80"}),e.fileDirectoryCreate=new e("file-directory-create",{fontCharacter:"\\ea80"}),e.trash=new e("trash",{fontCharacter:"\\ea81"}),e.trashcan=new e("trashcan",{fontCharacter:"\\ea81"}),e.history=new e("history",{fontCharacter:"\\ea82"}),e.clock=new e("clock",{fontCharacter:"\\ea82"}),e.folder=new e("folder",{fontCharacter:"\\ea83"}),e.fileDirectory=new e("file-directory",{fontCharacter:"\\ea83"}),e.symbolFolder=new e("symbol-folder",{fontCharacter:"\\ea83"}),e.logoGithub=new e("logo-github",{fontCharacter:"\\ea84"}),e.markGithub=new e("mark-github",{fontCharacter:"\\ea84"}),e.github=new e("github",{fontCharacter:"\\ea84"}),e.terminal=new e("terminal",{fontCharacter:"\\ea85"}),e.console=new e("console",{fontCharacter:"\\ea85"}),e.repl=new e("repl",{fontCharacter:"\\ea85"}),e.zap=new e("zap",{fontCharacter:"\\ea86"}),e.symbolEvent=new e("symbol-event",{fontCharacter:"\\ea86"}),e.error=new e("error",{fontCharacter:"\\ea87"}),e.stop=new e("stop",{fontCharacter:"\\ea87"}),e.variable=new e("variable",{fontCharacter:"\\ea88"}),e.symbolVariable=new e("symbol-variable",{fontCharacter:"\\ea88"}),e.array=new e("array",{fontCharacter:"\\ea8a"}),e.symbolArray=new e("symbol-array",{fontCharacter:"\\ea8a"}),e.symbolModule=new e("symbol-module",{fontCharacter:"\\ea8b"}),e.symbolPackage=new e("symbol-package",{fontCharacter:"\\ea8b"}),e.symbolNamespace=new e("symbol-namespace",{fontCharacter:"\\ea8b"}),e.symbolObject=new e("symbol-object",{fontCharacter:"\\ea8b"}),e.symbolMethod=new e("symbol-method",{fontCharacter:"\\ea8c"}),e.symbolFunction=new e("symbol-function",{fontCharacter:"\\ea8c"}),e.symbolConstructor=new e("symbol-constructor",{fontCharacter:"\\ea8c"}),e.symbolBoolean=new e("symbol-boolean",{fontCharacter:"\\ea8f"}),e.symbolNull=new e("symbol-null",{fontCharacter:"\\ea8f"}),e.symbolNumeric=new e("symbol-numeric",{fontCharacter:"\\ea90"}),e.symbolNumber=new e("symbol-number",{fontCharacter:"\\ea90"}),e.symbolStructure=new e("symbol-structure",{fontCharacter:"\\ea91"}),e.symbolStruct=new e("symbol-struct",{fontCharacter:"\\ea91"}),e.symbolParameter=new e("symbol-parameter",{fontCharacter:"\\ea92"}),e.symbolTypeParameter=new e("symbol-type-parameter",{fontCharacter:"\\ea92"}),e.symbolKey=new e("symbol-key",{fontCharacter:"\\ea93"}),e.symbolText=new e("symbol-text",{fontCharacter:"\\ea93"}),e.symbolReference=new e("symbol-reference",{fontCharacter:"\\ea94"}),e.goToFile=new e("go-to-file",{fontCharacter:"\\ea94"}),e.symbolEnum=new e("symbol-enum",{fontCharacter:"\\ea95"}),e.symbolValue=new e("symbol-value",{fontCharacter:"\\ea95"}),e.symbolRuler=new e("symbol-ruler",{fontCharacter:"\\ea96"}),e.symbolUnit=new e("symbol-unit",{fontCharacter:"\\ea96"}),e.activateBreakpoints=new e("activate-breakpoints",{fontCharacter:"\\ea97"}),e.archive=new e("archive",{fontCharacter:"\\ea98"}),e.arrowBoth=new e("arrow-both",{fontCharacter:"\\ea99"}),e.arrowDown=new e("arrow-down",{fontCharacter:"\\ea9a"}),e.arrowLeft=new e("arrow-left",{fontCharacter:"\\ea9b"}),e.arrowRight=new e("arrow-right",{fontCharacter:"\\ea9c"}),e.arrowSmallDown=new e("arrow-small-down",{fontCharacter:"\\ea9d"}),e.arrowSmallLeft=new e("arrow-small-left",{fontCharacter:"\\ea9e"}),e.arrowSmallRight=new e("arrow-small-right",{fontCharacter:"\\ea9f"}),e.arrowSmallUp=new e("arrow-small-up",{fontCharacter:"\\eaa0"}),e.arrowUp=new e("arrow-up",{fontCharacter:"\\eaa1"}),e.bell=new e("bell",{fontCharacter:"\\eaa2"}),e.bold=new e("bold",{fontCharacter:"\\eaa3"}),e.book=new e("book",{fontCharacter:"\\eaa4"}),e.bookmark=new e("bookmark",{fontCharacter:"\\eaa5"}),e.debugBreakpointConditionalUnverified=new e("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),e.debugBreakpointConditional=new e("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),e.debugBreakpointConditionalDisabled=new e("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),e.debugBreakpointDataUnverified=new e("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),e.debugBreakpointData=new e("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),e.debugBreakpointDataDisabled=new e("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),e.debugBreakpointLogUnverified=new e("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),e.debugBreakpointLog=new e("debug-breakpoint-log",{fontCharacter:"\\eaab"}),e.debugBreakpointLogDisabled=new e("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),e.briefcase=new e("briefcase",{fontCharacter:"\\eaac"}),e.broadcast=new e("broadcast",{fontCharacter:"\\eaad"}),e.browser=new e("browser",{fontCharacter:"\\eaae"}),e.bug=new e("bug",{fontCharacter:"\\eaaf"}),e.calendar=new e("calendar",{fontCharacter:"\\eab0"}),e.caseSensitive=new e("case-sensitive",{fontCharacter:"\\eab1"}),e.check=new e("check",{fontCharacter:"\\eab2"}),e.checklist=new e("checklist",{fontCharacter:"\\eab3"}),e.chevronDown=new e("chevron-down",{fontCharacter:"\\eab4"}),e.chevronLeft=new e("chevron-left",{fontCharacter:"\\eab5"}),e.chevronRight=new e("chevron-right",{fontCharacter:"\\eab6"}),e.chevronUp=new e("chevron-up",{fontCharacter:"\\eab7"}),e.chromeClose=new e("chrome-close",{fontCharacter:"\\eab8"}),e.chromeMaximize=new e("chrome-maximize",{fontCharacter:"\\eab9"}),e.chromeMinimize=new e("chrome-minimize",{fontCharacter:"\\eaba"}),e.chromeRestore=new e("chrome-restore",{fontCharacter:"\\eabb"}),e.circleOutline=new e("circle-outline",{fontCharacter:"\\eabc"}),e.debugBreakpointUnverified=new e("debug-breakpoint-unverified",{fontCharacter:"\\eabc"}),e.circleSlash=new e("circle-slash",{fontCharacter:"\\eabd"}),e.circuitBoard=new e("circuit-board",{fontCharacter:"\\eabe"}),e.clearAll=new e("clear-all",{fontCharacter:"\\eabf"}),e.clippy=new e("clippy",{fontCharacter:"\\eac0"}),e.closeAll=new e("close-all",{fontCharacter:"\\eac1"}),e.cloudDownload=new e("cloud-download",{fontCharacter:"\\eac2"}),e.cloudUpload=new e("cloud-upload",{fontCharacter:"\\eac3"}),e.code=new e("code",{fontCharacter:"\\eac4"}),e.collapseAll=new e("collapse-all",{fontCharacter:"\\eac5"}),e.colorMode=new e("color-mode",{fontCharacter:"\\eac6"}),e.commentDiscussion=new e("comment-discussion",{fontCharacter:"\\eac7"}),e.compareChanges=new e("compare-changes",{fontCharacter:"\\eafd"}),e.creditCard=new e("credit-card",{fontCharacter:"\\eac9"}),e.dash=new e("dash",{fontCharacter:"\\eacc"}),e.dashboard=new e("dashboard",{fontCharacter:"\\eacd"}),e.database=new e("database",{fontCharacter:"\\eace"}),e.debugContinue=new e("debug-continue",{fontCharacter:"\\eacf"}),e.debugDisconnect=new e("debug-disconnect",{fontCharacter:"\\ead0"}),e.debugPause=new e("debug-pause",{fontCharacter:"\\ead1"}),e.debugRestart=new e("debug-restart",{fontCharacter:"\\ead2"}),e.debugStart=new e("debug-start",{fontCharacter:"\\ead3"}),e.debugStepInto=new e("debug-step-into",{fontCharacter:"\\ead4"}),e.debugStepOut=new e("debug-step-out",{fontCharacter:"\\ead5"}),e.debugStepOver=new e("debug-step-over",{fontCharacter:"\\ead6"}),e.debugStop=new e("debug-stop",{fontCharacter:"\\ead7"}),e.debug=new e("debug",{fontCharacter:"\\ead8"}),e.deviceCameraVideo=new e("device-camera-video",{fontCharacter:"\\ead9"}),e.deviceCamera=new e("device-camera",{fontCharacter:"\\eada"}),e.deviceMobile=new e("device-mobile",{fontCharacter:"\\eadb"}),e.diffAdded=new e("diff-added",{fontCharacter:"\\eadc"}),e.diffIgnored=new e("diff-ignored",{fontCharacter:"\\eadd"}),e.diffModified=new e("diff-modified",{fontCharacter:"\\eade"}),e.diffRemoved=new e("diff-removed",{fontCharacter:"\\eadf"}),e.diffRenamed=new e("diff-renamed",{fontCharacter:"\\eae0"}),e.diff=new e("diff",{fontCharacter:"\\eae1"}),e.discard=new e("discard",{fontCharacter:"\\eae2"}),e.editorLayout=new e("editor-layout",{fontCharacter:"\\eae3"}),e.emptyWindow=new e("empty-window",{fontCharacter:"\\eae4"}),e.exclude=new e("exclude",{fontCharacter:"\\eae5"}),e.extensions=new e("extensions",{fontCharacter:"\\eae6"}),e.eyeClosed=new e("eye-closed",{fontCharacter:"\\eae7"}),e.fileBinary=new e("file-binary",{fontCharacter:"\\eae8"}),e.fileCode=new e("file-code",{fontCharacter:"\\eae9"}),e.fileMedia=new e("file-media",{fontCharacter:"\\eaea"}),e.filePdf=new e("file-pdf",{fontCharacter:"\\eaeb"}),e.fileSubmodule=new e("file-submodule",{fontCharacter:"\\eaec"}),e.fileSymlinkDirectory=new e("file-symlink-directory",{fontCharacter:"\\eaed"}),e.fileSymlinkFile=new e("file-symlink-file",{fontCharacter:"\\eaee"}),e.fileZip=new e("file-zip",{fontCharacter:"\\eaef"}),e.files=new e("files",{fontCharacter:"\\eaf0"}),e.filter=new e("filter",{fontCharacter:"\\eaf1"}),e.flame=new e("flame",{fontCharacter:"\\eaf2"}),e.foldDown=new e("fold-down",{fontCharacter:"\\eaf3"}),e.foldUp=new e("fold-up",{fontCharacter:"\\eaf4"}),e.fold=new e("fold",{fontCharacter:"\\eaf5"}),e.folderActive=new e("folder-active",{fontCharacter:"\\eaf6"}),e.folderOpened=new e("folder-opened",{fontCharacter:"\\eaf7"}),e.gear=new e("gear",{fontCharacter:"\\eaf8"}),e.gift=new e("gift",{fontCharacter:"\\eaf9"}),e.gistSecret=new e("gist-secret",{fontCharacter:"\\eafa"}),e.gist=new e("gist",{fontCharacter:"\\eafb"}),e.gitCommit=new e("git-commit",{fontCharacter:"\\eafc"}),e.gitCompare=new e("git-compare",{fontCharacter:"\\eafd"}),e.gitMerge=new e("git-merge",{fontCharacter:"\\eafe"}),e.githubAction=new e("github-action",{fontCharacter:"\\eaff"}),e.githubAlt=new e("github-alt",{fontCharacter:"\\eb00"}),e.globe=new e("globe",{fontCharacter:"\\eb01"}),e.grabber=new e("grabber",{fontCharacter:"\\eb02"}),e.graph=new e("graph",{fontCharacter:"\\eb03"}),e.gripper=new e("gripper",{fontCharacter:"\\eb04"}),e.heart=new e("heart",{fontCharacter:"\\eb05"}),e.home=new e("home",{fontCharacter:"\\eb06"}),e.horizontalRule=new e("horizontal-rule",{fontCharacter:"\\eb07"}),e.hubot=new e("hubot",{fontCharacter:"\\eb08"}),e.inbox=new e("inbox",{fontCharacter:"\\eb09"}),e.issueClosed=new e("issue-closed",{fontCharacter:"\\eb0a"}),e.issueReopened=new e("issue-reopened",{fontCharacter:"\\eb0b"}),e.issues=new e("issues",{fontCharacter:"\\eb0c"}),e.italic=new e("italic",{fontCharacter:"\\eb0d"}),e.jersey=new e("jersey",{fontCharacter:"\\eb0e"}),e.json=new e("json",{fontCharacter:"\\eb0f"}),e.kebabVertical=new e("kebab-vertical",{fontCharacter:"\\eb10"}),e.key=new e("key",{fontCharacter:"\\eb11"}),e.law=new e("law",{fontCharacter:"\\eb12"}),e.lightbulbAutofix=new e("lightbulb-autofix",{fontCharacter:"\\eb13"}),e.linkExternal=new e("link-external",{fontCharacter:"\\eb14"}),e.link=new e("link",{fontCharacter:"\\eb15"}),e.listOrdered=new e("list-ordered",{fontCharacter:"\\eb16"}),e.listUnordered=new e("list-unordered",{fontCharacter:"\\eb17"}),e.liveShare=new e("live-share",{fontCharacter:"\\eb18"}),e.loading=new e("loading",{fontCharacter:"\\eb19"}),e.location=new e("location",{fontCharacter:"\\eb1a"}),e.mailRead=new e("mail-read",{fontCharacter:"\\eb1b"}),e.mail=new e("mail",{fontCharacter:"\\eb1c"}),e.markdown=new e("markdown",{fontCharacter:"\\eb1d"}),e.megaphone=new e("megaphone",{fontCharacter:"\\eb1e"}),e.mention=new e("mention",{fontCharacter:"\\eb1f"}),e.milestone=new e("milestone",{fontCharacter:"\\eb20"}),e.mortarBoard=new e("mortar-board",{fontCharacter:"\\eb21"}),e.move=new e("move",{fontCharacter:"\\eb22"}),e.multipleWindows=new e("multiple-windows",{fontCharacter:"\\eb23"}),e.mute=new e("mute",{fontCharacter:"\\eb24"}),e.noNewline=new e("no-newline",{fontCharacter:"\\eb25"}),e.note=new e("note",{fontCharacter:"\\eb26"}),e.octoface=new e("octoface",{fontCharacter:"\\eb27"}),e.openPreview=new e("open-preview",{fontCharacter:"\\eb28"}),e.package_=new e("package",{fontCharacter:"\\eb29"}),e.paintcan=new e("paintcan",{fontCharacter:"\\eb2a"}),e.pin=new e("pin",{fontCharacter:"\\eb2b"}),e.play=new e("play",{fontCharacter:"\\eb2c"}),e.run=new e("run",{fontCharacter:"\\eb2c"}),e.plug=new e("plug",{fontCharacter:"\\eb2d"}),e.preserveCase=new e("preserve-case",{fontCharacter:"\\eb2e"}),e.preview=new e("preview",{fontCharacter:"\\eb2f"}),e.project=new e("project",{fontCharacter:"\\eb30"}),e.pulse=new e("pulse",{fontCharacter:"\\eb31"}),e.question=new e("question",{fontCharacter:"\\eb32"}),e.quote=new e("quote",{fontCharacter:"\\eb33"}),e.radioTower=new e("radio-tower",{fontCharacter:"\\eb34"}),e.reactions=new e("reactions",{fontCharacter:"\\eb35"}),e.references=new e("references",{fontCharacter:"\\eb36"}),e.refresh=new e("refresh",{fontCharacter:"\\eb37"}),e.regex=new e("regex",{fontCharacter:"\\eb38"}),e.remoteExplorer=new e("remote-explorer",{fontCharacter:"\\eb39"}),e.remote=new e("remote",{fontCharacter:"\\eb3a"}),e.remove=new e("remove",{fontCharacter:"\\eb3b"}),e.replaceAll=new e("replace-all",{fontCharacter:"\\eb3c"}),e.replace=new e("replace",{fontCharacter:"\\eb3d"}),e.repoClone=new e("repo-clone",{fontCharacter:"\\eb3e"}),e.repoForcePush=new e("repo-force-push",{fontCharacter:"\\eb3f"}),e.repoPull=new e("repo-pull",{fontCharacter:"\\eb40"}),e.repoPush=new e("repo-push",{fontCharacter:"\\eb41"}),e.report=new e("report",{fontCharacter:"\\eb42"}),e.requestChanges=new e("request-changes",{fontCharacter:"\\eb43"}),e.rocket=new e("rocket",{fontCharacter:"\\eb44"}),e.rootFolderOpened=new e("root-folder-opened",{fontCharacter:"\\eb45"}),e.rootFolder=new e("root-folder",{fontCharacter:"\\eb46"}),e.rss=new e("rss",{fontCharacter:"\\eb47"}),e.ruby=new e("ruby",{fontCharacter:"\\eb48"}),e.saveAll=new e("save-all",{fontCharacter:"\\eb49"}),e.saveAs=new e("save-as",{fontCharacter:"\\eb4a"}),e.save=new e("save",{fontCharacter:"\\eb4b"}),e.screenFull=new e("screen-full",{fontCharacter:"\\eb4c"}),e.screenNormal=new e("screen-normal",{fontCharacter:"\\eb4d"}),e.searchStop=new e("search-stop",{fontCharacter:"\\eb4e"}),e.server=new e("server",{fontCharacter:"\\eb50"}),e.settingsGear=new e("settings-gear",{fontCharacter:"\\eb51"}),e.settings=new e("settings",{fontCharacter:"\\eb52"}),e.shield=new e("shield",{fontCharacter:"\\eb53"}),e.smiley=new e("smiley",{fontCharacter:"\\eb54"}),e.sortPrecedence=new e("sort-precedence",{fontCharacter:"\\eb55"}),e.splitHorizontal=new e("split-horizontal",{fontCharacter:"\\eb56"}),e.splitVertical=new e("split-vertical",{fontCharacter:"\\eb57"}),e.squirrel=new e("squirrel",{fontCharacter:"\\eb58"}),e.starFull=new e("star-full",{fontCharacter:"\\eb59"}),e.starHalf=new e("star-half",{fontCharacter:"\\eb5a"}),e.symbolClass=new e("symbol-class",{fontCharacter:"\\eb5b"}),e.symbolColor=new e("symbol-color",{fontCharacter:"\\eb5c"}),e.symbolConstant=new e("symbol-constant",{fontCharacter:"\\eb5d"}),e.symbolEnumMember=new e("symbol-enum-member",{fontCharacter:"\\eb5e"}),e.symbolField=new e("symbol-field",{fontCharacter:"\\eb5f"}),e.symbolFile=new e("symbol-file",{fontCharacter:"\\eb60"}),e.symbolInterface=new e("symbol-interface",{fontCharacter:"\\eb61"}),e.symbolKeyword=new e("symbol-keyword",{fontCharacter:"\\eb62"}),e.symbolMisc=new e("symbol-misc",{fontCharacter:"\\eb63"}),e.symbolOperator=new e("symbol-operator",{fontCharacter:"\\eb64"}),e.symbolProperty=new e("symbol-property",{fontCharacter:"\\eb65"}),e.wrench=new e("wrench",{fontCharacter:"\\eb65"}),e.wrenchSubaction=new e("wrench-subaction",{fontCharacter:"\\eb65"}),e.symbolSnippet=new e("symbol-snippet",{fontCharacter:"\\eb66"}),e.tasklist=new e("tasklist",{fontCharacter:"\\eb67"}),e.telescope=new e("telescope",{fontCharacter:"\\eb68"}),e.textSize=new e("text-size",{fontCharacter:"\\eb69"}),e.threeBars=new e("three-bars",{fontCharacter:"\\eb6a"}),e.thumbsdown=new e("thumbsdown",{fontCharacter:"\\eb6b"}),e.thumbsup=new e("thumbsup",{fontCharacter:"\\eb6c"}),e.tools=new e("tools",{fontCharacter:"\\eb6d"}),e.triangleDown=new e("triangle-down",{fontCharacter:"\\eb6e"}),e.triangleLeft=new e("triangle-left",{fontCharacter:"\\eb6f"}),e.triangleRight=new e("triangle-right",{fontCharacter:"\\eb70"}),e.triangleUp=new e("triangle-up",{fontCharacter:"\\eb71"}),e.twitter=new e("twitter",{fontCharacter:"\\eb72"}),e.unfold=new e("unfold",{fontCharacter:"\\eb73"}),e.unlock=new e("unlock",{fontCharacter:"\\eb74"}),e.unmute=new e("unmute",{fontCharacter:"\\eb75"}),e.unverified=new e("unverified",{fontCharacter:"\\eb76"}),e.verified=new e("verified",{fontCharacter:"\\eb77"}),e.versions=new e("versions",{fontCharacter:"\\eb78"}),e.vmActive=new e("vm-active",{fontCharacter:"\\eb79"}),e.vmOutline=new e("vm-outline",{fontCharacter:"\\eb7a"}),e.vmRunning=new e("vm-running",{fontCharacter:"\\eb7b"}),e.watch=new e("watch",{fontCharacter:"\\eb7c"}),e.whitespace=new e("whitespace",{fontCharacter:"\\eb7d"}),e.wholeWord=new e("whole-word",{fontCharacter:"\\eb7e"}),e.window=new e("window",{fontCharacter:"\\eb7f"}),e.wordWrap=new e("word-wrap",{fontCharacter:"\\eb80"}),e.zoomIn=new e("zoom-in",{fontCharacter:"\\eb81"}),e.zoomOut=new e("zoom-out",{fontCharacter:"\\eb82"}),e.listFilter=new e("list-filter",{fontCharacter:"\\eb83"}),e.listFlat=new e("list-flat",{fontCharacter:"\\eb84"}),e.listSelection=new e("list-selection",{fontCharacter:"\\eb85"}),e.selection=new e("selection",{fontCharacter:"\\eb85"}),e.listTree=new e("list-tree",{fontCharacter:"\\eb86"}),e.debugBreakpointFunctionUnverified=new e("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),e.debugBreakpointFunction=new e("debug-breakpoint-function",{fontCharacter:"\\eb88"}),e.debugBreakpointFunctionDisabled=new e("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),e.debugStackframeActive=new e("debug-stackframe-active",{fontCharacter:"\\eb89"}),e.debugStackframeDot=new e("debug-stackframe-dot",{fontCharacter:"\\eb8a"}),e.debugStackframe=new e("debug-stackframe",{fontCharacter:"\\eb8b"}),e.debugStackframeFocused=new e("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),e.debugBreakpointUnsupported=new e("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),e.symbolString=new e("symbol-string",{fontCharacter:"\\eb8d"}),e.debugReverseContinue=new e("debug-reverse-continue",{fontCharacter:"\\eb8e"}),e.debugStepBack=new e("debug-step-back",{fontCharacter:"\\eb8f"}),e.debugRestartFrame=new e("debug-restart-frame",{fontCharacter:"\\eb90"}),e.callIncoming=new e("call-incoming",{fontCharacter:"\\eb92"}),e.callOutgoing=new e("call-outgoing",{fontCharacter:"\\eb93"}),e.menu=new e("menu",{fontCharacter:"\\eb94"}),e.expandAll=new e("expand-all",{fontCharacter:"\\eb95"}),e.feedback=new e("feedback",{fontCharacter:"\\eb96"}),e.groupByRefType=new e("group-by-ref-type",{fontCharacter:"\\eb97"}),e.ungroupByRefType=new e("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),e.account=new e("account",{fontCharacter:"\\eb99"}),e.bellDot=new e("bell-dot",{fontCharacter:"\\eb9a"}),e.debugConsole=new e("debug-console",{fontCharacter:"\\eb9b"}),e.library=new e("library",{fontCharacter:"\\eb9c"}),e.output=new e("output",{fontCharacter:"\\eb9d"}),e.runAll=new e("run-all",{fontCharacter:"\\eb9e"}),e.syncIgnored=new e("sync-ignored",{fontCharacter:"\\eb9f"}),e.pinned=new e("pinned",{fontCharacter:"\\eba0"}),e.githubInverted=new e("github-inverted",{fontCharacter:"\\eba1"}),e.debugAlt=new e("debug-alt",{fontCharacter:"\\eb91"}),e.serverProcess=new e("server-process",{fontCharacter:"\\eba2"}),e.serverEnvironment=new e("server-environment",{fontCharacter:"\\eba3"}),e.pass=new e("pass",{fontCharacter:"\\eba4"}),e.stopCircle=new e("stop-circle",{fontCharacter:"\\eba5"}),e.playCircle=new e("play-circle",{fontCharacter:"\\eba6"}),e.record=new e("record",{fontCharacter:"\\eba7"}),e.debugAltSmall=new e("debug-alt-small",{fontCharacter:"\\eba8"}),e.vmConnect=new e("vm-connect",{fontCharacter:"\\eba9"}),e.cloud=new e("cloud",{fontCharacter:"\\ebaa"}),e.merge=new e("merge",{fontCharacter:"\\ebab"}),e.exportIcon=new e("export",{fontCharacter:"\\ebac"}),e.graphLeft=new e("graph-left",{fontCharacter:"\\ebad"}),e.magnet=new e("magnet",{fontCharacter:"\\ebae"}),e.notebook=new e("notebook",{fontCharacter:"\\ebaf"}),e.redo=new e("redo",{fontCharacter:"\\ebb0"}),e.checkAll=new e("check-all",{fontCharacter:"\\ebb1"}),e.pinnedDirty=new e("pinned-dirty",{fontCharacter:"\\ebb2"}),e.passFilled=new e("pass-filled",{fontCharacter:"\\ebb3"}),e.circleLargeFilled=new e("circle-large-filled",{fontCharacter:"\\ebb4"}),e.circleLargeOutline=new e("circle-large-outline",{fontCharacter:"\\ebb5"}),e.combine=new e("combine",{fontCharacter:"\\ebb6"}),e.gather=new e("gather",{fontCharacter:"\\ebb6"}),e.table=new e("table",{fontCharacter:"\\ebb7"}),e.variableGroup=new e("variable-group",{fontCharacter:"\\ebb8"}),e.typeHierarchy=new e("type-hierarchy",{fontCharacter:"\\ebb9"}),e.typeHierarchySub=new e("type-hierarchy-sub",{fontCharacter:"\\ebba"}),e.typeHierarchySuper=new e("type-hierarchy-super",{fontCharacter:"\\ebbb"}),e.gitPullRequestCreate=new e("git-pull-request-create",{fontCharacter:"\\ebbc"}),e.runAbove=new e("run-above",{fontCharacter:"\\ebbd"}),e.runBelow=new e("run-below",{fontCharacter:"\\ebbe"}),e.notebookTemplate=new e("notebook-template",{fontCharacter:"\\ebbf"}),e.debugRerun=new e("debug-rerun",{fontCharacter:"\\ebc0"}),e.workspaceTrusted=new e("workspace-trusted",{fontCharacter:"\\ebc1"}),e.workspaceUntrusted=new e("workspace-untrusted",{fontCharacter:"\\ebc2"}),e.workspaceUnspecified=new e("workspace-unspecified",{fontCharacter:"\\ebc3"}),e.terminalCmd=new e("terminal-cmd",{fontCharacter:"\\ebc4"}),e.terminalDebian=new e("terminal-debian",{fontCharacter:"\\ebc5"}),e.terminalLinux=new e("terminal-linux",{fontCharacter:"\\ebc6"}),e.terminalPowershell=new e("terminal-powershell",{fontCharacter:"\\ebc7"}),e.terminalTmux=new e("terminal-tmux",{fontCharacter:"\\ebc8"}),e.terminalUbuntu=new e("terminal-ubuntu",{fontCharacter:"\\ebc9"}),e.terminalBash=new e("terminal-bash",{fontCharacter:"\\ebca"}),e.arrowSwap=new e("arrow-swap",{fontCharacter:"\\ebcb"}),e.copy=new e("copy",{fontCharacter:"\\ebcc"}),e.personAdd=new e("person-add",{fontCharacter:"\\ebcd"}),e.filterFilled=new e("filter-filled",{fontCharacter:"\\ebce"}),e.wand=new e("wand",{fontCharacter:"\\ebcf"}),e.debugLineByLine=new e("debug-line-by-line",{fontCharacter:"\\ebd0"}),e.inspect=new e("inspect",{fontCharacter:"\\ebd1"}),e.dropDownButton=new e("drop-down-button",e.chevronDown.definition)}(ed||(ed={}));class id{constructor(e,t){this.language=e,this.id=t}}class nd{static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(1792&e)>>>8}static getFontStyle(e){return(14336&e)>>>11}static getForeground(e){return(8372224&e)>>>14}static getBackground(e){return(4286578688&e)>>>23}static getClassNameFromMetadata(e){let t="mtk"+this.getForeground(e),i=this.getFontStyle(e);return 1&i&&(t+=" mtki"),2&i&&(t+=" mtkb"),4&i&&(t+=" mtku"),t}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),n=this.getFontStyle(e);let r=`color: ${t[i]};`;return 1&n&&(r+="font-style: italic;"),2&n&&(r+="font-weight: bold;"),4&n&&(r+="text-decoration: underline;"),r}}!function(){let e=Object.create(null);e[0]="symbol-method",e[1]="symbol-function",e[2]="symbol-constructor",e[3]="symbol-field",e[4]="symbol-variable",e[5]="symbol-class",e[6]="symbol-struct",e[7]="symbol-interface",e[8]="symbol-module",e[9]="symbol-property",e[10]="symbol-event",e[11]="symbol-operator",e[12]="symbol-unit",e[13]="symbol-value",e[14]="symbol-constant",e[15]="symbol-enum",e[16]="symbol-enum-member",e[17]="symbol-keyword",e[27]="symbol-snippet",e[18]="symbol-text",e[19]="symbol-color",e[20]="symbol-file",e[21]="symbol-reference",e[22]="symbol-customcolor",e[23]="symbol-folder",e[24]="symbol-type-parameter",e[25]="account",e[26]="issues"}();!function(){let e=Object.create(null);e.method=0,e.function=1,e.constructor=2,e.field=3,e.variable=4,e.class=5,e.struct=6,e.interface=7,e.module=8,e.property=9,e.event=10,e.operator=11,e.unit=12,e.value=13,e.constant=14,e.enum=15,e["enum-member"]=16,e.enumMember=16,e.keyword=17,e.snippet=27,e.text=18,e.color=19,e.file=20,e.reference=21,e.customcolor=22,e.folder=23,e["type-parameter"]=24,e.typeParameter=24,e.account=25,e.issue=26}();var rd,sd,od,ad,ld;!function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(rd||(rd={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(sd||(sd={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(od||(od={})),function(e){const t=new Map;t.set("file",0),t.set("module",1),t.set("namespace",2),t.set("package",3),t.set("class",4),t.set("method",5),t.set("property",6),t.set("field",7),t.set("constructor",8),t.set("enum",9),t.set("interface",10),t.set("function",11),t.set("variable",12),t.set("constant",13),t.set("string",14),t.set("number",15),t.set("boolean",16),t.set("array",17),t.set("object",18),t.set("key",19),t.set("null",20),t.set("enum-member",21),t.set("struct",22),t.set("event",23),t.set("operator",24),t.set("type-parameter",25);const i=new Map;i.set(0,"file"),i.set(1,"module"),i.set(2,"namespace"),i.set(3,"package"),i.set(4,"class"),i.set(5,"method"),i.set(6,"property"),i.set(7,"field"),i.set(8,"constructor"),i.set(9,"enum"),i.set(10,"interface"),i.set(11,"function"),i.set(12,"variable"),i.set(13,"constant"),i.set(14,"string"),i.set(15,"number"),i.set(16,"boolean"),i.set(17,"array"),i.set(18,"object"),i.set(19,"key"),i.set(20,"null"),i.set(21,"enum-member"),i.set(22,"struct"),i.set(23,"event"),i.set(24,"operator"),i.set(25,"type-parameter"),e.fromString=function(e){return t.get(e)},e.toString=function(e){return i.get(e)},e.toCssClassName=function(e,t){const n=i.get(e);let r=n&&Qu.get("symbol-"+n);return r||(console.info("No codicon found for SymbolKind "+e),r=ed.symbolProperty),`${t?"inline":"block"} ${r.classNames}`}}(ad||(ad={}));class cd{constructor(e){this.value=e}}cd.Comment=new cd("comment"),cd.Imports=new cd("imports"),cd.Region=new cd("region"),function(e){e[e.Other=0]="Other",e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(ld||(ld={}));const hd=new Yu,ud=new Yu,dd=new Yu,fd=new Yu,pd=new Yu,gd=new Yu,md=new Yu,bd=new Yu,vd=new Yu,yd=new Yu,_d=new Yu,wd=new Yu,Sd=new Yu,Cd=new Yu,xd=new Yu,kd=new Yu,Ed=new Yu,Td=new Yu,Ld=new Yu,Nd=new Yu,Md=new Yu,Od=new Yu,Dd=new Yu,Id=new Yu,Ad=new Yu,Pd=new class{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new ms,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),ss((()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))}))}registerPromise(e,t){let i=null,n=!1;return this._promises.set(e,t.then((t=>{this._promises.delete(e),!n&&t&&(i=this.register(e,t))}))),ss((()=>{n=!0,i&&i.dispose()}))}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const i=this._promises.get(e);return i?i.then((t=>this.get(e))):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};const Rd=new class{clone(){return this}equals(e){return this===e}},Bd="vs.editor.nullMode",Fd=new id(Bd,0);function Wd(e,t,i,n){let r=new Uint32Array(2);return r[0]=n,r[1]=(16384|e<<0|2<<23)>>>0,new Lo(r,null===i?Rd:i)}const Vd=ga("editorWorkerService"),zd=ga("modeService"),Hd=ga("textModelService"),jd="$initialize";let Ud=!1;function Gd(e){er&&(Ud||(Ud=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(e.message))}class Kd{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null)}setWorkerId(e){this._workerId=e}sendMessage(e,t){let i=String(++this._lastSentReq);return new Promise(((n,r)=>{this._pendingReplies[i]={resolve:n,reject:r},this._send({vsWorker:this._workerId,req:i,method:e,args:t})}))}handleMessage(e){e&&e.vsWorker&&(-1!==this._workerId&&e.vsWorker!==this._workerId||this._handleMessage(e))}_handleMessage(e){if(e.seq){let t=e;if(!this._pendingReplies[t.seq])return void console.warn("Got reply to unknown seq");let i=this._pendingReplies[t.seq];if(delete this._pendingReplies[t.seq],t.err){let e=t.err;return t.err.$isError&&(e=new Error,e.name=t.err.name,e.message=t.err.message,e.stack=t.err.stack),void i.reject(e)}return void i.resolve(t.res)}let t=e,i=t.req;this._handler.handleMessage(t.method,t.args).then((e=>{this._send({vsWorker:this._workerId,seq:i,res:e,err:void 0})}),(e=>{e.detail instanceof Error&&(e.detail=$r(e.detail)),this._send({vsWorker:this._workerId,seq:i,res:void 0,err:$r(e)})}))}_send(e){let t=[];if(e.req){const i=e;for(let e=0;e<i.args.length;e++)i.args[e]instanceof ArrayBuffer&&t.push(i.args[e])}else{const i=e;i.res instanceof ArrayBuffer&&t.push(i.res)}this._handler.sendMessage(e,t)}}class $d extends as{constructor(e,t,i){super();let n=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",(e=>{this._protocol.handleMessage(e)}),(e=>{n&&n(e)}))),this._protocol=new Kd({sendMessage:(e,t)=>{this._worker.postMessage(e,t)},handleMessage:(e,t)=>{if("function"!=typeof i[e])return Promise.reject(new Error("Missing method "+e+" on main thread host."));try{return Promise.resolve(i[e].apply(i,t))}catch(e){return Promise.reject(e)}}}),this._protocol.setWorkerId(this._worker.getId());let r=null;void 0!==self.require&&"function"==typeof self.require.getConfig?r=self.require.getConfig():void 0!==self.requirejs&&(r=self.requirejs.s.contexts._.config);const s=Fh(i);this._onModuleLoaded=this._protocol.sendMessage(jd,[this._worker.getId(),JSON.parse(JSON.stringify(r)),t,s]);const o=(e,t)=>this._request(e,t);this._lazyProxy=new Promise(((e,i)=>{n=i,this._onModuleLoaded.then((t=>{e(Wh(t,o))}),(e=>{i(e),this._onError("Worker failed to load "+t,e)}))}))}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise(((i,n)=>{this._onModuleLoaded.then((()=>{this._protocol.sendMessage(e,t).then(i,n)}),n)}))}_onError(e,t){console.error(e),console.info(t)}}var qd;const Zd=null===(qd=window.trustedTypes)||void 0===qd?void 0:qd.createPolicy("defaultWorkerFactory",{createScriptURL:e=>e});class Yd{constructor(e,t,i,n,r){this.id=t;const s=function(e,t){if(Un.MonacoEnvironment){if("function"==typeof Un.MonacoEnvironment.getWorker)return Un.MonacoEnvironment.getWorker(e,t);if("function"==typeof Un.MonacoEnvironment.getWorkerUrl){const i=Un.MonacoEnvironment.getWorkerUrl(e,t);return new Worker(Zd?Zd.createScriptURL(i):i,{name:t})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}("workerMain.js",i);"function"==typeof s.then?this.worker=s:this.worker=Promise.resolve(s),this.postMessage(e,[]),this.worker.then((e=>{e.onmessage=function(e){n(e.data)},e.onmessageerror=r,"function"==typeof e.addEventListener&&e.addEventListener("error",r)}))}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then((i=>i.postMessage(e,t)))}dispose(){this.worker&&this.worker.then((e=>e.terminate())),this.worker=null}}class Xd{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,i){let n=++Xd.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new Yd(e,n,this._label||"anonymous"+n,t,(e=>{Gd(e),this._webWorkerFailedBeforeError=e,i(e)}))}}var Qd;Xd.LAST_WORKER_ID=0,function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(Qd||(Qd={}));class Jd{constructor(e){if(this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++){switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4}}}isOK(e){return 0==(this._standardTokenMask&e)}}class ef{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)tf(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),tf(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),tf(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),tf(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),1===t.close.length&&1===t.open.length&&tf(this.autoClosingPairsCloseSingleChar,t.close,t)}}function tf(e,t,i){e.has(t)?e.get(t).push(i):e.set(t,[i])}function nf(e,t){let i=e.getCount(),n=e.findTokenIndexAtOffset(t),r=e.getLanguageId(n),s=n;for(;s+1<i&&e.getLanguageId(s+1)===r;)s++;let o=n;for(;o>0&&e.getLanguageId(o-1)===r;)o--;return new rf(e,r,o,s+1,e.getStartOffset(o),e.getEndOffset(s))}class rf{constructor(e,t,i,n,r,s){this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=n,this.firstCharOffset=r,this._lastCharOffset=s}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function sf(e){return 0!=(7&e)}class of{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map((e=>new Jd(e))):e.brackets?this._autoClosingPairs=e.brackets.map((e=>new Jd({open:e[0],close:e[1]}))):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Jd({open:t.open,close:t.close||""}))}this._autoCloseBefore="string"==typeof e.autoCloseBefore?e.autoCloseBefore:of.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}static shouldAutoClosePair(e,t,i){if(0===t.getTokenCount())return!0;const n=t.findTokenIndexAtOffset(i-2),r=t.getStandardTokenType(n);return e.isOK(r)}getSurroundingPairs(){return this._surroundingPairs}}let af,lf,cf;function hf(){return af||(af=new TextDecoder("UTF-16LE")),af}function uf(){return cf||(cf=ar()?hf():(lf||(lf=new TextDecoder("UTF-16BE")),lf)),cf}of.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=";:.,=}])> \n\t";const df="undefined"!=typeof TextDecoder;let ff,pf;function gf(e,t,i){let n=[],r=0;for(let s=0;s<i;s++){const i=gh(e,t);t+=2,n[r++]=String.fromCharCode(i)}return n.join("")}df?(ff=e=>new mf(e),pf=function(e,t,i){const n=new Uint16Array(e.buffer,t,i);if(i>0&&(65279===n[0]||65534===n[0]))return gf(e,t,i);return hf().decode(n)}):(ff=e=>new bf,pf=gf);class mf{constructor(e){this._capacity=0|e,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return null!==this._completedStrings?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(0===this._bufferLength)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return uf().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,null===this._completedStrings?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(0===t||Mc(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=e);for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class bf{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class vf{constructor(e,t,i,n,r,s){this.languageIdentifier=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=r,this.reversedRegex=s,this._openSet=vf._toSet(this.open),this._closeSet=vf._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}class yf{constructor(e,t){const i=function(e){const t=e.length;e=e.map((e=>[e[0].toLowerCase(),e[1].toLowerCase()]));const i=[];for(let e=0;e<t;e++)i[e]=e;const n=(e,t)=>{const[i,n]=e,[r,s]=t;return i===r||i===s||n===r||n===s},r=(e,n)=>{const r=Math.min(e,n),s=Math.max(e,n);for(let e=0;e<t;e++)i[e]===s&&(i[e]=r)};for(let s=0;s<t;s++){const o=e[s];for(let a=s+1;a<t;a++)n(o,e[a])&&r(i[s],i[a])}const s=[];for(let n=0;n<t;n++){let r=[],o=[];for(let s=0;s<t;s++)if(i[s]===n){const[t,i]=e[s];r.push(t),o.push(i)}r.length>0&&s.push({open:r,close:o})}return s}(t);this.brackets=i.map(((t,n)=>new vf(e,n,t.open,t.close,function(e,t,i,n){let r=[];r=r.concat(e),r=r.concat(t);for(let e=0,t=r.length;e<t;e++)_f(r[e],i,n,r);return r=Sf(r),r.sort(wf),r.reverse(),xf(r)}(t.open,t.close,i,n),function(e,t,i,n){let r=[];r=r.concat(e),r=r.concat(t);for(let e=0,t=r.length;e<t;e++)_f(r[e],i,n,r);return r=Sf(r),r.sort(wf),r.reverse(),xf(r.map(kf))}(t.open,t.close,i,n)))),this.forwardRegex=function(e){let t=[];for(const i of e){for(const e of i.open)t.push(e);for(const e of i.close)t.push(e)}return t=Sf(t),xf(t)}(this.brackets),this.reversedRegex=function(e){let t=[];for(const i of e){for(const e of i.open)t.push(e);for(const e of i.close)t.push(e)}return t=Sf(t),xf(t.map(kf))}(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const e of this.brackets){for(const t of e.open)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,t.length);for(const t of e.close)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,t.length)}}}function _f(e,t,i,n){for(let r=0,s=t.length;r<s;r++){if(r===i)continue;const s=t[r];for(const t of s.open)t.indexOf(e)>=0&&n.push(t);for(const t of s.close)t.indexOf(e)>=0&&n.push(t)}}function wf(e,t){return e.length-t.length}function Sf(e){if(e.length<=1)return e;const t=[],i=new Set;for(const n of e)i.has(n)||(t.push(n),i.add(n));return t}function Cf(e){const t=/^[\w ]+$/.test(e);return e=cc(e),t?`\\b${e}\\b`:e}function xf(e){return dc(`(${e.map(Cf).join(")|(")})`,!0)}const kf=function(){let e=null,t=null;return function(i){return e!==i&&(e=i,t=function(e){if(df){const t=new Uint16Array(e.length);let i=0;for(let n=e.length-1;n>=0;n--)t[i++]=e.charCodeAt(n);return uf().decode(t)}{let t=[],i=0;for(let n=e.length-1;n>=0;n--)t[i++]=e.charAt(n);return t.join("")}}(e)),t}}();class Ef{static _findPrevBracketInText(e,t,i,n){let r=i.match(e);if(!r)return null;let s=i.length-(r.index||0),o=r[0].length,a=n+s;return new xo(t,a-o+1,t,a+1)}static findPrevBracketInRange(e,t,i,n,r){const s=kf(i).substring(i.length-r,i.length-n);return this._findPrevBracketInText(e,t,s,n)}static findNextBracketInText(e,t,i,n){let r=i.match(e);if(!r)return null;let s=r.index||0,o=r[0].length;if(0===o)return null;let a=n+s;return new xo(t,a+1,t,a+1+o)}static findNextBracketInRange(e,t,i,n,r){const s=i.substring(n,r);return this.findNextBracketInText(e,t,s,n)}}class Tf{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const t=i.charAt(i.length-1);e.push(t)}return e=e.filter(((e,t,i)=>i.indexOf(e)===t)),e}onElectricCharacter(e,t,i){if(!this._richEditBrackets||0===this._richEditBrackets.brackets.length)return null;const n=t.findTokenIndexAtOffset(i-1);if(sf(t.getStandardTokenType(n)))return null;const r=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,i-1)+e,o=Ef.findPrevBracketInRange(r,1,s,0,s.length);if(!o)return null;const a=s.substring(o.startColumn-1,o.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[a])return null;const l=t.getActualLineContentBefore(o.startColumn-1);return/^\s*$/.test(l)?{matchOpenBracket:a}:null}}function Lf(e){return e.global&&(e.lastIndex=0),!0}class Nf{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Lf(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Lf(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Lf(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Lf(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Mf{constructor(e){(e=e||{}).brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach((e=>{const t=Mf._createOpenBracketRegExp(e[0]),i=Mf._createCloseBracketRegExp(e[1]);t&&i&&this._brackets.push({open:e[0],openRegExp:t,close:e[1],closeRegExp:i})})),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let e=0,r=this._regExpRules.length;e<r;e++){let r=this._regExpRules[e];if([{reg:r.beforeText,text:i},{reg:r.afterText,text:n},{reg:r.previousLineText,text:t}].every((e=>!e.reg||(e.reg.lastIndex=0,e.reg.test(e.text)))))return r.action}if(e>=2&&i.length>0&&n.length>0)for(let e=0,t=this._brackets.length;e<t;e++){let t=this._brackets[e];if(t.openRegExp.test(i)&&t.closeRegExp.test(n))return{indentAction:Qd.IndentOutdent}}if(e>=2&&i.length>0)for(let e=0,t=this._brackets.length;e<t;e++){if(this._brackets[e].openRegExp.test(i))return{indentAction:Qd.Indent}}return null}static _createOpenBracketRegExp(e){let t=cc(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Mf._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=cc(e);return/\B/.test(t.charAt(t.length-1))||(t+="\\b"),t="^\\s*"+t,Mf._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(e){return Gr(e),null}}}class Of{constructor(e,t){this._languageIdentifier=e,this._brackets=null,this._electricCharacter=null,this._conf=t,this._onEnterSupport=this._conf.brackets||this._conf.indentationRules||this._conf.onEnterRules?new Mf(this._conf):null,this.comments=Of._handleComments(this._conf),this.characterPair=new of(this._conf),this.wordDefinition=this._conf.wordPattern||cr,this.indentationRules=this._conf.indentationRules,this._conf.indentationRules?this.indentRulesSupport=new Nf(this._conf.indentationRules):this.indentRulesSupport=null,this.foldingRules=this._conf.folding||{}}get brackets(){return!this._brackets&&this._conf.brackets&&(this._brackets=new yf(this._languageIdentifier,this._conf.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new Tf(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}static _handleComments(e){let t=e.comments;if(!t)return null;let i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){let[e,n]=t.blockComment;i.blockCommentStartToken=e,i.blockCommentEndToken=n}return i}}class Df{constructor(e){this.languageIdentifier=e}}class If{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class Af{constructor(e){this.languageIdentifier=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new If(e,t,++this._order);return this._entries.push(i),this._resolved=null,ss((()=>{for(let e=0;e<this._entries.length;e++)if(this._entries[e]===i){this._entries.splice(e,1),this._resolved=null;break}}))}getRichEditSupport(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Of(this.languageIdentifier,e))}return this._resolved}_resolve(){if(0===this._entries.length)return null;this._entries.sort(If.cmp);const e={};for(const t of this._entries){const i=t.configuration;e.comments=i.comments||e.comments,e.brackets=i.brackets||e.brackets,e.wordPattern=i.wordPattern||e.wordPattern,e.indentationRules=i.indentationRules||e.indentationRules,e.onEnterRules=i.onEnterRules||e.onEnterRules,e.autoClosingPairs=i.autoClosingPairs||e.autoClosingPairs,e.surroundingPairs=i.surroundingPairs||e.surroundingPairs,e.autoCloseBefore=i.autoCloseBefore||e.autoCloseBefore,e.folding=i.folding||e.folding,e.__electricCharacterSupport=i.__electricCharacterSupport||e.__electricCharacterSupport}return e}}const Pf=new class{constructor(){this._entries2=new Map,this._onDidChange=new ms,this.onDidChange=this._onDidChange.event}register(e,t,i=0){let n=this._entries2.get(e.id);n||(n=new Af(e),this._entries2.set(e.id,n));const r=n.register(t,i);return this._onDidChange.fire(new Df(e)),ss((()=>{r.dispose(),this._onDidChange.fire(new Df(e))}))}_getRichEditSupport(e){const t=this._entries2.get(e);return t?t.getRichEditSupport():null}getIndentationRules(e){const t=this._getRichEditSupport(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this._getRichEditSupport(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,i){let n=nf(t,i-1),r=this._getElectricCharacterSupport(n.languageId);return r?r.onElectricCharacter(e,n,i-n.firstCharOffset):null}getComments(e){let t=this._getRichEditSupport(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this._getRichEditSupport(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new ef(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():of.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}shouldAutoClosePair(e,t,i){const n=nf(t,i-1);return of.shouldAutoClosePair(e,n,i-n.firstCharOffset)}getWordDefinition(e){let t=this._getRichEditSupport(e);return hr(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this._getRichEditSupport(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this._getRichEditSupport(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,i){let n=e.getLanguageIdAtPosition(t,0);if(t>1){let r,s=-1;for(r=t-1;r>=1;r--){if(e.getLanguageIdAtPosition(r,0)!==n)return s;let t=e.getLineContent(r);if(!i.shouldIgnore(t)&&!/^\s+$/.test(t)&&""!==t)return r;s=r}}return-1}getInheritIndentForLine(e,t,i,n=!0){if(e<4)return null;const r=this.getIndentRulesSupport(t.getLanguageIdentifier().id);if(!r)return null;if(i<=1)return{indentation:"",action:null};const s=this.getPrecedingValidLine(t,i,r);if(s<0)return null;if(s<1)return{indentation:"",action:null};const o=t.getLineContent(s);if(r.shouldIncrease(o)||r.shouldIndentNextLine(o))return{indentation:mc(o),action:Qd.Indent,line:s};if(r.shouldDecrease(o))return{indentation:mc(o),action:null,line:s};{if(1===s)return{indentation:mc(t.getLineContent(s)),action:null,line:s};const e=s-1,i=r.getIndentMetadata(t.getLineContent(e));if(!(3&i)&&4&i){let i=0;for(let n=e-1;n>0;n--)if(!r.shouldIndentNextLine(t.getLineContent(n))){i=n;break}return{indentation:mc(t.getLineContent(i+1)),action:null,line:i+1}}if(n)return{indentation:mc(t.getLineContent(s)),action:null,line:s};for(let e=s;e>0;e--){const i=t.getLineContent(e);if(r.shouldIncrease(i))return{indentation:mc(i),action:Qd.Indent,line:e};if(r.shouldIndentNextLine(i)){let i=0;for(let n=e-1;n>0;n--)if(!r.shouldIndentNextLine(t.getLineContent(e))){i=n;break}return{indentation:mc(t.getLineContent(i+1)),action:null,line:i+1}}if(r.shouldDecrease(i))return{indentation:mc(i),action:null,line:e}}return{indentation:mc(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,i,n,r){if(e<4)return null;const s=this._getRichEditSupport(i);if(!s)return null;const o=this.getIndentRulesSupport(i);if(!o)return null;const a=this.getInheritIndentForLine(e,t,n),l=t.getLineContent(n);if(a){const i=a.line;if(void 0!==i){const n=s.onEnter(e,"",t.getLineContent(i),"");if(n){let e=mc(t.getLineContent(i));return n.removeText&&(e=e.substring(0,e.length-n.removeText)),n.indentAction===Qd.Indent||n.indentAction===Qd.IndentOutdent?e=r.shiftIndent(e):n.indentAction===Qd.Outdent&&(e=r.unshiftIndent(e)),o.shouldDecrease(l)&&(e=r.unshiftIndent(e)),n.appendText&&(e+=n.appendText),mc(e)}}return o.shouldDecrease(l)?a.action===Qd.Indent?a.indentation:r.unshiftIndent(a.indentation):a.action===Qd.Indent?r.shiftIndent(a.indentation):a.indentation}return null}getIndentForEnter(e,t,i,n){if(e<4)return null;t.forceTokenization(i.startLineNumber);const r=t.getLineTokens(i.startLineNumber),s=nf(r,i.startColumn-1),o=s.getLineContent();let a,l,c=!1;if(s.firstCharOffset>0&&r.getLanguageId(0)!==s.languageId?(c=!0,a=o.substr(0,i.startColumn-1-s.firstCharOffset)):a=r.getLineContent().substring(0,i.startColumn-1),i.isEmpty())l=o.substr(i.startColumn-1-s.firstCharOffset);else{l=this.getScopedLineTokens(t,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-s.firstCharOffset)}const h=this.getIndentRulesSupport(s.languageId);if(!h)return null;const u=a,d=mc(a),f={getLineTokens:e=>t.getLineTokens(e),getLanguageIdentifier:()=>t.getLanguageIdentifier(),getLanguageIdAtPosition:(e,i)=>t.getLanguageIdAtPosition(e,i),getLineContent:e=>e===i.startLineNumber?u:t.getLineContent(e)},p=mc(r.getLineContent()),g=this.getInheritIndentForLine(e,f,i.startLineNumber+1);if(!g){const e=c?p:d;return{beforeEnter:e,afterEnter:e}}let m=c?p:g.indentation;return g.action===Qd.Indent&&(m=n.shiftIndent(m)),h.shouldDecrease(l)&&(m=n.unshiftIndent(m)),{beforeEnter:c?p:d,afterEnter:m}}getIndentActionForType(e,t,i,n,r){if(e<4)return null;const s=this.getScopedLineTokens(t,i.startLineNumber,i.startColumn);if(s.firstCharOffset)return null;const o=this.getIndentRulesSupport(s.languageId);if(!o)return null;const a=s.getLineContent(),l=a.substr(0,i.startColumn-1-s.firstCharOffset);let c;if(i.isEmpty())c=a.substr(i.startColumn-1-s.firstCharOffset);else{c=this.getScopedLineTokens(t,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-s.firstCharOffset)}if(!o.shouldDecrease(l+c)&&o.shouldDecrease(l+n+c)){const n=this.getInheritIndentForLine(e,t,i.startLineNumber,!1);if(!n)return null;let s=n.indentation;return n.action!==Qd.Indent&&(s=r.unshiftIndent(s)),s}return null}getIndentMetadata(e,t){const i=this.getIndentRulesSupport(e.getLanguageIdentifier().id);return i?t<1||t>e.getLineCount()?null:i.getIndentMetadata(e.getLineContent(t)):null}getEnterAction(e,t,i){const n=this.getScopedLineTokens(t,i.startLineNumber,i.startColumn),r=this._getRichEditSupport(n.languageId);if(!r)return null;const s=n.getLineContent(),o=s.substr(0,i.startColumn-1-n.firstCharOffset);let a;if(i.isEmpty())a=s.substr(i.startColumn-1-n.firstCharOffset);else{a=this.getScopedLineTokens(t,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-n.firstCharOffset)}let l="";if(i.startLineNumber>1&&0===n.firstCharOffset){const e=this.getScopedLineTokens(t,i.startLineNumber-1);e.languageId===n.languageId&&(l=e.getLineContent())}const c=r.onEnter(e,l,o,a);if(!c)return null;const h=c.indentAction;let u=c.appendText;const d=c.removeText||0;u?h===Qd.Indent&&(u="\t"+u):u=h===Qd.Indent||h===Qd.IndentOutdent?"\t":"";let f=this.getIndentationAtPosition(t,i.startLineNumber,i.startColumn);return d&&(f=f.substring(0,f.length-d)),{indentAction:h,appendText:u,removeText:d,indentation:f}}getIndentationAtPosition(e,t,i){let n=mc(e.getLineContent(t));return n.length>i-1&&(n=n.substring(0,i-1)),n}getScopedLineTokens(e,t,i){e.forceTokenization(t);return nf(e.getLineTokens(t),void 0===i?e.getLineMaxColumn(t)-1:i-1)}getBracketsSupport(e){const t=this._getRichEditSupport(e);return t&&t.brackets||null}};class Rf{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class Bf{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}}function Ff(e,t,i){return new Hf(new Bf(e),new Bf(t)).ComputeDiff(i).changes}class Wf{static Assert(e,t){if(!e)throw new Error(t)}}class Vf{static Copy(e,t,i,n,r){for(let s=0;s<r;s++)i[n+s]=e[t+s]}static Copy2(e,t,i,n,r){for(let s=0;s<r;s++)i[n+s]=e[t+s]}}class zf{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Rf(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Hf{constructor(e,t,i=null){this.ContinueProcessingPredicate=i;const[n,r,s]=Hf._getElements(e),[o,a,l]=Hf._getElements(t);this._hasStrings=s&&l,this._originalStringElements=n,this._originalElementsOrHash=r,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&"string"==typeof e[0]}static _getElements(e){const t=e.getElements();if(Hf._isStringArray(t)){const e=new Int32Array(t.length);for(let i=0,n=t.length;i<n;i++)e[i]=yu(t[i],0);return[t,e,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._modifiedStringElements[t])}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._originalElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._originalStringElements[t])}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._modifiedStringElements[e]===this._modifiedStringElements[t])}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,r){const s=[!1];let o=this.ComputeDiffRecursive(e,t,i,n,s);return r&&(o=this.PrettifyChanges(o)),{quitEarly:s[0],changes:o}}ComputeDiffRecursive(e,t,i,n,r){for(r[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let r;return i<=n?(Wf.Assert(e===t+1,"originalStart should only be one more than originalEnd"),r=[new Rf(e,0,i,n-i+1)]):e<=t?(Wf.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),r=[new Rf(e,t-e+1,i,0)]):(Wf.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Wf.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),r=[]),r}const s=[0],o=[0],a=this.ComputeRecursionPoint(e,t,i,n,s,o,r),l=s[0],c=o[0];if(null!==a)return a;if(!r[0]){const s=this.ComputeDiffRecursive(e,l,i,c,r);let o=[];return o=r[0]?[new Rf(l+1,t-(l+1)+1,c+1,n-(c+1)+1)]:this.ComputeDiffRecursive(l+1,t,c+1,n,r),this.ConcatenateChanges(s,o)}return[new Rf(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,r,s,o,a,l,c,h,u,d,f,p,g,m,b){let v=null,y=null,_=new zf,w=t,S=i,C=d[0]-g[0]-n,x=-1073741824,k=this.m_forwardHistory.length-1;do{const t=C+e;t===w||t<S&&l[t-1]<l[t+1]?(f=(h=l[t+1])-C-n,h<x&&_.MarkNextChange(),x=h,_.AddModifiedElement(h+1,f),C=t+1-e):(f=(h=l[t-1]+1)-C-n,h<x&&_.MarkNextChange(),x=h-1,_.AddOriginalElement(h,f+1),C=t-1-e),k>=0&&(e=(l=this.m_forwardHistory[k])[0],w=1,S=l.length-1)}while(--k>=-1);if(v=_.getReverseChanges(),b[0]){let e=d[0]+1,t=g[0]+1;if(null!==v&&v.length>0){const i=v[v.length-1];e=Math.max(e,i.getOriginalEnd()),t=Math.max(t,i.getModifiedEnd())}y=[new Rf(e,u-e+1,t,p-t+1)]}else{_=new zf,w=s,S=o,C=d[0]-g[0]-a,x=1073741824,k=m?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const e=C+r;e===w||e<S&&c[e-1]>=c[e+1]?(f=(h=c[e+1]-1)-C-a,h>x&&_.MarkNextChange(),x=h+1,_.AddOriginalElement(h+1,f+1),C=e+1-r):(f=(h=c[e-1])-C-a,h>x&&_.MarkNextChange(),x=h,_.AddModifiedElement(h+1,f+1),C=e-1-r),k>=0&&(r=(c=this.m_reverseHistory[k])[0],w=1,S=c.length-1)}while(--k>=-1);y=_.getChanges()}return this.ConcatenateChanges(v,y)}ComputeRecursionPoint(e,t,i,n,r,s,o){let a=0,l=0,c=0,h=0,u=0,d=0;e--,i--,r[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const f=t-e+(n-i),p=f+1,g=new Int32Array(p),m=new Int32Array(p),b=n-i,v=t-e,y=e-i,_=t-n,w=(v-b)%2==0;g[b]=e,m[v]=t,o[0]=!1;for(let S=1;S<=f/2+1;S++){let f=0,C=0;c=this.ClipDiagonalBound(b-S,S,b,p),h=this.ClipDiagonalBound(b+S,S,b,p);for(let e=c;e<=h;e+=2){a=e===c||e<h&&g[e-1]<g[e+1]?g[e+1]:g[e-1]+1,l=a-(e-b)-y;const i=a;for(;a<t&&l<n&&this.ElementsAreEqual(a+1,l+1);)a++,l++;if(g[e]=a,a+l>f+C&&(f=a,C=l),!w&&Math.abs(e-v)<=S-1&&a>=m[e])return r[0]=a,s[0]=l,i<=m[e]&&S<=1448?this.WALKTRACE(b,c,h,y,v,u,d,_,g,m,a,t,r,l,n,s,w,o):null}const x=(f-e+(C-i)-S)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(f,x))return o[0]=!0,r[0]=f,s[0]=C,x>0&&S<=1448?this.WALKTRACE(b,c,h,y,v,u,d,_,g,m,a,t,r,l,n,s,w,o):(e++,i++,[new Rf(e,t-e+1,i,n-i+1)]);u=this.ClipDiagonalBound(v-S,S,v,p),d=this.ClipDiagonalBound(v+S,S,v,p);for(let f=u;f<=d;f+=2){a=f===u||f<d&&m[f-1]>=m[f+1]?m[f+1]-1:m[f-1],l=a-(f-v)-_;const p=a;for(;a>e&&l>i&&this.ElementsAreEqual(a,l);)a--,l--;if(m[f]=a,w&&Math.abs(f-b)<=S&&a<=g[f])return r[0]=a,s[0]=l,p>=g[f]&&S<=1448?this.WALKTRACE(b,c,h,y,v,u,d,_,g,m,a,t,r,l,n,s,w,o):null}if(S<=1447){let e=new Int32Array(h-c+2);e[0]=b-c+1,Vf.Copy2(g,c,e,1,h-c+1),this.m_forwardHistory.push(e),e=new Int32Array(d-u+2),e[0]=v-u+1,Vf.Copy2(m,u,e,1,d-u+1),this.m_reverseHistory.push(e)}}return this.WALKTRACE(b,c,h,y,v,u,d,_,g,m,a,t,r,l,n,s,w,o)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=i.originalLength>0,o=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<r&&(!s||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!o||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));)i.originalStart++,i.modifiedStart++;let a=[null];t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],a)&&(e[t]=a[0],e.splice(t+1,1),t--)}for(let t=e.length-1;t>=0;t--){const i=e[t];let n=0,r=0;if(t>0){const i=e[t-1];n=i.originalStart+i.originalLength,r=i.modifiedStart+i.modifiedLength}const s=i.originalLength>0,o=i.modifiedLength>0;let a=0,l=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let e=1;;e++){const t=i.originalStart-e,c=i.modifiedStart-e;if(t<n||c<r)break;if(s&&!this.OriginalElementsAreEqual(t,t+i.originalLength))break;if(o&&!this.ModifiedElementsAreEqual(c,c+i.modifiedLength))break;const h=(t===n&&c===r?5:0)+this._boundaryScore(t,i.originalLength,c,i.modifiedLength);h>l&&(l=h,a=e)}i.originalStart-=a,i.modifiedStart-=a;const c=[null];t>0&&this.ChangesOverlap(e[t-1],e[t],c)&&(e[t-1]=c[0],e.splice(t,1),t++)}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const i=e[t-1],n=e[t],r=n.originalStart-i.originalStart-i.originalLength,s=i.originalStart,o=n.originalStart+n.originalLength,a=o-s,l=i.modifiedStart,c=n.modifiedStart+n.modifiedLength,h=c-l;if(r<5&&a<20&&h<20){const e=this._findBetterContiguousSequence(s,a,l,h,r);if(e){const[t,s]=e;t===i.originalStart+i.originalLength&&s===i.modifiedStart+i.modifiedLength||(i.originalLength=t-i.originalStart,i.modifiedLength=s-i.modifiedStart,n.originalStart=t+r,n.modifiedStart=s+r,n.originalLength=o-n.originalStart,n.modifiedLength=c-n.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,r){if(t<r||n<r)return null;const s=e+t-r+1,o=i+n-r+1;let a=0,l=0,c=0;for(let t=e;t<s;t++)for(let e=i;e<o;e++){const i=this._contiguousSequenceScore(t,e,r);i>0&&i>a&&(a=i,l=t,c=e)}return a>0?[l,c]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let r=0;r<i;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;n+=this._originalStringElements[e+r].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){return(this._OriginalRegionIsBoundary(e,t)?1:0)+(this._ModifiedRegionIsBoundary(i,n)?1:0)}ConcatenateChanges(e,t){let i=[];if(0===e.length||0===t.length)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const n=new Array(e.length+t.length-1);return Vf.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],Vf.Copy(t,1,n,e.length,t.length-1),n}{const i=new Array(e.length+t.length);return Vf.Copy(e,0,i,0,e.length),Vf.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,i){if(Wf.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Wf.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const n=e.originalStart;let r=e.originalLength;const s=e.modifiedStart;let o=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(o=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new Rf(n,r,s,o),!0}return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;const r=t%2==0;if(e<0){return r===(i%2==0)?0:1}return r===((n-i-1)%2==0)?n-1:n-2}}function jf(e,t,i,n){return new Hf(e,t,i).ComputeDiff(n)}class Uf{constructor(e){const t=[],i=[];for(let n=0,r=e.length;n<r;n++)t[n]=Zf(e[n],1),i[n]=Yf(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const n=[],r=[],s=[];let o=0;for(let a=t;a<=i;a++){const t=this.lines[a],i=e?this._startColumns[a]:1,l=e?this._endColumns[a]:t.length+1;for(let e=i;e<l;e++)n[o]=t.charCodeAt(e-1),r[o]=a+1,s[o]=e,o++}return new Gf(n,r,s)}}class Gf{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class Kf{constructor(e,t,i,n,r,s,o,a){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=r,this.modifiedStartColumn=s,this.modifiedEndLineNumber=o,this.modifiedEndColumn=a}static createFromDiffChange(e,t,i){let n,r,s,o,a,l,c,h;return 0===e.originalLength?(n=0,r=0,s=0,o=0):(n=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),s=t.getEndLineNumber(e.originalStart+e.originalLength-1),o=t.getEndColumn(e.originalStart+e.originalLength-1)),0===e.modifiedLength?(a=0,l=0,c=0,h=0):(a=i.getStartLineNumber(e.modifiedStart),l=i.getStartColumn(e.modifiedStart),c=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=i.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new Kf(n,r,s,o,a,l,c,h)}}class $f{constructor(e,t,i,n,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=r}static createFromDiffResult(e,t,i,n,r,s,o){let a,l,c,h,u;if(0===t.originalLength?(a=i.getStartLineNumber(t.originalStart)-1,l=0):(a=i.getStartLineNumber(t.originalStart),l=i.getEndLineNumber(t.originalStart+t.originalLength-1)),0===t.modifiedLength?(c=n.getStartLineNumber(t.modifiedStart)-1,h=0):(c=n.getStartLineNumber(t.modifiedStart),h=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),s&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const s=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),a=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let l=jf(s,a,r,!0).changes;o&&(l=function(e){if(e.length<=1)return e;const t=[e[0]];let i=t[0];for(let n=1,r=e.length;n<r;n++){const r=e[n],s=r.originalStart-(i.originalStart+i.originalLength),o=r.modifiedStart-(i.modifiedStart+i.modifiedLength);Math.min(s,o)<3?(i.originalLength=r.originalStart+r.originalLength-i.originalStart,i.modifiedLength=r.modifiedStart+r.modifiedLength-i.modifiedStart):(t.push(r),i=r)}return t}(l)),u=[];for(let e=0,t=l.length;e<t;e++)u.push(Kf.createFromDiffChange(l[e],s,a))}return new $f(a,l,c,h,u)}}class qf{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new Uf(e),this.modified=new Uf(t),this.continueLineDiff=Xf(i.maxComputationTime),this.continueCharDiff=Xf(0===i.maxComputationTime?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return 1===this.modified.lines.length&&0===this.modified.lines[0].length?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=jf(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const e=[];for(let i=0,n=t.length;i<n;i++)e.push($f.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[i],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:e}}const n=[];let r=0,s=0;for(let e=-1,i=t.length;e<i;e++){const o=e+1<i?t[e+1]:null,a=o?o.originalStart:this.originalLines.length,l=o?o.modifiedStart:this.modifiedLines.length;for(;r<a&&s<l;){const e=this.originalLines[r],t=this.modifiedLines[s];if(e!==t){{let i=Zf(e,1),o=Zf(t,1);for(;i>1&&o>1;){if(e.charCodeAt(i-2)!==t.charCodeAt(o-2))break;i--,o--}(i>1||o>1)&&this._pushTrimWhitespaceCharChange(n,r+1,1,i,s+1,1,o)}{let i=Yf(e,1),o=Yf(t,1);const a=e.length+1,l=t.length+1;for(;i<a&&o<l;){if(e.charCodeAt(i-1)!==e.charCodeAt(o-1))break;i++,o++}(i<a||o<l)&&this._pushTrimWhitespaceCharChange(n,r+1,i,a,s+1,o,l)}}r++,s++}o&&(n.push($f.createFromDiffResult(this.shouldIgnoreTrimWhitespace,o,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=o.originalLength,s+=o.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,r,s,o){if(this._mergeTrimWhitespaceCharChange(e,t,i,n,r,s,o))return;let a;this.shouldComputeCharChanges&&(a=[new Kf(t,i,t,n,r,s,r,o)]),e.push(new $f(t,t,r,r,a))}_mergeTrimWhitespaceCharChange(e,t,i,n,r,s,o){const a=e.length;if(0===a)return!1;const l=e[a-1];return 0!==l.originalEndLineNumber&&0!==l.modifiedEndLineNumber&&(l.originalEndLineNumber+1===t&&l.modifiedEndLineNumber+1===r&&(l.originalEndLineNumber=t,l.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new Kf(t,i,t,n,r,s,r,o)),!0))}}function Zf(e,t){const i=gc(e);return-1===i?t:i+1}function Yf(e,t){const i=bc(e);return-1===i?t:i+2}function Xf(e){if(0===e)return()=>!0;const t=Date.now();return()=>Date.now()-t<e}function Qf(e){return e<0?0:e>255?255:0|e}function Jf(e){return e<0?0:e>4294967295?4294967295:0|e}class ep{constructor(e,t){this.index=e,this.remainder=t}}class tp{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Jf(e);const i=this.values,n=this.prefixSum,r=t.length;return 0!==r&&(this.values=new Uint32Array(i.length+r),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}changeValue(e,t){return e=Jf(e),t=Jf(t),this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Jf(e),t=Jf(t);const i=this.values,n=this.prefixSum;if(e>=i.length)return!1;let r=i.length-e;return t>=r&&(t=r),0!==t&&(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalValue(){return 0===this.values.length?0:this._getAccumulatedValue(this.values.length-1)}getAccumulatedValue(e){return e<0?0:(e=Jf(e),this._getAccumulatedValue(e))}_getAccumulatedValue(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalValue();let t=0,i=this.values.length-1,n=0,r=0,s=0;for(;t<=i;)if(n=t+(i-t)/2|0,r=this.prefixSum[n],s=r-this.values[n],e<s)i=n-1;else{if(!(e>=r))break;t=n+1}return new ep(n,e-s)}}class ip{constructor(e){let t=Qf(e);this._defaultValue=t,this._asciiMap=ip._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let i=0;i<256;i++)t[i]=e;return t}set(e,t){let i=Qf(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class np{constructor(e,t,i){const n=new Uint8Array(e*t);for(let r=0,s=e*t;r<s;r++)n[r]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class rp{constructor(e){let t=0,i=0;for(let n=0,r=e.length;n<r;n++){let[r,s,o]=e[n];s>t&&(t=s),r>i&&(i=r),o>i&&(i=o)}t++,i++;let n=new np(i,t,0);for(let t=0,i=e.length;t<i;t++){let[i,r,s]=e[t];n.set(i,r,s)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let sp=null;let op=null;class ap{static _createLink(e,t,i,n,r){let s=r-1;do{const i=t.charCodeAt(s);if(2!==e.get(i))break;s--}while(s>n);if(n>0){const e=t.charCodeAt(n-1),i=t.charCodeAt(s);(40===e&&41===i||91===e&&93===i||123===e&&125===i)&&s--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:s+2},url:t.substring(n,s+1)}}static computeLinks(e,t=function(){return null===sp&&(sp=new rp([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),sp}()){const i=function(){if(null===op){op=new ip(0);const e=" \t<>'\"";for(let t=0;t<e.length;t++)op.set(e.charCodeAt(t),1);const t=".,;";for(let e=0;e<t.length;e++)op.set(t.charCodeAt(e),2)}return op}();let n=[];for(let r=1,s=e.getLineCount();r<=s;r++){const s=e.getLineContent(r),o=s.length;let a=0,l=0,c=0,h=1,u=!1,d=!1,f=!1,p=!1;for(;a<o;){let e=!1;const o=s.charCodeAt(a);if(13===h){let t;switch(o){case 40:u=!0,t=0;break;case 41:t=u?0:1;break;case 91:f=!0,d=!0,t=0;break;case 93:f=!1,t=d?0:1;break;case 123:p=!0,t=0;break;case 125:t=p?0:1;break;case 39:t=34===c||96===c?0:1;break;case 34:t=39===c||96===c?0:1;break;case 96:t=39===c||34===c?0:1;break;case 42:t=42===c?1:0;break;case 124:t=124===c?1:0;break;case 32:t=f?0:1;break;default:t=i.get(o)}1===t&&(n.push(ap._createLink(i,s,r,l,a)),e=!0)}else if(12===h){let t;91===o?(d=!0,t=0):t=i.get(o),1===t?e=!0:h=13}else h=t.nextState(h,o),0===h&&(e=!0);e&&(h=1,u=!1,d=!1,p=!1,l=a+1,c=o),a++}13===h&&n.push(ap._createLink(i,s,r,l,o))}return n}}class lp{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,n,r){if(e&&t){let i=this.doNavigateValueSet(t,r);if(i)return{range:e,value:i}}if(i&&n){let e=this.doNavigateValueSet(n,r);if(e)return{range:i,value:e}}return null}doNavigateValueSet(e,t){let i=this.numberReplace(e,t);return null!==i?i:this.textReplace(e,t)}numberReplace(e,t){let i=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),n=Number(e),r=parseFloat(e);return isNaN(n)||isNaN(r)||n!==r?null:0!==n||t?(n=Math.floor(n*i),n+=t?i:-i,String(n/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let r=0,s=e.length;null===n&&r<s;r++)n=this.valueSetReplace(e[r],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?(n+=i?1:-1,n<0?n=e.length-1:n%=e.length,e[n]):null}}lp.INSTANCE=new lp;var cp=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class hp extends class{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const e of t)this._acceptDeleteRange(e.range),this._acceptInsertText(new Co(e.range.startLineNumber,e.range.startColumn),e.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new tp(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}_acceptInsertText(e,t){if(0===t.length)return;let i=pc(t);if(1===i.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);let n=new Uint32Array(i.length-1);for(let t=1;t<i.length;t++)this._lines.splice(e.lineNumber+t-1,0,i[t]),n[t-1]=i[t].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}}{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let i=dr(e.column,hr(t),this._lines[e.lineNumber-1],0);return i?new xo(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let n=0,r="",s=0,o=[];return{*[Symbol.iterator](){for(;;)if(s<o.length){const e=r.substring(o[s].start,o[s].end);s+=1,yield e}else{if(!(n<t.length))break;r=t[n],o=i(r,e),s=0,n+=1}}}}getLineWords(e,t){let i=this._lines[e-1],n=this._wordenize(i,t),r=[];for(const e of n)r.push({word:i.substring(e.start,e.end),startColumn:e.start+1,endColumn:e.end+1});return r}_wordenize(e,t){const i=[];let n;for(t.lastIndex=0;(n=t.exec(e))&&0!==n[0].length;)i.push({start:n.index,end:n.index+n[0].length});return i}getValueInRange(e){if((e=this._validateRange(e)).startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,r=[];r.push(this._lines[i].substring(e.startColumn-1));for(let e=i+1;e<n;e++)r.push(this._lines[e]);return r.push(this._lines[n].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getAccumulatedValue(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!Co.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{let e=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>e&&(i=e,n=!0)}return n?{lineNumber:t,column:i}:e}}class up{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach((t=>e.push(this._models[t]))),e}acceptNewModel(e){this._models[e.url]=new hp(uo.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeDiff(e,t,i,n){return cp(this,void 0,void 0,(function*(){const r=this._getModel(e),s=this._getModel(t);if(!r||!s)return null;const o=r.getLinesContent(),a=s.getLinesContent(),l=new qf(o,a,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:i,shouldMakePrettyDiff:!0,maxComputationTime:n}).computeDiff(),c=!(l.changes.length>0)&&this._modelsAreIdentical(r,s);return{quitEarly:l.quitEarly,identical:c,changes:l.changes}}))}_modelsAreIdentical(e,t){const i=e.getLineCount();if(i!==t.getLineCount())return!1;for(let n=1;n<=i;n++){if(e.getLineContent(n)!==t.getLineContent(n))return!1}return!0}computeMoreMinimalEdits(e,t){return cp(this,void 0,void 0,(function*(){const i=this._getModel(e);if(!i)return t;const n=[];let r;t=t.slice(0).sort(((e,t)=>{if(e.range&&t.range)return xo.compareRangesUsingStarts(e.range,t.range);return(e.range?0:1)-(t.range?0:1)}));for(let{range:e,text:s,eol:o}of t){if("number"==typeof o&&(r=o),xo.isEmpty(e)&&!s)continue;const t=i.getValueInRange(e);if(s=s.replace(/\r\n|\n|\r/g,i.eol),t===s)continue;if(Math.max(s.length,t.length)>up._diffLimit){n.push({range:e,text:s});continue}const a=Ff(t,s,!1),l=i.offsetAt(xo.lift(e).getStartPosition());for(const e of a){const t=i.positionAt(l+e.originalStart),r=i.positionAt(l+e.originalStart+e.originalLength),o={text:s.substr(e.modifiedStart,e.modifiedLength),range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:r.lineNumber,endColumn:r.column}};i.getValueInRange(o.range)!==o.text&&n.push(o)}}return"number"==typeof r&&n.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),n}))}computeLinks(e){return cp(this,void 0,void 0,(function*(){let t=this._getModel(e);return t?function(e){return e&&"function"==typeof e.getLineCount&&"function"==typeof e.getLineContent?ap.computeLinks(e):[]}(t):null}))}textualSuggest(e,t,i,n){return cp(this,void 0,void 0,(function*(){const r=new fs(!0),s=new RegExp(i,n),o=new Set;e:for(let i of e){const e=this._getModel(i);if(e)for(let i of e.words(s))if(i!==t&&isNaN(Number(i))&&(o.add(i),o.size>up._suggestionsLimit))break e}return{words:Array.from(o),duration:r.elapsed()}}))}computeWordRanges(e,t,i,n){return cp(this,void 0,void 0,(function*(){let r=this._getModel(e);if(!r)return Object.create(null);const s=new RegExp(i,n),o=Object.create(null);for(let e=t.startLineNumber;e<t.endLineNumber;e++){let t=r.getLineWords(e,s);for(const i of t){if(!isNaN(Number(i.word)))continue;let t=o[i.word];t||(t=[],o[i.word]=t),t.push({startLineNumber:e,startColumn:i.startColumn,endLineNumber:e,endColumn:i.endColumn})}}return o}))}navigateValueSet(e,t,i,n,r){return cp(this,void 0,void 0,(function*(){let s=this._getModel(e);if(!s)return null;let o=new RegExp(n,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let a=s.getValueInRange(t),l=s.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},o);if(!l)return null;let c=s.getValueInRange(l);return lp.INSTANCE.navigateValueSet(t,a,l,c,i)}))}loadForeignModule(e,t,i){let n={host:Wh(i,((e,t)=>this._host.fhr(e,t))),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(n,t),Promise.resolve(Fh(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||"function"!=typeof this._foreignModule[e])return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(e){return Promise.reject(e)}}}up._diffLimit=1e5,up._suggestionsLimit=1e4,"function"==typeof importScripts&&(Un.monaco=da());const dp=ga("textResourceConfigurationService"),fp=ga("textResourcePropertiesService");function pp(e,t=0){return e[e.length-(1+t)]}function gp(e,t,i=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!i(e[n],t[n]))return!1;return!0}function mp(e){return Array.isArray(e)&&e.length>0}function bp(e,t){if(!t)return e.filter(((t,i)=>e.indexOf(t)===i));const i=Object.create(null);return e.filter((e=>{const n=t(e);return!i[n]&&(i[n]=!0,!0)}))}function vp(e){const t=new Set;return e.filter((e=>!t.has(e)&&(t.add(e),!0)))}function yp(e,t){return e.length>0?e[0]:t}function _p(e,t){let i="number"==typeof t?e:0;"number"==typeof t?i=e:(i=0,t=e);const n=[];if(i<=t)for(let e=i;e<t;e++)n.push(e);else for(let e=i;e>t;e--)n.push(e);return n}function wp(e,t,i){const n=e.slice(0,t),r=e.slice(t);return n.concat(i,r)}function Sp(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.unshift(t))}function Cp(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.push(t))}const xp=ga("logService");var kp;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"}(kp||(kp={}));const Ep=kp.Info;class Tp extends as{constructor(){super(...arguments),this.level=Ep,this._onDidChangeLogLevel=this._register(new ms)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class Lp extends Tp{constructor(e=Ep){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=kp.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=kp.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=kp.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=kp.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class Np extends as{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}var Mp=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},Op=function(e,t){return function(i,n){t(i,n,e)}},Dp=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const Ip=3e5;function Ap(e,t){let i=e.getModel(t);return!!i&&!i.isTooLargeForSyncing()}let Pp=class extends as{constructor(e,t,i){super(),this._modelService=e,this._workerManager=this._register(new Bp(this._modelService)),this._logService=i,this._register(Nd.register("*",{provideLinks:(e,t)=>Ap(this._modelService,e.uri)?this._workerManager.withWorker().then((t=>t.computeLinks(e.uri))).then((e=>e&&{links:e})):Promise.resolve({links:[]})})),this._register(dd.register("*",new Rp(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}canComputeDiff(e,t){return Ap(this._modelService,e)&&Ap(this._modelService,t)}computeDiff(e,t,i,n){return this._workerManager.withWorker().then((r=>r.computeDiff(e,t,i,n)))}computeMoreMinimalEdits(e,t){if(mp(t)){if(!Ap(this._modelService,e))return Promise.resolve(t);const i=fs.create(!0),n=this._workerManager.withWorker().then((i=>i.computeMoreMinimalEdits(e,t)));return n.finally((()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),i.elapsed()))),Promise.race([n,qa(1e3).then((()=>t))])}return Promise.resolve(void 0)}canNavigateValueSet(e){return Ap(this._modelService,e)}navigateValueSet(e,t,i){return this._workerManager.withWorker().then((n=>n.navigateValueSet(e,t,i)))}canComputeWordRanges(e){return Ap(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then((i=>i.computeWordRanges(e,t)))}};Pp=Mp([Op(0,$u),Op(1,dp),Op(2,xp)],Pp);class Rp{constructor(e,t,i){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}provideCompletionItems(e,t){return Dp(this,void 0,void 0,(function*(){const i=this._configurationService.getValue(e.uri,t,"editor");if(!i.wordBasedSuggestions)return;const n=[];if("currentDocument"===i.wordBasedSuggestionsMode)Ap(this._modelService,e.uri)&&n.push(e.uri);else for(const t of this._modelService.getModels())Ap(this._modelService,t.uri)&&(t===e?n.unshift(t.uri):"allDocuments"!==i.wordBasedSuggestionsMode&&t.getLanguageIdentifier().id!==e.getLanguageIdentifier().id||n.push(t.uri));if(0===n.length)return;const r=Pf.getWordDefinition(e.getLanguageIdentifier().id),s=e.getWordAtPosition(t),o=s?new xo(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn):xo.fromPositions(t),a=o.setEndPosition(t.lineNumber,t.column),l=yield this._workerManager.withWorker(),c=yield l.textualSuggest(n,null==s?void 0:s.word,r);return c?{duration:c.duration,suggestions:c.words.map((e=>({kind:18,label:e,insertText:e,range:{insert:a,replace:o}})))}:void 0}))}}class Bp extends as{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=(new Date).getTime(),this._register(new Xa).cancelAndSet((()=>this._checkStopIdleWorker()),Math.round(15e4)),this._register(this._modelService.onModelRemoved((e=>this._checkStopEmptyWorker())))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;0===this._modelService.getModels().length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;(new Date).getTime()-this._lastWorkerUsedTime>Ip&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new zp(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}}class Fp extends as{constructor(e,t,i){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){let e=new Xa;e.cancelAndSet((()=>this._checkStopModelSync()),Math.round(3e4)),this._register(e)}}dispose(){for(let e in this._syncedModels)ns(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e){for(const t of e){let e=t.toString();this._syncedModels[e]||this._beginModelSync(t),this._syncedModels[e]&&(this._syncedModelsLastUsedTime[e]=(new Date).getTime())}}_checkStopModelSync(){let e=(new Date).getTime(),t=[];for(let i in this._syncedModelsLastUsedTime){e-this._syncedModelsLastUsedTime[i]>6e4&&t.push(i)}for(const e of t)this._stopModelSync(e)}_beginModelSync(e){let t=this._modelService.getModel(e);if(!t)return;if(t.isTooLargeForSyncing())return;let i=e.toString();this._proxy.acceptNewModel({url:t.uri.toString(),lines:t.getLinesContent(),EOL:t.getEOL(),versionId:t.getVersionId()});const n=new os;n.add(t.onDidChangeContent((e=>{this._proxy.acceptModelChanged(i.toString(),e)}))),n.add(t.onWillDispose((()=>{this._stopModelSync(i)}))),n.add(ss((()=>{this._proxy.acceptRemovedModel(i)}))),this._syncedModels[i]=n}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],ns(t)}}class Wp{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class Vp{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class zp extends as{constructor(e,t,i){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new Xd(i),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new $d(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new Vp(this)))}catch(e){Gd(e),this._worker=new Wp(new up(new Vp(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,(e=>(Gd(e),this._worker=new Wp(new up(new Vp(this),null)),this._getOrCreateWorker().getProxyObject())))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new Fp(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e){return this._disposed?Promise.reject(Yr()):this._getProxy().then((t=>(this._getOrCreateModelManager(t).ensureSyncedResources(e),t)))}computeDiff(e,t,i,n){return this._withSyncedResources([e,t]).then((r=>r.computeDiff(e.toString(),t.toString(),i,n)))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then((i=>i.computeMoreMinimalEdits(e.toString(),t)))}computeLinks(e){return this._withSyncedResources([e]).then((t=>t.computeLinks(e.toString())))}textualSuggest(e,t,i){return Dp(this,void 0,void 0,(function*(){const n=yield this._withSyncedResources(e),r=i.source,s=fc(i);return n.textualSuggest(e.map((e=>e.toString())),t,r,s)}))}computeWordRanges(e,t){return this._withSyncedResources([e]).then((i=>{let n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);let r=Pf.getWordDefinition(n.getLanguageIdentifier().id),s=r.source,o=fc(r);return i.computeWordRanges(e.toString(),t,s,o)}))}navigateValueSet(e,t,i){return this._withSyncedResources([e]).then((n=>{let r=this._modelService.getModel(e);if(!r)return null;let s=Pf.getWordDefinition(r.getLanguageIdentifier().id),o=s.source,a=fc(s);return n.navigateValueSet(e.toString(),t,i,o,a)}))}dispose(){super.dispose(),this._disposed=!0}}class Hp extends zp{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||"function"!=typeof this._foreignModuleHost[e])return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(e){return Promise.reject(e)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then((e=>{const t=this._foreignModuleHost?Fh(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then((t=>{this._foreignModuleCreateData=null;const i=(t,i)=>e.fmr(t,i),n=(e,t)=>function(){const i=Array.prototype.slice.call(arguments,0);return t(e,i)};let r={};for(const e of t)r[e]=n(e,i);return r}))}))),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then((e=>this.getProxy()))}}class jp{constructor(e,t){this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t}static createEmpty(e){const t=new Uint32Array(2);return t[0]=e.length,t[1]=16793600,new jp(t,e)}equals(e){return e instanceof jp&&this.slicedEquals(e,0,this._tokensCount)}slicedEquals(e,t,i){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;const n=t<<1,r=n+(i<<1);for(let t=n;t<r;t++)if(this._tokens[t]!==e._tokens[t])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[1+(e<<1)]}getLanguageId(e){const t=this._tokens[1+(e<<1)];return nd.getLanguageId(t)}getStandardTokenType(e){const t=this._tokens[1+(e<<1)];return nd.getTokenType(t)}getForeground(e){const t=this._tokens[1+(e<<1)];return nd.getForeground(t)}getClassName(e){const t=this._tokens[1+(e<<1)];return nd.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[1+(e<<1)];return nd.getInlineStyleFromMetadata(i,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return jp.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new Up(this,e,t,i)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let t=0;t<i;t++)e[t<<1]=e[t+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){const r=i+Math.floor((n-i)/2),s=e[r<<1];if(s===t)return r+1;s<t?i=r+1:s>t&&(n=r)}return i}}class Up{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let t=this._firstTokenIndex,n=e.getCount();t<n;t++){if(e.getStartOffset(t)>=i)break;this._tokensCount++}}equals(e){return e instanceof Up&&(this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount))}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class Gp{constructor(e,t,i,n){this.startColumn=e,this.endColumn=t,this.className=i,this.type=n}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(!Gp._equals(e[n],t[n]))return!1;return!0}static extractWrapped(e,t,i){if(0===e.length)return e;const n=t+1,r=i+1,s=i-t,o=[];let a=0;for(const t of e)t.endColumn<=n||t.startColumn>=r||(o[a++]=new Gp(Math.max(1,t.startColumn-n+1),Math.min(s+1,t.endColumn-n+1),t.className,t.type));return o}static filter(e,t,i,n){if(0===e.length)return[];let r=[],s=0;for(let o=0,a=e.length;o<a;o++){const a=e[o],l=a.range;if(l.endLineNumber<t||l.startLineNumber>t)continue;if(l.isEmpty()&&(0===a.type||3===a.type))continue;const c=l.startLineNumber===t?l.startColumn:i,h=l.endLineNumber===t?l.endColumn:n;r[s++]=new Gp(c,h,a.inlineClassName,a.type)}return r}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn===t.startColumn){if(e.endColumn===t.endColumn){const i=Gp._typeCompare(e.type,t.type);return 0===i?e.className<t.className?-1:e.className>t.className?1:0:i}return e.endColumn-t.endColumn}return e.startColumn-t.startColumn}}class Kp{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=n}}class $p{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,n=e.length;i<n;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let e=0;for(;e+1<this.count&&this.stopOffsets[e]===this.stopOffsets[e+1];)e++;i.push(new Kp(t,this.stopOffsets[e],this.classNames.join(" "),$p._metadata(this.metadata))),t=this.stopOffsets[e]+1,this.stopOffsets.splice(0,e+1),this.classNames.splice(0,e+1),this.metadata.splice(0,e+1),this.count-=e+1}return this.count>0&&t<e&&(i.push(new Kp(t,e-1,this.classNames.join(" "),$p._metadata(this.metadata))),t=e),t}insert(e,t,i){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t),this.metadata.splice(n,0,i);break}this.count++}}class qp{constructor(e,t,i){this.endIndex=e,this.type=t,this.metadata=i}isWhitespace(){return!!(1&this.metadata)}isPseudoAfter(){return!!(4&this.metadata)}}class Zp{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class Yp{constructor(e,t,i,n,r,s,o,a,l,c,h,u,d,f,p,g,m,b,v){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=n,this.isBasicASCII=r,this.containsRTL=s,this.fauxIndentLength=o,this.lineTokens=a,this.lineDecorations=l.sort(Gp.compare),this.tabSize=c,this.startVisibleColumn=h,this.spaceWidth=u,this.stopRenderingLineAfter=p,this.renderWhitespace="all"===g?4:"boundary"===g?1:"selection"===g?2:"trailing"===g?3:0,this.renderControlCharacters=m,this.fontLigatures=b,this.selectionsOnLine=v&&v.sort(((e,t)=>e.startOffset<t.startOffset?-1:1));Math.abs(f-u)<Math.abs(d-u)?(this.renderSpaceWidth=f,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=d,this.renderSpaceCharCode=183)}sameSelection(e){if(null===this.selectionsOnLine)return null===e;if(null===e)return!1;if(e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Gp.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class Xp{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(4294901760&e)>>>16}static getCharIndex(e){return(65535&e)>>>0}setPartData(e,t,i,n){let r=(t<<16|i<<0)>>>0;this._data[e]=r,this._absoluteOffsets[e]=n+i}getAbsoluteOffsets(){return this._absoluteOffsets}charOffsetToPartData(e){return 0===this.length?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}partDataToCharOffset(e,t,i){if(0===this.length)return 0;let n=(e<<16|i<<0)>>>0,r=0,s=this.length-1;for(;r+1<s;){let e=r+s>>>1,t=this._data[e];if(t===n)return e;t>n?s=e:r=e}if(r===s)return r;let o=this._data[r],a=this._data[s];if(o===n)return r;if(a===n)return s;let l,c=Xp.getPartIndex(o),h=Xp.getCharIndex(o);return l=c!==Xp.getPartIndex(a)?t:Xp.getCharIndex(a),i-h<=l-i?r:s}}class Qp{constructor(e,t,i){this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function Jp(e,t){if(0===e.lineContent.length){if(e.lineDecorations.length>0){t.appendASCIIString("<span>");let i=0,n=0,r=0;for(const s of e.lineDecorations)1!==s.type&&2!==s.type||(t.appendASCIIString('<span class="'),t.appendASCIIString(s.className),t.appendASCIIString('"></span>'),1===s.type&&(r|=1,i++),2===s.type&&(r|=2,n++));t.appendASCIIString("</span>");const s=new Xp(1,i+n);return s.setPartData(0,i,0,0),new Qp(s,!1,r)}return t.appendASCIIString("<span><span></span></span>"),new Qp(new Xp(0,0),!1,0)}return function(e,t){const i=e.fontIsMonospace,n=e.canUseHalfwidthRightwardsArrow,r=e.containsForeignElements,s=e.lineContent,o=e.len,a=e.isOverflowing,l=e.parts,c=e.fauxIndentLength,h=e.tabSize,u=e.startVisibleColumn,d=e.containsRTL,f=e.spaceWidth,p=e.renderSpaceCharCode,g=e.renderWhitespace,m=e.renderControlCharacters,b=new Xp(o+1,l.length);let v=!1,y=0,_=u,w=0,S=0,C=0,x=0;d?t.appendASCIIString('<span dir="ltr">'):t.appendASCIIString("<span>");for(let e=0,a=l.length;e<a;e++){x+=C;const a=l[e],u=a.endIndex,d=a.type,k=0!==g&&a.isWhitespace(),E=k&&!i&&("mtkw"===d||!r),T=y===u&&a.isPseudoAfter();if(w=0,t.appendASCIIString('<span class="'),t.appendASCIIString(E?"mtkz":d),t.appendASCII(34),k){let i=0;{let e=y,t=_;for(;e<u;e++){const n=0|(9===s.charCodeAt(e)?h-t%h:1);i+=n,e>=c&&(t+=n)}}for(E&&(t.appendASCIIString(' style="width:'),t.appendASCIIString(String(f*i)),t.appendASCIIString('px"')),t.appendASCII(62);y<u;y++){b.setPartData(y,e-S,w,x),S=0;let i;if(9===s.charCodeAt(y)){i=h-_%h|0,!n||i>1?t.write1(8594):t.write1(65515);for(let e=2;e<=i;e++)t.write1(160)}else i=1,t.write1(p);w+=i,y>=c&&(_+=i)}C=i}else{let i=0;for(t.appendASCII(62);y<u;y++){b.setPartData(y,e-S,w,x),S=0;const n=s.charCodeAt(y);let r=1,o=1;switch(n){case 9:r=h-_%h,o=r;for(let e=1;e<=r;e++)t.write1(160);break;case 32:t.write1(160);break;case 60:t.appendASCIIString("&lt;");break;case 62:t.appendASCIIString("&gt;");break;case 38:t.appendASCIIString("&amp;");break;case 0:m?t.write1(9216):t.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:t.write1(65533);break;default:jc(n)&&o++,m&&n<32?t.write1(9216+n):m&&127===n?t.write1(9249):t.write1(n)}w+=r,i+=r,y>=c&&(_+=o)}C=i}T?S++:S=0,y>=o&&!v&&a.isPseudoAfter()&&(v=!0,b.setPartData(y,e,w,x)),t.appendASCIIString("</span>")}v||b.setPartData(o,l.length-1,w,x);a&&t.appendASCIIString("<span>&hellip;</span>");return t.appendASCIIString("</span>"),new Qp(b,d,r)}(function(e){const t=e.lineContent;let i,n;-1!==e.stopRenderingLineAfter&&e.stopRenderingLineAfter<t.length?(i=!0,n=e.stopRenderingLineAfter):(i=!1,n=t.length);let r=function(e,t,i){let n=[],r=0;t>0&&(n[r++]=new qp(t,"",0));for(let s=0,o=e.getCount();s<o;s++){const o=e.getEndOffset(s);if(o<=t)continue;const a=e.getClassName(s);if(o>=i){n[r++]=new qp(i,a,0);break}n[r++]=new qp(o,a,0)}return n}(e.lineTokens,e.fauxIndentLength,n);(4===e.renderWhitespace||1===e.renderWhitespace||2===e.renderWhitespace&&e.selectionsOnLine||3===e.renderWhitespace)&&(r=function(e,t,i,n){const r=e.continuesWithWrappedLine,s=e.fauxIndentLength,o=e.tabSize,a=e.startVisibleColumn,l=e.useMonospaceOptimizations,c=e.selectionsOnLine,h=1===e.renderWhitespace,u=3===e.renderWhitespace,d=e.renderSpaceWidth!==e.spaceWidth;let f=[],p=0,g=0,m=n[g].type,b=n[g].endIndex;const v=n.length;let y,_=!1,w=gc(t);-1===w?(_=!0,w=i,y=i):y=bc(t);let S=!1,C=0,x=c&&c[C],k=a%o;for(let e=s;e<i;e++){const r=t.charCodeAt(e);let a;if(x&&e>=x.endOffset&&(C++,x=c&&c[C]),e<w||e>y)a=!0;else if(9===r)a=!0;else if(32===r)if(h)if(S)a=!0;else{const n=e+1<i?t.charCodeAt(e+1):0;a=32===n||9===n}else a=!0;else a=!1;if(a&&c&&(a=!!x&&x.startOffset<=e&&x.endOffset>e),a&&u&&(a=_||e>y),S){if(!a||!l&&k>=o){if(d){for(let t=(p>0?f[p-1].endIndex:s)+1;t<=e;t++)f[p++]=new qp(t,"mtkw",1)}else f[p++]=new qp(e,"mtkw",1);k%=o}}else(e===b||a&&e>s)&&(f[p++]=new qp(e,m,0),k%=o);for(9===r?k=o:jc(r)?k+=2:k++,S=a;e===b;)g++,g<v&&(m=n[g].type,b=n[g].endIndex)}let E=!1;if(S)if(r&&h){let e=i>0?t.charCodeAt(i-1):0,n=i>1?t.charCodeAt(i-2):0;32===e&&32!==n&&9!==n||(E=!0)}else E=!0;if(E)if(d){for(let e=(p>0?f[p-1].endIndex:s)+1;e<=i;e++)f[p++]=new qp(e,"mtkw",1)}else f[p++]=new qp(i,"mtkw",1);else f[p++]=new qp(i,m,0);return f}(e,t,n,r));let s=0;if(e.lineDecorations.length>0){for(let t=0,i=e.lineDecorations.length;t<i;t++){const i=e.lineDecorations[t];3===i.type||1===i.type?s|=1:2===i.type&&(s|=2)}r=function(e,t,i,n){n.sort(Gp.compare);const r=class{static normalize(e,t){if(0===t.length)return[];let i=[];const n=new $p;let r=0;for(let s=0,o=t.length;s<o;s++){const o=t[s];let a=o.startColumn,l=o.endColumn;const c=o.className,h=1===o.type?2:2===o.type?4:0;a>1&&Mc(e.charCodeAt(a-2))&&a--,l>1&&Mc(e.charCodeAt(l-2))&&l--;const u=a-1,d=l-2;r=n.consumeLowerThan(u,r,i),0===n.count&&(r=u),n.insert(d,c,h)}return n.consumeLowerThan(1073741824,r,i),i}}.normalize(e,n),s=r.length;let o=0,a=[],l=0,c=0;for(let e=0,t=i.length;e<t;e++){const t=i[e],n=t.endIndex,h=t.type,u=t.metadata;for(;o<s&&r[o].startOffset<n;){const e=r[o];if(e.startOffset>c&&(c=e.startOffset,a[l++]=new qp(c,h,u)),!(e.endOffset+1<=n)){c=n,a[l++]=new qp(c,h+" "+e.className,u|e.metadata);break}c=e.endOffset+1,a[l++]=new qp(c,h+" "+e.className,u|e.metadata),o++}n>c&&(c=n,a[l++]=new qp(c,h,u))}const h=i[i.length-1].endIndex;if(o<s&&r[o].startOffset===h)for(;o<s&&r[o].startOffset===h;){const e=r[o];a[l++]=new qp(c,e.className,e.metadata),o++}return a}(t,0,r,e.lineDecorations)}e.containsRTL||(r=function(e,t,i){let n=0,r=[],s=0;if(i)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.endIndex;if(n+50<a){const t=o.type,i=o.metadata;let l=-1,c=n;for(let o=n;o<a;o++)32===e.charCodeAt(o)&&(l=o),-1!==l&&o-c>=50&&(r[s++]=new qp(l+1,t,i),c=l+1,l=-1);c!==a&&(r[s++]=new qp(a,t,i))}else r[s++]=o;n=a}else for(let e=0,i=t.length;e<i;e++){const i=t[e],o=i.endIndex;let a=o-n;if(a>50){const e=i.type,t=i.metadata,l=Math.ceil(a/50);for(let i=1;i<l;i++){let o=n+50*i;r[s++]=new qp(o,e,t)}r[s++]=new qp(o,e,t)}else r[s++]=i;n=o}return r}(t,r,!e.isBasicASCII||e.fontLigatures));return new ig(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,t,n,i,r,s,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}(e),t)}class eg{constructor(e,t,i,n){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=n}}function tg(e){let t=ff(1e4),i=Jp(e,t);return new eg(i.characterMapping,t.build(),i.containsRTL,i.containsForeignElements)}class ig{constructor(e,t,i,n,r,s,o,a,l,c,h,u,d,f,p){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=n,this.isOverflowing=r,this.parts=s,this.containsForeignElements=o,this.fauxIndentLength=a,this.tabSize=l,this.startVisibleColumn=c,this.containsRTL=h,this.spaceWidth=u,this.renderSpaceCharCode=d,this.renderWhitespace=f,this.renderControlCharacters=p}}class ng{constructor(e,t,i,n){this.top=0|e,this.left=0|t,this.width=0|i,this.height=0|n}}class rg{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}}class sg{constructor(e,t,i){this.breakOffsets=e,this.breakOffsetsVisibleColumn=t,this.wrappedTextIndentLength=i}static getInputOffsetOfOutputPosition(e,t,i){return 0===t?i:e[t-1]+i}static getOutputPositionOfInputOffset(e,t){let i=0,n=e.length-1,r=0,s=0;for(;i<=n;){r=i+(n-i)/2|0;const o=e[r];if(s=r>0?e[r-1]:0,t<s)n=r-1;else{if(!(t>=o))break;i=r+1}}return new rg(r,t-s)}}class og{constructor(e,t){this.tabSize=e,this.data=t}}class ag{constructor(e,t,i,n,r,s){this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=n,this.startVisibleColumn=r,this.tokens=s}}class lg{constructor(e,t,i,n,r,s,o,a,l,c){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=n,this.isBasicASCII=lg.isBasicASCII(i,s),this.containsRTL=lg.containsRTL(i,this.isBasicASCII,r),this.tokens=o,this.inlineDecorations=a,this.tabSize=l,this.startVisibleColumn=c}static isBasicASCII(e,t){return!t||Vc(e)}static containsRTL(e,t,i){return!(t||!i)&&Bc(e)}}class cg{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class hg{constructor(e,t){this.range=e,this.options=t}}function ug(e){return!function(e){return Array.isArray(e)}(e)}function dg(e){return"string"==typeof e}function fg(e){return!dg(e)}function pg(e){return!e}function gg(e,t){return e.ignoreCase&&t?t.toLowerCase():t}function mg(e){return e.replace(/[&<>'"_]/g,"-")}function bg(e,t){return new Error(`${e.languageId}: ${t}`)}function vg(e,t,i,n,r){let s=null;return t.replace(/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,(function(t,o,a,l,c,h,u,d,f){return pg(a)?pg(l)?!pg(c)&&c<n.length?gg(e,n[c]):!pg(u)&&e&&"string"==typeof e[u]?e[u]:(null===s&&(s=r.split("."),s.unshift(r)),!pg(h)&&h<s.length?gg(e,s[h]):""):gg(e,i):"$"}))}function yg(e,t){let i=t;for(;i&&i.length>0;){const t=e.tokenizer[i];if(t)return t;const n=i.lastIndexOf(".");i=n<0?null:i.substr(0,n)}return null}class _g{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(null!==e&&e.depth>=this._maxCacheDepth)return new wg(e,t);let i=wg.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let n=this._entries[i];return n||(n=new wg(e,t),this._entries[i]=n,n)}}_g._INSTANCE=new _g(5);class wg{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;null!==e;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;null!==e&&null!==t;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return null===e&&null===t}equals(e){return wg._equals(this,e)}push(e){return _g.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return _g.create(this.parent,e)}}class Sg{constructor(e,t){this.modeId=e,this.state=t}equals(e){return this.modeId===e.modeId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Sg(this.modeId,this.state)}}class Cg{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(null!==t)return new xg(e,t);if(null!==e&&e.depth>=this._maxCacheDepth)return new xg(e,t);let i=wg.getStackElementId(e),n=this._entries[i];return n||(n=new xg(e,null),this._entries[i]=n,n)}}Cg._INSTANCE=new Cg(5);class xg{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:Cg.create(this.stack,this.embeddedModeData)}equals(e){return e instanceof xg&&(!!this.stack.equals(e.stack)&&(null===this.embeddedModeData&&null===e.embeddedModeData||null!==this.embeddedModeData&&null!==e.embeddedModeData&&this.embeddedModeData.equals(e.embeddedModeData)))}}class kg{constructor(){this._tokens=[],this._language=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._language=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._language||(this._lastTokenType=t,this._lastTokenLanguage=this._language,this._tokens.push(new Eo(e,t,this._language)))}nestedModeTokenize(e,t,i,n){const r=i.modeId,s=i.state,o=Pd.get(r);if(!o)return this.enterMode(n,r),this.emit(n,""),s;let a=o.tokenize(e,t,s,n);return this._tokens=this._tokens.concat(a.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._language=null,a.endState}finalize(e){return new To(this._tokens,e)}}class Eg{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.getLanguageIdentifier(t).id}emit(e,t){let i=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){let n=null!==e?e.length:0,r=t.length,s=null!==i?i.length:0;if(0===n&&0===r&&0===s)return new Uint32Array(0);if(0===n&&0===r)return i;if(0===r&&0===s)return e;let o=new Uint32Array(n+r+s);null!==e&&o.set(e);for(let e=0;e<r;e++)o[n+e]=t[e];return null!==i&&o.set(i,n+r),o}nestedModeTokenize(e,t,i,n){const r=i.modeId,s=i.state,o=Pd.get(r);if(!o)return this.enterMode(n,r),this.emit(n,""),s;let a=o.tokenize2(e,t,s,n);return this._prependTokens=Eg._merge(this._prependTokens,this._tokens,a.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,a.endState}finalize(e){return new Lo(Eg._merge(this._prependTokens,this._tokens,null),e)}}class Tg{constructor(e,t,i,n){this._modeService=e,this._standaloneThemeService=t,this._modeId=i,this._lexer=n,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=Pd.onDidChange((e=>{if(r)return;let t=!1;for(let i=0,n=e.changedLanguages.length;i<n;i++){let n=e.changedLanguages[i];if(this._embeddedModes[n]){t=!0;break}}t&&(r=!0,Pd.fire([this._modeId]),r=!1)}))}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const i=Pd.get(t);if(i){if(i instanceof Tg){const t=i.getLoadStatus();!1===t.loaded&&e.push(t.promise)}continue}const n=Pd.getPromise(t);n&&e.push(n)}return 0===e.length?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then((e=>{}))}}getInitialState(){let e=_g.create(null,this._lexer.start);return Cg.create(e,null)}tokenize(e,t,i,n){let r=new kg,s=this._tokenize(e,t,i,n,r);return r.finalize(s)}tokenize2(e,t,i,n){let r=new Eg(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,i,n,r);return r.finalize(s)}_tokenize(e,t,i,n,r){return i.embeddedModeData?this._nestedTokenize(e,t,i,n,r):this._myTokenize(e,t,i,n,r)}_findLeavingNestedModeOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=yg(this._lexer,t.stack.state),!i))throw bg(this._lexer,"tokenizer state is not defined: "+t.stack.state);let n=-1,r=!1;for(const t of i){if(!fg(t.action)||"@pop"!==t.action.nextEmbedded)continue;r=!0;let i=t.regex,s=t.regex.source;if("^(?:"===s.substr(0,4)&&")"===s.substr(s.length-1,1)){let e=(i.ignoreCase?"i":"")+(i.unicode?"u":"");i=new RegExp(s.substr(4,s.length-5),e)}let o=e.search(i);-1===o||0!==o&&t.matchOnlyAtLineStart||(-1===n||o<n)&&(n=o)}if(!r)throw bg(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return n}_nestedTokenize(e,t,i,n,r){let s=this._findLeavingNestedModeOffset(e,i);if(-1===s){let s=r.nestedModeTokenize(e,t,i.embeddedModeData,n);return Cg.create(i.stack,new Sg(i.embeddedModeData.modeId,s))}let o=e.substring(0,s);o.length>0&&r.nestedModeTokenize(o,!1,i.embeddedModeData,n);let a=e.substring(s);return this._myTokenize(a,t,i,n+s,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,n,r){r.enterMode(n,this._modeId);const s=e.length,o=t&&this._lexer.includeLF?e+"\n":e,a=o.length;let l=i.embeddedModeData,c=i.stack,h=0,u=null,d=!0;for(;d||h<a;){const i=h,g=c.depth,m=u?u.groups.length:0,b=c.state;let v=null,y=null,_=null,w=null,S=null;if(u){v=u.matches;const e=u.groups.shift();y=e.matched,_=e.action,w=u.rule,0===u.groups.length&&(u=null)}else{if(!d&&h>=a)break;d=!1;let e=this._lexer.tokenizer[b];if(!e&&(e=yg(this._lexer,b),!e))throw bg(this._lexer,"tokenizer state is not defined: "+b);let t=o.substr(h);for(const i of e)if((0===h||!i.matchOnlyAtLineStart)&&(v=t.match(i.regex),v)){y=v[0],_=i.action;break}}if(v||(v=[""],y=""),_||(h<a&&(v=[o.charAt(h)],y=v[0]),_=this._lexer.defaultToken),null===y)break;for(h+=y.length;ug(_)&&fg(_)&&_.test;)_=_.test(y,v,b,h===a);let C=null;if("string"==typeof _||Array.isArray(_))C=_;else if(_.group)C=_.group;else if(null!==_.token&&void 0!==_.token){if(C=_.tokenSubst?vg(this._lexer,_.token,y,v,b):_.token,_.nextEmbedded)if("@pop"===_.nextEmbedded){if(!l)throw bg(this._lexer,"cannot pop embedded mode if not inside one");l=null}else{if(l)throw bg(this._lexer,"cannot enter embedded mode from within an embedded mode");S=vg(this._lexer,_.nextEmbedded,y,v,b)}if(_.goBack&&(h=Math.max(0,h-_.goBack)),_.switchTo&&"string"==typeof _.switchTo){let e=vg(this._lexer,_.switchTo,y,v,b);if("@"===e[0]&&(e=e.substr(1)),!yg(this._lexer,e))throw bg(this._lexer,"trying to switch to a state '"+e+"' that is undefined in rule: "+this._safeRuleName(w));c=c.switchTo(e)}else{if(_.transform&&"function"==typeof _.transform)throw bg(this._lexer,"action.transform not supported");if(_.next)if("@push"===_.next){if(c.depth>=this._lexer.maxStack)throw bg(this._lexer,"maximum tokenizer stack size reached: ["+c.state+","+c.parent.state+",...]");c=c.push(b)}else if("@pop"===_.next){if(c.depth<=1)throw bg(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(w));c=c.pop()}else if("@popall"===_.next)c=c.popall();else{let e=vg(this._lexer,_.next,y,v,b);if("@"===e[0]&&(e=e.substr(1)),!yg(this._lexer,e))throw bg(this._lexer,"trying to set a next state '"+e+"' that is undefined in rule: "+this._safeRuleName(w));c=c.push(e)}}_.log&&"string"==typeof _.log&&(f=this._lexer,p=this._lexer.languageId+": "+vg(this._lexer,_.log,y,v,b),console.log(`${f.languageId}: ${p}`))}if(null===C)throw bg(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(w));const x=i=>{let s=this._modeService.getModeIdForLanguageName(i);s&&(i=s);const o=this._getNestedEmbeddedModeData(i);if(h<a){const i=e.substr(h);return this._nestedTokenize(i,t,Cg.create(c,o),n+h,r)}return Cg.create(c,o)};if(Array.isArray(C)){if(u&&u.groups.length>0)throw bg(this._lexer,"groups cannot be nested: "+this._safeRuleName(w));if(v.length!==C.length+1)throw bg(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(w));let e=0;for(let t=1;t<v.length;t++)e+=v[t].length;if(e!==y.length)throw bg(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(w));u={rule:w,matches:v,groups:[]};for(let e=0;e<C.length;e++)u.groups[e]={action:C[e],matched:v[e+1]};h-=y.length}else{{if("@rematch"===C&&(h-=y.length,y="",v=null,C="",null!==S))return x(S);if(0===y.length){if(0===a||g!==c.depth||b!==c.state||(u?u.groups.length:0)!==m)continue;throw bg(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(w))}let e=null;if(dg(C)&&0===C.indexOf("@brackets")){let t=C.substr("@brackets".length),i=Lg(this._lexer,y);if(!i)throw bg(this._lexer,"@brackets token returned but no bracket defined as: "+y);e=mg(i.token+t)}else{e=mg(""===C?"":C+this._lexer.tokenPostfix)}i<s&&r.emit(i+n,e)}if(null!==S)return x(S)}}var f,p;return Cg.create(c,l)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let e=Pd.get(t);if(e)return new Sg(t,e.getInitialState())}return new Sg(t||Bd,Rd)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._modeId)return e;let t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function Lg(e,t){if(!t)return null;t=gg(e,t);let i=e.brackets;for(const e of i){if(e.open===t)return{token:e.token,bracketType:1};if(e.close===t)return{token:e.token,bracketType:-1}}return null}var Ng;const Mg=null===(Ng=window.trustedTypes)||void 0===Ng?void 0:Ng.createPolicy("standaloneColorizer",{createHTML:e=>e});class Og{static colorizeElement(e,t,i,n){let r=(n=n||{}).theme||"vs",s=n.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!s)return console.error("Mode not detected"),Promise.resolve();e.setTheme(r);let o=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+r;return this.colorize(t,o||"",s,n).then((e=>{var t;const n=null!==(t=null==Mg?void 0:Mg.createHTML(e))&&void 0!==t?t:e;i.innerHTML=n}),(e=>console.error(e)))}static colorize(e,t,i,n){let r=4;n&&"number"==typeof n.tabSize&&(r=n.tabSize),Kc(t)&&(t=t.substr(1));let s=pc(t),o=e.getModeId(i);if(!o)return Promise.resolve(Ig(s,r));e.triggerMode(o);const a=Pd.get(o);if(a)return Dg(s,r,a);const l=Pd.getPromise(o);return new Promise(l?(e,t)=>{l.then((i=>{Dg(s,r,i).then(e,t)}),t)}:(e,t)=>{let i=null,n=null;const a=()=>{i&&(i.dispose(),i=null),n&&(n.dispose(),n=null);const a=Pd.get(o);a?Dg(s,r,a).then(e,t):e(Ig(s,r))};n=new Ya,n.cancelAndSet(a,500),i=Pd.onDidChange((e=>{e.changedLanguages.indexOf(o)>=0&&a()}))})}static colorizeLine(e,t,i,n,r=4){const s=lg.isBasicASCII(e,t),o=lg.containsRTL(e,s,i);return tg(new Yp(!1,!0,e,!1,s,o,0,n,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){let n=e.getLineContent(t);e.forceTokenization(t);let r=e.getLineTokens(t).inflate();return this.colorizeLine(n,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,i)}}function Dg(e,t,i){return new Promise(((n,r)=>{const s=()=>{const o=function(e,t,i){let n=[],r=i.getInitialState();for(let s=0,o=e.length;s<o;s++){let o=e[s],a=i.tokenize2(o,!0,r,0);jp.convertToEndOffset(a.tokens,o.length);let l=new jp(a.tokens,o);const c=lg.isBasicASCII(o,!0),h=lg.containsRTL(o,c,!0);let u=tg(new Yp(!1,!0,o,!1,c,h,0,l.inflate(),[],t,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(u.html),n.push("<br/>"),r=a.endState}return n.join("")}(e,t,i);if(i instanceof Tg){const e=i.getLoadStatus();if(!1===e.loaded)return void e.promise.then(s,r)}n(o)};s()}))}function Ig(e,t){let i=[];const n=new Uint32Array(2);n[0]=0,n[1]=16793600;for(let r=0,s=e.length;r<s;r++){let s=e[r];n[0]=s.length;const o=new jp(n,s),a=lg.isBasicASCII(s,!0),l=lg.containsRTL(s,a,!0);let c=tg(new Yp(!1,!0,s,!1,a,l,0,o,[],t,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(c.html),i.push("<br/>")}return i.join("")}var Ag;!function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(Ag||(Ag={})),function(e){const t="error",i="warning",n="info";e.fromValue=function(r){return r?kc(t,r)?e.Error:kc(i,r)||kc("warn",r)?e.Warning:kc(n,r)?e.Info:e.Ignore:e.Ignore},e.toString=function(r){switch(r){case e.Error:return t;case e.Warning:return i;case e.Info:return n;default:return"ignore"}}}(Ag||(Ag={}));const Pg=Ag;function Rg(e){return!(!e||"function"!=typeof e.getEditorType)&&e.getEditorType()===uu.ICodeEditor}const Bg=ga("IWorkspaceEditService");class Fg{constructor(e){this.metadata=e}static convert(e){return e.edits.map((e=>{if(Mh(t=e)&&uo.isUri(t.resource)&&Mh(t.edit))return new Wg(e.resource,e.edit,e.modelVersionId,e.metadata);var t;if(function(e){return Mh(e)&&(Boolean(e.newUri)||Boolean(e.oldUri))}(e))return new Vg(e.oldUri,e.newUri,e.options,e.metadata);throw new Error("Unsupported edit")}))}}class Wg extends Fg{constructor(e,t,i,n){super(n),this.resource=e,this.textEdit=t,this.versionId=i}}class Vg extends Fg{constructor(e,t,i,n){super(n),this.oldResource=e,this.newResource=t,this.options=i}}const zg=new class{constructor(){this.data=new Map}add(e,t){Jh(Nh(e)),Jh(Mh(t)),Jh(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}},Hg="base.contributions.json";const jg=new class{constructor(){this._onDidChangeSchema=new ms,this.schemasById={}}registerSchema(e,t){var i;this.schemasById[(i=e,i.length>0&&"#"===i.charAt(i.length-1)?i.substring(0,i.length-1):i)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}};zg.add(Hg,jg);const Ug="base.contributions.configuration",Gg={properties:{},patternProperties:{}},Kg={properties:{},patternProperties:{}},$g={properties:{},patternProperties:{}},qg={properties:{},patternProperties:{}},Zg={properties:{},patternProperties:{}},Yg={properties:{},patternProperties:{}},Xg="vscode://schemas/settings/resourceLanguage",Qg=zg.as(Hg);const Jg=new RegExp("\\[.*\\]$");function em(e){return e.substring(1,e.length-1)}const tm=new class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new ms,this._onDidUpdateConfiguration=new ms,this.defaultValues={},this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:On(0,"Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},Qg.registerSchema(Xg,this.resourceLanguageSettingsSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=[];e.forEach((e=>{i.push(...this.validateAndRegisterProperties(e,t,e.extensionInfo)),this.configurationContributors.push(e),this.registerJSONConfiguration(e)})),Qg.registerSchema(Xg,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}validateAndRegisterProperties(e,t=!0,i,n=3){var r;n=Ah(e.scope)?n:e.scope;let s=[],o=e.properties;if(o)for(let e in o){if(t&&im(e)){delete o[e];continue}const a=o[e];this.updatePropertyDefaultValue(e,a),Jg.test(e)?a.scope=void 0:(a.scope=Ah(a.scope)?n:a.scope,a.restricted=Ah(a.restricted)?!!(null===(r=null==i?void 0:i.restrictedConfigurations)||void 0===r?void 0:r.includes(e)):a.restricted),!o[e].hasOwnProperty("included")||o[e].included?(this.configurationProperties[e]=o[e],!o[e].deprecationMessage&&o[e].markdownDeprecationMessage&&(o[e].deprecationMessage=o[e].markdownDeprecationMessage),s.push(e)):(this.excludedConfigurationProperties[e]=o[e],delete o[e])}let a=e.allOf;if(a)for(let e of a)s.push(...this.validateAndRegisterProperties(e,t,i,n));return s}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=e=>{let i=e.properties;if(i)for(const e in i)this.updateSchema(e,i[e]);let n=e.allOf;n&&n.forEach(t)};t(e)}updateSchema(e,t){switch(Gg.properties[e]=t,t.scope){case 1:Kg.properties[e]=t;break;case 2:$g.properties[e]=t;break;case 6:qg.properties[e]=t;break;case 3:Zg.properties[e]=t;break;case 4:Yg.properties[e]=t;break;case 5:Yg.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:On(0,"Configure editor settings to be overridden for a language."),errorMessage:On(0,"This setting does not support per-language configuration."),$ref:Xg};this.updatePropertyDefaultValue(t,i),Gg.properties[t]=i,Kg.properties[t]=i,$g.properties[t]=i,qg.properties[t]=i,Zg.properties[t]=i,Yg.properties[t]=i}this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let i=this.defaultValues[e];Ih(i)&&(i=t.default),Ih(i)&&(i=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=i}};function im(e){return e.trim()?Jg.test(e)?On(0,"Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0!==tm.getConfigurationProperties()[e]?On(0,"Cannot register '{0}'. This property is already registered.",e):null:On(0,"Cannot register an empty property")}zg.add(Ug,tm);const nm=Object.prototype.hasOwnProperty;class rm{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),0===i.size&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}}const sm=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new ms,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))}},om=Object.hasOwnProperty;class am{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class lm{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class cm{static readOptions(e){const t=e,i=new lm;for(const e of zr){const n="_never_"===e.name?void 0:t[e.name];i._write(e.id,n)}return i}static validateOptions(e){const t=new gr;for(const i of zr)t._write(i.id,i.validate(e._read(i.id)));return t}static computeOptions(e,t){const i=new am;for(const n of zr)i._write(n.id,n.compute(t,i,e._read(n.id)));return i}static _deepEquals(e,t){if("object"!=typeof e||"object"!=typeof t)return e===t;if(Array.isArray(e)||Array.isArray(t))return!(!Array.isArray(e)||!Array.isArray(t))&&gp(e,t);for(let i in e)if(!cm._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let n=!1;for(const r of zr){const s=!cm._deepEquals(e._read(r.id),t._read(r.id));i[r.id]=s,s&&(n=!0)}return n?new pr(i):null}}function hm(e){const t=e.wordWrap;!0===t?e.wordWrap="on":!1===t&&(e.wordWrap="off");const i=e.lineNumbers;!0===i?e.lineNumbers="on":!1===i&&(e.lineNumbers="off");!1===e.autoClosingBrackets&&(e.autoClosingBrackets="never",e.autoClosingQuotes="never",e.autoSurround="never");"visible"===e.cursorBlinking&&(e.cursorBlinking="solid");const n=e.renderWhitespace;!0===n?e.renderWhitespace="boundary":!1===n&&(e.renderWhitespace="none");const r=e.renderLineHighlight;!0===r?e.renderLineHighlight="line":!1===r&&(e.renderLineHighlight="none");const s=e.acceptSuggestionOnEnter;!0===s?e.acceptSuggestionOnEnter="on":!1===s&&(e.acceptSuggestionOnEnter="off");const o=e.tabCompletion;!1===o?e.tabCompletion="off":!0===o&&(e.tabCompletion="onlySnippets");const a=e.suggest;if(a&&"object"==typeof a.filteredTypes&&a.filteredTypes){const e={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};(function(e,t){for(let i in e)if(nm.call(e,i)&&!1===t({key:i,value:e[i]},(function(){delete e[i]})))return})(e,(e=>{const t=a.filteredTypes[e.key];!1===t&&(a[e.value]=t)}))}const l=e.hover;!0===l?e.hover={enabled:!0}:!1===l&&(e.hover={enabled:!1});const c=e.parameterHints;!0===c?e.parameterHints={enabled:!0}:!1===c&&(e.parameterHints={enabled:!1});const h=e.autoIndent;!0===h?e.autoIndent="full":!1===h&&(e.autoIndent="advanced");const u=e.matchBrackets;!0===u?e.matchBrackets="always":!1===u&&(e.matchBrackets="never")}function um(e){const t=eu(e);return hm(t),t}class dm extends as{constructor(e,t){super(),this._onDidChange=this._register(new ms),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new ms),this.onDidChangeFast=this._onDidChangeFast.event,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new mr,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=um(t),this._readOptions=cm.readOptions(this._rawOptions),this._validatedOptions=cm.validateOptions(this._readOptions),this._register(au.onDidChangeZoomLevel((e=>this._recomputeOptions()))),this._register(sm.onDidChangeTabFocus((e=>this._recomputeOptions())))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(e){const i=cm.checkEquals(e,t);if(null===i)return;this.options=t,this._onDidChangeFast.fire(i),this._onDidChange.fire(i)}else this.options=t}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=cu.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:sm.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return cm.computeOptions(this._validatedOptions,i)}static _subsetEquals(e,t){for(const i in t)if(om.call(t,i)){const n=t[i],r=e[i];if(r===n)continue;if(Array.isArray(r)&&Array.isArray(n)){if(!gp(r,n))return!1;continue}if(r&&"object"==typeof r&&n&&"object"==typeof n){if(!this._subsetEquals(r,n))return!1;continue}return!1}return!0}updateOptions(e){if(void 0===e)return;const t=um(e);dm._subsetEquals(this._rawOptions,t)||(this._rawOptions=iu(this._rawOptions,t||{}),this._readOptions=cm.readOptions(this._rawOptions),this._validatedOptions=cm.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=dm._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}}const fm=Object.freeze({id:"editor",order:5,type:"object",title:On(0,"Editor"),scope:5}),pm=zg.as(Ug),gm=Object.assign(Object.assign({},fm),{properties:{"editor.tabSize":{type:"number",default:Pr,minimum:1,markdownDescription:On(0,"The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Br,markdownDescription:On(0,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Fr,markdownDescription:On(0,"Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Wr,description:On(0,"Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Vr,description:On(0,"Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:On(0,"Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[On(0,"Only suggest words from the active document."),On(0,"Suggest words from all open documents of the same language."),On(0,"Suggest words from all open documents.")],description:On(0,"Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[On(0,"Semantic highlighting enabled for all color themes."),On(0,"Semantic highlighting disabled for all color themes."),On(0,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:On(0,"Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:On(0,"Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:On(0,"Lines above this length will not be tokenized for performance reasons")},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:On(0,"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:On(0,"Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:On(0,"When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:On(0,"Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:On(0,"Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[On(0,"Lines will never wrap."),On(0,"Lines will wrap at the viewport width."),On(0,"Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function mm(e){return void 0!==e.type||void 0!==e.anyOf}for(const e of zr){const t=e.schema;if(void 0!==t)if(mm(t))gm.properties[`editor.${e.name}`]=t;else for(let e in t)om.call(t,e)&&(gm.properties[e]=t[e])}let bm=null;function vm(){return null===bm&&(bm=Object.create(null),Object.keys(gm.properties).forEach((e=>{bm[e]=!0}))),bm}pm.registerConfiguration(gm);class ym{static insert(e,t){return{range:new xo(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}const _m=ga("configurationService");function wm(e,t){const i=Object.create(null);for(let n in e)Sm(i,n,e[n],t);return i}function Sm(e,t,i,n){const r=t.split("."),s=r.pop();let o=e;for(let e=0;e<r.length;e++){let i=r[e],s=o[i];switch(typeof s){case"undefined":s=o[i]=Object.create(null);break;case"object":break;default:return void n(`Ignoring ${t} as ${r.slice(0,e+1).join(".")} is ${JSON.stringify(s)}`)}o=s}if("object"==typeof o&&null!==o)try{o[s]=i}catch(e){n(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(o)}`)}function Cm(e,t){xm(e,t.split("."))}function xm(e,t){const i=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(i)){const n=e[i];"object"!=typeof n||Array.isArray(n)||(xm(n,t),0===Object.keys(n).length&&delete e[i])}}else delete e[i]}class km{constructor(e={},t=[],i=[]){this._contents=e,this._keys=t,this._overrides=i,this.isFrozen=!1}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?function(e,t,i){const n=function(e,t){let i=e;for(const e of t){if("object"!=typeof i||null===i)return;i=i[e]}return i}(e,t.split("."));return void 0===n?i:n}(this.contents,e):this.contents}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;let i={};for(const e of bp([...Object.keys(this.contents),...Object.keys(t)])){let n=this.contents[e],r=t[e];r&&("object"==typeof n&&"object"==typeof r?(n=eu(n),this.mergeContents(n,r)):n=r),i[e]=n}return new km(i,this.keys,this.overrides)}merge(...e){const t=eu(this.contents),i=eu(this.overrides),n=[...this.keys];for(const r of e){this.mergeContents(t,r.contents);for(const e of r.overrides){const[t]=i.filter((t=>gp(t.identifiers,e.identifiers)));t?this.mergeContents(t.contents,e.contents):i.push(eu(e))}for(const e of r.keys)-1===n.indexOf(e)&&n.push(e)}return new km(t,n,i)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const i of Object.keys(t))i in e&&Mh(e[i])&&Mh(t[i])?this.mergeContents(e[i],t[i]):e[i]=eu(t[i])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?function(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const i in e)if(tu.call(e,i)){const n=e[i];"object"!=typeof n||Object.isFrozen(n)||t.push(n)}}return e}(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),Sm(this.contents,e,t,(e=>{throw new Error(e)}))}removeValue(e){this.removeKey(e)&&Cm(this.contents,e)}addKey(e){let t=this.keys.length;for(let i=0;i<t;i++)0===e.indexOf(this.keys[i])&&(t=i);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return-1!==t&&(this.keys.splice(t,1),!0)}}class Em extends km{constructor(){const e=function(){const e=Object.create(null),t=zg.as(Ug).getConfigurationProperties();for(let i in t)Sm(e,i,t[i].default,(e=>console.error(`Conflict in default settings: ${e}`)));return e}(),t=function(){const e=zg.as(Ug).getConfigurationProperties();return Object.keys(e)}(),i=[];for(const t of Object.keys(e))Jg.test(t)&&i.push({identifiers:[em(t).trim()],keys:Object.keys(e[t]),contents:wm(e[t],(e=>console.error(`Conflict in default settings file: ${e}`)))});super(e,t,i)}}class Tm{constructor(e,t,i=new km,n=new km,r=new lh,s=new km,o=new lh,a=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=i,this._workspaceConfiguration=n,this._folderConfigurations=r,this._memoryConfiguration=s,this._memoryConfigurationByResource=o,this._freeze=a,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new lh,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidateConfigurationModel(t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=new km,this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,void 0===t?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let i=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?i.override(e.overrideIdentifier):i}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const r=this._memoryConfigurationByResource.get(e);r&&(i=i.merge(r))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce(((e,t)=>{const{contents:i,overrides:n,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:r}]),e}),[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.user),n=this.parseConfigurationModel(e.workspace),r=e.folders.reduce(((e,t)=>(e.set(uo.revive(t[0]),this.parseConfigurationModel(t[1])),e)),new lh);return new Tm(t,i,new km,n,r,new km,new lh,!1)}static parseConfigurationModel(e){return new km(e.contents,e.keys,e.overrides).freeze()}}class Lm{constructor(e,t,i,n){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this._previousConfiguration=void 0;const r=new Set;e.keys.forEach((e=>r.add(e))),e.overrides.forEach((([,e])=>e.forEach((e=>r.add(e))))),this.affectedKeys=[...r.values()];const s=new km;this.affectedKeys.forEach((e=>s.setValue(e,{}))),this.affectedKeysTree=s.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=Tm.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var i;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){return!nu(this.previousConfiguration?this.previousConfiguration.getValue(e,t,null===(i=this.previous)||void 0===i?void 0:i.workspace):void 0,this.currentConfiguraiton.getValue(e,t,this.currentWorkspace))}return!0}return!1}doesAffectedKeysTreeContains(e,t){let i,n=wm({[t]:!0},(()=>{}));for(;"object"==typeof n&&(i=Object.keys(n)[0]);){if(!(e=e[i]))return!1;n=n[i]}return!0}}class Nm extends as{constructor(e,t,i,n,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=r,this._onDidUpdateKeybindings=this._register(new ms),this._currentChord=null,this._currentChordChecker=new Xa,this._currentChordStatusMessage=null,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Ya,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ps.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const i=this.resolveKeyboardEvent(e);if(i.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[n]=i.getDispatchParts();if(null===n)return null;const r=this._contextKeyService.getContext(t),s=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(r,s,n)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(On(0,"({0}) was pressed. Waiting for second key of chord...",t));const i=Date.now();this._currentChordChecker.cancelAndSet((()=>{this._documentHasFocus()?Date.now()-i>5e3&&this._leaveChordMode():this._leaveChordMode()}),500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchParts();return null!==n&&null===this._currentSingleModifier?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null}),300),!1):null!==n&&n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1)}_doDispatch(e,t,i=!1){let n=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let r=null,s=null;if(i){const[t]=e.getSingleModifierDispatchParts();r=t,s=t}else[r]=e.getDispatchParts(),s=this._currentChord?this._currentChord.keypress:null;if(null===r)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;const o=this._contextKeyService.getContext(t),a=e.getLabel(),l=this._getResolver().resolve(o,s,r);return this._logService.trace("KeybindingService#dispatch",a,null==l?void 0:l.commandId),l&&l.enterChord?(n=!0,this._enterChordMode(r,a),n):(this._currentChord&&(l&&l.commandId||(this._notificationService.status(On(0,"The key combination ({0}, {1}) is not a command.",this._currentChord.label,a),{hideAfter:1e4}),n=!0)),this._leaveChordMode(),l&&l.commandId&&(l.bubble||(n=!0),void 0===l.commandArgs?this._commandService.executeCommand(l.commandId).then(void 0,(e=>this._notificationService.warn(e))):this._commandService.executeCommand(l.commandId,l.commandArgs).then(void 0,(e=>this._notificationService.warn(e))),this._telemetryService.publicLog2("workbenchActionExecuted",{id:l.commandId,from:"keybinding"})),n)}mightProducePrintableCharacter(e){return!e.ctrlKey&&!e.metaKey&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30)}}class Mm{constructor(e,t,i){this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let t=0,i=e.length;t<i;t++){const i=e[t].command;i&&this._defaultBoundCommands.set(i,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Mm.combine(e,t);for(let e=0,t=this._keybindings.length;e<t;e++){let t=this._keybindings[e];0!==t.keypressParts.length&&(t.when&&0===t.when.type||this._addKeyPress(t.keypressParts[0],t))}}static _isTargetedForRemoval(e,t,i,n,r){if(e.command!==n)return!1;if(t&&e.keypressParts[0]!==t)return!1;if(i&&e.keypressParts[1]!==i)return!1;if(r){if(!e.when)return!1;if(!r.equals(e.when))return!1}return!0}static combine(e,t){e=e.slice(0);let i=[];for(const n of t){if(!n.command||0===n.command.length||"-"!==n.command.charAt(0)){i.push(n);continue}const t=n.command.substr(1),r=n.keypressParts[0],s=n.keypressParts[1],o=n.when;for(let i=e.length-1;i>=0;i--)this._isTargetedForRemoval(e[i],r,s,t,o)&&e.splice(i,1)}return e.concat(i)}_addKeyPress(e,t){const i=this._map.get(e);if(void 0===i)return this._map.set(e,[t]),void this._addToLookupMap(t);for(let e=i.length-1;e>=0;e--){let n=i[e];if(n.command===t.command)continue;const r=n.keypressParts.length>1,s=t.keypressParts.length>1;r&&s&&n.keypressParts[1]!==t.keypressParts[1]||Mm.whenIsEntirelyIncluded(n.when,t.when)&&this._removeFromLookupMap(n)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);void 0===t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(void 0!==t)for(let i=0,n=t.length;i<n;i++)if(t[i]===e)return void t.splice(i,1)}static whenIsEntirelyIncluded(e,t){return!t||!!e&&this._implies(e,t)}static _implies(e,t){const i=e=>9===e.type?e.expr:[e];let n=i(e.negate()).concat(i(t));for(let e=0;e<n.length;e++){const t=n[e].negate();for(let i=e+1;i<n.length;i++){const e=n[i];if(t.equals(e))return!0}}return!1}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){let i=this._lookupMap.get(e);if(void 0===i||0===i.length)return null;const n=t&&Array.from(i).reverse().find((e=>t.contextMatchesRules(e.when)));return null!=n?n:i[i.length-1]}resolve(e,t,i){this._log(`| Resolving ${i}${t?` chorded from ${t}`:""}`);let n=null;if(null!==t){const e=this._map.get(t);if(void 0===e)return this._log("\\ No keybinding entries."),null;n=[];for(let t=0,r=e.length;t<r;t++){let r=e[t];r.keypressParts[1]===i&&n.push(r)}}else{const e=this._map.get(i);if(void 0===e)return this._log("\\ No keybinding entries."),null;n=e}let r=this._findCommand(e,n);return r?null===t&&r.keypressParts.length>1&&null!==r.keypressParts[1]?(this._log(`\\ From ${n.length} keybinding entries, matched chord, when: ${Om(r.when)}, source: ${Dm(r)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${n.length} keybinding entries, matched ${r.command}, when: ${Om(r.when)}, source: ${Dm(r)}.`),{enterChord:!1,leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${n.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){let n=t[i];if(Mm.contextMatchesRules(e,n.when))return n}return null}static contextMatchesRules(e,t){return!t||t.evaluate(e)}}function Om(e){return e?`${e.serialize()}`:"no when condition"}function Dm(e){return e.extensionId?e.isBuiltinExtension?`built-in extension ${e.extensionId}`:`user extension ${e.extensionId}`:e.isDefault?"built-in":"user"}class Im{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(1===rr){if(e&&e.win)return e.win}else if(2===rr){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=Im.bindToCurrentPlatform(e);if(t&&t.primary){const i=Ns(t.primary,rr);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let i=0,n=t.secondary.length;i<n;i++){const n=Ns(t.secondary[i],rr);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,-i-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Hh.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||(e>=31&&e<=56||(80===e||81===e||82===e||83===e||84===e||85===e||86===e||110===e||111===e||87===e||88===e||89===e||90===e||91===e||92===e))}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&Im._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,i,n,r,s){1===rr&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:s,weight1:n,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(Pm)),this._cachedMergedKeybindings.slice(0)}}const Am=new Im;function Pm(e,t){return e.weight1!==t.weight1?e.weight1-t.weight1:e.command<t.command?-1:e.command>t.command?1:e.weight2-t.weight2}zg.add("platform.keybindingsRegistry",Am);class Rm{constructor(e,t,i,n,r,s,o){this.resolvedKeybinding=e,this.keypressParts=e?Bm(e.getDispatchParts()):[],e&&0===this.keypressParts.length&&(this.keypressParts=Bm(e.getSingleModifierDispatchParts())),this.bubble=!!t&&94===t.charCodeAt(0),this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=r,this.extensionId=s,this.isBuiltinExtension=o}}function Bm(e){let t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];if(!n)return t;t.push(n)}return t}class Fm{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(0===t.length)return null;const n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],o=i(s);if(null===o)return null;n[r]=zm(s,o,this.modifierLabels[e])}return n.join(" ")}}const Wm=new Fm({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:On(0,"Ctrl"),shiftKey:On(0,"Shift"),altKey:On(0,"Alt"),metaKey:On(0,"Windows"),separator:"+"},{ctrlKey:On(0,"Ctrl"),shiftKey:On(0,"Shift"),altKey:On(0,"Alt"),metaKey:On(0,"Super"),separator:"+"}),Vm=new Fm({ctrlKey:On(0,"Control"),shiftKey:On(0,"Shift"),altKey:On(0,"Alt"),metaKey:On(0,"Command"),separator:"+"},{ctrlKey:On(0,"Control"),shiftKey:On(0,"Shift"),altKey:On(0,"Alt"),metaKey:On(0,"Windows"),separator:"+"},{ctrlKey:On(0,"Control"),shiftKey:On(0,"Shift"),altKey:On(0,"Alt"),metaKey:On(0,"Super"),separator:"+"});function zm(e,t,i){if(null===t)return"";const n=[];return e.ctrlKey&&n.push(i.ctrlKey),e.shiftKey&&n.push(i.shiftKey),e.altKey&&n.push(i.altKey),e.metaKey&&n.push(i.metaKey),""!==t&&n.push(t),n.join(i.separator)}class Hm extends class extends class{}{constructor(e,t){if(super(),0===t.length)throw Xr("parts");this._os=e,this._parts=t}getLabel(){return Wm.toLabel(this._os,this._parts,(e=>this._getLabel(e)))}getAriaLabel(){return Vm.toLabel(this._os,this._parts,(e=>this._getAriaLabel(e)))}isChord(){return this._parts.length>1}getParts(){return this._parts.map((e=>this._getPart(e)))}_getPart(e){return new Is(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map((e=>this._getDispatchPart(e)))}getSingleModifierDispatchParts(){return this._parts.map((e=>this._getSingleModifierDispatchPart(e)))}}{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(2===this._os)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return Ls.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Ls.toString(e.keyCode)}_getDispatchPart(e){return Hm.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Ls.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return 5!==e.keyCode||e.shiftKey||e.altKey||e.metaKey?4!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey?6!==e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?57!==e.keyCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}}const jm=ga("notificationService");const Um=ga("contextService");class Gm{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var Km,$m,qm,Zm,Ym,Xm,Qm,Jm,eb;!function(e){e.noSelection=On(0,"No selection"),e.singleSelectionRange=On(0,"Line {0}, Column {1} ({2} selected)"),e.singleSelection=On(0,"Line {0}, Column {1}"),e.multiSelectionRange=On(0,"{0} selections ({1} characters selected)"),e.multiSelection=On(0,"{0} selections"),e.emergencyConfOn=On(0,"Now changing the setting `accessibilitySupport` to 'on'."),e.openingDocs=On(0,"Now opening the Editor Accessibility documentation page."),e.readonlyDiffEditor=On(0," in a read-only pane of a diff editor."),e.editableDiffEditor=On(0," in a pane of a diff editor."),e.readonlyEditor=On(0," in a read-only code editor"),e.editableEditor=On(0," in a code editor"),e.changeConfigToOnMac=On(0,"To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),e.changeConfigToOnWinLinux=On(0,"To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),e.auto_on=On(0,"The editor is configured to be optimized for usage with a Screen Reader."),e.auto_off=On(0,"The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),e.tabFocusModeOnMsg=On(0,"Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),e.tabFocusModeOnMsgNoKb=On(0,"Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),e.tabFocusModeOffMsg=On(0,"Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),e.tabFocusModeOffMsgNoKb=On(0,"Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),e.openDocMac=On(0,"Press Command+H now to open a browser window with more information related to editor accessibility."),e.openDocWinLinux=On(0,"Press Control+H now to open a browser window with more information related to editor accessibility."),e.outroMsg=On(0,"You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),e.showAccessibilityHelpAction=On(0,"Show Accessibility Help")}(Km||(Km={})),function(e){e.inspectTokensAction=On(0,"Developer: Inspect Tokens")}($m||($m={})),function(e){e.gotoLineActionLabel=On(0,"Go to Line/Column...")}(qm||(qm={})),function(e){e.helpQuickAccessActionLabel=On(0,"Show all Quick Access Providers")}(Zm||(Zm={})),function(e){e.quickCommandActionLabel=On(0,"Command Palette"),e.quickCommandHelp=On(0,"Show And Run Commands")}(Ym||(Ym={})),function(e){e.quickOutlineActionLabel=On(0,"Go to Symbol..."),e.quickOutlineByCategoryActionLabel=On(0,"Go to Symbol by Category...")}(Xm||(Xm={})),function(e){e.editorViewAccessibleLabel=On(0,"Editor content"),e.accessibilityHelpMessage=On(0,"Press Alt+F1 for Accessibility Options.")}(Qm||(Qm={})),function(e){e.toggleHighContrast=On(0,"Toggle High Contrast Theme")}(Jm||(Jm={})),function(e){e.bulkEditServiceSummary=On(0,"Made {0} edits in {1} files")}(eb||(eb={}));var tb=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},ib=function(e,t){return function(i,n){t(i,n,e)}},nb=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class rb{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new ms}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let sb=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;var i,n,r;return this.editor&&(i=this.editor,n=t=>this.findModel(t,e),r=t=>this.findModel(t.getOriginalEditor(),e)||this.findModel(t.getModifiedEditor(),e),t=Rg(i)?n(i):r(i)),t?Promise.resolve(new cs(new rb(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let i=this.modelService.getModel(t);return i&&i.uri.toString()!==t.toString()?null:i}};sb=tb([ib(0,$u)],sb);class ob{show(){return ob.NULL_PROGRESS_RUNNER}showWhile(e,t){return nb(this,void 0,void 0,(function*(){yield e}))}}ob.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class ab{confirm(e){return this.doConfirm(e).then((e=>({confirmed:e,checkboxChecked:!1})))}doConfirm(e){let t=e.message;return e.detail&&(t=t+"\n\n"+e.detail),Promise.resolve(window.confirm(t))}show(e,t,i,n){return Promise.resolve({choice:0})}}class lb{info(e){return this.notify({severity:Pg.Info,message:e})}warn(e){return this.notify({severity:Pg.Warning,message:e})}error(e){return this.notify({severity:Pg.Error,message:e})}notify(e){switch(e.severity){case Pg.Error:console.error(e.message);break;case Pg.Warning:console.warn(e.message);break;default:console.log(e.message)}return lb.NO_OP}status(e,t){return as.None}}lb.NO_OP=new class{};class cb{constructor(e){this._onWillExecuteCommand=new ms,this._onDidExecuteCommand=new ms,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=Hh.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const n=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(e){return Promise.reject(e)}}}class hb extends Nm{constructor(e,t,i,n,r,s){super(e,t,i,n,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(cl(s,jl.KEY_DOWN,(e=>{const t=new Ra(e);this._dispatch(t,t.target)&&(t.preventDefault(),t.stopPropagation())}))),this._register(cl(window,jl.KEY_UP,(e=>{const t=new Ra(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()})))}addDynamicKeybinding(e,t,i,n){const r=Ns(t,rr),s=new os;return r&&(this._dynamicKeybindings.push({keybinding:r,command:e,when:n,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),s.add(ss((()=>{for(let t=0;t<this._dynamicKeybindings.length;t++){if(this._dynamicKeybindings[t].command===e)return this._dynamicKeybindings.splice(t,1),void this.updateResolver({source:1})}})))),s.add(Hh.registerCommand(e,i)),this.updateResolver({source:1}),s}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Am.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Mm(e,t,(e=>this._log(e)))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let i=[],n=0;for(const r of e){const e=r.when||void 0,s=r.keybinding;if(s){const o=this.resolveKeybinding(s);for(const s of o)i[n++]=new Rm(s,r.command,r.commandArgs,e,t,null,!1)}else i[n++]=new Rm(void 0,r.command,r.commandArgs,e,t,null,!1)}return i}resolveKeybinding(e){return[new Hm(e,rr)]}resolveKeyboardEvent(e){let t=new Os(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new Hm(t,rr)}}function ub(e){return e&&"object"==typeof e&&(!e.overrideIdentifier||"string"==typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof uo)}class db{constructor(){this._onDidChangeConfiguration=new ms,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new Tm(new Em,new km)}getValue(e,t){const i="string"==typeof e?e:void 0,n=ub(e)?e:ub(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){const t={data:this._configuration.toData()};let i=[];for(const t of e){const[e,n]=t;this.getValue(e)!==n&&(this._configuration.updateValue(e,n),i.push(e))}if(i.length>0){const e=new Lm({keys:i,overrides:[]},t,this._configuration);e.source=7,e.sourceConfig=null,this._onDidChangeConfiguration.fire(e)}return Promise.resolve()}}class fb{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new ms,this.configurationService.onDidChangeConfiguration((e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(t,i)=>e.affectsConfiguration(i)})}))}getValue(e,t,i){const n=(Co.isIPosition(t)?t:null)?"string"==typeof i?i:void 0:"string"==typeof t?t:void 0;return void 0===n?this.configurationService.getValue():this.configurationService.getValue(n)}}let pb=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&"auto"!==i?i:Qn||Xn?"\n":"\r\n"}};pb=tb([ib(0,_m)],pb);class gb{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class mb{constructor(){const e=uo.from({scheme:mb.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new Gm({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}function bb(e,t,i){if(!t)return;if(!(e instanceof db))return;let n=[];Object.keys(t).forEach((e=>{(function(e){return vm()[`editor.${e}`]||!1})(e)&&n.push([`editor.${e}`,t[e]]),i&&function(e){return vm()[`diffEditor.${e}`]||!1}(e)&&n.push([`diffEditor.${e}`,t[e]])})),n.length>0&&e.updateValues(n)}mb.SCHEME="inmemory";class vb{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return nb(this,void 0,void 0,(function*(){const t=new Map;for(let i of e){if(!(i instanceof Wg))throw new Error("bad edit - only text edits are supported");const e=this._modelService.getModel(i.resource);if(!e)throw new Error("bad edit - model not found");if("number"==typeof i.versionId&&e.getVersionId()!==i.versionId)throw new Error("bad state - model changed in the meantime");let n=t.get(e);n||(n=[],t.set(e,n)),n.push(ym.replaceMove(xo.lift(i.textEdit.range),i.textEdit.text))}let i=0,n=0;for(const[e,r]of t)e.pushStackElement(),e.pushEditOperations([],r,(()=>[])),e.pushStackElement(),n+=1,i+=r.length;return{ariaSummary:lc(eb.bulkEditServiceSummary,i,n)}}))}}class yb{getUriLabel(e,t){return"file"===e.scheme?e.fsPath:e.path}}class _b{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=ps.None}get dimension(){return this._dimension||(this._dimension=wl(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;null===(e=this._codeEditorService.getFocusedCodeEditor())||void 0===e||e.focus()}}let wb,Sb,Cb,xb,kb;function Eb(e){wb&&(Sb.textContent!==e?(ol(Cb),Tb(Sb,e)):(ol(Sb),Tb(Cb,e)))}function Tb(e,t){ol(e),t.length>2e4&&(t=t.substr(0,2e4)),e.textContent=t,e.style.visibility="hidden",e.style.visibility="visible"}const Lb=ga("markerDecorationsService");var Nb=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Mb extends as{constructor(e,t="",i="",n=!0,r){super(),this._onDidChange=this._register(new ms),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._checked=!1,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return Nb(this,void 0,void 0,(function*(){this._actionCallback&&(yield this._actionCallback(e))}))}}class Ob extends as{constructor(){super(...arguments),this._onBeforeRun=this._register(new ms),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new ms),this.onDidRun=this._onDidRun.event}run(e,t){return Nb(this,void 0,void 0,(function*(){if(!e.enabled)return;let i;this._onBeforeRun.fire({action:e});try{yield this.runAction(e,t)}catch(e){i=e}this._onDidRun.fire({action:e,error:i})}))}runAction(e,t){return Nb(this,void 0,void 0,(function*(){yield e.run(t)}))}}class Db extends Mb{constructor(e){super(Db.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}Db.ID="vs.actions.separator";class Ib{constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=!1,this.id=e,this.label=t,this.class=n,this._actions=i}get actions(){return this._actions}dispose(){}run(){return Nb(this,void 0,void 0,(function*(){}))}}class Ab extends Mb{constructor(){super(Ab.ID,On(0,"(empty)"),void 0,!1)}}Ab.ID="vs.actions.empty";let Pb=ir||"";const Rb=new Map;Rb.set("false",!1),Rb.set("true",!0),Rb.set("isMac",Xn),Rb.set("isLinux",Qn),Rb.set("isWindows",Yn),Rb.set("isWeb",er),Rb.set("isMacNative",Xn&&!er),Rb.set("isEdge",Pb.indexOf("Edg/")>=0),Rb.set("isFirefox",Pb.indexOf("Firefox")>=0),Rb.set("isChrome",Pb.indexOf("Chrome")>=0),Rb.set("isSafari",Pb.indexOf("Safari")>=0);const Bb=Object.prototype.hasOwnProperty;class Fb{static has(e){return Hb.create(e)}static equals(e,t){return jb.create(e,t)}static regex(e,t){return Qb.create(e,t)}static not(e){return $b.create(e)}static and(...e){return ev.create(e)}static or(...e){return tv.create(e)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let i=e.split("||");return tv.create(i.map((e=>this._deserializeAndExpression(e,t))))}static _deserializeAndExpression(e,t){let i=e.split("&&");return ev.create(i.map((e=>this._deserializeOne(e,t))))}static _deserializeOne(e,t){if((e=e.trim()).indexOf("!=")>=0){let i=e.split("!=");return Kb.create(i[0].trim(),this._deserializeValue(i[1],t))}if(e.indexOf("==")>=0){let i=e.split("==");return jb.create(i[0].trim(),this._deserializeValue(i[1],t))}if(e.indexOf("=~")>=0){let i=e.split("=~");return Qb.create(i[0].trim(),this._deserializeRegexValue(i[1],t))}if(e.indexOf(" in ")>=0){let t=e.split(" in ");return Ub.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const t=e.split(">=");return Zb.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const t=e.split(">");return qb.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const t=e.split("<=");return Xb.create(t[0].trim(),t[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const t=e.split("<");return Yb.create(t[0].trim(),t[1].trim())}return/^\!\s*/.test(e)?$b.create(e.substr(1).trim()):Hb.create(e)}static _deserializeValue(e,t){if("true"===(e=e.trim()))return!0;if("false"===e)return!1;let i=/^'([^']*)'$/.exec(e);return i?i[1].trim():e}static _deserializeRegexValue(e,t){if(!(i=e)||"string"!=typeof i||0===i.trim().length){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}var i;let n=e.indexOf("/"),r=e.lastIndexOf("/");if(n===r||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let s=e.slice(n+1,r),o="i"===e[r+1]?"i":"";try{return new RegExp(s,o)}catch(i){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${i}`);return console.warn(`bad regexp-value '${e}', parse error: ${i}`),null}}}function Wb(e,t){return e.cmp(t)}class Vb{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return zb.INSTANCE}}Vb.INSTANCE=new Vb;class zb{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Vb.INSTANCE}}zb.INSTANCE=new zb;class Hb{constructor(e){this.key=e,this.type=2}static create(e){const t=Rb.get(e);return"boolean"==typeof t?t?zb.INSTANCE:Vb.INSTANCE:new Hb(e)}cmp(e){return e.type!==this.type?this.type-e.type:rv(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return $b.create(this.key)}}class jb{constructor(e,t){this.key=e,this.value=t,this.type=4}static create(e,t){if("boolean"==typeof t)return t?Hb.create(e):$b.create(e);const i=Rb.get(e);if("boolean"==typeof i){return t===(i?"true":"false")?zb.INSTANCE:Vb.INSTANCE}return new jb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:sv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return Kb.create(this.key,this.value)}}class Ub{constructor(e,t){this.key=e,this.valueKey=t,this.type=10}static create(e,t){return new Ub(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:sv(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.indexOf(i)>=0:"string"==typeof i&&"object"==typeof t&&null!==t&&Bb.call(t,i)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return Gb.create(this)}}class Gb{constructor(e){this._actual=e,this.type=11}static create(e){return new Gb(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class Kb{constructor(e,t){this.key=e,this.value=t,this.type=5}static create(e,t){if("boolean"==typeof t)return t?$b.create(e):Hb.create(e);const i=Rb.get(e);if("boolean"==typeof i){return t===(i?"true":"false")?Vb.INSTANCE:zb.INSTANCE}return new Kb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:sv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return jb.create(this.key,this.value)}}class $b{constructor(e){this.key=e,this.type=3}static create(e){const t=Rb.get(e);return"boolean"==typeof t?t?Vb.INSTANCE:zb.INSTANCE:new $b(e)}cmp(e){return e.type!==this.type?this.type-e.type:rv(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return Hb.create(this.key)}}class qb{constructor(e,t){this.key=e,this.value=t,this.type=12}static create(e,t){return new qb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:sv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))>parseFloat(this.value)}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return Xb.create(this.key,this.value)}}class Zb{constructor(e,t){this.key=e,this.value=t,this.type=13}static create(e,t){return new Zb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:sv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))>=parseFloat(this.value)}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return Yb.create(this.key,this.value)}}class Yb{constructor(e,t){this.key=e,this.value=t,this.type=14}static create(e,t){return new Yb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:sv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))<parseFloat(this.value)}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return Zb.create(this.key,this.value)}}class Xb{constructor(e,t){this.key=e,this.value=t,this.type=15}static create(e,t){return new Xb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:sv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}evaluate(e){return parseFloat(e.getValue(this.key))<=parseFloat(this.value)}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return qb.create(this.key,this.value)}}class Qb{constructor(e,t){this.key=e,this.regexp=t,this.type=7}static create(e,t){return new Qb(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}evaluate(e){let t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return Jb.create(this)}}class Jb{constructor(e){this._actual=e,this.type=8}static create(e){return new Jb(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class ev{constructor(e){this.expr=e,this.type=6}static create(e){return ev._normalizeArr(e)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const i=Wb(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e){const t=[];let i=!1;for(const n of e)if(n)if(1!==n.type){if(0===n.type)return Vb.INSTANCE;6!==n.type?t.push(n):t.push(...n.expr)}else i=!0;if(0===t.length&&i)return zb.INSTANCE;if(0!==t.length){if(1===t.length)return t[0];for(t.sort(Wb);t.length>1;){const e=t[t.length-1];if(9!==e.type)break;t.pop();const i=t.pop(),n=tv.create(e.expr.map((e=>ev.create([e,i]))));n&&(t.push(n),t.sort(Wb))}return 1===t.length?t[0]:new ev(t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){let e=[];for(let t of this.expr)e.push(t.negate());return tv.create(e)}}class tv{constructor(e){this.expr=e,this.type=9}static create(e){const t=tv._normalizeArr(e);if(0!==t.length)return 1===t.length?t[0]:new tv(t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const i=Wb(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e){let t=[],i=!1;if(e){for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r)if(0!==r.type){if(1===r.type)return[zb.INSTANCE];9!==r.type?t.push(r):t=t.concat(r.expr)}else i=!0}if(0===t.length&&i)return[Vb.INSTANCE];t.sort(Wb)}return t}serialize(){return this.expr.map((e=>e.serialize())).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){let e=[];for(let t of this.expr)e.push(t.negate());const t=e=>9===e.type?e.expr:[e];for(;e.length>1;){const i=e.shift(),n=e.shift(),r=[];for(const e of t(i))for(const i of t(n))r.push(Fb.and(e,i));e.unshift(Fb.or(...r))}return e[0]}}class iv extends Hb{constructor(e,t,i){super(e),this._defaultValue=t,"object"==typeof i?iv._info.push(Object.assign(Object.assign({},i),{key:e})):!0!==i&&iv._info.push({key:e,description:i,type:null!=t?typeof t:void 0})}static all(){return iv._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return Fb.not(this.key)}isEqualTo(e){return Fb.equals(this.key,e)}}iv._info=[];const nv=ga("contextKeyService");function rv(e,t){return e<t?-1:e>t?1:0}function sv(e,t,i,n){return e<i?-1:e>i?1:t<n?-1:t>n?1:0}var ov;!function(e){e.DARK="dark",e.LIGHT="light",e.HIGH_CONTRAST="hc"}(ov||(ov={}));const av=ga("themeService");var lv,cv;function hv(e){return{id:e}}function uv(e){switch(e){case ov.DARK:return"vs-dark";case ov.HIGH_CONTRAST:return"hc-black";default:return"vs"}}!function(e){e.isThemeColor=function(e){return e&&"object"==typeof e&&"string"==typeof e.id}}(lv||(lv={})),function(e){e.isThemeIcon=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(void 0===e.color||lv.isThemeColor(e.color))};const t=new RegExp(`^\\$\\((${td.iconNameExpression}(?:${td.iconModifierExpression})?)\\)$`);e.fromString=function(e){const i=t.exec(e);if(!i)return;let[,n]=i;return{id:n}},e.modify=function(e,t){let i=e.id;const n=i.lastIndexOf("~");return-1!==n&&(i=i.substring(0,n)),t&&(i=`${i}~${t}`),{id:i}},e.isEqual=function(e,t){var i,n;return e.id===t.id&&(null===(i=e.color)||void 0===i?void 0:i.id)===(null===(n=t.color)||void 0===n?void 0:n.id)},e.asThemeIcon=function(e){return{id:e.id}},e.asClassNameArray=td.asClassNameArray,e.asClassName=td.asClassName,e.asCSSSelector=td.asCSSSelector}(cv||(cv={}));const dv="base.contributions.theming";let fv=new class{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new ms}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),ss((()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)}))}getThemingParticipants(){return this.themingParticipants}};function pv(e){return fv.onColorThemeChange(e)}zg.add(dv,fv);class gv extends as{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange((e=>this.onThemeChange(e))))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var mv=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},bv=function(e,t){return function(i,n){t(i,n,e)}};function vv(e){return void 0!==e.command}class yv{constructor(e){this.id=yv._idPool++,this._debugName=e}}yv._idPool=0,yv.CommandPalette=new yv("CommandPalette"),yv.EditorContext=new yv("EditorContext"),yv.SimpleEditorContext=new yv("SimpleEditorContext"),yv.EditorContextCopy=new yv("EditorContextCopy"),yv.EditorContextPeek=new yv("EditorContextPeek"),yv.MenubarEditMenu=new yv("MenubarEditMenu"),yv.MenubarCopy=new yv("MenubarCopy"),yv.MenubarGoMenu=new yv("MenubarGoMenu"),yv.MenubarSelectionMenu=new yv("MenubarSelectionMenu"),yv.InlineCompletionsActions=new yv("InlineCompletionsActions");const _v=ga("menuService"),wv=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new ms,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:e=>e===yv.CommandPalette}}addCommand(e){return this.addCommands(Qr.single(e))}addCommands(e){for(const t of e)this._commands.set(t.id,t);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),ss((()=>{let t=!1;for(const i of e)t=this._commands.delete(i.id)||t;t&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)}))}getCommand(e){return this._commands.get(e)}getCommands(){const e=new Map;return this._commands.forEach(((t,i)=>e.set(i,t))),e}appendMenuItem(e,t){return this.appendMenuItems(Qr.single({id:e,item:t}))}appendMenuItems(e){const t=new Set,i=new us;for(const{id:n,item:r}of e){let e=this._menuItems.get(n);e||(e=new us,this._menuItems.set(n,e)),i.push(e.push(r)),t.add(n)}return this._onDidChangeMenu.fire(t),ss((()=>{if(i.size>0){for(let e of i)e();this._onDidChangeMenu.fire(t),i.clear()}}))}getMenuItems(e){let t;return t=this._menuItems.has(e)?[...this._menuItems.get(e)]:[],e===yv.CommandPalette&&this._appendImplicitItems(t),t}_appendImplicitItems(e){const t=new Set;for(const i of e)vv(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this._commands.forEach(((i,n)=>{t.has(n)||e.push({command:i})}))}};class Sv extends Ib{constructor(e,t,i,n){super(`submenuitem.${e.submenu.id}`,"string"==typeof e.title?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=i,this._options=n}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),i=t.getActions(this._options);t.dispose();for(const[,t]of i)t.length>0&&(e.push(...t),e.push(new Db));return e.length&&e.pop(),e}}let Cv=class e{constructor(t,i,n,r,s){var o;if(this._commandService=s,this.id=t.id,this.label=(null==n?void 0:n.renderShortTitle)&&t.shortTitle?"string"==typeof t.shortTitle?t.shortTitle:t.shortTitle.value:"string"==typeof t.title?t.title:t.title.value,this.tooltip=null!==(o=t.tooltip)&&void 0!==o?o:"",this.enabled=!t.precondition||r.contextMatchesRules(t.precondition),this.checked=!1,t.toggled){const e=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=r.contextMatchesRules(e.condition),this.checked&&e.tooltip&&(this.tooltip="string"==typeof e.tooltip?e.tooltip:e.tooltip.value),e.title&&(this.label="string"==typeof e.title?e.title:e.title.value)}this.item=t,this.alt=i?new e(i,void 0,n,r,s):void 0,this._options=n,cv.isThemeIcon(t.icon)&&(this.class=td.asClassName(t.icon))}dispose(){}run(...e){var t,i;let n=[];return(null===(t=this._options)||void 0===t?void 0:t.arg)&&(n=[...n,this._options.arg]),(null===(i=this._options)||void 0===i?void 0:i.shouldForwardArgs)&&(n=[...n,...e]),this._commandService.executeCommand(this.id,...n)}};Cv=mv([bv(3,nv),bv(4,zh)],Cv);const xv=ga("telemetryService");class kv{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let e=t.kbExpr;this.precondition&&(e=e?Fb.and(e,this.precondition):this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Am.registerKeybindingRule(i)}}Hh.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){wv.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class Ev extends kv{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i){return this._implementations.push({priority:e,name:t,implementation:i}),this._implementations.sort(((e,t)=>t.priority-e.priority)),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===i)return void this._implementations.splice(e,1)}}}runCommand(e,t){const i=e.get(xp);for(const n of this._implementations){const r=n.implementation(e,t);if(r){if(i.trace(`Command '${this.id}' was handled by '${n.name}'.`),"boolean"==typeof r)return;return r}}}}class Tv extends kv{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Lv extends kv{static bindToContribution(e){return class extends Lv{constructor(e){super(e),this._callback=e.handler}runEditorCommand(t,i,n){e(i)&&this._callback(e(i),n)}}}runCommand(e,t){const i=e.get(ba),n=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(n)return n.invokeWithinContext((e=>{if(e.get(nv).contextMatchesRules(Vh(this.precondition)))return this.runEditorCommand(e,n,t)}))}}class Nv extends Lv{constructor(e){super(Nv.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;function i(t){return t.menuId||(t.menuId=yv.EditorContext),t.title||(t.title=e.label),t.when=Fb.and(e.precondition,t.when),t}return t=Array.isArray(e.menuOpts)?e.menuOpts:e.menuOpts?[e.menuOpts]:[],Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(xv).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}function Mv(e){return Av.INSTANCE.registerEditorCommand(e),e}function Ov(e){const t=new e;return Av.INSTANCE.registerEditorAction(t),t}function Dv(e,t){Av.INSTANCE.registerEditorContribution(e,t)}var Iv;!function(e){e.getEditorCommand=function(e){return Av.INSTANCE.getEditorCommand(e)},e.getEditorActions=function(){return Av.INSTANCE.getEditorActions()},e.getEditorContributions=function(){return Av.INSTANCE.getEditorContributions()},e.getSomeEditorContributions=function(e){return Av.INSTANCE.getEditorContributions().filter((t=>e.indexOf(t.id)>=0))},e.getDiffEditorContributions=function(){return Av.INSTANCE.getDiffEditorContributions()}}(Iv||(Iv={}));class Av{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}function Pv(e){return e.register(),e}Av.INSTANCE=new Av,zg.add("editor.contributions",Av.INSTANCE);const Rv=Pv(new Ev({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:yv.MenubarEditMenu,group:"1_do",title:On(0,"&&Undo"),order:1},{menuId:yv.CommandPalette,group:"",title:On(0,"Undo"),order:1}]}));Pv(new Tv(Rv,{id:"default:undo",precondition:void 0}));const Bv=Pv(new Ev({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:yv.MenubarEditMenu,group:"1_do",title:On(0,"&&Redo"),order:2},{menuId:yv.CommandPalette,group:"",title:On(0,"Redo"),order:1}]}));Pv(new Tv(Bv,{id:"default:redo",precondition:void 0}));const Fv=Pv(new Ev({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:yv.MenubarSelectionMenu,group:"1_basic",title:On(0,"&&Select All"),order:1},{menuId:yv.CommandPalette,group:"",title:On(0,"Select All"),order:1}]}));var Wv=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},Vv=function(e,t){return function(i,n){t(i,n,e)}};let zv=class{constructor(e,t){}dispose(){}};zv.ID="editor.contrib.markerDecorations",zv=Wv([Vv(1,Lb)],zv),Dv(zv.ID,zv);class Hv{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class jv{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");t.style.fontFamily=this._bareFontInfo.getMassagedFontFamily(),t.style.fontWeight=this._bareFontInfo.fontWeight,t.style.fontSize=this._bareFontInfo.fontSize+"px",t.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,t.style.lineHeight=this._bareFontInfo.lineHeight+"px",t.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",e.appendChild(t);const i=document.createElement("div");i.style.fontFamily=this._bareFontInfo.getMassagedFontFamily(),i.style.fontWeight="bold",i.style.fontSize=this._bareFontInfo.fontSize+"px",i.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,i.style.lineHeight=this._bareFontInfo.lineHeight+"px",i.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",e.appendChild(i);const n=document.createElement("div");n.style.fontFamily=this._bareFontInfo.getMassagedFontFamily(),n.style.fontWeight=this._bareFontInfo.fontWeight,n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",n.style.fontStyle="italic",e.appendChild(n);const r=[];for(const e of this._requests){let s;0===e.type&&(s=t),2===e.type&&(s=i),1===e.type&&(s=n),s.appendChild(document.createElement("br"));const o=document.createElement("span");jv._render(o,e),s.appendChild(o),r.push(o)}this._container=e,this._testElements=r}static _render(e,t){if(" "===t.chr){let t="";for(let e=0;e<8;e++)t+=t;e.innerText=t}else{let i=t.chr;for(let e=0;e<8;e++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const t=this._requests[e],i=this._testElements[e];t.fulfill(i.offsetWidth/256)}}}class Uv extends as{constructor(e,t,i){super(),this.referenceDomElement=e,this.changeCallback=i,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){"undefined"!=typeof ResizeObserver?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver((e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()})),this.resizeObserver.observe(this.referenceDomElement)):-1===this.measureReferenceDomElementToken&&(this.measureReferenceDomElementToken=setInterval((()=>this.observe()),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),-1!==this.measureReferenceDomElementToken&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,n=0;t?(i=t.width,n=t.height):this.referenceDomElement&&(i=this.referenceDomElement.clientWidth,n=this.referenceDomElement.clientHeight),i=Math.max(5,i),n=Math.max(5,n),this.width===i&&this.height===n||(this.width=i,this.height=n,e&&this.changeCallback())}}class Gv{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map((e=>this._values[e]))}}class Kv extends as{constructor(){super(),this._onDidChange=this._register(new ms),this.onDidChange=this._onDidChange.event,this._cache=new Gv,this._evictUntrustedReadingsTimeout=-1}dispose(){-1!==this._evictUntrustedReadingsTimeout&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new Gv,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),t.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=setTimeout((()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()}),5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const i of e)i.isTrusted||(t=!0,this._cache.remove(i));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=Kv._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new hu({zoomLevel:ya(),pixelRatio:_a(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,i,n){const r=new Hv(e,t);return i.push(r),n&&n.push(r),r}static _actualReadConfiguration(e){const t=[],i=[],n=this.createRequest("n",0,t,i),r=this.createRequest("",0,t,null),s=this.createRequest(" ",0,t,i),o=this.createRequest("0",0,t,i),a=this.createRequest("1",0,t,i),l=this.createRequest("2",0,t,i),c=this.createRequest("3",0,t,i),h=this.createRequest("4",0,t,i),u=this.createRequest("5",0,t,i),d=this.createRequest("6",0,t,i),f=this.createRequest("7",0,t,i),p=this.createRequest("8",0,t,i),g=this.createRequest("9",0,t,i),m=this.createRequest("",0,t,i),b=this.createRequest("",0,t,null),v=this.createRequest("",0,t,i),y=this.createRequest(String.fromCharCode(11825),0,t,null);this.createRequest("|",0,t,i),this.createRequest("/",0,t,i),this.createRequest("-",0,t,i),this.createRequest("_",0,t,i),this.createRequest("i",0,t,i),this.createRequest("l",0,t,i),this.createRequest("m",0,t,i),this.createRequest("|",1,t,i),this.createRequest("_",1,t,i),this.createRequest("i",1,t,i),this.createRequest("l",1,t,i),this.createRequest("m",1,t,i),this.createRequest("n",1,t,i),this.createRequest("|",2,t,i),this.createRequest("_",2,t,i),this.createRequest("i",2,t,i),this.createRequest("l",2,t,i),this.createRequest("m",2,t,i),this.createRequest("n",2,t,i),function(e,t){new jv(e,t).read()}(e,t);const _=Math.max(o.width,a.width,l.width,c.width,h.width,u.width,d.width,f.width,p.width,g.width);let w=e.fontFeatureSettings===Nr.OFF;const S=i[0].width;for(let e=1,t=i.length;w&&e<t;e++){const t=S-i[e].width;if(t<-.001||t>.001){w=!1;break}}let C=!0;w&&b.width!==S&&(C=!1),b.width>m.width&&(C=!1);const x=va.INSTANCE.getTimeSinceLastZoomLevelChanged()>2e3;return new hu({zoomLevel:ya(),pixelRatio:_a(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:w,typicalHalfwidthCharacterWidth:n.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:C,spaceWidth:s.width,middotWidth:v.width,wsmiddotWidth:y.width,maxDigitWidth:_},x)}}Kv.INSTANCE=new Kv;class $v extends dm{constructor(e,t,i=null,n){var r;super(e,t),this.accessibilityService=n,this._elementSizeObserver=this._register(new Uv(i,t.dimension,(()=>this._recomputeOptions()))),this._register(Kv.INSTANCE.onDidChange((()=>this._recomputeOptions()))),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register((r=e=>this._recomputeOptions(),va.INSTANCE.onDidChangeZoomLevel(r))),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized((()=>this._recomputeOptions()))),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily()),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return ka||Ea||(e+="no-user-select "),ka&&(e+="no-minimap-shadow "),Xn&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:$v._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:Ca||Sa,pixelRatio:_a(),zoomLevel:ya(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return Kv.INSTANCE.readConfiguration(e)}}class qv{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){-1!==this._top&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Zv(e){return new qv(e)}function Yv(e,t,i){let n=null,r=null;if("function"==typeof i.value?(n="value",r=i.value,0!==r.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof i.get&&(n="get",r=i.get),!r)throw new Error("not supported");const s=`$memoize$${t}`;i[n]=function(...e){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,e)}),this[s]}}var Xv,Qv=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};!function(e){e.Tap="-monaco-gesturetap",e.Change="-monaco-gesturechange",e.Start="-monaco-gesturestart",e.End="-monaco-gesturesend",e.Contextmenu="-monaco-gesturecontextmenu"}(Xv||(Xv={}));class Jv extends as{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(cl(document,"touchstart",(e=>this.onTouchStart(e)),{passive:!1})),this._register(cl(document,"touchend",(e=>this.onTouchEnd(e)))),this._register(cl(document,"touchmove",(e=>this.onTouchMove(e)),{passive:!1}))}static addTarget(e){return Jv.isTouchDevice()?(Jv.INSTANCE||(Jv.INSTANCE=new Jv),Jv.INSTANCE.targets.push(e),{dispose:()=>{Jv.INSTANCE.targets=Jv.INSTANCE.targets.filter((t=>t!==e))}}):as.None}static ignoreTarget(e){return Jv.isTouchDevice()?(Jv.INSTANCE||(Jv.INSTANCE=new Jv),Jv.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Jv.INSTANCE.ignoreTargets=Jv.INSTANCE.ignoreTargets.filter((t=>t!==e))}}):as.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){let n=e.targetTouches.item(i);this.activeTouches[n.identifier]={id:n.identifier,initialTarget:n.target,initialTimeStamp:t,initialPageX:n.pageX,initialPageY:n.pageY,rollingTimestamps:[t],rollingPageX:[n.pageX],rollingPageY:[n.pageY]};let r=this.newGestureEvent(Xv.Start,n.target);r.pageX=n.pageX,r.pageY=n.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),i=Object.keys(this.activeTouches).length;for(let n=0,r=e.changedTouches.length;n<r;n++){let r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("move of an UNKNOWN touch",r);continue}let s=this.activeTouches[r.identifier],o=Date.now()-s.initialTimeStamp;if(o<Jv.HOLD_DELAY&&Math.abs(s.initialPageX-pp(s.rollingPageX))<30&&Math.abs(s.initialPageY-pp(s.rollingPageY))<30){let e=this.newGestureEvent(Xv.Tap,s.initialTarget);e.pageX=pp(s.rollingPageX),e.pageY=pp(s.rollingPageY),this.dispatchEvent(e)}else if(o>=Jv.HOLD_DELAY&&Math.abs(s.initialPageX-pp(s.rollingPageX))<30&&Math.abs(s.initialPageY-pp(s.rollingPageY))<30){let e=this.newGestureEvent(Xv.Contextmenu,s.initialTarget);e.pageX=pp(s.rollingPageX),e.pageY=pp(s.rollingPageY),this.dispatchEvent(e)}else if(1===i){let e=pp(s.rollingPageX),i=pp(s.rollingPageY),n=pp(s.rollingTimestamps)-s.rollingTimestamps[0],r=e-s.rollingPageX[0],o=i-s.rollingPageY[0];const a=this.targets.filter((e=>s.initialTarget instanceof Node&&e.contains(s.initialTarget)));this.inertia(a,t,Math.abs(r)/n,r>0?1:-1,e,Math.abs(o)/n,o>0?1:-1,i)}this.dispatchEvent(this.newGestureEvent(Xv.End,s.initialTarget)),delete this.activeTouches[r.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===Xv.Tap){const t=(new Date).getTime();let i=0;i=t-this._lastSetTapCountTime>Jv.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=t,e.tapCount=i}else e.type!==Xv.Change&&e.type!==Xv.Contextmenu||(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach((t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)}))}inertia(e,t,i,n,r,s,o,a){this.handle=pl((()=>{let l=Date.now(),c=l-t,h=0,u=0,d=!0;i+=Jv.SCROLL_FRICTION*c,s+=Jv.SCROLL_FRICTION*c,i>0&&(d=!1,h=n*i*c),s>0&&(d=!1,u=o*s*c);let f=this.newGestureEvent(Xv.Change);f.translationX=h,f.translationY=u,e.forEach((e=>e.dispatchEvent(f))),d||this.inertia(e,l,i,n,r+h,s,o,a+u)}))}onTouchMove(e){let t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){let n=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(n.identifier))){console.warn("end of an UNKNOWN touch",n);continue}let r=this.activeTouches[n.identifier],s=this.newGestureEvent(Xv.Change,r.initialTarget);s.translationX=n.pageX-pp(r.rollingPageX),s.translationY=n.pageY-pp(r.rollingPageY),s.pageX=n.pageX,s.pageY=n.pageY,this.dispatchEvent(s),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(n.pageX),r.rollingPageY.push(n.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}function ey(e,t){let i=new za(t);return i.preventDefault(),{leftButton:i.leftButton,buttons:i.buttons,posx:i.posx,posy:i.posy}}Jv.SCROLL_FRICTION=-.005,Jv.HOLD_DELAY=700,Jv.CLEAR_TAP_COUNT_TIME=400,Qv([Yv],Jv,"isTouchDevice",null);class ty{constructor(){this._hooks=new os,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,i,n,r){if(this.isMonitoring())return;this._mouseMoveEventMerger=i,this._mouseMoveCallback=n,this._onStopCallback=r;const s=Va.getSameOriginWindowChain(),o=tr?"pointermove":"mousemove",a=s.map((e=>e.window.document)),l=Pl(e);l&&a.unshift(l);for(const e of a)this._hooks.add(yl(e,o,(e=>{e.buttons===t?this._mouseMoveCallback(e):this.stopMonitoring(!0)}),((e,t)=>this._mouseMoveEventMerger(e,t)))),this._hooks.add(cl(e,"mouseup",(e=>this.stopMonitoring(!0))));if(Va.hasDifferentOriginAncestor()){let e=s[s.length-1];this._hooks.add(cl(e.window.document,"mouseout",(e=>{"html"===new za(e).target.tagName.toLowerCase()&&this.stopMonitoring(!0)}))),this._hooks.add(cl(e.window.document,"mouseover",(e=>{"html"===new za(e).target.tagName.toLowerCase()&&this.stopMonitoring(!0)}))),this._hooks.add(cl(e.window.document.body,"mouseleave",(e=>{this.stopMonitoring(!0)})))}}}class iy{constructor(e,t){this.x=e,this.y=t}toClientCoordinates(){return new ny(this.x-kl.scrollX,this.y-kl.scrollY)}}class ny{constructor(e,t){this.clientX=e,this.clientY=t}toPageCoordinates(){return new iy(this.clientX+kl.scrollX,this.clientY+kl.scrollY)}}class ry{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n}}function sy(e){const t=xl(e);return new ry(t.left,t.top,t.width,t.height)}class oy extends za{constructor(e,t){super(e),this.pos=new iy(this.posx,this.posy),this.editorPos=sy(t)}}class ay{constructor(e){this._editorViewDomNode=e}_create(e){return new oy(e,this._editorViewDomNode)}onContextMenu(e,t){return cl(e,"contextmenu",(e=>{t(this._create(e))}))}onMouseUp(e,t){return cl(e,"mouseup",(e=>{t(this._create(e))}))}onMouseDown(e,t){return cl(e,"mousedown",(e=>{t(this._create(e))}))}onMouseLeave(e,t){return dl(e,(e=>{t(this._create(e))}))}onMouseMoveThrottled(e,t,i,n){return yl(e,"mousemove",t,((e,t)=>i(e,this._create(t))),n)}}class ly{constructor(e){this._editorViewDomNode=e}_create(e){return new oy(e,this._editorViewDomNode)}onPointerUp(e,t){return cl(e,"pointerup",(e=>{t(this._create(e))}))}onPointerDown(e,t){return cl(e,"pointerdown",(e=>{t(this._create(e))}))}onPointerLeave(e,t){return n=e=>{t(this._create(e))},cl(i=e,"pointerout",(e=>{let t=e.relatedTarget;for(;t&&t!==i;)t=t.parentNode;t!==i&&n(e)}));var i,n}onPointerMoveThrottled(e,t,i,n){return yl(e,"pointermove",t,((e,t)=>i(e,this._create(t))),n)}}class cy extends as{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new ty),this._keydownListener=null}startMonitoring(e,t,i,n,r){this._keydownListener=ul(document,"keydown",(e=>{e.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,e.browserEvent)}),!0);this._globalMouseMoveMonitor.startMonitoring(e,t,((e,t)=>i(e,new oy(t,this._editorViewDomNode))),n,(e=>{this._keydownListener.dispose(),r(e)}))}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class hy extends as{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,n=e.length;i<n;i++){let n=e[i];switch(n.type){case 0:this.onCompositionStart(n)&&(t=!0);break;case 1:this.onCompositionEnd(n)&&(t=!0);break;case 2:this.onConfigurationChanged(n)&&(t=!0);break;case 3:this.onCursorStateChanged(n)&&(t=!0);break;case 4:this.onDecorationsChanged(n)&&(t=!0);break;case 5:this.onFlushed(n)&&(t=!0);break;case 6:this.onFocusChanged(n)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(n)&&(t=!0);break;case 8:this.onLineMappingChanged(n)&&(t=!0);break;case 9:this.onLinesChanged(n)&&(t=!0);break;case 10:this.onLinesDeleted(n)&&(t=!0);break;case 11:this.onLinesInserted(n)&&(t=!0);break;case 12:this.onRevealRangeRequest(n)&&(t=!0);break;case 13:this.onScrollChanged(n)&&(t=!0);break;case 15:this.onTokensChanged(n)&&(t=!0);break;case 14:this.onThemeChanged(n)&&(t=!0);break;case 16:this.onTokensColorsChanged(n)&&(t=!0);break;case 17:this.onZonesChanged(n)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(n)}}t&&(this._shouldRender=!0)}}class uy extends hy{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class dy{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}static collect(e,t){let i=[],n=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=i[n-e-1];return r}}class fy extends class{constructor(e,t){this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}{constructor(e,t,i){super(e,t),this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class py{constructor(e,t,i){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i}}class gy{constructor(e,t){this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class my{constructor(e,t){this.outsideRenderedLine=e,this.left=Math.round(t)}}class by{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class vy{constructor(e,t){this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class yy{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,r){const s=this._createRange();try{return s.setStart(e,t),s.setEnd(i,n),s.getClientRects()}catch(e){return null}finally{this._detachRange(s,r)}}static _mergeAdjacentRanges(e){if(1===e.length)return[new gy(e[0].left,e[0].width)];e.sort(vy.compare);let t=[],i=0,n=e[0].left,r=e[0].width;for(let s=1,o=e.length;s<o;s++){const o=e[s],a=o.left,l=o.width;n+r+.9>=a?r=Math.max(r,a+l-n):(t[i++]=new gy(n,r),n=a,r=l)}return t[i++]=new gy(n,r),t}static _createHorizontalRangesFromClientRects(e,t){if(!e||0===e.length)return null;const i=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];i[n]=new vy(Math.max(0,r.left-t),r.width)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,i,n,r,s,o){const a=e.children.length-1;if(0>a)return null;if((t=Math.min(a,Math.max(0,t)))===(n=Math.min(a,Math.max(0,n)))&&i===r&&0===i&&!e.children[t].firstChild){const i=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(i,s)}t!==n&&n>0&&0===r&&(n--,r=1073741824);let l=e.children[t].firstChild,c=e.children[n].firstChild;if(l&&c||(!l&&0===i&&t>0&&(l=e.children[t-1].firstChild,i=1073741824),!c&&0===r&&n>0&&(c=e.children[n-1].firstChild,r=1073741824)),!l||!c)return null;i=Math.min(l.textContent.length,Math.max(0,i)),r=Math.min(c.textContent.length,Math.max(0,r));const h=this._readClientRects(l,i,c,r,o);return this._createHorizontalRangesFromClientRects(h,s)}}const _y=!!Jn||!(Qn||Sa||ka);let wy=!0;class Sy{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class Cy{constructor(e,t){this.themeType=t;const i=e.options,n=i.get(40);this.renderWhitespace=i.get(86),this.renderControlCharacters=i.get(80),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(27),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(56),this.stopRenderingLineAfter=i.get(103),this.fontLigatures=i.get(41)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class xy{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=Zv(e)}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return(this._options.themeType===ov.HIGH_CONTRAST||"selection"===this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}renderLine(e,t,i,n){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;const r=i.getViewLineRenderingData(e),s=this._options,o=Gp.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let a=null;if(s.themeType===ov.HIGH_CONTRAST||"selection"===this._options.renderWhitespace){const t=i.selections;for(const i of t){if(i.endLineNumber<e||i.startLineNumber>e)continue;const t=i.startLineNumber===e?i.startColumn:r.minColumn,n=i.endLineNumber===e?i.endColumn:r.maxColumn;t<n&&(s.themeType===ov.HIGH_CONTRAST||"selection"!==this._options.renderWhitespace?o.push(new Gp(t,n,"inline-selected-text",0)):(a||(a=[]),a.push(new Zp(t-1,n-1))))}}const l=new Yp(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,o,r.tabSize,r.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==Nr.OFF,a);if(this._renderedViewLine&&this._renderedViewLine.input.equals(l))return!1;n.appendASCIIString('<div style="top:'),n.appendASCIIString(String(t)),n.appendASCIIString("px;height:"),n.appendASCIIString(String(this._options.lineHeight)),n.appendASCIIString('px;" class="'),n.appendASCIIString(xy.CLASS_NAME),n.appendASCIIString('">');const c=Jp(l,n);n.appendASCIIString("</div>");let h=null;return wy&&_y&&r.isBasicASCII&&s.useMonospaceOptimizations&&0===c.containsForeignElements&&r.content.length<300&&l.lineTokens.getCount()<100&&(h=new ky(this._renderedViewLine?this._renderedViewLine.domNode:null,l,c.characterMapping)),h||(h=Ly(this._renderedViewLine?this._renderedViewLine.domNode:null,l,c.characterMapping,c.containsRTL,c.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}needsMonospaceFontCheck(){return!!this._renderedViewLine&&this._renderedViewLine instanceof ky}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof ky?this._renderedViewLine.monospaceAssumptionsAreValid():wy}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof ky&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i){if(!this._renderedViewLine)return null;e|=0,t|=0,e=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,e)),t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t));const n=0|this._renderedViewLine.input.stopRenderingLineAfter;let r=!1;-1!==n&&e>n+1&&t>n+1&&(r=!0),-1!==n&&e>n+1&&(e=n+1),-1!==n&&t>n+1&&(t=n+1);const s=this._renderedViewLine.getVisibleRangesForRange(e,t,i);return s&&s.length>0?new by(r,s):null}getColumnOfNodeOffset(e,t,i){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,i):1}}xy.CLASS_NAME="view-line";class ky{constructor(e,t,i){this.domNode=e,this.input=t,this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(){return this._getCharPosition(this._characterMapping.length)}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return wy;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),wy=!1),wy}toSlowRenderedLine(){return Ly(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i){const n=this._getCharPosition(e),r=this._getCharPosition(t);return[new gy(n,r-n)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffsets();return 0===t.length?0:Math.round(this._charWidth*t[e-1])}getColumnOfNodeOffset(e,t,i){const n=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.partDataToCharOffset(r,n,i)+1}}class Ey{constructor(e,t,i,n,r){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!n||0===this._characterMapping.length){this._pixelOffsetCache=new Int32Array(Math.max(2,this._characterMapping.length+1));for(let e=0,t=this._characterMapping.length;e<=t;e++)this._pixelOffsetCache[e]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return-1!==this._cachedWidth}getVisibleRangesForRange(e,t,i){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){const n=this._readPixelOffset(this.domNode,e,i);if(-1===n)return null;const r=this._readPixelOffset(this.domNode,t,i);return-1===r?null:[new gy(n,r-n)]}return this._readVisibleRangesForRange(this.domNode,e,t,i)}_readVisibleRangesForRange(e,t,i,n){if(t===i){const i=this._readPixelOffset(e,t,n);return-1===i?null:[new gy(i,0)]}return this._readRawVisibleRangesForRange(e,t,i,n)}_readPixelOffset(e,t,i){if(0===this._characterMapping.length){if(0===this._containsForeignElements)return 0;if(2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth();const t=this._getReadingTarget(e);return t.firstChild?t.firstChild.offsetWidth:0}if(null!==this._pixelOffsetCache){const n=this._pixelOffsetCache[t];if(-1!==n)return n;const r=this._actualReadPixelOffset(e,t,i);return this._pixelOffsetCache[t]=r,r}return this._actualReadPixelOffset(e,t,i)}_actualReadPixelOffset(e,t,i){if(0===this._characterMapping.length){const t=yy.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i.clientRectDeltaLeft,i.endNode);return t&&0!==t.length?t[0].left:-1}if(t===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth();const n=this._characterMapping.charOffsetToPartData(t-1),r=Xp.getPartIndex(n),s=Xp.getCharIndex(n),o=yy.readHorizontalRanges(this._getReadingTarget(e),r,s,r,s,i.clientRectDeltaLeft,i.endNode);if(!o||0===o.length)return-1;const a=o[0].left;if(this.input.isBasicASCII){const e=this._characterMapping.getAbsoluteOffsets(),i=Math.round(this.input.spaceWidth*e[t-1]);if(Math.abs(i-a)<=1)return i}return a}_readRawVisibleRangesForRange(e,t,i,n){if(1===t&&i===this._characterMapping.length)return[new gy(0,this.getWidth())];const r=this._characterMapping.charOffsetToPartData(t-1),s=Xp.getPartIndex(r),o=Xp.getCharIndex(r),a=this._characterMapping.charOffsetToPartData(i-1),l=Xp.getPartIndex(a),c=Xp.getCharIndex(a);return yy.readHorizontalRanges(this._getReadingTarget(e),s,o,l,c,n.clientRectDeltaLeft,n.endNode)}getColumnOfNodeOffset(e,t,i){const n=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.partDataToCharOffset(r,n,i)+1}}class Ty extends Ey{_readVisibleRangesForRange(e,t,i,n){const r=super._readVisibleRangesForRange(e,t,i,n);if(!r||0===r.length||t===i||1===t&&i===this._characterMapping.length)return r;if(!this.input.containsRTL){const t=this._readPixelOffset(e,i,n);if(-1!==t){const e=r[r.length-1];e.left<t&&(e.width=t-e.left)}}return r}}const Ly=Ca?Ny:My;function Ny(e,t,i,n,r){return new Ty(e,t,i,n,r)}function My(e,t,i,n,r){return new Ey(e,t,i,n,r)}function Oy(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Dy{constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return 0===this.oldText.length?`(insert@${this.oldPosition} "${Oy(this.newText)}")`:0===this.newText.length?`(delete@${this.oldPosition} "${Oy(this.oldText)}")`:`(replace@${this.oldPosition} "${Oy(this.oldText)}" with "${Oy(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const n=t.length;vh(e,n,i),i+=4;for(let r=0;r<n;r++)mh(e,t.charCodeAt(r),i),i+=2;return i}static _readString(e,t){const i=bh(e,t);return pf(e,t+=4,i)}writeSize(){return 8+Dy._writeStringSize(this.oldText)+Dy._writeStringSize(this.newText)}write(e,t){return vh(e,this.oldPosition,t),t+=4,vh(e,this.newPosition,t),t+=4,t=Dy._writeString(e,this.oldText,t),t=Dy._writeString(e,this.newText,t)}static read(e,t,i){const n=bh(e,t),r=bh(e,t+=4);t+=4;const s=Dy._readString(e,t);t+=Dy._writeStringSize(s);const o=Dy._readString(e,t);return t+=Dy._writeStringSize(o),i.push(new Dy(n,s,r,o)),t}}class Iy{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(null===i){this._acceptCurr(n),n=this._getCurr(++t);continue}if(null===n){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){const[e,t]=Iy._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(e),n=t;continue}if(i.newPosition<n.oldPosition){const[e,t]=Iy._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(e),i=t;continue}let r,s;if(n.oldEnd===i.newEnd)r=i,s=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){const[e,o]=Iy._splitPrev(i,n.oldLength);r=e,s=n,i=o,n=this._getCurr(++t)}else{const[t,o]=Iy._splitCurr(n,i.newLength);r=i,s=t,i=this._getPrev(++e),n=o}this._result[this._resultLen++]=new Dy(r.oldPosition,r.oldText,s.newPosition,s.newText),this._prevDeltaOffset+=r.newLength-r.oldLength,this._currDeltaOffset+=s.newLength-s.oldLength}const r=Iy._merge(this._result);return Iy._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=Iy._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Iy._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Dy(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Dy(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),n=e.newText.substr(t);return[new Dy(e.oldPosition,e.oldText,e.newPosition,i),new Dy(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new Dy(e.oldPosition,i,e.newPosition,e.newText),new Dy(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;let t=[],i=0,n=e[0];for(let r=1;r<e.length;r++){const s=e[r];n.oldEnd===s.oldPosition?n=new Dy(n.oldPosition,n.oldText+s.oldText,n.newPosition,n.newText+s.newText):(t[i++]=n,n=s)}return t[i++]=n,t}static _removeNoOps(e){if(0===e.length)return e;let t=[],i=0;for(let n=0;n<e.length;n++){const r=e[n];r.oldText!==r.newText&&(t[i++]=r)}return t}}function Ay(e){return e.toString()}class Py{constructor(e,t,i,n,r,s,o){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=r,this.afterCursorState=s,this.changes=o}static create(e,t){const i=e.getAlternativeVersionId(),n=By(e);return new Py(i,i,n,n,t,t,[])}append(e,t,i,n,r){var s,o;t.length>0&&(this.changes=(s=this.changes,o=t,null===s||0===s.length?o:new Iy(s,o).compress())),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,i){if(vh(e,t?t.length:0,i),i+=4,t)for(const n of t)vh(e,n.selectionStartLineNumber,i),i+=4,vh(e,n.selectionStartColumn,i),i+=4,vh(e,n.positionLineNumber,i),i+=4,vh(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const n=bh(e,t);t+=4;for(let r=0;r<n;r++){const n=bh(e,t),r=bh(e,t+=4),s=bh(e,t+=4),o=bh(e,t+=4);t+=4,i.push(new ko(n,r,s,o))}return t}serialize(){let e=10+Py._writeSelectionsSize(this.beforeCursorState)+Py._writeSelectionsSize(this.afterCursorState)+4;for(const t of this.changes)e+=t.writeSize();const t=new Uint8Array(e);let i=0;vh(t,this.beforeVersionId,i),i+=4,vh(t,this.afterVersionId,i),i+=4,_h(t,this.beforeEOL,i),i+=1,_h(t,this.afterEOL,i),i+=1,i=Py._writeSelections(t,this.beforeCursorState,i),i=Py._writeSelections(t,this.afterCursorState,i),vh(t,this.changes.length,i),i+=4;for(const e of this.changes)i=e.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const n=bh(t,i);i+=4;const r=bh(t,i);i+=4;const s=yh(t,i);i+=1;const o=yh(t,i);i+=1;const a=[];i=Py._readSelections(t,i,a);const l=[];i=Py._readSelections(t,i,l);const c=bh(t,i);i+=4;const h=[];for(let e=0;e<c;e++)i=Dy.read(t,i,h);return new Py(n,r,s,o,a,l,h)}}class Ry{constructor(e,t){this.model=e,this._data=Py.create(e,t)}get type(){return 0}get resource(){return uo.isUri(this.model)?this.model:this.model.uri}get label(){return On(0,"Typing")}toString(){return(this._data instanceof Py?this._data:Py.deserialize(this._data)).changes.map((e=>e.toString())).join(", ")}matchesResource(e){return(uo.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Py}append(e,t,i,n,r){this._data instanceof Py&&this._data.append(e,t,i,n,r)}close(){this._data instanceof Py&&(this._data=this._data.serialize())}open(){this._data instanceof Py||(this._data=Py.deserialize(this._data))}undo(){if(uo.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Py&&(this._data=this._data.serialize());const e=Py.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(uo.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Py&&(this._data=this._data.serialize());const e=Py.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Py&&(this._data=this._data.serialize()),this._data.byteLength+168}}function By(e){return"\n"===e.getEOL()?0:1}function Fy(e){return!!e&&(e instanceof Ry||e instanceof class{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const e of this._editStackElementsArr){const t=Ay(e.resource);this._editStackElementsMap.set(t,e)}this._delegate=null}get resources(){return this._editStackElementsArr.map((e=>e.resource))}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Ay(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Ay(uo.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Ay(e.uri);return!!this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).canAppend(e)}append(e,t,i,n,r){const s=Ay(e.uri);this._editStackElementsMap.get(s).append(e,t,i,n,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Ay(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${Eh(t.resource)}: ${t}`);return`{${e.join(", ")}}`}})}class Wy{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Fy(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Fy(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(Fy(t)&&t.canAppend(this._model))return t;const i=new Ry(this._model,e);return this._undoRedoService.pushElement(i),i}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],By(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i){const n=this._getOrCreateEditStackElement(e),r=this._model.applyEdits(t,!0),s=Wy._computeCursorState(i,r),o=r.map(((e,t)=>({index:t,textChange:e.textChange})));return o.sort(((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition)),n.append(this._model,o.map((e=>e.textChange)),By(this._model),this._model.getAlternativeVersionId(),s),s}static _computeCursorState(e,t){try{return e?e(t):null}catch(e){return Gr(e),null}}}class Vy{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function zy(e,t,i,n,r){let s;for(r.spacesDiff=0,r.looksLikeAlignment=!1,s=0;s<t&&s<n;s++){if(e.charCodeAt(s)!==i.charCodeAt(s))break}let o=0,a=0;for(let i=s;i<t;i++){32===e.charCodeAt(i)?o++:a++}let l=0,c=0;for(let e=s;e<n;e++){32===i.charCodeAt(e)?l++:c++}if(o>0&&a>0)return;if(l>0&&c>0)return;let h=Math.abs(a-c),u=Math.abs(o-l);if(0===h)return r.spacesDiff=u,void(u>0&&0<=l-1&&l-1<e.length&&l<i.length&&32!==i.charCodeAt(l)&&32===e.charCodeAt(l-1)&&44===e.charCodeAt(e.length-1)&&(r.looksLikeAlignment=!0));u%h!=0||(r.spacesDiff=u/h)}function Hy(e,t,i){const n=Math.min(e.getLineCount(),1e4);let r=0,s=0,o="",a=0;const l=[2,4,6,8,3,5,7];let c=[0,0,0,0,0,0,0,0,0],h=new Vy;for(let l=1;l<=n;l++){let n=e.getLineLength(l),u=e.getLineContent(l);const d=n<=65536;let f=!1,p=0,g=0,m=0;for(let t=0,i=n;t<i;t++){let i=d?u.charCodeAt(t):e.getLineCharCode(l,t);if(9===i)m++;else{if(32!==i){f=!0,p=t;break}g++}}if(!f)continue;if(m>0?r++:g>1&&s++,zy(o,a,u,p,h),h.looksLikeAlignment&&(!i||t!==h.spacesDiff))continue;let b=h.spacesDiff;b<=8&&c[b]++,o=u,a=p}let u=i;r!==s&&(u=r<s);let d=t;if(u){let e=u?0:.1*n;l.forEach((t=>{let i=c[t];i>e&&(e=i,d=t)})),4===d&&c[4]>0&&c[2]>0&&c[2]>=c[4]/2&&(d=2)}return{insertSpaces:u,tabSize:d}}function jy(e){return(1&e.metadata)>>>0}function Uy(e,t){e.metadata=254&e.metadata|t<<0}function Gy(e){return(2&e.metadata)>>>1==1}function Ky(e,t){e.metadata=253&e.metadata|(t?1:0)<<1}function $y(e){return(4&e.metadata)>>>2==1}function qy(e,t){e.metadata=251&e.metadata|(t?1:0)<<2}function Zy(e){return(8&e.metadata)>>>3==1}function Yy(e,t){e.metadata=247&e.metadata|(t?1:0)<<3}function Xy(e,t){e.metadata=207&e.metadata|t<<4}function Qy(e,t){e.metadata=191&e.metadata|(t?1:0)<<6}class Jy{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,Uy(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,qy(this,!1),Xy(this,1),Yy(this,!1),Qy(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,Ky(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;let t=this.options.className;qy(this,"squiggly-error"===t||"squiggly-warning"===t||"squiggly-info"===t),Xy(this,this.options.stickiness),Yy(this,!(!this.options.overviewRuler||!this.options.overviewRuler.color)),Qy(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const e_=new Jy(null,0,0);e_.parent=e_,e_.left=e_,e_.right=e_,Uy(e_,0);class t_{constructor(){this.root=e_,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,r){return this.root===e_?[]:function(e,t,i,n,r,s){let o=e.root,a=0,l=0,c=0,h=0,u=[],d=0;for(;o!==e_;)if(Gy(o))Ky(o.left,!1),Ky(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;else{if(!Gy(o.left)){if(l=a+o.maxEnd,l<t){Ky(o,!0);continue}if(o.left!==e_){o=o.left;continue}}if(c=a+o.start,c>i)Ky(o,!0);else{if(h=a+o.end,h>=t){o.setCachedOffsets(c,h,s);let e=!0;n&&o.ownerId&&o.ownerId!==n&&(e=!1),r&&$y(o)&&(e=!1),e&&(u[d++]=o)}Ky(o,!0),o.right===e_||Gy(o.right)||(a+=o.delta,o=o.right)}}return Ky(e.root,!1),u}(this,e,t,i,n,r)}search(e,t,i){return this.root===e_?[]:function(e,t,i,n){let r=e.root,s=0,o=0,a=0,l=[],c=0;for(;r!==e_;){if(Gy(r)){Ky(r.left,!1),Ky(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),r=r.parent;continue}if(r.left!==e_&&!Gy(r.left)){r=r.left;continue}o=s+r.start,a=s+r.end,r.setCachedOffsets(o,a,n);let e=!0;t&&r.ownerId&&r.ownerId!==t&&(e=!1),i&&$y(r)&&(e=!1),e&&(l[c++]=r),Ky(r,!0),r.right===e_||Gy(r.right)||(s+=r.delta,r=r.right)}return Ky(e.root,!1),l}(this,e,t,i)}collectNodesFromOwner(e){return function(e,t){let i=e.root,n=[],r=0;for(;i!==e_;)Gy(i)?(Ky(i.left,!1),Ky(i.right,!1),i=i.parent):i.left===e_||Gy(i.left)?(i.ownerId===t&&(n[r++]=i),Ky(i,!0),i.right===e_||Gy(i.right)||(i=i.right)):i=i.left;return Ky(e.root,!1),n}(this,e)}collectNodesPostOrder(){return function(e){let t=e.root,i=[],n=0;for(;t!==e_;)Gy(t)?(Ky(t.left,!1),Ky(t.right,!1),t=t.parent):t.left===e_||Gy(t.left)?t.right===e_||Gy(t.right)?(i[n++]=t,Ky(t,!0)):t=t.right:t=t.left;return Ky(e.root,!1),i}(this)}insert(e){r_(this,e),this._normalizeDeltaIfNecessary()}delete(e){s_(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;const r=i.start+n,s=i.end+n;i.setCachedOffsets(r,s,t)}acceptReplace(e,t,i,n){const r=function(e,t,i){let n=e.root,r=0,s=0,o=0,a=0,l=[],c=0;for(;n!==e_;)if(Gy(n))Ky(n.left,!1),Ky(n.right,!1),n===n.parent.right&&(r-=n.parent.delta),n=n.parent;else{if(!Gy(n.left)){if(s=r+n.maxEnd,s<t){Ky(n,!0);continue}if(n.left!==e_){n=n.left;continue}}o=r+n.start,o>i?Ky(n,!0):(a=r+n.end,a>=t&&(n.setCachedOffsets(o,a,0),l[c++]=n),Ky(n,!0),n.right===e_||Gy(n.right)||(r+=n.delta,n=n.right))}return Ky(e.root,!1),l}(this,e,e+t);for(let e=0,t=r.length;e<t;e++){s_(this,r[e])}this._normalizeDeltaIfNecessary(),function(e,t,i,n){let r=e.root,s=0,o=0,a=0;const l=n-(i-t);for(;r!==e_;)if(Gy(r))Ky(r.left,!1),Ky(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),h_(r),r=r.parent;else{if(!Gy(r.left)){if(o=s+r.maxEnd,o<t){Ky(r,!0);continue}if(r.left!==e_){r=r.left;continue}}a=s+r.start,a>i?(r.start+=l,r.end+=l,r.delta+=l,(r.delta<-1073741824||r.delta>1073741824)&&(e.requestNormalizeDelta=!0),Ky(r,!0)):(Ky(r,!0),r.right===e_||Gy(r.right)||(s+=r.delta,r=r.right))}Ky(e.root,!1)}(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let s=0,o=r.length;s<o;s++){const o=r[s];o.start=o.cachedAbsoluteStart,o.end=o.cachedAbsoluteEnd,n_(o,e,e+t,i,n),o.maxEnd=o.end,r_(this,o)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(e){let t=e.root,i=0;for(;t!==e_;)t.left===e_||Gy(t.left)?t.right===e_||Gy(t.right)?(t.start=i+t.start,t.end=i+t.end,t.delta=0,h_(t),Ky(t,!0),Ky(t.left,!1),Ky(t.right,!1),t===t.parent.right&&(i-=t.parent.delta),t=t.parent):(i+=t.delta,t=t.right):t=t.left;Ky(e.root,!1)}(this))}}function i_(e,t,i,n){return e<i||!(e>i)&&(1!==n&&(2===n||t))}function n_(e,t,i,n,r){const s=function(e){return(48&e.metadata)>>>4}(e),o=0===s||2===s,a=1===s||2===s,l=i-t,c=n,h=Math.min(l,c),u=e.start;let d=!1;const f=e.end;let p=!1;t<=u&&f<=i&&function(e){return(64&e.metadata)>>>6==1}(e)&&(e.start=t,d=!0,e.end=t,p=!0);{const e=r?1:l>0?2:0;!d&&i_(u,o,t,e)&&(d=!0),!p&&i_(f,a,t,e)&&(p=!0)}if(h>0&&!r){const e=l>c?2:0;!d&&i_(u,o,t+h,e)&&(d=!0),!p&&i_(f,a,t+h,e)&&(p=!0)}{const n=r?1:0;!d&&i_(u,o,i,n)&&(e.start=t+c,d=!0),!p&&i_(f,a,i,n)&&(e.end=t+c,p=!0)}const g=c-l;d||(e.start=Math.max(0,u+g)),p||(e.end=Math.max(0,f+g)),e.start>e.end&&(e.end=e.start)}function r_(e,t){if(e.root===e_)return t.parent=e_,t.left=e_,t.right=e_,Uy(t,0),e.root=t,e.root;!function(e,t){let i=0,n=e.root;const r=t.start,s=t.end;for(;;){if(d_(r,s,n.start+i,n.end+i)<0){if(n.left===e_){t.start-=i,t.end-=i,t.maxEnd-=i,n.left=t;break}n=n.left}else{if(n.right===e_){t.start-=i+n.delta,t.end-=i+n.delta,t.maxEnd-=i+n.delta,n.right=t;break}i+=n.delta,n=n.right}}t.parent=n,t.left=e_,t.right=e_,Uy(t,1)}(e,t),u_(t.parent);let i=t;for(;i!==e.root&&1===jy(i.parent);)if(i.parent===i.parent.parent.left){const t=i.parent.parent.right;1===jy(t)?(Uy(i.parent,0),Uy(t,0),Uy(i.parent.parent,1),i=i.parent.parent):(i===i.parent.right&&(i=i.parent,a_(e,i)),Uy(i.parent,0),Uy(i.parent.parent,1),l_(e,i.parent.parent))}else{const t=i.parent.parent.left;1===jy(t)?(Uy(i.parent,0),Uy(t,0),Uy(i.parent.parent,1),i=i.parent.parent):(i===i.parent.left&&(i=i.parent,l_(e,i)),Uy(i.parent,0),Uy(i.parent.parent,1),a_(e,i.parent.parent))}return Uy(e.root,0),t}function s_(e,t){let i,n;if(t.left===e_?(i=t.right,n=t,i.delta+=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta):t.right===e_?(i=t.left,n=t):(n=function(e){for(;e.left!==e_;)e=e.left;return e}(t.right),i=n.right,i.start+=n.delta,i.end+=n.delta,i.delta+=n.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,n.delta=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0)),n===e.root)return e.root=i,Uy(i,0),t.detach(),o_(),h_(i),void(e.root.parent=e_);let r,s=1===jy(n);if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?i.parent=n.parent:(n.parent===t?i.parent=n:i.parent=n.parent,n.left=t.left,n.right=t.right,n.parent=t.parent,Uy(n,jy(t)),t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==e_&&(n.left.parent=n),n.right!==e_&&(n.right.parent=n)),t.detach(),s)return u_(i.parent),n!==t&&(u_(n),u_(n.parent)),void o_();for(u_(i),u_(i.parent),n!==t&&(u_(n),u_(n.parent));i!==e.root&&0===jy(i);)i===i.parent.left?(r=i.parent.right,1===jy(r)&&(Uy(r,0),Uy(i.parent,1),a_(e,i.parent),r=i.parent.right),0===jy(r.left)&&0===jy(r.right)?(Uy(r,1),i=i.parent):(0===jy(r.right)&&(Uy(r.left,0),Uy(r,1),l_(e,r),r=i.parent.right),Uy(r,jy(i.parent)),Uy(i.parent,0),Uy(r.right,0),a_(e,i.parent),i=e.root)):(r=i.parent.left,1===jy(r)&&(Uy(r,0),Uy(i.parent,1),l_(e,i.parent),r=i.parent.left),0===jy(r.left)&&0===jy(r.right)?(Uy(r,1),i=i.parent):(0===jy(r.left)&&(Uy(r.right,0),Uy(r,1),a_(e,r),r=i.parent.left),Uy(r,jy(i.parent)),Uy(i.parent,0),Uy(r.left,0),l_(e,i.parent),i=e.root));Uy(i,0),o_()}function o_(){e_.parent=e_,e_.delta=0,e_.start=0,e_.end=0}function a_(e,t){const i=t.right;i.delta+=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta,t.right=i.left,i.left!==e_&&(i.left.parent=t),i.parent=t.parent,t.parent===e_?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i,h_(t),h_(i)}function l_(e,t){const i=t.left;t.delta-=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=i.delta,t.end-=i.delta,t.left=i.right,i.right!==e_&&(i.right.parent=t),i.parent=t.parent,t.parent===e_?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i,h_(t),h_(i)}function c_(e){let t=e.end;if(e.left!==e_){const i=e.left.maxEnd;i>t&&(t=i)}if(e.right!==e_){const i=e.right.maxEnd+e.delta;i>t&&(t=i)}return t}function h_(e){e.maxEnd=c_(e)}function u_(e){for(;e!==e_;){const t=c_(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function d_(e,t,i,n){return e===i?t-n:e-i}class f_{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==p_)return g_(this.right);let e=this;for(;e.parent!==p_&&e.parent.left!==e;)e=e.parent;return e.parent===p_?p_:e.parent}prev(){if(this.left!==p_)return m_(this.left);let e=this;for(;e.parent!==p_&&e.parent.right!==e;)e=e.parent;return e.parent===p_?p_:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const p_=new f_(null,0);function g_(e){for(;e.left!==p_;)e=e.left;return e}function m_(e){for(;e.right!==p_;)e=e.right;return e}function b_(e){return e===p_?0:e.size_left+e.piece.length+b_(e.right)}function v_(e){return e===p_?0:e.lf_left+e.piece.lineFeedCnt+v_(e.right)}function y_(){p_.parent=p_}function __(e,t){let i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==p_&&(i.left.parent=t),i.parent=t.parent,t.parent===p_?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function w_(e,t){let i=t.left;t.left=i.right,i.right!==p_&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===p_?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function S_(e,t){let i,n;if(t.left===p_?(n=t,i=n.right):t.right===p_?(n=t,i=n.left):(n=g_(t.right),i=n.right),n===e.root)return e.root=i,i.color=0,t.detach(),y_(),void(e.root.parent=p_);let r,s=1===n.color;if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?(i.parent=n.parent,k_(e,i)):(n.parent===t?i.parent=n:i.parent=n.parent,k_(e,i),n.left=t.left,n.right=t.right,n.parent=t.parent,n.color=t.color,t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==p_&&(n.left.parent=n),n.right!==p_&&(n.right.parent=n),n.size_left=t.size_left,n.lf_left=t.lf_left,k_(e,n)),t.detach(),i.parent.left===i){let t=b_(i),n=v_(i);if(t!==i.parent.size_left||n!==i.parent.lf_left){let r=t-i.parent.size_left,s=n-i.parent.lf_left;i.parent.size_left=t,i.parent.lf_left=n,x_(e,i.parent,r,s)}}if(k_(e,i.parent),s)y_();else{for(;i!==e.root&&0===i.color;)i===i.parent.left?(r=i.parent.right,1===r.color&&(r.color=0,i.parent.color=1,__(e,i.parent),r=i.parent.right),0===r.left.color&&0===r.right.color?(r.color=1,i=i.parent):(0===r.right.color&&(r.left.color=0,r.color=1,w_(e,r),r=i.parent.right),r.color=i.parent.color,i.parent.color=0,r.right.color=0,__(e,i.parent),i=e.root)):(r=i.parent.left,1===r.color&&(r.color=0,i.parent.color=1,w_(e,i.parent),r=i.parent.left),0===r.left.color&&0===r.right.color?(r.color=1,i=i.parent):(0===r.left.color&&(r.right.color=0,r.color=1,__(e,r),r=i.parent.left),r.color=i.parent.color,i.parent.color=0,r.left.color=0,w_(e,i.parent),i=e.root));i.color=0,y_()}}function C_(e,t){for(k_(e,t);t!==e.root&&1===t.parent.color;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;1===i.color?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&__(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,w_(e,t.parent.parent))}else{const i=t.parent.parent.left;1===i.color?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&w_(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,__(e,t.parent.parent))}e.root.color=0}function x_(e,t,i,n){for(;t!==e.root&&t!==p_;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}function k_(e,t){let i=0,n=0;if(t!==e.root){if(0===i){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t===e.root)return;i=b_((t=t.parent).left)-t.size_left,n=v_(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=n}for(;t!==e.root&&(0!==i||0!==n);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}}p_.parent=p_,p_.left=p_,p_.right=p_,p_.color=0;class E_ extends ip{constructor(e){super(0);for(let t=0,i=e.length;t<i;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}const T_=function(e){let t={};return i=>(t.hasOwnProperty(i)||(t[i]=e(i)),t[i])}((e=>new E_(e)));class L_{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(""===this.searchString)return null;let e;e=this.isRegex?function(e){if(!e||0===e.length)return!1;for(let t=0,i=e.length;t<i;t++){if(92===e.charCodeAt(t)){if(t++,t>=i)break;const n=e.charCodeAt(t);if(110===n||114===n||87===n||119===n)return!0}}return!1}(this.searchString):this.searchString.indexOf("\n")>=0;let t=null;try{t=dc(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(e){return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new N_(t,this.wordSeparators?T_(this.wordSeparators):null,i?this.searchString:null)}}class N_{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}function M_(e,t,i){if(!i)return new gu(e,null);let n=[];for(let e=0,i=t.length;e<i;e++)n[e]=t[e];return new gu(e,n)}class O_{constructor(e){let t=[],i=0;for(let n=0,r=e.length;n<r;n++)10===e.charCodeAt(n)&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,n=t.length-1;if(-1===n)return 0;if(e<=t[0])return 0;for(;i<n;){const r=i+((n-i)/2>>0);t[r]>=e?n=r-1:t[r+1]>=e?(i=r,n=r):i=r+1}return i+1}}class D_{static findMatches(e,t,i,n,r){const s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,i,new A_(s.wordSeparators,s.regex),n,r):this._doFindMatchesLineByLine(e,i,s,n,r):[]}static _getMultilineMatchRange(e,t,i,n,r,s){let o,a,l=0;if(n?(l=n.findLineFeedCountBeforeOffset(r),o=t+r+l):o=t+r,n){let e=n.findLineFeedCountBeforeOffset(r+s.length)-l;a=o+s.length+e}else a=o+s.length;const c=e.getPositionAt(o),h=e.getPositionAt(a);return new xo(c.lineNumber,c.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,i,n,r){const s=e.getOffsetAt(t.getStartPosition()),o=e.getValueInRange(t,1),a="\r\n"===e.getEOL()?new O_(o):null,l=[];let c,h=0;for(i.reset(0);c=i.next(o);)if(l[h++]=M_(this._getMultilineMatchRange(e,s,o,a,c.index,c[0]),c,n),h>=r)return l;return l}static _doFindMatchesLineByLine(e,t,i,n,r){const s=[];let o=0;if(t.startLineNumber===t.endLineNumber){const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return o=this._findMatchesInLine(i,a,t.startLineNumber,t.startColumn-1,o,s,n,r),s}const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);o=this._findMatchesInLine(i,a,t.startLineNumber,t.startColumn-1,o,s,n,r);for(let a=t.startLineNumber+1;a<t.endLineNumber&&o<r;a++)o=this._findMatchesInLine(i,e.getLineContent(a),a,0,o,s,n,r);if(o<r){const a=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);o=this._findMatchesInLine(i,a,t.endLineNumber,0,o,s,n,r)}return s}static _findMatchesInLine(e,t,i,n,r,s,o,a){const l=e.wordSeparators;if(!o&&e.simpleSearch){const o=e.simpleSearch,c=o.length,h=t.length;let u=-c;for(;-1!==(u=t.indexOf(o,u+c));)if((!l||I_(l,t,h,u,c))&&(s[r++]=new gu(new xo(i,u+1+n,i,u+1+c+n),null),r>=a))return r;return r}const c=new A_(e.wordSeparators,e.regex);let h;c.reset(0);do{if(h=c.next(t),h&&(s[r++]=M_(new xo(i,h.index+1+n,i,h.index+1+h[0].length+n),h,o),r>=a))return r}while(h);return r}static findNextMatch(e,t,i,n){const r=t.parseSearchRequest();if(!r)return null;const s=new A_(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,i,s,n):this._doFindNextMatchLineByLine(e,i,s,n)}static _doFindNextMatchMultiline(e,t,i,n){const r=new Co(t.lineNumber,1),s=e.getOffsetAt(r),o=e.getLineCount(),a=e.getValueInRange(new xo(r.lineNumber,r.column,o,e.getLineMaxColumn(o)),1),l="\r\n"===e.getEOL()?new O_(a):null;i.reset(t.column-1);let c=i.next(a);return c?M_(this._getMultilineMatchRange(e,s,a,l,c.index,c[0]),c,n):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new Co(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){const r=e.getLineCount(),s=t.lineNumber,o=e.getLineContent(s),a=this._findFirstMatchInLine(i,o,s,t.column,n);if(a)return a;for(let t=1;t<=r;t++){const o=(s+t-1)%r,a=e.getLineContent(o+1),l=this._findFirstMatchInLine(i,a,o+1,1,n);if(l)return l}return null}static _findFirstMatchInLine(e,t,i,n,r){e.reset(n-1);const s=e.next(t);return s?M_(new xo(i,s.index+1,i,s.index+1+s[0].length),s,r):null}static findPreviousMatch(e,t,i,n){const r=t.parseSearchRequest();if(!r)return null;const s=new A_(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,i,s,n):this._doFindPreviousMatchLineByLine(e,i,s,n)}static _doFindPreviousMatchMultiline(e,t,i,n){const r=this._doFindMatchesMultiline(e,new xo(1,1,t.lineNumber,t.column),i,n,9990);if(r.length>0)return r[r.length-1];const s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new Co(s,e.getLineMaxColumn(s)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){const r=e.getLineCount(),s=t.lineNumber,o=e.getLineContent(s).substring(0,t.column-1),a=this._findLastMatchInLine(i,o,s,n);if(a)return a;for(let t=1;t<=r;t++){const o=(r+s-t-1)%r,a=e.getLineContent(o+1),l=this._findLastMatchInLine(i,a,o+1,n);if(l)return l}return null}static _findLastMatchInLine(e,t,i,n){let r,s=null;for(e.reset(0);r=e.next(t);)s=M_(new xo(i,r.index+1,i,r.index+1+r[0].length),r,n);return s}}function I_(e,t,i,n,r){return function(e,t,i,n,r){if(0===n)return!0;const s=t.charCodeAt(n-1);if(0!==e.get(s))return!0;if(13===s||10===s)return!0;if(r>0){const i=t.charCodeAt(n);if(0!==e.get(i))return!0}return!1}(e,t,0,n,r)&&function(e,t,i,n,r){if(n+r===i)return!0;const s=t.charCodeAt(n+r);if(0!==e.get(s))return!0;if(13===s||10===s)return!0;if(r>0){const i=t.charCodeAt(n+r-1);if(0!==e.get(i))return!0}return!1}(e,t,i,n,r)}class A_{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t)return null;if(i=this._searchRegex.exec(e),!i)return null;const n=i.index,r=i[0].length;if(n===this._prevMatchStartIndex&&r===this._prevMatchLength){if(0===r){Ic(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=r,!this._wordSeparators||I_(this._wordSeparators,e,t,n,r))return i}while(i);return null}}const P_=65535;function R_(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}class B_{constructor(e,t,i,n,r){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=r}}function F_(e,t=!0){let i=[0],n=1;for(let t=0,r=e.length;t<r;t++){const s=e.charCodeAt(t);13===s?t+1<r&&10===e.charCodeAt(t+1)?(i[n++]=t+2,t++):i[n++]=t+1:10===s&&(i[n++]=t+1)}return t?R_(i):i}class W_{constructor(e,t,i,n,r){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=r}}class V_{constructor(e,t){this.buffer=e,this.lineStarts=t}}class z_{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==p_&&e.iterate(e.root,(e=>(e!==p_&&this._pieces.push(e.piece),!0)))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class H_{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,i=this._cache;for(let n=0;n<i.length;n++){let r=i[n];(null===r.node.parent||r.nodeStartOffset>=e)&&(i[n]=null,t=!0)}if(t){let e=[];for(const t of i)null!==t&&e.push(t);this._cache=e}}}class j_{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new V_("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=p_,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let t=0,i=e.length;t<i;t++)if(e[t].buffer.length>0){e[t].lineStarts||(e[t].lineStarts=F_(e[t].buffer));let i=new W_(t+1,{line:0,column:0},{line:e[t].lineStarts.length-1,column:e[t].buffer.length-e[t].lineStarts[e[t].lineStarts.length-1]},e[t].lineStarts.length-1,e[t].buffer.length);this._buffers.push(e[t]),n=this.rbInsertRight(n,i)}this._searchCache=new H_(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=65535-Math.floor(21845),i=2*t,n="",r=0,s=[];if(this.iterate(this.root,(o=>{let a=this.getNodeContent(o),l=a.length;if(r<=t||r+l<i)return n+=a,r+=l,!0;let c=n.replace(/\r\n|\r|\n/g,e);return s.push(new V_(c,F_(c))),n=a,r=l,!0})),r>0){let t=n.replace(/\r\n|\r|\n/g,e);s.push(new V_(t,F_(t)))}this.create(s,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new z_(this,e)}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==p_;)if(n.left!==p_&&n.lf_left+1>=e)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt+1>=e){return i+=n.size_left,i+(this.getAccumulatedValue(n,e-n.lf_left-2)+t-1)}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0,n=e;for(;t!==p_;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){let r=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+r.index,0===r.index){let e=this.getOffsetAt(i+1,1);return new Co(i+1,n-e+1)}return new Co(i+1,r.remainder+1)}if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===p_){let t=this.getOffsetAt(i+1,1);return new Co(i+1,n-e-t+1)}t=t.right}return new Co(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(i,n);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){let i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n.substring(r+e.remainder,r+t.remainder)}let i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start),s=n.substring(r+e.remainder,r+i.piece.length);for(i=i.next();i!==p_;){let e=this._buffers[i.piece.bufferIndex].buffer,n=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){s+=e.substring(n,n+t.remainder);break}s+=e.substr(n,i.piece.length),i=i.next()}return s}getLinesContent(){let e=[],t=0,i="",n=!1;return this.iterate(this.root,(r=>{if(r===p_)return!0;const s=r.piece;let o=s.length;if(0===o)return!0;const a=this._buffers[s.bufferIndex].buffer,l=this._buffers[s.bufferIndex].lineStarts,c=s.start.line,h=s.end.line;let u=l[c]+s.start.column;if(n&&(10===a.charCodeAt(u)&&(u++,o--),e[t++]=i,i="",n=!1,0===o))return!0;if(c===h)return this._EOLNormalized||13!==a.charCodeAt(u+o-1)?i+=a.substr(u,o):(n=!0,i+=a.substr(u,o-1)),!0;i+=this._EOLNormalized?a.substring(u,Math.max(u,l[c+1]-this._EOLLength)):a.substring(u,l[c+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let n=c+1;n<h;n++)i=this._EOLNormalized?a.substring(l[n],l[n+1]-this._EOLLength):a.substring(l[n],l[n+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return this._EOLNormalized||13!==a.charCodeAt(l[h]+s.end.column-1)?i=a.substr(l[h],s.end.column):(n=!0,0===s.end.column?t--:i=a.substr(l[h],s.end.column-1)),!0})),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,n,r,s,o,a,l,c,h){let u,d,f,p=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),m=this.offsetInBuffer(e.piece.bufferIndex,r),b=this.offsetInBuffer(e.piece.bufferIndex,s),v={line:0,column:0};t._wordSeparators?(d=p.buffer.substring(m,b),f=e=>e+m,t.reset(0)):(d=p.buffer,f=e=>e,t.reset(m));do{if(u=t.next(d),u){if(f(u.index)>=b)return c;this.positionInBuffer(e,f(u.index)-g,v);let t=this.getLineFeedCnt(e.piece.bufferIndex,r,v),s=v.line===r.line?v.column-r.column+n:v.column+1,o=s+u[0].length;if(h[c++]=M_(new xo(i+t,s,i+t,o),u,a),f(u.index)+u[0].length>=b)return c;if(c>=l)return c}}while(u);return c}findMatchesLineByLine(e,t,i,n){const r=[];let s=0;const o=new A_(t.wordSeparators,t.regex);let a=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===a)return[];let l=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===l)return[];let c=this.positionInBuffer(a.node,a.remainder),h=this.positionInBuffer(l.node,l.remainder);if(a.node===l.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,c,h,t,i,n,s,r),r;let u=e.startLineNumber,d=a.node;for(;d!==l.node;){let l=this.getLineFeedCnt(d.piece.bufferIndex,c,d.piece.end);if(l>=1){let a=this._buffers[d.piece.bufferIndex].lineStarts,h=this.offsetInBuffer(d.piece.bufferIndex,d.piece.start),f=a[c.line+l],p=u===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(d,o,u,p,c,this.positionInBuffer(d,f-h),t,i,n,s,r),s>=n)return r;u+=l}let h=u===e.startLineNumber?e.startColumn-1:0;if(u===e.endLineNumber){const a=this.getLineContent(u).substring(h,e.endColumn-1);return s=this._findMatchesInLine(t,o,a,e.endLineNumber,h,s,r,i,n),r}if(s=this._findMatchesInLine(t,o,this.getLineContent(u).substr(h),u,h,s,r,i,n),s>=n)return r;u++,a=this.nodeAt2(u,1),d=a.node,c=this.positionInBuffer(a.node,a.remainder)}if(u===e.endLineNumber){let a=u===e.startLineNumber?e.startColumn-1:0;const l=this.getLineContent(u).substring(a,e.endColumn-1);return s=this._findMatchesInLine(t,o,l,e.endLineNumber,a,s,r,i,n),r}let f=u===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(l.node,o,u,f,c,h,t,i,n,s,r),r}_findMatchesInLine(e,t,i,n,r,s,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const t=e.simpleSearch,a=t.length,h=i.length;let u=-a;for(;-1!==(u=i.indexOf(t,u+a));)if((!c||I_(c,i,h,u,a))&&(o[s++]=new gu(new xo(n,u+1+r,n,u+1+a+r),null),s>=l))return s;return s}let h;t.reset(0);do{if(h=t.next(i),h&&(o[s++]=M_(new xo(n,h.index+1+r,n,h.index+1+h[0].length+r),h,a),s>=l))return s}while(h);return s}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==p_){let{node:i,remainder:n,nodeStartOffset:r}=this.nodeAt(e),s=i.piece,o=s.bufferIndex,a=this.positionInBuffer(i,n);if(0===i.piece.bufferIndex&&s.end.line===this._lastChangeBufferPos.line&&s.end.column===this._lastChangeBufferPos.column&&r+s.length===e&&t.length<P_)return this.appendToNode(i,t),void this.computeBufferMetadata();if(r===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(r+i.piece.length>e){let e=[],r=new W_(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),this.offsetInBuffer(o,s.end)-this.offsetInBuffer(o,a));if(this.shouldCheckCRLF()&&this.endWithCR(t)){if(10===this.nodeCharCodeAt(i,n)){let e={line:r.start.line+1,column:0};r=new W_(r.bufferIndex,e,r.end,this.getLineFeedCnt(r.bufferIndex,e,r.end),r.length-1),t+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){if(13===this.nodeCharCodeAt(i,n-1)){let r=this.positionInBuffer(i,n-1);this.deleteNodeTail(i,r),t="\r"+t,0===i.piece.length&&e.push(i)}else this.deleteNodeTail(i,a)}else this.deleteNodeTail(i,a);let l=this.createNewPieces(t);r.length>0&&this.rbInsertRight(i,r);let c=i;for(let e=0;e<l.length;e++)c=this.rbInsertRight(c,l[e]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,i)}else{let e=this.createNewPieces(t),i=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)i=this.rbInsertRight(i,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===p_)return;let i=this.nodeAt(e),n=this.nodeAt(e+t),r=i.node,s=n.node;if(r===s){let s=this.positionInBuffer(r,i.remainder),o=this.positionInBuffer(r,n.remainder);if(i.nodeStartOffset===e){if(t===r.piece.length){let e=r.next();return S_(this,r),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(r,o),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),void this.computeBufferMetadata()}return i.nodeStartOffset+r.piece.length===e+t?(this.deleteNodeTail(r,s),this.validateCRLFWithNextNode(r),void this.computeBufferMetadata()):(this.shrinkNode(r,s,o),void this.computeBufferMetadata())}let o=[],a=this.positionInBuffer(r,i.remainder);this.deleteNodeTail(r,a),this._searchCache.validate(e),0===r.piece.length&&o.push(r);let l=this.positionInBuffer(s,n.remainder);this.deleteNodeHead(s,l),0===s.piece.length&&o.push(s);for(let e=r.next();e!==p_&&e!==s;e=e.next())o.push(e);let c=0===r.piece.length?r.prev():r;this.deleteNodes(o),this.validateCRLFWithNextNode(c),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let n=t.piece,r={line:n.start.line+1,column:0},s=new W_(n.bufferIndex,r,n.end,this.getLineFeedCnt(n.bufferIndex,r,n.end),n.length-1);t.piece=s,e+="\n",x_(this,t,-1,-1),0===t.piece.length&&i.push(t)}let n=this.createNewPieces(e),r=this.rbInsertLeft(t,n[n.length-1]);for(let e=n.length-2;e>=0;e--)r=this.rbInsertLeft(r,n[e]);this.validateCRLFWithPrevNode(r),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");let i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]),r=n;for(let e=1;e<i.length;e++)r=this.rbInsertRight(r,i[e]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){let n=e.piece,r=e.piece.bufferIndex,s=this._buffers[r].lineStarts,o=s[n.start.line]+n.start.column+t,a=n.start.line,l=n.end.line,c=0,h=0,u=0;for(;a<=l&&(c=a+(l-a)/2|0,u=s[c],c!==l);)if(h=s[c+1],o<u)l=c-1;else{if(!(o>=h))break;a=c+1}return i?(i.line=c,i.column=o-u,null):{line:c,column:o-u}}getLineFeedCnt(e,t,i){if(0===i.column)return i.line-t.line;let n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;let r=n[i.line+1],s=n[i.line]+i.column;if(r>s+1)return i.line-t.line;let o=s-1;return 13===this._buffers[e].buffer.charCodeAt(o)?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)S_(this,e[t])}createNewPieces(e){if(e.length>P_){let t=[];for(;e.length>P_;){const i=e.charCodeAt(65534);let n;13===i||i>=55296&&i<=56319?(n=e.substring(0,65534),e=e.substring(65534)):(n=e.substring(0,P_),e=e.substring(P_));let r=F_(n);t.push(new W_(this._buffers.length,{line:0,column:0},{line:r.length-1,column:n.length-r[r.length-1]},r.length-1,n.length)),this._buffers.push(new V_(n,r))}let i=F_(e);return t.push(new W_(this._buffers.length,{line:0,column:0},{line:i.length-1,column:e.length-i[i.length-1]},i.length-1,e.length)),this._buffers.push(new V_(e,i)),t}let t=this._buffers[0].buffer.length;const i=F_(e,!1);let n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let e=0;e<i.length;e++)i[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<i.length;e++)i[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length;let s=this._buffers[0].lineStarts.length-1,o={line:s,column:r-this._buffers[0].lineStarts[s]},a=new W_(0,n,o,this.getLineFeedCnt(0,n,o),r-t);return this._lastChangeBufferPos=o,[a]}getLineRawContent(e,t=0){let i=this.root,n="",r=this._searchCache.get2(e);if(r){i=r.node;let s=this.getAccumulatedValue(i,e-r.nodeStartLineNumber-1),o=this._buffers[i.piece.bufferIndex].buffer,a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(r.nodeStartLineNumber+i.piece.lineFeedCnt!==e){let n=this.getAccumulatedValue(i,e-r.nodeStartLineNumber);return o.substring(a+s,a+n-t)}n=o.substring(a+s,a+i.piece.length)}else{let r=0;const s=e;for(;i!==p_;)if(i.left!==p_&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){let n=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:r,nodeStartLineNumber:s-(e-1-i.lf_left)}),a.substring(l+n,l+o-t)}if(i.lf_left+i.piece.lineFeedCnt===e-1){let t=this.getAccumulatedValue(i,e-i.lf_left-2),r=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=r.substring(s+t,s+i.piece.length);break}e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right}}for(i=i.next();i!==p_;){let e=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){let r=this.getAccumulatedValue(i,0),s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=e.substring(s,s+r-t),n}{let t=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=e.substr(t,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==p_;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){let i=e.piece,n=this.positionInBuffer(e,t),r=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){let t=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(t!==r)return{index:t,remainder:0}}return{index:r,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;let i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,r=i.start.line+t+1;return r>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[r]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.end),s=t,o=this.offsetInBuffer(i.bufferIndex,s),a=this.getLineFeedCnt(i.bufferIndex,i.start,s),l=a-n,c=o-r,h=i.length+c;e.piece=new W_(i.bufferIndex,i.start,s,a,h),x_(this,e,c,l)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.start),s=t,o=this.getLineFeedCnt(i.bufferIndex,s,i.end),a=o-n,l=r-this.offsetInBuffer(i.bufferIndex,s),c=i.length+l;e.piece=new W_(i.bufferIndex,s,i.end,o,c),x_(this,e,l,a)}shrinkNode(e,t,i){const n=e.piece,r=n.start,s=n.end,o=n.length,a=n.lineFeedCnt,l=t,c=this.getLineFeedCnt(n.bufferIndex,n.start,l),h=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,r);e.piece=new W_(n.bufferIndex,n.start,l,c,h),x_(this,e,h-o,c-a);let u=new W_(n.bufferIndex,i,s,this.getLineFeedCnt(n.bufferIndex,i,s),this.offsetInBuffer(n.bufferIndex,s)-this.offsetInBuffer(n.bufferIndex,i)),d=this.rbInsertRight(e,u);this.validateCRLFWithPrevNode(d)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=F_(t,!1);for(let e=0;e<r.length;e++)r[e]+=n;if(i){let e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const s=this._buffers[0].lineStarts.length-1,o={line:s,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[s]},a=e.piece.length+t.length,l=e.piece.lineFeedCnt,c=this.getLineFeedCnt(0,e.piece.start,o),h=c-l;e.piece=new W_(e.piece.bufferIndex,e.piece.start,o,c,a),this._lastChangeBufferPos=o,x_(this,e,t.length,h)}nodeAt(e){let t=this.root,i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==p_;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){n+=t.size_left;let i={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(i),i}e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==p_;)if(i.left!==p_&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(i,e-i.lf_left-2),s=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(r+t-1,s),nodeStartOffset:n}}if(i.lf_left+i.piece.lineFeedCnt===e-1){let r=this.getAccumulatedValue(i,e-i.lf_left-2);if(r+t-1<=i.piece.length)return{node:i,remainder:r+t-1,nodeStartOffset:n};t-=i.piece.length-r;break}e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==p_;){if(i.piece.lineFeedCnt>0){let e=this.getAccumulatedValue(i,0),n=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,e),nodeStartOffset:n}}if(i.piece.length>=t-1){return{node:i,remainder:t-1,nodeStartOffset:this.offsetOfNode(i)}}t-=i.piece.length,i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"==typeof e)return 10===e.charCodeAt(0);if(e===p_||0===e.piece.lineFeedCnt)return!1;let t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,r=i[n]+t.start.column;return n!==i.length-1&&(!(i[n+1]>r+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(r))}endWithCR(e){return"string"==typeof e?13===e.charCodeAt(e.length-1):e!==p_&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let i,n=[],r=this._buffers[e.piece.bufferIndex].lineStarts;i=0===e.piece.end.column?{line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const s=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new W_(e.piece.bufferIndex,e.piece.start,i,o,s),x_(this,e,-1,-1),0===e.piece.length&&n.push(e);let a={line:t.piece.start.line+1,column:0};const l=t.piece.length-1,c=this.getLineFeedCnt(t.piece.bufferIndex,a,t.piece.end);t.piece=new W_(t.piece.bufferIndex,a,t.piece.end,c,l),x_(this,t,-1,-1),0===t.piece.length&&n.push(t);let h=this.createNewPieces("\r\n");this.rbInsertRight(e,h[0]);for(let e=0;e<n.length;e++)S_(this,n[e])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let i=t.next();if(this.startWithLF(i)){if(e+="\n",1===i.piece.length)S_(this,i);else{const e=i.piece,t={line:e.start.line+1,column:0},n=e.length-1,r=this.getLineFeedCnt(e.bufferIndex,t,e.end);i.piece=new W_(e.bufferIndex,t,e.end,r,n),x_(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===p_)return t(p_);let i=this.iterate(e.left,t);return i?t(e)&&this.iterate(e.right,t):i}getNodeContent(e){if(e===p_)return"";let t,i=this._buffers[e.piece.bufferIndex],n=e.piece,r=this.offsetInBuffer(n.bufferIndex,n.start),s=this.offsetInBuffer(n.bufferIndex,n.end);return t=i.buffer.substring(r,s),t}getPieceContent(e){let t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){let i=new f_(t,1);if(i.left=p_,i.right=p_,i.parent=p_,i.size_left=0,i.lf_left=0,this.root===p_)this.root=i,i.color=0;else if(e.right===p_)e.right=i,i.parent=e;else{let t=g_(e.right);t.left=i,i.parent=t}return C_(this,i),i}rbInsertLeft(e,t){let i=new f_(t,1);if(i.left=p_,i.right=p_,i.parent=p_,i.size_left=0,i.lf_left=0,this.root===p_)this.root=i,i.color=0;else if(e.left===p_)e.left=i,i.parent=e;else{let t=m_(e.left);t.right=i,i.parent=t}return C_(this,i),i}}function U_(e){let t=0,i=0,n=0,r=0;for(let s=0,o=e.length;s<o;s++){const a=e.charCodeAt(s);13===a?(0===t&&(i=s),t++,s+1<o&&10===e.charCodeAt(s+1)?(r|=2,s++):r|=3,n=s+1):10===a&&(r|=1,0===t&&(i=s),t++,n=s+1)}return 0===t&&(i=e.length),[t,i,e.length-n,r]}function G_(e){return(16384|e<<0|2<<23)>>>0}const K_=new Uint32Array(0).buffer;class $_{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const i=this.tokens[this.tokens.length-1];if(i.startLineNumber+i.tokens.length-1+1===e)return void i.tokens.push(t)}this.tokens.push(new X_(e,[t]))}}class q_{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(0===e)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),n=this._getEndCharacter(e-1);return new xo(0,t+1,i,n+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return 0===this._getTokenCount()}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const n=t+Math.floor((i-t)/2),r=this._getDeltaLine(n);if(r<e)t=n+1;else{if(!(r>e)){let r=n;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let s=n;for(;s<i&&this._getDeltaLine(s+1)===e;)s++;return new Z_(this._tokens.subarray(4*r,4*s+4))}i=n-1}}return this._getDeltaLine(t)===e?new Z_(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,n){const r=this._tokens,s=this._tokenCount;let o=0,a=!1,l=0;for(let c=0;c<s;c++){const s=4*c,h=r[s],u=r[s+1],d=r[s+2],f=r[s+3];if((h>e||h===e&&d>=t)&&(h<i||h===i&&u<=n))a=!0;else{if(0===o&&(l=h),a){const e=4*o;r[e]=h-l,r[e+1]=u,r[e+2]=d,r[e+3]=f}o++}}return this._tokenCount=o,l}split(e,t,i,n){const r=this._tokens,s=this._tokenCount;let o=[],a=[],l=o,c=0,h=0;for(let o=0;o<s;o++){const s=4*o,u=r[s],d=r[s+1],f=r[s+2],p=r[s+3];if(u>e||u===e&&f>=t){if(u<i||u===i&&d<=n)continue;l!==a&&(l=a,c=0,h=u)}l[c++]=u-h,l[c++]=d,l[c++]=f,l[c++]=p}return[new q_(new Uint32Array(o)),new q_(new Uint32Array(a)),h]}acceptDeleteRange(e,t,i,n,r){const s=this._tokens,o=this._tokenCount,a=n-t;let l=0,c=!1;for(let h=0;h<o;h++){const u=4*h;let d=s[u],f=s[u+1],p=s[u+2];const g=s[u+3];if(d<t||d===t&&p<=i){l++;continue}if(d===t&&f<i)d===n&&p>r?p-=r-i:p=i;else if(d===t&&f===i){if(!(d===n&&p>r)){c=!0;continue}p-=r-i}else if(d<n||d===n&&f<r){if(!(d===n&&p>r)){c=!0;continue}d===t?(f=i,p=f+(p-r)):(f=0,p=f+(p-r))}else if(d>n){if(0===a&&!c){l=o;break}d-=a}else{if(!(d===n&&f>=r))throw new Error("Not possible!");e&&0===d&&(f+=e,p+=e),d-=a,f-=r-i,p-=r-i}const m=4*l;s[m]=d,s[m+1]=f,s[m+2]=p,s[m+3]=g,l++}this._tokenCount=l}acceptInsertText(e,t,i,n,r,s){const o=0===i&&1===n&&(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122),a=this._tokens,l=this._tokenCount;for(let s=0;s<l;s++){const l=4*s;let c=a[l],h=a[l+1],u=a[l+2];if(!(c<e||c===e&&u<t)){if(c===e&&u===t){if(!o)continue;u+=1}else if(c===e&&h<t&&t<u)0===i?u+=n:u=t;else{if(c===e&&h===t&&o)continue;if(c===e)if(c+=i,0===i)h+=n,u+=n;else{const e=u-h;h=r+(h-t),u=h+e}else c+=i}a[l]=c,a[l+1]=h,a[l+2]=u}}}}class Z_{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class Y_{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e?new xo(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn):e}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,i=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,i=e.endLineNumber-this.startLineNumber,[n,r,s]=this.tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new Y_(this.startLineNumber,n),new Y_(this.startLineNumber+s,r)]}applyEdit(e,t){const[i,n,r]=U_(t);this.acceptEdit(e,i,n,r,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,n,r){this._acceptDeleteRange(e),this._acceptInsertText(new Co(e.startLineNumber,e.startColumn),t,i,n,r),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,i=e.endLineNumber-this.startLineNumber;if(i<0){const e=i-t;return void(this.startLineNumber-=e)}const n=this.tokens.getMaxDeltaLine();if(!(t>=n+1)){if(t<0&&i>=n+1)return this.startLineNumber=0,void this.tokens.clear();if(t<0){const n=-t;this.startLineNumber-=n,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,n,r){if(0===t&&0===i)return;const s=e.lineNumber-this.startLineNumber;if(s<0)return void(this.startLineNumber+=t);s>=this.tokens.getMaxDeltaLine()+1||this.tokens.acceptInsertText(s,e.column-1,t,i,n,r)}}class X_{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function Q_(e){return e instanceof Uint32Array?e:new Uint32Array(e)}class J_{constructor(){this._pieces=[],this._isComplete=!1}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const n=t[0].getRange(),r=t[t.length-1].getRange();if(!n||!r)return e;i=e.plusRange(n).plusRange(r)}let n=null;for(let e=0,t=this._pieces.length;e<t;e++){const r=this._pieces[e];if(r.endLineNumber<i.startLineNumber)continue;if(r.startLineNumber>i.endLineNumber){n=n||{index:e};break}if(r.removeTokens(i),r.isEmpty()){this._pieces.splice(e,1),e--,t--;continue}if(r.endLineNumber<i.startLineNumber)continue;if(r.startLineNumber>i.endLineNumber){n=n||{index:e};continue}const[s,o]=r.split(i);s.isEmpty()?n=n||{index:e}:o.isEmpty()||(this._pieces.splice(e,1,s,o),e++,t++,n=n||{index:e})}return n=n||{index:this._pieces.length},t.length>0&&(this._pieces=wp(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSemanticTokens(e,t){const i=this._pieces;if(0===i.length)return t;const n=i[J_._findFirstPieceWithLine(i,e)].getLineTokens(e);if(!n)return t;const r=t.getCount(),s=n.getCount();let o=0,a=[],l=0,c=0;const h=(e,t)=>{e!==c&&(c=e,a[l++]=e,a[l++]=t)};for(let e=0;e<s;e++){const i=n.getStartCharacter(e),s=n.getEndCharacter(e),a=n.getMetadata(e),l=((1&a?2048:0)|(2&a?4096:0)|(4&a?8192:0)|(8&a?8372224:0)|(16&a?4286578688:0))>>>0,c=~l>>>0;for(;o<r&&t.getEndOffset(o)<=i;)h(t.getEndOffset(o),t.getMetadata(o)),o++;for(o<r&&t.getStartOffset(o)<i&&h(i,t.getMetadata(o));o<r&&t.getEndOffset(o)<s;)h(t.getEndOffset(o),t.getMetadata(o)&c|a&l),o++;if(o<r)h(s,t.getMetadata(o)&c|a&l),t.getEndOffset(o)===s&&o++;else{const e=Math.min(Math.max(0,o-1),r-1);h(s,t.getMetadata(e)&c|a&l)}}for(;o<r;)h(t.getEndOffset(o),t.getMetadata(o)),o++;return new jp(new Uint32Array(a),t.getLineContent())}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let r=i+Math.floor((n-i)/2);if(e[r].endLineNumber<t)i=r+1;else{if(!(e[r].startLineNumber>t)){for(;r>i&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}n=r-1}}return i}acceptEdit(e,t,i,n,r){for(const s of this._pieces)s.acceptEdit(e,t,i,n,r)}}class ew{constructor(){this._lineTokens=[],this._len=0}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),null!==n&&n!==K_)return new jp(Q_(n),i);let r=new Uint32Array(2);return r[0]=i.length,r[1]=G_(e),new jp(r,i)}static _massageTokens(e,t,i){const n=i?Q_(i):null;if(0===t){let t=!1;if(n&&n.length>1&&(t=nd.getLanguageId(n[1])!==e),!t)return K_}if(!n||0===n.length){const i=new Uint32Array(2);return i[0]=t,i[1]=G_(e),i.buffer}return n[n.length-2]=t,0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;let i=[];for(let e=0;e<t;e++)i[e]=null;this._lineTokens=wp(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,r){const s=ew._massageTokens(e,i,n);this._ensureLine(t);const o=this._lineTokens[t];return this._lineTokens[t]=s,!!r&&!ew._equals(o,s)}static _equals(e,t){if(!e||!t)return!e&&!t;const i=Q_(e),n=Q_(t);if(i.length!==n.length)return!1;for(let e=0,t=i.length;e<t;e++)if(i[e]!==n[e])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new Co(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[t]=ew._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1))}this._lineTokens[t]=ew._deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let n=null;i<this._len&&(n=ew._deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=ew._append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(0===t&&0===i)return;const n=e.lineNumber-1;n>=this._len||(0!==t?(this._lineTokens[n]=ew._deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=ew._insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)):this._lineTokens[n]=ew._insert(this._lineTokens[n],e.column-1,i))}static _deleteBeginning(e,t){return null===e||e===K_?e:ew._delete(e,0,t)}static _deleteEnding(e,t){if(null===e||e===K_)return e;const i=Q_(e),n=i[i.length-2];return ew._delete(e,t,n)}static _delete(e,t,i){if(null===e||e===K_||t===i)return e;const n=Q_(e),r=n.length>>>1;if(0===t&&n[n.length-2]===i)return K_;const s=jp.findIndexInTokensArray(n,t),o=s>0?n[s-1<<1]:0;if(i<n[s<<1]){const o=i-t;for(let e=s;e<r;e++)n[e<<1]-=o;return e}let a,l;o!==t?(n[s<<1]=t,a=s+1<<1,l=t):(a=s<<1,l=o);const c=i-t;for(let e=s+1;e<r;e++){const t=n[e<<1]-c;t>l&&(n[a++]=t,n[a++]=n[1+(e<<1)],l=t)}if(a===n.length)return e;let h=new Uint32Array(a);return h.set(n.subarray(0,a),0),h.buffer}static _append(e,t){if(t===K_)return e;if(e===K_)return t;if(null===e)return e;if(null===t)return null;const i=Q_(e),n=Q_(t),r=n.length>>>1;let s=new Uint32Array(i.length+n.length);s.set(i,0);let o=i.length;const a=i[i.length-2];for(let e=0;e<r;e++)s[o++]=n[e<<1]+a,s[o++]=n[1+(e<<1)];return s.buffer}static _insert(e,t,i){if(null===e||e===K_)return e;const n=Q_(e),r=n.length>>>1;let s=jp.findIndexInTokensArray(n,t);if(s>0){n[s-1<<1]===t&&s--}for(let e=s;e<r;e++)n[e<<1]+=i;return e}}class tw extends as{constructor(e,t,i,n,r,s,o){super(),this._onDidChangeContent=this._register(new ms),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=r,this._pieceTree=new j_(e,i,o)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let i=e+t;const n=this.getPositionAt(e),r=this.getPositionAt(i);return new xo(n.lineNumber,n.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let i=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-i}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,r=e.endLineNumber;for(let t=n;t<=r;t++){const s=this.getLineContent(t),o=t===n?e.startColumn-1:0,a=t===r?e.endColumn-1:s.length;for(let e=o;e<a;e++)Mc(s.charCodeAt(e))?(i+=1,e+=1):i+=1}return i+=this._getEndOfLine(t).length*(r-n),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=gc(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=bc(this.getLineContent(e));return-1===t?0:t+2}_getEndOfLine(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,o=!0,a=[];for(let t=0;t<e.length;t++){let i=e[t];o&&i._isTracked&&(o=!1);let l=i.range;if(i.text){let e=!0;s||(e=!Vc(i.text),s=e),!n&&e&&(n=Bc(i.text)),!r&&e&&(r=Hc(i.text))}let c="",h=0,u=0,d=0;if(i.text){let e;[h,u,d,e]=U_(i.text);const t=this.getEOL(),n="\r\n"===t?2:1;c=0===e||e===n?i.text:i.text.replace(/\r\n|\r|\n/g,t)}a[t]={sortIndex:t,identifier:i.identifier||null,range:l,rangeOffset:this.getOffsetAt(l.startLineNumber,l.startColumn),rangeLength:this.getValueLengthInRange(l),text:c,eolCount:h,firstLineLength:u,lastLineLength:d,forceMoveMarkers:Boolean(i.forceMoveMarkers),isAutoWhitespaceEdit:i.isAutoWhitespaceEdit||!1}}a.sort(tw._sortOpsAscending);let l=!1;for(let e=0,t=a.length-1;e<t;e++){let t=a[e].range.getEndPosition(),i=a[e+1].range.getStartPosition();if(i.isBeforeOrEqual(t)){if(i.isBefore(t))throw new Error("Overlapping ranges are not allowed!");l=!0}}o&&(a=this._reduceOperations(a));let c=i||t?tw._getInverseEditRanges(a):[],h=[];if(t)for(let e=0;e<a.length;e++){let t=a[e],i=c[e];if(t.isAutoWhitespaceEdit&&t.range.isEmpty())for(let e=i.startLineNumber;e<=i.endLineNumber;e++){let n="";e===i.startLineNumber&&(n=this.getLineContent(t.range.startLineNumber),-1!==gc(n))||h.push({lineNumber:e,oldContent:n})}}let u=null;if(i){let e=0;u=[];for(let t=0;t<a.length;t++){const i=a[t],n=c[t],r=this.getValueInRange(i.range),s=i.rangeOffset+e;e+=i.text.length-r.length,u[t]={sortIndex:i.sortIndex,identifier:i.identifier,range:n,text:r,textChange:new Dy(i.rangeOffset,r,s,i.text)}}l||u.sort(((e,t)=>e.sortIndex-t.sortIndex))}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=s;const d=this._doApplyEdits(a);let f=null;if(t&&h.length>0){h.sort(((e,t)=>t.lineNumber-e.lineNumber)),f=[];for(let e=0,t=h.length;e<t;e++){let t=h[e].lineNumber;if(e>0&&h[e-1].lineNumber===t)continue;let i=h[e].oldContent,n=this.getLineContent(t);0!==n.length&&n!==i&&-1===gc(n)&&f.push(t)}}return this._onDidChangeContent.fire(),new bu(u,d,f)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,r=new xo(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let s=i.startLineNumber,o=i.startColumn;const a=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],r=n.range;t=t||n.forceMoveMarkers,a.push(this.getValueInRange(new xo(s,o,r.startLineNumber,r.startColumn))),n.text.length>0&&a.push(n.text),s=r.endLineNumber,o=r.endColumn}const l=a.join(""),[c,h,u]=U_(l);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:l,eolCount:c,firstLineLength:h,lastLineLength:u,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(tw._sortOpsDescending);let t=[];for(let i=0;i<e.length;i++){let n=e[i];const r=n.range.startLineNumber,s=n.range.startColumn,o=n.range.endLineNumber,a=n.range.endColumn;if(r===o&&s===a&&0===n.text.length)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const l=new xo(r,s,o,a);t.push({range:l,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}static _getInverseEditRanges(e){let t=[],i=0,n=0,r=null;for(let s=0,o=e.length;s<o;s++){let o,a,l,c=e[s];if(r?r.range.endLineNumber===c.range.startLineNumber?(o=i,a=n+(c.range.startColumn-r.range.endColumn)):(o=i+(c.range.startLineNumber-r.range.endLineNumber),a=c.range.startColumn):(o=c.range.startLineNumber,a=c.range.startColumn),c.text.length>0){const e=c.eolCount+1;l=1===e?new xo(o,a,o,a+c.firstLineLength):new xo(o,a,o+e-1,c.lastLineLength+1)}else l=new xo(o,a,o,a);i=l.endLineNumber,n=l.endColumn,t.push(l),r=c}return t}static _sortOpsAscending(e,t){let i=xo.compareRangesUsingEnds(e.range,t.range);return 0===i?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){let i=xo.compareRangesUsingEnds(e.range,t.range);return 0===i?t.sortIndex-e.sortIndex:-i}}class iw{constructor(e,t,i,n,r,s,o,a,l){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=r,this._containsRTL=s,this._containsUnusualLineTerminators=o,this._isBasicASCII=a,this._normalizeEOL=l}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":i>t/2?"\r\n":"\n"}create(e){const t=this._getEOL(e);let i=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let e=0,n=i.length;e<n;e++){let n=i[e].buffer.replace(/\r\n|\r|\n/g,t),r=F_(n);i[e]=new V_(n,r)}const n=new tw(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}}class nw{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&Kc(e)&&(this.BOM=Gc,e=e.substr(1));const t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=function(e,t){e.length=0,e[0]=0;let i=1,n=0,r=0,s=0,o=!0;for(let a=0,l=t.length;a<l;a++){const c=t.charCodeAt(a);13===c?a+1<l&&10===t.charCodeAt(a+1)?(s++,e[i++]=a+2,a++):(n++,e[i++]=a+1):10===c?(r++,e[i++]=a+1):o&&9!==c&&(c<32||c>126)&&(o=!1)}const a=new B_(R_(e),n,r,s,o);return e.length=0,a}(this._tmpLineStarts,e);this.chunks.push(new V_(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),this.isBasicASCII||this.containsRTL||(this.containsRTL=Bc(e)),this.isBasicASCII||this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Hc(e))}finish(e=!0){return this._finish(),new iw(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=F_(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}}class rw{constructor(){this.changeType=1}}class sw{constructor(e,t){this.changeType=2,this.lineNumber=e,this.detail=t}}class ow{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class aw{constructor(e,t,i){this.changeType=4,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class lw{constructor(){this.changeType=5}}class cw{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++){if(this.changes[t].changeType===e)return!0}return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.versionId,r=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new cw(i,n,r,s)}}class hw{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=cw.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=hw._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new hw(t,i)}static _mergeChangeEvents(e,t){return{changes:[].concat(e.changes).concat(t.changes),eol:t.eol,versionId:t.versionId,isUndoing:e.isUndoing||t.isUndoing,isRedoing:e.isRedoing||t.isRedoing,isFlush:e.isFlush||t.isFlush}}}class uw{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len&&this._valid[e]}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;let i=[],n=[];for(let e=0;e<t;e++)i[e]=null,n[e]=!1;this._beginState=wp(this._beginState,e,i),this._valid=wp(this._valid,e,n),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,i){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const n=this.getBeginState(t+1);if(null===n||!i.equals(n))return this._setBeginState(t+1,i),void this._invalidateLine(t+1);let r=t+1;for(;r<e&&this._isValid(r);)r++;this._invalidLineStartIndex=r}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const i=e.endLineNumber-e.startLineNumber,n=t;for(let t=Math.min(i,n);t>=0;t--)this._invalidateLine(e.startLineNumber+t-1);this._acceptDeleteRange(e),this._acceptInsertText(new Co(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class dw extends as{constructor(e){super(),this._isDisposed=!1,this._textModel=e,this._tokenizationStateStore=new uw,this._tokenizationSupport=null,this._register(Pd.onDidChange((e=>{const t=this._textModel.getLanguageIdentifier();-1!==e.changedLanguages.indexOf(t.language)&&(this._resetTokenizationState(),this._textModel.clearTokens())}))),this._register(this._textModel.onDidChangeRawContentFast((e=>{e.containsEvent(1)&&this._resetTokenizationState()}))),this._register(this._textModel.onDidChangeContentFast((e=>{for(let t=0,i=e.changes.length;t<i;t++){const i=e.changes[t],[n]=U_(i.text);this._tokenizationStateStore.applyEdits(i.range,n)}this._beginBackgroundTokenization()}))),this._register(this._textModel.onDidChangeAttached((()=>{this._beginBackgroundTokenization()}))),this._register(this._textModel.onDidChangeLanguage((()=>{this._resetTokenizationState(),this._textModel.clearTokens()}))),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=function(e){const t=e.getLanguageIdentifier();let i=e.isTooLargeForTokenization()?null:Pd.get(t.language),n=null;if(i)try{n=i.getInitialState()}catch(e){Gr(e),i=null}return[i,n]}(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&nr((()=>{this._isDisposed||this._revalidateTokensNow()}))}_revalidateTokensNow(e=this._textModel.getLineCount()){const t=new $_,i=fs.create(!1);for(;this._hasLinesToTokenize()&&!(i.elapsed()>1);){if(this._tokenizeOneInvalidLine(t)>=e)break}this._beginBackgroundTokenization(),this._textModel.setTokens(t.tokens)}tokenizeViewport(e,t){const i=new $_;this._tokenizeViewport(i,e,t),this._textModel.setTokens(i.tokens)}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new $_;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens)}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return!(e>t)&&(e<t||this._textModel.getLineLength(e)<2048)}_hasLinesToTokenize(){return!!this._tokenizationSupport&&this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount()}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const i=this._textModel.getLanguageIdentifier(),n=this._textModel.getLineCount(),r=t-1;for(let t=this._tokenizationStateStore.invalidLineStartIndex;t<=r;t++){const r=this._textModel.getLineContent(t+1),s=this._tokenizationStateStore.getBeginState(t),o=fw(i,this._tokenizationSupport,r,!0,s);e.add(t+1,o.tokens),this._tokenizationStateStore.setEndState(n,t,o.endState),t=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,i){if(!this._tokenizationSupport)return;if(i<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex)return void this._updateTokensUntilLine(e,i);let n=this._textModel.getLineFirstNonWhitespaceColumn(t),r=[],s=null;for(let e=t-1;n>0&&e>=1;e--){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);if(0!==t&&t<n){if(s=this._tokenizationStateStore.getBeginState(e-1),s)break;r.push(this._textModel.getLineContent(e)),n=t}}s||(s=this._tokenizationSupport.getInitialState());const o=this._textModel.getLanguageIdentifier();let a=s;for(let e=r.length-1;e>=0;e--){a=fw(o,this._tokenizationSupport,r[e],!1,a).endState}for(let n=t;n<=i;n++){let t=this._textModel.getLineContent(n),i=fw(o,this._tokenizationSupport,t,!0,a);e.add(n,i.tokens),this._tokenizationStateStore.setFakeTokens(n-1),a=i.endState}}}function fw(e,t,i,n,r){let s=null;if(t)try{s=t.tokenize2(i,n,r.clone(),0)}catch(e){Gr(e)}return s||(s=Wd(e.id,0,r,0)),jp.convertToEndOffset(s.tokens,i.length),s}function pw(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}class gw{constructor(e,t,i,n=1){this.r=0|Math.min(255,Math.max(0,e)),this.g=0|Math.min(255,Math.max(0,t)),this.b=0|Math.min(255,Math.max(0,i)),this.a=pw(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class mw{constructor(e,t,i,n){this.h=0|Math.max(Math.min(360,e),0),this.s=pw(Math.max(Math.min(1,t),0),3),this.l=pw(Math.max(Math.min(1,i),0),3),this.a=pw(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,r=e.a,s=Math.max(t,i,n),o=Math.min(t,i,n);let a=0,l=0;const c=(o+s)/2,h=s-o;if(h>0){switch(l=Math.min(c<=.5?h/(2*c):h/(2-2*c),1),s){case t:a=(i-n)/h+(i<n?6:0);break;case i:a=(n-t)/h+2;break;case n:a=(t-i)/h+4}a*=60,a=Math.round(a)}return new mw(a,l,c,r)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:n,a:r}=e;let s,o,a;if(0===i)s=o=a=n;else{const e=n<.5?n*(1+i):n+i-n*i,r=2*n-e;s=mw._hue2rgb(r,e,t+1/3),o=mw._hue2rgb(r,e,t),a=mw._hue2rgb(r,e,t-1/3)}return new gw(Math.round(255*s),Math.round(255*o),Math.round(255*a),r)}}class bw{constructor(e,t,i,n){this.h=0|Math.max(Math.min(360,e),0),this.s=pw(Math.max(Math.min(1,t),0),3),this.v=pw(Math.max(Math.min(1,i),0),3),this.a=pw(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(t,i,n),s=r-Math.min(t,i,n),o=0===r?0:s/r;let a;return a=0===s?0:r===t?((i-n)/s%6+6)%6:r===i?(n-t)/s+2:(t-i)/s+4,new bw(Math.round(60*a),o,r,e.a)}static toRGBA(e){const{h:t,s:i,v:n,a:r}=e,s=n*i,o=s*(1-Math.abs(t/60%2-1)),a=n-s;let[l,c,h]=[0,0,0];return t<60?(l=s,c=o):t<120?(l=o,c=s):t<180?(c=s,h=o):t<240?(c=o,h=s):t<300?(l=o,h=s):t<=360&&(l=s,h=o),l=Math.round(255*(l+a)),c=Math.round(255*(c+a)),h=Math.round(255*(h+a)),new gw(l,c,h,r)}}class vw{constructor(e){if(!e)throw new Error("Color needs a value");if(e instanceof gw)this.rgba=e;else if(e instanceof mw)this._hsla=e,this.rgba=mw.toRGBA(e);else{if(!(e instanceof bw))throw new Error("Invalid color ctor argument");this._hsva=e,this.rgba=bw.toRGBA(e)}}static fromHex(e){return vw.Format.CSS.parseHex(e)||vw.red}get hsla(){return this._hsla?this._hsla:mw.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:bw.fromRGBA(this.rgba)}equals(e){return!!e&&gw.equals(this.rgba,e.rgba)&&mw.equals(this.hsla,e.hsla)&&bw.equals(this.hsva,e.hsva)}getRelativeLuminance(){return pw(.2126*vw._relativeLuminanceForComponent(this.rgba.r)+.7152*vw._relativeLuminanceForComponent(this.rgba.g)+.0722*vw._relativeLuminanceForComponent(this.rgba.b),4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128}isLighterThan(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}isDarkerThan(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}lighten(e){return new vw(new mw(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new vw(new mw(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:n,a:r}=this.rgba;return new vw(new gw(t,i,n,r*e))}isTransparent(){return 0===this.rgba.a}isOpaque(){return 1===this.rgba.a}opposite(){return new vw(new gw(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return""+vw.Format.CSS.format(this)}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(r-n)/r,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const n=e.getRelativeLuminance();return i=i*(n-t.getRelativeLuminance())/n,e.darken(i)}}function yw(e){const t=new nw;return t.acceptChunk(e),t.finish()}function _w(e,t){return("string"==typeof e?yw(e):e).create(t)}vw.white=new vw(new gw(255,255,255,1)),vw.black=new vw(new gw(0,0,0,1)),vw.red=new vw(new gw(255,0,0,1)),vw.blue=new vw(new gw(0,0,255,1)),vw.cyan=new vw(new gw(0,255,255,1)),vw.lightgrey=new vw(new gw(211,211,211,1)),vw.transparent=new vw(new gw(0,0,0,0)),function(e){let t;!function(t){let i;!function(t){function i(e){const t=e.toString(16);return 2!==t.length?"0"+t:t}function n(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}t.formatRGB=function(t){return 1===t.rgba.a?`rgb(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b})`:e.Format.CSS.formatRGBA(t)},t.formatRGBA=function(e){return`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${+e.rgba.a.toFixed(2)})`},t.formatHSL=function(t){return 1===t.hsla.a?`hsl(${t.hsla.h}, ${(100*t.hsla.s).toFixed(2)}%, ${(100*t.hsla.l).toFixed(2)}%)`:e.Format.CSS.formatHSLA(t)},t.formatHSLA=function(e){return`hsla(${e.hsla.h}, ${(100*e.hsla.s).toFixed(2)}%, ${(100*e.hsla.l).toFixed(2)}%, ${e.hsla.a.toFixed(2)})`},t.formatHex=function(e){return`#${i(e.rgba.r)}${i(e.rgba.g)}${i(e.rgba.b)}`},t.formatHexA=function(t,n=!1){return n&&1===t.rgba.a?e.Format.CSS.formatHex(t):`#${i(t.rgba.r)}${i(t.rgba.g)}${i(t.rgba.b)}${i(Math.round(255*t.rgba.a))}`},t.format=function(t){return t.isOpaque()?e.Format.CSS.formatHex(t):e.Format.CSS.formatRGBA(t)},t.parseHex=function(t){const i=t.length;if(0===i)return null;if(35!==t.charCodeAt(0))return null;if(7===i){const i=16*n(t.charCodeAt(1))+n(t.charCodeAt(2)),r=16*n(t.charCodeAt(3))+n(t.charCodeAt(4)),s=16*n(t.charCodeAt(5))+n(t.charCodeAt(6));return new e(new gw(i,r,s,1))}if(9===i){const i=16*n(t.charCodeAt(1))+n(t.charCodeAt(2)),r=16*n(t.charCodeAt(3))+n(t.charCodeAt(4)),s=16*n(t.charCodeAt(5))+n(t.charCodeAt(6)),o=16*n(t.charCodeAt(7))+n(t.charCodeAt(8));return new e(new gw(i,r,s,o/255))}if(4===i){const i=n(t.charCodeAt(1)),r=n(t.charCodeAt(2)),s=n(t.charCodeAt(3));return new e(new gw(16*i+i,16*r+r,16*s+s))}if(5===i){const i=n(t.charCodeAt(1)),r=n(t.charCodeAt(2)),s=n(t.charCodeAt(3)),o=n(t.charCodeAt(4));return new e(new gw(16*i+i,16*r+r,16*s+s,(16*o+o)/255))}return null}}(i=t.CSS||(t.CSS={}))}(t=e.Format||(e.Format={}))}(vw||(vw={}));let ww=0;class Sw{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,i=0;for(;;){let n=this._source.read();if(null===n)return this._eos=!0,0===t?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=65536)return e.join("")}}}const Cw=()=>{throw new Error("Invalid change accessor")};class xw{constructor(){this._searchCanceledBrand=void 0}}function kw(e){return e instanceof xw?null:e}xw.INSTANCE=new xw;class Ew extends as{constructor(e,t,i,n=null,r){super(),this._onWillDispose=this._register(new ms),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new Pw),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new ms),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new ms),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new ms),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new ms),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new ms),this.onDidChangeAttached=this._onDidChangeAttached.event,this._eventEmitter=this._register(new Rw),ww++,this.id="$model"+ww,this.isForSimpleWidget=t.isForSimpleWidget,this._associatedResource=null==n?uo.parse("inmemory://model/"+ww):n,this._undoRedoService=r,this._attachedEditorCount=0;const{textBuffer:s,disposable:o}=_w(e,t.defaultEOL);this._buffer=s,this._bufferDisposable=o,this._options=Ew.resolveOptions(this._buffer,t);const a=this._buffer.getLineCount(),l=this._buffer.getValueLengthInRange(new xo(1,1,a,this._buffer.getLineLength(a)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=l>Ew.LARGE_FILE_SIZE_THRESHOLD||a>Ew.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=l>Ew.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageIdentifier=i||Fd,this._languageRegistryListener=Pf.onDidChange((e=>{e.languageIdentifier.id===this._languageIdentifier.id&&this._onDidChangeLanguageConfiguration.fire({})})),this._instanceId=$c(ww),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Tw,this._commandManager=new Wy(this,r),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new ew,this._tokens2=new J_,this._tokenization=new dw(this)}static resolveOptions(e,t){if(t.detectIndentation){const i=Hy(e,t.tabSize,t.insertSpaces);return new pu({tabSize:i.tabSize,indentSize:i.tabSize,insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}return new pu({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}onDidChangeRawContentFast(e){return this._eventEmitter.fastEvent((t=>e(t.rawContentChangedEvent)))}onDidChangeContentFast(e){return this._eventEmitter.fastEvent((t=>e(t.contentChangedEvent)))}onDidChangeContent(e){return this._eventEmitter.slowEvent((t=>e(t.contentChangedEvent)))}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new tw([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._isDisposing||this._eventEmitter.fire(new hw(e,t))}setValue(e){if(this._assertNotDisposed(),null===e)return;const{textBuffer:t,disposable:i}=_w(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,n,r,s,o){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:n}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:r,isRedoing:s,isFlush:o}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),r=this.getLineCount(),s=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new Tw,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new cw([new rw],this._versionId,!1,!1),this._createContentChanged2(new xo(1,1,r,s),0,n,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=1===e?"\r\n":"\n";if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),r=this.getLineCount(),s=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new cw([new lw],this._versionId,!1,!1),this._createContentChanged2(new xo(1,1,r,s),0,n,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.search(0,!1,!1,e);this._ensureNodesHaveRanges(t)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){const n=t[i],r=n.cachedAbsoluteStart-n.start,s=this._buffer.getOffsetAt(n.range.startLineNumber,n.range.startColumn),o=this._buffer.getOffsetAt(n.range.endLineNumber,n.range.endColumn);n.cachedAbsoluteStart=s,n.cachedAbsoluteEnd=o,n.cachedVersionId=e,n.start=s-r,n.end=o-r,h_(n)}}onBeforeAttached(){this._attachedEditorCount++,1===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,0===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let n=1;n<=i;n++){const i=this._buffer.getLineLength(n);i>=1e4?t+=i:e+=i}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=void 0!==e.tabSize?e.tabSize:this._options.tabSize,i=void 0!==e.indentSize?e.indentSize:this._options.indentSize,n=void 0!==e.insertSpaces?e.insertSpaces:this._options.insertSpaces,r=void 0!==e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,s=new pu({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r});if(this._options.equals(s))return;let o=this._options.createChangeEvent(s);this._options=s,this._onDidChangeOptions.fire(o)}detectIndentation(e,t){this._assertNotDisposed();let i=Hy(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}static _normalizeIndentationFromWhitespace(e,t,i){let n=0;for(let i=0;i<e.length;i++)"\t"===e.charAt(i)?n+=t:n++;let r="";if(!i){let e=Math.floor(n/t);n%=t;for(let t=0;t<e;t++)r+="\t"}for(let e=0;e<n;e++)r+=" ";return r}static normalizeIndentation(e,t,i){let n=gc(e);return-1===n&&(n=e.length),Ew._normalizeIndentationFromWhitespace(e.substring(0,n),t,i)+e.substring(n)}normalizeIndentation(e){return this._assertNotDisposed(),Ew.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(zc.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map((e=>({range:e.range,text:null}))),(()=>null))}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(e=!1){return new Sw(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn;let r=Math.floor("number"!=typeof i||isNaN(i)?1:i),s=Math.floor("number"!=typeof n||isNaN(n)?1:n);if(r<1)r=1,s=1;else if(r>t)r=t,s=this.getLineMaxColumn(r);else if(s<=1)s=1;else{const e=this.getLineMaxColumn(r);s>=e&&(s=e)}const o=e.endLineNumber,a=e.endColumn;let l=Math.floor("number"!=typeof o||isNaN(o)?1:o),c=Math.floor("number"!=typeof a||isNaN(a)?1:a);if(l<1)l=1,c=1;else if(l>t)l=t,c=this.getLineMaxColumn(l);else if(c<=1)c=1;else{const e=this.getLineMaxColumn(l);c>=e&&(c=e)}return i===r&&n===s&&o===l&&a===c&&e instanceof xo&&!(e instanceof ko)?e:new xo(r,s,l,c)}_isValidPosition(e,t,i){if("number"!=typeof e||"number"!=typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;if(e>this._buffer.getLineCount())return!1;if(1===t)return!0;if(t>this.getLineMaxColumn(e))return!1;if(1===i){if(Mc(this._buffer.getLineCharCode(e,t-2)))return!1}return!0}_validatePosition(e,t,i){const n=Math.floor("number"!=typeof e||isNaN(e)?1:e),r=Math.floor("number"!=typeof t||isNaN(t)?1:t),s=this._buffer.getLineCount();if(n<1)return new Co(1,1);if(n>s)return new Co(s,this.getLineMaxColumn(s));if(r<=1)return new Co(n,1);const o=this.getLineMaxColumn(n);if(r>=o)return new Co(n,o);if(1===i){if(Mc(this._buffer.getLineCharCode(n,r-2)))return new Co(n,r-1)}return new Co(n,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof Co&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,s=e.endColumn;if(!this._isValidPosition(i,n,0))return!1;if(!this._isValidPosition(r,s,0))return!1;if(1===t){const e=n>1?this._buffer.getLineCharCode(i,n-2):0,t=s>1&&s<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,s-2):0,o=Mc(e),a=Mc(t);return!o&&!a}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof xo&&!(e instanceof ko)&&this._isValidRange(e,1))return e;const t=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),n=t.lineNumber,r=t.column,s=i.lineNumber,o=i.column;{const e=r>1?this._buffer.getLineCharCode(n,r-2):0,t=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,i=Mc(e),a=Mc(t);return i||a?n===s&&r===o?new xo(n,r-1,s,o-1):i&&a?new xo(n,r-1,s,o+1):i?new xo(n,r-1,s,o):new xo(n,r,s,o+1):new xo(n,r,s,o)}}modifyPosition(e,t){this._assertNotDisposed();let i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new xo(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,r,s,o=999){this._assertNotDisposed();let a=null;null!==t&&(Array.isArray(t)||(t=[t]),t.every((e=>xo.isIRange(e)))&&(a=t.map((e=>this.validateRange(e))))),null===a&&(a=[this.getFullModelRange()]),a=a.sort(((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn));const l=[];let c;if(l.push(a.reduce(((e,t)=>xo.areIntersecting(e,t)?e.plusRange(t):(l.push(e),t)))),!i&&e.indexOf("\n")<0){const t=new L_(e,i,n,r).parseSearchRequest();if(!t)return[];c=e=>this.findMatchesLineByLine(e,t,s,o)}else c=t=>D_.findMatches(this,new L_(e,i,n,r),t,s,o);return l.map(c).reduce(((e,t)=>e.concat(t)),[])}findNextMatch(e,t,i,n,r,s){this._assertNotDisposed();const o=this.validatePosition(t);if(!i&&e.indexOf("\n")<0){const t=new L_(e,i,n,r).parseSearchRequest();if(!t)return null;const a=this.getLineCount();let l=new xo(o.lineNumber,o.column,a,this.getLineMaxColumn(a)),c=this.findMatchesLineByLine(l,t,s,1);return D_.findNextMatch(this,new L_(e,i,n,r),o,s),c.length>0?c[0]:(l=new xo(1,1,o.lineNumber,this.getLineMaxColumn(o.lineNumber)),c=this.findMatchesLineByLine(l,t,s,1),c.length>0?c[0]:null)}return D_.findNextMatch(this,new L_(e,i,n,r),o,s)}findPreviousMatch(e,t,i,n,r,s){this._assertNotDisposed();const o=this.validatePosition(t);return D_.findPreviousMatch(this,new L_(e,i,n,r),o,s)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if(("\n"===this.getEOL()?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof mu?e:new mu(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let i=t.map((e=>({range:this.validateRange(e.range),text:e.text}))),n=!0;if(e)for(let t=0,r=e.length;t<r;t++){let r=e[t],s=!1;for(let e=0,t=i.length;e<t;e++){let t=i[e].range,n=t.startLineNumber>r.endLineNumber,o=r.startLineNumber>t.endLineNumber;if(!n&&!o){s=!0;break}}if(!s){n=!1;break}}if(n)for(let e=0,n=this._trimAutoWhitespaceLines.length;e<n;e++){let n=this._trimAutoWhitespaceLines[e],r=this.getLineMaxColumn(n),s=!0;for(let e=0,t=i.length;e<t;e++){let t=i[e].range,o=i[e].text;if(!(n<t.startLineNumber||n>t.endLineNumber)&&!(n===t.startLineNumber&&t.startColumn===r&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(0)||n===t.startLineNumber&&1===t.startColumn&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(o.length-1))){s=!1;break}}if(s){const e=new xo(n,1,n,r);t.push(new mu(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i)}_applyUndo(e,t,i,n){const r=e.map((e=>{const t=this.getPositionAt(e.newPosition),i=this.getPositionAt(e.newEnd);return{range:new xo(t.lineNumber,t.column,i.lineNumber,i.column),text:e.oldText}}));this._applyUndoRedoEdits(r,t,!0,!1,i,n)}_applyRedo(e,t,i,n){const r=e.map((e=>{const t=this.getPositionAt(e.oldPosition),i=this.getPositionAt(e.oldEnd);return{range:new xo(t.lineNumber,t.column,i.lineNumber,i.column),text:e.newText}}));this._applyUndoRedoEdits(r,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,r,s){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(s),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),n=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),s=n.changes;if(this._trimAutoWhitespaceLines=n.trimAutoWhitespaceLineNumbers,0!==s.length){let e=[],t=i;for(let i=0,n=s.length;i<n;i++){const n=s[i],[o,a,l]=U_(n.text);this._tokens.acceptEdit(n.range,o,a),this._tokens2.acceptEdit(n.range,o,a,l,n.text.length>0?n.text.charCodeAt(0):0),this._onDidChangeDecorations.fire(),this._decorationsTree.acceptReplace(n.rangeOffset,n.rangeLength,n.text.length,n.forceMoveMarkers);const c=n.range.startLineNumber,h=n.range.endLineNumber,u=h-c,d=o,f=Math.min(u,d),p=d-u;for(let i=f;i>=0;i--){const n=c+i,s=r-t-p+n;e.push(new sw(n,this.getLineContent(s)))}if(f<u){const t=c+f;e.push(new ow(t+1,h))}if(f<d){const i=c+f,n=d-f,s=r-t-n+i+1;let o=[];for(let e=0;e<n;e++){let t=s+e;o[t-s]=this.getLineContent(t)}e.push(new aw(i+1,c+d,o))}t+=p}this._increaseVersionId(),this._emitContentChangedEvent(new cw(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:s,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===n.reverseEdits?void 0:n.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let i={addDecoration:(t,i)=>this._deltaDecorationsImpl(e,[],[{range:t,options:i}])[0],changeDecoration:(e,t)=>{this._changeDecorationImpl(e,t)},changeDecorationOptions:(e,t)=>{this._changeDecorationOptionsImpl(e,Aw(t))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,i)=>0===t.length&&0===i.length?[]:this._deltaDecorationsImpl(e,t,i)},n=null;try{n=t(i)}catch(e){Gr(e)}return i.addDecoration=Cw,i.changeDecoration=Cw,i.changeDecorationOptions=Cw,i.removeDecoration=Cw,i.deltaDecorations=Cw,n}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:Iw[i]}])[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;const r=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),o=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,o,r),n.setOptions(Iw[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let e=0,i=t.length;e<i;e++){const i=t[e];this._decorationsTree.delete(i),delete this._decorations[i.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];if(!t)return null;const i=this.getVersionId();return t.cachedVersionId!==i&&this._decorationsTree.resolveNode(t,i),null===t.range&&(t.range=this._getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,n=!1){let r=this.getLineCount(),s=Math.min(r,Math.max(1,e)),o=Math.min(r,Math.max(1,t)),a=this.getLineMaxColumn(o);return this._getDecorationsInRange(new xo(s,1,o,a),i,n)}getDecorationsInRange(e,t=0,i=!1){let n=this.validateRange(e);return this._getDecorationsInRange(n,t,i)}getOverviewRulerDecorations(e=0,t=!1){const i=this.getVersionId(),n=this._decorationsTree.search(e,t,!0,i);return this._ensureNodesHaveRanges(n)}getAllDecorations(e=0,t=!1){const i=this.getVersionId(),n=this._decorationsTree.search(e,t,!1,i);return this._ensureNodesHaveRanges(n)}_getDecorationsInRange(e,t,i){const n=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn),s=this.getVersionId(),o=this._decorationsTree.intervalSearch(n,r,t,i,s);return this._ensureNodesHaveRanges(o)}_ensureNodesHaveRanges(e){for(let t=0,i=e.length;t<i;t++){const i=e[t];null===i.range&&(i.range=this._getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd))}return e}_getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;const n=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),s=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,s,n),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const n=!(!i.options.overviewRuler||!i.options.overviewRuler.color),r=!(!t.overviewRuler||!t.overviewRuler.color);this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n!==r?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i){const n=this.getVersionId(),r=t.length;let s=0;const o=i.length;let a=0,l=new Array(o);for(;s<r||a<o;){let c=null;if(s<r){do{c=this._decorations[t[s++]]}while(!c&&s<r);c&&(this._decorationsTree.delete(c),this._onDidChangeDecorations.checkAffectedAndFire(c.options))}if(a<o){if(!c){const e=++this._lastDecorationId,t=`${this._instanceId};${e}`;c=new Jy(t,0,0),this._decorations[t]=c}const t=i[a],r=this._validateRangeRelaxedNoAllocations(t.range),s=Aw(t.options),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),h=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);c.ownerId=e,c.reset(n,o,h,r),c.setOptions(s),this._onDidChangeDecorations.checkAffectedAndFire(s),this._decorationsTree.insert(c),l[a]=c.id,a++}else c&&delete this._decorations[c.id]}return l}setTokens(e){if(0===e.length)return;let t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];let r=0,s=0,o=!1;for(let e=0,t=n.tokens.length;e<t;e++){const t=n.startLineNumber+e;if(o)this._tokens.setTokens(this._languageIdentifier.id,t-1,this._buffer.getLineLength(t),n.tokens[e],!1),s=t;else{this._tokens.setTokens(this._languageIdentifier.id,t-1,this._buffer.getLineLength(t),n.tokens[e],!0)&&(o=!0,r=t,s=t)}}o&&t.push({fromLineNumber:r,toLineNumber:s})}t.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:t})}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),i=this._tokens.getTokens(this._languageIdentifier.id,e-1,t);return this._tokens2.addSemanticTokens(e,i)}getLanguageIdentifier(){return this._languageIdentifier}getModeId(){return this._languageIdentifier.language}setMode(e){if(this._languageIdentifier.id===e.id)return;let t={oldLanguage:this._languageIdentifier.language,newLanguage:e.language};this._languageIdentifier=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const i=this.validatePosition(new Co(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),i=this.getLineContent(t.lineNumber),n=this._getLineTokens(t.lineNumber),r=n.findTokenIndexAtOffset(t.column-1),[s,o]=Ew._findLanguageBoundaries(n,r),a=dr(t.column,Pf.getWordDefinition(n.getLanguageId(r)),i.substring(s,o),s);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a;if(r>0&&s===t.column-1){const[s,o]=Ew._findLanguageBoundaries(n,r-1),a=dr(t.column,Pf.getWordDefinition(n.getLanguageId(r-1)),i.substring(s,o),s);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a}return null}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let n=0;for(let r=t;r>=0&&e.getLanguageId(r)===i;r--)n=e.getStartOffset(r);let r=e.getLineContent().length;for(let n=t,s=e.getCount();n<s&&e.getLanguageId(n)===i;n++)r=e.getEndOffset(n);return[n,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let i=e.toLowerCase(),n=this.validatePosition(t),r=this._getLineTokens(n.lineNumber),s=r.getLanguageId(r.findTokenIndexAtOffset(n.column-1)),o=Pf.getBracketsSupport(s);if(!o)return null;let a=o.textIsBracket[i];return a?kw(this._findMatchingBracketUp(a,n,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,i,n){const r=t.getCount(),s=t.getLanguageId(n);let o=Math.max(0,e.column-1-i.maxBracketLength);for(let e=n-1;e>=0;e--){const i=t.getEndOffset(e);if(i<=o)break;if(sf(t.getStandardTokenType(e))||t.getLanguageId(e)!==s){o=i;break}}let a=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let e=n+1;e<r;e++){const i=t.getStartOffset(e);if(i>=a)break;if(sf(t.getStandardTokenType(e))||t.getLanguageId(e)!==s){a=i;break}}return{searchStartOffset:o,searchEndOffset:a}}_matchBracket(e){const t=e.lineNumber,i=this._getLineTokens(t),n=this._buffer.getLineContent(t),r=i.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const s=Pf.getBracketsSupport(i.getLanguageId(r));if(s&&!sf(i.getStandardTokenType(r))){let{searchStartOffset:o,searchEndOffset:a}=this._establishBracketSearchOffsets(e,i,s,r),l=null;for(;;){const i=Ef.findNextBracketInRange(s.forwardRegex,t,n,o,a);if(!i)break;if(i.startColumn<=e.column&&e.column<=i.endColumn){const e=n.substring(i.startColumn-1,i.endColumn-1).toLowerCase(),t=this._matchFoundBracket(i,s.textIsBracket[e],s.textIsOpenBracket[e],null);if(t){if(t instanceof xw)return null;l=t}}o=i.endColumn-1}if(l)return l}if(r>0&&i.getStartOffset(r)===e.column-1){const s=r-1,o=Pf.getBracketsSupport(i.getLanguageId(s));if(o&&!sf(i.getStandardTokenType(s))){let{searchStartOffset:r,searchEndOffset:a}=this._establishBracketSearchOffsets(e,i,o,s);const l=Ef.findPrevBracketInRange(o.reversedRegex,t,n,r,a);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn){const e=n.substring(l.startColumn-1,l.endColumn-1).toLowerCase(),t=this._matchFoundBracket(l,o.textIsBracket[e],o.textIsOpenBracket[e],null);if(t)return t instanceof xw?null:t}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;const r=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return r?r instanceof xw?r:[e,r]:null}_findMatchingBracketUp(e,t,i){const n=e.languageIdentifier.id,r=e.reversedRegex;let s=-1,o=0;const a=(t,n,a,l)=>{for(;;){if(i&&++o%100==0&&!i())return xw.INSTANCE;const c=Ef.findPrevBracketInRange(r,t,n,a,l);if(!c)break;const h=n.substring(c.startColumn-1,c.endColumn-1).toLowerCase();if(e.isOpen(h)?s++:e.isClose(h)&&s--,0===s)return c;l=c.startColumn-1}return null};for(let e=t.lineNumber;e>=1;e--){const i=this._getLineTokens(e),r=i.getCount(),s=this._buffer.getLineContent(e);let o=r-1,l=s.length,c=s.length;e===t.lineNumber&&(o=i.findTokenIndexAtOffset(t.column-1),l=t.column-1,c=t.column-1);let h=!0;for(;o>=0;o--){const t=i.getLanguageId(o)===n&&!sf(i.getStandardTokenType(o));if(t)h?l=i.getStartOffset(o):(l=i.getStartOffset(o),c=i.getEndOffset(o));else if(h&&l!==c){const t=a(e,s,l,c);if(t)return t}h=t}if(h&&l!==c){const t=a(e,s,l,c);if(t)return t}}return null}_findMatchingBracketDown(e,t,i){const n=e.languageIdentifier.id,r=e.forwardRegex;let s=1,o=0;const a=(t,n,a,l)=>{for(;;){if(i&&++o%100==0&&!i())return xw.INSTANCE;const c=Ef.findNextBracketInRange(r,t,n,a,l);if(!c)break;const h=n.substring(c.startColumn-1,c.endColumn-1).toLowerCase();if(e.isOpen(h)?s++:e.isClose(h)&&s--,0===s)return c;a=c.endColumn-1}return null},l=this.getLineCount();for(let e=t.lineNumber;e<=l;e++){const i=this._getLineTokens(e),r=i.getCount(),s=this._buffer.getLineContent(e);let o=0,l=0,c=0;e===t.lineNumber&&(o=i.findTokenIndexAtOffset(t.column-1),l=t.column-1,c=t.column-1);let h=!0;for(;o<r;o++){const t=i.getLanguageId(o)===n&&!sf(i.getStandardTokenType(o));if(t)h||(l=i.getStartOffset(o)),c=i.getEndOffset(o);else if(h&&l!==c){const t=a(e,s,l,c);if(t)return t}h=t}if(h&&l!==c){const t=a(e,s,l,c);if(t)return t}}return null}findPrevBracket(e){const t=this.validatePosition(e);let i=-1,n=null;for(let e=t.lineNumber;e>=1;e--){const r=this._getLineTokens(e),s=r.getCount(),o=this._buffer.getLineContent(e);let a=s-1,l=o.length,c=o.length;if(e===t.lineNumber){a=r.findTokenIndexAtOffset(t.column-1),l=t.column-1,c=t.column-1;const e=r.getLanguageId(a);i!==e&&(i=e,n=Pf.getBracketsSupport(i))}let h=!0;for(;a>=0;a--){const t=r.getLanguageId(a);if(i!==t){if(n&&h&&l!==c){const t=Ef.findPrevBracketInRange(n.reversedRegex,e,o,l,c);if(t)return this._toFoundBracket(n,t);h=!1}i=t,n=Pf.getBracketsSupport(i)}const s=!!n&&!sf(r.getStandardTokenType(a));if(s)h?l=r.getStartOffset(a):(l=r.getStartOffset(a),c=r.getEndOffset(a));else if(n&&h&&l!==c){const t=Ef.findPrevBracketInRange(n.reversedRegex,e,o,l,c);if(t)return this._toFoundBracket(n,t)}h=s}if(n&&h&&l!==c){const t=Ef.findPrevBracketInRange(n.reversedRegex,e,o,l,c);if(t)return this._toFoundBracket(n,t)}}return null}findNextBracket(e){const t=this.validatePosition(e),i=this.getLineCount();let n=-1,r=null;for(let e=t.lineNumber;e<=i;e++){const i=this._getLineTokens(e),s=i.getCount(),o=this._buffer.getLineContent(e);let a=0,l=0,c=0;if(e===t.lineNumber){a=i.findTokenIndexAtOffset(t.column-1),l=t.column-1,c=t.column-1;const e=i.getLanguageId(a);n!==e&&(n=e,r=Pf.getBracketsSupport(n))}let h=!0;for(;a<s;a++){const t=i.getLanguageId(a);if(n!==t){if(r&&h&&l!==c){const t=Ef.findNextBracketInRange(r.forwardRegex,e,o,l,c);if(t)return this._toFoundBracket(r,t);h=!1}n=t,r=Pf.getBracketsSupport(n)}const s=!!r&&!sf(i.getStandardTokenType(a));if(s)h||(l=i.getStartOffset(a)),c=i.getEndOffset(a);else if(r&&h&&l!==c){const t=Ef.findNextBracketInRange(r.forwardRegex,e,o,l,c);if(t)return this._toFoundBracket(r,t)}h=s}if(r&&h&&l!==c){const t=Ef.findNextBracketInRange(r.forwardRegex,e,o,l,c);if(t)return this._toFoundBracket(r,t)}}return null}findEnclosingBrackets(e,t){let i;if(void 0===t)i=null;else{const e=Date.now();i=()=>Date.now()-e<=t}const n=this.validatePosition(e),r=this.getLineCount(),s=new Map;let o=[];const a=(e,t)=>{if(!s.has(e)){let i=[];for(let e=0,n=t?t.brackets.length:0;e<n;e++)i[e]=0;s.set(e,i)}o=s.get(e)};let l=0;const c=(e,t,n,r,s)=>{for(;;){if(i&&++l%100==0&&!i())return xw.INSTANCE;const a=Ef.findNextBracketInRange(e.forwardRegex,t,n,r,s);if(!a)break;const c=n.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),h=e.textIsBracket[c];if(h&&(h.isOpen(c)?o[h.index]++:h.isClose(c)&&o[h.index]--,-1===o[h.index]))return this._matchFoundBracket(a,h,!1,i);r=a.endColumn-1}return null};let h=-1,u=null;for(let e=n.lineNumber;e<=r;e++){const t=this._getLineTokens(e),i=t.getCount(),r=this._buffer.getLineContent(e);let s=0,o=0,l=0;if(e===n.lineNumber){s=t.findTokenIndexAtOffset(n.column-1),o=n.column-1,l=n.column-1;const e=t.getLanguageId(s);h!==e&&(h=e,u=Pf.getBracketsSupport(h),a(h,u))}let d=!0;for(;s<i;s++){const i=t.getLanguageId(s);if(h!==i){if(u&&d&&o!==l){const t=c(u,e,r,o,l);if(t)return kw(t);d=!1}h=i,u=Pf.getBracketsSupport(h),a(h,u)}const n=!!u&&!sf(t.getStandardTokenType(s));if(n)d||(o=t.getStartOffset(s)),l=t.getEndOffset(s);else if(u&&d&&o!==l){const t=c(u,e,r,o,l);if(t)return kw(t)}d=n}if(u&&d&&o!==l){const t=c(u,e,r,o,l);if(t)return kw(t)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.getValueInRange(t);i=i.toLowerCase();let n=e.textIsBracket[i];return n?{range:t,open:n.open,close:n.close,isOpen:e.textIsOpenBracket[i]}:null}static computeIndentLevel(e,t){let i=0,n=0,r=e.length;for(;n<r;){let r=e.charCodeAt(n);if(32===r)i++;else{if(9!==r)break;i=i-i%t+t}n++}return n===r?-1:i}_computeIndentLevel(e){return Ew.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,i){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for lineNumber");const r=Pf.getFoldingRules(this._languageIdentifier.id),s=Boolean(r&&r.offSide);let o=-2,a=-1,l=-2,c=-1;const h=e=>{if(-1!==o&&(-2===o||o>e-1)){o=-1,a=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){o=t,a=e;break}}}if(-2===l){l=-1,c=-1;for(let t=e;t<n;t++){let e=this._computeIndentLevel(t);if(e>=0){l=t,c=e;break}}}};let u=-2,d=-1,f=-2,p=-1;const g=e=>{if(-2===u){u=-1,d=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){u=t,d=e;break}}}if(-1!==f&&(-2===f||f<e-1)){f=-1,p=-1;for(let t=e;t<n;t++){let e=this._computeIndentLevel(t);if(e>=0){f=t,p=e;break}}}};let m=0,b=!0,v=0,y=!0,_=0,w=0;for(let r=0;b||y;r++){const o=e-r,f=e+r;r>1&&(o<1||o<t)&&(b=!1),r>1&&(f>n||f>i)&&(y=!1),r>5e4&&(b=!1,y=!1);let S=-1;if(b){const e=this._computeIndentLevel(o-1);e>=0?(l=o-1,c=e,S=Math.ceil(e/this._options.indentSize)):(h(o),S=this._getIndentLevelForWhitespaceLine(s,a,c))}let C=-1;if(y){const e=this._computeIndentLevel(f-1);e>=0?(u=f-1,d=e,C=Math.ceil(e/this._options.indentSize)):(g(f),C=this._getIndentLevelForWhitespaceLine(s,d,p))}if(0!==r){if(1===r){if(f<=n&&C>=0&&w+1===C){b=!1,m=f,v=f,_=C;continue}if(o>=1&&S>=0&&S-1===w){y=!1,m=o,v=o,_=S;continue}if(m=e,v=e,_=w,0===_)return{startLineNumber:m,endLineNumber:v,indent:_}}b&&(S>=_?m=o:b=!1),y&&(C>=_?v=f:y=!1)}else w=S}return{startLineNumber:m,endLineNumber:v,indent:_}}getLinesIndentGuides(e,t){this._assertNotDisposed();const i=this.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const n=Pf.getFoldingRules(this._languageIdentifier.id),r=Boolean(n&&n.offSide);let s=new Array(t-e+1),o=-2,a=-1,l=-2,c=-1;for(let n=e;n<=t;n++){let t=n-e;const h=this._computeIndentLevel(n-1);if(h>=0)o=n-1,a=h,s[t]=Math.ceil(h/this._options.indentSize);else{if(-2===o){o=-1,a=-1;for(let e=n-2;e>=0;e--){let t=this._computeIndentLevel(e);if(t>=0){o=e,a=t;break}}}if(-1!==l&&(-2===l||l<n-1)){l=-1,c=-1;for(let e=n;e<i;e++){let t=this._computeIndentLevel(e);if(t>=0){l=e,c=t;break}}}s[t]=this._getIndentLevelForWhitespaceLine(r,a,c)}}return s}_getIndentLevelForWhitespaceLine(e,t,i){return-1===t||-1===i?0:t<i?1+Math.floor(t/this._options.indentSize):t===i||e?Math.ceil(i/this._options.indentSize):1+Math.floor(i/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return function(e){let t=0;for(const i of e){if(" "!==i&&"\t"!==i)break;t++}return t}(this.getLineContent(e))+1}}Ew.MODEL_SYNC_LIMIT=52428800,Ew.LARGE_FILE_SIZE_THRESHOLD=20971520,Ew.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,Ew.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Pr,indentSize:Rr,insertSpaces:Br,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Wr,largeFileOptimizations:Vr};class Tw{constructor(){this._decorationsTree0=new t_,this._decorationsTree1=new t_}intervalSearch(e,t,i,n,r){const s=this._decorationsTree0.intervalSearch(e,t,i,n,r),o=this._decorationsTree1.intervalSearch(e,t,i,n,r);return s.concat(o)}search(e,t,i,n){if(i)return this._decorationsTree1.search(e,t,n);{const i=this._decorationsTree0.search(e,t,n),r=this._decorationsTree1.search(e,t,n);return i.concat(r)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e);return t.concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder();return e.concat(t)}insert(e){Zy(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){Zy(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}resolveNode(e,t){Zy(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n)}}function Lw(e){return e.replace(/[^a-z0-9\-_]/gi," ")}class Nw{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class Mw extends Nw{constructor(e){super(e),this._resolvedColor=null,this.position="number"==typeof e.position?e.position:du.Center}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if("string"==typeof e)return e;let i=e?t.getColor(e.id):null;return i?i.toString():""}}class Ow extends Nw{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return"string"==typeof e?vw.fromHex(e):t.getColor(e.id)}}class Dw{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Lw(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new Mw(e.overviewRuler):null,this.minimap=e.minimap?new Ow(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?Lw(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Lw(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Lw(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Lw(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Lw(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Lw(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Lw(e.afterContentClassName):null}static register(e){return new Dw(e)}static createDynamic(e){return new Dw(e)}}Dw.EMPTY=Dw.register({description:"empty"});const Iw=[Dw.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Dw.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Dw.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Dw.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function Aw(e){return e instanceof Dw?e:Dw.createDynamic(e)}class Pw extends as{constructor(){super(),this._actual=this._register(new ms),this.event=this._actual.event,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){if(this._deferredCnt--,0===this._deferredCnt&&this._shouldFire){const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(e)}}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!(!e.minimap||!e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!(!e.overviewRuler||!e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class Rw extends as{constructor(){super(),this._fastEmitter=this._register(new ms),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new ms),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}const Bw=()=>!0,Fw=()=>!1,Ww=e=>" "===e||"\t"===e;class Vw{constructor(e,t,i){this._languageIdentifier=e;const n=i.options,r=n.get(128);this.readOnly=n.get(78),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=n.get(102),this.lineHeight=n.get(56),this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=n.get(113),this.wordSeparators=n.get(114),this.emptySelectionClipboard=n.get(30),this.copyWithSyntaxHighlighting=n.get(19),this.multiCursorMergeOverlapping=n.get(66),this.multiCursorPaste=n.get(68),this.autoClosingBrackets=n.get(5),this.autoClosingQuotes=n.get(8),this.autoClosingDelete=n.get(6),this.autoClosingOvertype=n.get(7),this.autoSurround=n.get(11),this.autoIndent=n.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:Vw._getShouldAutoClose(e,this.autoClosingQuotes),bracket:Vw._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=Pf.getAutoClosingPairs(e.id);let s=Vw._getSurroundingPairs(e);if(s)for(const e of s)this.surroundingPairs[e.open]=e.close}static shouldRecreate(e){return e.hasChanged(128)||e.hasChanged(114)||e.hasChanged(30)||e.hasChanged(66)||e.hasChanged(68)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(113)||e.hasChanged(56)||e.hasChanged(78)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=Vw._getElectricCharacters(this._languageIdentifier);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return Ew.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return Pf.getElectricCharacters(e.id)}catch(e){return Gr(e),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return Ww;case"languageDefined":return Vw._getLanguageDefinedShouldAutoClose(e);case"always":return Bw;case"never":return Fw}}static _getLanguageDefinedShouldAutoClose(e){try{const t=Pf.getAutoCloseBeforeSet(e.id);return e=>-1!==t.indexOf(e)}catch(e){return Gr(e),Fw}}static _getSurroundingPairs(e){try{return Pf.getSurroundingPairs(e.id)}catch(e){return Gr(e),null}}}class zw{constructor(e,t,i,n){this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=i,this.leftoverVisibleColumns=n,this.selection=zw._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,n){return e?new zw(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new Co(t,i),n):new zw(new xo(t,i,t,i),n,new Co(t,i),n)}static _computeSelection(e,t){let i,n,r,s;return e.isEmpty()?(i=e.startLineNumber,n=e.startColumn,r=t.lineNumber,s=t.column):t.isBeforeOrEqual(e.getStartPosition())?(i=e.endLineNumber,n=e.endColumn,r=t.lineNumber,s=t.column):(i=e.startLineNumber,n=e.startColumn,r=t.lineNumber,s=t.column),new ko(i,n,r,s)}}class Hw{constructor(e,t,i){this.model=e,this.coordinatesConverter=t,this.cursorConfig=i}}class jw{constructor(e){this.modelState=e,this.viewState=null}}class Uw{constructor(e){this.modelState=null,this.viewState=e}}class Gw{constructor(e,t){this.modelState=e,this.viewState=t}static fromModelState(e){return new jw(e)}static fromViewState(e){return new Uw(e)}static fromModelSelection(e){const t=e.selectionStartLineNumber,i=e.selectionStartColumn,n=e.positionLineNumber,r=e.positionColumn,s=new zw(new xo(t,i,t,i),0,new Co(n,r),0);return Gw.fromModelState(s)}static fromModelSelections(e){let t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class Kw{constructor(e,t,i){this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}class $w{static visibleColumnFromColumn(e,t,i){const n=e.length,r=t-1<n?t-1:n;let s=0,o=0;for(;o<r;){const t=Ic(e,r,o);if(o+=t>=65536?2:1,9===t)s=$w.nextRenderTabStop(s,i);else{let i=qc(t);for(;o<r;){const t=Ic(e,r,o),n=qc(t);if(Zc(i,n))break;o+=t>=65536?2:1,i=n}jc(t)||Uc(t)?s+=2:s+=1}}return s}static visibleColumnsByColumns(e,t){const i=e.length;let n=new Array;n.push(-1);let r=0,s=0;for(;s<i;){const o=Ic(e,i,s);if(s+=o>=65536?2:1,n.push(r),o>=65536&&n.push(r),9===o)r=$w.nextRenderTabStop(r,t);else{let t=qc(o);for(;s<i;){const a=Ic(e,i,s),l=qc(a);if(Zc(t,l))break;s+=a>=65536?2:1,n.push(r),o>=65536&&n.push(r),t=l}jc(o)||Uc(o)?r+=2:r+=1}}return n.push(r),n}static visibleColumnFromColumn2(e,t,i){return this.visibleColumnFromColumn(t.getLineContent(i.lineNumber),i.column,e.tabSize)}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const n=e.length;let r=0,s=1,o=0;for(;o<n;){const a=Ic(e,n,o);let l;if(o+=a>=65536?2:1,9===a)l=$w.nextRenderTabStop(r,i);else{let t=qc(a);for(;o<n;){const i=Ic(e,n,o),r=qc(i);if(Zc(t,r))break;o+=i>=65536?2:1,t=r}l=jc(a)||Uc(a)?r+2:r+1}const c=o+1;if(l>=t){return l-t<t-r?c:s}r=l,s=c}return n+1}static columnFromVisibleColumn2(e,t,i,n){let r=this.columnFromVisibleColumn(t.getLineContent(i),n,e.tabSize),s=t.getLineMinColumn(i);if(r<s)return s;let o=t.getLineMaxColumn(i);return r>o?o:r}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function qw(e){return"'"===e||'"'===e||"`"===e}class Zw{static whitespaceVisibleColumn(e,t,i){const n=e.length;let r=0,s=-1,o=-1;for(let a=0;a<n;a++){if(a===t)return[s,o,r];r%i==0&&(s=a,o=r);switch(e.charCodeAt(a)){case 32:r+=1;break;case 9:r=$w.nextRenderTabStop(r,i);break;default:return[-1,-1,-1]}}return t===n?[s,o,r]:[-1,-1,-1]}static atomicPosition(e,t,i,n){const r=e.length,[s,o,a]=Zw.whitespaceVisibleColumn(e,t,i);if(-1===a)return-1;let l;switch(n){case 0:l=!0;break;case 1:l=!1;break;case 2:if(a%i==0)return t;l=a%i<=i/2}if(l){if(-1===s)return-1;let t=o;for(let n=s;n<r;++n){if(t===o+i)return s;switch(e.charCodeAt(n)){case 32:t+=1;break;case 9:t=$w.nextRenderTabStop(t,i);break;default:return-1}}return t===o+i?s:-1}const c=$w.nextRenderTabStop(a,i);let h=a;for(let n=t;n<r;n++){if(h===c)return n;switch(e.charCodeAt(n)){case 32:h+=1;break;case 9:h=$w.nextRenderTabStop(h,i);break;default:return-1}}return h===c?r:-1}}class Yw{constructor(e=null){this.hitTarget=e,this.type=0}}class Xw{constructor(e,t){this.position=e,this.spanNode=t,this.type=1}}var Qw;!function(e){e.createFromDOMInfo=function(e,t,i){const n=e.getPositionFromDOMInfo(t,i);return n?new Xw(n,t):new Yw(t)}}(Qw||(Qw={}));class Jw{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class eS{constructor(e,t,i=0,n=null,r=null,s=null){this.element=e,this.type=t,this.mouseColumn=i,this.position=n,!r&&n&&(r=new xo(n.lineNumber,n.column,n.lineNumber,n.column)),this.range=r,this.detail=s}static _typeToString(e){return 1===e?"TEXTAREA":2===e?"GUTTER_GLYPH_MARGIN":3===e?"GUTTER_LINE_NUMBERS":4===e?"GUTTER_LINE_DECORATIONS":5===e?"GUTTER_VIEW_ZONE":6===e?"CONTENT_TEXT":7===e?"CONTENT_EMPTY":8===e?"CONTENT_VIEW_ZONE":9===e?"CONTENT_WIDGET":10===e?"OVERVIEW_RULER":11===e?"SCROLLBAR":12===e?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return eS.toString(this)}}class tS{static isTextArea(e){return 2===e.length&&3===e[0]&&6===e[1]}static isChildOfViewLines(e){return e.length>=4&&3===e[0]&&7===e[3]}static isStrictChildOfViewLines(e){return e.length>4&&3===e[0]&&7===e[3]}static isChildOfScrollableElement(e){return e.length>=2&&3===e[0]&&5===e[1]}static isChildOfMinimap(e){return e.length>=2&&3===e[0]&&8===e[1]}static isChildOfContentWidgets(e){return e.length>=4&&3===e[0]&&1===e[3]}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&2===e[0]}static isChildOfOverlayWidgets(e){return e.length>=2&&3===e[0]&&4===e[1]}}class iS{constructor(e,t,i){this.model=e.model;const n=e.configuration.options;this.layoutInfo=n.get(128),this.viewDomNode=t.viewDomNode,this.lineHeight=n.get(56),this.stickyTabStops=n.get(102),this.typicalHalfwidthCharacterWidth=n.get(40).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return iS.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const n=i.verticalOffset+i.height/2,r=e.model.getLineCount();let s,o=null,a=null;return i.afterLineNumber!==r&&(a=new Co(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(o=new Co(i.afterLineNumber,e.model.getLineMaxColumn(i.afterLineNumber))),s=null===a?o:null===o?a:t<n?o:a,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:o,positionAfter:a,position:s}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const e=this._context.model.getLineCount(),t=this._context.model.getLineMaxColumn(e);return{range:new xo(e,t,e,t),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.model.getLineMaxColumn(t);return{range:new xo(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return iS._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class nS extends class{constructor(e,t,i){this.editorPos=t,this.pos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+i.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+i.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=i.x-t.x<e.layoutInfo.contentLeft&&i.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,oS._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}{constructor(e,t,i,n){super(e,t,i),this._ctx=e,n?(this.target=n,this.targetPath=dy.collect(n,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}\n\ttarget: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,i=null,n=null){let r=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(r=$w.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new eS(this.target,e,r,t,i,n)}withTarget(e){return new nS(this._ctx,this.editorPos,this.pos,e)}}const rS={isAfterLines:!0};function sS(e){return{isAfterLines:!1,horizontalDistanceToText:e}}class oS{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=dy.collect(t,this._viewHelper.viewDomNode);return!(!tS.isChildOfContentWidgets(i)&&!tS.isChildOfOverflowingContentWidgets(i))||!!tS.isChildOfOverlayWidgets(i)}createMouseTarget(e,t,i,n){const r=new iS(this._context,this._viewHelper,e),s=new nS(r,t,i,n);try{return oS._createMouseTarget(r,s,!1)}catch(e){return s.fulfill(0)}}static _createMouseTarget(e,t,i){if(null===t.target){if(i)return t.fulfill(0);const n=oS._doHitTest(e,t);return 1===n.type?oS.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position):this._createMouseTarget(e,t.withTarget(n.hitTarget),!0)}const n=t;let r=null;return r=r||oS._hitTestContentWidget(e,n),r=r||oS._hitTestOverlayWidget(e,n),r=r||oS._hitTestMinimap(e,n),r=r||oS._hitTestScrollbarSlider(e,n),r=r||oS._hitTestViewZone(e,n),r=r||oS._hitTestMargin(e,n),r=r||oS._hitTestViewCursor(e,n),r=r||oS._hitTestTextArea(e,n),r=r||oS._hitTestViewLines(e,n,i),r=r||oS._hitTestScrollbar(e,n),r||t.fulfill(0)}static _hitTestContentWidget(e,t){if(tS.isChildOfContentWidgets(t.targetPath)||tS.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfill(9,null,null,i):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(tS.isChildOfOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfill(12,null,null,i):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const e of i)if(t.target===e.domNode)return t.fulfill(6,e.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,n=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const s of i){if(n<s.contentLeft)continue;if(n>s.contentLeft+s.width)continue;const i=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(i<=r&&r<=i+s.height)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const e=t.isInContentArea?8:5;return t.fulfill(e,i.position,null,i)}return null}static _hitTestTextArea(e,t){return tS.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),n=i.range.getStartPosition();let r=Math.abs(t.pos.x-t.editorPos.x);const s={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};return r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,n,i.range,s):(r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,n,i.range,s):(r-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,n,i.range,s)))}return null}static _hitTestViewLines(e,t,i){if(!tS.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new Co(1,1),null,rS);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return t.fulfill(7,new Co(i,n),null,rS)}if(i){if(tS.isStrictChildOfViewLines(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(0===e.model.getLineLength(i)){const n=e.getLineWidth(i),r=sS(t.mouseContentHorizontalOffset-n);return t.fulfill(7,new Co(i,1),null,r)}const n=e.getLineWidth(i);if(t.mouseContentHorizontalOffset>=n){const r=sS(t.mouseContentHorizontalOffset-n),s=new Co(i,e.model.getLineMaxColumn(i));return t.fulfill(7,s,null,r)}}return t.fulfill(0)}const n=oS._doHitTest(e,t);return 1===n.type?oS.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position):this._createMouseTarget(e,t.withTarget(n.hitTarget),!0)}static _hitTestMinimap(e,t){if(tS.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.model.getLineMaxColumn(i);return t.fulfill(11,new Co(i,n))}return null}static _hitTestScrollbarSlider(e,t){if(tS.isChildOfScrollableElement(t.targetPath)&&t.target&&1===t.target.nodeType){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.model.getLineMaxColumn(i);return t.fulfill(11,new Co(i,n))}}return null}static _hitTestScrollbar(e,t){if(tS.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.model.getLineMaxColumn(i);return t.fulfill(11,new Co(i,n))}return null}getMouseColumn(e,t){const i=this._context.configuration.options,n=i.get(128),r=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-n.contentLeft;return oS._getMouseColumn(r,i.get(40).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){if(e<0)return 1;return Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,n){const r=n.lineNumber,s=n.column,o=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>o){const e=sS(t.mouseContentHorizontalOffset-o);return t.fulfill(7,n,null,e)}const a=e.visibleRangeForPosition(r,s);if(!a)return t.fulfill(0,n);const l=a.left;if(t.mouseContentHorizontalOffset===l)return t.fulfill(6,n,null,{mightBeForeignElement:!1});const c=[];if(c.push({offset:a.left,column:s}),s>1){const t=e.visibleRangeForPosition(r,s-1);t&&c.push({offset:t.left,column:s-1})}if(s<e.model.getLineMaxColumn(r)){const t=e.visibleRangeForPosition(r,s+1);t&&c.push({offset:t.left,column:s+1})}c.sort(((e,t)=>e.offset-t.offset));const h=t.pos.toClientCoordinates(),u=i.getBoundingClientRect(),d=u.left<=h.clientX&&h.clientX<=u.right;for(let e=1;e<c.length;e++){const i=c[e-1],s=c[e];if(i.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=s.offset){const e=new xo(r,i.column,r,s.column);return t.fulfill(6,n,e,{mightBeForeignElement:!d})}}return t.fulfill(6,n,null,{mightBeForeignElement:!d})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.getVerticalOffsetForLineNumber(i)+Math.floor(e.lineHeight/2);let r=t.pos.y+(n-t.mouseVerticalOffset);r<=t.editorPos.y&&(r=t.editorPos.y+1),r>=t.editorPos.y+e.layoutInfo.height&&(r=t.editorPos.y+e.layoutInfo.height-1);const s=new iy(t.pos.x,r),o=this._actualDoHitTestWithCaretRangeFromPoint(e,s.toClientCoordinates());return 1===o.type?o:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=Pl(e.viewDomNode);let n;if(n=i?void 0===i.caretRangeFromPoint?function(e,t,i){const n=document.createRange();let r=e.elementFromPoint(t,i);if(null!==r){for(;r&&r.firstChild&&r.firstChild.nodeType!==r.firstChild.TEXT_NODE&&r.lastChild&&r.lastChild.firstChild;)r=r.lastChild;const e=r.getBoundingClientRect(),i=window.getComputedStyle(r,null).getPropertyValue("font"),s=r.innerText;let o,a=e.left,l=0;if(t>e.left+e.width)l=s.length;else{const e=aS.getInstance();for(let n=0;n<s.length+1;n++){if(o=e.getCharWidth(s.charAt(n),i)/2,a+=o,t<a){l=n;break}a+=o}}n.setStart(r.firstChild,l),n.setEnd(r.firstChild,l)}return n}(i,t.clientX,t.clientY):i.caretRangeFromPoint(t.clientX,t.clientY):document.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new Yw;const r=n.startContainer;if(r.nodeType===r.TEXT_NODE){const t=r.parentNode,i=t?t.parentNode:null,s=i?i.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===xy.CLASS_NAME?Qw.createFromDOMInfo(e,t,n.startOffset):new Yw(r.parentNode)}if(r.nodeType===r.ELEMENT_NODE){const t=r.parentNode,i=t?t.parentNode:null;return(i&&i.nodeType===i.ELEMENT_NODE?i.className:null)===xy.CLASS_NAME?Qw.createFromDOMInfo(e,r,r.textContent.length):new Yw(r)}return new Yw}static _doHitTestWithCaretPositionFromPoint(e,t){const i=document.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const t=i.offsetNode.parentNode,n=t?t.parentNode:null,r=n?n.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===xy.CLASS_NAME?Qw.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Yw(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const t=i.offsetNode.parentNode,n=t&&t.nodeType===t.ELEMENT_NODE?t.className:null,r=t?t.parentNode:null,s=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(n===xy.CLASS_NAME){const t=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(t)return Qw.createFromDOMInfo(e,t,0)}else if(s===xy.CLASS_NAME)return Qw.createFromDOMInfo(e,i.offsetNode,0)}return new Yw(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:n}=t.getTextModelOptions(),r=Zw.atomicPosition(i,e.column-1,n,2);return-1!==r?new Co(e.lineNumber,r+1):e}static _doHitTest(e,t){let i=new Yw;return"function"==typeof document.caretRangeFromPoint?i=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),1===i.type&&e.stickyTabStops&&(i=new Xw(this._snapToSoftTabBoundary(i.position,e.model),i.spanNode)),i}}class aS{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return aS._INSTANCE||(aS._INSTANCE=new aS),aS._INSTANCE}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const n=this._canvas.getContext("2d");n.font=t;const r=n.measureText(e).width;return this._cache[i]=r,r}}function lS(e){return function(t,i){let n=!1;return e&&(n=e.mouseTargetIsWidget(i)),n||i.preventDefault(),i}}aS._INSTANCE=null;class cS extends hy{constructor(e,t,i){super(),this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new oS(this._context,i),this._mouseDownOperation=this._register(new hS(this._context,this.viewController,this.viewHelper,((e,t)=>this._createMouseTarget(e,t)),(e=>this._getMouseColumn(e)))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(128).height;const n=new ay(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,(e=>this._onContextMenu(e,!0)))),this._register(n.onMouseMoveThrottled(this.viewHelper.viewDomNode,(e=>this._onMouseMove(e)),lS(this.mouseTargetFactory),cS.MOUSE_MOVE_MINIMUM_TIME)),this._register(n.onMouseUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e)))),this._register(n.onMouseDown(this.viewHelper.viewDomNode,(e=>this._onMouseDown(e))));this._register(cl(this.viewHelper.viewDomNode,jl.MOUSE_WHEEL,(e=>{if(this.viewController.emitMouseWheel(e),!this._context.configuration.options.get(65))return;const t=new Ha(e);if(Xn?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey){const e=au.getZoomLevel(),i=t.deltaY>0?1:-1;au.setZoomLevel(e+i),t.preventDefault(),t.stopPropagation()}}),{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(128)){const e=this._context.configuration.options.get(128).height;this._height!==e&&(this._height=e,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const i=new ny(e,t).toPageCoordinates(),n=sy(this.viewHelper.viewDomNode);return i.y<n.y||i.y>n.y+n.height||i.x<n.x||i.x>n.x+n.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),n,i,null)}_createMouseTarget(e,t){return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?e.target:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){if(this._mouseDownOperation.isActive())return;e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),i=6===t.type||7===t.type,n=2===t.type||3===t.type||4===t.type,r=3===t.type,s=this._context.configuration.options.get(96),o=8===t.type||5===t.type,a=9===t.type;let l=e.leftButton||e.middleButton;Xn&&e.leftButton&&e.ctrlKey&&(l=!1);const c=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(l&&(i||r&&s))c(),this._mouseDownOperation.start(t.type,e);else if(n)e.preventDefault();else if(o){const i=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(i.viewZoneId)&&(c(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else a&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(c(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}cS.MOUSE_MOVE_MINIMUM_TIME=100;class hS extends as{constructor(e,t,i,n,r){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._createMouseTarget=n,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new cy(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Ya),this._mouseState=new uS,this._currentSelection=new ko(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(3===e),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;const n=this._context.configuration.options;if(!n.get(78)&&n.get(29)&&!n.get(16)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===i.type&&i.position&&this._currentSelection.containsPosition(i.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,lS(null),(e=>this._onMouseDownThenMove(e)),(e=>{const t=this._findMousePosition(this._lastMouseEvent,!0);e&&e instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:t?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,lS(null),(e=>this._onMouseDownThenMove(e)),(()=>this._stop())))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet((()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))}),10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.model,n=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const i=Math.max(n.getCurrentScrollTop()-(t.y-e.posy),0),s=iS.getZoneAtCoord(this._context,i);if(s){const e=this._helpPositionJumpOverViewZone(s);if(e)return new eS(null,13,r,e)}const o=n.getLineNumberAtVerticalOffset(i);return new eS(null,13,r,new Co(o,1))}if(e.posy>t.y+t.height){const s=n.getCurrentScrollTop()+(e.posy-t.y),o=iS.getZoneAtCoord(this._context,s);if(o){const e=this._helpPositionJumpOverViewZone(o);if(e)return new eS(null,13,r,e)}const a=n.getLineNumberAtVerticalOffset(s);return new eS(null,13,r,new Co(a,i.getLineMaxColumn(a)))}const s=n.getLineNumberAtVerticalOffset(n.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new eS(null,13,r,new Co(s,1)):e.posx>t.x+t.width?new eS(null,13,r,new Co(s,i.getLineMaxColumn(s))):null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const n=this._createMouseTarget(e,t);if(!n.position)return null;if(8===n.type||5===n.type){const e=this._helpPositionJumpOverViewZone(n.detail);if(e)return new eS(n.element,n.type,n.mouseColumn,e,null,n.detail)}return n}_helpPositionJumpOverViewZone(e){const t=new Co(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,n=e.positionAfter;return i&&n?i.isBefore(t)?i:n:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class uS{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=(new Date).getTime();i-this._lastSetMouseDownCountTime>uS.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}uS.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class dS{constructor(e,t,i,n,r){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selectionStartPosition=n,this.selectionEndPosition=r}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new dS(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new dS(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const t=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,t,-1)}if(e>=this.selectionEnd){const t=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,t,1)}const t=this.value.substring(this.selectionStart,e);if(-1===t.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,-1)}_finishDeduceEditorPosition(e,t,i){let n=0,r=-1;for(;-1!==(r=t.indexOf("\n",r+1));)n++;return[e,i*t.length,n]}static selectedText(e){return new dS(e,0,e.length,null,null)}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let n=e.value,r=e.selectionStart,s=e.selectionEnd,o=t.value,a=t.selectionStart,l=t.selectionEnd;const c=Nc(n.substring(s),o.substring(l));o=o.substring(0,o.length-c),n=n.substring(0,n.length-c);const h=n.substring(0,r),u=Lc(h,o.substring(0,a));if(o=o.substring(u),n=n.substring(u),a-=u,r-=u,l-=u,s-=u,i&&a===l&&n.length>0){let e=null;if(a===o.length?o.startsWith(n)&&(e=o.substring(n.length)):o.endsWith(n)&&(e=o.substring(0,o.length-n.length)),null!==e&&e.length>0&&(/\uFE0F/.test(e)||(d=e,Fc.test(d))))return{text:e,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}var d;if(a===l){if(n===o&&0===r&&s===n.length&&a===o.length&&-1===o.indexOf("\n")&&function(e){for(let t=0,i=e.length;t<i;t++)if(jc(e.charCodeAt(t)))return!0;return!1}(o))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};return{text:o,replacePrevCharCnt:h.length-u,replaceNextCharCnt:0,positionDelta:0}}return{text:o,replacePrevCharCnt:s-r,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(Lc(e.value,t.value),e.selectionEnd),n=Math.min(Nc(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(i,e.value.length-n),s=t.value.substring(i,t.value.length-n),o=(e.selectionStart,e.selectionEnd-i),a=(t.selectionStart,t.selectionEnd-i);return{text:s,replacePrevCharCnt:o,replaceNextCharCnt:r.length-o,positionDelta:a-s.length}}}dS.EMPTY=new dS("",0,0,null,null);class fS{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t;return new xo(i+1,1,i+t+1,1)}static fromEditorSelection(e,t,i,n,r){const s=fS._getPageOfLine(i.startLineNumber,n),o=fS._getRangeForPage(s,n),a=fS._getPageOfLine(i.endLineNumber,n),l=fS._getRangeForPage(a,n),c=o.intersectRanges(new xo(1,1,i.startLineNumber,i.startColumn));let h=t.getValueInRange(c,1);const u=t.getLineCount(),d=t.getLineMaxColumn(u),f=l.intersectRanges(new xo(i.endLineNumber,i.endColumn,u,d));let p,g=t.getValueInRange(f,1);if(s===a||s+1===a)p=t.getValueInRange(i,1);else{const e=o.intersectRanges(i),n=l.intersectRanges(i);p=t.getValueInRange(e,1)+String.fromCharCode(8230)+t.getValueInRange(n,1)}if(r){const e=500;h.length>e&&(h=h.substring(h.length-e,h.length)),g.length>e&&(g=g.substring(0,e)),p.length>2*e&&(p=p.substring(0,e)+String.fromCharCode(8230)+p.substring(p.length-e,p.length))}return new dS(h+p+g,h.length,h.length+p.length,new Co(i.startLineNumber,i.startColumn),new Co(i.endLineNumber,i.endColumn))}}var pS;!function(e){e.Tap="-monaco-textarea-synthetic-tap"}(pS||(pS={}));const gS=!1;class mS{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}mS.INSTANCE=new mS;class bS extends as{constructor(e,t){super(),this.textArea=t,this._onFocus=this._register(new ms),this.onFocus=this._onFocus.event,this._onBlur=this._register(new ms),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new ms),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new ms),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new ms),this.onCut=this._onCut.event,this._onPaste=this._register(new ms),this.onPaste=this._onPaste.event,this._onType=this._register(new ms),this.onType=this._onType.event,this._onCompositionStart=this._register(new ms),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new ms),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new ms),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new ms),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._host=e,this._textArea=this._register(new yS(t)),this._asyncTriggerCut=this._register(new Qa((()=>this._onCut.fire()),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new Qa((()=>this.writeScreenReaderContent("asyncFocusGain")),0)),this._textAreaState=dS.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._isDoingComposition=!1,this._nextCommand=0;let i=null;this._register(ul(t.domNode,"keydown",(e=>{(109===e.keyCode||this._isDoingComposition&&1===e.keyCode)&&e.stopPropagation(),e.equals(9)&&e.preventDefault(),i=e,this._onKeyDown.fire(e)}))),this._register(ul(t.domNode,"keyup",(e=>{this._onKeyUp.fire(e)}))),this._register(cl(t.domNode,"compositionstart",(e=>{if(!this._isDoingComposition){if(this._isDoingComposition=!0,Xn&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===e.data){if(i&&i.equals(109)&&("ArrowRight"===i.code||"ArrowLeft"===i.code)||Sa)return this._textAreaState=new dS(this._textAreaState.value,this._textAreaState.selectionStart-1,this._textAreaState.selectionEnd,this._textAreaState.selectionStartPosition?new Co(this._textAreaState.selectionStartPosition.lineNumber,this._textAreaState.selectionStartPosition.column-1):null,this._textAreaState.selectionEndPosition),void this._onCompositionStart.fire({revealDeltaColumns:-1})}Ta?this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart}):(this._setAndWriteTextAreaState("compositionstart",dS.EMPTY),this._onCompositionStart.fire({revealDeltaColumns:0}))}})));const n=e=>{const t=this._textAreaState,i=dS.readFromTextArea(this._textArea);return[i,dS.deduceInput(t,i,e)]},r=()=>{const e=this._textAreaState,t=dS.readFromTextArea(this._textArea);return[t,dS.deduceAndroidCompositionInput(e,t)]},s=e=>{const t=this._textAreaState,i=dS.selectedText(e);return[i,{text:i.value,replacePrevCharCnt:t.selectionEnd-t.selectionStart,replaceNextCharCnt:0,positionDelta:0}]};this._register(cl(t.domNode,"compositionupdate",(e=>{if(Ta){const[t,i]=r();return this._textAreaState=t,this._onType.fire(i),void this._onCompositionUpdate.fire(e)}const[t,i]=s(e.data||"");this._textAreaState=t,this._onType.fire(i),this._onCompositionUpdate.fire(e)}))),this._register(cl(t.domNode,"compositionend",(e=>{if(!this._isDoingComposition)return;if(this._isDoingComposition=!1,Ta){const[e,t]=r();return this._textAreaState=e,this._onType.fire(t),void this._onCompositionEnd.fire()}const[t,i]=s(e.data||"");this._textAreaState=t,this._onType.fire(i),(xa||Sa)&&(this._textAreaState=dS.readFromTextArea(this._textArea)),this._onCompositionEnd.fire()}))),this._register(cl(t.domNode,"input",(()=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._isDoingComposition)return;const[e,t]=n(Xn);0===t.replacePrevCharCnt&&1===t.text.length&&Mc(t.text.charCodeAt(0))||(this._textAreaState=e,0===this._nextCommand?""===t.text&&0===t.replacePrevCharCnt||this._onType.fire(t):(""===t.text&&0===t.replacePrevCharCnt||this._firePaste(t.text,null),this._nextCommand=0))}))),this._register(cl(t.domNode,"cut",(e=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(e),this._asyncTriggerCut.schedule()}))),this._register(cl(t.domNode,"copy",(e=>{this._ensureClipboardGetsEditorSelection(e)}))),this._register(cl(t.domNode,"paste",(e=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),vS.canUseTextData(e)){const[t,i]=vS.getTextData(e);""!==t&&this._firePaste(t,i)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",dS.EMPTY),this._nextCommand=1}))),this._register(cl(t.domNode,"focus",(()=>{const e=this._hasFocus;this._setHasFocus(!0),ka&&!e&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()}))),this._register(cl(t.domNode,"blur",(()=>{this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)}))),this._register(cl(t.domNode,pS.Tap,(()=>{Ta&&this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())})))}_installSelectionChangeListener(){let e=0;return cl(document,"selectionchange",(t=>{if(!this._hasFocus)return;if(this._isDoingComposition)return;if(!xa)return;const i=Date.now(),n=i-e;if(e=i,n<5)return;const r=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100)return;if(!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const s=this._textArea.getValue();if(this._textAreaState.value!==s)return;const o=this._textArea.getSelectionStart(),a=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===o&&this._textAreaState.selectionEnd===a)return;const l=this._textAreaState.deduceEditorPosition(o),c=this._host.deduceModelPosition(l[0],l[1],l[2]),h=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(h[0],h[1],h[2]),d=new ko(c.lineNumber,c.column,u.lineNumber,u.column);this._onSelectionChangeRequest.fire(d)}))}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){const e=Pl(this.textArea.domNode);e?this._setHasFocus(e.activeElement===this.textArea.domNode):al(this.textArea.domNode)?this._setHasFocus(document.activeElement===this.textArea.domNode):this._setHasFocus(!1)}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._isDoingComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(vS.canUseTextData(e)),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};mS.INSTANCE.set(Sa?t.text.replace(/\r\n/g,"\n"):t.text,i),vS.canUseTextData(e)?vS.setTextData(e,t.text,t.html,i):this._setAndWriteTextAreaState("copy or cut",dS.selectedText(t.text))}_firePaste(e,t){t||(t=mS.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class vS{static canUseTextData(e){return!!e.clipboardData||!!window.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData("text/plain");let i=null;const n=e.clipboardData.getData("vscode-editor-data");if("string"==typeof n)try{i=JSON.parse(n),1!==i.version&&(i=null)}catch(e){}return[t,i]}if(window.clipboardData){e.preventDefault();return[window.clipboardData.getData("Text"),null]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,i,n){if(e.clipboardData)return e.clipboardData.setData("text/plain",t),"string"==typeof i&&e.clipboardData.setData("text/html",i),e.clipboardData.setData("vscode-editor-data",JSON.stringify(n)),void e.preventDefault();if(window.clipboardData)return window.clipboardData.setData("Text",t),void e.preventDefault();throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class yS extends as{constructor(e){super(),this._actual=e,this._ignoreSelectionChangeTime=0}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.domNode.value}setValue(e,t){const i=this._actual.domNode;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return"backward"===this._actual.domNode.selectionDirection?this._actual.domNode.selectionEnd:this._actual.domNode.selectionStart}getSelectionEnd(){return"backward"===this._actual.domNode.selectionDirection?this._actual.domNode.selectionStart:this._actual.domNode.selectionEnd}setSelectionRange(e,t,i){const n=this._actual.domNode;let r=null;const s=Pl(n);r=s?s.activeElement:document.activeElement;const o=r===n,a=n.selectionStart,l=n.selectionEnd;if(o&&a===t&&l===i)Sa&&window.parent!==window&&n.focus();else{if(o)return this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(t,i),void(Sa&&window.parent!==window&&n.focus());try{const e=function(e){let t=[];for(let i=0;e&&e.nodeType===e.ELEMENT_NODE;i++)t[i]=e.scrollTop,e=e.parentNode;return t}(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(t,i),function(e,t){for(let i=0;e&&e.nodeType===e.ELEMENT_NODE;i++)e.scrollTop!==t[i]&&(e.scrollTop=t[i]),e=e.parentNode}(n,e)}catch(e){}}}}class _S extends cS{constructor(e,t,i){super(e,t,i),this._register(Jv.addTarget(this.viewHelper.linesContentDomNode)),this._register(cl(this.viewHelper.linesContentDomNode,Xv.Tap,(e=>this.onTap(e)))),this._register(cl(this.viewHelper.linesContentDomNode,Xv.Change,(e=>this.onChange(e)))),this._register(cl(this.viewHelper.linesContentDomNode,Xv.Contextmenu,(e=>this._onContextMenu(new oy(e,this.viewHelper.viewDomNode),!1)))),this._lastPointerType="mouse",this._register(cl(this.viewHelper.linesContentDomNode,"pointerdown",(e=>{const t=e.pointerType;this._lastPointerType="mouse"!==t?"touch"===t?"touch":"pen":"mouse"})));const n=new ly(this.viewHelper.viewDomNode);this._register(n.onPointerMoveThrottled(this.viewHelper.viewDomNode,(e=>this._onMouseMove(e)),lS(this.mouseTargetFactory),cS.MOUSE_MOVE_MINIMUM_TIME)),this._register(n.onPointerUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e)))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,(e=>this._onMouseDown(e))))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new oy(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){"touch"===this._lastPointerType&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){"touch"!==e.browserEvent.pointerType&&super._onMouseDown(e)}}class wS extends cS{constructor(e,t,i){super(e,t,i),this._register(Jv.addTarget(this.viewHelper.linesContentDomNode)),this._register(cl(this.viewHelper.linesContentDomNode,Xv.Tap,(e=>this.onTap(e)))),this._register(cl(this.viewHelper.linesContentDomNode,Xv.Change,(e=>this.onChange(e)))),this._register(cl(this.viewHelper.linesContentDomNode,Xv.Contextmenu,(e=>this._onContextMenu(new oy(e,this.viewHelper.viewDomNode),!1))))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new oy(e,this.viewHelper.viewDomNode),!1);if(t.position){const e=document.createEvent("CustomEvent");e.initEvent(pS.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(e),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class SS extends as{constructor(e,t,i){super(),tr&&sl?this.handler=this._register(new _S(e,t,i)):window.TouchEvent?this.handler=this._register(new wS(e,t,i)):this.handler=this._register(new cS(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class CS extends hy{}const xS="base.contributions.colors";const kS=new class{constructor(){this._onDidChangeSchema=new ms,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,n=!1,r){let s={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:r};this.colorsById[e]=s;let o={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(o.deprecationMessage=r),this.colorSchema.properties[e]=o,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i&&i.defaults){return Nx(i.defaults[t.type],t)}}getColorSchema(){return this.colorSchema}toString(){return Object.keys(this.colorsById).sort(((e,t)=>{let i=-1===e.indexOf(".")?0:1,n=-1===t.indexOf(".")?0:1;return i!==n?i-n:e.localeCompare(t)})).map((e=>`- \`${e}\`: ${this.colorsById[e].description}`)).join("\n")}};function ES(e,t,i,n,r){return kS.registerColor(e,t,i,n,r)}zg.add(xS,kS);const TS=ES("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},On(0,"Overall foreground color. This color is only used if not overridden by a component.")),LS=(ES("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},On(0,"Overall foreground color for error messages. This color is only used if not overridden by a component.")),ES("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},On(0,"The default color for icons in the workbench.")),ES("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},On(0,"Overall border color for focused elements. This color is only used if not overridden by a component."))),NS=ES("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},On(0,"An extra border around elements to separate them from others for greater contrast.")),MS=ES("contrastActiveBorder",{light:null,dark:null,hc:LS},On(0,"An extra border around active elements to separate them from others for greater contrast.")),OS=(ES("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},On(0,"Foreground color for links in text.")),ES("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:vw.black},On(0,"Background color for code blocks in text.")),ES("widget.shadow",{dark:Ex(vw.black,.36),light:Ex(vw.black,.16),hc:null},On(0,"Shadow color of widgets such as find/replace inside the editor."))),DS=ES("input.background",{dark:"#3C3C3C",light:vw.white,hc:vw.black},On(0,"Input box background.")),IS=ES("input.foreground",{dark:TS,light:TS,hc:TS},On(0,"Input box foreground.")),AS=ES("input.border",{dark:null,light:null,hc:NS},On(0,"Input box border.")),PS=(ES("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:NS},On(0,"Border color of activated options in input fields.")),ES("inputOption.activeBackground",{dark:Ex(LS,.4),light:Ex(LS,.2),hc:vw.transparent},On(0,"Background color of activated options in input fields.")),ES("inputOption.activeForeground",{dark:vw.white,light:vw.black,hc:null},On(0,"Foreground color of activated options in input fields.")),ES("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:vw.black},On(0,"Input validation background color for information severity."))),RS=ES("inputValidation.infoForeground",{dark:null,light:null,hc:null},On(0,"Input validation foreground color for information severity.")),BS=ES("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:NS},On(0,"Input validation border color for information severity.")),FS=ES("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:vw.black},On(0,"Input validation background color for warning severity.")),WS=ES("inputValidation.warningForeground",{dark:null,light:null,hc:null},On(0,"Input validation foreground color for warning severity.")),VS=ES("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:NS},On(0,"Input validation border color for warning severity.")),zS=ES("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:vw.black},On(0,"Input validation background color for error severity.")),HS=ES("inputValidation.errorForeground",{dark:null,light:null,hc:null},On(0,"Input validation foreground color for error severity.")),jS=ES("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:NS},On(0,"Input validation border color for error severity.")),US=ES("dropdown.background",{dark:"#3C3C3C",light:vw.white,hc:vw.black},On(0,"Dropdown background.")),GS=ES("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:vw.white},On(0,"Dropdown foreground.")),KS=ES("button.foreground",{dark:vw.white,light:vw.white,hc:vw.white},On(0,"Button foreground color.")),$S=ES("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},On(0,"Button background color.")),qS=ES("button.hoverBackground",{dark:kx($S,.2),light:xx($S,.2),hc:null},On(0,"Button background color when hovering.")),ZS=ES("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:vw.black},On(0,"Badge background color. Badges are small information labels, e.g. for search results count.")),YS=ES("badge.foreground",{dark:vw.white,light:"#333",hc:vw.white},On(0,"Badge foreground color. Badges are small information labels, e.g. for search results count.")),XS=ES("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},On(0,"Scrollbar shadow to indicate that the view is scrolled.")),QS=ES("scrollbarSlider.background",{dark:vw.fromHex("#797979").transparent(.4),light:vw.fromHex("#646464").transparent(.4),hc:Ex(NS,.6)},On(0,"Scrollbar slider background color.")),JS=ES("scrollbarSlider.hoverBackground",{dark:vw.fromHex("#646464").transparent(.7),light:vw.fromHex("#646464").transparent(.7),hc:Ex(NS,.8)},On(0,"Scrollbar slider background color when hovering.")),eC=ES("scrollbarSlider.activeBackground",{dark:vw.fromHex("#BFBFBF").transparent(.4),light:vw.fromHex("#000000").transparent(.6),hc:NS},On(0,"Scrollbar slider background color when clicked on.")),tC=ES("progressBar.background",{dark:vw.fromHex("#0E70C0"),light:vw.fromHex("#0E70C0"),hc:NS},On(0,"Background color of the progress bar that can show for long running operations.")),iC=ES("editorError.background",{dark:null,light:null,hc:null},On(0,"Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),nC=ES("editorError.foreground",{dark:"#F48771",light:"#E51400",hc:null},On(0,"Foreground color of error squigglies in the editor.")),rC=ES("editorError.border",{dark:null,light:null,hc:vw.fromHex("#E47777").transparent(.8)},On(0,"Border color of error boxes in the editor.")),sC=ES("editorWarning.background",{dark:null,light:null,hc:null},On(0,"Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),oC=ES("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},On(0,"Foreground color of warning squigglies in the editor.")),aC=ES("editorWarning.border",{dark:null,light:null,hc:vw.fromHex("#FFCC00").transparent(.8)},On(0,"Border color of warning boxes in the editor.")),lC=ES("editorInfo.background",{dark:null,light:null,hc:null},On(0,"Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),cC=ES("editorInfo.foreground",{dark:"#75BEFF",light:"#75BEFF",hc:null},On(0,"Foreground color of info squigglies in the editor.")),hC=ES("editorInfo.border",{dark:null,light:null,hc:vw.fromHex("#75BEFF").transparent(.8)},On(0,"Border color of info boxes in the editor.")),uC=ES("editorHint.foreground",{dark:vw.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},On(0,"Foreground color of hint squigglies in the editor.")),dC=ES("editorHint.border",{dark:null,light:null,hc:vw.fromHex("#eeeeee").transparent(.8)},On(0,"Border color of hint boxes in the editor.")),fC=ES("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:vw.black},On(0,"Editor background color.")),pC=ES("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:vw.white},On(0,"Editor default foreground color.")),gC=ES("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},On(0,"Background color of editor widgets, such as find/replace.")),mC=ES("editorWidget.foreground",{dark:TS,light:TS,hc:TS},On(0,"Foreground color of editor widgets, such as find/replace.")),bC=ES("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:NS},On(0,"Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),vC=(ES("editorWidget.resizeBorder",{light:null,dark:null,hc:null},On(0,"Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),ES("quickInput.background",{dark:gC,light:gC,hc:gC},On(0,"Quick picker background color. The quick picker widget is the container for pickers like the command palette."))),yC=ES("quickInput.foreground",{dark:mC,light:mC,hc:mC},On(0,"Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),_C=ES("quickInputTitle.background",{dark:new vw(new gw(255,255,255,.105)),light:new vw(new gw(0,0,0,.06)),hc:"#000000"},On(0,"Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),wC=ES("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:vw.white},On(0,"Quick picker color for grouping labels.")),SC=ES("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:vw.white},On(0,"Quick picker color for grouping borders.")),CC=ES("keybindingLabel.background",{dark:new vw(new gw(128,128,128,.17)),light:new vw(new gw(221,221,221,.4)),hc:vw.transparent},On(0,"Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),xC=ES("keybindingLabel.foreground",{dark:vw.fromHex("#CCCCCC"),light:vw.fromHex("#555555"),hc:vw.white},On(0,"Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),kC=ES("keybindingLabel.border",{dark:new vw(new gw(51,51,51,.6)),light:new vw(new gw(204,204,204,.4)),hc:new vw(new gw(111,195,223))},On(0,"Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),EC=ES("keybindingLabel.bottomBorder",{dark:new vw(new gw(68,68,68,.6)),light:new vw(new gw(187,187,187,.4)),hc:new vw(new gw(111,195,223))},On(0,"Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),TC=ES("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},On(0,"Color of the editor selection.")),LC=ES("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},On(0,"Color of the selected text for high contrast.")),NC=ES("editor.inactiveSelectionBackground",{light:Ex(TC,.5),dark:Ex(TC,.5),hc:Ex(TC,.5)},On(0,"Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),MC=ES("editor.selectionHighlightBackground",{light:Lx(TC,fC,.3,.6),dark:Lx(TC,fC,.3,.6),hc:null},On(0,"Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),OC=(ES("editor.selectionHighlightBorder",{light:null,dark:null,hc:MS},On(0,"Border color for regions with the same content as the selection.")),ES("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},On(0,"Color of the current search match.")),ES("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},On(0,"Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0)),DC=(ES("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},On(0,"Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),ES("editor.findMatchBorder",{light:null,dark:null,hc:MS},On(0,"Border color of the current search match.")),ES("editor.findMatchHighlightBorder",{light:null,dark:null,hc:MS},On(0,"Border color of the other search matches.")),ES("editor.findRangeHighlightBorder",{dark:null,light:null,hc:Ex(MS,.4)},On(0,"Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),ES("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},On(0,"Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),ES("editorHoverWidget.background",{light:gC,dark:gC,hc:gC},On(0,"Background color of the editor hover."))),IC=(ES("editorHoverWidget.foreground",{light:mC,dark:mC,hc:mC},On(0,"Foreground color of the editor hover.")),ES("editorHoverWidget.border",{light:bC,dark:bC,hc:bC},On(0,"Border color of the editor hover.")),ES("editorHoverWidget.statusBarBackground",{dark:kx(DC,.2),light:xx(DC,.05),hc:gC},On(0,"Background color of the editor hover status bar.")),ES("editorLink.activeForeground",{dark:"#4E94CE",light:vw.blue,hc:vw.cyan},On(0,"Color of active links.")),ES("editorInlayHint.foreground",{dark:gC,light:mC,hc:gC},On(0,"Foreground color of inline hints")),ES("editorInlayHint.background",{dark:mC,light:gC,hc:mC},On(0,"Background color of inline hints")),ES("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},On(0,"The color used for the lightbulb actions icon.")),ES("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},On(0,"The color used for the lightbulb auto fix actions icon.")),new vw(new gw(155,185,85,.2))),AC=new vw(new gw(255,0,0,.2)),PC=ES("diffEditor.insertedTextBackground",{dark:IC,light:IC,hc:null},On(0,"Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),RC=ES("diffEditor.removedTextBackground",{dark:AC,light:AC,hc:null},On(0,"Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),BC=ES("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},On(0,"Outline color for the text that got inserted.")),FC=ES("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},On(0,"Outline color for text that got removed.")),WC=ES("diffEditor.border",{dark:null,light:null,hc:NS},On(0,"Border color between the two text editors.")),VC=ES("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},On(0,"Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),zC=ES("list.focusBackground",{dark:null,light:null,hc:null},On(0,"List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),HC=ES("list.focusForeground",{dark:null,light:null,hc:null},On(0,"List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),jC=ES("list.focusOutline",{dark:LS,light:LS,hc:MS},On(0,"List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),UC=ES("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},On(0,"List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),GC=ES("list.activeSelectionForeground",{dark:vw.white,light:vw.white,hc:null},On(0,"List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),KC=ES("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},On(0,"List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),$C=ES("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},On(0,"List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),qC=ES("list.inactiveFocusBackground",{dark:null,light:null,hc:null},On(0,"List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ZC=ES("list.inactiveFocusOutline",{dark:null,light:null,hc:null},On(0,"List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),YC=ES("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},On(0,"List/Tree background when hovering over items using the mouse.")),XC=ES("list.hoverForeground",{dark:null,light:null,hc:null},On(0,"List/Tree foreground when hovering over items using the mouse.")),QC=ES("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},On(0,"List/Tree drag and drop background when moving items around using the mouse.")),JC=ES("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:LS},On(0,"List/Tree foreground color of the match highlights when searching inside the list/tree.")),ex=ES("list.focusHighlightForeground",{dark:JC,light:JC,hc:JC},On(0,"List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),tx=ES("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:vw.black},On(0,"Background color of the type filter widget in lists and trees.")),ix=ES("listFilterWidget.outline",{dark:vw.transparent,light:vw.transparent,hc:"#f38518"},On(0,"Outline color of the type filter widget in lists and trees.")),nx=ES("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:NS},On(0,"Outline color of the type filter widget in lists and trees, when there are no matches.")),rx=ES("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},On(0,"Tree stroke color for the indentation guides.")),sx=ES("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},On(0,"Tree stroke color for the indentation guides.")),ox=ES("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,On(0,"Please use quickInputList.focusBackground instead")),ax=ES("quickInputList.focusForeground",{dark:GC,light:GC,hc:GC},On(0,"Quick picker foreground color for the focused item.")),lx=ES("quickInputList.focusBackground",{dark:Tx(ox,UC,"#062F4A"),light:Tx(ox,UC,"#D6EBFF"),hc:null},On(0,"Quick picker background color for the focused item.")),cx=ES("menu.border",{dark:null,light:null,hc:NS},On(0,"Border color of menus.")),hx=ES("menu.foreground",{dark:GS,light:TS,hc:GS},On(0,"Foreground color of menu items.")),ux=ES("menu.background",{dark:US,light:US,hc:US},On(0,"Background color of menu items.")),dx=ES("menu.selectionForeground",{dark:GC,light:GC,hc:GC},On(0,"Foreground color of the selected menu item in menus.")),fx=ES("menu.selectionBackground",{dark:UC,light:UC,hc:UC},On(0,"Background color of the selected menu item in menus.")),px=ES("menu.selectionBorder",{dark:null,light:null,hc:MS},On(0,"Border color of the selected menu item in menus.")),gx=ES("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:NS},On(0,"Color of a separator menu item in menus.")),mx=(ES("editor.snippetTabstopHighlightBackground",{dark:new vw(new gw(124,124,124,.3)),light:new vw(new gw(10,50,100,.2)),hc:new vw(new gw(124,124,124,.3))},On(0,"Highlight background color of a snippet tabstop.")),ES("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},On(0,"Highlight border color of a snippet tabstop.")),ES("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},On(0,"Highlight background color of the final tabstop of a snippet.")),ES("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new vw(new gw(10,50,100,.5)),hc:"#525252"},On(0,"Highlight border color of the final tabstop of a snippet.")),ES("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},On(0,"Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),ES("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},On(0,"Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ES("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},On(0,"Minimap marker color for find matches."),!0),ES("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},On(0,"Minimap marker color for the editor selection."),!0)),bx=ES("minimap.errorHighlight",{dark:new vw(new gw(255,18,18,.7)),light:new vw(new gw(255,18,18,.7)),hc:new vw(new gw(255,50,50,1))},On(0,"Minimap marker color for errors.")),vx=ES("minimap.warningHighlight",{dark:oC,light:oC,hc:aC},On(0,"Minimap marker color for warnings.")),yx=ES("minimap.background",{dark:null,light:null,hc:null},On(0,"Minimap background color.")),_x=ES("minimapSlider.background",{light:Ex(QS,.5),dark:Ex(QS,.5),hc:Ex(QS,.5)},On(0,"Minimap slider background color.")),wx=ES("minimapSlider.hoverBackground",{light:Ex(JS,.5),dark:Ex(JS,.5),hc:Ex(JS,.5)},On(0,"Minimap slider background color when hovering.")),Sx=ES("minimapSlider.activeBackground",{light:Ex(eC,.5),dark:Ex(eC,.5),hc:Ex(eC,.5)},On(0,"Minimap slider background color when clicked on."));ES("problemsErrorIcon.foreground",{dark:nC,light:nC,hc:nC},On(0,"The color used for the problems error icon.")),ES("problemsWarningIcon.foreground",{dark:oC,light:oC,hc:oC},On(0,"The color used for the problems warning icon.")),ES("problemsInfoIcon.foreground",{dark:cC,light:cC,hc:cC},On(0,"The color used for the problems info icon."));function Cx(e,t){var i,n,r;switch(e.op){case 0:return null===(i=Nx(e.value,t))||void 0===i?void 0:i.darken(e.factor);case 1:return null===(n=Nx(e.value,t))||void 0===n?void 0:n.lighten(e.factor);case 2:return null===(r=Nx(e.value,t))||void 0===r?void 0:r.transparent(e.factor);case 3:for(const i of e.values){const e=Nx(i,t);if(e)return e}return;case 4:const s=Nx(e.value,t);if(!s)return;const o=Nx(e.background,t);return o?s.isDarkerThan(o)?vw.getLighterColor(s,o,e.factor).transparent(e.transparency):vw.getDarkerColor(s,o,e.factor).transparent(e.transparency):s.transparent(e.factor*e.transparency);default:throw function(e){throw new Error("Unreachable")}()}}function xx(e,t){return{op:0,value:e,factor:t}}function kx(e,t){return{op:1,value:e,factor:t}}function Ex(e,t){return{op:2,value:e,factor:t}}function Tx(...e){return{op:3,values:e}}function Lx(e,t,i,n){return{op:4,value:e,background:t,factor:i,transparency:n}}function Nx(e,t){if(null!==e)return"string"==typeof e?"#"===e[0]?vw.fromHex(e):t.getColor(e):e instanceof vw?e:"object"==typeof e?Cx(e,t):void 0}const Mx="vscode://schemas/workbench-colors";let Ox=zg.as(Hg);Ox.registerSchema(Mx,kS.getColorSchema());const Dx=new Qa((()=>Ox.notifySchemaChanged(Mx)),200);kS.onDidChangeSchema((()=>{Dx.isScheduled()||Dx.schedule()}));const Ix=ES("editor.lineHighlightBackground",{dark:null,light:null,hc:null},On(0,"Background color for the highlight of line at the cursor position.")),Ax=ES("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},On(0,"Background color for the border around the line at the cursor position.")),Px=ES("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},On(0,"Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),Rx=ES("editor.rangeHighlightBorder",{dark:null,light:null,hc:MS},On(0,"Background color of the border around highlighted ranges."),!0),Bx=ES("editor.symbolHighlightBackground",{dark:OC,light:OC,hc:null},On(0,"Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),Fx=ES("editor.symbolHighlightBorder",{dark:null,light:null,hc:MS},On(0,"Background color of the border around highlighted symbols."),!0),Wx=ES("editorCursor.foreground",{dark:"#AEAFAD",light:vw.black,hc:vw.white},On(0,"Color of the editor cursor.")),Vx=ES("editorCursor.background",null,On(0,"The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),zx=ES("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},On(0,"Color of whitespace characters in the editor.")),Hx=ES("editorIndentGuide.background",{dark:zx,light:zx,hc:zx},On(0,"Color of the editor indentation guides.")),jx=ES("editorIndentGuide.activeBackground",{dark:zx,light:zx,hc:zx},On(0,"Color of the active editor indentation guides.")),Ux=ES("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:vw.white},On(0,"Color of editor line numbers.")),Gx=ES("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:MS},On(0,"Color of editor active line number"),!1,On(0,"Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),Kx=ES("editorLineNumber.activeForeground",{dark:Gx,light:Gx,hc:Gx},On(0,"Color of editor active line number")),$x=ES("editorRuler.foreground",{dark:"#5A5A5A",light:vw.lightgrey,hc:vw.white},On(0,"Color of the editor rulers.")),qx=(ES("editorCodeLens.foreground",{dark:"#999999",light:"#999999",hc:"#999999"},On(0,"Foreground color of editor CodeLens")),ES("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},On(0,"Background color behind matching brackets")),ES("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:NS},On(0,"Color for matching brackets boxes")),ES("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},On(0,"Color of the overview ruler border."))),Zx=ES("editorOverviewRuler.background",null,On(0,"Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),Yx=ES("editorGutter.background",{dark:fC,light:fC,hc:fC},On(0,"Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),Xx=ES("editorUnnecessaryCode.border",{dark:null,light:null,hc:vw.fromHex("#fff").transparent(.8)},On(0,"Border color of unnecessary (unused) source code in the editor.")),Qx=ES("editorUnnecessaryCode.opacity",{dark:vw.fromHex("#000a"),light:vw.fromHex("#0007"),hc:null},On(0,"Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.")),Jx=(ES("editorGhostText.border",{dark:null,light:null,hc:vw.fromHex("#fff").transparent(.8)},On(0,"Border color of ghost text in the editor.")),ES("editorGhostText.foreground",{dark:vw.fromHex("#ffffff56"),light:vw.fromHex("#0007"),hc:null},On(0,"Foreground color of the ghost text in the editor.")),new vw(new gw(0,122,204,.6))),ek=(ES("editorOverviewRuler.rangeHighlightForeground",{dark:Jx,light:Jx,hc:Jx},On(0,"Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ES("editorOverviewRuler.errorForeground",{dark:new vw(new gw(255,18,18,.7)),light:new vw(new gw(255,18,18,.7)),hc:new vw(new gw(255,50,50,1))},On(0,"Overview ruler marker color for errors."))),tk=ES("editorOverviewRuler.warningForeground",{dark:oC,light:oC,hc:aC},On(0,"Overview ruler marker color for warnings.")),ik=ES("editorOverviewRuler.infoForeground",{dark:cC,light:cC,hc:hC},On(0,"Overview ruler marker color for infos."));pv(((e,t)=>{const i=e.getColor(fC);i&&t.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${i}; }`);const n=e.getColor(pC);n&&t.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const r=e.getColor(Yx);r&&t.addRule(`.monaco-editor .margin { background-color: ${r}; }`);const s=e.getColor(Px);s&&t.addRule(`.monaco-editor .rangeHighlight { background-color: ${s}; }`);const o=e.getColor(Rx);o&&t.addRule(`.monaco-editor .rangeHighlight { border: 1px ${"hc"===e.type?"dotted":"solid"} ${o}; }`);const a=e.getColor(Bx);a&&t.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const l=e.getColor(Fx);l&&t.addRule(`.monaco-editor .symbolHighlight { border: 1px ${"hc"===e.type?"dotted":"solid"} ${l}; }`);const c=e.getColor(zx);c&&(t.addRule(`.monaco-editor .mtkw { color: ${c} !important; }`),t.addRule(`.monaco-editor .mtkz { color: ${c} !important; }`))}));class nk extends CS{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Co(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(56);const t=e.get(57);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(82);const i=e.get(128);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),2!==this._renderLineNumbers&&3!==this._renderLineNumbers||(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Co(e,1));if(1!==t.column)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(2===this._renderLineNumbers){const e=Math.abs(this._lastCursorModelPosition.lineNumber-i);return 0===e?'<span class="relative-current-line-number">'+i+"</span>":String(e)}return 3===this._renderLineNumbers?this._lastCursorModelPosition.lineNumber===i||i%10==0?String(i):"":String(i)}prepareRender(e){if(0===this._renderLineNumbers)return void(this._renderResult=null);const t=Qn?this._lineHeight%2==0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r='<div class="'+nk.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',s=this._context.model.getLineCount(),o=[];for(let e=i;e<=n;e++){const n=e-i;if(!this._renderFinalNewline&&e===s&&0===this._context.model.getLineLength(e)){o[n]="";continue}const a=this._getLineRenderLineNumber(e);a?e===this._activeLineNumber?o[n]='<div class="active-line-number '+nk.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+a+"</div>":o[n]=r+a+"</div>":o[n]=""}this._renderResult=o}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}nk.CLASS_NAME="line-numbers",pv(((e,t)=>{const i=e.getColor(Ux);i&&t.addRule(`.monaco-editor .line-numbers { color: ${i}; }`);const n=e.getColor(Kx);n&&t.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)}));class rk extends uy{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(128);this._canUseLayerHinting=!t.get(26),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=Zv(document.createElement("div")),this._domNode.setClassName(rk.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Zv(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(rk.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(128);return this._canUseLayerHinting=!t.get(26),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}rk.CLASS_NAME="glyph-margin",rk.OUTER_CLASS_NAME="margin";class sk{constructor(e,t,i){this.top=e,this.left=t,this.width=i}setWidth(e){return new sk(this.top,this.left,e)}}const ok=Sa;class ak extends uy{constructor(e,t,i){super(e),this._primaryCursorPosition=new Co(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=i,this._scrollLeft=0,this._scrollTop=0;const n=this._context.configuration.options,r=n.get(128);this._setAccessibilityOptions(n),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=n.get(40),this._lineHeight=n.get(56),this._emptySelectionClipboard=n.get(30),this._copyWithSyntaxHighlighting=n.get(19),this._visibleTextArea=null,this._selections=[new ko(1,1,1,1)],this._modelSelections=[new ko(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Zv(document.createElement("textarea")),dy.write(this.textArea,6),this.textArea.setClassName("inputarea monaco-mouse-cursor-text"),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(n)),this.textArea.setAttribute("tabindex",String(n.get(110))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",On(0,"editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),n.get(28)&&n.get(78)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=Zv(document.createElement("div")),this.textAreaCover.setPosition("absolute");const s={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:e=>this._context.model.getLineMaxColumn(e),getValueInRange:(e,t)=>this._context.model.getValueInRange(e,t)},o={getDataToCopy:e=>{const t=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Yn),i=this._context.model.getEOL(),n=this._emptySelectionClipboard&&1===this._modelSelections.length&&this._modelSelections[0].isEmpty(),r=Array.isArray(t)?t:null,s=Array.isArray(t)?t.join(i):t;let o,a=null;if(e&&(gS||this._copyWithSyntaxHighlighting&&s.length<65536)){const e=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);e&&(o=e.html,a=e.mode)}return{isFromEmptySelection:n,multicursorText:r,text:s,html:o,mode:a}},getScreenReaderContent:e=>{if(1===this._accessibilitySupport){if(Xn){const e=this._selections[0];if(e.isEmpty()){const t=e.getStartPosition();let i=this._getWordBeforePosition(t);if(0===i.length&&(i=this._getCharacterBeforePosition(t)),i.length>0)return new dS(i,i.length,i.length,t,t)}}return dS.EMPTY}if(Ta){const e=this._selections[0];if(e.isEmpty()){const t=e.getStartPosition(),[i,n]=this._getAndroidWordAtPosition(t);if(i.length>0)return new dS(i,n,n,t,t)}return dS.EMPTY}return fS.fromEditorSelection(e,s,this._selections[0],this._accessibilityPageSize,0===this._accessibilitySupport)},deduceModelPosition:(e,t,i)=>this._context.model.deduceModelPositionRelativeToViewPosition(e,t,i)};this._textAreaInput=this._register(new bS(o,this.textArea)),this._register(this._textAreaInput.onKeyDown((e=>{this._viewController.emitKeyDown(e)}))),this._register(this._textAreaInput.onKeyUp((e=>{this._viewController.emitKeyUp(e)}))),this._register(this._textAreaInput.onPaste((e=>{let t=!1,i=null,n=null;e.metadata&&(t=this._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,i=void 0!==e.metadata.multicursorText?e.metadata.multicursorText:null,n=e.metadata.mode),this._viewController.paste(e.text,t,i,n)}))),this._register(this._textAreaInput.onCut((()=>{this._viewController.cut()}))),this._register(this._textAreaInput.onType((e=>{e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?this._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta):this._viewController.type(e.text)}))),this._register(this._textAreaInput.onSelectionChangeRequest((e=>{this._viewController.setSelection(e)}))),this._register(this._textAreaInput.onCompositionStart((e=>{const t=this._selections[0].startLineNumber,i=this._selections[0].startColumn+e.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new xo(t,i,t,i),0,1);const n=this._viewHelper.visibleRangeForPositionRelativeToEditor(t,i);n&&(this._visibleTextArea=new sk(this._context.viewLayout.getVerticalOffsetForLineNumber(t),n.left,ok?0:1),this._render()),this.textArea.setClassName("inputarea monaco-mouse-cursor-text ime-input"),this._viewController.compositionStart(),this._context.model.onCompositionStart()}))),this._register(this._textAreaInput.onCompositionUpdate((e=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(function(e,t){const i=document.createElement("canvas").getContext("2d");i.font=(n=t,function(e,t,i,n,r){return`${e} normal ${t} ${i}px / ${n}px ${r}`}("normal",n.fontWeight,n.fontSize,n.lineHeight,n.fontFamily));var n;const r=i.measureText(e);return Sa?r.width+2:r.width}(e.data,this._fontInfo)),this._render())}))),this._register(this._textAreaInput.onCompositionEnd((()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName("inputarea monaco-mouse-cursor-text"),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()}))),this._register(this._textAreaInput.onFocus((()=>{this._context.model.setHasFocus(!0)}))),this._register(this._textAreaInput.onBlur((()=>{this._context.model.setHasFocus(!1)})))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t=this._context.model.getLineContent(e.lineNumber),i=T_('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?');let n=!0,r=e.column,s=!0,o=e.column,a=0;for(;a<50&&(n||s);){if(n&&r<=1&&(n=!1),n){const e=t.charCodeAt(r-2);0!==i.get(e)?n=!1:r--}if(s&&o>t.length&&(s=!1),s){const e=t.charCodeAt(o-1);0!==i.get(e)?s=!1:o++}a++}return[t.substring(r-1,o-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),i=T_(this._context.configuration.options.get(114));let n=e.column,r=0;for(;n>1;){const s=t.charCodeAt(n-2);if(0!==i.get(s)||r>50)return t.substring(n-1,e.column-1);r++,n--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const t=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!Mc(t.charCodeAt(0)))return t}return""}_getAriaLabel(e){return 1===e.get(2)?On(0,"The editor is not accessible at this time. Press {0} for options.",Qn?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);2===this._accessibilitySupport&&t===jr.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(128);return this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(40),this._lineHeight=t.get(56),this._emptySelectionClipboard=t.get(30),this._copyWithSyntaxHighlighting=t.get(19),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(110))),(e.hasChanged(28)||e.hasChanged(78))&&(t.get(28)&&t.get(78)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new Co(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea)return void this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;t<0||t>this._contentHeight?this._renderAtTopLeft():Xn?this._renderInsideEditor(this._primaryCursorPosition,t,e,ok?0:1,this._lineHeight):this._renderInsideEditor(this._primaryCursorPosition,t,e,ok?0:1,ok?0:1)}_renderInsideEditor(e,t,i,n,r){this._lastRenderPosition=e;const s=this.textArea,o=this.textAreaCover;$v.applyFontInfo(s,this._fontInfo),s.setTop(t),s.setLeft(i),s.setWidth(n),s.setHeight(r),o.setTop(0),o.setLeft(0),o.setWidth(0),o.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if($v.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),ok)return e.setWidth(0),e.setHeight(0),t.setWidth(0),void t.setHeight(0);e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const i=this._context.configuration.options;i.get(46)?t.setClassName("monaco-editor-background textAreaCover "+rk.OUTER_CLASS_NAME):0!==i.get(57).renderType?t.setClassName("monaco-editor-background textAreaCover "+nk.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}class lk{static columnSelect(e,t,i,n,r,s){let o=Math.abs(r-i)+1,a=i>r,l=n>s,c=n<s,h=[];for(let r=0;r<o;r++){let o=i+(a?-r:r),u=$w.columnFromVisibleColumn2(e,t,o,n),d=$w.columnFromVisibleColumn2(e,t,o,s),f=$w.visibleColumnFromColumn2(e,t,new Co(o,u)),p=$w.visibleColumnFromColumn2(e,t,new Co(o,d));if(c){if(f>s)continue;if(p<n)continue}if(l){if(p>n)continue;if(f<s)continue}h.push(new zw(new xo(o,u,o,u),0,new Co(o,d),0))}if(0===h.length)for(let e=0;e<o;e++){const n=i+(a?-e:e),r=t.getLineMaxColumn(n);h.push(new zw(new xo(n,r,n,r),0,new Co(n,r),0))}return{viewStates:h,reversed:a,fromLineNumber:i,fromVisualColumn:n,toLineNumber:r,toVisualColumn:s}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,lk.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0;const r=Math.min(i.fromViewLineNumber,i.toViewLineNumber),s=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let i=r;i<=s;i++){const r=t.getLineMaxColumn(i),s=$w.visibleColumnFromColumn2(e,t,new Co(i,r));n=Math.max(n,s)}let o=i.toViewVisualColumn;return o<n&&o++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,o)}static columnSelectUp(e,t,i,n){const r=n?e.pageSize:1,s=Math.max(1,i.toViewLineNumber-r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,s,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){const r=n?e.pageSize:1,s=Math.min(t.getLineCount(),i.toViewLineNumber+r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,s,i.toViewVisualColumn)}}class ck{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return new ko(i.endLineNumber,i.endColumn,i.endLineNumber,i.endColumn)}}class hk{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return new ko(i.startLineNumber,i.startColumn,i.startLineNumber,i.startColumn)}}class uk{constructor(e,t,i,n,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return new ko(i.endLineNumber+this._lineNumberDeltaOffset,i.endColumn+this._columnDeltaOffset,i.endLineNumber+this._lineNumberDeltaOffset,i.endColumn+this._columnDeltaOffset)}}class dk{constructor(e,t,i,n=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class fk{constructor(e,t,i){this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class pk{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-function(e,t){const i=Yc.getInstance(),n=t,r=Ac(e,t);t-=r>=65536?2:1;let s=i.getGraphemeBreakType(r);for(;t>0;){const n=Ac(e,t),r=i.getGraphemeBreakType(n);if(Zc(r,s))break;t-=n>=65536?2:1,s=r}return n-t}(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new Co(i,e.getLineMaxColumn(i))}return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const n=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),s=Zw.atomicPosition(r,t.column-1,i,0);if(-1!==s&&s+1>=n)return new Co(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,i){const n=e.stickyTabStops?pk.leftPositionAtomicSoftTabs(t,i,e.tabSize):pk.leftPosition(t,i);return new fk(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,r){let s,o;if(i.hasSelection()&&!n)s=i.selection.startLineNumber,o=i.selection.startColumn;else{const n=i.position.delta(void 0,-(r-1)),a=t.normalizePosition(pk.clipPositionColumn(n,t),0),l=pk.left(e,t,a);s=l.lineNumber,o=l.column}return i.move(n,s,o,0)}static clipPositionColumn(e,t){return new Co(e.lineNumber,pk.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i+=Pc(e.getLineContent(t),i-1):t<e.getLineCount()&&(t+=1,i=e.getLineMinColumn(t)),new Co(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,r){if(i<e.getLineIndentColumn(t)){const r=e.getLineContent(t),s=Zw.atomicPosition(r,i-1,n,1);if(-1!==s)return new Co(t,s+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const n=e.stickyTabStops?pk.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):pk.rightPosition(t,i.lineNumber,i.column);return new fk(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,r){let s,o;if(i.hasSelection()&&!n)s=i.selection.endLineNumber,o=i.selection.endColumn;else{const n=i.position.delta(void 0,r-1),a=t.normalizePosition(pk.clipPositionColumn(n,t),1),l=pk.right(e,t,a);s=l.lineNumber,o=l.column}return i.move(n,s,o,0)}static down(e,t,i,n,r,s,o){const a=$w.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+r,l=t.getLineCount(),c=i===l&&n===t.getLineMaxColumn(i);return(i+=s)>l?(i=l,n=o?t.getLineMaxColumn(i):Math.min(t.getLineMaxColumn(i),n)):n=$w.columnFromVisibleColumn2(e,t,i,a),r=c?0:a-$w.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),new fk(i,n,r)}static moveDown(e,t,i,n,r){let s,o;i.hasSelection()&&!n?(s=i.selection.endLineNumber,o=i.selection.endColumn):(s=i.position.lineNumber,o=i.position.column);let a=pk.down(e,t,s,o,i.leftoverVisibleColumns,r,!0);return i.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateDown(e,t,i){let n=i.selection,r=pk.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),s=pk.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new zw(new xo(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new Co(s.lineNumber,s.column),s.leftoverVisibleColumns)}static up(e,t,i,n,r,s,o){const a=$w.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+r,l=1===i&&1===n;return(i-=s)<1?(i=1,n=o?t.getLineMinColumn(i):Math.min(t.getLineMaxColumn(i),n)):n=$w.columnFromVisibleColumn2(e,t,i,a),r=l?0:a-$w.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),new fk(i,n,r)}static moveUp(e,t,i,n,r){let s,o;i.hasSelection()&&!n?(s=i.selection.startLineNumber,o=i.selection.startColumn):(s=i.position.lineNumber,o=i.position.column);let a=pk.up(e,t,s,o,i.leftoverVisibleColumns,r,!0);return i.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateUp(e,t,i){let n=i.selection,r=pk.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),s=pk.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new zw(new xo(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new Co(s.lineNumber,s.column),s.leftoverVisibleColumns)}static _isBlankLine(e,t){return 0===e.getLineFirstNonWhitespaceColumn(t)}static moveToPrevBlankLine(e,t,i,n){let r=i.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return i.move(n,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,i,n){const r=t.getLineCount();let s=i.position.lineNumber;for(;s<r&&this._isBlankLine(t,s);)s++;for(;s<r&&!this._isBlankLine(t,s);)s++;return i.move(n,s,t.getLineMinColumn(s),0)}static moveToBeginningOfLine(e,t,i,n){let r,s=i.position.lineNumber,o=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||o;return r=i.position.column===a?o:a,i.move(n,s,r,0)}static moveToEndOfLine(e,t,i,n,r){let s=i.position.lineNumber,o=t.getLineMaxColumn(s);return i.move(n,s,o,r?1073741824-o:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){let r=t.getLineCount(),s=t.getLineMaxColumn(r);return i.move(n,r,s,0)}}class gk{static deleteRight(e,t,i,n){let r=[],s=3!==e;for(let e=0,o=n.length;e<o;e++){const o=n[e];let a=o;if(a.isEmpty()){let e=o.getPosition(),n=pk.right(t,i,e);a=new xo(n.lineNumber,n.column,e.lineNumber,e.column)}a.isEmpty()?r[e]=null:(a.startLineNumber!==a.endLineNumber&&(s=!0),r[e]=new ck(a,""))}return[s,r]}static isAutoClosingPairDelete(e,t,i,n,r,s,o){if("never"===t&&"never"===i)return!1;if("never"===e)return!1;for(let a=0,l=s.length;a<l;a++){const l=s[a],c=l.getPosition();if(!l.isEmpty())return!1;const h=r.getLineContent(c.lineNumber);if(c.column<2||c.column>=h.length+1)return!1;const u=h.charAt(c.column-2),d=n.get(u);if(!d)return!1;if(qw(u)){if("never"===i)return!1}else if("never"===t)return!1;const f=h.charAt(c.column-1);let p=!1;for(const e of d)e.open===u&&e.close===f&&(p=!0);if(!p)return!1;if("auto"===e){let e=!1;for(let t=0,i=o.length;t<i;t++){const i=o[t];if(c.lineNumber===i.startLineNumber&&c.column===i.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){let n=[];for(let e=0,t=i.length;e<t;e++){const t=i[e].getPosition(),r=new xo(t.lineNumber,t.column-1,t.lineNumber,t.column+1);n[e]=new ck(r,"")}return[!0,n]}static deleteLeft(e,t,i,n,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,r))return this._runAutoClosingPairDelete(t,i,n);const s=[];let o=2!==e;for(let e=0,r=n.length;e<r;e++){let r=gk.getDeleteRange(n[e],i,t);r.isEmpty()?s[e]=null:(r.startLineNumber!==r.endLineNumber&&(o=!0),s[e]=new ck(r,""))}return[o,s]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const n=e.getPosition();if(i.useTabStops&&n.column>1){const e=t.getLineContent(n.lineNumber),r=gc(e),s=-1===r?e.length+1:r+1;if(n.column<=s){const e=$w.visibleColumnFromColumn2(i,t,n),r=$w.prevIndentTabStop(e,i.indentSize),s=$w.columnFromVisibleColumn2(i,t,n.lineNumber,r);return new xo(n.lineNumber,s,n.lineNumber,n.column)}}return xo.fromPositions(gk.getPositionAfterDeleteLeft(n,t),n)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=Xc(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}if(e.lineNumber>1){const i=e.lineNumber-1;return new Co(i,t.getLineMaxColumn(i))}return e}static cut(e,t,i){let n=[];for(let r=0,s=i.length;r<s;r++){const s=i[r];if(s.isEmpty())if(e.emptySelectionClipboard){let e,i,o,a,l=s.getPosition();l.lineNumber<t.getLineCount()?(e=l.lineNumber,i=1,o=l.lineNumber+1,a=1):l.lineNumber>1?(e=l.lineNumber-1,i=t.getLineMaxColumn(l.lineNumber-1),o=l.lineNumber,a=t.getLineMaxColumn(l.lineNumber)):(e=l.lineNumber,i=1,o=l.lineNumber,a=t.getLineMaxColumn(l.lineNumber));let c=new xo(e,i,o,a);c.isEmpty()?n[r]=null:n[r]=new ck(c,"")}else n[r]=null;else n[r]=new ck(s,"")}return new Kw(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class mk{static _createWord(e,t,i,n,r){return{start:n,end:r,wordType:t,nextCharClass:i}}static _findPreviousWordOnLine(e,t,i){let n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0;for(let r=i.column-2;r>=0;r--){let i=e.charCodeAt(r),s=t.get(i);if(0===s){if(2===n)return this._createWord(e,n,s,r+1,this._findEndOfWord(e,t,n,r+1));n=1}else if(2===s){if(1===n)return this._createWord(e,n,s,r+1,this._findEndOfWord(e,t,n,r+1));n=2}else if(1===s&&0!==n)return this._createWord(e,n,s,r+1,this._findEndOfWord(e,t,n,r+1))}return 0!==n?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){let r=e.length;for(let s=n;s<r;s++){let n=e.charCodeAt(s),r=t.get(n);if(1===r)return s;if(1===i&&2===r)return s;if(2===i&&0===r)return s}return r}static _findNextWordOnLine(e,t,i){let n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0,r=e.length;for(let s=i.column-1;s<r;s++){let i=e.charCodeAt(s),r=t.get(i);if(0===r){if(2===n)return this._createWord(e,n,r,this._findStartOfWord(e,t,n,s-1),s);n=1}else if(2===r){if(1===n)return this._createWord(e,n,r,this._findStartOfWord(e,t,n,s-1),s);n=2}else if(1===r&&0!==n)return this._createWord(e,n,r,this._findStartOfWord(e,t,n,s-1),s)}return 0!==n?this._createWord(e,n,1,this._findStartOfWord(e,t,n,r-1),r):null}static _findStartOfWord(e,t,i,n){for(let r=n;r>=0;r--){let n=e.charCodeAt(r),s=t.get(n);if(1===s)return r+1;if(1===i&&2===s)return r+1;if(2===i&&0===s)return r+1}return 0}static moveWordLeft(e,t,i,n){let r=i.lineNumber,s=i.column;1===s&&r>1&&(r-=1,s=t.getLineMaxColumn(r));let o=mk._findPreviousWordOnLine(e,t,new Co(r,s));if(0===n)return new Co(r,o?o.start+1:1);if(1===n)return o&&2===o.wordType&&o.end-o.start==1&&0===o.nextCharClass&&(o=mk._findPreviousWordOnLine(e,t,new Co(r,o.start+1))),new Co(r,o?o.start+1:1);if(3===n){for(;o&&2===o.wordType;)o=mk._findPreviousWordOnLine(e,t,new Co(r,o.start+1));return new Co(r,o?o.start+1:1)}return o&&s<=o.end+1&&(o=mk._findPreviousWordOnLine(e,t,new Co(r,o.start+1))),new Co(r,o?o.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(1===t.column)return i>1?new Co(i-1,e.getLineMaxColumn(i-1)):t;const r=e.getLineContent(i);for(let e=t.column-1;e>1;e--){const t=r.charCodeAt(e-2),s=r.charCodeAt(e-1);if(95===t&&95!==s)return new Co(i,e);if(Sc(t)&&Cc(s))return new Co(i,e);if(Cc(t)&&Cc(s)&&e+1<n){if(Sc(r.charCodeAt(e)))return new Co(i,e)}}return new Co(i,1)}static moveWordRight(e,t,i,n){let r=i.lineNumber,s=i.column,o=!1;s===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(o=!0,r+=1,s=1);let a=mk._findNextWordOnLine(e,t,new Co(r,s));if(2===n)a&&2===a.wordType&&a.end-a.start==1&&0===a.nextCharClass&&(a=mk._findNextWordOnLine(e,t,new Co(r,a.end+1))),s=a?a.end+1:t.getLineMaxColumn(r);else if(3===n){for(o&&(s=0);a&&(2===a.wordType||a.start+1<=s);)a=mk._findNextWordOnLine(e,t,new Co(r,a.end+1));s=a?a.start+1:t.getLineMaxColumn(r)}else a&&!o&&s>=a.start+1&&(a=mk._findNextWordOnLine(e,t,new Co(r,a.end+1))),s=a?a.start+1:t.getLineMaxColumn(r);return new Co(r,s)}static _moveWordPartRight(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===n)return i<e.getLineCount()?new Co(i+1,1):t;const r=e.getLineContent(i);for(let e=t.column+1;e<n;e++){const t=r.charCodeAt(e-2),s=r.charCodeAt(e-1);if(95!==t&&95===s)return new Co(i,e);if(Sc(t)&&Cc(s))return new Co(i,e);if(Cc(t)&&Cc(s)&&e+1<n){if(Sc(r.charCodeAt(e)))return new Co(i,e)}}return new Co(i,n)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-2,r=bc(i,n);return r+1<n?new xo(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,n=e.model,r=e.selection,s=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(gk.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const t=e.selection.getPosition();return new xo(t.lineNumber,t.column-1,t.lineNumber,t.column+1)}const o=new Co(r.positionLineNumber,r.positionColumn);let a=o.lineNumber,l=o.column;if(1===a&&1===l)return null;if(s){let e=this._deleteWordLeftWhitespace(n,o);if(e)return e}let c=mk._findPreviousWordOnLine(i,n,o);return 0===t?c?l=c.start+1:l>1?l=1:(a--,l=n.getLineMaxColumn(a)):(c&&l<=c.end+1&&(c=mk._findPreviousWordOnLine(i,n,new Co(a,c.start+1))),c?l=c.end+1:l>1?l=1:(a--,l=n.getLineMaxColumn(a))),new xo(a,l,o.lineNumber,o.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const n=new Co(i.positionLineNumber,i.positionColumn);let r=this._deleteInsideWordWhitespace(t,n);return r||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return 32===i||9===i}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=i.length;if(0===n)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,r))return null;let s=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,s))return null;for(;r>0&&this._charAtIsWhitespace(i,r-1);)r--;for(;s+1<n&&this._charAtIsWhitespace(i,s+1);)s++;return new xo(t.lineNumber,r+1,t.lineNumber,s+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const n=t.getLineContent(i.lineNumber),r=n.length;if(0===r)return i.lineNumber>1?new xo(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new xo(i.lineNumber,1,i.lineNumber+1,1):new xo(i.lineNumber,1,i.lineNumber,1);const s=e=>e.start+1<=i.column&&i.column<=e.end+1,o=(e,t)=>(e=Math.min(e,i.column),t=Math.max(t,i.column),new xo(i.lineNumber,e,i.lineNumber,t)),a=e=>{let t=e.start+1,i=e.end+1,s=!1;for(;i-1<r&&this._charAtIsWhitespace(n,i-1);)s=!0,i++;if(!s)for(;t>1&&this._charAtIsWhitespace(n,t-2);)t--;return o(t,i)},l=mk._findPreviousWordOnLine(e,t,i);if(l&&s(l))return a(l);const c=mk._findNextWordOnLine(e,t,i);return c&&s(c)?a(c):l&&c?o(l.end+1,c.start+1):l?o(l.start+1,l.end+1):c?o(c.start+1,c.end+1):o(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=mk._moveWordPartLeft(e,i);return new xo(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){let i=e.length;for(let n=t;n<i;n++){let t=e.charAt(n);if(" "!==t&&"\t"!==t)return n}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-1,r=this._findFirstNonWhitespaceChar(i,n);return n+1<r?new xo(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,n=e.model,r=e.selection,s=e.whitespaceHeuristics;if(!r.isEmpty())return r;const o=new Co(r.positionLineNumber,r.positionColumn);let a=o.lineNumber,l=o.column;const c=n.getLineCount(),h=n.getLineMaxColumn(a);if(a===c&&l===h)return null;if(s){let e=this._deleteWordRightWhitespace(n,o);if(e)return e}let u=mk._findNextWordOnLine(i,n,o);return 2===t?u?l=u.end+1:l<h||a===c?l=h:(a++,u=mk._findNextWordOnLine(i,n,new Co(a,1)),l=u?u.start+1:n.getLineMaxColumn(a)):(u&&l>=u.start+1&&(u=mk._findNextWordOnLine(i,n,new Co(a,u.end+1))),u?l=u.start+1:l<h||a===c?l=h:(a++,u=mk._findNextWordOnLine(i,n,new Co(a,1)),l=u?u.start+1:n.getLineMaxColumn(a))),new xo(a,l,o.lineNumber,o.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=mk._moveWordPartRight(e,i);return new xo(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){const n=new xo(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i){const n=T_(t),r=mk._findPreviousWordOnLine(n,e,i);if(r&&1===r.wordType&&r.start<=i.column-1&&i.column-1<=r.end)return mk._createWordAtPosition(e,i.lineNumber,r);const s=mk._findNextWordOnLine(n,e,i);return s&&1===s.wordType&&s.start<=i.column-1&&i.column-1<=s.end?mk._createWordAtPosition(e,i.lineNumber,s):null}static word(e,t,i,n,r){const s=T_(e.wordSeparators);let o,a,l=mk._findPreviousWordOnLine(s,t,r),c=mk._findNextWordOnLine(s,t,r);if(!n){let e,i;return l&&1===l.wordType&&l.start<=r.column-1&&r.column-1<=l.end?(e=l.start+1,i=l.end+1):c&&1===c.wordType&&c.start<=r.column-1&&r.column-1<=c.end?(e=c.start+1,i=c.end+1):(e=l?l.end+1:1,i=c?c.start+1:t.getLineMaxColumn(r.lineNumber)),new zw(new xo(r.lineNumber,e,r.lineNumber,i),0,new Co(r.lineNumber,i),0)}l&&1===l.wordType&&l.start<r.column-1&&r.column-1<l.end?(o=l.start+1,a=l.end+1):c&&1===c.wordType&&c.start<r.column-1&&r.column-1<c.end?(o=c.start+1,a=c.end+1):(o=r.column,a=r.column);let h,u=r.lineNumber;if(i.selectionStart.containsPosition(r))h=i.selectionStart.endColumn;else if(r.isBeforeOrEqual(i.selectionStart.getStartPosition())){h=o;let e=new Co(u,h);i.selectionStart.containsPosition(e)&&(h=i.selectionStart.endColumn)}else{h=a;let e=new Co(u,h);i.selectionStart.containsPosition(e)&&(h=i.selectionStart.startColumn)}return i.move(!0,u,h,0)}}class bk{static addCursorDown(e,t,i){let n=[],r=0;for(let s=0,o=t.length;s<o;s++){const o=t[s];n[r++]=new Gw(o.modelState,o.viewState),n[r++]=i?Gw.fromModelState(pk.translateDown(e.cursorConfig,e.model,o.modelState)):Gw.fromViewState(pk.translateDown(e.cursorConfig,e,o.viewState))}return n}static addCursorUp(e,t,i){let n=[],r=0;for(let s=0,o=t.length;s<o;s++){const o=t[s];n[r++]=new Gw(o.modelState,o.viewState),n[r++]=i?Gw.fromModelState(pk.translateUp(e.cursorConfig,e.model,o.modelState)):Gw.fromViewState(pk.translateUp(e.cursorConfig,e,o.viewState))}return n}static moveToBeginningOfLine(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];n[r]=this._moveToLineStart(e,s,i)}return n}static _moveToLineStart(e,t,i){const n=t.viewState.position.column,r=n===t.modelState.position.column,s=t.viewState.position.lineNumber,o=e.getLineFirstNonWhitespaceColumn(s);return r||n===o?this._moveToLineStartByModel(e,t,i):this._moveToLineStartByView(e,t,i)}static _moveToLineStartByView(e,t,i){return Gw.fromViewState(pk.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return Gw.fromModelState(pk.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){let r=[];for(let s=0,o=t.length;s<o;s++){const o=t[s];r[s]=this._moveToLineEnd(e,o,i,n)}return r}static _moveToLineEnd(e,t,i,n){const r=t.viewState.position,s=e.getLineMaxColumn(r.lineNumber),o=r.column===s,a=t.modelState.position,l=e.model.getLineMaxColumn(a.lineNumber),c=s-r.column==l-a.column;return o||c?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return Gw.fromViewState(pk.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return Gw.fromModelState(pk.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){let i=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],s=r.modelState.selection.startLineNumber,o=e.model.getLineCount();let a,l=r.modelState.selection.endLineNumber;l===o?a=e.model.getLineMaxColumn(o):(l++,a=1),i[n]=Gw.fromModelState(new zw(new xo(s,1,s,1),0,new Co(l,a),0))}return i}static moveToBeginningOfBuffer(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];n[r]=Gw.fromModelState(pk.moveToBeginningOfBuffer(e.cursorConfig,e.model,s.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];n[r]=Gw.fromModelState(pk.moveToEndOfBuffer(e.cursorConfig,e.model,s.modelState,i))}return n}static selectAll(e,t){const i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return Gw.fromModelState(new zw(new xo(1,1,1,1),0,new Co(i,n),0))}static line(e,t,i,n,r){const s=e.model.validatePosition(n),o=r?e.coordinatesConverter.validateViewPosition(new Co(r.lineNumber,r.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!i||!t.modelState.hasSelection()){const t=e.model.getLineCount();let i=s.lineNumber+1,n=1;return i>t&&(i=t,n=e.model.getLineMaxColumn(i)),Gw.fromModelState(new zw(new xo(s.lineNumber,1,i,n),0,new Co(i,n),0))}const a=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<a)return Gw.fromViewState(t.viewState.move(t.modelState.hasSelection(),o.lineNumber,1,0));if(s.lineNumber>a){const i=e.getLineCount();let n=o.lineNumber+1,r=1;return n>i&&(n=i,r=e.getLineMaxColumn(n)),Gw.fromViewState(t.viewState.move(t.modelState.hasSelection(),n,r,0))}{const e=t.modelState.selectionStart.getEndPosition();return Gw.fromModelState(t.modelState.move(t.modelState.hasSelection(),e.lineNumber,e.column,0))}}static word(e,t,i,n){const r=e.model.validatePosition(n);return Gw.fromModelState(mk.word(e.cursorConfig,e.model,t.modelState,i,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Gw(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,n=t.viewState.position.column;return Gw.fromViewState(new zw(new xo(i,n,i,n),0,new Co(i,n),0))}static moveTo(e,t,i,n,r){const s=e.model.validatePosition(n),o=r?e.coordinatesConverter.validateViewPosition(new Co(r.lineNumber,r.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return Gw.fromViewState(t.viewState.move(i,o.lineNumber,o.column,0))}static simpleMove(e,t,i,n,r,s){switch(i){case 0:return 4===s?this._moveHalfLineLeft(e,t,n):this._moveLeft(e,t,n,r);case 1:return 4===s?this._moveHalfLineRight(e,t,n):this._moveRight(e,t,n,r);case 2:return 2===s?this._moveUpByViewLines(e,t,n,r):this._moveUpByModelLines(e,t,n,r);case 3:return 2===s?this._moveDownByViewLines(e,t,n,r):this._moveDownByModelLines(e,t,n,r);case 4:return 2===s?t.map((t=>Gw.fromViewState(pk.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,n)))):t.map((t=>Gw.fromModelState(pk.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,n))));case 5:return 2===s?t.map((t=>Gw.fromViewState(pk.moveToNextBlankLine(e.cursorConfig,e,t.viewState,n)))):t.map((t=>Gw.fromModelState(pk.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,n))));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,r){const s=e.getCompletelyVisibleViewRange(),o=e.coordinatesConverter.convertViewRangeToModelRange(s);switch(i){case 11:{const i=this._firstLineNumberInRange(e.model,o,r),s=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,s)]}case 13:{const i=this._lastLineNumberInRange(e.model,o,r),s=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,s)]}case 12:{const i=Math.round((o.startLineNumber+o.endLineNumber)/2),r=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,r)]}case 14:{let i=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];i[r]=this.findPositionInViewportIfOutside(e,o,s,n)}return i}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){let r=t.viewState.position.lineNumber;if(i.startLineNumber<=r&&r<=i.endLineNumber-1)return new Gw(t.modelState,t.viewState);{r>i.endLineNumber-1&&(r=i.endLineNumber-1),r<i.startLineNumber&&(r=i.startLineNumber);const s=e.getLineFirstNonWhitespaceColumn(r);return this._moveToViewPosition(e,t,n,r,s)}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map((t=>Gw.fromViewState(pk.moveLeft(e.cursorConfig,e,t.viewState,i,n))))}static _moveHalfLineLeft(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.viewState.position.lineNumber,a=Math.round(e.getLineContent(o).length/2);n[r]=Gw.fromViewState(pk.moveLeft(e.cursorConfig,e,s.viewState,i,a))}return n}static _moveRight(e,t,i,n){return t.map((t=>Gw.fromViewState(pk.moveRight(e.cursorConfig,e,t.viewState,i,n))))}static _moveHalfLineRight(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.viewState.position.lineNumber,a=Math.round(e.getLineContent(o).length/2);n[r]=Gw.fromViewState(pk.moveRight(e.cursorConfig,e,s.viewState,i,a))}return n}static _moveDownByViewLines(e,t,i,n){let r=[];for(let s=0,o=t.length;s<o;s++){const o=t[s];r[s]=Gw.fromViewState(pk.moveDown(e.cursorConfig,e,o.viewState,i,n))}return r}static _moveDownByModelLines(e,t,i,n){let r=[];for(let s=0,o=t.length;s<o;s++){const o=t[s];r[s]=Gw.fromModelState(pk.moveDown(e.cursorConfig,e.model,o.modelState,i,n))}return r}static _moveUpByViewLines(e,t,i,n){let r=[];for(let s=0,o=t.length;s<o;s++){const o=t[s];r[s]=Gw.fromViewState(pk.moveUp(e.cursorConfig,e,o.viewState,i,n))}return r}static _moveUpByModelLines(e,t,i,n){let r=[];for(let s=0,o=t.length;s<o;s++){const o=t[s];r[s]=Gw.fromModelState(pk.moveUp(e.cursorConfig,e.model,o.modelState,i,n))}return r}static _moveToViewPosition(e,t,i,n,r){return Gw.fromViewState(t.viewState.move(i,n,r,0))}static _moveToModelPosition(e,t,i,n,r){return Gw.fromModelState(t.modelState.move(i,n,r,0))}static _moveToViewMinColumn(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.viewState.position.lineNumber,a=e.getLineMinColumn(o);n[r]=this._moveToViewPosition(e,s,i,o,a)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.viewState.position.lineNumber,a=e.getLineFirstNonWhitespaceColumn(o);n[r]=this._moveToViewPosition(e,s,i,o,a)}return n}static _moveToViewCenterColumn(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.viewState.position.lineNumber,a=Math.round((e.getLineMaxColumn(o)+e.getLineMinColumn(o))/2);n[r]=this._moveToViewPosition(e,s,i,o,a)}return n}static _moveToViewMaxColumn(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.viewState.position.lineNumber,a=e.getLineMaxColumn(o);n[r]=this._moveToViewPosition(e,s,i,o,a)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){let n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.viewState.position.lineNumber,a=e.getLineLastNonWhitespaceColumn(o);n[r]=this._moveToViewPosition(e,s,i,o,a)}return n}}var vk;!function(e){e.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t",constraint:function(e){if(!Mh(e))return!1;let t=e;return!!Nh(t.to)&&(!(!Ih(t.select)&&!Dh(t.select))&&(!(!Ih(t.by)&&!Nh(t.by))&&!(!Ih(t.value)&&!Oh(t.value))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},e.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},e.parse=function(t){if(!t.to)return null;let i;switch(t.to){case e.RawDirection.Left:i=0;break;case e.RawDirection.Right:i=1;break;case e.RawDirection.Up:i=2;break;case e.RawDirection.Down:i=3;break;case e.RawDirection.PrevBlankLine:i=4;break;case e.RawDirection.NextBlankLine:i=5;break;case e.RawDirection.WrappedLineStart:i=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case e.RawDirection.WrappedLineColumnCenter:i=8;break;case e.RawDirection.WrappedLineEnd:i=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case e.RawDirection.ViewPortTop:i=11;break;case e.RawDirection.ViewPortBottom:i=13;break;case e.RawDirection.ViewPortCenter:i=12;break;case e.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let n=0;switch(t.by){case e.RawUnit.Line:n=1;break;case e.RawUnit.WrappedLine:n=2;break;case e.RawUnit.Character:n=3;break;case e.RawUnit.HalfLine:n=4}return{direction:i,unit:n,select:!!t.select,value:t.value||1}}}(vk||(vk={}));const yk=Object.create(null);function _k(e,t){if(t<=0)return"";yk[e]||(yk[e]=["",e]);const i=yk[e];for(let n=i.length;n<=t;n++)i[n]=i[n-1]+e;return i[t]}class wk{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,i,n,r){const s=$w.visibleColumnFromColumn(e,t,i);if(r){const e=_k(" ",n);return _k(e,$w.prevIndentTabStop(s,n)/n)}return _k("\t",$w.prevRenderTabStop(s,i)/i)}static shiftIndent(e,t,i,n,r){const s=$w.visibleColumnFromColumn(e,t,i);if(r){const e=_k(" ",n);return _k(e,$w.nextIndentTabStop(s,n)/n)}return _k("\t",$w.nextRenderTabStop(s,i)/i)}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let n=this._selection.endLineNumber;1===this._selection.endColumn&&i!==n&&(n-=1);const{tabSize:r,indentSize:s,insertSpaces:o}=this._opts,a=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let l=0,c=0;for(let h=i;h<=n;h++,l=c){c=0;let n,u=e.getLineContent(h),d=gc(u);if((!this._opts.isUnshift||0!==u.length&&0!==d)&&(a||this._opts.isUnshift||0!==u.length)){if(-1===d&&(d=u.length),h>1){if($w.visibleColumnFromColumn(u,d+1,r)%s!=0&&e.isCheapToTokenize(h-1)){let t=Pf.getEnterAction(this._opts.autoIndent,e,new xo(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)));if(t){if(c=l,t.appendText)for(let e=0,i=t.appendText.length;e<i&&c<s&&32===t.appendText.charCodeAt(e);e++)c++;t.removeText&&(c=Math.max(0,c-t.removeText));for(let e=0;e<c&&(0!==d&&32===u.charCodeAt(d-1));e++)d--}}}this._opts.isUnshift&&0===d||(n=this._opts.isUnshift?wk.unshiftIndent(u,d+1,r,s,o):wk.shiftIndent(u,d+1,r,s,o),this._addEditOperation(t,new xo(h,1,h,d+1),n),h!==i||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=d+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&0===e.getLineLength(i)&&(this._useLastEditRangeForCursorEndPosition=!0);const r=o?_k(" ",s):"\t";for(let o=i;o<=n;o++){const n=e.getLineContent(o);let l=gc(n);if((!this._opts.isUnshift||0!==n.length&&0!==l)&&((a||this._opts.isUnshift||0!==n.length)&&(-1===l&&(l=n.length),!this._opts.isUnshift||0!==l)))if(this._opts.isUnshift){l=Math.min(l,s);for(let e=0;e<l;e++){if(9===n.charCodeAt(e)){l=e+1;break}}this._addEditOperation(t,new xo(o,1,o,l+1),"")}else this._addEditOperation(t,new xo(o,1,o,1),r),o!==i||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=1===this._selection.startColumn)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let e=t.getInverseEditOperations()[0];return new ko(e.range.endLineNumber,e.range.endColumn,e.range.endLineNumber,e.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let e=this._selection.startColumn;return i.startColumn<=e?i:0===i.getDirection()?new ko(i.startLineNumber,e,i.endLineNumber,i.endColumn):new ko(i.endLineNumber,i.endColumn,i.startLineNumber,e)}return i}}class Sk{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new xo(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new xo(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let i=t.getInverseEditOperations(),n=i[0].range,r=i[1].range;return new ko(n.endLineNumber,n.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class Ck{static indent(e,t,i){if(null===t||null===i)return[];let n=[];for(let t=0,r=i.length;t<r;t++)n[t]=new wk(i[t],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return n}static outdent(e,t,i){let n=[];for(let t=0,r=i.length;t<r;t++)n[t]=new wk(i[t],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return n}static shiftIndent(e,t,i){return i=i||1,wk.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,i){return i=i||1,wk.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,i,n){let r=[];for(let e=0,t=i.length;e<t;e++)r[e]=new ck(i[e],n[e]);return new Kw(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,r){let s=[];for(let e=0,t=i.length;e<t;e++){const t=i[e];let o=t.getPosition();if(r&&!t.isEmpty()&&(r=!1),r&&n.indexOf("\n")!==n.length-1&&(r=!1),r){let i=new xo(o.lineNumber,1,o.lineNumber,1);s[e]=new dk(i,n,t,!0)}else s[e]=new ck(t,n)}return new Kw(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,i,n,r){if(n)return null;if(1===t.length)return null;if(r&&r.length===t.length)return r;if("spread"===e.multiCursorPaste){10===i.charCodeAt(i.length-1)&&(i=i.substr(0,i.length-1)),13===i.charCodeAt(i.length-1)&&(i=i.substr(0,i.length-1));let e=pc(i);if(e.length===t.length)return e}return null}static paste(e,t,i,n,r,s){const o=this._distributePasteToCursors(e,i,n,r,s);return o?(i=i.sort(xo.compareRangesUsingStarts),this._distributedPaste(e,t,i,o)):this._simplePaste(e,t,i,n,r)}static _goodIndentForLine(e,t,i){let n=null,r="";const s=Pf.getInheritIndentForLine(e.autoIndent,t,i,!1);if(s)n=s.action,r=s.indentation;else if(i>1){let n;for(n=i-1;n>=1;n--){if(bc(t.getLineContent(n))>=0)break}if(n<1)return null;const s=t.getLineMaxColumn(n),o=Pf.getEnterAction(e.autoIndent,t,new xo(n,s,n,s));o&&(r=o.indentation+o.appendText)}return n&&(n===Qd.Indent&&(r=Ck.shiftIndent(e,r)),n===Qd.Outdent&&(r=Ck.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,i,n){let r="",s=i.getStartPosition();if(e.insertSpaces){let i=$w.visibleColumnFromColumn2(e,t,s),n=e.indentSize,o=n-i%n;for(let e=0;e<o;e++)r+=" "}else r="\t";return new ck(i,r,n)}static tab(e,t,i){let n=[];for(let r=0,s=i.length;r<s;r++){const s=i[r];if(s.isEmpty()){let i=t.getLineContent(s.startLineNumber);if(/^\s*$/.test(i)&&t.isCheapToTokenize(s.startLineNumber)){let o=this._goodIndentForLine(e,t,s.startLineNumber);o=o||"\t";let a=e.normalizeIndentation(o);if(!i.startsWith(a)){n[r]=new ck(new xo(s.startLineNumber,1,s.startLineNumber,i.length+1),a,!0);continue}}n[r]=this._replaceJumpToNextIndent(e,t,s,!0)}else{if(s.startLineNumber===s.endLineNumber){let i=t.getLineMaxColumn(s.startLineNumber);if(1!==s.startColumn||s.endColumn!==i){n[r]=this._replaceJumpToNextIndent(e,t,s,!1);continue}}n[r]=new wk(s,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return n}static compositionType(e,t,i,n,r,s,o,a){const l=n.map((e=>this._compositionType(i,e,r,s,o,a)));return new Kw(4,l,{shouldPushStackElementBefore:Ek(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,r,s){if(!t.isEmpty())return null;const o=t.getPosition(),a=Math.max(1,o.column-n),l=Math.min(e.getLineMaxColumn(o.lineNumber),o.column+r),c=new xo(o.lineNumber,a,o.lineNumber,l);return e.getValueInRange(c)===i&&0===s?null:new uk(c,i,0,s)}static _typeCommand(e,t,i){return i?new hk(e,t,!0):new ck(e,t,!0)}static _enter(e,t,i,n){if(0===e.autoIndent)return Ck._typeCommand(n,"\n",i);if(!t.isCheapToTokenize(n.getStartPosition().lineNumber)||1===e.autoIndent){let r=mc(t.getLineContent(n.startLineNumber)).substring(0,n.startColumn-1);return Ck._typeCommand(n,"\n"+e.normalizeIndentation(r),i)}const r=Pf.getEnterAction(e.autoIndent,t,n);if(r){if(r.indentAction===Qd.None)return Ck._typeCommand(n,"\n"+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===Qd.Indent)return Ck._typeCommand(n,"\n"+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===Qd.IndentOutdent){const t=e.normalizeIndentation(r.indentation),s=e.normalizeIndentation(r.indentation+r.appendText),o="\n"+s+"\n"+t;return i?new hk(n,o,!0):new uk(n,o,-1,s.length-t.length,!0)}if(r.indentAction===Qd.Outdent){const t=Ck.unshiftIndent(e,r.indentation);return Ck._typeCommand(n,"\n"+e.normalizeIndentation(t+r.appendText),i)}}const s=mc(t.getLineContent(n.startLineNumber)).substring(0,n.startColumn-1);if(e.autoIndent>=4){const r=Pf.getIndentForEnter(e.autoIndent,t,n,{unshiftIndent:t=>Ck.unshiftIndent(e,t),shiftIndent:t=>Ck.shiftIndent(e,t),normalizeIndentation:t=>e.normalizeIndentation(t)});if(r){let s=$w.visibleColumnFromColumn2(e,t,n.getEndPosition());const o=n.endColumn,a=gc(t.getLineContent(n.endLineNumber));if(n=a>=0?n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,a+1)):n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new hk(n,"\n"+e.normalizeIndentation(r.afterEnter),!0);{let t=0;return o<=a+1&&(e.insertSpaces||(s=Math.ceil(s/e.indentSize)),t=Math.min(s+1-e.normalizeIndentation(r.afterEnter).length-1,0)),new uk(n,"\n"+e.normalizeIndentation(r.afterEnter),0,t,!0)}}}return Ck._typeCommand(n,"\n"+e.normalizeIndentation(s),i)}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let e=0,n=i.length;e<n;e++)if(!t.isCheapToTokenize(i[e].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,i,n){const r=Pf.getIndentationAtPosition(t,i.startLineNumber,i.startColumn),s=Pf.getIndentActionForType(e.autoIndent,t,i,n,{shiftIndent:t=>Ck.shiftIndent(e,t),unshiftIndent:t=>Ck.unshiftIndent(e,t)});if(null===s)return null;if(s!==e.normalizeIndentation(r)){const r=t.getLineFirstNonWhitespaceColumn(i.startLineNumber);return 0===r?Ck._typeCommand(new xo(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(s)+n,!1):Ck._typeCommand(new xo(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(s)+t.getLineContent(i.startLineNumber).substring(r-1,i.startColumn-1)+n,!1)}return null}static _isAutoClosingOvertype(e,t,i,n,r){if("never"===e.autoClosingOvertype)return!1;if(!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(let s=0,o=i.length;s<o;s++){const o=i[s];if(!o.isEmpty())return!1;const a=o.getPosition(),l=t.getLineContent(a.lineNumber);if(l.charAt(a.column-1)!==r)return!1;const c=qw(r);if(92===(a.column>2?l.charCodeAt(a.column-2):0)&&c)return!1;if("auto"===e.autoClosingOvertype){let e=!1;for(let t=0,i=n.length;t<i;t++){const i=n[t];if(a.lineNumber===i.startLineNumber&&a.column===i.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingOvertype(e,t,i,n,r){let s=[];for(let e=0,t=n.length;e<t;e++){const t=n[e].getPosition(),i=new xo(t.lineNumber,t.column,t.lineNumber,t.column+1);s[e]=new ck(i,r)}return new Kw(4,s,{shouldPushStackElementBefore:Ek(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],s=n.some((e=>t.startsWith(e.open))),o=r.some((e=>t.startsWith(e.close)));return!s&&o}static _findAutoClosingPairOpen(e,t,i,n){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!r)return null;let s=null;for(const e of r)if(null===s||e.open.length>s.open.length){let r=!0;for(const s of i){if(t.getValueInRange(new xo(s.lineNumber,s.column-e.open.length+1,s.lineNumber,s.column))+n!==e.open){r=!1;break}}r&&(s=e)}return s}static _findSubAutoClosingPairClose(e,t){if(t.open.length<=1)return"";const i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let r=null;for(const e of n)e.open!==t.open&&t.open.includes(e.open)&&t.close.endsWith(e.close)&&(!r||e.open.length>r.open.length)&&(r=e);return r?r.close:""}static _getAutoClosingPairClose(e,t,i,n,r){const s=qw(n),o=s?e.autoClosingQuotes:e.autoClosingBrackets;if("never"===o)return null;const a=this._findAutoClosingPairOpen(e,t,i.map((e=>e.getPosition())),n);if(!a)return null;const l=this._findSubAutoClosingPairClose(e,a);let c=!0;const h=s?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;for(let n=0,u=i.length;n<u;n++){const u=i[n];if(!u.isEmpty())return null;const d=u.getPosition(),f=t.getLineContent(d.lineNumber),p=f.substring(d.column-1);if(p.startsWith(l)||(c=!1),f.length>d.column-1){const t=f.charAt(d.column-1);if(!Ck._isBeforeClosingBrace(e,p)&&!h(t))return null}if(!t.isCheapToTokenize(d.lineNumber))return null;if(1===a.open.length&&s&&"always"!==o){const t=T_(e.wordSeparators);if(r&&d.column>1&&0===t.get(f.charCodeAt(d.column-2)))return null;if(!r&&d.column>2&&0===t.get(f.charCodeAt(d.column-3)))return null}t.forceTokenization(d.lineNumber);const g=t.getLineTokens(d.lineNumber);let m=!1;try{m=Pf.shouldAutoClosePair(a,g,r?d.column:d.column-1)}catch(e){Gr(e)}if(!m)return null}return c?a.close.substring(0,a.close.length-l.length):a.close}static _runAutoClosingOpenCharType(e,t,i,n,r,s,o){let a=[];for(let e=0,t=n.length;e<t;e++){const t=n[e];a[e]=new xk(t,r,s,o)}return new Kw(4,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return qw(t)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}static _isSurroundSelectionType(e,t,i,n){if(!Ck._shouldSurroundChar(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;const r=qw(n);for(let e=0,n=i.length;e<n;e++){const n=i[e];if(n.isEmpty())return!1;let s=!0;for(let e=n.startLineNumber;e<=n.endLineNumber;e++){const i=t.getLineContent(e),r=e===n.startLineNumber?n.startColumn-1:0,o=e===n.endLineNumber?n.endColumn-1:i.length,a=i.substring(r,o);if(/[^ \t]/.test(a)){s=!1;break}}if(s)return!1;if(r&&n.startLineNumber===n.endLineNumber&&n.startColumn+1===n.endColumn){if(qw(t.getValueInRange(n)))return!1}}return!0}static _runSurroundSelectionType(e,t,i,n,r){let s=[];for(let e=0,i=n.length;e<i;e++){const i=n[e],o=t.surroundingPairs[r];s[e]=new Sk(i,r,o)}return new Kw(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,i){return!(1!==i.length||!t.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,n,r){if(!t.electricChars.hasOwnProperty(r)||!n.isEmpty())return null;let s=n.getPosition();i.forceTokenization(s.lineNumber);let o,a=i.getLineTokens(s.lineNumber);try{o=Pf.onElectricCharacter(r,a,s.column)}catch(e){return Gr(e),null}if(!o)return null;if(o.matchOpenBracket){let n=(a.getLineContent()+r).lastIndexOf(o.matchOpenBracket)+1,l=i.findMatchingBracketUp(o.matchOpenBracket,{lineNumber:s.lineNumber,column:n});if(l){if(l.startLineNumber===s.lineNumber)return null;let n=mc(i.getLineContent(l.startLineNumber)),o=t.normalizeIndentation(n),a=i.getLineContent(s.lineNumber),c=i.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,h=o+a.substring(c-1,s.column-1)+r,u=new xo(s.lineNumber,1,s.lineNumber,s.column);const d=new ck(u,h);return new Kw(kk(h,e),[d],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,i,n,r,s){if(!n||ko.selectionsArrEqual(n,r))return null;let o=null;for(const e of r){if(!e.isEmpty())return null;const t=e.getPosition(),n=i.getValueInRange(new xo(t.lineNumber,t.column-1,t.lineNumber,t.column));if(null===o)o=n;else if(o!==n)return null}if(!o)return null;if(this._isAutoClosingOvertype(t,i,r,s,o)){const e=r.map((e=>new ck(new xo(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1)));return new Kw(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const a=this._getAutoClosingPairClose(t,i,r,o,!1);return null!==a?this._runAutoClosingOpenCharType(e,t,i,r,o,!1,a):null}static typeWithInterceptors(e,t,i,n,r,s,o){if(!e&&"\n"===o){let e=[];for(let t=0,s=r.length;t<s;t++)e[t]=Ck._enter(i,n,!1,r[t]);return new Kw(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(i,n,r)){let e=[],t=!1;for(let s=0,a=r.length;s<a;s++)if(e[s]=this._runAutoIndentType(i,n,r[s],o),!e[s]){t=!0;break}if(!t)return new Kw(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(i,n,r,s,o))return this._runAutoClosingOvertype(t,i,n,r,o);if(!e){const e=this._getAutoClosingPairClose(i,n,r,o,!0);if(e)return this._runAutoClosingOpenCharType(t,i,n,r,o,!0,e)}if(this._isSurroundSelectionType(i,n,r,o))return this._runSurroundSelectionType(t,i,n,r,o);if(!e&&this._isTypeInterceptorElectricChar(i,n,r)){const e=this._typeInterceptorElectricChar(t,i,n,r[0],o);if(e)return e}let a=[];for(let e=0,t=r.length;e<t;e++)a[e]=new ck(r[e],o);const l=kk(o,t);return new Kw(l,a,{shouldPushStackElementBefore:Ek(t,l),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,i,n,r){let s=[];for(let e=0,t=n.length;e<t;e++)s[e]=new ck(n[e],r);const o=kk(r,e);return new Kw(o,s,{shouldPushStackElementBefore:Ek(e,o),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,i){if(null===t||null===i)return[];let n=[];for(let r=0,s=i.length;r<s;r++){let s=i[r].positionLineNumber;if(1===s)n[r]=new hk(new xo(1,1,1,1),"\n");else{s--;let i=t.getLineMaxColumn(s);n[r]=this._enter(e,t,!1,new xo(s,i,s,i))}}return n}static lineInsertAfter(e,t,i){if(null===t||null===i)return[];let n=[];for(let r=0,s=i.length;r<s;r++){const s=i[r].positionLineNumber;let o=t.getLineMaxColumn(s);n[r]=this._enter(e,t,!1,new xo(s,o,s,o))}return n}static lineBreakInsert(e,t,i){let n=[];for(let r=0,s=i.length;r<s;r++)n[r]=this._enter(e,t,!0,i[r]);return n}}class xk extends uk{constructor(e,t,i,n){super(e,(i?t:"")+n,0,-n.length),this._openCharacter=t,this._closeCharacter=n,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new xo(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new xo(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}}function kk(e,t){return" "===e?5===t||6===t?6:5:4}function Ek(e,t){return!(!Lk(e)||Lk(t))||5!==e&&Tk(e)!==Tk(t)}function Tk(e){return 6===e||5===e?"space":e}function Lk(e){return 4===e||5===e||6===e}var Nk;!function(e){e.editorSimpleInput=new iv("editorSimpleInput",!1,!0),e.editorTextFocus=new iv("editorTextFocus",!1,On(0,"Whether the editor text has focus (cursor is blinking)")),e.focus=new iv("editorFocus",!1,On(0,"Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),e.textInputFocus=new iv("textInputFocus",!1,On(0,"Whether an editor or a rich text input has focus (cursor is blinking)")),e.readOnly=new iv("editorReadonly",!1,On(0,"Whether the editor is read only")),e.inDiffEditor=new iv("inDiffEditor",!1,On(0,"Whether the context is a diff editor")),e.columnSelection=new iv("editorColumnSelection",!1,On(0,"Whether `editor.columnSelection` is enabled")),e.writable=e.readOnly.toNegated(),e.hasNonEmptySelection=new iv("editorHasSelection",!1,On(0,"Whether the editor has text selected")),e.hasOnlyEmptySelection=e.hasNonEmptySelection.toNegated(),e.hasMultipleSelections=new iv("editorHasMultipleSelections",!1,On(0,"Whether the editor has multiple selections")),e.hasSingleSelection=e.hasMultipleSelections.toNegated(),e.tabMovesFocus=new iv("editorTabMovesFocus",!1,On(0,"Whether `Tab` will move focus out of the editor")),e.tabDoesNotMoveFocus=e.tabMovesFocus.toNegated(),e.isInWalkThroughSnippet=new iv("isInEmbeddedEditor",!1,!0),e.canUndo=new iv("canUndo",!1,!0),e.canRedo=new iv("canRedo",!1,!0),e.hoverVisible=new iv("editorHoverVisible",!1,On(0,"Whether the editor hover is visible")),e.inCompositeEditor=new iv("inCompositeEditor",void 0,On(0,"Whether the editor is part of a larger editor (e.g. notebooks)")),e.notInCompositeEditor=e.inCompositeEditor.toNegated(),e.languageId=new iv("editorLangId","",On(0,"The language identifier of the editor")),e.hasCompletionItemProvider=new iv("editorHasCompletionItemProvider",!1,On(0,"Whether the editor has a completion item provider")),e.hasCodeActionsProvider=new iv("editorHasCodeActionsProvider",!1,On(0,"Whether the editor has a code actions provider")),e.hasCodeLensProvider=new iv("editorHasCodeLensProvider",!1,On(0,"Whether the editor has a code lens provider")),e.hasDefinitionProvider=new iv("editorHasDefinitionProvider",!1,On(0,"Whether the editor has a definition provider")),e.hasDeclarationProvider=new iv("editorHasDeclarationProvider",!1,On(0,"Whether the editor has a declaration provider")),e.hasImplementationProvider=new iv("editorHasImplementationProvider",!1,On(0,"Whether the editor has an implementation provider")),e.hasTypeDefinitionProvider=new iv("editorHasTypeDefinitionProvider",!1,On(0,"Whether the editor has a type definition provider")),e.hasHoverProvider=new iv("editorHasHoverProvider",!1,On(0,"Whether the editor has a hover provider")),e.hasDocumentHighlightProvider=new iv("editorHasDocumentHighlightProvider",!1,On(0,"Whether the editor has a document highlight provider")),e.hasDocumentSymbolProvider=new iv("editorHasDocumentSymbolProvider",!1,On(0,"Whether the editor has a document symbol provider")),e.hasReferenceProvider=new iv("editorHasReferenceProvider",!1,On(0,"Whether the editor has a reference provider")),e.hasRenameProvider=new iv("editorHasRenameProvider",!1,On(0,"Whether the editor has a rename provider")),e.hasSignatureHelpProvider=new iv("editorHasSignatureHelpProvider",!1,On(0,"Whether the editor has a signature help provider")),e.hasInlayHintsProvider=new iv("editorHasInlayHintsProvider",!1,On(0,"Whether the editor has an inline hints provider")),e.hasDocumentFormattingProvider=new iv("editorHasDocumentFormattingProvider",!1,On(0,"Whether the editor has a document formatting provider")),e.hasDocumentSelectionFormattingProvider=new iv("editorHasDocumentSelectionFormattingProvider",!1,On(0,"Whether the editor has a document selection formatting provider")),e.hasMultipleDocumentFormattingProvider=new iv("editorHasMultipleDocumentFormattingProvider",!1,On(0,"Whether the editor has multiple document formatting providers")),e.hasMultipleDocumentSelectionFormattingProvider=new iv("editorHasMultipleDocumentSelectionFormattingProvider",!1,On(0,"Whether the editor has multiple document selection formatting providers"))}(Nk||(Nk={}));class Mk extends Lv{runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditorCommand(n,i||{})}}var Ok,Dk,Ik;!function(e){e.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(e){if(!Mh(e))return!1;const t=e;return!!Nh(t.to)&&(!(!Ih(t.by)&&!Nh(t.by))&&(!(!Ih(t.value)&&!Oh(t.value))&&!(!Ih(t.revealCursor)&&!Dh(t.revealCursor))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Down:"down"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"},e.parse=function(t){let i,n;switch(t.to){case e.RawDirection.Up:i=1;break;case e.RawDirection.Down:i=2;break;default:return null}switch(t.by){case e.RawUnit.Line:n=1;break;case e.RawUnit.WrappedLine:n=2;break;case e.RawUnit.Page:n=3;break;case e.RawUnit.HalfPage:n=4;break;default:n=2}return{direction:i,unit:n,value:Math.floor(t.value||1),revealCursor:!!t.revealCursor,select:!!t.select}}}(Ok||(Ok={})),function(e){e.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(e){if(!Mh(e))return!1;const t=e;return!(!Oh(t.lineNumber)&&!Nh(t.lineNumber))&&!(!Ih(t.at)&&!Nh(t.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(Dk||(Dk={}));class Ak{constructor(e){e.addImplementation(1e4,"code-editor",((e,t)=>{const i=e.get(ba).getFocusedCodeEditor();return!(!i||!i.hasTextFocus())&&this._runEditorCommand(e,i,t)})),e.addImplementation(1e3,"generic-dom-input-textarea",((e,t)=>{const i=document.activeElement;return!!(i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0)&&(this.runDOMCommand(),!0)})),e.addImplementation(0,"generic-dom",((e,t)=>{const i=e.get(ba).getActiveCodeEditor();return!!i&&(i.focus(),this._runEditorCommand(e,i,t))}))}_runEditorCommand(e,t,i){const n=this.runEditorCommand(e,t,i);return n||!0}}!function(e){class t extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[bk.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),e.revealPrimaryCursor(t.source,!0)}}e.MoveTo=Mv(new t({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=Mv(new t({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class i extends Mk{runCoreEditorCommand(e,t){e.model.pushStackElement();const i=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);e.setCursorStates(t.source,3,i.viewStates.map((e=>Gw.fromViewState(e)))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:i.fromLineNumber,fromViewVisualColumn:i.fromVisualColumn,toViewLineNumber:i.toLineNumber,toViewVisualColumn:i.toVisualColumn}),i.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source)}}e.ColumnSelect=Mv(new class extends i{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(e,t,i,n){const r=e.model.validatePosition(n.position),s=e.coordinatesConverter.validateViewPosition(new Co(n.viewPosition.lineNumber,n.viewPosition.column),r);let o=n.doColumnSelect?i.fromViewLineNumber:s.lineNumber,a=n.doColumnSelect?i.fromViewVisualColumn:n.mouseColumn-1;return lk.columnSelect(e.cursorConfig,e,o,a,s.lineNumber,n.mouseColumn-1)}}),e.CursorColumnSelectLeft=Mv(new class extends i{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,n){return lk.columnSelectLeft(e.cursorConfig,e,i)}}),e.CursorColumnSelectRight=Mv(new class extends i{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,n){return lk.columnSelectRight(e.cursorConfig,e,i)}});class n extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,n){return lk.columnSelectUp(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectUp=Mv(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=Mv(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:3595,linux:{primary:0}}}));class r extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,n){return lk.columnSelectDown(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectDown=Mv(new r({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=Mv(new r({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends Mk{constructor(){super({id:"cursorMove",precondition:void 0,description:vk.description})}runCoreEditorCommand(e,t){const i=vk.parse(t);i&&this._runCursorMove(e,t.source,i)}_runCursorMove(e,t,i){e.model.pushStackElement(),e.setCursorStates(t,3,s._move(e,e.getCursorStates(),i)),e.revealPrimaryCursor(t,!0)}static _move(e,t,i){const n=i.select,r=i.value;switch(i.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return bk.simpleMove(e,t,i.direction,n,r,i.unit);case 11:case 13:case 12:case 14:return bk.viewportMove(e,t,i.direction,n,r);default:return null}}}e.CursorMoveImpl=s,e.CursorMove=Mv(new s);class o extends Mk{constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,t){let i=this._staticArgs;-1===this._staticArgs.value&&(i={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,bk.simpleMove(e,e.getCursorStates(),i.direction,i.select,i.value,i.unit)),e.revealPrimaryCursor(t.source,!0)}}e.CursorLeft=Mv(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=Mv(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:1039}})),e.CursorRight=Mv(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=Mv(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:1041}})),e.CursorUp=Mv(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=Mv(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=Mv(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:11}})),e.CursorPageUpSelect=Mv(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:1035}})),e.CursorDown=Mv(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=Mv(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=Mv(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:12}})),e.CursorPageDownSelect=Mv(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:1036}})),e.CreateCursor=Mv(new class extends Mk{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(e,t){let i;i=t.wholeLine?bk.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):bk.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);const n=e.getCursorStates();if(n.length>1){const r=i.modelState?i.modelState.position:null,s=i.viewState?i.viewState.position:null;for(let i=0,o=n.length;i<o;i++){const o=n[i];if((!r||o.modelState.selection.containsPosition(r))&&(!s||o.viewState.selection.containsPosition(s)))return n.splice(i,1),e.model.pushStackElement(),void e.setCursorStates(t.source,3,n)}}n.push(i),e.model.pushStackElement(),e.setCursorStates(t.source,3,n)}}),e.LastCursorMoveToSelect=Mv(new class extends Mk{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(e,t){const i=e.getLastAddedCursorIndex(),n=e.getCursorStates(),r=n.slice(0);r[i]=bk.moveTo(e,n[i],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}});class a extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,bk.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorHome=Mv(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=Mv(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],r=n.modelState.position.lineNumber;t[i]=Gw.fromModelState(n.modelState.move(this._inSelectionMode,r,1,0))}return t}}e.CursorLineStart=Mv(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=Mv(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,bk.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealPrimaryCursor(t.source,!0)}}e.CursorEnd=Mv(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:Nk.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:On(0,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=Mv(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:Nk.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:On(0,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e,t){const i=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],s=r.modelState.position.lineNumber,o=e.model.getLineMaxColumn(s);i[n]=Gw.fromModelState(r.modelState.move(this._inSelectionMode,s,o,0))}return i}}e.CursorLineEnd=Mv(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=Mv(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,bk.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorTop=Mv(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=Mv(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:3086,mac:{primary:3088}}}));class d extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,bk.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorBottom=Mv(new d({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=Mv(new d({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Mk{constructor(){super({id:"editorScroll",precondition:void 0,description:Ok.description})}runCoreEditorCommand(e,t){const i=Ok.parse(t);i&&this._runEditorScroll(e,t.source,i)}_runEditorScroll(e,t,i){const n=this._computeDesiredScrollTop(e,i);if(i.revealCursor){const r=e.getCompletelyVisibleViewRangeAtScrollTop(n);e.setCursorStates(t,3,[bk.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),r,i.select)])}e.setScrollTop(n,0)}_computeDesiredScrollTop(e,t){if(1===t.unit){const i=e.getCompletelyVisibleViewRange(),n=e.coordinatesConverter.convertViewRangeToModelRange(i);let r;r=1===t.direction?Math.max(1,n.startLineNumber-t.value):Math.min(e.model.getLineCount(),n.startLineNumber+t.value);const s=e.coordinatesConverter.convertModelPositionToViewPosition(new Co(r,1));return e.getVerticalOffsetForLineNumber(s.lineNumber)}let i;i=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;const n=(1===t.direction?-1:1)*i;return e.getScrollTop()+n*e.cursorConfig.lineHeight}}e.EditorScrollImpl=f,e.EditorScroll=Mv(new f),e.ScrollLineUp=Mv(new class extends Mk{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(t,i){e.EditorScroll._runEditorScroll(t,i.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageUp=Mv(new class extends Mk{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(t,i){e.EditorScroll._runEditorScroll(t,i.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),e.ScrollLineDown=Mv(new class extends Mk{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(t,i){e.EditorScroll._runEditorScroll(t,i.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageDown=Mv(new class extends Mk{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(t,i){e.EditorScroll._runEditorScroll(t,i.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class p extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[bk.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),e.revealPrimaryCursor(t.source,!0)}}e.WordSelect=Mv(new p({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=Mv(new p({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=Mv(new class extends Mk{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(e,t){const i=e.getLastAddedCursorIndex(),n=e.getCursorStates(),r=n.slice(0),s=n[i];r[i]=bk.word(e,s,s.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}});class g extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[bk.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),e.revealPrimaryCursor(t.source,!1)}}e.LineSelect=Mv(new g({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=Mv(new g({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class m extends Mk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){const i=e.getLastAddedCursorIndex(),n=e.getCursorStates(),r=n.slice(0);r[i]=bk.line(e,n[i],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}}e.LastCursorLineSelect=Mv(new m({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=Mv(new m({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.ExpandLineSelection=Mv(new class extends Mk{constructor(){super({id:"expandLineSelection",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:2090}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,bk.expandLineSelection(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}}),e.CancelSelection=Mv(new class extends Mk{constructor(){super({id:"cancelSelection",precondition:Nk.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[bk.cancelSelection(e,e.getPrimaryCursorState())]),e.revealPrimaryCursor(t.source,!0)}}),e.RemoveSecondaryCursors=Mv(new class extends Mk{constructor(){super({id:"removeSecondaryCursors",precondition:Nk.hasMultipleSelections,kbOpts:{weight:1,kbExpr:Nk.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){var i;e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealPrimaryCursor(t.source,!0),i=On(0,"Removed secondary cursors"),wb&&(Xn?Eb(i):xb.textContent!==i?(ol(kb),Tb(xb,i)):(ol(xb),Tb(kb,i)))}}),e.RevealLine=Mv(new class extends Mk{constructor(){super({id:"revealLine",precondition:void 0,description:Dk.description})}runCoreEditorCommand(e,t){const i=t,n=i.lineNumber||0;let r="number"==typeof n?n+1:parseInt(n)+1;r<1&&(r=1);const s=e.model.getLineCount();r>s&&(r=s);const o=new xo(r,1,r,e.model.getLineMaxColumn(r));let a=0;if(i.at)switch(i.at){case Dk.RawAtArgument.Top:a=3;break;case Dk.RawAtArgument.Center:a=1;break;case Dk.RawAtArgument.Bottom:a=4}const l=e.coordinatesConverter.convertModelRangeToViewRange(o);e.revealRange(t.source,!1,l,a,0)}}),e.SelectAll=new class extends Ak{constructor(){super(Fv)}runDOMCommand(){Sa&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditorCommand(n,i)}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[bk.selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=Mv(new class extends Mk{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[Gw.fromModelSelection(t.selection)])}})}(Ik||(Ik={}));const Pk=Fb.and(Nk.textInputFocus,Nk.columnSelection);function Rk(e,t){Am.registerKeybindingRule({id:e,primary:t,when:Pk,weight:1})}function Bk(e){return e.register(),e}var Fk,Wk;Rk(Ik.CursorColumnSelectLeft.id,1039),Rk(Ik.CursorColumnSelectRight.id,1041),Rk(Ik.CursorColumnSelectUp.id,1040),Rk(Ik.CursorColumnSelectPageUp.id,1035),Rk(Ik.CursorColumnSelectDown.id,1042),Rk(Ik.CursorColumnSelectPageDown.id,1036),function(e){class t extends Lv{runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditingCommand(t,n,i||{})}}e.CoreEditingCommand=t,e.LineBreakInsert=Mv(new class extends t{constructor(){super({id:"lineBreakInsert",precondition:Nk.writable,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,Ck.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection))))}}),e.Outdent=Mv(new class extends t{constructor(){super({id:"outdent",precondition:Nk.writable,kbOpts:{weight:0,kbExpr:Fb.and(Nk.editorTextFocus,Nk.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,Ck.outdent(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.Tab=Mv(new class extends t{constructor(){super({id:"tab",precondition:Nk.writable,kbOpts:{weight:0,kbExpr:Fb.and(Nk.editorTextFocus,Nk.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,Ck.tab(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.DeleteLeft=Mv(new class extends t{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,t,i){const[n,r]=gk.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)),t.getCursorAutoClosedCharacters());n&&e.pushUndoStop(),e.executeCommands(this.id,r),t.setPrevEditOperationType(2)}}),e.DeleteRight=Mv(new class extends t{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:Nk.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,t,i){const[n,r]=gk.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)));n&&e.pushUndoStop(),e.executeCommands(this.id,r),t.setPrevEditOperationType(3)}}),e.Undo=new class extends Ak{constructor(){super(Rv)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(78))return t.getModel().undo()}},e.Redo=new class extends Ak{constructor(){super(Bv)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(78))return t.getModel().redo()}}}(Fk||(Fk={}));class Vk extends kv{constructor(e,t,i){super({id:e,precondition:void 0,description:i}),this._handlerId=t}runCommand(e,t){const i=e.get(ba).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function zk(e,t){Bk(new Vk("default:"+e,e)),Bk(new Vk(e,e,t))}zk("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),zk("replacePreviousChar"),zk("compositionType"),zk("compositionStart"),zk("compositionEnd"),zk("paste"),zk("cut");class Hk{constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Ik.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Co(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(67)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(67)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=Qn&&t.get(94),n=t.get(16);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):2===e.mouseDownCount?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){Ik.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){Ik.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,i){e=this._validateViewColumn(e),Ik.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),Ik.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){Ik.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){Ik.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){Ik.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){Ik.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){Ik.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){Ik.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){Ik.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){Ik.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){Ik.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class jk{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return jk.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new Uk(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class Uk{constructor(e,t,i,n,r,s){this.element=e,this.type=t,this.mouseColumn=i,this.position=n,this.range=r,this.detail=s}toString(){return eS.toString(this)}}class Gk{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(0===this.getCount())return null;const i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i){const i=t-e+1;return this._rendLineNumberStart-=i,null}if(e>n)return null;let r=0,s=0;for(let o=i;o<=n;o++){const i=o-this._rendLineNumberStart;e<=o&&o<=t&&(0===s?(r=i,s=1):s++)}if(e<i){let n=0;n=t<i?t-e+1:i-e,this._rendLineNumberStart-=n}return this._lines.splice(r,s)}onLinesChanged(e,t){if(0===this.getCount())return!1;const i=this.getStartLineNumber(),n=this.getEndLineNumber();let r=!1;for(let s=e;s<=t;s++)s>=i&&s<=n&&(this._lines[s-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(0===this.getCount())return null;const i=t-e+1,n=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>r)return null;if(i+e>r){return this._lines.splice(e-this._rendLineNumberStart,r-e+1)}const s=[];for(let e=0;e<i;e++)s[e]=this._createLine();const o=e-this._rendLineNumberStart,a=this._lines.slice(0,o),l=this._lines.slice(o,this._lines.length-i),c=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=a.concat(s).concat(l),c}onTokensChanged(e){if(0===this.getCount())return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let n=!1;for(let r=0,s=e.length;r<s;r++){const s=e[r];if(s.toLineNumber<t||s.fromLineNumber>i)continue;const o=Math.max(t,s.fromLineNumber),a=Math.min(i,s.toLineNumber);for(let e=o;e<=a;e++){const t=e-this._rendLineNumberStart;this._lines[t].onTokensChanged(),n=!0}}return n}}class Kk{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new Gk((()=>this._host.createVisibleLine()))}_createDomNode(){const e=Zv(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(128)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,i=t.length;e<i;e++){const i=t[e].getDomNode();i&&this.domNode.domNode.removeChild(i)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,i=t.length;e<i;e++){const i=t[e].getDomNode();i&&this.domNode.domNode.removeChild(i)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new $k(this.domNode.domNode,this._host,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}class $k{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,n){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||i<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=i-t+1,r.lines=[];for(let e=t;e<=i;e++)r.lines[e-t]=this.host.createVisibleLine();return this._finishRendering(r,!0,n),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(i-r.rendLineNumberStart,r.linesLength-1),n,t),r.rendLineNumberStart>t){const e=t,s=Math.min(i,r.rendLineNumberStart-1);e<=s&&(this._insertLinesBefore(r,e,s,n,t),r.linesLength+=s-e+1)}else if(r.rendLineNumberStart<t){const e=Math.min(r.linesLength,t-r.rendLineNumberStart);e>0&&(this._removeLinesBefore(r,e),r.linesLength-=e)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<i){const e=r.rendLineNumberStart+r.linesLength,s=i;e<=s&&(this._insertLinesAfter(r,e,s,n,t),r.linesLength+=s-e+1)}else if(r.rendLineNumberStart+r.linesLength-1>i){const e=Math.max(0,i-r.rendLineNumberStart+1),t=r.linesLength-1-e+1;t>0&&(this._removeLinesAfter(r,t),r.linesLength-=t)}return this._finishRendering(r,!1,n),r}_renderUntouchedLines(e,t,i,n,r){const s=e.rendLineNumberStart,o=e.lines;for(let e=t;e<=i;e++){const t=s+e;o[e].layoutLine(t,n[t-r])}}_insertLinesBefore(e,t,i,n,r){const s=[];let o=0;for(let e=t;e<=i;e++)s[o++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const t=e.lines[i].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,r){const s=[];let o=0;for(let e=t;e<=i;e++)s[o++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let n=0;n<t;n++){const t=e.lines[i+n].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){$k._ttPolicy&&(i=$k._ttPolicy.createHTML(i));const r=this.domNode.lastChild;t||!r?this.domNode.innerHTML=i:r.insertAdjacentHTML("afterend",i);let s=this.domNode.lastChild;for(let t=e.linesLength-1;t>=0;t--){const i=e.lines[t];n[t]&&(i.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const n=document.createElement("div");$k._ttPolicy&&(t=$k._ttPolicy.createHTML(t)),n.innerHTML=t;for(let t=0;t<e.linesLength;t++){const r=e.lines[t];if(i[t]){const e=n.firstChild,t=r.getDomNode();t.parentNode.replaceChild(e,t),r.setDomNode(e)}}}_finishRendering(e,t,i){const n=$k._sb,r=e.linesLength,s=e.lines,o=e.rendLineNumberStart,a=[];{n.reset();let l=!1;for(let e=0;e<r;e++){const t=s[e];a[e]=!1;if(t.getDomNode())continue;t.renderLine(e+o,i[e],this.viewportData,n)&&(a[e]=!0,l=!0)}l&&this._finishRenderingNewLines(e,t,n.build(),a)}{n.reset();let t=!1;const l=[];for(let e=0;e<r;e++){const r=s[e];if(l[e]=!1,a[e])continue;r.renderLine(e+o,i[e],this.viewportData,n)&&(l[e]=!0,t=!0)}t&&this._finishRenderingInvalidLines(e,n.build(),l)}}}$k._ttPolicy=null===(Wk=window.trustedTypes)||void 0===Wk?void 0:Wk.createPolicy("editorViewLayer",{createHTML:e=>e}),$k._sb=ff(1e5);class qk extends uy{constructor(e){super(e),this._visibleLines=new Kk(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new Zk(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){this._visibleLines.getVisibleLine(n).onConfigurationChanged(e)}return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter((e=>e.shouldRender()));for(let i=0,n=t.length;i<n;i++){const n=t[i];n.prepareRender(e),n.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class Zk{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(56),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Zv(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(56)}renderLine(e,t,i,n){let r="";for(let t=0,n=this._dynamicOverlays.length;t<n;t++){r+=this._dynamicOverlays[t].render(i.startLineNumber,e)}return this._renderedContent!==r&&(this._renderedContent=r,n.appendASCIIString('<div style="position:absolute;top:'),n.appendASCIIString(String(t)),n.appendASCIIString("px;width:100%;height:"),n.appendASCIIString(String(this._lineHeight)),n.appendASCIIString('px;">'),n.appendASCIIString(r),n.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class Yk extends qk{constructor(e){super(e);const t=this._context.configuration.options.get(128);this._contentWidth=t.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const t=this._context.configuration.options.get(128);return this._contentWidth=t.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class Xk extends qk{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(128);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),$v.applyFontInfo(this.domNode,t.get(40))}onConfigurationChanged(e){const t=this._context.configuration.options;$v.applyFontInfo(this.domNode,t.get(40));const i=t.get(128);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class Qk{constructor(e,t){this.top=e,this.left=t}}class Jk extends uy{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Zv(document.createElement("div")),dy.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Zv(document.createElement("div")),dy.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new eE(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i){this._widgets[e.getId()].setPosition(t,i),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const e=this._widgets[t];delete this._widgets[t];const i=e.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class eE{constructor(e,t,i){this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=Zv(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const n=this._context.configuration.options,r=n.get(128);this._fixedOverflowWidgets=n.get(34),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=n.get(56),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(56),e.hasChanged(128)){const e=t.get(128);this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const e=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(e.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(e.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(e))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,i,n,r){const s=e.top,o=s,a=t.top+this._lineHeight,l=s-n,c=o>=n,h=a,u=r.viewportHeight-a>=n;let d=e.left,f=t.left;return d+i>r.scrollLeft+r.viewportWidth&&(d=r.scrollLeft+r.viewportWidth-i),f+i>r.scrollLeft+r.viewportWidth&&(f=r.scrollLeft+r.viewportWidth-i),d<r.scrollLeft&&(d=r.scrollLeft),f<r.scrollLeft&&(f=r.scrollLeft),{fitsAbove:c,aboveTop:l,aboveLeft:d,fitsBelow:u,belowTop:h,belowLeft:f}}_layoutHorizontalSegmentInPage(e,t,i,n){const r=Math.max(0,t.left-n),s=Math.min(t.left+t.width+n,e.width);let o=t.left+i-kl.scrollX;if(o+n>s){const e=o-(s-n);o-=e,i-=e}if(o<r){const e=o-r;o-=e,i-=e}return[i,o]}_layoutBoxInPage(e,t,i,n,r){const s=e.top-n,o=t.top+this._lineHeight,a=xl(this._viewDomNode.domNode),l=a.top+s-kl.scrollY,c=a.top+o-kl.scrollY,h=wl(document.body),[u,d]=this._layoutHorizontalSegmentInPage(h,a,e.left-r.scrollLeft+this._contentLeft,i),[f,p]=this._layoutHorizontalSegmentInPage(h,a,t.left-r.scrollLeft+this._contentLeft,i),g=l>=22,m=c+n<=h.height-22;return this._fixedOverflowWidgets?{fitsAbove:g,aboveTop:Math.max(l,22),aboveLeft:d,fitsBelow:m,belowTop:c,belowLeft:p}:{fitsAbove:g,aboveTop:s,aboveLeft:u,fitsBelow:m,belowTop:o,belowLeft:f}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Qk(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||0===t.length)return[null,null];let i=t[0],n=t[0];for(const e of t)e.lineNumber<i.lineNumber&&(i=e),e.lineNumber>n.lineNumber&&(n=e);let r=1073741824;for(const e of i.ranges)e.left<r&&(r=e.left);let s=1073741824;for(const e of n.ranges)e.left<s&&(s=e.left);const o=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,a=new Qk(o,r),l=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop;return[a,new Qk(l,s)]}_prepareRenderWidget(e){const[t,i]=this._getTopAndBottomLeft(e);if(!t||!i)return null;if(-1===this._cachedDomNodeClientWidth||-1===this._cachedDomNodeClientHeight){let e=null;if("function"==typeof this._actual.beforeRender&&(e=tE(this._actual.beforeRender,this._actual)),e)this._cachedDomNodeClientWidth=e.width,this._cachedDomNodeClientHeight=e.height;else{const e=this.domNode.domNode;this._cachedDomNodeClientWidth=e.clientWidth,this._cachedDomNodeClientHeight=e.clientHeight}}let n;if(n=this.allowEditorOverflow?this._layoutBoxInPage(t,i,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):this._layoutBoxInViewport(t,i,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e),this._preference)for(let e=1;e<=2;e++)for(const i of this._preference)if(1===i){if(!n)return null;if(2===e||n.fitsAbove)return{coordinate:new Qk(n.aboveTop,n.aboveLeft),position:1}}else{if(2!==i)return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};if(!n)return null;if(2===e||n.fitsBelow)return{coordinate:new Qk(n.belowTop,n.belowLeft),position:2}}return null}onBeforeRender(e){this._viewRange&&this._preference&&(this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),void("function"==typeof this._actual.afterRender&&tE(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"==typeof this._actual.afterRender&&tE(this._actual.afterRender,this._actual,this._renderData.position)}}function tE(e,t,...i){try{return e.call(t,...i)}catch(e){return null}}let iE=!0;class nE extends CS{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(128);this._lineHeight=t.get(56),this._renderLineHighlight=t.get(83),this._renderLineHighlightOnlyWhenFocus=t.get(84),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new ko(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=iE?this._selections.slice(0,1):this._selections,i=t.map((e=>e.positionLineNumber));i.sort(((e,t)=>e-t)),gp(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const n=t.every((e=>e.isEmpty()));return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(128);return this._lineHeight=t.get(56),this._renderLineHighlight=t.get(83),this._renderLineHighlightOnlyWhenFocus=t.get(84),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}prepareRender(e){if(!this._shouldRenderThis())return void(this._renderData=null);const t=this._renderOne(e),i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._cursorLineNumbers.length;let s=0;const o=[];for(let e=i;e<=n;e++){const n=e-i;for(;s<r&&this._cursorLineNumbers[s]<e;)s++;s<r&&this._cursorLineNumbers[s]===e?o[n]=t:o[n]=""}this._renderData=o}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}}class rE extends nE{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class sE extends nE{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}pv(((e,t)=>{iE=!1;const i=e.getColor(Ix);if(i&&(t.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${i}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${i}; border: none; }`)),!i||i.isTransparent()||e.defines(Ax)){const i=e.getColor(Ax);i&&(iE=!0,t.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${i}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${i}; }`),"hc"===e.type&&(t.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}}));class oE extends CS{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let e=0,r=t.length;e<r;e++){const r=t[e];r.options.className&&(i[n++]=r)}i=i.sort(((e,t)=>{if(e.options.zIndex<t.options.zIndex)return-1;if(e.options.zIndex>t.options.zIndex)return 1;const i=e.options.className,n=t.options.className;return i<n?-1:i>n?1:xo.compareRangesUsingStarts(e.range,t.range)}));const r=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,o=[];for(let e=r;e<=s;e++){o[e-r]=""}this._renderWholeLineDecorations(e,i,o),this._renderNormalDecorations(e,i,o),this._renderResult=o}_renderWholeLineDecorations(e,t,i){const n=String(this._lineHeight),r=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let e=0,o=t.length;e<o;e++){const o=t[e];if(!o.options.isWholeLine)continue;const a='<div class="cdr '+o.options.className+'" style="left:0;width:100%;height:'+n+'px;"></div>',l=Math.max(o.range.startLineNumber,r),c=Math.min(o.range.endLineNumber,s);for(let e=l;e<=c;e++){i[e-r]+=a}}}_renderNormalDecorations(e,t,i){const n=String(this._lineHeight),r=e.visibleRange.startLineNumber;let s=null,o=!1,a=null;for(let l=0,c=t.length;l<c;l++){const c=t[l];if(c.options.isWholeLine)continue;const h=c.options.className,u=Boolean(c.options.showIfCollapsed);let d=c.range;u&&1===d.endColumn&&d.endLineNumber!==d.startLineNumber&&(d=new xo(d.startLineNumber,d.startColumn,d.endLineNumber-1,this._context.model.getLineMaxColumn(d.endLineNumber-1))),s===h&&o===u&&xo.areIntersectingOrTouching(a,d)?a=xo.plusRange(a,d):(null!==s&&this._renderNormalDecoration(e,a,s,o,n,r,i),s=h,o=u,a=d)}null!==s&&this._renderNormalDecoration(e,a,s,o,n,r,i)}_renderNormalDecoration(e,t,i,n,r,s,o){const a=e.linesVisibleRangesForRange(t,"findMatch"===i);if(a)for(let e=0,t=a.length;e<t;e++){const t=a[e];if(t.outsideRenderedLine)continue;const l=t.lineNumber-s;if(n&&1===t.ranges.length){const e=t.ranges[0];0===e.width&&(t.ranges[0]=new gy(e.left,this._typicalHalfwidthCharacterWidth))}for(let e=0,n=t.ranges.length;e<n;e++){const n=t.ranges[e],s='<div class="cdr '+i+'" style="left:'+String(n.left)+"px;width:"+String(n.width)+"px;height:"+r+'px;"></div>';o[l]+=s}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class aE extends as{onclick(e,t){this._register(cl(e,jl.CLICK,(e=>t(new za(e)))))}onmousedown(e,t){this._register(cl(e,jl.MOUSE_DOWN,(e=>t(new za(e)))))}onmouseover(e,t){this._register(cl(e,jl.MOUSE_OVER,(e=>t(new za(e)))))}onnonbubblingmouseout(e,t){this._register(dl(e,(e=>t(new za(e)))))}onkeydown(e,t){this._register(cl(e,jl.KEY_DOWN,(e=>t(new Ra(e)))))}onkeyup(e,t){this._register(cl(e,jl.KEY_UP,(e=>t(new Ra(e)))))}oninput(e,t){this._register(cl(e,jl.INPUT,t))}onblur(e,t){this._register(cl(e,jl.BLUR,t))}onfocus(e,t){this._register(cl(e,jl.FOCUS,t))}ignoreGesture(e){Jv.ignoreTarget(e)}}const lE=11;class cE extends aE{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",void 0!==e.top&&(this.bgDomNode.style.top="0px"),void 0!==e.left&&(this.bgDomNode.style.left="0px"),void 0!==e.bottom&&(this.bgDomNode.style.bottom="0px"),void 0!==e.right&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width="11px",this.domNode.style.height="11px",void 0!==e.top&&(this.domNode.style.top=e.top+"px"),void 0!==e.left&&(this.domNode.style.left=e.left+"px"),void 0!==e.bottom&&(this.domNode.style.bottom=e.bottom+"px"),void 0!==e.right&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new ty),this.onmousedown(this.bgDomNode,(e=>this._arrowMouseDown(e))),this.onmousedown(this.domNode,(e=>this._arrowMouseDown(e))),this._mousedownRepeatTimer=this._register(new Xa),this._mousedownScheduleRepeatTimer=this._register(new Ya)}_arrowMouseDown(e){this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet((()=>{this._mousedownRepeatTimer.cancelAndSet((()=>this._onActivate()),1e3/24)}),200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,ey,(e=>{}),(()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()})),e.preventDefault()}}class hE extends as{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Ya)}applyVisibilitySetting(e){return 2!==this._visibility&&(3===this._visibility||e)}setShouldBeVisible(e){const t=this.applyVisibilitySetting(e);this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet((()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)}),0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}class uE extends aE{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new hE(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new ty),this._shouldRender=!0,this.domNode=Zv(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,(e=>this._domNodeMouseDown(e)))}_createArrow(e){const t=this._register(new cE(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=Zv(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),"number"==typeof i&&this.slider.setWidth(i),"number"==typeof n&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,(e=>{e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,(()=>{})))})),this.onclick(this.slider.domNode,(e=>{e.leftButton&&e.stopPropagation()}))}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderMousePosition(e);i<=r&&r<=n?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,(()=>{}))):this._onMouseDown(e)}_onMouseDown(e){let t,i;if(e.target===this.domNode.domNode&&"number"==typeof e.browserEvent.offsetX&&"number"==typeof e.browserEvent.offsetY)t=e.browserEvent.offsetX,i=e.browserEvent.offsetY;else{const n=xl(this.domNode.domNode);t=e.posx-n.left,i=e.posy-n.top}const n=this._mouseDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,(()=>{})))}_sliderMouseDown(e,t){const i=this._sliderMousePosition(e),n=this._sliderOrthogonalMousePosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,ey,(e=>{const t=this._sliderOrthogonalMousePosition(e),s=Math.abs(t-n);if(Yn&&s>140)return void this._setDesiredScrollPositionNow(r.getScrollPosition());const o=this._sliderMousePosition(e)-i;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(o))}),(()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()})),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}class dE{constructor(e,t,i,n,r,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=r,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new dE(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t&&(this._visibleSize=t,this._refreshComputedValues(),!0)}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t&&(this._scrollSize=t,this._refreshComputedValues(),!0)}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t&&(this._scrollPosition=t,this._refreshComputedValues(),!0)}setScrollbarSize(e){this._scrollbarSize=e}static _computeValues(e,t,i,n,r){const s=Math.max(0,i-e),o=Math.max(0,s-2*t),a=n>0&&n>i;if(!a)return{computedAvailableSize:Math.round(s),computedIsNeeded:a,computedSliderSize:Math.round(o),computedSliderRatio:0,computedSliderPosition:0};const l=Math.round(Math.max(20,Math.floor(i*o/n))),c=(o-l)/(n-i),h=r*c;return{computedAvailableSize:Math.round(s),computedIsNeeded:a,computedSliderSize:Math.round(l),computedSliderRatio:c,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){const e=dE._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}const fE=Ju("scrollbar-button-left",ed.triangleLeft),pE=Ju("scrollbar-button-right",ed.triangleRight);class gE extends uE{constructor(e,t,i){const n=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new dE(t.horizontalHasArrows?t.arrowSize:0,2===t.horizontal?0:t.horizontalScrollbarSize,2===t.vertical?0:t.verticalScrollbarSize,n.width,n.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const e=(t.arrowSize-lE)/2,i=(t.horizontalScrollbarSize-lE)/2;this._createArrow({className:"scra",icon:fE,top:i,left:e,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ha(null,1,0))}),this._createArrow({className:"scra",icon:pE,top:i,left:void 0,bottom:void 0,right:e,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ha(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}}const mE=Ju("scrollbar-button-up",ed.triangleUp),bE=Ju("scrollbar-button-down",ed.triangleDown);class vE extends uE{constructor(e,t,i){const n=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new dE(t.verticalHasArrows?t.arrowSize:0,2===t.vertical?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const e=(t.arrowSize-lE)/2,i=(t.verticalScrollbarSize-lE)/2;this._createArrow({className:"scra",icon:mE,top:e,left:i,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ha(null,0,1))}),this._createArrow({className:"scra",icon:bE,top:void 0,left:i,bottom:e,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ha(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}}class yE{constructor(e,t,i,n,r,s){e|=0,t|=0,i|=0,n|=0,r|=0,s|=0,this.rawScrollLeft=i,this.rawScrollTop=s,e<0&&(e=0),i+e>t&&(i=t-e),i<0&&(i=0),n<0&&(n=0),s+n>r&&(s=r-n),s<0&&(s=0),this.width=e,this.scrollWidth=t,this.scrollLeft=i,this.height=n,this.scrollHeight=r,this.scrollTop=s}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new yE(void 0!==e.width?e.width:this.width,void 0!==e.scrollWidth?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,void 0!==e.height?e.height:this.height,void 0!==e.scrollHeight?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new yE(this.width,this.scrollWidth,void 0!==e.scrollLeft?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,void 0!==e.scrollTop?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,o=this.scrollHeight!==e.scrollHeight,a=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:r,heightChanged:s,scrollHeightChanged:o,scrollTopChanged:a}}}class _E extends as{constructor(e,t){super(),this._onScroll=this._register(new ms),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new yE(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const i=this._state.withScrollDimensions(e,t);this._setState(i,Boolean(this._smoothScrolling)),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(0===this._smoothScrollDuration)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:void 0===e.scrollLeft?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:void 0===e.scrollTop?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;n=t?new CE(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{const t=this._state.withScrollPosition(e);this._smoothScrolling=CE.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);return this._setState(t,!0),this._smoothScrolling?e.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))):void 0}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class wE{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function SE(e,t){const i=t-e;return function(t){return e+i*function(e){return 1-function(e){return Math.pow(e,3)}(1-e)}(t)}}class CE{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let n,r;return e<t?(n=e+.75*i,r=t-.75*i):(n=e-.75*i,r=t+.75*i),function(e,t,i){return function(n){return n<i?e(n/i):t((n-i)/(1-i))}}(SE(e,n),SE(r,t),.33)}return SE(e,t)}dispose(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const e=this.scrollLeft(t),i=this.scrollTop(t);return new wE(e,i,!1)}return new wE(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return CE.start(e,t,i)}static start(e,t,i){i+=10;const n=Date.now()-10;return new CE(e,t,n,i)}}class xE{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}class kE{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(-1===this._front&&-1===this._rear)return!1;let e=1,t=0,i=1,n=this._rear;for(;;){const r=n===this._front?e:Math.pow(2,-i);if(e-=r,t+=this._memory[n].score*r,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}return t<=.5}accept(e,t,i){const n=new xE(e,t,i);n.score=this._computeScore(n),-1===this._front&&-1===this._rear?(this._memory[0]=n,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=n)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;-1===this._front&&-1===this._rear||this._memory[this._rear];return this._isAlmostInt(e.deltaX)&&this._isAlmostInt(e.deltaY)||(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}kE.INSTANCE=new kE;class EE extends aE{constructor(e,t,i){super(),this._onScroll=this._register(new ms),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new ms),e.style.overflow="hidden",this._options=function(e){const t={lazyRender:void 0!==e.lazyRender&&e.lazyRender,className:void 0!==e.className?e.className:"",useShadows:void 0===e.useShadows||e.useShadows,handleMouseWheel:void 0===e.handleMouseWheel||e.handleMouseWheel,flipAxes:void 0!==e.flipAxes&&e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:void 0!==e.consumeMouseWheelIfScrollbarIsNeeded&&e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:void 0!==e.alwaysConsumeMouseWheel&&e.alwaysConsumeMouseWheel,scrollYToX:void 0!==e.scrollYToX&&e.scrollYToX,mouseWheelScrollSensitivity:void 0!==e.mouseWheelScrollSensitivity?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:void 0!==e.fastScrollSensitivity?e.fastScrollSensitivity:5,scrollPredominantAxis:void 0===e.scrollPredominantAxis||e.scrollPredominantAxis,mouseWheelSmoothScroll:void 0===e.mouseWheelSmoothScroll||e.mouseWheelSmoothScroll,arrowSize:void 0!==e.arrowSize?e.arrowSize:11,listenOnDomNode:void 0!==e.listenOnDomNode?e.listenOnDomNode:null,horizontal:void 0!==e.horizontal?e.horizontal:1,horizontalScrollbarSize:void 0!==e.horizontalScrollbarSize?e.horizontalScrollbarSize:10,horizontalSliderSize:void 0!==e.horizontalSliderSize?e.horizontalSliderSize:0,horizontalHasArrows:void 0!==e.horizontalHasArrows&&e.horizontalHasArrows,vertical:void 0!==e.vertical?e.vertical:1,verticalScrollbarSize:void 0!==e.verticalScrollbarSize?e.verticalScrollbarSize:10,verticalHasArrows:void 0!==e.verticalHasArrows&&e.verticalHasArrows,verticalSliderSize:void 0!==e.verticalSliderSize?e.verticalSliderSize:0,scrollByPage:void 0!==e.scrollByPage&&e.scrollByPage};t.horizontalSliderSize=void 0!==e.horizontalSliderSize?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=void 0!==e.verticalSliderSize?e.verticalSliderSize:t.verticalScrollbarSize,Xn&&(t.className+=" mac");return t}(t),this._scrollable=i,this._register(this._scrollable.onScroll((e=>{this._onWillScroll.fire(e),this._onDidScroll(e),this._onScroll.fire(e)})));const n={onMouseWheel:e=>this._onMouseWheel(e),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new vE(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new gE(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Zv(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Zv(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Zv(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,(e=>this._onMouseOver(e))),this.onnonbubblingmouseout(this._listenOnDomNode,(e=>this._onMouseOut(e))),this._hideTimeout=this._register(new Ya),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ns(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Xn&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){void 0!==e.handleMouseWheel&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),void 0!==e.mouseWheelScrollSensitivity&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),void 0!==e.fastScrollSensitivity&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),void 0!==e.scrollPredominantAxis&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),void 0!==e.horizontalScrollbarSize&&this._horizontalScrollbar.updateScrollbarSize(e.horizontalScrollbarSize),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ns(this._mouseWheelToDispose),e)){const e=e=>{this._onMouseWheel(new Ha(e))};this._mouseWheelToDispose.push(cl(this._listenOnDomNode,jl.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(e){const t=kE.INSTANCE;{const i=window.devicePixelRatio/va.INSTANCE.getZoomFactor();Yn||Qn?t.accept(Date.now(),e.deltaX/i,e.deltaY/i):t.accept(Date.now(),e.deltaX,e.deltaY)}let i=!1;if(e.deltaY||e.deltaX){let n=e.deltaY*this._options.mouseWheelScrollSensitivity,r=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(n)>=Math.abs(r)?r=0:n=0),this._options.flipAxes&&([n,r]=[r,n]);const s=!Xn&&e.browserEvent&&e.browserEvent.shiftKey;!this._options.scrollYToX&&!s||r||(r=n,n=0),e.browserEvent&&e.browserEvent.altKey&&(r*=this._options.fastScrollSensitivity,n*=this._options.fastScrollSensitivity);const o=this._scrollable.getFutureScrollPosition();let a={};if(n){const e=o.scrollTop-50*n;this._verticalScrollbar.writeScrollPosition(a,e)}if(r){const e=o.scrollLeft-50*r;this._horizontalScrollbar.writeScrollPosition(a,e)}if(a=this._scrollable.validateScrollPosition(a),o.scrollLeft!==a.scrollLeft||o.scrollTop!==a.scrollTop){this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(a):this._scrollable.setScrollPositionNow(a),i=!0}}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",r=t?" top":"",s=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${r}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet((()=>this._hide()),500)}}class TE extends EE{constructor(e,t){(t=t||{}).mouseWheelSmoothScroll=!1;const i=new _E(0,(e=>pl(e)));super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class LE extends EE{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class NE extends TE{constructor(e,t){super(e,t),this._element=e,this.onScroll((e=>{e.scrollTopChanged&&(this._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this._element.scrollLeft=e.scrollLeft)})),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}class ME extends uy{constructor(e,t,i,n){super(e);const r=this._context.configuration.options,s=r.get(90),o=r.get(64),a=r.get(32),l=r.get(93),c={listenOnDomNode:i.domNode,className:"editor-scrollable "+uv(e.theme.type),useShadows:!1,lazyRender:!0,vertical:s.vertical,horizontal:s.horizontal,verticalHasArrows:s.verticalHasArrows,horizontalHasArrows:s.horizontalHasArrows,verticalScrollbarSize:s.verticalScrollbarSize,verticalSliderSize:s.verticalSliderSize,horizontalScrollbarSize:s.horizontalScrollbarSize,horizontalSliderSize:s.horizontalSliderSize,handleMouseWheel:s.handleMouseWheel,alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel,arrowSize:s.arrowSize,mouseWheelScrollSensitivity:o,fastScrollSensitivity:a,scrollPredominantAxis:l,scrollByPage:s.scrollByPage};this.scrollbar=this._register(new LE(t.domNode,c,this._context.viewLayout.getScrollable())),dy.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=Zv(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const h=(e,t,i)=>{const n={};if(t){const t=e.scrollTop;t&&(n.scrollTop=this._context.viewLayout.getCurrentScrollTop()+t,e.scrollTop=0)}if(i){const t=e.scrollLeft;t&&(n.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+t,e.scrollLeft=0)}this._context.model.setScrollPosition(n,1)};this._register(cl(i.domNode,"scroll",(e=>h(i.domNode,!0,!0)))),this._register(cl(t.domNode,"scroll",(e=>h(t.domNode,!0,!1)))),this._register(cl(n.domNode,"scroll",(e=>h(n.domNode,!0,!1)))),this._register(cl(this.scrollbarDomNode.domNode,"scroll",(e=>h(this.scrollbarDomNode.domNode,!0,!1))))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(128);this.scrollbarDomNode.setLeft(t.contentLeft);"right"===e.get(62).side?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(90)||e.hasChanged(64)||e.hasChanged(32)){const e=this._context.configuration.options,t=e.get(90),i=e.get(64),n=e.get(32),r=e.get(93),s={handleMouseWheel:t.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:n,scrollPredominantAxis:r};this.scrollbar.updateOptions(s)}return e.hasChanged(128)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+uv(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class OE{constructor(e,t,i){this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(i)}}class DE extends CS{_render(e,t,i){const n=[];for(let i=e;i<=t;i++){n[i-e]=[]}if(0===i.length)return n;i.sort(((e,t)=>e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1));let r=null,s=0;for(let o=0,a=i.length;o<a;o++){const a=i[o],l=a.className;let c=Math.max(a.startLineNumber,e)-e;const h=Math.min(a.endLineNumber,t)-e;r===l?(c=Math.max(s+1,c),s=Math.max(s,h)):(r=l,s=h);for(let e=c;e<=s;e++)n[e].push(r)}return n}}class IE extends DE{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(128);this._lineHeight=t.get(56),this._glyphMargin=t.get(46),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(128);return this._lineHeight=t.get(56),this._glyphMargin=t.get(46),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let e=0,r=t.length;e<r;e++){const r=t[e],s=r.options.glyphMarginClassName;s&&(i[n++]=new OE(r.range.startLineNumber,r.range.endLineNumber,s))}return i}prepareRender(e){if(!this._glyphMargin)return void(this._renderResult=null);const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),r=this._lineHeight.toString(),s='" style="left:'+this._glyphMarginLeft.toString()+"px;width:"+this._glyphMarginWidth.toString()+"px;height:"+r+'px;"></div>',o=[];for(let e=t;e<=i;e++){const i=e-t,r=n[i];0===r.length?o[i]="":o[i]='<div class="cgmr codicon '+r.join(" ")+s}this._renderResult=o}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class AE extends CS{constructor(e){super(),this._context=e,this._primaryLineNumber=0;const t=this._context.configuration.options,i=t.get(129),n=t.get(40);this._lineHeight=t.get(56),this._spaceWidth=n.spaceWidth,this._enabled=t.get(81),this._activeIndentEnabled=t.get(49),this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(129),n=t.get(40);return this._lineHeight=t.get(56),this._spaceWidth=n.spaceWidth,this._enabled=t.get(81),this._activeIndentEnabled=t.get(49),this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){const t=e.selections[0],i=t.isEmpty()?t.positionLineNumber:0;return this._primaryLineNumber!==i&&(this._primaryLineNumber=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._enabled)return void(this._renderResult=null);const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,{indentSize:n}=this._context.model.getTextModelOptions(),r=n*this._spaceWidth,s=e.scrollWidth,o=this._lineHeight,a=this._context.model.getLinesIndentGuides(t,i);let l=0,c=0,h=0;if(this._activeIndentEnabled&&this._primaryLineNumber){const e=this._context.model.getActiveIndentGuide(this._primaryLineNumber,t,i);l=e.startLineNumber,c=e.endLineNumber,h=e.indent}const u=[];for(let n=t;n<=i;n++){const i=l<=n&&n<=c,d=n-t,f=a[d];let p="";if(f>=1){const t=e.visibleRangeForPosition(new Co(n,1));let a=t?t.left:0;for(let e=1;e<=f;e++){if(p+=`<div class="${i&&e===h?"cigra":"cigr"}" style="left:${a}px;height:${o}px;width:${r}px"></div>`,a+=r,a>s||this._maxIndentLeft>0&&a>this._maxIndentLeft)break}}u[d]=p}this._renderResult=u}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}pv(((e,t)=>{const i=e.getColor(Hx);i&&t.addRule(`.monaco-editor .lines-content .cigr { box-shadow: 1px 0 0 0 ${i} inset; }`);const n=e.getColor(jx)||i;n&&t.addRule(`.monaco-editor .lines-content .cigra { box-shadow: 1px 0 0 0 ${n} inset; }`)}));class PE{constructor(){this._currentVisibleRange=new xo(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class RE{constructor(e,t,i,n,r,s){this.lineNumber=e,this.startColumn=t,this.endColumn=i,this.startScrollTop=n,this.stopScrollTop=r,this.scrollType=s,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class BE{constructor(e,t,i,n){this.selections=e,this.startScrollTop=t,this.stopScrollTop=i,this.scrollType=n,this.type="selections";let r=e[0].startLineNumber,s=e[0].endLineNumber;for(let t=1,i=e.length;t<i;t++){const i=e[t];r=Math.min(r,i.startLineNumber),s=Math.max(s,i.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=s}}class FE extends uy{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Kk(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration,n=this._context.configuration.options,r=n.get(40),s=n.get(129);this._lineHeight=n.get(56),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=n.get(87),this._cursorSurroundingLines=n.get(23),this._cursorSurroundingLinesStyle=n.get(24),this._canUseLayerHinting=!n.get(26),this._viewLineOptions=new Cy(i,this._context.theme.type),dy.write(this.domNode,7),this.domNode.setClassName("view-lines monaco-mouse-cursor-text"),$v.applyFontInfo(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Qa((()=>{this._updateLineWidthsSlow()}),200),this._asyncCheckMonospaceFontAssumptions=new Qa((()=>{this._checkMonospaceFontAssumptions()}),2e3),this._lastRenderedData=new PE,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new xy(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(129)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(40),n=t.get(129);return this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(87),this._cursorSurroundingLines=t.get(23),this._cursorSurroundingLinesStyle=t.get(24),this._canUseLayerHinting=!t.get(26),$v.applyFontInfo(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(128)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new Cy(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const e=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let t=e;t<=i;t++){this._visibleLines.getVisibleLine(t).onOptionsChanged(this._viewLineOptions)}return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=!1;for(let e=t;e<=i;e++)n=this._visibleLines.getVisibleLine(e).onSelectionChanged()||n;return n}onDecorationsChanged(e){{const e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let i=e;i<=t;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(-1===t)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new RE(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new BE(e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const n=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(i,n),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(null===i)return null;const n=this._getLineNumberFor(i);if(-1===n)return null;if(n<1||n>this._context.model.getLineCount())return null;if(1===this._context.model.getLineMaxColumn(n))return new Co(n,1);const r=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();if(n<r||n>s)return null;let o=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(n,e,t);const a=this._context.model.getLineMinColumn(n);return o<a&&(o=a),new Co(n,o)}_getViewLineDomNode(e){for(;e&&1===e.nodeType;){if(e.className===xy.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){if(e===this._visibleLines.getVisibleLine(n).getDomNode())return n}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();return e<t||e>i?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,n=xo.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;let r=[],s=0;const o=new Sy(this.domNode.domNode,this._textRangeRestingSpot);let a=0;t&&(a=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Co(n.startLineNumber,1)).lineNumber);const l=this._visibleLines.getStartLineNumber(),c=this._visibleLines.getEndLineNumber();for(let e=n.startLineNumber;e<=n.endLineNumber;e++){if(e<l||e>c)continue;const h=e===n.startLineNumber?n.startColumn:1,u=e===n.endLineNumber?n.endColumn:this._context.model.getLineMaxColumn(e),d=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(h,u,o);if(d){if(t&&e<i){const t=a;a=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Co(e+1,1)).lineNumber,t!==a&&(d.ranges[d.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[s++]=new py(d.outsideRenderedLine,e,d.ranges)}}return 0===s?null:r}_visibleRangesForLineRange(e,t,i){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(t,i,new Sy(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new my(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=1,r=!0;for(let s=t;s<=i;s++){const t=this._visibleLines.getVisibleLine(s);!e||t.getWidthIsFast()?n=Math.max(n,t.getWidth()):r=!1}return r&&1===t&&i===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=i;r<=n;r++){const i=this._visibleLines.getVisibleLine(r);if(i.needsMonospaceFontCheck()){const n=i.getWidth();n>t&&(t=n,e=r)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let e=i;e<=n;e++){this._visibleLines.getVisibleLine(e).onMonospaceAssumptionsInvalidated()}}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const e=this._computeScrollLeftToReveal(t);e&&(this._isViewportWrapping||this._ensureMaxLineWidth(e.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Qn&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let i=e;i<=t;i++){if(this._visibleLines.getVisibleLine(i).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,r){const s=e.top,o=e.height,a=s+o;let l,c,h;if(n&&n.length>0){let e=n[0].startLineNumber,t=n[0].endLineNumber;for(let i=1,r=n.length;i<r;i++){const r=n[i];e=Math.min(e,r.startLineNumber),t=Math.max(t,r.endLineNumber)}l=!1,c=this._context.viewLayout.getVerticalOffsetForLineNumber(e),h=this._context.viewLayout.getVerticalOffsetForLineNumber(t)+this._lineHeight}else{if(!i)return-1;l=!0,c=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight}if(!("mouse"===t&&"default"===this._cursorSurroundingLinesStyle)){const e=Math.min(o/this._lineHeight/2,this._cursorSurroundingLines);c-=e*this._lineHeight,h+=Math.max(0,e-1)*this._lineHeight}let u;if(0!==r&&4!==r||(h+=this._lineHeight),h-c>o){if(!l)return-1;u=c}else if(5===r||6===r)if(6===r&&s<=c&&h<=a)u=s;else{const e=c-Math.max(5*this._lineHeight,.2*o),t=h-o;u=Math.max(t,e)}else if(1===r||2===r)if(2===r&&s<=c&&h<=a)u=s;else{const e=(c+h)/2;u=Math.max(0,e-o/2)}else u=this._computeMinimumScrolling(s,a,c,h,3===r,4===r);return u}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=t.left,n=i+t.width;let r=1073741824,s=0;if("range"===e.type){const t=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!t)return null;for(const e of t.ranges)r=Math.min(r,e.left),s=Math.max(s,e.left+e.width)}else for(const t of e.selections){if(t.startLineNumber!==t.endLineNumber)return null;const e=this._visibleRangesForLineRange(t.startLineNumber,t.startColumn,t.endColumn);if(!e)return null;for(const t of e.ranges)r=Math.min(r,t.left),s=Math.max(s,t.left+t.width)}if(r=Math.max(0,r-FE.HORIZONTAL_EXTRA_PX),s+=this._revealHorizontalRightPadding,"selections"===e.type&&s-r>t.width)return null;return{scrollLeft:this._computeMinimumScrolling(i,n,r,s),maxHorizontalOffset:s}}_computeMinimumScrolling(e,t,i,n,r,s){r=!!r,s=!!s;const o=(t|=0)-(e|=0);return(n|=0)-(i|=0)<o?r?i:s?Math.max(0,n-o):i<e?i:n>t?Math.max(0,n-o):e:i}}FE.HORIZONTAL_EXTRA_PX=30;class WE extends DE{constructor(e){super(),this._context=e;const t=this._context.configuration.options.get(128);this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options.get(128);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let e=0,r=t.length;e<r;e++){const r=t[e],s=r.options.linesDecorationsClassName;s&&(i[n++]=new OE(r.range.startLineNumber,r.range.endLineNumber,s));const o=r.options.firstLineDecorationClassName;o&&(i[n++]=new OE(r.range.startLineNumber,r.range.startLineNumber,o))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),r='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',s=[];for(let e=t;e<=i;e++){const i=e-t,o=n[i];let a="";for(let e=0,t=o.length;e<t;e++)a+='<div class="cldr '+o[e]+r;s[i]=a}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class VE extends DE{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let e=0,r=t.length;e<r;e++){const r=t[e],s=r.options.marginClassName;s&&(i[n++]=new OE(r.range.startLineNumber,r.range.endLineNumber,s))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),r=[];for(let e=t;e<=i;e++){const i=e-t,s=n[i];let o="";for(let e=0,t=s.length;e<t;e++)o+='<div class="cmdr '+s[e]+'" style=""></div>';r[i]=o}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class zE{constructor(e,t,i,n){this.r=zE._clamp(e),this.g=zE._clamp(t),this.b=zE._clamp(i),this.a=zE._clamp(n)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:0|e}}zE.Empty=new zE(0,0,0,0);class HE{constructor(){this._onDidChange=new ms,this.onDidChange=this._onDidChange.event,this._updateColorMap(),Pd.onDidChange((e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new HE),this._INSTANCE}_updateColorMap(){const e=Pd.getColorMap();if(!e)return this._colors=[zE.Empty],void(this._backgroundIsLight=!0);this._colors=[zE.Empty];for(let t=1;t<e.length;t++){const i=e[t].rgba;this._colors[t]=new zE(i.r,i.g,i.b,Math.round(255*i.a))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}HE._INSTANCE=null;const jE=(()=>{const e=[];for(let t=32;t<=126;t++)e.push(t);return e.push(65533),e})();class UE{constructor(e,t){this.scale=t,this.charDataNormal=UE.soften(e,.8),this.charDataLight=UE.soften(e,50/60)}static soften(e,t){let i=new Uint8ClampedArray(e.length);for(let n=0,r=e.length;n<r;n++)i[n]=Qf(e[n]*t);return i}renderChar(e,t,i,n,r,s,o,a,l){const c=1*this.scale,h=2*this.scale,u=l?1:h;if(t+c>e.width||i+u>e.height)return void console.warn("bad render request outside image data");const d=a?this.charDataLight:this.charDataNormal,f=((e,t)=>(e-=32)<0||e>96?t<=2?(e+96)%96:95:e)(n,o),p=4*e.width,g=s.r,m=s.g,b=s.b,v=r.r-g,y=r.g-m,_=r.b-b,w=e.data;let S=f*c*h,C=i*p+4*t;for(let e=0;e<u;e++){let e=C;for(let t=0;t<c;t++){const t=d[S++]/255;w[e++]=g+v*t,w[e++]=m+y*t,w[e++]=b+_*t,e++}C+=p}}blockRenderChar(e,t,i,n,r,s,o){const a=1*this.scale,l=2*this.scale,c=o?1:l;if(t+a>e.width||i+c>e.height)return void console.warn("bad render request outside image data");const h=4*e.width,u=r.r,d=r.g,f=r.b,p=u+.5*(n.r-u),g=d+.5*(n.g-d),m=f+.5*(n.b-f),b=e.data;let v=i*h+4*t;for(let e=0;e<c;e++){let e=v;for(let t=0;t<a;t++)b[e++]=p,b[e++]=g,b[e++]=m,e++;v+=h}}}function GE(e){const t=this;let i,n=!1;return function(){return n||(n=!0,i=e.apply(t,arguments)),i}}const KE={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},$E=e=>{const t=new Uint8ClampedArray(e.length/2);for(let i=0;i<e.length;i+=2)t[i>>1]=KE[e[i]]<<4|15&KE[e[i+1]];return t},qE={1:GE((()=>$E("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792"))),2:GE((()=>$E("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")))};class ZE{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return i=qE[e]?new UE(qE[e](),e):ZE.createFromSampleData(ZE.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=960,t.style.width="960px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let n=0;for(const e of jE)i.fillText(String.fromCharCode(e),n,8),n+=10;return i.getImageData(0,0,960,16)}static createFromSampleData(e,t){if(61440!==e.length)throw new Error("Unexpected source in MinimapCharRenderer");let i=ZE._downsample(e,t);return new UE(i,t)}static _downsampleChar(e,t,i,n,r){const s=1*r,o=2*r;let a=n,l=0;for(let n=0;n<o;n++){const r=n/o*16,c=(n+1)/o*16;for(let n=0;n<s;n++){const o=n/s*10,h=(n+1)/s*10;let u=0,d=0;for(let i=r;i<c;i++){const n=t+3840*Math.floor(i),r=1-(i-Math.floor(i));for(let t=o;t<h;t++){const i=1-(t-Math.floor(t)),s=n+4*Math.floor(t),o=i*r;d+=o,u+=e[s]*e[s+3]/255*o}}const f=u/d;l=Math.max(l,f),i[a++]=Qf(f)}}return l}static _downsample(e,t){const i=2*t*1*t,n=96*i,r=new Uint8ClampedArray(n);let s=0,o=0,a=0;for(let n=0;n<96;n++)a=Math.max(a,this._downsampleChar(e,o,r,s,t)),s+=i,o+=40;if(a>0){const e=255/a;for(let t=0;t<n;t++)r[t]*=e}return r}}class YE{constructor(e,t,i){const n=e.options,r=n.get(126),s=n.get(128),o=s.minimap,a=n.get(40),l=n.get(62);this.renderMinimap=o.renderMinimap,this.size=l.size,this.minimapHeightIsEditorHeight=o.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(92),this.showSlider=l.showSlider,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(56),this.minimapLeft=o.minimapLeft,this.minimapWidth=o.minimapWidth,this.minimapHeight=s.height,this.canvasInnerWidth=o.minimapCanvasInnerWidth,this.canvasInnerHeight=o.minimapCanvasInnerHeight,this.canvasOuterWidth=o.minimapCanvasOuterWidth,this.canvasOuterHeight=o.minimapCanvasOuterHeight,this.isSampling=o.minimapIsSampling,this.editorHeight=s.height,this.fontScale=o.minimapScale,this.minimapLineHeight=o.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=GE((()=>ZE.create(this.fontScale,a.fontFamily))),this.backgroundColor=YE._getMinimapBackground(t,i)}static _getMinimapBackground(e,t){const i=e.getColor(yx);return i?new zE(i.rgba.r,i.rgba.g,i.rgba.b,i.rgba.a):t.getColor(2)}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)}}class XE{constructor(e,t,i,n,r,s,o,a){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=r,this.sliderHeight=s,this.startLineNumber=o,this.endLineNumber=a}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,i,n,r,s,o,a,l,c,h){const u=e.pixelRatio,d=e.minimapLineHeight,f=Math.floor(e.canvasInnerHeight/d),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){const t=a*e.lineHeight+(e.scrollBeyondLastLine?r-e.lineHeight:0),i=Math.max(1,Math.floor(r*r/t)),n=Math.max(0,e.minimapHeight-i),s=n/(c-r),h=l*s,u=n>0,d=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new XE(l,c,u,s,h,i,1,Math.min(o,d))}let g,m;if(s&&i!==o){const e=i-t+1;g=Math.floor(e*d/u)}else{const e=r/p;g=Math.floor(e*d/u)}m=e.scrollBeyondLastLine?(o-1)*d/u:Math.max(0,o*d/u-g),m=Math.min(e.minimapHeight-g,m);const b=m/(c-r),v=l*b;let y=0;if(e.scrollBeyondLastLine){y=r/p-1}if(f>=o+y){return new XE(l,c,m>0,b,v,g,1,o)}{let e=Math.max(1,Math.floor(t-v*u/d));h&&h.scrollHeight===c&&(h.scrollTop>l&&(e=Math.min(e,h.startLineNumber)),h.scrollTop<l&&(e=Math.max(e,h.startLineNumber)));const i=Math.min(o,e+f-1);return new XE(l,c,!0,b,(t-e+(l-n)/p)*d/u,g,e,i)}}}class QE{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}QE.INVALID=new QE(-1);class JE{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new Gk((()=>QE.INVALID)),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const t=this._renderedLines._get().lines;for(let e=0,i=t.length;e<i;e++)if(-1===t[e].dy)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class eT{constructor(e,t,i,n){this._backgroundFillData=eT._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const n=i.r,r=i.g,s=i.b,o=new Uint8ClampedArray(e*t*4);let a=0;for(let i=0;i<t;i++)for(let t=0;t<e;t++)o[a]=n,o[a+1]=r,o[a+2]=s,o[a+3]=255,a+=4;return o}}class tT{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,i){if(0===e.renderMinimap||!e.isSampling)return[null,[]];const n=e.pixelRatio,r=e.lineHeight,s=e.scrollBeyondLastLine,{minimapLineCount:o}=Or.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:s,height:e.editorHeight,lineHeight:r,pixelRatio:n}),a=t/o,l=a/2;if(!i||0===i.minimapLines.length){let e=[];if(e[0]=1,o>1){for(let t=0,i=o-1;t<i;t++)e[t]=Math.round(t*a+l);e[o-1]=t}return[new tT(a,e),[]]}const c=i.minimapLines,h=c.length;let u=[],d=0,f=0,p=1;let g=[],m=null;for(let e=0;e<o;e++){const i=Math.max(p,Math.round(e*a)),n=Math.max(i,Math.round((e+1)*a));for(;d<h&&c[d]<i;){if(g.length<10){const e=d+1+f;m&&"deleted"===m.type&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:e,deleteToLineNumber:e},g.push(m)),f--}d++}let r;if(d<h&&c[d]<=n)r=c[d],d++;else if(r=0===e?1:e+1===o?t:Math.round(e*a+l),g.length<10){const t=d+1+f;m&&"inserted"===m.type&&m._i===e-1?m.insertToLineNumber++:(m={type:"inserted",_i:e,insertFromLineNumber:t,insertToLineNumber:t},g.push(m)),f++}u[e]=r,p=r}if(g.length<10)for(;d<h;){const e=d+1+f;m&&"deleted"===m.type&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:e,deleteToLineNumber:e},g.push(m)),f--,d++}else g=[{type:"flush"}];return[new tT(a,u),g]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){const n=this.minimapLines[i];if(n<e||n>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,n=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,r),n=Math.max(n,r)):this.minimapLines[r]-=t;return[i,n]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class iT extends uy{constructor(e){super(e),this.tokensColorTracker=HE.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new YE(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=tT.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new nT(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new YE(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return!!t&&this._actual.onLinesChanged(t[0],t[1])}return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const i of e.ranges){const e=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);e&&t.push({fromLineNumber:e[0],toLineNumber:e[1]})}return!!t.length&&this._actual.onTokensChanged(t)}return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,i]=tT.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const e of i)switch(e.type){case"deleted":this._actual.onLinesDeleted(e.deleteFromLineNumber,e.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(e.insertFromLineNumber,e.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){let n=[];for(let r=0,s=t-e+1;r<s;r++)i[r]?n[r]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+r-1]):n[r]=null;return n}return this._context.model.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(null===this._minimapSelections)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new ko(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const n=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];i=new xo(n,1,r,this._context.model.getLineMaxColumn(r))}else i=new xo(e,1,t,this._context.model.getLineMaxColumn(t));const n=this._context.model.getDecorationsInViewport(i);if(this._samplingState){let e=[];for(const t of n){if(!t.options.minimap)continue;const i=t.range,n=this._samplingState.modelLineToMinimapLine(i.startLineNumber),r=this._samplingState.modelLineToMinimapLine(i.endLineNumber);e.push(new hg(new xo(n,i.startColumn,r,i.endColumn),t.options))}return e}return n}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new xo(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class nT extends as{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(mx),this._domNode=Zv(document.createElement("div")),dy.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Zv(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Zv(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Zv(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Zv(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Zv(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=ul(this._domNode.domNode,"mousedown",(e=>{e.preventDefault();if(0===this._model.options.renderMinimap)return;if(!this._lastRenderData)return;if("proportional"!==this._model.options.size){if(e.leftButton&&this._lastRenderData){const t=xl(this._slider.domNode),i=t.top+t.height/2;this._startSliderDragging(e.buttons,e.posx,i,e.posy,this._lastRenderData.renderedLayout)}return}const t=this._model.options.minimapLineHeight,i=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*e.browserEvent.offsetY;let n=Math.floor(i/t)+this._lastRenderData.renderedLayout.startLineNumber;n=Math.min(n,this._model.getLineCount()),this._model.revealLineNumber(n)})),this._sliderMouseMoveMonitor=new ty,this._sliderMouseDownListener=ul(this._slider.domNode,"mousedown",(e=>{e.preventDefault(),e.stopPropagation(),e.leftButton&&this._lastRenderData&&this._startSliderDragging(e.buttons,e.posx,e.posy,e.posy,this._lastRenderData.renderedLayout)})),this._gestureDisposable=Jv.addTarget(this._domNode.domNode),this._sliderTouchStartListener=cl(this._domNode.domNode,Xv.Start,(e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(e))}),{passive:!1}),this._sliderTouchMoveListener=cl(this._domNode.domNode,Xv.Change,(e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(e)}),{passive:!1}),this._sliderTouchEndListener=ul(this._domNode.domNode,Xv.End,(e=>{e.preventDefault(),e.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)}))}_startSliderDragging(e,t,i,n,r){this._slider.toggleClassName("active",!0);const s=(e,n)=>{const s=Math.abs(n-t);if(Yn&&s>140)return void this._model.setScrollTop(r.scrollTop);const o=e-i;this._model.setScrollTop(r.getDesiredScrollTopFromDelta(o))};n!==i&&s(n,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,ey,(e=>s(e.posy,e.posx)),(()=>{this._slider.toggleClassName("active",!1)}))}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return"always"===this._model.options.showSlider?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new eT(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(mx),this._renderDecorations=!0,!0}onTokensChanged(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(0===this._model.options.renderMinimap)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const t=XE.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight);const i=e.scrollLeft/this._model.options.typicalHalfwidthCharacterWidth,n=Math.min(this._model.options.minimapWidth,Math.round(i*this._model.options.minimapCharWidth/this._model.options.pixelRatio));this._sliderHorizontal.setLeft(n),this._sliderHorizontal.setWidth(this._model.options.minimapWidth-n),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections(),i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber),{canvasInnerWidth:n,canvasInnerHeight:r}=this._model.options,s=this._model.options.minimapLineHeight,o=this._model.options.minimapCharWidth,a=this._model.getOptions().tabSize,l=this._decorationsCanvas.domNode.getContext("2d");l.clearRect(0,0,n,r);const c=new Map;for(let i=0;i<t.length;i++){const n=t[i];for(let t=n.startLineNumber;t<=n.endLineNumber;t++)this.renderDecorationOnLine(l,c,n,this._selectionColor,e,t,s,s,a,o)}for(let t=0;t<i.length;t++){const n=i[t];if(!n.options.minimap)continue;const r=n.options.minimap.getColor(this._theme);for(let t=n.range.startLineNumber;t<=n.range.endLineNumber;t++)switch(n.options.minimap.position){case fu.Inline:this.renderDecorationOnLine(l,c,n.range,r,e,t,s,s,a,o);continue;case fu.Gutter:const i=(t-e.startLineNumber)*s,h=2;this.renderDecoration(l,r,h,i,2,s);continue}}}}renderDecorationOnLine(e,t,i,n,r,s,o,a,l,c){const h=(s-r.startLineNumber)*a;if(h+o<0||h>this._model.options.canvasInnerHeight)return;let u=t.get(s);const d=!u;if(!u){const e=this._model.getLineContent(s);u=[8];for(let t=1;t<e.length+1;t++){const i=e.charCodeAt(t-1),n=9===i?l*c:jc(i)?2*c:c;u[t]=u[t-1]+n}t.set(s,u)}const{startColumn:f,endColumn:p,startLineNumber:g,endLineNumber:m}=i,b=g===s?u[f-1]:8,v=m>s?u.length-1:p-1;if(v>0){const t=u[v]-b||2;this.renderDecoration(e,n,b,h,t,o)}d&&this.renderLineHighlight(e,n,h,o)}renderLineHighlight(e,t,i,n){e.fillStyle=t&&t.transparent(.5).toString()||"",e.fillRect(8,i,e.canvas.width,n)}renderDecoration(e,t,i,n,r,s){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,r,s)}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const t=this._lastRenderData._get();return new JE(e,t.imageData,t.lines)}const r=this._getBuffer();if(!r)return null;let[s,o,a]=nT._renderUntouchedLines(r,t,i,n,this._lastRenderData);const l=this._model.getMinimapLinesRenderingData(t,i,a),c=this._model.getOptions().tabSize,h=this._model.options.backgroundColor,u=this._model.tokensColorTracker,d=u.backgroundIsLight(),f=this._model.options.renderMinimap,p=this._model.options.charRenderer(),g=this._model.options.fontScale,m=this._model.options.minimapCharWidth,b=(1===f?2:3)*g,v=n>b?Math.floor((n-b)/2):0;let y=0;const _=[];for(let e=0,s=i-t+1;e<s;e++)a[e]&&nT._renderLine(r,h,d,f,m,u,p,y,v,c,l[e],g,n),_[e]=new QE(y),y+=n;const w=-1===s?0:s,S=(-1===o?r.height:o)-w;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,w,r.width,S),new JE(e,r,_)}static _renderUntouchedLines(e,t,i,n,r){const s=[];if(!r){for(let e=0,n=i-t+1;e<n;e++)s[e]=!0;return[-1,-1,s]}const o=r._get(),a=o.imageData.data,l=o.rendLineNumberStart,c=o.lines,h=c.length,u=e.width,d=e.data,f=(i-t+1)*n*u*4;let p=-1,g=-1,m=-1,b=-1,v=-1,y=-1,_=0;for(let e=t;e<=i;e++){const i=e-t,r=e-l,o=r>=0&&r<h?c[r].dy:-1;if(-1===o){s[i]=!0,_+=n;continue}const w=o*u*4,S=(o+n)*u*4,C=_*u*4,x=(_+n)*u*4;b===w&&y===C?(b=S,y=x):(-1!==m&&(d.set(a.subarray(m,b),v),-1===p&&0===m&&m===v&&(p=b),-1===g&&b===f&&m===v&&(g=m)),m=w,b=S,v=C,y=x),s[i]=!1,_+=n}-1!==m&&(d.set(a.subarray(m,b),v),-1===p&&0===m&&m===v&&(p=b),-1===g&&b===f&&m===v&&(g=m));return[-1===p?-1:p/(4*u),-1===g?-1:g/(4*u),s]}static _renderLine(e,t,i,n,r,s,o,a,l,c,h,u,d){const f=h.content,p=h.tokens,g=e.width-r,m=1===d;let b=8,v=0,y=0;for(let h=0,d=p.getCount();h<d;h++){const d=p.getEndOffset(h),_=p.getForeground(h),w=s.getColor(_);for(;v<d;v++){if(b>g)return;const s=f.charCodeAt(v);if(9===s){const e=c-(v+y)%c;y+=e-1,b+=e*r}else if(32===s)b+=r;else{const c=jc(s)?2:1;for(let h=0;h<c;h++)if(2===n?o.blockRenderChar(e,b,a+l,w,t,i,m):o.renderChar(e,b,a+l,s,w,t,u,i,m),b+=r,b>g)return}}}}}pv(((e,t)=>{const i=e.getColor(yx);i&&t.addRule(`.monaco-editor .minimap > canvas { opacity: ${i.rgba.a}; will-change: opacity; }`);const n=e.getColor(_x);n&&t.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${n}; }`);const r=e.getColor(wx);r&&t.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${r}; }`);const s=e.getColor(Sx);s&&t.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${s}; }`);const o=e.getColor(XS);o&&t.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${o} -6px 0 6px -6px inset; }`)}));class rT extends uy{constructor(e){super(e);const t=this._context.configuration.options.get(128);this._widgets={},this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,this._domNode=Zv(document.createElement("div")),dy.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options.get(128);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}addWidget(e){const t=Zv(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference!==t&&(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const e=this._widgets[t].domNode.domNode;delete this._widgets[t],e.parentNode.removeChild(e),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(null!==e.preference)if(0===e.preference)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(1===e.preference){const e=t.domNode.clientHeight;t.setTop(this._editorHeight-e-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else 2===e.preference&&(t.setTop(0),t.domNode.style.right="50%");else t.unsetTop()}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];this._renderWidget(this._widgets[i])}}}class sT{constructor(e,t){const i=e.options;this.lineHeight=i.get(56),this.pixelRatio=i.get(126),this.overviewRulerLanes=i.get(71),this.renderBorder=i.get(70);const n=t.getColor(qx);this.borderColor=n?n.toString():null,this.hideCursor=i.get(48);const r=t.getColor(Wx);this.cursorColor=r?r.transparent(.7).toString():null,this.themeType=t.type;const s=i.get(62),o=s.enabled,a=s.side,l=o?t.getColor(Zx)||Pd.getDefaultBackground():null;this.backgroundColor=null===l||"left"===a?null:vw.Format.CSS.formatHex(l);const c=i.get(128).overviewRuler;this.top=c.top,this.right=c.right,this.domWidth=c.width,this.domHeight=c.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[h,u]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=h,this.w=u}_initLanes(e,t,i){const n=t-e;if(i>=3){const t=Math.floor(n/3),i=Math.floor(n/3),r=n-t-i,s=e+t;return[[0,e,s,e,e+t+r,e,s,e],[0,t,r,t+r,i,t+r+i,r+i,t+r+i]]}if(2===i){const t=Math.floor(n/2),i=n-t;return[[0,e,e,e,e+t,e,e,e],[0,t,t,t,i,t+i,t+i,t+i]]}return[[0,e,e,e,e,e,e,e],[0,n,n,n,n,n,n,n]]}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class oT extends uy{constructor(e){super(e),this._domNode=Zv(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Pd.onDidChange((e=>{e.changedColorMap&&this._updateSettings(!0)})),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new sT(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(Co.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(0===this._settings.overviewRulerLanes)return void this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");const e=this._settings.canvasWidth,t=this._settings.canvasHeight,i=this._settings.lineHeight,n=this._context.viewLayout,r=t/this._context.viewLayout.getScrollHeight(),s=this._context.model.getAllOverviewRulerDecorations(this._context.theme),o=6*this._settings.pixelRatio|0,a=o/2|0,l=this._domNode.domNode.getContext("2d");null===this._settings.backgroundColor?l.clearRect(0,0,e,t):(l.fillStyle=this._settings.backgroundColor,l.fillRect(0,0,e,t));const c=this._settings.x,h=this._settings.w,u=Object.keys(s);u.sort();for(let e=0,d=u.length;e<d;e++){const d=u[e],f=s[d];l.fillStyle=d;let p=0,g=0,m=0;for(let e=0,s=f.length;e<s;e++){const s=f[3*e],u=f[3*e+1],d=f[3*e+2];let b=n.getVerticalOffsetForLineNumber(u)*r|0,v=(n.getVerticalOffsetForLineNumber(d)+i)*r|0;if(v-b<o){let e=(b+v)/2|0;e<a?e=a:e+a>t&&(e=t-a),b=e-a,v=e+a}b>m+1||s!==p?(0!==e&&l.fillRect(c[p],g,h[p],m-g),p=s,g=b,m=v):v>m&&(m=v)}l.fillRect(c[p],g,h[p],m-g)}if(!this._settings.hideCursor&&this._settings.cursorColor){const e=2*this._settings.pixelRatio|0,i=e/2|0,s=this._settings.x[7],o=this._settings.w[7];l.fillStyle=this._settings.cursorColor;let a=-100,c=-100;for(let h=0,u=this._cursorPositions.length;h<u;h++){const u=this._cursorPositions[h];let d=n.getVerticalOffsetForLineNumber(u.lineNumber)*r|0;d<i?d=i:d+i>t&&(d=t-i);const f=d-i,p=f+e;f>c+1?(0!==h&&l.fillRect(s,a,o,c-a),a=f,c=p):p>c&&(c=p)}l.fillRect(s,a,o,c-a)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(l.beginPath(),l.lineWidth=1,l.strokeStyle=this._settings.borderColor,l.moveTo(0,0),l.lineTo(0,t),l.stroke(),l.moveTo(0,0),l.lineTo(e,0),l.stroke())}}class aT{constructor(e,t,i){this.from=0|e,this.to=0|t,this.colorId=0|i}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class lT{constructor(e,t,i){this.startLineNumber=e,this.endLineNumber=t,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class cT{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(lT.compare)}setLineHeight(e){return this._lineHeight!==e&&(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth!==e&&(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight!==e&&(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight!==e&&(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),n=i/Math.floor(this._outerHeight),r=Math.floor(4*this._pixelRatio/2);let s=[];for(let o=0,a=this._zones.length;o<a;o++){const a=this._zones[o];if(!e){const e=a.getColorZones();if(e){s.push(e);continue}}const l=Math.floor(n*this._getVerticalOffsetForLine(a.startLineNumber)),c=Math.floor(n*(this._getVerticalOffsetForLine(a.endLineNumber)+t));let h=Math.floor((l+c)/2),u=c-h;u<r&&(u=r),h-u<0&&(h=u),h+u>i&&(h=i-u);const d=a.color;let f=this._color2Id[d];f||(f=++this._lastAssignedId,this._color2Id[d]=f,this._id2Color[f]=d);const p=new aT(h-u,h+u,f);a.setColorZone(p),s.push(p)}return this._colorZonesInvalid=!1,s.sort(aT.compare),s}}class hT extends hy{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=Zv(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new cT((e=>this._context.viewLayout.getVerticalOffsetForLineNumber(e))),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(56)),this._zoneManager.setPixelRatio(i.get(126)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(56)&&(this._zoneManager.setLineHeight(t.get(56)),this._render()),e.hasChanged(126)&&(this._zoneManager.setPixelRatio(t.get(126)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(0===this._zoneManager.getOuterHeight())return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(r,i,n,e),!0}_renderOneLane(e,t,i,n){let r=0,s=0,o=0;for(const a of t){const t=a.colorId,l=a.from,c=a.to;t!==r?(e.fillRect(0,s,n,o-s),r=t,e.fillStyle=i[r],s=l,o=c):o>=l?o=Math.max(o,c):(e.fillRect(0,s,n,o-s),s=l,o=c)}e.fillRect(0,s,n,o-s)}}class uT extends uy{constructor(e){super(e),this.domNode=Zv(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.model.getTextModelOptions(),n=i;let r=t-e;for(;r>0;){const e=Zv(document.createElement("div"));e.setClassName("view-ruler"),e.setWidth(n),this.domNode.appendChild(e),this._renderedRulers.push(e),r--}return}let i=e-t;for(;i>0;){const e=this._renderedRulers.pop();this.domNode.removeChild(e),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const i=this._renderedRulers[t],n=this._rulers[t];i.setBoxShadow(n.color?`1px 0 0 0 ${n.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(n.column*this._typicalHalfwidthCharacterWidth)}}}pv(((e,t)=>{const i=e.getColor($x);i&&t.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${i} inset; }`)}));class dT extends uy{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const t=this._context.configuration.options.get(90);this._useShadows=t.useShadows,this._domNode=Zv(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}getDomNode(){return this._domNode}_updateWidth(){const e=this._context.configuration.options.get(128);0===e.minimap.renderMinimap||e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?this._width=e.width:this._width=e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}onConfigurationChanged(e){const t=this._context.configuration.options.get(90);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}pv(((e,t)=>{const i=e.getColor(XS);i&&t.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${i} 0 6px 6px -6px inset; }`)}));class fT{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class pT{constructor(e,t){this.lineNumber=e,this.ranges=t}}function gT(e){return new fT(e)}function mT(e){return new pT(e.lineNumber,e.ranges.map(gT))}class bT extends CS{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(56),this._roundedSelection=t.get(88),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(56),this._roundedSelection=t.get(88),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++){if(e[t].ranges.length>1)return!0}return!1}_enrichVisibleRangesWithStyle(e,t,i){const n=this._typicalHalfwidthCharacterWidth/4;let r=null,s=null;if(i&&i.length>0&&t.length>0){const n=t[0].lineNumber;if(n===e.startLineNumber)for(let e=0;!r&&e<i.length;e++)i[e].lineNumber===n&&(r=i[e].ranges[0]);const o=t[t.length-1].lineNumber;if(o===e.endLineNumber)for(let e=i.length-1;!s&&e>=0;e--)i[e].lineNumber===o&&(s=i[e].ranges[0]);r&&!r.startStyle&&(r=null),s&&!s.startStyle&&(s=null)}for(let e=0,i=t.length;e<i;e++){const o=t[e].ranges[0],a=o.left,l=o.left+o.width,c={top:0,bottom:0},h={top:0,bottom:0};if(e>0){const i=t[e-1].ranges[0].left,r=t[e-1].ranges[0].left+t[e-1].ranges[0].width;vT(a-i)<n?c.top=2:a>i&&(c.top=1),vT(l-r)<n?h.top=2:i<l&&l<r&&(h.top=1)}else r&&(c.top=r.startStyle.top,h.top=r.endStyle.top);if(e+1<i){const i=t[e+1].ranges[0].left,r=t[e+1].ranges[0].left+t[e+1].ranges[0].width;vT(a-i)<n?c.bottom=2:i<a&&a<r&&(c.bottom=1),vT(l-r)<n?h.bottom=2:l<r&&(h.bottom=1)}else s&&(c.bottom=s.startStyle.bottom,h.bottom=s.endStyle.bottom);o.startStyle=c,o.endStyle=h}}_getVisibleRangesWithStyle(e,t,i){const n=(t.linesVisibleRangesForRange(e,!0)||[]).map(mT);return!this._visibleRangesHaveGaps(n)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,n,i),n}_createSelectionPiece(e,t,i,n,r){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;left:"+n.toString()+"px;width:"+r.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(0===n.length)return;const r=!!n[0].ranges[0].startStyle,s=this._lineHeight.toString(),o=(this._lineHeight-1).toString(),a=n[0].lineNumber,l=n[n.length-1].lineNumber;for(let c=0,h=n.length;c<h;c++){const h=n[c],u=h.lineNumber,d=u-t,f=i&&(u===l||u===a)?o:s,p=i&&u===a?1:0;let g="",m="";for(let e=0,t=h.ranges.length;e<t;e++){const t=h.ranges[e];if(r){const e=t.startStyle,i=t.endStyle;if(1===e.top||1===e.bottom){g+=this._createSelectionPiece(p,f,bT.SELECTION_CLASS_NAME,t.left-bT.ROUNDED_PIECE_WIDTH,bT.ROUNDED_PIECE_WIDTH);let i=bT.EDITOR_BACKGROUND_CLASS_NAME;1===e.top&&(i+=" "+bT.SELECTION_TOP_RIGHT),1===e.bottom&&(i+=" "+bT.SELECTION_BOTTOM_RIGHT),g+=this._createSelectionPiece(p,f,i,t.left-bT.ROUNDED_PIECE_WIDTH,bT.ROUNDED_PIECE_WIDTH)}if(1===i.top||1===i.bottom){g+=this._createSelectionPiece(p,f,bT.SELECTION_CLASS_NAME,t.left+t.width,bT.ROUNDED_PIECE_WIDTH);let e=bT.EDITOR_BACKGROUND_CLASS_NAME;1===i.top&&(e+=" "+bT.SELECTION_TOP_LEFT),1===i.bottom&&(e+=" "+bT.SELECTION_BOTTOM_LEFT),g+=this._createSelectionPiece(p,f,e,t.left+t.width,bT.ROUNDED_PIECE_WIDTH)}}let i=bT.SELECTION_CLASS_NAME;if(r){const e=t.startStyle,n=t.endStyle;0===e.top&&(i+=" "+bT.SELECTION_TOP_LEFT),0===e.bottom&&(i+=" "+bT.SELECTION_BOTTOM_LEFT),0===n.top&&(i+=" "+bT.SELECTION_TOP_RIGHT),0===n.bottom&&(i+=" "+bT.SELECTION_BOTTOM_RIGHT)}m+=this._createSelectionPiece(p,f,i,t.left,t.width)}e[d][0]+=g,e[d][1]+=m}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let e=i;e<=n;e++){t[e-i]=["",""]}const r=[];for(let n=0,s=this._selections.length;n<s;n++){const s=this._selections[n];if(s.isEmpty()){r[n]=null;continue}const o=this._getVisibleRangesWithStyle(s,e,this._previousFrameVisibleRangesWithStyle[n]);r[n]=o,this._actualRenderOneSelection(t,i,this._selections.length>1,o)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map((([e,t])=>e+t))}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function vT(e){return e<0?-e:e}bT.SELECTION_CLASS_NAME="selected-text",bT.SELECTION_TOP_LEFT="top-left-radius",bT.SELECTION_BOTTOM_LEFT="bottom-left-radius",bT.SELECTION_TOP_RIGHT="top-right-radius",bT.SELECTION_BOTTOM_RIGHT="bottom-right-radius",bT.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",bT.ROUNDED_PIECE_WIDTH=10,pv(((e,t)=>{const i=e.getColor(TC);i&&t.addRule(`.monaco-editor .focused .selected-text { background-color: ${i}; }`);const n=e.getColor(NC);n&&t.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const r=e.getColor(LC);r&&!r.isTransparent()&&t.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${r}; }`)}));class yT{constructor(e,t,i,n,r,s){this.top=e,this.left=t,this.width=i,this.height=n,this.textContent=r,this.textContentClassName=s}}class _T{constructor(e){this._context=e;const t=this._context.configuration.options,i=t.get(40);this._cursorStyle=t.get(22),this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(25),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Zv(document.createElement("div")),this._domNode.setClassName("cursor monaco-mouse-cursor-text"),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),$v.applyFontInfo(this._domNode,i),this._domNode.setDisplay("none"),this._position=new Co(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(40);return this._cursorStyle=t.get(22),this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(25),this._typicalHalfwidthCharacterWidth),$v.applyFontInfo(this._domNode,i),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===Lr.Line||this._cursorStyle===Lr.LineThin){const i=e.visibleRangeForPosition(this._position);if(!i||i.outsideRenderedLine)return null;let n;if(this._cursorStyle===Lr.Line){if(n=ic(this._lineCursorWidth>0?this._lineCursorWidth:2),n>2){const e=this._context.model.getLineContent(this._position.lineNumber),i=Pc(e,this._position.column-1);t=e.substr(this._position.column-1,i)}}else n=ic(1);let r=i.left;n>=2&&r>=1&&(r-=1);const s=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new yT(s,r,n,this._lineHeight,t,"")}const i=this._context.model.getLineContent(this._position.lineNumber),n=Pc(i,this._position.column-1),r=e.linesVisibleRangesForRange(new xo(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+n),!1);if(!r||0===r.length)return null;const s=r[0];if(s.outsideRenderedLine||0===s.ranges.length)return null;const o=s.ranges[0],a=o.width<1?this._typicalHalfwidthCharacterWidth:o.width;let l="";if(this._cursorStyle===Lr.Block){const e=this._context.model.getViewLineData(this._position.lineNumber);t=i.substr(this._position.column-1,n);const r=e.tokens.findTokenIndexAtOffset(this._position.column-1);l=e.tokens.getClassName(r)}let c=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return this._cursorStyle!==Lr.Underline&&this._cursorStyle!==Lr.UnderlineThin||(c+=this._lineHeight-2,h=2),new yT(c,o.left,a,h,t,l)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor monaco-mouse-cursor-text ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class wT extends uy{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(78),this._cursorBlinking=t.get(20),this._cursorStyle=t.get(22),this._cursorSmoothCaretAnimation=t.get(21),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new _T(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=Zv(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Ya,this._cursorFlatBlinkInterval=new Xa,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(78),this._cursorBlinking=t.get(20),this._cursorStyle=t.get(22),this._cursorSmoothCaretAnimation=t.get(21),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const e=t.length-this._secondaryCursors.length;for(let t=0;t<e;t++){const e=new _T(this._context);this._domNode.domNode.insertBefore(e.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(e)}}else if(this._secondaryCursors.length>t.length){const e=this._secondaryCursors.length-t.length;for(let t=0;t<e;t++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let e=0;e<t.length;e++)this._secondaryCursors[e].onCursorPositionChanged(t[e])}onCursorStateChanged(e){const t=[];for(let i=0,n=e.selections.length;i<n;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=t=>{for(let i=0,n=e.ranges.length;i<n;i++)if(e.ranges[i].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const e of this._secondaryCursors)if(t(e.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=0===e,i=5===e;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),t||i||(1===e?this._cursorFlatBlinkInterval.cancelAndSet((()=>{this._isVisible?this._hide():this._show()}),wT.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet((()=>{this._blinkingEnabled=!0,this._updateDomClassName()}),wT.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Lr.Line:e+=" cursor-line-style";break;case Lr.Block:e+=" cursor-block-style";break;case Lr.Underline:e+=" cursor-underline-style";break;case Lr.LineThin:e+=" cursor-line-thin-style";break;case Lr.BlockOutline:e+=" cursor-block-outline-style";break;case Lr.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],i=0;const n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let n=0,r=this._secondaryCursors.length;n<r;n++){const r=this._secondaryCursors[n].render(e);r&&(t[i++]=r)}this._renderData=t}getLastRenderData(){return this._renderData}}wT.BLINK_INTERVAL=500,pv(((e,t)=>{const i=e.getColor(Wx);if(i){let n=e.getColor(Vx);n||(n=i.opposite()),t.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${i}; border-color: ${i}; color: ${n}; }`),"hc"===e.type&&t.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}}));const ST=()=>{throw new Error("Invalid change accessor")};class CT extends uy{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(128);this._lineHeight=t.get(56),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=Zv(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Zv(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let i=!1;return this._context.model.changeWhitespace((e=>{const n=Object.keys(this._zones);for(let r=0,s=n.length;r<s;r++){const s=n[r],o=this._zones[s],a=this._computeWhitespaceProps(o.delegate),l=t.get(s);!l||l.afterLineNumber===a.afterViewLineNumber&&l.height===a.heightInPx||(e.changeOneWhitespace(s,a.afterViewLineNumber,a.heightInPx),this._safeCallOnComputedHeight(o.delegate,a.heightInPx),i=!0)}})),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(128);return this._lineHeight=t.get(56),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(56)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return void 0!==e.afterColumn?e.afterColumn:1e4}_computeWhitespaceProps(e){if(0===e.afterLineNumber)return{afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t,i;if(void 0!==e.afterColumn)t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const i=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Co(i,this._context.model.getModelLineMaxColumn(i))}i=t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const n=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),r=this._context.model.coordinatesConverter.modelPositionIsVisible(i);return{afterViewLineNumber:n.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace((i=>{const n={addZone:e=>(t=!0,this._addZone(i,e)),removeZone:e=>{e&&(t=this._removeZone(i,e)||t)},layoutZone:e=>{e&&(t=this._layoutZone(i,e)||t)}};!function(e,t){try{e(t)}catch(e){Gr(e)}}(e,n),n.addZone=ST,n.removeZone=ST,n.layoutZone=ST})),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),n={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isVisible:!1,domNode:Zv(t.domNode),marginDomNode:t.marginDomNode?Zv(t.marginDomNode):null};return this._safeCallOnComputedHeight(n.delegate,i.heightInPx),n.domNode.setPosition("absolute"),n.domNode.domNode.style.width="100%",n.domNode.setDisplay("none"),n.domNode.setAttribute("monaco-view-zone",n.whitespaceId),this.domNode.appendChild(n.domNode),n.marginDomNode&&(n.marginDomNode.setPosition("absolute"),n.marginDomNode.domNode.style.width="100%",n.marginDomNode.setDisplay("none"),n.marginDomNode.setAttribute("monaco-view-zone",n.whitespaceId),this.marginDomNode.appendChild(n.marginDomNode)),this._zones[n.whitespaceId]=n,this.setShouldRender(),n.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return"number"==typeof e.heightInPx?e.heightInPx:"number"==typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return"number"==typeof e.minWidthInPx?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if("function"==typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(e){Gr(e)}}_safeCallOnDomNodeTop(e,t){if("function"==typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(e){Gr(e)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let n=!1;for(let e=0,r=t.length;e<r;e++)i[t[e].id]=t[e],n=!0;const r=Object.keys(this._zones);for(let t=0,n=r.length;t<n;t++){const n=r[t],s=this._zones[n];let o=0,a=0,l="none";i.hasOwnProperty(n)?(o=i[n].verticalOffset-e.bigNumbersDelta,a=i[n].height,l="block",s.isVisible||(s.domNode.setAttribute("monaco-visible-view-zone","true"),s.isVisible=!0),this._safeCallOnDomNodeTop(s.delegate,e.getScrolledTopFromAbsoluteTop(i[n].verticalOffset))):(s.isVisible&&(s.domNode.removeAttribute("monaco-visible-view-zone"),s.isVisible=!1),this._safeCallOnDomNodeTop(s.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),s.domNode.setTop(o),s.domNode.setHeight(a),s.domNode.setDisplay(l),s.marginDomNode&&(s.marginDomNode.setTop(o),s.marginDomNode.setHeight(a),s.marginDomNode.setDisplay(l))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}class xT{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class kT{constructor(e,t,i){this.configuration=e,this.theme=new xT(t),this.model=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class ET{constructor(e,t,i,n){this.selections=e,this.startLineNumber=0|t.startLineNumber,this.endLineNumber=0|t.endLineNumber,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=0|t.bigNumbersDelta,this.whitespaceViewportData=i,this._model=n,this.visibleRange=new xo(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class TT extends hy{constructor(e,t,i,n,r,s){super(),this._selections=[new ko(1,1,1,1)],this._renderAnimationFrame=null;const o=new Hk(t,n,r,e);this._context=new kT(t,i.getColorTheme(),n),this._configPixelRatio=this._context.configuration.options.get(126),this._context.addEventHandler(this),this._register(i.onDidColorThemeChange((e=>{this._context.theme.update(e),this._context.model.onDidColorThemeChange(),this.render(!0,!1)}))),this._viewParts=[],this._textAreaHandler=new ak(this._context,o,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Zv(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Zv(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Zv(document.createElement("div")),dy.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new ME(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new FE(this._context,this._linesContent),this._viewZones=new CT(this._context),this._viewParts.push(this._viewZones);const a=new oT(this._context);this._viewParts.push(a);const l=new dT(this._context);this._viewParts.push(l);const c=new Yk(this._context);this._viewParts.push(c),c.addDynamicOverlay(new rE(this._context)),c.addDynamicOverlay(new bT(this._context)),c.addDynamicOverlay(new AE(this._context)),c.addDynamicOverlay(new oE(this._context));const h=new Xk(this._context);this._viewParts.push(h),h.addDynamicOverlay(new sE(this._context)),h.addDynamicOverlay(new IE(this._context)),h.addDynamicOverlay(new VE(this._context)),h.addDynamicOverlay(new WE(this._context)),h.addDynamicOverlay(new nk(this._context));const u=new rk(this._context);u.getDomNode().appendChild(this._viewZones.marginDomNode),u.getDomNode().appendChild(h.getDomNode()),this._viewParts.push(u),this._contentWidgets=new Jk(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new wT(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new rT(this._context),this._viewParts.push(this._overlayWidgets);const d=new uT(this._context);this._viewParts.push(d);const f=new iT(this._context);if(this._viewParts.push(f),a){const e=this._scrollbar.getOverviewRulerLayoutInfo();e.parent.insertBefore(a.getDomNode(),e.insertBefore)}this._linesContent.appendChild(c.getDomNode()),this._linesContent.appendChild(d.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(l.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),s?s.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new SS(this._context,o,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new Jw(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Co(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Co(e,t)))}}_applyLayout(){const e=this._context.configuration.options.get(128);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(125)+" "+uv(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(126),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){null===this._renderAnimationFrame&&(this._renderAnimationFrame=fl(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){!function(e){try{e()}catch(e){Gr(e)}}((()=>this._actualRender()))}_getViewPartsToRender(){let e=[],t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_actualRender(){if(!al(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&0===e.length)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new ET(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const n=new fy(this._context.viewLayout,i,this._viewLines);for(const t of e)t.prepareRender(n);for(const t of e)t.render(n),t.onDidRender();Math.abs(_a()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const i=this._context.model.validateModelPosition({lineNumber:e,column:t}),n=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new Co(n.lineNumber,n.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?jk.convertViewToModelMouseTarget(i,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new hT(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const e of this._viewParts)e.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(null===t){const i=e.position?e.position.position:null;null!==i&&(t=new xo(i.lineNumber,i.column,i.lineNumber,i.column))}const i=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,i),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}class LT{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new zw(new xo(1,1,1,1),0,new Co(1,1),0),new zw(new xo(1,1,1,1),0,new Co(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Gw(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return 0===this.modelState.selection.getDirection()?new ko(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new ko(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}_setState(e,t,i){if(t){const i=e.model.validateRange(t.selectionStart),n=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),s=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new zw(i,n,r,s)}else{if(!i)return;const n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new zw(n,i.selectionStartLeftoverVisibleColumns,r,i.leftoverVisibleColumns)}if(i){const n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new zw(n,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const n=e.coordinatesConverter.convertModelPositionToViewPosition(new Co(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new Co(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),s=new xo(n.lineNumber,n.column,r.lineNumber,r.column),o=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new zw(s,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class NT{constructor(e){this.context=e,this.primaryCursor=new LT(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,i=this.secondaryCursors.length;t<i;t++){const i=this.secondaryCursors[t].viewState.position;i.isBefore(e)&&(e=i)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,i=this.secondaryCursors.length;t<i;t++){const i=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(i)&&(e=i)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(Gw.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){null!==e&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,i=e.length;if(t<i){let e=i-t;for(let t=0;t<e;t++)this._addSecondaryCursor()}else if(t>i){let e=t-i;for(let t=0;t<e;t++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let t=0;t<i;t++)this.secondaryCursors[t].setState(this.context,e[t].modelState,e[t].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new LT(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return 0===this.secondaryCursors.length||0===this.lastAddedCursorIndex?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(0===this.secondaryCursors.length)return;let e=this._getAll(),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(((e,t)=>e.selection.startLineNumber===t.selection.startLineNumber?e.selection.startColumn-t.selection.startColumn:e.selection.startLineNumber-t.selection.startLineNumber));for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1],s=n.selection,o=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let a;if(a=o.isEmpty()||s.isEmpty()?o.getStartPosition().isBeforeOrEqual(s.getEndPosition()):o.getStartPosition().isBefore(s.getEndPosition()),a){const s=n.index<r.index?i:i+1,o=n.index<r.index?i+1:i,a=t[o].index,l=t[s].index,c=t[o].selection,h=t[s].selection;if(!c.equalsSelection(h)){const i=c.plusRange(h),n=c.selectionStartLineNumber===c.startLineNumber&&c.selectionStartColumn===c.startColumn,r=h.selectionStartLineNumber===h.startLineNumber&&h.selectionStartColumn===h.startColumn;let o,u;a===this.lastAddedCursorIndex?(o=n,this.lastAddedCursorIndex=l):o=r,u=o?new ko(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):new ko(i.endLineNumber,i.endColumn,i.startLineNumber,i.startColumn),t[s].selection=u;const d=Gw.fromModelSelection(u);e[l].setState(this.context,d.modelState,d.viewState)}for(const e of t)e.index>a&&e.index--;e.splice(a,1),t.splice(o,1),this._removeSecondaryCursor(a-1),i--}}}}class MT{constructor(){this.type=0}}class OT{constructor(){this.type=1}}class DT{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class IT{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class AT{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class PT{constructor(){this.type=5}}class RT{constructor(e){this.type=6,this.isFocused=e}}class BT{constructor(){this.type=7}}class FT{constructor(){this.type=8}}class WT{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class VT{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class zT{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class HT{constructor(e,t,i,n,r,s){this.type=12,this.source=e,this.range=t,this.selections=i,this.verticalType=n,this.revealHorizontal=r,this.scrollType=s}}class jT{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class UT{constructor(){this.type=14}}class GT{constructor(e){this.type=15,this.ranges=e}}class KT{constructor(){this.type=16}}class $T{constructor(){this.type=17}}class qT extends as{constructor(){super(),this._onEvent=this._register(new ms),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOugoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++)if(this._outgoingEvents[t].kind===e.kind)return void(this._outgoingEvents[t]=this._outgoingEvents[t].merge(e));this._outgoingEvents.push(e)}_emitOugoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,1===this._collectorCnt&&(this._collector=new ZT),this._collector}endEmitViewEvents(){if(this._collectorCnt--,0===this._collectorCnt){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const t of e)this._addOutgoingEvent(t);t.length>0&&this._emitMany(t)}this._emitOugoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class ZT{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class YT{constructor(e,t,i,n){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=n,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return 0!==e.kind?this:new YT(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class XT{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return 1!==e.kind?this:new XT(this.oldHasFocus,e.hasFocus)}}class QT{constructor(e,t,i,n,r,s,o,a){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=n,this.scrollWidth=r,this.scrollLeft=s,this.scrollHeight=o,this.scrollTop=a,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!(this.scrollWidthChanged||this.scrollLeftChanged||this.scrollHeightChanged||this.scrollTopChanged)}merge(e){return 2!==e.kind?this:new QT(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class JT{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class eL{constructor(e,t,i,n,r,s,o){this.kind=5,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=n,this.source=r,this.reason=s,this.reachedMaxCursorCount=o}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(!e[n].equalsSelection(t[n]))return!1;return!0}isNoOp(){return eL._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return 5!==e.kind?this:new eL(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class tL{constructor(){this.kind=4}isNoOp(){return!1}merge(e){return this}}class iL{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e)return!1;if(this.modelVersionId!==e.modelVersionId)return!1;if(this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class nL{constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){let t=[];for(let e=0;e<this._autoClosedEnclosingDecorations.length;e++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[e]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(xo.compareRangesUsingStarts),e.sort(xo.compareRangesUsingStarts);for(let i=0;i<e.length;i++){if(i>=t.length)return!1;if(!t[i].strictContainsRange(e[i]))return!1}return!0}}class rL extends as{constructor(e,t,i,n){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new Hw(this._model,this._coordinatesConverter,n),this._cursors=new NT(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=ns(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new Hw(this._model,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let r=!1;null!==n&&n.length>rL.MAX_CURSOR_COUNT&&(n=n.slice(0,rL.MAX_CURSOR_COUNT),r=!0);const s=new iL(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,s,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,i,n){const r=this._cursors.getViewPositions();if(r.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,i,n);else{const s=r[0],o=new xo(s.lineNumber,s.column,s.lineNumber,s.column);this._emitCursorRevealRange(e,t,o,null,0,i,n)}}_revealPrimaryCursor(e,t,i,n,r){const s=this._cursors.getViewPositions();if(s.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),i,n,r);else{const o=s[0],a=new xo(o.lineNumber,o.column,o.lineNumber,o.column);this._emitCursorRevealRange(e,t,a,null,i,n,r)}}_emitCursorRevealRange(e,t,i,n,r,s,o){e.emitViewEvent(new HT(t,i,n,r,s,o))}saveState(){let e=[];const t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push({inSelectionMode:!n.isEmpty(),selectionStart:{lineNumber:n.selectionStartLineNumber,column:n.selectionStartColumn},position:{lineNumber:n.positionLineNumber,column:n.positionColumn}})}return e}restoreState(e,t){let i=[];for(let e=0,n=t.length;e<n;e++){const n=t[e];let r=1,s=1;n.position&&n.position.lineNumber&&(r=n.position.lineNumber),n.position&&n.position.column&&(s=n.position.column);let o=r,a=s;n.selectionStart&&n.selectionStart.lineNumber&&(o=n.selectionStart.lineNumber),n.selectionStart&&n.selectionStart.column&&(a=n.selectionStart.column),i.push({selectionStartLineNumber:o,selectionStartColumn:a,positionLineNumber:r,positionColumn:s})}this.setStates(e,"restoreState",0,Gw.fromModelSelections(i)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(this._knownModelVersionId=t.versionId,this._isHandling)return;const i=t.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new NT(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const i=Gw.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,i)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const t=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Gw.fromModelSelections(t))}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:$w.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:$w.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,Gw.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let i=[],n=[];for(let r=0,s=e.length;r<s;r++)i.push({range:e[r],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[r],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],i),s=this._model.deltaDecorations([],n);this._autoClosedActions.push(new nL(this._model,r,s))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=class{static executeCommands(e,t,i){const n={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(n,i);for(let e=0,t=n.trackedRanges.length;e<t;e++)n.model._setTrackedRange(n.trackedRanges[e],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(0===i.operations.length)return null;const n=i.operations,r=this._getLoserCursorMap(n);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let s=[];for(let e=0,t=n.length;e<t;e++)r.hasOwnProperty(n[e].identifier.major.toString())||s.push(n[e]);i.hadTrackedEditOperation&&s.length>0&&(s[0]._isTracked=!0);let o=e.model.pushEditOperations(e.selectionsBefore,s,(i=>{let n=[];for(let t=0;t<e.selectionsBefore.length;t++)n[t]=[];for(const e of i)e.identifier&&n[e.identifier.major].push(e);const r=(e,t)=>e.identifier.minor-t.identifier.minor;let s=[];for(let i=0;i<e.selectionsBefore.length;i++)n[i].length>0?(n[i].sort(r),s[i]=t[i].computeCursorState(e.model,{getInverseEditOperations:()=>n[i],getTrackedSelection:t=>{const i=parseInt(t,10),n=e.model._getTrackedRange(e.trackedRanges[i]);return 0===e.trackedRangesDirection[i]?new ko(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn):new ko(n.endLineNumber,n.endColumn,n.startLineNumber,n.startColumn)}})):s[i]=e.selectionsBefore[i];return s}));o||(o=e.selectionsBefore);let a=[];for(let e in r)r.hasOwnProperty(e)&&a.push(parseInt(e,10));a.sort(((e,t)=>t-e));for(const e of a)o.splice(e,1);return o}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let r=0,s=t.length;r<s;r++){const s=t[r];if(s){const t=this._getEditOperationsFromCommand(e,r,s);i=i.concat(t.operations),n=n||t.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){let n=[],r=0;const s=(e,s,o=!1)=>{xo.isEmpty(e)&&""===s||n.push({identifier:{major:t,minor:r++},range:e,text:s,forceMoveMarkers:o,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let o=!1;const a=(e,t,i)=>{o=!0,s(e,t,i)},l={addEditOperation:s,addTrackedEditOperation:a,trackSelection:(t,i)=>{const n=ko.liftSelection(t);let r;if(n.isEmpty())if("boolean"==typeof i)r=i?2:3;else{const t=e.model.getLineMaxColumn(n.startLineNumber);r=n.startColumn===t?2:3}else r=1;const s=e.trackedRanges.length,o=e.model._setTrackedRange(null,n,r);return e.trackedRanges[s]=o,e.trackedRangesDirection[s]=n.getDirection(),s.toString()}};try{i.getEditOperations(e.model,l)}catch(e){return Gr(e),{operations:[],hadTrackedEditOperation:!1}}return{operations:n,hadTrackedEditOperation:o}}static _getLoserCursorMap(e){(e=e.slice(0)).sort(((e,t)=>-xo.compareRangesUsingEnds(e.range,t.range)));let t={};for(let i=1;i<e.length;i++){const n=e[i-1],r=e[i];if(xo.getStartPosition(n.range).isBefore(xo.getEndPosition(r.range))){let s;s=n.identifier.major>r.identifier.major?n.identifier.major:r.identifier.major,t[s.toString()]=!0;for(let t=0;t<e.length;t++)e[t].identifier.major===s&&(e.splice(t,1),t<i&&i--,t--);i>0&&i--}}return t}}.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let i=[],n=[];for(let t=0;t<e.commands.length;t++){const r=e.commands[t];r instanceof xk&&r.enclosingRange&&r.closeCharacterRange&&(i.push(r.closeCharacterRange),n.push(r.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,n),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){e&&0!==e.length||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,r){const s=new iL(this._model,this);if(s.equals(n))return!1;const o=this._cursors.getSelections(),a=this._cursors.getViewSelections();if(e.emitViewEvent(new IT(a,o)),!n||n.cursorState.length!==s.cursorState.length||s.cursorState.some(((e,t)=>!e.modelState.equals(n.cursorState[t].modelState)))){const a=n?n.cursorState.map((e=>e.modelState.selection)):null,l=n?n.modelVersionId:0;e.emitOutgoingEvent(new eL(a,o,l,s.modelVersionId,t||"keyboard",i,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];if(!n.text||n.text.indexOf("\n")>=0)return null;const r=n.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const s=r[1],o=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(s);if(!o||1!==o.length)return null;const a=o[0].open,l=n.text.length-r[2].length-1,c=n.text.lastIndexOf(a,l-1);if(-1===c)return null;t.push([c,l])}return t}executeEdits(e,t,i,n){let r=null;"snippet"===t&&(r=this._findAutoClosingPairs(i)),r&&(i[0]._isTracked=!0);let s=[],o=[];const a=this._model.pushEditOperations(this.getSelections(),i,(e=>{if(r)for(let t=0,i=r.length;t<i;t++){const[i,n]=r[t],a=e[t],l=a.range.startLineNumber,c=a.range.startColumn-1+i,h=a.range.startColumn-1+n;s.push(new xo(l,h+1,l,h+2)),o.push(new xo(l,c+1,l,h+2))}const t=n(e);return t&&(this._isHandling=!0),t}));a&&(this._isHandling=!1,this.setSelections(e,t,a,0)),s.length>0&&this._pushAutoClosedAction(s,o)}_executeEdit(e,t,i,n=0){if(this.context.cursorConfig.readOnly)return;const r=new iL(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(e){Gr(e)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,n,r,!1)&&this._revealPrimaryCursor(t,i,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return nL.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit((()=>{"keyboard"===t&&(this._executeEditOperation(Ck.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)}),e,t)}type(e,t,i){this._executeEdit((()=>{if("keyboard"===i){const e=t.length;let i=0;for(;i<e;){const e=Pc(t,i),n=t.substr(i,e);this._executeEditOperation(Ck.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),n)),i+=e}}else this._executeEditOperation(Ck.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))}),e,i)}compositionType(e,t,i,n,r,s){if(0!==t.length||0!==i||0!==n)this._executeEdit((()=>{this._executeEditOperation(Ck.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,r))}),e,s);else if(0!==r){const t=this.getSelections().map((e=>{const t=e.getPosition();return new ko(t.lineNumber,t.column+r,t.lineNumber,t.column+r)}));this.setSelections(e,s,t,0)}}paste(e,t,i,n,r){this._executeEdit((()=>{this._executeEditOperation(Ck.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]))}),e,r,4)}cut(e,t){this._executeEdit((()=>{this._executeEditOperation(gk.cut(this.context.cursorConfig,this._model,this.getSelections()))}),e,t)}executeCommand(e,t,i){this._executeEdit((()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Kw(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,i)}executeCommands(e,t,i){this._executeEdit((()=>{this._executeEditOperation(new Kw(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,i)}}rL.MAX_CURSOR_COUNT=1e4;class sL{constructor(e,t,i,n,r,s){this.id=e,this.label=t,this.alias=i,this._precondition=n,this._run=r,this._contextKeyService=s}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}function oL(e,t,i,n,r,s,o){let a="<div>",l=n,c=0;for(let h=0,u=t.getCount();h<u;h++){const u=t.getEndOffset(h);if(u<=n)continue;let d="";for(;l<u&&l<r;l++){const t=e.charCodeAt(l);switch(t){case 9:let e=s-(l+c)%s;for(c+=e-1;e>0;)d+=o?"&#160;":" ",e--;break;case 60:d+="&lt;";break;case 62:d+="&gt;";break;case 38:d+="&amp;";break;case 0:d+="&#00;";break;case 65279:case 8232:case 8233:case 133:d+="";break;case 13:d+="&#8203";break;case 32:d+=o?"&#160;":" ";break;default:d+=String.fromCharCode(t)}}if(a+=`<span style="${t.getInlineStyle(h,i)}">${d}</span>`,u>r||l>=r)break}return a+="</div>",a}class aL{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}}class lL{constructor(e,t,i,n,r){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=r,this.prefixSum=0}}class cL{constructor(e,t,i,n){this._instanceId=$c(++cL.INSTANCE_COUNT),this._pendingChanges=new aL,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=n}static findInsertionIndex(e,t,i){let n=0,r=e.length;for(;n<r;){const s=n+r>>>1;t===e[s].afterLineNumber?i<e[s].ordinal?r=s:n=s+1:t<e[s].afterLineNumber?r=s:n=s+1}return n}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(e,i,n,r)=>{t=!0,e|=0,i|=0,n|=0,r|=0;const s=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new lL(s,e,i,n,r)),s},changeOneWhitespace:(e,i,n)=>{t=!0,i|=0,n|=0,this._pendingChanges.change({id:e,newAfterLineNumber:i,newHeight:n})},removeWhitespace:e=>{t=!0,this._pendingChanges.remove({id:e})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const t of e)this._insertWhitespace(t);for(const e of t)this._changeOneWhitespace(e.id,e.newAfterLineNumber,e.newHeight);for(const e of i){const t=this._findWhitespaceIndex(e.id);-1!==t&&this._removeWhitespace(t)}return}const n=new Set;for(const e of i)n.add(e.id);const r=new Map;for(const e of t)r.set(e.id,e);const s=e=>{let t=[];for(const i of e)if(!n.has(i.id)){if(r.has(i.id)){const e=r.get(i.id);i.afterLineNumber=e.newAfterLineNumber,i.height=e.newHeight}t.push(i)}return t},o=s(this._arr).concat(s(e));o.sort(((e,t)=>e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber)),this._arr=o,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=cL.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const n=this._findWhitespaceIndex(e);if(-1!==n&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){const e=this._arr[n];this._removeWhitespace(n),e.afterLineNumber=t,this._insertWhitespace(e)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const n=this._arr[i].afterLineNumber;e<=n&&n<=t?this._arr[i].afterLineNumber=e-1:n>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){e<=this._arr[i].afterLineNumber&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),0===this._arr.length?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e|=0;let t=Math.max(0,this._prefixSumValidIndex+1);0===t&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();return this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e|=0;const t=this._findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e|=0;const t=this._arr;let i=0,n=t.length-1;for(;i<=n;){const r=i+((n-i|0)/2|0)|0;if(t[r].afterLineNumber<e){if(r+1>=t.length||t[r+1].afterLineNumber>=e)return r;i=r+1|0}else n=r-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e|=0;const t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){let t;this._checkPendingChanges(),t=(e|=0)>1?this._lineHeight*(e-1):0;return t+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e)+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),-1===this._minWidth){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();return e>this.getLinesTotalHeight()}isInTopPadding(e){return 0!==this._paddingTop&&(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(0===this._paddingBottom)return!1;this._checkPendingChanges();return e>=this.getLinesTotalHeight()-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),(e|=0)<0)return 1;const t=0|this._lineCount,i=this._lineHeight;let n=1,r=t;for(;n<r;){const t=(n+r)/2|0,s=0|this.getVerticalOffsetForLineNumber(t);if(e>=s+i)n=t+1;else{if(e>=s)return t;r=t}}return n>t?t:n}getLinesViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;const i=this._lineHeight,n=0|this.getLineNumberAtOrAfterVerticalOffset(e),r=0|this.getVerticalOffsetForLineNumber(n);let s=0|this._lineCount,o=0|this.getFirstWhitespaceIndexAfterLineNumber(n);const a=0|this.getWhitespacesCount();let l,c;-1===o?(o=a,c=s+1,l=0):(c=0|this.getAfterLineNumberForWhitespaceIndex(o),l=0|this.getHeightForWhitespaceIndex(o));let h=r,u=h;const d=5e5;let f=0;r>=d&&(f=Math.floor(r/d)*d,f=Math.floor(f/i)*i,u-=f);const p=[],g=e+(t-e)/2;let m=-1;for(let e=n;e<=s;e++){if(-1===m){const t=h,n=h+i;(t<=g&&g<n||t>g)&&(m=e)}for(h+=i,p[e-n]=u,u+=i;c===e;)u+=l,h+=l,o++,o>=a?c=s+1:(c=0|this.getAfterLineNumberForWhitespaceIndex(o),l=0|this.getHeightForWhitespaceIndex(o));if(h>=t){s=e;break}}-1===m&&(m=s);const b=0|this.getVerticalOffsetForLineNumber(s);let v=n,y=s;return v<y&&r<e&&v++,v<y&&b+i>t&&y--,{bigNumbersDelta:f,startLineNumber:n,endLineNumber:s,relativeVerticalOffset:p,centeredLineNumber:m,completelyVisibleStartLineNumber:v,completelyVisibleEndLineNumber:y}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e|=0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i,n;return i=t>=1?this._lineHeight*t:0,n=e>0?this.getWhitespacesAccumulatedHeight(e-1):0,i+n+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e|=0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;if(e>=this.getVerticalOffsetForWhitespaceIndex(i)+this.getHeightForWhitespaceIndex(i))return-1;for(;t<i;){const n=Math.floor((t+i)/2),r=this.getVerticalOffsetForWhitespaceIndex(n);if(e>=r+this.getHeightForWhitespaceIndex(n))t=n+1;else{if(e>=r)return n;i=n}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e|=0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0)return null;if(t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const n=this.getHeightForWhitespaceIndex(t);return{id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:i,height:n}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];let r=[];for(let e=i;e<=n;e++){const i=this.getVerticalOffsetForWhitespaceIndex(e),n=this.getHeightForWhitespaceIndex(e);if(i>=t)break;r.push({id:this.getIdForWhitespaceIndex(e),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(e),verticalOffset:i,height:n})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}}cL.INSTANCE_COUNT=0;class hL{constructor(e,t,i,n){(e|=0)<0&&(e=0),(t|=0)<0&&(t=0),(i|=0)<0&&(i=0),(n|=0)<0&&(n=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=n,this.scrollHeight=Math.max(i,n)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class uL extends as{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new ms),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new hL(0,0,0,0),this._scrollable=this._register(new _E(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,n=t.contentHeight!==e.contentHeight;(i||n)&&this._onDidContentSizeChange.fire(new YT(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class dL extends as{constructor(e,t,i){super(),this._configuration=e;const n=this._configuration.options,r=n.get(128),s=n.get(72);this._linesLayout=new cL(t,n.get(56),s.top,s.bottom),this._scrollable=this._register(new uL(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new hL(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(101)?125:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(56)&&this._linesLayout.setLineHeight(t.get(56)),e.hasChanged(72)){const e=t.get(72);this._linesLayout.setPadding(e.top,e.bottom)}if(e.hasChanged(128)){const e=t.get(128),i=e.contentWidth,n=e.height,r=this._scrollable.getScrollDimensions(),s=r.contentWidth;this._scrollable.setScrollDimensions(new hL(i,r.contentWidth,n,this._getContentHeight(i,n,s)))}else this._updateHeight();e.hasChanged(101)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(90);return 2===i.horizontal||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,i){const n=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return n.get(92)?r+=Math.max(0,t-n.get(56)-n.get(72).bottom):r+=this._getHorizontalScrollbarHeight(e,i),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,n=e.contentWidth;this._scrollable.setScrollDimensions(new hL(t,e.contentWidth,i,this._getContentHeight(t,i,n)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new ng(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new ng(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,i=t.get(129),n=t.get(40);if(i.isViewportWrapping){const i=t.get(128),r=t.get(62);return e>i.contentWidth+n.typicalHalfwidthCharacterWidth&&r.enabled&&"right"===r.side?e+i.verticalScrollbarWidth:e}{const i=t.get(91)*n.typicalHalfwidthCharacterWidth,r=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+i,r)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new hL(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t);return{scrollTop:t,scrollTopWithoutViewZones:t-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i),scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){1===t?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class fL{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column)}convertModelRangeToViewRange(e){return this._lines.convertModelRangeToViewRange(e)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}}class pL{constructor(e){this._counts=e,this._isValid=!1,this._validEndIndex=-1,this._modelToView=[],this._viewToModel=[]}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._counts.length;e<t;e++){const t=this._counts[e],i=e>0?this._modelToView[e-1]:0;this._modelToView[e]=i+t;for(let n=0;n<t;n++)this._viewToModel[i+n]=e}this._modelToView.length=this._counts.length,this._viewToModel.length=this._modelToView[this._modelToView.length-1],this._isValid=!0,this._validEndIndex=this._counts.length-1}}changeValue(e,t){this._counts[e]!==t&&(this._counts[e]=t,this._invalidate(e))}removeValues(e,t){this._counts.splice(e,t),this._invalidate(e)}insertValues(e,t){this._counts=wp(this._counts,e,t),this._invalidate(e)}getTotalValue(){return this._ensureValid(),this._viewToModel.length}getAccumulatedValue(e){return this._ensureValid(),this._modelToView[e]}getIndexOf(e){this._ensureValid();const t=this._viewToModel[e],i=t>0?this._modelToView[t-1]:0;return new ep(t,e-i)}}class gL{constructor(e,t,i,n,r,s,o,a){this.model=e,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=t,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=n,this.tabSize=r,this.wrappingStrategy=s,this.wrappingColumn=o,this.wrappingIndent=a,this._constructLines(!0,null)}dispose(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])}createCoordinatesConverter(){return new fL(this)}_constructLines(e,t){this.lines=[],e&&(this.hiddenAreasIds=[]);let i=this.model.getLinesContent();const n=i.length,r=this.createLineBreaksComputer();for(let e=0;e<n;e++)r.addRequest(i[e],t?t[e]:null);const s=r.finalize();let o=[],a=this.hiddenAreasIds.map((e=>this.model.getDecorationRange(e))).sort(xo.compareRangesUsingStarts),l=1,c=0,h=-1,u=h+1<a.length?c+1:n+2;for(let e=0;e<n;e++){let t=e+1;t===u&&(h++,l=a[h].startLineNumber,c=a[h].endLineNumber,u=h+1<a.length?c+1:n+2);let i=t>=l&&t<=c,r=SL(s[e],!i);o[e]=r.getViewLineCount(),this.lines[e]=r}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new pL(o)}getHiddenAreas(){return this.hiddenAreasIds.map((e=>this.model.getDecorationRange(e)))}_reduceRanges(e){if(0===e.length)return[];let t=e.map((e=>this.model.validateRange(e))).sort(xo.compareRangesUsingStarts),i=[],n=t[0].startLineNumber,r=t[0].endLineNumber;for(let e=1,s=t.length;e<s;e++){let s=t[e];s.startLineNumber>r+1?(i.push(new xo(n,1,r,1)),n=s.startLineNumber,r=s.endLineNumber):s.endLineNumber>r&&(r=s.endLineNumber)}return i.push(new xo(n,1,r,1)),i}setHiddenAreas(e){let t=this._reduceRanges(e),i=this.hiddenAreasIds.map((e=>this.model.getDecorationRange(e))).sort(xo.compareRangesUsingStarts);if(t.length===i.length){let e=!1;for(let n=0;n<t.length;n++)if(!t[n].equalsRange(i[n])){e=!0;break}if(!e)return!1}let n=[];for(const e of t)n.push({range:e,options:Dw.EMPTY});this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,n);let r=t,s=1,o=0,a=-1,l=a+1<r.length?o+1:this.lines.length+2,c=!1;for(let e=0;e<this.lines.length;e++){let t=e+1;t===l&&(a++,s=r[a].startLineNumber,o=r[a].endLineNumber,l=a+1<r.length?o+1:this.lines.length+2);let i=!1;if(t>=s&&t<=o?this.lines[e].isVisible()&&(this.lines[e]=this.lines[e].setVisible(!1),i=!0):(c=!0,this.lines[e].isVisible()||(this.lines[e]=this.lines[e].setVisible(!0),i=!0)),i){let t=this.lines[e].getViewLineCount();this.prefixSumComputer.changeValue(e,t)}}return c||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return!(e<1||e>this.lines.length)&&this.lines[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.lines.length?1:this.lines[e-1].getViewLineCount()}setTabSize(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,n){const r=this.fontInfo.equals(e),s=this.wrappingStrategy===t,o=this.wrappingColumn===i,a=this.wrappingIndent===n;if(r&&s&&o&&a)return!1;const l=r&&s&&!o&&a;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=n;let c=null;if(l){c=[];for(let e=0,t=this.lines.length;e<t;e++)c[e]=this.lines[e].getLineBreakData()}return this._constructLines(!1,c),!0}createLineBreaksComputer(){return("advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(e<=this._validModelVersionId)return null;let n=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,r=this.prefixSumComputer.getAccumulatedValue(i-1);return this.lines.splice(t-1,i-t+1),this.prefixSumComputer.removeValues(t-1,i-t+1),new VT(n,r)}onModelLinesInserted(e,t,i,n){if(e<=this._validModelVersionId)return null;const r=t>2&&!this.lines[t-2].isVisible();let s=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,o=0,a=[],l=[];for(let e=0,t=n.length;e<t;e++){let t=SL(n[e],!r);a.push(t);let i=t.getViewLineCount();o+=i,l[e]=i}return this.lines=this.lines.slice(0,t-1).concat(a).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,l),new zT(s,s+o-1)}onModelLineChanged(e,t,i){if(e<=this._validModelVersionId)return[!1,null,null,null];let n=t-1,r=this.lines[n].getViewLineCount(),s=SL(i,this.lines[n].isVisible());this.lines[n]=s;let o=this.lines[n].getViewLineCount(),a=!1,l=0,c=-1,h=0,u=-1,d=0,f=-1;r>o?(l=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,c=l+o-1,d=c+1,f=d+(r-o)-1,a=!0):r<o?(l=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,c=l+r-1,h=c+1,u=h+(o-r)-1,a=!0):(l=1===t?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,c=l+o-1),this.prefixSumComputer.changeValue(n,o);return[a,l<=c?new WT(l,c):null,h<=u?new zT(h,u):null,d<=f?new VT(d,f):null]}acceptVersionId(e){this._validModelVersionId=e,1!==this.lines.length||this.lines[0].isVisible()||this.setHiddenAreas([])}getViewLineCount(){return this.prefixSumComputer.getTotalValue()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:0|e}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),s=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),o=this.model.getActiveIndentGuide(n.lineNumber,r.lineNumber,s.lineNumber),a=this.convertModelPositionToViewPosition(o.startLineNumber,1),l=this.convertModelPositionToViewPosition(o.endLineNumber,this.model.getLineMaxColumn(o.endLineNumber));return{startLineNumber:a.lineNumber,endLineNumber:l.lineNumber,indent:o.indent}}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),n=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[],s=[],o=[];const a=i.lineNumber-1,l=n.lineNumber-1;let c=null;for(let e=a;e<=l;e++){const t=this.lines[e];if(t.isVisible()){let n=t.getViewLineNumberOfModelPosition(0,e===a?i.column:1),r=t.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(e+1)),l=r-n+1,h=0;l>1&&1===t.getViewLineMinColumn(this.model,e+1,r)&&(h=0===n?1:2),s.push(l),o.push(h),null===c&&(c=new Co(e+1,0))}else null!==c&&(r=r.concat(this.model.getLinesIndentGuides(c.lineNumber,e)),c=null)}null!==c&&(r=r.concat(this.model.getLinesIndentGuides(c.lineNumber,n.lineNumber)),c=null);const h=t-e+1;let u=new Array(h),d=0;for(let e=0,t=r.length;e<t;e++){let t,i=r[e],n=Math.min(h-d,s[e]),a=o[e];t=2===a?0:1===a?1:n;for(let e=0;e<n;e++)e===t&&(i=0),u[d++]=i}return u}getViewLineContent(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineContent(this.model,i+1,n)}getViewLineLength(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineLength(this.model,i+1,n)}getViewLineMinColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineMinColumn(this.model,i+1,n)}getViewLineMaxColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineMaxColumn(this.model,i+1,n)}getViewLineData(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineData(this.model,i+1,n)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let n=this.prefixSumComputer.getIndexOf(e-1),r=e,s=n.index,o=n.remainder,a=[];for(let n=s,l=this.model.getLineCount();n<l;n++){let l=this.lines[n];if(!l.isVisible())continue;let c=n===s?o:0,h=l.getViewLineCount()-c,u=!1;r+h>t&&(u=!0,h=t-r+1);let d=c+h;if(l.getViewLinesData(this.model,n+1,c,d,r-e,i,a),r+=h,u)break}return a}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);let n=this.prefixSumComputer.getIndexOf(e-1),r=n.index,s=n.remainder,o=this.lines[r],a=o.getViewLineMinColumn(this.model,r+1,s),l=o.getViewLineMaxColumn(this.model,r+1,s);t<a&&(t=a),t>l&&(t=l);let c=o.getModelColumnOfViewPosition(s,t);return this.model.validatePosition(new Co(r+1,c)).equals(i)?new Co(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),n=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new xo(i.lineNumber,i.column,n.lineNumber,n.column)}convertViewPositionToModelPosition(e,t){e=this._toValidViewLineNumber(e);let i=this.prefixSumComputer.getIndexOf(e-1),n=i.index,r=i.remainder,s=this.lines[n].getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new Co(n+1,s))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new xo(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t){const i=this.model.validatePosition(new Co(e,t)),n=i.lineNumber,r=i.column;let s=n-1,o=!1;for(;s>0&&!this.lines[s].isVisible();)s--,o=!0;if(0===s&&!this.lines[s].isVisible())return new Co(1,1);const a=1+(0===s?0:this.prefixSumComputer.getAccumulatedValue(s-1));let l;return l=o?this.lines[s].getViewPositionOfModelPosition(a,this.model.getLineMaxColumn(s+1)):this.lines[n-1].getViewPositionOfModelPosition(a,r),l}convertModelRangeToViewRange(e){let t=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn);return e.startLineNumber===e.endLineNumber&&t.lineNumber!==i.lineNumber&&i.column===this.getViewLineMinColumn(i.lineNumber)?new xo(t.lineNumber,t.column,i.lineNumber-1,this.getViewLineMaxColumn(i.lineNumber-1)):new xo(t.lineNumber,t.column,i.lineNumber,i.column)}_getViewLineNumberForModelPosition(e,t){let i=e-1;if(this.lines[i].isVisible()){const e=1+(0===i?0:this.prefixSumComputer.getAccumulatedValue(i-1));return this.lines[i].getViewLineNumberOfModelPosition(e,t)}for(;i>0&&!this.lines[i].isVisible();)i--;if(0===i&&!this.lines[i].isVisible())return 1;const n=1+(0===i?0:this.prefixSumComputer.getAccumulatedValue(i-1));return this.lines[i].getViewLineNumberOfModelPosition(n,this.model.getLineMaxColumn(i+1))}getAllOverviewRulerDecorations(e,t,i){const n=this.model.getOverviewRulerDecorations(e,t),r=new kL;for(const e of n){const t=e.options.overviewRuler,n=t?t.position:0;if(0===n)continue;const s=t.getColor(i),o=this._getViewLineNumberForModelPosition(e.range.startLineNumber,e.range.startColumn),a=this._getViewLineNumberForModelPosition(e.range.endLineNumber,e.range.endColumn);r.accept(s,o,a,n)}return r.result}getDecorationsInRange(e,t,i){const n=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(r.lineNumber-n.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new xo(n.lineNumber,1,r.lineNumber,r.column),t,i);let s=[];const o=n.lineNumber-1,a=r.lineNumber-1;let l=null;for(let e=o;e<=a;e++){if(this.lines[e].isVisible())null===l&&(l=new Co(e+1,e===o?n.column:1));else if(null!==l){const n=this.model.getLineMaxColumn(e);s=s.concat(this.model.getDecorationsInRange(new xo(l.lineNumber,l.column,e,n),t,i)),l=null}}null!==l&&(s=s.concat(this.model.getDecorationsInRange(new xo(l.lineNumber,l.column,r.lineNumber,r.column),t,i)),l=null),s.sort(((e,t)=>{const i=xo.compareRangesUsingStarts(e.range,t.range);return 0===i?e.id<t.id?-1:e.id>t.id?1:0:i}));let c=[],h=0,u=null;for(const e of s){const t=e.id;u!==t&&(u=t,c[h++]=e)}return c}normalizePosition(e,t){const i=this._toValidViewLineNumber(e.lineNumber),n=this.prefixSumComputer.getIndexOf(i-1),r=n.index,s=n.remainder;return this.lines[r].normalizePosition(this.model,r+1,s,e,t)}getLineIndentColumn(e){const t=this._toValidViewLineNumber(e),i=this.prefixSumComputer.getIndexOf(t-1),n=i.index;return 0===i.remainder?this.model.getLineIndentColumn(n+1):0}}class mL{constructor(){}isVisible(){return!0}setVisible(e){return e?this:bL.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){let n=e.getLineTokens(t),r=n.getLineContent();return new ag(r,!1,1,r.length+1,0,n.inflate())}getViewLinesData(e,t,i,n,r,s,o){s[r]?o[r]=this.getViewLineData(e,t,0):o[r]=null}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Co(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i,n,r){return n}}mL.INSTANCE=new mL;class bL{constructor(){}isVisible(){return!1}setVisible(e){return e?mL.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,n,r,s,o){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i,n,r){throw new Error("Not supported")}}bL.INSTANCE=new bL;class vL{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.breakOffsets.length:0}getInputStartOffsetOfOutputLineIndex(e){return sg.getInputOffsetOfOutputPosition(this._lineBreakData.breakOffsets,e,0)}getInputEndOffsetOfOutputLineIndex(e,t,i){return i+1===this._lineBreakData.breakOffsets.length?e.getLineMaxColumn(t)-1:sg.getInputOffsetOfOutputPosition(this._lineBreakData.breakOffsets,i+1,0)}getViewLineContent(e,t,i){if(!this._isVisible)throw new Error("Not supported");let n=this.getInputStartOffsetOfOutputLineIndex(i),r=this.getInputEndOffsetOfOutputLineIndex(e,t,i),s=e.getValueInRange({startLineNumber:t,startColumn:n+1,endLineNumber:t,endColumn:r+1});return i>0&&(s=_L(this._lineBreakData.wrappedTextIndentLength)+s),s}getViewLineLength(e,t,i){if(!this._isVisible)throw new Error("Not supported");let n=this.getInputStartOffsetOfOutputLineIndex(i),r=this.getInputEndOffsetOfOutputLineIndex(e,t,i)-n;return i>0&&(r=this._lineBreakData.wrappedTextIndentLength+r),r}getViewLineMinColumn(e,t,i){if(!this._isVisible)throw new Error("Not supported");return this._getViewLineMinColumn(i)}_getViewLineMinColumn(e){return e>0?this._lineBreakData.wrappedTextIndentLength+1:1}getViewLineMaxColumn(e,t,i){if(!this._isVisible)throw new Error("Not supported");return this.getViewLineLength(e,t,i)+1}getViewLineData(e,t,i){if(!this._isVisible)throw new Error("Not supported");let n=this.getInputStartOffsetOfOutputLineIndex(i),r=this.getInputEndOffsetOfOutputLineIndex(e,t,i),s=e.getValueInRange({startLineNumber:t,startColumn:n+1,endLineNumber:t,endColumn:r+1});i>0&&(s=_L(this._lineBreakData.wrappedTextIndentLength)+s);let o=i>0?this._lineBreakData.wrappedTextIndentLength+1:1,a=s.length+1,l=i+1<this.getViewLineCount(),c=0;i>0&&(c=this._lineBreakData.wrappedTextIndentLength);let h=e.getLineTokens(t);const u=0===i?0:this._lineBreakData.breakOffsetsVisibleColumn[i-1];return new ag(s,l,o,a,u,h.sliceAndInflate(n,r,c))}getViewLinesData(e,t,i,n,r,s,o){if(!this._isVisible)throw new Error("Not supported");for(let a=i;a<n;a++){let n=r+a-i;s[n]?o[n]=this.getViewLineData(e,t,a):o[n]=null}}getModelColumnOfViewPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let i=t-1;return e>0&&(i<this._lineBreakData.wrappedTextIndentLength?i=0:i-=this._lineBreakData.wrappedTextIndentLength),sg.getInputOffsetOfOutputPosition(this._lineBreakData.breakOffsets,e,i)+1}getViewPositionOfModelPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let i=sg.getOutputPositionOfInputOffset(this._lineBreakData.breakOffsets,t-1),n=i.outputLineIndex,r=i.outputOffset+1;return n>0&&(r+=this._lineBreakData.wrappedTextIndentLength),new Co(e+n,r)}getViewLineNumberOfModelPosition(e,t){if(!this._isVisible)throw new Error("Not supported");return e+sg.getOutputPositionOfInputOffset(this._lineBreakData.breakOffsets,t-1).outputLineIndex}normalizePosition(e,t,i,n,r){if(0===r){if(i>0&&n.column===this._getViewLineMinColumn(i))return new Co(n.lineNumber-1,this.getViewLineMaxColumn(e,t,i-1))}else if(1===r){if(i<this.getViewLineCount()-1&&n.column===this.getViewLineMaxColumn(e,t,i))return new Co(n.lineNumber+1,this._getViewLineMinColumn(i+1))}return n}}let yL=[""];function _L(e){if(e>=yL.length)for(let t=1;t<=e;t++)yL[t]=wL(t);return yL[e]}function wL(e){return new Array(e+1).join(" ")}function SL(e,t){return null===e?t?mL.INSTANCE:bL.INSTANCE:new vL(e,t)}class CL{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}}class xL{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new CL(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,n){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new VT(t,i)}onModelLinesInserted(e,t,i,n){return new zT(t,i)}onModelLineChanged(e,t,i){return[!1,new WT(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesIndentGuides(e,t){const i=t-e+1;let n=new Array(i);for(let e=0;e<i;e++)n[e]=0;return n}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),i=t.getLineContent();return new ag(i,!1,1,i.length+1,0,t.inflate())}getViewLinesData(e,t,i){const n=this.model.getLineCount();e=Math.min(Math.max(1,e),n),t=Math.min(Math.max(1,t),n);let r=[];for(let n=e;n<=t;n++){let t=n-e;i[t]||(r[t]=null),r[t]=this.getViewLineData(n)}return r}getAllOverviewRulerDecorations(e,t,i){const n=this.model.getOverviewRulerDecorations(e,t),r=new kL;for(const e of n){const t=e.options.overviewRuler,n=t?t.position:0;if(0===n)continue;const s=t.getColor(i),o=e.range.startLineNumber,a=e.range.endLineNumber;r.accept(s,o,a,n)}return r.result}getDecorationsInRange(e,t,i){return this.model.getDecorationsInRange(e,t,i)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}}class kL{constructor(){this.result=Object.create(null)}accept(e,t,i,n){let r=this.result[e];if(r){const e=r[r.length-3],s=r[r.length-1];if(e===n&&s+1>=t)return void(i>s&&(r[r.length-1]=i));r.push(n,t,i)}else this.result[e]=[n,t,i]}}class EL{constructor(e,t,i,n,r){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=n,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const n=e.range,r=e.options;let s;if(r.isWholeLine){const e=this._coordinatesConverter.convertModelPositionToViewPosition(new Co(n.startLineNumber,1)),t=this._coordinatesConverter.convertModelPositionToViewPosition(new Co(n.endLineNumber,this.model.getLineMaxColumn(n.endLineNumber)));s=new xo(e.lineNumber,e.column,t.lineNumber,t.column)}else s=this._coordinatesConverter.convertModelRangeToViewRange(n);i=new hg(s,r),this._decorationsCache[t]=i}return i}getDecorationsViewportData(e){let t=null!==this._cachedModelDecorationsResolver;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,Dr(this.configuration.options)),i=e.startLineNumber,n=e.endLineNumber;let r=[],s=0,o=[];for(let e=i;e<=n;e++)o[e-i]=[];for(let e=0,a=t.length;e<a;e++){let a=t[e],l=a.options,c=this._getOrCreateViewModelDecoration(a),h=c.range;if(r[s++]=c,l.inlineClassName){let e=new cg(h,l.inlineClassName,l.inlineClassNameAffectsLetterSpacing?3:0),t=Math.max(i,h.startLineNumber),r=Math.min(n,h.endLineNumber);for(let n=t;n<=r;n++)o[n-i].push(e)}if(l.beforeContentClassName&&i<=h.startLineNumber&&h.startLineNumber<=n){let e=new cg(new xo(h.startLineNumber,h.startColumn,h.startLineNumber,h.startColumn),l.beforeContentClassName,1);o[h.startLineNumber-i].push(e)}if(l.afterContentClassName&&i<=h.endLineNumber&&h.endLineNumber<=n){let e=new cg(new xo(h.endLineNumber,h.endColumn,h.endLineNumber,h.endColumn),l.afterContentClassName,2);o[h.endLineNumber-i].push(e)}}return{decorations:r,inlineDecorations:o}}}class TL extends as{constructor(e,t,i,n,r,s){if(super(),this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new qT,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Vw(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new Qa((()=>this.tokenizeViewport()),50)),this._updateConfigurationViewLineCount=this._register(new Qa((()=>this._updateConfigurationViewLineCountNow()),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new xL(this.model);else{const e=this._configuration.options,t=e.get(40),i=e.get(122),s=e.get(129),o=e.get(121);this._lines=new gL(this.model,n,r,t,this.model.getOptions().tabSize,i,s.wrappingColumn,o)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new rL(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new dL(this._configuration,this.getLineCount(),s)),this._register(this.viewLayout.onDidScroll((e=>{e.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new jT(e)),this._eventDispatcher.emitOutgoingEvent(new QT(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))}))),this._register(this.viewLayout.onDidContentSizeChange((e=>{this._eventDispatcher.emitOutgoingEvent(e)}))),this._decorations=new EL(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast((e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}}))),this._register(HE.getInstance().onDidChange((()=>{this._eventDispatcher.emitSingleViewEvent(new KT)}))),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=this.coordinatesConverter.convertViewPositionToModelPosition(new Co(e.startLineNumber,1)),i=this.coordinatesConverter.convertViewPositionToModelPosition(new Co(e.endLineNumber,1));this.model.tokenizeViewport(t.lineNumber,i.lineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new RT(e)),this._eventDispatcher.emitOutgoingEvent(new XT(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new MT)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new OT)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new UT)}_onConfigurationChanged(e,t){let i=null;if(-1!==this._viewportStartLine){let e=new Co(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));i=this.coordinatesConverter.convertViewPositionToModelPosition(e)}let n=!1;const r=this._configuration.options,s=r.get(40),o=r.get(122),a=r.get(129),l=r.get(121);if(this._lines.setWrappingSettings(s,o,a.wrappingColumn,l)&&(e.emitViewEvent(new PT),e.emitViewEvent(new FT),e.emitViewEvent(new AT(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),0!==this.viewLayout.getCurrentScrollTop()&&(n=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(78)&&(this._decorations.reset(),e.emitViewEvent(new AT(null))),e.emitViewEvent(new DT(t)),this.viewLayout.onConfigurationChanged(t),n&&i){const e=this.coordinatesConverter.convertModelPositionToViewPosition(i),t=this.viewLayout.getVerticalOffsetForLineNumber(e.lineNumber);this.viewLayout.setScrollPosition({scrollTop:t+this._viewportStartLineDelta},1)}Vw.shouldRecreate(t)&&(this.cursorConfig=new Vw(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeRawContentFast((e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let i=!1,n=!1;const r=e.changes,s=e.versionId,o=this._lines.createLineBreaksComputer();for(const e of r)switch(e.changeType){case 4:for(const t of e.detail)o.addRequest(t,null);break;case 2:o.addRequest(e.detail,null)}const a=o.finalize();let l=0;for(const e of r)switch(e.changeType){case 1:this._lines.onModelFlushed(),t.emitViewEvent(new PT),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break;case 3:{const n=this._lines.onModelLinesDeleted(s,e.fromLineNumber,e.toLineNumber);null!==n&&(t.emitViewEvent(n),this.viewLayout.onLinesDeleted(n.fromLineNumber,n.toLineNumber)),i=!0;break}case 4:{const n=a.slice(l,l+e.detail.length);l+=e.detail.length;const r=this._lines.onModelLinesInserted(s,e.fromLineNumber,e.toLineNumber,n);null!==r&&(t.emitViewEvent(r),this.viewLayout.onLinesInserted(r.fromLineNumber,r.toLineNumber)),i=!0;break}case 2:{const i=a[l];l++;const[r,o,c,h]=this._lines.onModelLineChanged(s,e.lineNumber,i);n=r,o&&t.emitViewEvent(o),c&&(t.emitViewEvent(c),this.viewLayout.onLinesInserted(c.fromLineNumber,c.toLineNumber)),h&&(t.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber));break}}this._lines.acceptVersionId(s),this.viewLayout.onHeightMaybeChanged(),!i&&n&&(t.emitViewEvent(new FT),t.emitViewEvent(new AT(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const e=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(e){const t=this.coordinatesConverter.convertModelPositionToViewPosition(e.getStartPosition()),i=this.viewLayout.getVerticalOffsetForLineNumber(t.lineNumber);this.viewLayout.setScrollPosition({scrollTop:i+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}}))),this._register(this.model.onDidChangeTokens((e=>{let t=[];for(let i=0,n=e.ranges.length;i<n;i++){const n=e.ranges[i],r=this.coordinatesConverter.convertModelPositionToViewPosition(new Co(n.fromLineNumber,1)).lineNumber,s=this.coordinatesConverter.convertModelPositionToViewPosition(new Co(n.toLineNumber,this.model.getLineMaxColumn(n.toLineNumber))).lineNumber;t[i]={fromLineNumber:r,toLineNumber:s}}this._eventDispatcher.emitSingleViewEvent(new GT(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()}))),this._register(this.model.onDidChangeLanguageConfiguration((e=>{this._eventDispatcher.emitSingleViewEvent(new BT),this.cursorConfig=new Vw(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)}))),this._register(this.model.onDidChangeLanguage((e=>{this.cursorConfig=new Vw(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)}))),this._register(this.model.onDidChangeOptions((e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const e=this._eventDispatcher.beginEmitViewEvents();e.emitViewEvent(new PT),e.emitViewEvent(new FT),e.emitViewEvent(new AT(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Vw(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)}))),this._register(this.model.onDidChangeDecorations((e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new AT(e))})))}setHiddenAreas(e){try{const t=this._eventDispatcher.beginEmitViewEvents();this._lines.setHiddenAreas(e)&&(t.emitViewEvent(new PT),t.emitViewEvent(new FT),t.emitViewEvent(new AT(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(128),t=this._configuration.options.get(56),i=Math.max(20,Math.round(e.height/t)),n=this.viewLayout.getLinesViewportData(),r=Math.max(1,n.completelyVisibleStartLineNumber-i),s=Math.min(this.getLineCount(),n.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new xo(r,this.getLineMinColumn(r),s,this.getLineMaxColumn(s)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(0===i.length)return[t];let n=[],r=0,s=t.startLineNumber,o=t.startColumn,a=t.endLineNumber,l=t.endColumn;for(let e=0,t=i.length;e<t;e++){const t=i[e].startLineNumber,l=i[e].endLineNumber;l<s||(t>a||(s<t&&(n[r++]=new xo(s,o,t-1,this.model.getLineMaxColumn(t-1))),s=l+1,o=1))}return(s<a||s===a&&o<l)&&(n[r++]=new xo(s,o,a,l)),n}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new xo(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,n=t.completelyVisibleEndLineNumber;return new xo(i,this.getLineMinColumn(i),n,this.getLineMaxColumn(n))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),n=this.coordinatesConverter.convertViewPositionToModelPosition(new Co(i,this.getLineMinColumn(i))),r=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:n,firstPositionDeltaTop:r}}reduceRestoreState(e){if(void 0===e.firstPosition)return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:n}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStartLine=e;let n=this.coordinatesConverter.convertViewPositionToModelPosition(new Co(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new xo(n.lineNumber,n.column,n.lineNumber,n.column),1);const r=this.viewLayout.getVerticalOffsetForLineNumber(e),s=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=s-r}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=gc(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=bc(this.getLineContent(e));return-1===t?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getViewLineRenderingData(e,t){let i=this.model.mightContainRTL(),n=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),s=this._lines.getViewLineData(t),o=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return new lg(s.minColumn,s.maxColumn,s.content,s.continuesWithWrappedLine,i,n,s.tokens,o,r,s.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){let n=this._lines.getViewLinesData(e,t,i);return new og(this.getTabSize(),n)}getAllOverviewRulerDecorations(e){return this._lines.getAllOverviewRulerDecorations(this._editorId,Dr(this._configuration.options),e)}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const e=t.options.overviewRuler;e&&e.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const e=t.options.minimap;e&&e.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,i){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);2===this.model.getEOL().length&&(t<0?t-=i:t+=i);const r=this.model.getOffsetAt(n)+t;return this.model.getPositionAt(r)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,i){const n=i?"\r\n":this.model.getEOL();(e=e.slice(0)).sort(xo.compareRangesUsingStarts);let r=!1,s=!1;for(const t of e)t.isEmpty()?r=!0:s=!0;if(!s){if(!t)return"";const i=e.map((e=>e.startLineNumber));let r="";for(let e=0;e<i.length;e++)e>0&&i[e-1]===i[e]||(r+=this.model.getLineContent(i[e])+n);return r}if(r&&t){let t=[],n=0;for(const r of e){const e=r.startLineNumber;r.isEmpty()?e!==n&&t.push(this.model.getLineContent(e)):t.push(this.model.getValueInRange(r,i?2:0)),n=e}return 1===t.length?t[0]:t}let o=[];for(const t of e)t.isEmpty()||o.push(this.model.getValueInRange(t,i?2:0));return 1===o.length?o[0]:o}getRichTextToCopy(e,t){const i=this.model.getLanguageIdentifier();if(1===i.id)return null;if(1!==e.length)return null;let n=e[0];if(n.isEmpty()){if(!t)return null;const e=n.startLineNumber;n=new xo(e,this.model.getLineMinColumn(e),e,this.model.getLineMaxColumn(e))}const r=this._configuration.options.get(40),s=this._getColorMap();let o;if(/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===Ar.fontFamily)o=Ar.fontFamily;else{o=r.fontFamily,o=o.replace(/"/g,"'");if(!/[,']/.test(o)){/[+ ]/.test(o)&&(o=`'${o}'`)}o=`${o}, ${Ar.fontFamily}`}return{mode:i.language,html:`<div style="color: ${s[1]};background-color: ${s[2]};font-family: ${o};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(n,s)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,s=e.endColumn,o=this.getTabSize();let a="";for(let e=i;e<=r;e++){const l=this.model.getLineTokens(e),c=l.getLineContent(),h=e===i?n-1:0,u=e===r?s-1:c.length;a+=""===c?"<br>":oL(c,l.inflate(),t,h,u,o,Yn)}return a}_getColorMap(){let e=Pd.getColorMap(),t=["#000000"];if(e)for(let i=1,n=e.length;i<n;i++)t[i]=vw.Format.CSS.formatHex(e[i]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){this._withViewEventsCollector((n=>this._cursor.setStates(n,e,t,i)))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector((n=>this._cursor.setSelections(n,e,t,i)))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector((t=>this._cursor.restoreState(t,e)))}_executeCursorEdit(e){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new tL):this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit((n=>this._cursor.executeEdits(n,e,t,i)))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit((e=>this._cursor.startComposition(e)))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit((t=>this._cursor.endComposition(t,e)))}type(e,t){this._executeCursorEdit((i=>this._cursor.type(i,e,t)))}compositionType(e,t,i,n,r){this._executeCursorEdit((s=>this._cursor.compositionType(s,e,t,i,n,r)))}paste(e,t,i,n){this._executeCursorEdit((r=>this._cursor.paste(r,e,t,i,n)))}cut(e){this._executeCursorEdit((t=>this._cursor.cut(t,e)))}executeCommand(e,t){this._executeCursorEdit((i=>this._cursor.executeCommand(i,e,t)))}executeCommands(e,t){this._executeCursorEdit((i=>this._cursor.executeCommands(i,e,t)))}revealPrimaryCursor(e,t){this._withViewEventsCollector((i=>this._cursor.revealPrimary(i,e,t,0)))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new xo(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((t=>t.emitViewEvent(new HT(e,i,null,0,!0,0))))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new xo(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((t=>t.emitViewEvent(new HT(e,i,null,0,!0,0))))}revealRange(e,t,i,n,r){this._withViewEventsCollector((s=>s.emitViewEvent(new HT(e,i,null,n,t,r))))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new $T),this._eventDispatcher.emitOutgoingEvent(new JT))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{e(this._eventDispatcher.beginEmitViewEvents())}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class LL{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}const NL=ga("accessibilityService"),ML=new iv("accessibilityModeEnabled",!1);class OL extends ip{constructor(e,t){super(0);for(let t=0;t<e.length;t++)this.set(e.charCodeAt(t),1);for(let e=0;e<t.length;e++)this.set(t.charCodeAt(e),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let DL=[],IL=[];class AL{constructor(e,t){this.classifier=new OL(e,t)}static create(e){return new AL(e.get(117),e.get(116))}createLineBreaksComputer(e,t,i,n){t|=0,i=+i;let r=[],s=[];return{addRequest:(e,t)=>{r.push(e),s.push(t)},finalize:()=>{const o=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let a=[];for(let e=0,l=r.length;e<l;e++){const l=s[e];a[e]=l?PL(this.classifier,l,r[e],t,i,o,n):RL(this.classifier,r[e],t,i,o,n)}return DL.length=0,IL.length=0,a}}}}function PL(e,t,i,n,r,s,o){if(-1===r)return null;const a=i.length;if(a<=1)return null;const l=t.breakOffsets,c=t.breakOffsetsVisibleColumn,h=VL(i,n,r,s,o),u=r-h;let d=DL,f=IL,p=0,g=0,m=0,b=r;const v=l.length;let y=0;if(y>=0){let e=Math.abs(c[y]-b);for(;y+1<v;){const t=Math.abs(c[y+1]-b);if(t>=e)break;e=t,y++}}for(;y<v;){let t=y<0?0:l[y],r=y<0?0:c[y];g>t&&(t=g,r=m);let o=0,h=0,_=0,w=0;if(r<=b){let m=r,v=0===t?0:i.charCodeAt(t-1),y=0===t?0:e.get(v),S=!0;for(let r=t;r<a;r++){const t=r,a=i.charCodeAt(r);let l,c;if(Mc(a)?(r++,l=0,c=2):(l=e.get(a),c=BL(a,m,n,s)),t>g&&WL(v,y,a,l)&&(o=t,h=m),m+=c,m>b){t>g?(_=t,w=m-c):(_=r+1,w=m),m-h>u&&(o=0),S=!1;break}v=a,y=l}if(S){p>0&&(d[p]=l[l.length-1],f[p]=c[l.length-1],p++);break}}if(0===o){let a=r,l=i.charCodeAt(t),c=e.get(l),d=!1;for(let n=t-1;n>=g;n--){const t=n+1,r=i.charCodeAt(n);if(9===r){d=!0;break}let f,p;if(Oc(r)?(n--,f=0,p=2):(f=e.get(r),p=jc(r)?s:1),a<=b){if(0===_&&(_=t,w=a),a<=b-u)break;if(WL(r,f,l,c)){o=t,h=a;break}}a-=p,l=r,c=f}if(0!==o){const e=u-(w-h);if(e<=n){const t=i.charCodeAt(_);let r;r=Mc(t)?2:BL(t,w,n,s),e-r<0&&(o=0)}}if(d){y--;continue}}if(0===o&&(o=_,h=w),o<=g){const e=i.charCodeAt(g);Mc(e)?(o=g+2,h=m+2):(o=g+1,h=m+BL(e,m,n,s))}for(g=o,d[p]=o,m=h,f[p]=h,p++,b=h+u;y<0||y<v&&c[y]<h;)y++;let S=Math.abs(c[y]-b);for(;y+1<v;){const e=Math.abs(c[y+1]-b);if(e>=S)break;S=e,y++}}return 0===p?null:(d.length=p,f.length=p,DL=t.breakOffsets,IL=t.breakOffsetsVisibleColumn,t.breakOffsets=d,t.breakOffsetsVisibleColumn=f,t.wrappedTextIndentLength=h,t)}function RL(e,t,i,n,r,s){if(-1===n)return null;const o=t.length;if(o<=1)return null;const a=VL(t,i,n,r,s),l=n-a;let c=[],h=[],u=0,d=0,f=0,p=n,g=t.charCodeAt(0),m=e.get(g),b=BL(g,0,i,r),v=1;Mc(g)&&(b+=1,g=t.charCodeAt(1),m=e.get(g),v++);for(let n=v;n<o;n++){const s=n,o=t.charCodeAt(n);let a,v;Mc(o)?(n++,a=0,v=2):(a=e.get(o),v=BL(o,b,i,r)),WL(g,m,o,a)&&(d=s,f=b),b+=v,b>p&&((0===d||b-f>l)&&(d=s,f=b-v),c[u]=d,h[u]=f,u++,p=f+l,d=0),g=o,m=a}return 0===u?null:(c[u]=o,h[u]=b,new sg(c,h,a))}function BL(e,t,i,n){return 9===e?i-t%i:jc(e)||e<32?n:1}function FL(e,t){return t-e%t}function WL(e,t,i,n){return 32!==i&&(2===t||3===t&&2!==n||1===n||3===n&&1!==t)}function VL(e,t,i,n,r){let s=0;if(0!==r){const o=gc(e);if(-1!==o){for(let i=0;i<o;i++){s+=9===e.charCodeAt(i)?FL(s,t):1}const a=3===r?2:2===r?1:0;for(let e=0;e<a;e++){s+=FL(s,t)}s+n>i&&(s=0)}}return s}var zL;const HL=null===(zL=window.trustedTypes)||void 0===zL?void 0:zL.createPolicy("domLineBreaksComputer",{createHTML:e=>e});class jL{static create(){return new jL}constructor(){}createLineBreaksComputer(e,t,i,n){t|=0,i=+i;let r=[];return{addRequest:(e,t)=>{r.push(e)},finalize:()=>function(e,t,i,n,r){var s;if(-1===n){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=null;return t}const o=Math.round(n*t.typicalHalfwidthCharacterWidth);2!==r&&3!==r||(r=1);const a=document.createElement("div");$v.applyFontInfoSlow(a,t);const l=ff(1e4),c=[],h=[],u=[],d=[],f=[];for(let n=0;n<e.length;n++){const s=e[n];let a=0,p=0,g=o;if(0!==r)if(a=gc(s),-1===a)a=0;else{for(let e=0;e<a;e++){p+=9===s.charCodeAt(e)?i-p%i:1}const e=Math.ceil(t.spaceWidth*p);e+t.typicalFullwidthCharacterWidth>o?(a=0,p=0):g=o-e}const m=s.substr(a),b=UL(m,p,i,g,l);c[n]=a,h[n]=p,u[n]=m,d[n]=b[0],f[n]=b[1]}const p=l.build(),g=null!==(s=null==HL?void 0:HL.createHTML(p))&&void 0!==s?s:p;a.innerHTML=g,a.style.position="absolute",a.style.top="10000",a.style.wordWrap="break-word",document.body.appendChild(a);let m=document.createRange();const b=Array.prototype.slice.call(a.children,0);let v=[];for(let t=0;t<e.length;t++){const e=GL(m,b[t],u[t],d[t]);if(null===e){v[t]=null;continue}const i=c[t],n=h[t],r=f[t],s=[];for(let t=0,i=e.length;t<i;t++)s[t]=r[e[t]];if(0!==i)for(let t=0,n=e.length;t<n;t++)e[t]+=i;v[t]=new sg(e,s,n)}return document.body.removeChild(a),v}(r,e,t,i,n)}}}function UL(e,t,i,n,r){r.appendASCIIString('<div style="width:'),r.appendASCIIString(String(n)),r.appendASCIIString('px;">');const s=e.length;let o=t,a=0,l=[],c=[],h=0<s?e.charCodeAt(0):0;r.appendASCIIString("<span>");for(let t=0;t<s;t++){0!==t&&t%16384==0&&r.appendASCIIString("</span><span>"),l[t]=a,c[t]=o;const n=h;h=t+1<s?e.charCodeAt(t+1):0;let u=1,d=1;switch(n){case 9:u=i-o%i,d=u;for(let e=1;e<=u;e++)e<u?r.write1(160):r.appendASCII(32);break;case 32:32===h?r.write1(160):r.appendASCII(32);break;case 60:r.appendASCIIString("&lt;");break;case 62:r.appendASCIIString("&gt;");break;case 38:r.appendASCIIString("&amp;");break;case 0:r.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:r.write1(65533);break;default:jc(n)&&d++,n<32?r.write1(9216+n):r.write1(n)}a+=u,o+=d}return r.appendASCIIString("</span>"),l[e.length]=a,c[e.length]=o,r.appendASCIIString("</div>"),[l,c]}function GL(e,t,i,n){if(i.length<=1)return null;const r=Array.prototype.slice.call(t.children,0),s=[];try{KL(e,r,n,0,null,i.length-1,null,s)}catch(e){return console.log(e),null}return 0===s.length?null:(s.push(i.length),s)}function KL(e,t,i,n,r,s,o,a){if(n===s)return;if(r=r||$L(e,t,i[n],i[n+1]),o=o||$L(e,t,i[s],i[s+1]),Math.abs(r[0].top-o[0].top)<=.1)return;if(n+1===s)return void a.push(s);const l=n+(s-n)/2|0,c=$L(e,t,i[l],i[l+1]);KL(e,t,i,n,r,l,c,a),KL(e,t,i,l,c,s,o,a)}function $L(e,t,i,n){return e.setStart(t[i/16384|0].firstChild,i%16384),e.setEnd(t[n/16384|0].firstChild,n%16384),e.getClientRects()}var qL=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},ZL=function(e,t){return function(i,n){t(i,n,e)}};let YL=0;class XL{constructor(e,t,i,n,r){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=r}dispose(){ns(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let QL=class e extends as{constructor(e,t,i,n,r,s,o,a,l,c){super(),this._onDidDispose=this._register(new ms),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new ms),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new ms),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new ms),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new ms),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new ms),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new ms),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new ms),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new ms),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new ms),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new ms),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new ms),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new JL),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new JL),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new ms),this.onWillType=this._onWillType.event,this._onDidType=this._register(new ms),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new ms),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new ms),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new ms),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new ms),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new ms),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new ms),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new ms),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new ms),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new ms),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new ms),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new ms),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new ms),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new ms),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new ms),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new ms),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new ms),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new ms),this.onDidChangeViewZones=this._onDidChangeViewZones.event;const h=Object.assign({},t);let u;this._domElement=e,this._overflowWidgetsDomNode=h.overflowWidgetsDomNode,delete h.overflowWidgetsDomNode,this._id=++YL,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=i.isSimpleWidget||!1,this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(h,c)),this._register(this._configuration.onDidChange((e=>{this._onDidChangeConfiguration.fire(e);const t=this._configuration.options;if(e.hasChanged(128)){const e=t.get(128);this._onDidLayoutChange.fire(e)}}))),this._contextKeyService=this._register(o.createScoped(this._domElement)),this._notificationService=l,this._codeEditorService=r,this._commandService=s,this._themeService=a,this._register(new eN(this,this._contextKeyService)),this._register(new tN(this,this._contextKeyService)),this._instantiationService=n.createChild(new LL([nv,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new iN(e),this._focusTracker.onChange((()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},u=Array.isArray(i.contributions)?i.contributions:Iv.getEditorContributions();for(const e of u)if(this._contributions[e.id])Gr(new Error(`Cannot have two contributions with the same id ${e.id}`));else try{const t=this._instantiationService.createInstance(e.ctor,this);this._contributions[e.id]=t}catch(e){Gr(e)}Iv.getEditorActions().forEach((e=>{if(this._actions[e.id])return void Gr(new Error(`Cannot have two actions with the same id ${e.id}`));const t=new sL(e.id,e.label,e.alias,Vh(e.precondition),(()=>this._instantiationService.invokeFunction((t=>Promise.resolve(e.runEditorCommand(t,this,null))))),this._contextKeyService);this._actions[t.id]=t})),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new $v(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return uu.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,i=e.length;t<i;t++){const i=e[t];this._contributions[i].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?mk.getWordAtPosition(this._modelData.model,this._configuration.options.get(114),e):null}getValue(e=null){if(!this._modelData)return"";const t=!(!e||!e.preserveBOM);let i=0;return e&&e.lineEnding&&"\n"===e.lineEnding?i=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(null===this._modelData&&null===t)return;if(this._modelData&&this._modelData.model===t)return;const i=this.hasTextFocus(),n=this._detachModel();this._attachModel(t),i&&this.hasModel()&&this.focus();const r={oldModelUrl:n?n.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(r),this._postDetachModelCleanup(n)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,i){const n=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber)}getTopForLineNumber(t){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,1):-1}getTopForPosition(t,i){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,i):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map((e=>xo.lift(e))))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return $w.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!Co.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!xo.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",i,s,t,n)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if("number"!=typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new xo(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!Co.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new xo(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=ko.isISelection(e),i=xo.isIRange(e);if(!t&&!i)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(i){const t={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(t)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new ko(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if("number"!=typeof e||"number"!=typeof t)throw new Error("Invalid arguments");this._sendRevealRange(new xo(e,1,t,1),i,!1,n)}revealRange(e,t=0,i=!1,n=!0){this._revealRange(e,i?1:0,n,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!xo.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(xo.lift(e),t,i,n)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(let t=0,i=e.length;t<i;t++)if(!ko.isISelection(e[t]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if("number"!=typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if("number"!=typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const i of t){const t=this._contributions[i];"function"==typeof t.saveViewState&&(e[i]=t.saveViewState())}return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const e=t.cursorState;Array.isArray(e)?this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]);const i=t.contributionsState||{},n=Object.keys(this._contributions);for(let e=0,t=n.length;e<t;e++){const t=n[e],r=this._contributions[t];"function"==typeof r.restoreViewState&&r.restoreViewState(i[t])}const r=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(r)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(this._actions[n])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter((e=>e.isSupported())),e}getAction(e){return this._actions[e]||null}trigger(e,t,i){switch(i=i||{},t){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{const t=i;return void this._type(e,t.text||"")}case"replacePreviousChar":{const t=i;return void this._compositionType(e,t.text||"",t.replaceCharCnt||0,0,0)}case"compositionType":{const t=i;return void this._compositionType(e,t.text||"",t.replacePrevCharCnt||0,t.replaceNextCharCnt||0,t.positionDelta||0)}case"paste":{const t=i;return void this._paste(e,t.text||"",t.pasteOnNewLine||!1,t.multicursorText||null,t.mode||null)}case"cut":return void this._cut(e)}const n=this.getAction(t);n?Promise.resolve(n.run()).then(void 0,Gr):this._modelData&&(this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){this._modelData&&0!==t.length&&("keyboard"===e&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),"keyboard"===e&&this._onDidType.fire(t))}_compositionType(e,t,i,n,r){this._modelData&&this._modelData.viewModel.compositionType(t,i,n,r,e)}_paste(e,t,i,n,r){if(!this._modelData||0===t.length)return;const s=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,i,n,e);const o=this._modelData.viewModel.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new xo(s.lineNumber,s.column,o.lineNumber,o.column),mode:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const n=Iv.getEditorCommand(t);return!!n&&((i=i||{}).source=e,this._instantiationService.invokeFunction((e=>{Promise.resolve(n.runEditorCommand(e,this,i)).then(void 0,Gr)})),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&(!this._configuration.options.get(78)&&(this._modelData.model.pushStackElement(),!0))}popUndoStop(){return!!this._modelData&&(!this._configuration.options.get(78)&&(this._modelData.model.popStackElement(),!0))}executeEdits(e,t,i){if(!this._modelData)return!1;if(this._configuration.options.get(78))return!1;let n;return n=i?Array.isArray(i)?()=>i:i:()=>null,this._modelData.viewModel.executeEdits(e,t,n),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,Dr(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(128)}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarMouseDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const e=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const e=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null}getScrolledVisiblePosition(t){if(!this._modelData||!this._modelData.hasRealView)return null;const i=this._modelData.model.validatePosition(t),n=this._configuration.options,r=n.get(128);return{top:e._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+r.glyphMarginWidth+r.lineNumbersWidth+r.decorationsWidth-this.getScrollLeft(),height:n.get(56)}}getOffsetForColumn(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1}render(e=!1){this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){$v.applyFontInfoSlow(e,this._configuration.options.get(40))}_attachModel(e){if(!e)return void(this._modelData=null);const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageIdentifier().language),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const i=new TL(this._id,this._configuration,e,jL.create(),AL.create(this._configuration.options),(e=>pl(e)));t.push(e.onDidChangeDecorations((e=>this._onDidChangeModelDecorations.fire(e)))),t.push(e.onDidChangeLanguage((t=>{this._domElement.setAttribute("data-mode-id",e.getLanguageIdentifier().language),this._onDidChangeModelLanguage.fire(t)}))),t.push(e.onDidChangeLanguageConfiguration((e=>this._onDidChangeModelLanguageConfiguration.fire(e)))),t.push(e.onDidChangeContent((e=>this._onDidChangeModelContent.fire(e)))),t.push(e.onDidChangeOptions((e=>this._onDidChangeModelOptions.fire(e)))),t.push(e.onWillDispose((()=>this.setModel(null)))),t.push(i.onEvent((e=>{switch(e.kind){case 0:this._onDidContentSizeChange.fire(e);break;case 1:this._editorTextFocus.setValue(e.hasFocus);break;case 2:this._onDidScrollChange.fire(e);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidAttemptReadOnlyEdit.fire();break;case 5:{e.reachedMaxCursorCount&&this._notificationService.warn(On(0,"The number of cursors has been limited to {0}.",rL.MAX_CURSOR_COUNT));const t=[];for(let i=0,n=e.selections.length;i<n;i++)t[i]=e.selections[i].getPosition();const i={position:t[0],secondaryPositions:t.slice(1),reason:e.reason,source:e.source};this._onDidChangeCursorPosition.fire(i);const n={selection:e.selections[0],secondarySelections:e.selections.slice(1),modelVersionId:e.modelVersionId,oldSelections:e.oldSelections,oldModelVersionId:e.oldModelVersionId,source:e.source,reason:e.reason};this._onDidChangeCursorSelection.fire(n);break}}})));const[n,r]=this._createView(i);if(r){this._domElement.appendChild(n.domNode.domNode);let t=Object.keys(this._contentWidgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];n.addContentWidget(this._contentWidgets[i])}t=Object.keys(this._overlayWidgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];n.addOverlayWidget(this._overlayWidgets[i])}n.render(!1,!0),n.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new XL(e,i,n,r,t)}_createView(e){let t;t=this.isSimpleWidget?{paste:(e,t,i,n)=>{this._paste("keyboard",e,t,i,n)},type:e=>{this._type("keyboard",e)},compositionType:(e,t,i,n)=>{this._compositionType("keyboard",e,t,i,n)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,t,i,n)=>{const r={text:e,pasteOnNewLine:t,multicursorText:i,mode:n};this._commandService.executeCommand("paste",r)},type:e=>{const t={text:e};this._commandService.executeCommand("type",t)},compositionType:(e,t,i,n)=>{if(i||n){const r={text:e,replacePrevCharCnt:t,replaceNextCharCnt:i,positionDelta:n};this._commandService.executeCommand("compositionType",r)}else{const i={text:e,replaceCharCnt:t};this._commandService.executeCommand("replacePreviousChar",i)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new jk(e.coordinatesConverter);i.onKeyDown=e=>this._onKeyDown.fire(e),i.onKeyUp=e=>this._onKeyUp.fire(e),i.onContextMenu=e=>this._onContextMenu.fire(e),i.onMouseMove=e=>this._onMouseMove.fire(e),i.onMouseLeave=e=>this._onMouseLeave.fire(e),i.onMouseDown=e=>this._onMouseDown.fire(e),i.onMouseUp=e=>this._onMouseUp.fire(e),i.onMouseDrag=e=>this._onMouseDrag.fire(e),i.onMouseDrop=e=>this._onMouseDrop.fire(e),i.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),i.onMouseWheel=e=>this._onMouseWheel.fire(e);return[new TT(t,this._configuration,this._themeService,e,i,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}};QL=qL([ZL(3,fa),ZL(4,ba),ZL(5,zh),ZL(6,nv),ZL(7,av),ZL(8,jm),ZL(9,NL)],QL);class JL extends as{constructor(){super(),this._onDidChangeToTrue=this._register(new ms),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new ms),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}class eN extends as{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Nk.editorSimpleInput.bindTo(t),this._editorFocus=Nk.focus.bindTo(t),this._textInputFocus=Nk.textInputFocus.bindTo(t),this._editorTextFocus=Nk.editorTextFocus.bindTo(t),this._editorTabMovesFocus=Nk.tabMovesFocus.bindTo(t),this._editorReadonly=Nk.readOnly.bindTo(t),this._inDiffEditor=Nk.inDiffEditor.bindTo(t),this._editorColumnSelection=Nk.columnSelection.bindTo(t),this._hasMultipleSelections=Nk.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Nk.hasNonEmptySelection.bindTo(t),this._canUndo=Nk.canUndo.bindTo(t),this._canRedo=Nk.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromConfig()))),this._register(this._editor.onDidChangeCursorSelection((()=>this._updateFromSelection()))),this._register(this._editor.onDidFocusEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidFocusEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidChangeModel((()=>this._updateFromModel()))),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromModel()))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(127)),this._editorReadonly.set(e.get(78)),this._inDiffEditor.set(e.get(51)),this._editorColumnSelection.set(e.get(16))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((e=>!e.isEmpty())))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class tN extends as{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=Nk.languageId.bindTo(t),this._hasCompletionItemProvider=Nk.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Nk.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Nk.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Nk.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Nk.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Nk.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Nk.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Nk.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Nk.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Nk.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Nk.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Nk.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Nk.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Nk.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Nk.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Nk.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Nk.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Nk.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=Nk.isInWalkThroughSnippet.bindTo(t);const i=()=>this._update();this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(dd.onDidChange(i)),this._register(kd.onDidChange(i)),this._register(Cd.onDidChange(i)),this._register(yd.onDidChange(i)),this._register(_d.onDidChange(i)),this._register(wd.onDidChange(i)),this._register(Sd.onDidChange(i)),this._register(gd.onDidChange(i)),this._register(bd.onDidChange(i)),this._register(md.onDidChange(i)),this._register(hd.onDidChange(i)),this._register(ud.onDidChange(i)),this._register(Ed.onDidChange(i)),this._register(Td.onDidChange(i)),this._register(pd.onDidChange(i)),this._register(xd.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents((()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()}))}_update(){const e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents((()=>{this._langId.set(e.getLanguageIdentifier().language),this._hasCompletionItemProvider.set(dd.has(e)),this._hasCodeActionsProvider.set(kd.has(e)),this._hasCodeLensProvider.set(Cd.has(e)),this._hasDefinitionProvider.set(yd.has(e)),this._hasDeclarationProvider.set(_d.has(e)),this._hasImplementationProvider.set(wd.has(e)),this._hasTypeDefinitionProvider.set(Sd.has(e)),this._hasHoverProvider.set(gd.has(e)),this._hasDocumentHighlightProvider.set(bd.has(e)),this._hasDocumentSymbolProvider.set(md.has(e)),this._hasReferenceProvider.set(hd.has(e)),this._hasRenameProvider.set(ud.has(e)),this._hasSignatureHelpProvider.set(pd.has(e)),this._hasInlayHintsProvider.set(xd.has(e)),this._hasDocumentFormattingProvider.set(Ed.has(e)||Td.has(e)),this._hasDocumentSelectionFormattingProvider.set(Td.has(e)),this._hasMultipleDocumentFormattingProvider.set(Ed.all(e).length+Td.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Td.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===il.walkThroughSnippet)})):this.reset()}}class iN extends as{constructor(e){super(),this._onChange=this._register(new ms),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Kl(e)),this._register(this._domFocusTracker.onDidFocus((()=>{this._hasFocus=!0,this._onChange.fire(void 0)}))),this._register(this._domFocusTracker.onDidBlur((()=>{this._hasFocus=!1,this._onChange.fire(void 0)})))}hasFocus(){return this._hasFocus}}const nN=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),rN=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function sN(e){return nN+encodeURIComponent(e.toString())+rN}const oN=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),aN=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');pv(((e,t)=>{const i=e.getColor(rC);i&&t.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${i}; }`);const n=e.getColor(nC);n&&t.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${sN(n)}") repeat-x bottom left; }`);const r=e.getColor(iC);r&&t.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${r}; }`);const s=e.getColor(aC);s&&t.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${s}; }`);const o=e.getColor(oC);o&&t.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${sN(o)}") repeat-x bottom left; }`);const a=e.getColor(sC);a&&t.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=e.getColor(hC);l&&t.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const c=e.getColor(cC);c&&t.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${sN(c)}") repeat-x bottom left; }`);const h=e.getColor(lC);h&&t.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${h}; }`);const u=e.getColor(dC);u&&t.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${u}; }`);const d=e.getColor(uC);d&&t.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${function(e){return oN+encodeURIComponent(e.toString())+aN}(d)}") no-repeat bottom left; }`);const f=e.getColor(Qx);f&&t.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${f.rgba.a}; }`);const p=e.getColor(Xx);p&&t.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${p}; }`);const g=e.getColor(pC)||"inherit";t.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${g}}`)}));var lN=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};var cN;!function(e){e.North="north",e.South="south",e.East="east",e.West="west"}(cN||(cN={}));const hN=new ms;const uN=new ms;class dN{constructor(){this.disposables=new os}get onPointerMove(){return this.disposables.add(new Ma(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Ma(window,"mouseup")).event}dispose(){this.disposables.dispose()}}lN([Yv],dN.prototype,"onPointerMove",null),lN([Yv],dN.prototype,"onPointerUp",null);class fN{constructor(e){this.el=e,this.disposables=new os}get onPointerMove(){return this.disposables.add(new Ma(this.el,Xv.Change)).event}get onPointerUp(){return this.disposables.add(new Ma(this.el,Xv.End)).event}dispose(){this.disposables.dispose()}}lN([Yv],fN.prototype,"onPointerMove",null),lN([Yv],fN.prototype,"onPointerUp",null);class pN{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}lN([Yv],pN.prototype,"onPointerMove",null),lN([Yv],pN.prototype,"onPointerUp",null);class gN extends as{constructor(e,t,i){super(),this.hoverDelay=300,this.hoverDelayer=this._register(new Ka(this.hoverDelay)),this._state=3,this._onDidEnablementChange=this._register(new ms),this.onDidEnablementChange=this._onDidEnablementChange.event,this._onDidStart=this._register(new ms),this.onDidStart=this._onDidStart.event,this._onDidChange=this._register(new ms),this.onDidChange=this._onDidChange.event,this._onDidReset=this._register(new ms),this.onDidReset=this._onDidReset.event,this._onDidEnd=this._register(new ms),this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.orthogonalStartSashDisposables=this._register(new os),this.orthogonalStartDragHandleDisposables=this._register(new os),this.orthogonalEndSashDisposables=this._register(new os),this.orthogonalEndDragHandleDisposables=this._register(new os),this.el=$l(e,Ql(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),Xn&&this.el.classList.add("mac");const n=this._register(new Ma(this.el,"mousedown")).event;this._register(n((e=>this.onPointerStart(e,new dN)),this));const r=this._register(new Ma(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const s=this._register(new Ma(this.el,"mouseenter")).event;this._register(s((()=>gN.onMouseEnter(this))));const o=this._register(new Ma(this.el,"mouseleave")).event;this._register(o((()=>gN.onMouseLeave(this)))),this._register(Jv.addTarget(this.el));const a=ps.map(this._register(new Ma(this.el,Xv.Start)).event,(e=>{var t;return Object.assign(Object.assign({},e),{target:null!==(t=e.initialTarget)&&void 0!==t?t:null})}));this._register(a((e=>this.onPointerStart(e,new fN(this.el))),this));const l=this._register(new Ma(this.el,Xv.Tap)).event,c=ps.map(ps.filter(ps.debounce(l,((e,t)=>{var i;return{event:t,count:(null!==(i=null==e?void 0:e.count)&&void 0!==i?i:0)+1}}),250),(({count:e})=>2===e)),(({event:e})=>{var t;return Object.assign(Object.assign({},e),{target:null!==(t=e.initialTarget)&&void 0!==t?t:null})}));this._register(c(this.onPointerDoublePress,this)),"number"==typeof i.size?(this.size=i.size,0===i.orientation?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=4,this._register(hN.event((e=>{this.size=e,this.layout()})))),this._register(uN.event((e=>this.hoverDelay=e))),this.hidden=!1,this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,1===this.orientation?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",false),this.layout()}get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",0===e),this.el.classList.toggle("minimum",1===e),this.el.classList.toggle("maximum",2===e),this._state=e,this._onDidEnablementChange.fire(e))}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=t=>{this.orthogonalStartDragHandleDisposables.clear(),0!==t&&(this._orthogonalStartDragHandle=$l(this.el,Ql(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(ss((()=>this._orthogonalStartDragHandle.remove()))),this.orthogonalEndDragHandleDisposables.add(new Ma(this._orthogonalStartDragHandle,"mouseenter")).event((()=>gN.onMouseEnter(e)),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Ma(this._orthogonalStartDragHandle,"mouseleave")).event((()=>gN.onMouseLeave(e)),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=t=>{this.orthogonalEndDragHandleDisposables.clear(),0!==t&&(this._orthogonalEndDragHandle=$l(this.el,Ql(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(ss((()=>this._orthogonalEndDragHandle.remove()))),this.orthogonalEndDragHandleDisposables.add(new Ma(this._orthogonalEndDragHandle,"mouseenter")).event((()=>gN.onMouseEnter(e)),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Ma(this._orthogonalEndDragHandle,"mouseleave")).event((()=>gN.onMouseLeave(e)),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){Ul(e);let i=!1;if(!e.__orthogonalSashEvent){const n=this.getOrthogonalSash(e);n&&(i=!0,e.__orthogonalSashEvent=!0,n.onPointerStart(e,new pN(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new pN(t))),!this.state)return;const n=[...tc("iframe"),...tc("webview")];for(const e of n)e.style.pointerEvents="none";const r=e.pageX,s=e.pageY,o=e.altKey,a={startX:r,currentX:r,startY:s,currentY:s,altKey:o};this.el.classList.add("active"),this._onDidStart.fire(a);const l=Bl(this.el),c=()=>{let e="";e=i?"all-scroll":1===this.orientation?1===this.state?"s-resize":2===this.state?"n-resize":Xn?"row-resize":"ns-resize":1===this.state?"e-resize":2===this.state?"w-resize":Xn?"col-resize":"ew-resize",l.textContent=`* { cursor: ${e} !important; }`},h=new os;c(),i||this.onDidEnablementChange(c,null,h);t.onPointerMove((e=>{Ul(e,!1);const t={startX:r,currentX:e.pageX,startY:s,currentY:e.pageY,altKey:o};this._onDidChange.fire(t)}),null,h),t.onPointerUp((e=>{Ul(e,!1),this.el.removeChild(l),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(const e of n)e.style.pointerEvents="auto"}),null,h),h.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger((()=>e.el.classList.add("hover")),e.hoverDelay).then(void 0,(()=>{})),!t&&e.linkedSash&&gN.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&gN.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){gN.onMouseLeave(this)}layout(){if(0===this.orientation){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}hide(){this.hidden=!0,this.el.style.display="none",this.el.setAttribute("aria-hidden","true")}getOrthogonalSash(e){if(e.target&&e.target instanceof HTMLElement)return e.target.classList.contains("orthogonal-drag-handle")?e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash:void 0}dispose(){super.dispose(),this.el.remove()}}class mN{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const bN=[];function vN(e,t,i){t instanceof mN||(t=new mN(t,[],i)),bN.push([e,t])}const yN=ga("IEditorCancelService"),_N=new iv("cancellableOperation",!1,On(0,"Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));vN(yN,class{constructor(){this._tokens=new WeakMap}add(e,t){let i,n=this._tokens.get(e);return n||(n=e.invokeWithinContext((e=>({key:_N.bindTo(e.get(nv)),tokens:new us}))),this._tokens.set(e,n)),n.key.set(!0),i=n.tokens.push(t),()=>{i&&(i(),n.key.set(!n.tokens.isEmpty()),i=void 0)}}cancel(e){const t=this._tokens.get(e);if(!t)return;const i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}},!0);Mv(new class extends Lv{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:_N})}runEditorCommand(e,t){e.get(yN).cancel(t)}});class wN{constructor(e,t,i){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=i}static capture(e){let t=null,i=0;if(0!==e.getScrollTop()){const n=e.getVisibleRanges();if(n.length>0){t=n[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-r}}return new wN(t,i,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i)}}const SN="ResourceURLs",CN="text/plain";class xN{constructor(e){this.data=e}update(){}getData(){return this.data}}const kN={CurrentDragAndDropData:void 0};class EN extends as{constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof Mb&&this._register(t.onDidChange((e=>{this.element&&this.handleActionChangeEvent(e)})))}handleActionChangeEvent(e){void 0!==e.enabled&&this.updateEnabled(),void 0!==e.checked&&this.updateChecked(),void 0!==e.class&&this.updateClass(),void 0!==e.label&&(this.updateLabel(),this.updateTooltip()),void 0!==e.tooltip&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Ob)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Jv.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,Sa&&this._register(cl(e,jl.DRAG_START,(e=>{var t;return null===(t=e.dataTransfer)||void 0===t?void 0:t.setData(CN,this._action.label)})))),this._register(cl(t,Xv.Tap,(e=>this.onClick(e)))),this._register(cl(t,jl.MOUSE_DOWN,(e=>{i||Ul(e,!0),this._action.enabled&&0===e.button&&t.classList.add("active")}))),Xn&&this._register(cl(t,jl.CONTEXT_MENU,(e=>{0===e.button&&!0===e.ctrlKey&&this.onClick(e)}))),this._register(cl(t,jl.CLICK,(e=>{Ul(e,!0),this.options&&this.options.isMenu||nr((()=>this.onClick(e)))}))),this._register(cl(t,jl.DBLCLICK,(e=>{Ul(e,!0)}))),[jl.MOUSE_UP,jl.MOUSE_OUT].forEach((e=>{this._register(cl(t,e,(e=>{Ul(e),t.classList.remove("active")})))}))}onClick(e){var t;Ul(e,!0);const i=Ah(this._context)?(null===(t=this.options)||void 0===t?void 0:t.useEventAsContext)?e:void 0:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class TN extends EN{constructor(e,t,i={}){super(e,t,i),this.options=i,this.options.icon=void 0!==i.icon&&i.icon,this.options.label=void 0===i.label||i.label,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=$l(this.element,Ql("a.action-label"))),this.label&&(this._action.id===Db.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&($l(this.element,Ql("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=On(0,"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var LN=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class NN extends as{constructor(e,t={}){var i,n,r,s,o,a;let l,c;switch(super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new ms),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new ms({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new ms),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new ms),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=null!==(i=t.context)&&void 0!==i?i:null,this._orientation=null!==(n=this.options.orientation)&&void 0!==n?n:0,this._triggerKeys={keyDown:null!==(s=null===(r=this.options.triggerKeys)||void 0===r?void 0:r.keyDown)&&void 0!==s&&s,keys:null!==(a=null===(o=this.options.triggerKeys)||void 0===o?void 0:o.keys)&&void 0!==a?a:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Ob,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun((e=>this._onDidRun.fire(e)))),this._register(this._actionRunner.onBeforeRun((e=>this._onBeforeRun.fire(e)))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",!1!==t.animated&&this.domNode.classList.add("animated"),this._orientation){case 0:l=[15],c=[17];break;case 1:l=[16],c=[18],this.domNode.className+=" vertical"}this._register(cl(this.domNode,jl.KEY_DOWN,(e=>{const t=new Ra(e);let i=!0;const n="number"==typeof this.focusedItem?this.viewItems[this.focusedItem]:void 0;l&&(t.equals(l[0])||t.equals(l[1]))?i=this.focusPrevious():c&&(t.equals(c[0])||t.equals(c[1]))?i=this.focusNext():t.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():t.equals(14)?i=this.focusFirst():t.equals(13)?i=this.focusLast():t.equals(2)&&n instanceof EN&&n.trapsArrowNavigation?i=this.focusNext():this.isTriggerKeyEvent(t)?this._triggerKeys.keyDown?this.doTrigger(t):this.triggerKeyDown=!0:i=!1,i&&(t.preventDefault(),t.stopPropagation())}))),this._register(cl(this.domNode,jl.KEY_UP,(e=>{const t=new Ra(e);this.isTriggerKeyEvent(t)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(t)),t.preventDefault(),t.stopPropagation()):(t.equals(2)||t.equals(1026))&&this.updateFocusedItem()}))),this.focusTracker=this._register(Kl(this.domNode)),this._register(this.focusTracker.onDidBlur((()=>{Rl()!==this.domNode&&Ml(Rl(),this.domNode)||(this._onDidBlur.fire(),this.focusedItem=void 0,this.triggerKeyDown=!1)}))),this._register(this.focusTracker.onDidFocus((()=>this.updateFocusedItem()))),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach((i=>{t=t||e.equals(i)})),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Ml(Rl(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach((t=>t.setActionContext(e)))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach((t=>t.actionRunner=e)))}getContainer(){return this.domNode}push(e,t={}){const i=Array.isArray(e)?e:[e];let n=Oh(t.index)?t.index:null;i.forEach((e=>{const i=document.createElement("li");let r;i.className="action-item",i.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(cl(i,jl.CONTEXT_MENU,(e=>{Ul(e,!0)}))),this.options.actionViewItemProvider&&(r=this.options.actionViewItemProvider(e)),r||(r=new TN(this.context,e,t)),r.actionRunner=this._actionRunner,r.setActionContext(this.context),r.render(i),this.focusable&&r instanceof EN&&0===this.viewItems.length&&r.setFocusable(!0),null===n||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(i),this.viewItems.push(r),this._actionIds.push(e.id)):(this.actionsList.insertBefore(i,this.actionsList.children[n]),this.viewItems.splice(n,0,r),this._actionIds.splice(n,0,e.id),n++)})),"number"==typeof this.focusedItem&&this.focus(this.focusedItem)}clear(){ns(this.viewItems),this.viewItems=[],this._actionIds=[],ol(this.actionsList)}length(){return this.viewItems.length}focus(e){let t,i=!1;if(void 0===e?i=!0:"number"==typeof e?t=e:"boolean"==typeof e&&(i=e),i&&void 0===this.focusedItem){const e=this.viewItems.findIndex((e=>e.isEnabled()));this.focusedItem=-1===e?void 0:e,this.updateFocus()}else void 0!==t&&(this.focusedItem=t),this.updateFocus()}focusFirst(){return this.focusedItem=this.length()>1?1:0,this.focusPrevious()}focusLast(){return this.focusedItem=this.length()<2?0:this.length()-2,this.focusNext()}focusNext(){if(void 0===this.focusedItem)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=e,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(),!0}focusPrevious(){if(void 0===this.focusedItem)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(this.options.preventLoopNavigation)return this.focusedItem=e,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t){void 0===this.focusedItem&&this.actionsList.focus({preventScroll:t});for(let i=0;i<this.viewItems.length;i++){const n=this.viewItems[i],r=n;if(i===this.focusedItem){let i=!0;Rh(r.focus)||(i=!1),this.options.focusOnlyEnabledItems&&Rh(n.isEnabled)&&!n.isEnabled()&&(i=!1),i?r.focus(e):this.actionsList.focus({preventScroll:t})}else Rh(r.blur)&&r.blur()}}doTrigger(e){if(void 0===this.focusedItem)return;const t=this.viewItems[this.focusedItem];if(t instanceof EN){const i=null===t._context||void 0===t._context?e:t._context;this.run(t._action,i)}}run(e,t){return LN(this,void 0,void 0,(function*(){yield this._actionRunner.run(e,t)}))}dispose(){ns(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const MN=new class{constructor(){this._onDidChange=new ms,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:On(0,"The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:On(0,"The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${td.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){const r=this.iconsById[e];if(r){if(i&&!r.description){r.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enumDescriptions[t]=i),this._onDidChange.fire()}return r}let s={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=s;let o={$ref:"#/definitions/icons"};return n&&(o.deprecationMessage=n),i&&(o.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=o,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map((e=>this.iconsById[e]))}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(e,t)=>e.id.localeCompare(t.id),t=e=>{for(;cv.isThemeIcon(e.defaults);)e=this.iconsById[e.defaults.id];return`codicon codicon-${e?e.id:""}`};let i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const n=Object.keys(this.iconsById).map((e=>this.iconsById[e]));for(const r of n.filter((e=>!!e.description)).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|${cv.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const r of n.filter((e=>!cv.isThemeIcon(e.defaults))).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|`);return i.join("\n")}};function ON(e,t,i,n){return MN.registerIcon(e,t,i,n)}zg.add("base.contributions.icons",MN),function(){for(const e of Qu.all)MN.registerIcon(e.id,e.definition,e.description);Qu.onDidRegister((e=>MN.registerIcon(e.id,e.definition,e.description)))}();const DN="vscode://schemas/icons";let IN=zg.as(Hg);IN.registerSchema(DN,MN.getIconSchema());const AN=new Qa((()=>IN.notifySchemaChanged(DN)),200);MN.onDidChange((()=>{AN.isScheduled()||AN.schedule()}));ON("widget-close",ed.close,On(0,"Icon for the close action in widgets."));var PN,RN=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class BN{constructor(e,t,i,n){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=i,this.modifiedLineEnd=n}getType(){return 0===this.originalLineStart?1:0===this.modifiedLineStart?2:0}}class FN{constructor(e){this.entries=e}}const WN=ON("diff-review-insert",ed.add,On(0,"Icon for 'Insert' in diff review.")),VN=ON("diff-review-remove",ed.remove,On(0,"Icon for 'Remove' in diff review.")),zN=ON("diff-review-close",ed.close,On(0,"Icon for 'Close' in diff review."));class HN extends as{constructor(e){super(),this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=Zv(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=Zv(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new NN(this.actionBarContainer.domNode)),this._actionBar.push(new Mb("diffreview.close",On(0,"Close"),"close-diff-review "+cv.asClassName(zN),!0,(()=>RN(this,void 0,void 0,(function*(){return this.hide()})))),{label:!1,icon:!0}),this.domNode=Zv(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=Zv(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new NE(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff((()=>{this._isVisible&&(this._diffs=this._compute(),this._render())}))),this._register(e.getModifiedEditor().onDidChangeCursorPosition((()=>{this._isVisible&&this._render()}))),this._register(ul(this.domNode.domNode,"click",(e=>{e.preventDefault();let t=Ol(e.target,"diff-review-row");t&&this._goToRow(t)}))),this._register(ul(this.domNode.domNode,"keydown",(e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._goToRow(this._getNextRow())),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._goToRow(this._getPrevRow())),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this.hide()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this.accept())}))),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let t=-1;for(let e=0,i=this._diffs.length;e<i;e++)if(this._diffs[e]===this._currentDiff){t=e;break}e=this._diffs.length+t-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Co(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let t=-1;for(let e=0,i=this._diffs.length;e<i;e++)if(this._diffs[e]===this._currentDiff){t=e;break}e=t+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Co(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let i=parseInt(t.getAttribute("data-line"),10);isNaN(i)||(e=i)}this.hide(),-1!==e&&(this._diffEditor.setPosition(new Co(e,1)),this._diffEditor.revealPosition(new Co(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,i){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(i),this._content.setHeight(i),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||0===e.length)return[];const t=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel();return t&&i?HN._mergeAdjacent(e,t.getLineCount(),i.getLineCount()):[]}static _mergeAdjacent(e,t,i){if(!e||0===e.length)return[];let n=[],r=0;for(let s=0,o=e.length;s<o;s++){const a=e[s],l=a.originalStartLineNumber,c=a.originalEndLineNumber,h=a.modifiedStartLineNumber,u=a.modifiedEndLineNumber;let d=[],f=0;{const t=0===c?l:l-1,i=0===u?h:h-1;let n=1,r=1;if(s>0){const t=e[s-1];n=0===t.originalEndLineNumber?t.originalStartLineNumber+1:t.originalEndLineNumber+1,r=0===t.modifiedEndLineNumber?t.modifiedStartLineNumber+1:t.modifiedEndLineNumber+1}let o=t-3+1,a=i-3+1;if(o<n){const e=n-o;o+=e,a+=e}if(a<r){const e=r-a;o+=e,a+=e}d[f++]=new BN(o,t,a,i)}0!==c&&(d[f++]=new BN(l,c,0,0)),0!==u&&(d[f++]=new BN(0,0,h,u));{const n=0===c?l+1:c+1,r=0===u?h+1:u+1;let a=t,p=i;if(s+1<o){const t=e[s+1];a=0===t.originalEndLineNumber?t.originalStartLineNumber:t.originalStartLineNumber-1,p=0===t.modifiedEndLineNumber?t.modifiedStartLineNumber:t.modifiedStartLineNumber-1}let g=n+3-1,m=r+3-1;if(g>a){const e=a-g;g+=e,m+=e}if(m>p){const e=p-m;g+=e,m+=e}d[f++]=new BN(n,g,r,m)}n[r++]=new FN(d)}let s=n[0].entries,o=[],a=0;for(let e=1,t=n.length;e<t;e++){const t=n[e].entries,i=s[s.length-1],r=t[0];0===i.getType()&&0===r.getType()&&r.originalLineStart<=i.originalLineEnd?(s[s.length-1]=new BN(i.originalLineStart,r.originalLineEnd,i.modifiedLineStart,r.modifiedLineEnd),s=s.concat(t.slice(1))):(o[a++]=new FN(s),s=t)}return o[a++]=new FN(s),o}_findDiffIndex(e){const t=e.lineNumber;for(let e=0,i=this._diffs.length;e<i;e++){const i=this._diffs[e].entries;if(t<=i[i.length-1].modifiedLineEnd)return e}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),i=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel(),r=i.getOptions(),s=n.getOptions();if(!this._isVisible||!i||!n)return ol(this._content.domNode),this._currentDiff=null,void this.scrollbar.scanDomNode();this._diffEditor.updateOptions({readOnly:!0});const o=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[o]===this._currentDiff)return;this._currentDiff=this._diffs[o];const a=this._diffs[o].entries;let l=document.createElement("div");l.className="diff-review-table",l.setAttribute("role","list"),l.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),$v.applyFontInfoSlow(l,t.get(40));let c=0,h=0,u=0,d=0;for(let e=0,t=a.length;e<t;e++){const t=a[e],i=t.originalLineStart,n=t.originalLineEnd,r=t.modifiedLineStart,s=t.modifiedLineEnd;0!==i&&(0===c||i<c)&&(c=i),0!==n&&(0===h||n>h)&&(h=n),0!==r&&(0===u||r<u)&&(u=r),0!==s&&(0===d||s>d)&&(d=s)}let f=document.createElement("div");f.className="diff-review-row";let p=document.createElement("div");p.className="diff-review-cell diff-review-summary";const g=h-c+1,m=d-u+1;p.appendChild(document.createTextNode(`${o+1}/${this._diffs.length}: @@ -${c},${g} +${u},${m} @@`)),f.setAttribute("data-line",String(u));const b=e=>0===e?On(0,"no lines changed"):1===e?On(0,"1 line changed"):On(0,"{0} lines changed",e),v=b(g),y=b(m);f.setAttribute("aria-label",On(0,"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",o+1,this._diffs.length,c,v,u,y)),f.appendChild(p),f.setAttribute("role","listitem"),l.appendChild(f);const _=t.get(56);let w=u;for(let o=0,c=a.length;o<c;o++){const c=a[o];HN._renderSection(l,c,w,_,this._width,e,i,r,t,n,s),0!==c.modifiedLineStart&&(w=c.modifiedLineEnd)}ol(this._content.domNode),this._content.domNode.appendChild(l),this.scrollbar.scanDomNode()}static _renderSection(e,t,i,n,r,s,o,a,l,c,h){const u=t.getType();let d="diff-review-row",f="";let p=null;switch(u){case 1:d="diff-review-row line-insert",f=" char-insert",p=WN;break;case 2:d="diff-review-row line-delete",f=" char-delete",p=VN}const g=t.originalLineStart,m=t.originalLineEnd,b=t.modifiedLineStart,v=t.modifiedLineEnd,y=Math.max(v-b,m-g),_=s.get(128),w=_.glyphMarginWidth+_.lineNumbersWidth,S=l.get(128),C=10+S.glyphMarginWidth+S.lineNumbersWidth;for(let t=0;t<=y;t++){const m=0===g?0:g+t,v=0===b?0:b+t,y=document.createElement("div");y.style.minWidth=r+"px",y.className=d,y.setAttribute("role","listitem"),0!==v&&(i=v),y.setAttribute("data-line",String(i));let _=document.createElement("div");_.className="diff-review-cell",_.style.height=`${n}px`,y.appendChild(_);const S=document.createElement("span");S.style.width=w+"px",S.style.minWidth=w+"px",S.className="diff-review-line-number"+f,0!==m?S.appendChild(document.createTextNode(String(m))):S.innerText="",_.appendChild(S);const x=document.createElement("span");x.style.width=C+"px",x.style.minWidth=C+"px",x.style.paddingRight="10px",x.className="diff-review-line-number"+f,0!==v?x.appendChild(document.createTextNode(String(v))):x.innerText="",_.appendChild(x);const k=document.createElement("span");if(k.className="diff-review-spacer",p){const e=document.createElement("span");e.className=cv.asClassName(p),e.innerText="",k.appendChild(e)}else k.innerText="";let E;if(_.appendChild(k),0!==v){let e=this._renderLine(c,l,h.tabSize,v);HN._ttPolicy&&(e=HN._ttPolicy.createHTML(e)),_.insertAdjacentHTML("beforeend",e),E=c.getLineContent(v)}else{let e=this._renderLine(o,s,a.tabSize,m);HN._ttPolicy&&(e=HN._ttPolicy.createHTML(e)),_.insertAdjacentHTML("beforeend",e),E=o.getLineContent(m)}0===E.length&&(E=On(0,"blank"));let T="";switch(u){case 0:T=m===v?On(0,"{0} unchanged line {1}",E,m):On(0,"{0} original line {1} modified line {2}",E,m,v);break;case 1:T=On(0,"+ {0} modified line {1}",E,v);break;case 2:T=On(0,"- {0} original line {1}",E,m)}y.setAttribute("aria-label",T),e.appendChild(y)}}static _renderLine(e,t,i,n){const r=e.getLineContent(n),s=t.get(40),o=jp.createEmpty(r),a=lg.isBasicASCII(r,e.mightContainNonBasicASCII()),l=lg.containsRTL(r,a,e.mightContainRTL());return tg(new Yp(s.isMonospace&&!t.get(27),s.canUseHalfwidthRightwardsArrow,r,!1,a,l,0,o,[],i,0,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,t.get(103),t.get(86),t.get(80),t.get(41)!==Nr.OFF,null)).html}}HN._ttPolicy=null===(PN=window.trustedTypes)||void 0===PN?void 0:PN.createPolicy("diffReview",{createHTML:e=>e}),pv(((e,t)=>{const i=e.getColor(Ux);i&&t.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${i}; }`);const n=e.getColor(XS);n&&t.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)}));function jN(e){const t=e.get(ba),i=t.listDiffEditors(),n=t.getActiveCodeEditor();if(!n)return null;for(let e=0,t=i.length;e<t;e++){const t=i[e];if(t.getModifiedEditor().getId()===n.getId()||t.getOriginalEditor().getId()===n.getId())return t}return null}Ov(class extends Nv{constructor(){super({id:"editor.action.diffReview.next",label:On(0,"Go to Next Difference"),alias:"Go to Next Difference",precondition:Fb.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const i=jN(e);i&&i.diffReviewNext()}}),Ov(class extends Nv{constructor(){super({id:"editor.action.diffReview.prev",label:On(0,"Go to Previous Difference"),alias:"Go to Previous Difference",precondition:Fb.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const i=jN(e);i&&i.diffReviewPrev()}});const UN=ga("contextViewService"),GN=ga("contextMenuService");var KN=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class $N extends as{constructor(e,t,i,n,r,s){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=i,this.diff=n,this._contextMenuService=r,this._clipboardService=s,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=ed.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const o=i.getOption(56),a=i.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${o}px`,this._diffActions.style.lineHeight=`${o}px`,this._marginDomNode.appendChild(this._diffActions);const l=[];l.push(new Mb("diff.clipboard.copyDeletedContent",n.originalEndLineNumber>n.modifiedStartLineNumber?On(0,"Copy deleted lines"):On(0,"Copy deleted line"),void 0,!0,(()=>KN(this,void 0,void 0,(function*(){const e=new xo(n.originalStartLineNumber,1,n.originalEndLineNumber+1,1),t=n.originalModel.getValueInRange(e);yield this._clipboardService.writeText(t)})))));let c,h=0;n.originalEndLineNumber>n.modifiedStartLineNumber&&(c=new Mb("diff.clipboard.copyDeletedLineContent",On(0,"Copy deleted line ({0})",n.originalStartLineNumber),void 0,!0,(()=>KN(this,void 0,void 0,(function*(){const e=n.originalModel.getLineContent(n.originalStartLineNumber+h);yield this._clipboardService.writeText(e)})))),l.push(c));i.getOption(78)||l.push(new Mb("diff.inline.revertChange",On(0,"Revert this change"),void 0,!0,(()=>KN(this,void 0,void 0,(function*(){const e=new xo(n.originalStartLineNumber,1,n.originalEndLineNumber,n.originalModel.getLineMaxColumn(n.originalEndLineNumber)),t=n.originalModel.getValueInRange(e);if(0===n.modifiedEndLineNumber){const e=i.getModel().getLineMaxColumn(n.modifiedStartLineNumber);i.executeEdits("diffEditor",[{range:new xo(n.modifiedStartLineNumber,e,n.modifiedStartLineNumber,e),text:a+t}])}else{const e=i.getModel().getLineMaxColumn(n.modifiedEndLineNumber);i.executeEdits("diffEditor",[{range:new xo(n.modifiedStartLineNumber,1,n.modifiedEndLineNumber,e),text:t}])}})))));const u=(e,t)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:e,y:t}),getActions:()=>(c&&(c.label=On(0,"Copy deleted line ({0})",n.originalStartLineNumber+h)),l),autoSelectFirstItem:!0})};this._register(ul(this._diffActions,"mousedown",(e=>{const{top:t,height:i}=xl(this._diffActions);let n=Math.floor(o/3);e.preventDefault(),u(e.posx,t+i+n)}))),this._register(i.onMouseMove((e=>{if(8===e.target.type||5===e.target.type){e.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,h=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,o)):this.visibility=!1}else this.visibility=!1}))),this._register(i.onMouseDown((e=>{if(e.event.rightButton&&(8===e.target.type||5===e.target.type)){e.target.detail.viewZoneId===this._viewZoneId&&(e.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,o),u(e.event.posx,e.event.posy+o))}})))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}_updateLightBulbPosition(e,t,i){const{top:n}=xl(e),r=t-n,s=Math.floor(r/i),o=s*i;if(this._diffActions.style.top=`${o}px`,this.diff.viewLineCounts){let e=0;for(let t=0;t<this.diff.viewLineCounts.length;t++)if(e+=this.diff.viewLineCounts[t],s<e)return t}return s}}const qN=ga("clipboardService");Object.freeze({report(){}});const ZN=ga("editorProgressService");var YN,XN=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},QN=function(e,t){return function(i,n){t(i,n,e)}};class JN{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter((e=>!this._zonesMap[String(e.id)]))}clean(e){this._zones.length>0&&e.changeViewZones((e=>{for(const t of this._zones)e.removeZone(t)})),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,i,n){const r=n?wN.capture(e):null;e.changeViewZones((t=>{for(const e of this._zones)t.removeZone(e);for(const e of this._inlineDiffMargins)e.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let n=0,r=i.zones.length;n<r;n++){const r=i.zones[n];r.suppressMouseDown=!0;const s=t.addZone(r);this._zones.push(s),this._zonesMap[String(s)]=!0,i.zones[n].diff&&r.marginDomNode&&(r.suppressMouseDown=!1,this._inlineDiffMargins.push(new $N(s,r.marginDomNode,e,i.zones[n].diff,this._contextMenuService,this._clipboardService)))}})),r&&r.restore(e),this._decorations=e.deltaDecorations(this._decorations,i.decorations),t&&t.setZones(i.overviewZones)}}let eM=0;const tM=ON("diff-insert",ed.add,On(0,"Line decoration for inserts in the diff editor.")),iM=ON("diff-remove",ed.remove,On(0,"Line decoration for removals in the diff editor.")),nM=null===(YN=window.trustedTypes)||void 0===YN?void 0:YN.createPolicy("diffEditorWidget",{createHTML:e=>e});let rM=class e extends as{constructor(t,i,n,r,s,o,a,l,c,h,u,d){super(),this._editorProgressService=d,this._onDidDispose=this._register(new ms),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new ms),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new ms),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=s,this._codeEditorService=l,this._contextKeyService=this._register(o.createScoped(t)),this._instantiationService=a.createChild(new LL([nv,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=c,this._notificationService=h,this._id=++eM,this._state=0,this._updatingDiffProgress=null,this._domElement=t,i=i||{},this._renderSideBySide=!0,void 0!==i.renderSideBySide&&(this._renderSideBySide=i.renderSideBySide),this._maxComputationTime=5e3,void 0!==i.maxComputationTime&&(this._maxComputationTime=i.maxComputationTime),this._ignoreTrimWhitespace=!0,void 0!==i.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=i.ignoreTrimWhitespace),this._renderIndicators=!0,void 0!==i.renderIndicators&&(this._renderIndicators=i.renderIndicators),this._originalIsEditable=_r(i.originalEditable,!1),this._diffCodeLens=_r(i.diffCodeLens,!1),this._diffWordWrap=pM(i.diffWordWrap,"inherit"),void 0!==i.isInEmbeddedEditor?this._contextKeyService.createKey("isInEmbeddedDiffEditor",i.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._renderOverviewRuler=!0,void 0!==i.renderOverviewRuler&&(this._renderOverviewRuler=Boolean(i.renderOverviewRuler)),this._updateDecorationsRunner=this._register(new Qa((()=>this._updateDecorations()),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=Zv(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(ul(this._overviewDomElement,"mousedown",(e=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(e)}))),this._renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new JN(u,r),this._modifiedEditorState=new JN(u,r),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new Uv(this._containerDomElement,i.dimension,(()=>this._onDidContainerSizeChanged()))),i.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(i,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(i,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=new HN(this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._enableSplitViewResizing=!0,void 0!==i.enableSplitViewResizing&&(this._enableSplitViewResizing=i.enableSplitViewResizing),this._renderSideBySide?this._setStrategy(new hM(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new dM(this._createDataSource(),this._enableSplitViewResizing)),this._register(c.onDidColorThemeChange((t=>{this._strategy&&this._strategy.applyColors(t)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._renderSideBySide)})));const f=Iv.getDiffEditorContributions();for(const e of f)try{this._register(a.createInstance(e.ctor,this))}catch(e){Gr(e)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),1===this._state&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let i="monaco-diff-editor monaco-editor-background ";return t&&(i+="side-by-side "),i+=uv(e.type),i}_recreateOverviewRulers(){this._renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(t,i){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(t),i);this._register(n.onDidScrollChange((e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())}))),this._register(n.onDidChangeViewZones((()=>{this._onViewZonesChanged()}))),this._register(n.onDidChangeConfiguration((e=>{n.getModel()&&(e.hasChanged(40)&&this._updateDecorationsRunner.schedule(),e.hasChanged(129)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))}))),this._register(n.onDidChangeModelContent((()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})));const r=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget((()=>r.set(!0)))),this._register(n.onDidBlurEditorWidget((()=>r.set(!1)))),this._register(n.onDidContentSizeChange((t=>{const i=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,n=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:n,contentWidth:i,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})}))),n}_createRightHandSideEditor(t,i){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(t),i);this._register(n.onDidScrollChange((e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())}))),this._register(n.onDidChangeViewZones((()=>{this._onViewZonesChanged()}))),this._register(n.onDidChangeConfiguration((e=>{n.getModel()&&(e.hasChanged(40)&&this._updateDecorationsRunner.schedule(),e.hasChanged(129)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))}))),this._register(n.onDidChangeModelContent((()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}))),this._register(n.onDidChangeModelOptions((e=>{e.tabSize&&this._updateDecorationsRunner.schedule()})));const r=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget((()=>r.set(!0)))),this._register(n.onDidBlurEditorWidget((()=>r.set(!1)))),this._register(n.onDidContentSizeChange((t=>{const i=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,n=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:n,contentWidth:i,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})}))),n}_createInnerEditor(e,t,i,n){return e.createInstance(QL,t,i,n)}dispose(){this._codeEditorService.removeDiffEditor(this),-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return uu.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(t){let i=!1;void 0!==t.renderSideBySide&&this._renderSideBySide!==t.renderSideBySide&&(this._renderSideBySide=t.renderSideBySide,i=!0),void 0!==t.maxComputationTime&&(this._maxComputationTime=t.maxComputationTime,this._isVisible&&this._beginUpdateDecorationsSoon());let n=!1;void 0!==t.ignoreTrimWhitespace&&this._ignoreTrimWhitespace!==t.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=t.ignoreTrimWhitespace,n=!0),void 0!==t.renderIndicators&&this._renderIndicators!==t.renderIndicators&&(this._renderIndicators=t.renderIndicators,n=!0),n&&this._beginUpdateDecorations(),this._originalIsEditable=_r(t.originalEditable,this._originalIsEditable),this._diffCodeLens=_r(t.diffCodeLens,this._diffCodeLens),this._diffWordWrap=pM(t.diffWordWrap,this._diffWordWrap),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(t)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(t)),void 0!==t.enableSplitViewResizing&&(this._enableSplitViewResizing=t.enableSplitViewResizing),this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing),i&&(this._renderSideBySide?this._setStrategy(new hM(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new dM(this._createDataSource(),this._enableSplitViewResizing)),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._renderSideBySide)),void 0!==t.renderOverviewRuler&&this._renderOverviewRuler!==t.renderOverviewRuler&&(this._renderOverviewRuler=t.renderOverviewRuler,this._renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,i=0){this._modifiedEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._modifiedEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._modifiedEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,n=!0){this._modifiedEditor.revealRange(e,t,i,n)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){return{original:this._originalEditor.saveViewState(),modified:this._modifiedEditor.saveViewState()}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,i){this._modifiedEditor.trigger(e,t,i)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._renderOverviewRuler)return;if(!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const t=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),n=e.ENTIRE_DIFF_OVERVIEW_WIDTH-2*e.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:e.ONE_OVERVIEW_WIDTH,right:n+e.ONE_OVERVIEW_WIDTH,height:t-i}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:e.ONE_OVERVIEW_WIDTH,height:t-i}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout((()=>this._beginUpdateDecorations()),e.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t||!(!e||!t)&&e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const t=this._originalEditor.getModel(),i=this._modifiedEditor.getModel();if(!t||!i)return;this._diffComputationToken++;const n=this._diffComputationToken;this._setState(1),this._editorWorkerService.canComputeDiff(t.uri,i.uri)?this._editorWorkerService.computeDiff(t.uri,i.uri,this._ignoreTrimWhitespace,this._maxComputationTime).then((e=>{n===this._diffComputationToken&&t===this._originalEditor.getModel()&&i===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=e,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())}),(e=>{n===this._diffComputationToken&&t===this._originalEditor.getModel()&&i===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})):e._equals(t.uri,this._lastOriginalWarning)&&e._equals(i.uri,this._lastModifiedWarning)||(this._lastOriginalWarning=t.uri,this._lastModifiedWarning=i.uri,this._notificationService.warn(On(0,"Cannot compare files because one file is too large.")))}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),i=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),n=this._strategy.getEditorsDiffDecorations(e,this._ignoreTrimWhitespace,this._renderIndicators,t,i);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,n.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,n.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._renderSideBySide?t.wordWrapOverride1=this._diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._originalIsEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.wordWrapOverride1=this._diffWordWrap,i.revealHorizontalRightPadding=jr.revealHorizontalRightPadding.defaultValue+e.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const t=this._elementSizeObserver.getWidth(),i=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),r=this._strategy.layout();this._originalDomNode.style.width=r+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=t-r+"px",this._modifiedDomNode.style.left=r+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=i-n+"px",this._overviewDomElement.style.width=e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=t-e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(e.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:r,height:i-n}),this._modifiedEditor.layout({width:t-r-(this._renderOverviewRuler?e.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:i-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(i-n,t,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),i=this._modifiedEditor.getScrollHeight(),n=Math.max(0,e.height),r=Math.max(0,n-0),s=i>0?r/i:0;return{height:Math.max(0,Math.floor(e.height*s)),top:Math.floor(t*s)}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const i=this._diffComputationResult?this._diffComputationResult.changes:[];if(0===i.length||e<t(i[0]))return null;let n=0,r=i.length-1;for(;n<r;){const s=Math.floor((n+r)/2),o=t(i[s]),a=s+1<=r?t(i[s+1]):1073741824;e<o?r=s-1:e>=a?n=s+1:(n=s,r=s)}return i[n]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,(e=>e.originalStartLineNumber));if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),n=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,o=e-i;return o<=r?n+Math.min(o,s):n+s-r+o}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,(e=>e.modifiedStartLineNumber));if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),n=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,o=e-n;return o<=s?i+Math.min(o,r):i+r-s+o}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};rM.ONE_OVERVIEW_WIDTH=15,rM.ENTIRE_DIFF_OVERVIEW_WIDTH=30,rM.UPDATE_DIFF_DECORATIONS_DELAY=200,rM=XN([QN(3,qN),QN(4,Vd),QN(5,nv),QN(6,fa),QN(7,ba),QN(8,av),QN(9,jm),QN(10,GN),QN(11,ZN)],rM);class sM extends as{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(PC)||IC).transparent(2),i=(e.getColor(RC)||AC).transparent(2),n=!t.equals(this._insertColor)||!i.equals(this._removeColor);return this._insertColor=t,this._removeColor=i,n}getEditorsDiffDecorations(e,t,i,n,r){r=r.sort(((e,t)=>e.afterLineNumber-t.afterLineNumber)),n=n.sort(((e,t)=>e.afterLineNumber-t.afterLineNumber));const s=this._getViewZones(e,n,r,i),o=this._getOriginalEditorDecorations(e,t,i),a=this._getModifiedEditorDecorations(e,t,i);return{original:{decorations:o.decorations,overviewZones:o.overviewZones,zones:s.original},modified:{decorations:a.decorations,overviewZones:a.overviewZones,zones:s.modified}}}}class oM{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class aM{constructor(e,t,i,n,r){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=i,this._originalEditor=n,this._modifiedEditor=r}static _getViewLineCount(e,t,i){const n=e.getModel(),r=e._getViewModel();if(n&&r){const e=vM(n,r,t,i);return e.endLineNumber-e.startLineNumber+1}return i-t+1}getViewZones(){const e=this._originalEditor.getOption(56),t=this._modifiedEditor.getOption(56),i=-1!==this._originalEditor.getOption(129).wrappingColumn,n=-1!==this._modifiedEditor.getOption(129).wrappingColumn,r=i||n,s=this._originalEditor.getModel(),o=this._originalEditor._getViewModel().coordinatesConverter,a=this._modifiedEditor._getViewModel().coordinatesConverter,l=[],c=[];let h=0,u=0,d=0,f=0,p=0,g=0;const m=(e,t)=>e.afterLineNumber-t.afterLineNumber,b=(e,t)=>{if(null===t.domNode&&e.length>0){const i=e[e.length-1];if(i.afterLineNumber===t.afterLineNumber&&null===i.domNode)return void(i.heightInLines+=t.heightInLines)}e.push(t)},v=new oM(this._modifiedForeignVZ),y=new oM(this._originalForeignVZ);let _=1,w=1;for(let i=0,n=this._lineChanges.length;i<=n;i++){const S=i<n?this._lineChanges[i]:null;null!==S?(d=S.originalStartLineNumber+(S.originalEndLineNumber>0?-1:0),f=S.modifiedStartLineNumber+(S.modifiedEndLineNumber>0?-1:0),u=S.originalEndLineNumber>0?aM._getViewLineCount(this._originalEditor,S.originalStartLineNumber,S.originalEndLineNumber):0,h=S.modifiedEndLineNumber>0?aM._getViewLineCount(this._modifiedEditor,S.modifiedStartLineNumber,S.modifiedEndLineNumber):0,p=Math.max(S.originalStartLineNumber,S.originalEndLineNumber),g=Math.max(S.modifiedStartLineNumber,S.modifiedEndLineNumber)):(d+=1e7+u,f+=1e7+h,p=d,g=f);let C=[],x=[];if(r){let e;e=S?S.originalEndLineNumber>0?S.originalStartLineNumber-_:S.modifiedStartLineNumber-w:s.getLineCount()-_;for(let t=0;t<e;t++){const e=_+t,i=w+t,n=o.getModelLineViewLineCount(e),r=a.getModelLineViewLineCount(i);n<r?C.push({afterLineNumber:e,heightInLines:r-n,domNode:null,marginDomNode:null}):n>r&&x.push({afterLineNumber:i,heightInLines:n-r,domNode:null,marginDomNode:null})}S&&(_=(S.originalEndLineNumber>0?S.originalEndLineNumber:S.originalStartLineNumber)+1,w=(S.modifiedEndLineNumber>0?S.modifiedEndLineNumber:S.modifiedStartLineNumber)+1)}for(;v.current&&v.current.afterLineNumber<=g;){let e;e=v.current.afterLineNumber<=f?d-f+v.current.afterLineNumber:p;let i=null;S&&S.modifiedStartLineNumber<=v.current.afterLineNumber&&v.current.afterLineNumber<=S.modifiedEndLineNumber&&(i=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),C.push({afterLineNumber:e,heightInLines:v.current.height/t,domNode:null,marginDomNode:i}),v.advance()}for(;y.current&&y.current.afterLineNumber<=p;){let t;t=y.current.afterLineNumber<=d?f-d+y.current.afterLineNumber:g,x.push({afterLineNumber:t,heightInLines:y.current.height/e,domNode:null}),y.advance()}if(null!==S&&gM(S)){const e=this._produceOriginalFromDiff(S,u,h);e&&C.push(e)}if(null!==S&&mM(S)){const e=this._produceModifiedFromDiff(S,u,h);e&&x.push(e)}let k=0,E=0;for(C=C.sort(m),x=x.sort(m);k<C.length&&E<x.length;){const e=C[k],t=x[E],i=e.afterLineNumber-d,n=t.afterLineNumber-f;i<n?(b(l,e),k++):n<i?(b(c,t),E++):e.shouldNotShrink?(b(l,e),k++):t.shouldNotShrink?(b(c,t),E++):e.heightInLines>=t.heightInLines?(e.heightInLines-=t.heightInLines,E++):(t.heightInLines-=e.heightInLines,k++)}for(;k<C.length;)b(l,C[k]),k++;for(;E<x.length;)b(c,x[E]),E++}return{original:aM._ensureDomNodes(l),modified:aM._ensureDomNodes(c)}}static _ensureDomNodes(e){return e.map((e=>(e.domNode||(e.domNode=bM()),e)))}}function lM(e,t,i,n,r){return{range:new xo(e,t,i,n),options:r}}const cM={charDelete:Dw.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Dw.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Dw.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Dw.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Dw.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:Dw.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+cv.asClassName(tM),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:Dw.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:Dw.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+cv.asClassName(iM),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:Dw.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class hM extends sM{constructor(e,t){super(e),this._disableSash=!1===t,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new gN(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart((()=>this._onSashDragStart())),this._sash.onDidChange((e=>this._onSashDrag(e))),this._sash.onDidEnd((()=>this._onSashDragEnd())),this._sash.onDidReset((()=>this._onSashReset()))}setEnableSplitViewResizing(e){const t=!1===e;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const t=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?rM.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||.5)*t);const n=Math.floor(.5*t);return i=this._disableSash?n:i||n,t>2*hM.MINIMUM_EDITOR_WIDTH?(i<hM.MINIMUM_EDITOR_WIDTH&&(i=hM.MINIMUM_EDITOR_WIDTH),i>t-hM.MINIMUM_EDITOR_WIDTH&&(i=t-hM.MINIMUM_EDITOR_WIDTH)):i=n,this._sashPosition!==i&&(this._sashPosition=i,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const t=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?rM.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/t);this._sashRatio=i/t,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,i){const n=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new uM(e,t,i,n,r).getViewZones()}_getOriginalEditorDecorations(e,t,i){const n=this._dataSource.getOriginalEditor(),r=String(this._removeColor),s={decorations:[],overviewZones:[]},o=n.getModel(),a=n._getViewModel();for(const n of e)if(mM(n)){s.decorations.push({range:new xo(n.originalStartLineNumber,1,n.originalEndLineNumber,1073741824),options:i?cM.lineDeleteWithSign:cM.lineDelete}),gM(n)&&n.charChanges||s.decorations.push(lM(n.originalStartLineNumber,1,n.originalEndLineNumber,1073741824,cM.charDeleteWholeLine));const e=vM(o,a,n.originalStartLineNumber,n.originalEndLineNumber);if(s.overviewZones.push(new lT(e.startLineNumber,e.endLineNumber,r)),n.charChanges)for(const e of n.charChanges)if(mM(e))if(t)for(let t=e.originalStartLineNumber;t<=e.originalEndLineNumber;t++){let i,n;i=t===e.originalStartLineNumber?e.originalStartColumn:o.getLineFirstNonWhitespaceColumn(t),n=t===e.originalEndLineNumber?e.originalEndColumn:o.getLineLastNonWhitespaceColumn(t),s.decorations.push(lM(t,i,t,n,cM.charDelete))}else s.decorations.push(lM(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn,cM.charDelete))}return s}_getModifiedEditorDecorations(e,t,i){const n=this._dataSource.getModifiedEditor(),r=String(this._insertColor),s={decorations:[],overviewZones:[]},o=n.getModel(),a=n._getViewModel();for(const n of e)if(gM(n)){s.decorations.push({range:new xo(n.modifiedStartLineNumber,1,n.modifiedEndLineNumber,1073741824),options:i?cM.lineInsertWithSign:cM.lineInsert}),mM(n)&&n.charChanges||s.decorations.push(lM(n.modifiedStartLineNumber,1,n.modifiedEndLineNumber,1073741824,cM.charInsertWholeLine));const e=vM(o,a,n.modifiedStartLineNumber,n.modifiedEndLineNumber);if(s.overviewZones.push(new lT(e.startLineNumber,e.endLineNumber,r)),n.charChanges)for(const e of n.charChanges)if(gM(e))if(t)for(let t=e.modifiedStartLineNumber;t<=e.modifiedEndLineNumber;t++){let i,n;i=t===e.modifiedStartLineNumber?e.modifiedStartColumn:o.getLineFirstNonWhitespaceColumn(t),n=t===e.modifiedEndLineNumber?e.modifiedEndColumn:o.getLineLastNonWhitespaceColumn(t),s.decorations.push(lM(t,i,t,n,cM.charInsert))}else s.decorations.push(lM(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn,cM.charInsert))}return s}}hM.MINIMUM_EDITOR_WIDTH=100;class uM extends aM{constructor(e,t,i,n,r){super(e,t,i,n,r)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,i){return i>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i-t,domNode:null}:null}_produceModifiedFromDiff(e,t,i){return t>i?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-i,domNode:null}:null}}class dM extends sM{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange((t=>{this._decorationsLeft!==t.decorationsLeft&&(this._decorationsLeft=t.decorationsLeft,e.relayoutEditors())})))}setEnableSplitViewResizing(e){}_getViewZones(e,t,i,n){const r=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new fM(e,t,i,r,s,n).getViewZones()}_getOriginalEditorDecorations(e,t,i){const n=String(this._removeColor),r={decorations:[],overviewZones:[]},s=this._dataSource.getOriginalEditor(),o=s.getModel(),a=s._getViewModel();for(const t of e)if(mM(t)){r.decorations.push({range:new xo(t.originalStartLineNumber,1,t.originalEndLineNumber,1073741824),options:cM.lineDeleteMargin});const e=vM(o,a,t.originalStartLineNumber,t.originalEndLineNumber);r.overviewZones.push(new lT(e.startLineNumber,e.endLineNumber,n))}return r}_getModifiedEditorDecorations(e,t,i){const n=this._dataSource.getModifiedEditor(),r=String(this._insertColor),s={decorations:[],overviewZones:[]},o=n.getModel(),a=n._getViewModel();for(const n of e)if(gM(n)){s.decorations.push({range:new xo(n.modifiedStartLineNumber,1,n.modifiedEndLineNumber,1073741824),options:i?cM.lineInsertWithSign:cM.lineInsert});const e=vM(o,a,n.modifiedStartLineNumber,n.modifiedEndLineNumber);if(s.overviewZones.push(new lT(e.startLineNumber,e.endLineNumber,r)),n.charChanges){for(const e of n.charChanges)if(gM(e))if(t)for(let t=e.modifiedStartLineNumber;t<=e.modifiedEndLineNumber;t++){let i,n;i=t===e.modifiedStartLineNumber?e.modifiedStartColumn:o.getLineFirstNonWhitespaceColumn(t),n=t===e.modifiedEndLineNumber?e.modifiedEndColumn:o.getLineLastNonWhitespaceColumn(t),s.decorations.push(lM(t,i,t,n,cM.charInsert))}else s.decorations.push(lM(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn,cM.charInsert))}else s.decorations.push(lM(n.modifiedStartLineNumber,1,n.modifiedEndLineNumber,1073741824,cM.charInsertWholeLine))}return s}layout(){return Math.max(5,this._decorationsLeft)}}class fM extends aM{constructor(e,t,i,n,r,s){super(e,t,i,n,r),this._originalModel=n.getModel(),this._renderIndicators=s,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,i){const n=document.createElement("div");return n.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i,domNode:document.createElement("div"),marginDomNode:n}}_produceModifiedFromDiff(e,t,i){const n=document.createElement("div");n.className="view-lines line-delete monaco-mouse-cursor-text";const r=document.createElement("div");r.className="inline-deleted-margin-view-zone";const s={shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:n,marginDomNode:r,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let t=e.originalStartLineNumber;t<=e.originalEndLineNumber;t++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(t),null);return this._pendingLineChange.push(e),this._pendingViewZones.push(s),s}_finalize(e){const t=this._modifiedEditor.getOptions(),i=this._modifiedEditor.getModel().getOptions().tabSize,n=t.get(40),r=t.get(27),s=n.typicalHalfwidthCharacterWidth,o=t.get(91),a=this._originalModel.mightContainNonBasicASCII(),l=this._originalModel.mightContainRTL(),c=t.get(56),h=t.get(128).decorationsWidth,u=t.get(103),d=t.get(86),f=t.get(80),p=t.get(41),g=this._lineBreaksComputer.finalize();let m=0;for(let t=0;t<this._pendingLineChange.length;t++){const b=this._pendingLineChange[t],v=this._pendingViewZones[t],y=v.domNode;$v.applyFontInfoSlow(y,n);const _=v.marginDomNode;$v.applyFontInfoSlow(_,n);const w=[];if(b.charChanges)for(const e of b.charChanges)mM(e)&&w.push(new cg(new xo(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),"char-delete",0));const S=w.length>0,C=ff(1e4);let x=0,k=0,E=null;for(let t=b.originalStartLineNumber;t<=b.originalEndLineNumber;t++){const s=t-b.originalStartLineNumber,o=this._originalModel.getLineTokens(t),y=o.getLineContent(),T=g[m++],L=Gp.filter(w,t,1,y.length+1);if(T){let g=0;for(const e of T.breakOffsets){const t=o.sliceAndInflate(g,e,0),s=y.substring(g,e);x=Math.max(x,this._renderOriginalLine(k++,s,t,Gp.extractWrapped(L,g,e),S,a,l,n,r,c,h,u,d,f,p,i,C,_)),g=e}for(E||(E=[]);E.length<s;)E[E.length]=1;E[s]=T.breakOffsets.length,v.heightInLines+=T.breakOffsets.length-1;const m=document.createElement("div");m.className="line-delete",e.original.push({afterLineNumber:t,afterColumn:0,heightInLines:T.breakOffsets.length-1,domNode:bM(),marginDomNode:m})}else x=Math.max(x,this._renderOriginalLine(k++,y,o,L,S,a,l,n,r,c,h,u,d,f,p,i,C,_))}x+=o;const T=C.build(),L=nM?nM.createHTML(T):T;if(y.innerHTML=L,v.minWidthInPx=x*s,E){const e=b.originalEndLineNumber-b.originalStartLineNumber;for(;E.length<=e;)E[E.length]=1}v.diff.viewLineCounts=E}e.original.sort(((e,t)=>e.afterLineNumber-t.afterLineNumber))}_renderOriginalLine(e,t,i,n,r,s,o,a,l,c,h,u,d,f,p,g,m,b){m.appendASCIIString('<div class="view-line'),r||m.appendASCIIString(" char-delete"),m.appendASCIIString('" style="top:'),m.appendASCIIString(String(e*c)),m.appendASCIIString('px;width:1000000px;">');const v=lg.isBasicASCII(t,s),y=lg.containsRTL(t,v,o),_=Jp(new Yp(a.isMonospace&&!l,a.canUseHalfwidthRightwardsArrow,t,!1,v,y,0,i,n,g,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,u,d,f,p!==Nr.OFF,null),m);if(m.appendASCIIString("</div>"),this._renderIndicators){const t=document.createElement("div");t.className=`delete-sign ${cv.asClassName(iM)}`,t.setAttribute("style",`position:absolute;top:${e*c}px;width:${h}px;height:${c}px;right:0;`),b.appendChild(t)}const w=_.characterMapping.getAbsoluteOffsets();return w.length>0?w[w.length-1]:0}}function pM(e,t){return kr(e,t,["off","on","inherit"])}function gM(e){return e.modifiedEndLineNumber>0}function mM(e){return e.originalEndLineNumber>0}function bM(){const e=document.createElement("div");return e.className="diagonal-fill",e}function vM(e,t,i,n){const r=e.getLineCount();return i=Math.min(r,Math.max(1,i)),n=Math.min(r,Math.max(1,n)),t.coordinatesConverter.convertModelRangeToViewRange(new xo(i,e.getLineMinColumn(i),n,e.getLineMaxColumn(n)))}pv(((e,t)=>{const i=e.getColor(PC);i&&(t.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${i}; }`),t.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${i}; }`),t.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${i}; }`));const n=e.getColor(RC);n&&(t.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),t.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),t.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const r=e.getColor(BC);r&&t.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${"hc"===e.type?"dashed":"solid"} ${r}; }`);const s=e.getColor(FC);s&&t.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${"hc"===e.type?"dashed":"solid"} ${s}; }`);const o=e.getColor(XS);o&&t.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${o}; }`);const a=e.getColor(WC);a&&t.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const l=e.getColor(QS);l&&t.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport {\n\t\t\t\tbackground: ${l};\n\t\t\t}\n\t\t`);const c=e.getColor(JS);c&&t.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:hover {\n\t\t\t\tbackground: ${c};\n\t\t\t}\n\t\t`);const h=e.getColor(eC);h&&t.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:active {\n\t\t\t\tbackground: ${h};\n\t\t\t}\n\t\t`);const u=e.getColor(VC);t.addRule(`\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${u} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${u} 50%, ${u} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`)}));const yM=ga("themeService"),_M=ga("keybindingService");class wM extends as{constructor(){super(),this._onCodeEditorAdd=this._register(new ms),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new ms),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new ms),this._onDiffEditorRemove=this._register(new ms),this._onDecorationTypeRegistered=this._register(new ms),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map((e=>this._codeEditors[e]))}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map((e=>this._diffEditors[e]))}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}setModelProperty(e,t,i){const n=e.toString();let r;this._modelProperties.has(n)?r=this._modelProperties.get(n):(r=new Map,this._modelProperties.set(n,r)),r.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i)){return this._modelProperties.get(i).get(t)}}}var SM=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},CM=function(e,t){return function(i,n){t(i,n,e)}};class xM{constructor(e,t,i){this._parent=e,this._editorId=t,this._styleSheet=i,this._refCount=0}ref(){this._refCount++}unref(){var e;this._refCount--,0===this._refCount&&(null===(e=this._styleSheet.parentNode)||void 0===e||e.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){zl(e,this._styleSheet)}}class kM{constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){zl(e,this._styleSheet)}}let EM=class extends wM{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._globalStyleSheet=e||null,this._themeService=t}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=new kM(Bl())),this._globalStyleSheet}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();const t=e.getContainerDomNode();if(!Al(t))return this._getOrCreateGlobalStyleSheet();const i=e.getId();if(!this._editorStyleSheets.has(i)){const e=new xM(this,i,Bl(t));this._editorStyleSheets.set(i,e)}return this._editorStyleSheets.get(i)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,i,n,r){let s=this._decorationOptionProviders.get(t);if(!s){const o=this._getOrCreateStyleSheet(r),a={styleSheet:o,key:t,parentTypeKey:n,options:i||Object.create(null)};s=n?new TM(this._themeService,o,a):new LM(e,this._themeService,o,a),this._decorationOptionProviders.set(t,s),this._onDecorationTypeRegistered.fire(t)}s.refCount++}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach((t=>t.removeDecorations(e)))))}resolveDecorationOptions(e,t){const i=this._decorationOptionProviders.get(e);if(!i)throw new Error("Unknown decoration type key: "+e);return i.getOptions(this,t)}};EM=SM([CM(1,av)],EM);class TM{constructor(e,t,i){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=i.parentTypeKey,this.refCount=0,this._beforeContentRules=new MM(3,i,e),this._afterContentRules=new MM(4,i,e)}getOptions(e,t){const i=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(i.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(i.afterContentClassName=this._afterContentRules.className),i}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}}class LM{constructor(e,t,i,n){this._disposables=new os,this.description=e,this._styleSheet=i,this._styleSheet.ref(),this.refCount=0;const r=e=>{const i=new MM(e,n,t);if(this._disposables.add(i),i.hasContent)return i.className};this.className=r(0);const s=(e=>{const i=new MM(e,n,t);return this._disposables.add(i),i.hasContent?{className:i.className,hasLetterSpacing:i.hasLetterSpacing}:null})(1);s&&(this.inlineClassName=s.className,this.inlineClassNameAffectsLetterSpacing=s.hasLetterSpacing),this.beforeContentClassName=r(3),this.afterContentClassName=r(4),this.glyphMarginClassName=r(2);const o=n.options;this.isWholeLine=Boolean(o.isWholeLine),this.stickiness=o.rangeBehavior;const a=o.light&&o.light.overviewRulerColor||o.overviewRulerColor,l=o.dark&&o.dark.overviewRulerColor||o.overviewRulerColor;void 0===a&&void 0===l||(this.overviewRuler={color:a||l,darkColor:l||a,position:o.overviewRulerLane||du.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness}:this}dispose(){this._disposables.dispose(),this._styleSheet.unref()}}const NM={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};"};class MM{constructor(e,t,i){this._theme=i.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let n=OM.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(n=n+" "+OM.getClassName(this._providerArgs.parentTypeKey,e)),this._className=n,this._unThemedSelector=OM.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=i.onDidColorThemeChange((e=>{this._theme=i.getColorTheme(),this._removeCSS(),this._buildCSS()})):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){const e=this._providerArgs.options;let t,i,n;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),i=this.getCSSTextForModelDecorationClassName(e.light),n=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),i=this.getCSSTextForModelDecorationInlineClassName(e.light),n=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),i=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;default:throw new Error("Unknown rule type: "+this._ruleType)}const r=this._providerArgs.styleSheet;let s=!1;t.length>0&&(r.insertRule(`${this._unThemedSelector} {${t}}`,0),s=!0),i.length>0&&(r.insertRule(`.vs${this._unThemedSelector} {${i}}`,0),s=!0),n.length>0&&(r.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector} {${n}}`,0),s=!0),this._hasContent=s}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";const t=[];if(void 0!==e){if(this.collectBorderSettingsCSSText(e,t),void 0!==e.contentIconPath&&t.push(lc(NM.contentIconPath,rc(uo.revive(e.contentIconPath)))),"string"==typeof e.contentText){const i=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(lc(NM.contentText,i))}this.collectCSSText(e,["fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";const t=[];return void 0!==e.gutterIconPath&&(t.push(lc(NM.gutterIconPath,rc(uo.revive(e.gutterIconPath)))),void 0!==e.gutterIconSize&&t.push(lc(NM.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return!!this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)&&(t.push(lc("box-sizing: border-box;")),!0)}collectCSSText(e,t,i){const n=i.length;for(let n of t){const t=this.resolveValue(e[n]);"string"==typeof t&&i.push(lc(NM[n],t))}return i.length!==n}resolveValue(e){if(function(e){return e&&"string"==typeof e.id}(e)){this._usesThemeColors=!0;const t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}}class OM{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,i){let n=".monaco-editor ."+this.getClassName(e,i);return t&&(n=n+"."+this.getClassName(t,i)),3===i?n+="::before":4===i&&(n+="::after"),n}}var DM=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},IM=function(e,t){return function(i,n){t(i,n,e)}};let AM=class extends EM{constructor(e,t,i){super(e,i),this.onCodeEditorAdd((()=>this._checkContextKey())),this.onCodeEditorRemove((()=>this._checkContextKey())),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,i){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const i=t.resource.scheme;if(i===il.http||i===il.https)return nc(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if("number"==typeof i.endLineNumber&&"number"==typeof i.endColumn)e.setSelection(i),e.revealRangeInCenter(i,1);else{const t={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(t),e.revealPositionInCenter(t,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};AM=DM([IM(1,nv),IM(2,av)],AM);var PM=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},RM=function(e,t){return function(i,n){t(i,n,e)}};let BM=0,FM=!1;function WM(){FM||(FM=!0,function(e){wb=document.createElement("div"),wb.className="monaco-aria-container";const t=()=>{const e=document.createElement("div");return e.className="monaco-alert",e.setAttribute("role","alert"),e.setAttribute("aria-atomic","true"),wb.appendChild(e),e};Sb=t(),Cb=t();const i=()=>{const e=document.createElement("div");return e.className="monaco-status",e.setAttribute("role","complementary"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),wb.appendChild(e),e};xb=i(),kb=i(),e.appendChild(wb)}(document.body))}let VM=class extends QL{constructor(e,t,i,n,r,s,o,a,l,c){const h=Object.assign({},t);h.ariaLabel=h.ariaLabel||Qm.editorViewAccessibleLabel,h.ariaLabel=h.ariaLabel+";"+Qm.accessibilityHelpMessage,super(e,h,{},i,n,r,s,a,l,c),this._standaloneKeybindingService=o instanceof hb?o:null,WM()}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let n="DYNAMIC_"+ ++BM,r=Fb.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(n,e,t,r),n}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if("string"!=typeof e.id||"string"!=typeof e.label||"function"!=typeof e.run)throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),as.None;const t=e.id,i=e.label,n=Fb.and(Fb.equals("editorId",this.getId()),Fb.deserialize(e.precondition)),r=e.keybindings,s=Fb.and(n,Fb.deserialize(e.keybindingContext)),o=e.contextMenuGroupId||null,a=e.contextMenuOrder||0,l=(t,...i)=>Promise.resolve(e.run(this,...i)),c=new os,h=this.getId()+":"+t;if(c.add(Hh.registerCommand(h,l)),o){let e={command:{id:h,title:i},when:n,group:o,order:a};c.add(wv.appendMenuItem(yv.EditorContext,e))}if(Array.isArray(r))for(const e of r)c.add(this._standaloneKeybindingService.addDynamicKeybinding(h,e,l,s));let u=new sL(h,i,i,n,l,this._contextKeyService);return this._actions[t]=u,c.add(ss((()=>{delete this._actions[t]}))),c}_triggerCommand(e,t){if(this._codeEditorService instanceof AM)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};VM=PM([RM(2,fa),RM(3,ba),RM(4,zh),RM(5,nv),RM(6,_M),RM(7,av),RM(8,jm),RM(9,NL)],VM);let zM=class extends VM{constructor(e,t,i,n,r,s,o,a,l,c,h,u,d,f,p){const g=Object.assign({},t);bb(u,g,!1);const m=c.registerEditorContainer(e);"string"==typeof g.theme&&c.setTheme(g.theme),void 0!==g.autoDetectHighContrast&&c.setAutoDetectHighContrast(Boolean(g.autoDetectHighContrast));let b,v=g.model;if(delete g.model,super(e,g,n,r,s,o,a,c,h,d),this._contextViewService=l,this._configurationService=u,this._standaloneThemeService=c,this._register(i),this._register(m),void 0===v?(b=jM(f,p,g.value||"",g.language||"text/plain",void 0),this._ownsModel=!0):(b=v,this._ownsModel=!1),this._attachModel(b),b){let e={oldModelUrl:null,newModelUrl:b.uri};this._onDidChangeModel.fire(e)}}dispose(){super.dispose()}updateOptions(e){bb(this._configurationService,e,!1),"string"==typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),void 0!==e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};zM=PM([RM(3,fa),RM(4,ba),RM(5,zh),RM(6,nv),RM(7,_M),RM(8,UN),RM(9,yM),RM(10,jm),RM(11,_m),RM(12,NL),RM(13,$u),RM(14,zd)],zM);let HM=class extends rM{constructor(e,t,i,n,r,s,o,a,l,c,h,u,d,f,p){const g=Object.assign({},t);bb(u,g,!0);const m=c.registerEditorContainer(e);"string"==typeof g.theme&&c.setTheme(g.theme),void 0!==g.autoDetectHighContrast&&c.setAutoDetectHighContrast(Boolean(g.autoDetectHighContrast)),super(e,g,{},p,a,r,n,l,c,h,d,f),this._contextViewService=o,this._configurationService=u,this._standaloneThemeService=c,this._register(i),this._register(m),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){bb(this._configurationService,e,!0),"string"==typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),void 0!==e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(VM,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};function jM(e,t,i,n,r){if(i=i||"",!n){const n=i.indexOf("\n");let s=i;return-1!==n&&(s=i.substring(0,n)),UM(e,i,t.createByFilepathOrFirstLine(r||null,s),r)}return UM(e,i,t.create(n),r)}function UM(e,t,i,n){return e.createModel(t,i,n)}HM=PM([RM(3,fa),RM(4,nv),RM(5,_M),RM(6,UN),RM(7,Vd),RM(8,ba),RM(9,yM),RM(10,jm),RM(11,_m),RM(12,GN),RM(13,ZN),RM(14,qN)],HM);class GM{constructor(e){this._languageIdentifier=e}getId(){return this._languageIdentifier.language}}const KM="text/plain",$M="application/unknown";let qM=[],ZM=[],YM=[];function XM(e,t=!1){const i=function(e){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:e.userConfigured,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?e.filepattern.toLowerCase():void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(Ys.sep)>=0}}(e);qM.push(i),i.userConfigured?YM.push(i):ZM.push(i),t&&!i.userConfigured&&qM.forEach((e=>{e.mime===i.mime||e.userConfigured||(i.extension&&e.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&e.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&e.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&e.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))}))}function QM(e,t){let i;if(e)switch(e.scheme){case il.file:i=e.fsPath;break;case il.data:i=Lh.parseMetaData(e).get(Lh.META_DATA_LABEL);break;default:i=e.path}if(!i)return[$M];i=i.toLowerCase();const n=to(i),r=JM(i,n,YM);if(r)return[r,KM];const s=JM(i,n,ZM);if(s)return[s,KM];if(t){const e=function(e){Kc(e)&&(e=e.substr(1));if(e.length>0)for(let t=qM.length-1;t>=0;t--){const i=qM[t];if(!i.firstline)continue;const n=e.match(i.firstline);if(n&&n.length>0)return i.mime}return null}(t);if(e)return[e,KM]}return[$M]}function JM(e,t,i){let n=null,r=null,s=null;for(let o=i.length-1;o>=0;o--){const a=i[o];if(t===a.filenameLowercase){n=a;break}if(a.filepattern&&(!r||a.filepattern.length>r.filepattern.length)){const i=a.filepatternOnPath?e:t;Uu(a.filepatternLowercase,i)&&(r=a)}a.extension&&(!s||a.extension.length>s.extension.length)&&t.endsWith(a.extensionLowercase)&&(s=a)}return n?n.mime:r?r.mime:s?s.mime:null}const eO=new class{constructor(){this._onDidChangeLanguages=new ms,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e)return void this._languages.splice(t,1)}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}};zg.add("editor.modesRegistry",eO);const tO="plaintext",iO=new id(tO,1);eO.registerLanguage({id:tO,extensions:[".txt"],aliases:[On(0,"Plain Text"),"text"],mimetypes:["text/plain"]}),Pf.register(iO,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],folding:{offSide:!0}},0);const nO=Object.prototype.hasOwnProperty;class rO extends as{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new ms),this.onDidChange=this._onDidChange.event,this._warnOnOverwrite=t,this._nextLanguageId2=1,this._languageIdToLanguage=[],this._languageToLanguageId=Object.create(null),this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(eO.onDidChangeLanguages((e=>this._initializeFromRegistry()))))}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={};const e=eO.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach((e=>{let t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach((e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier})),t.mimetypes.forEach((e=>{this._mimeTypesMap[e]=t.identifier}))})),zg.as(Ug).registerOverrideIdentifiers(eO.getLanguages().map((e=>e.id))),this._onDidChange.fire()}_getLanguageId(e){if(this._languageToLanguageId[e])return this._languageToLanguageId[e];const t=this._nextLanguageId2++;return this._languageIdToLanguage[t]=e,this._languageToLanguageId[e]=t,t}_registerLanguage(e){const t=e.id;let i;if(nO.call(this._languages,t))i=this._languages[t];else{const e=this._getLanguageId(t);i={identifier:new id(t,e),name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=i}this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let e of t.extensions)XM({id:i,mime:n,extension:e},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let r of t.filenames)XM({id:i,mime:n,filename:r},this._warnOnOverwrite),e.filenames.push(r);if(Array.isArray(t.filenamePatterns))for(let e of t.filenamePatterns)XM({id:i,mime:n,filepattern:e},this._warnOnOverwrite);if("string"==typeof t.firstLine&&t.firstLine.length>0){let e=t.firstLine;"^"!==e.charAt(0)&&(e="^"+e);try{let t=new RegExp(e);"^"!==(r=t).source&&"^$"!==r.source&&"$"!==r.source&&"^\\s*$"!==r.source&&r.exec("")&&0===r.lastIndex||XM({id:i,mime:n,firstline:t},this._warnOnOverwrite)}catch(e){Gr(e)}}var r;e.aliases.push(i);let s=null;if(void 0!==t.aliases&&Array.isArray(t.aliases)&&(s=0===t.aliases.length?[null]:t.aliases),null!==s)for(const t of s)t&&0!==t.length&&e.aliases.push(t);let o=null!==s&&s.length>0;if(o&&null===s[0]);else{let t=(o?s[0]:null)||i;!o&&e.name||(e.name=t)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return!!nO.call(this._mimeTypesMap,e)||nO.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return nO.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e].language:null}extractModeIds(e){return e?e.split(",").map((e=>e.trim())).map((e=>nO.call(this._mimeTypesMap,e)?this._mimeTypesMap[e].language:e)).filter((e=>nO.call(this._languages,e))):[]}getLanguageIdentifier(e){if(e===Bd||0===e)return Fd;let t;if("string"==typeof e)t=e;else if(t=this._languageIdToLanguage[e],!t)return null;return nO.call(this._languages,t)?this._languages[t].identifier:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let i=QM(e,t);return this.extractModeIds(i.join(","))}}class sO{constructor(e,t){let i;this._selector=t,this.languageIdentifier=this._selector(),this._onDidChange=new ms({onFirstListenerAdd:()=>{i=e((()=>this._evaluate()))},onLastListenerRemove:()=>{i.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){let e=this._selector();e.id!==this.languageIdentifier.id&&(this.languageIdentifier=e,this._onDidChange.fire(this.languageIdentifier))}}class oO extends as{constructor(e=!1){super(),this._onDidCreateMode=this._register(new ms),this.onDidCreateMode=this._onDidCreateMode.event,this._onLanguagesMaybeChanged=this._register(new ms({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,this._instantiatedModes={},this._registry=this._register(new rO(!0,e)),this._register(this._registry.onDidChange((()=>this._onLanguagesMaybeChanged.fire())))}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){return yp(this._registry.getModeIdsFromFilepathOrFirstLine(e,t),null)}getModeId(e){return yp(this._registry.extractModeIds(e),null)}getLanguageIdentifier(e){return this._registry.getLanguageIdentifier(e)}create(e){return new sO(this.onLanguagesMaybeChanged,(()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)}))}createByFilepathOrFirstLine(e,t){return new sO(this.onLanguagesMaybeChanged,(()=>{const i=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(i)}))}_createModeAndGetLanguageIdentifier(e){const t=this.getLanguageIdentifier(e||"plaintext")||Fd;return this._getOrCreateMode(t.language),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._instantiatedModes.hasOwnProperty(e)){let t=this.getLanguageIdentifier(e)||Fd;this._instantiatedModes[e]=new GM(t),this._onDidCreateMode.fire(this._instantiatedModes[e])}return this._instantiatedModes[e]}}const aO=ga("undoRedoService");class lO{constructor(e,t){this.resource=e,this.elements=t}}class cO{constructor(){this.id=cO._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}}cO._ID=0,cO.None=new cO;class hO{constructor(){this.id=hO._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}}hO._ID=0,hO.None=new hO;class uO{constructor(e,t,i){this._legend=e,this._themeService=t,this._logService=i,this._hashTable=new fO,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,i){const n=this._hashTable.get(e,t,i.id);let r;if(n)r=n.metadata,this._logService.getLevel()===kp.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${nd.getForeground(r)}, fontStyle ${nd.getFontStyle(r).toString(2)}`);else{let n=this._legend.tokenTypes[e];const s=[];if(n){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)1&e&&s.push(this._legend.tokenModifiers[t]),e>>=1;e>0&&this._logService.getLevel()===kp.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),s.push("not-in-legend"));const o=this._themeService.getColorTheme().getTokenStyleMetadata(n,s,i.language);if(void 0===o)r=2147483647;else{if(r=0,void 0!==o.italic){r|=1|(o.italic?1:0)<<11}if(void 0!==o.bold){r|=2|(o.bold?2:0)<<11}if(void 0!==o.underline){r|=4|(o.underline?4:0)<<11}if(o.foreground){r|=8|o.foreground<<14}0===r&&(r=2147483647)}}else this._logService.getLevel()===kp.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),r=2147483647,n="not-in-legend";this._hashTable.add(e,t,i.id,r),this._logService.getLevel()===kp.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${n}) / ${t} (${s.join(" ")}): foreground ${nd.getForeground(r)}, fontStyle ${nd.getFontStyle(r).toString(2)}`)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}}class dO{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}}class fO{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=fO._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<fO._SIZES.length?2/3*this._currentLength:0),this._elements=[],fO._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const n=this._hashFunc(e,t,i);let r=this._elements[n];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===i)return r;r=r.next}return null}add(e,t,i,n){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){const e=this._elements;this._currentLengthIndex++,this._currentLength=fO._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<fO._SIZES.length?2/3*this._currentLength:0),this._elements=[],fO._nullOutEntries(this._elements,this._currentLength);for(const t of e){let e=t;for(;e;){const t=e.next;e.next=null,this._add(e),e=t}}}this._add(new dO(e,t,i,n))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}function pO(e){const t=new Uint32Array(function(e){let t=0;if(t+=2,"full"===e.type)t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}(e));let i=0;if(t[i++]=e.id,"full"===e.type)t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=2,t[i++]=e.deltas.length;for(const n of e.deltas)t[i++]=n.start,t[i++]=n.deleteCount,n.data?(t[i++]=n.data.length,t.set(n.data,i),i+=n.data.length):t[i++]=0}return function(e){const t=new Uint8Array(e.buffer,e.byteOffset,4*e.length);return ar()||function(e){for(let t=0,i=e.length;t<i;t+=4){const i=e[t+0],n=e[t+1],r=e[t+2],s=e[t+3];e[t+0]=s,e[t+1]=r,e[t+2]=n,e[t+3]=i}}(t),ph.wrap(t)}(t)}fO._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];var gO=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};function mO(e){return e&&!!e.data}function bO(e,t,i){const n=vO(e);return n?{provider:n,request:Promise.resolve(n.provideDocumentSemanticTokens(e,t,i))}:null}function vO(e){const t=Id.ordered(e);return t.length>0?t[0]:null}function yO(e){const t=Ad.ordered(e);return t.length>0?t[0]:null}Hh.registerCommand("_provideDocumentSemanticTokensLegend",((e,...t)=>gO(void 0,void 0,void 0,(function*(){const[i]=t;Ph(i instanceof uo);const n=e.get($u).getModel(i);if(!n)return;const r=vO(n);return r?r.getLegend():e.get(zh).executeCommand("_provideDocumentRangeSemanticTokensLegend",i)})))),Hh.registerCommand("_provideDocumentSemanticTokens",((e,...t)=>gO(void 0,void 0,void 0,(function*(){const[i]=t;Ph(i instanceof uo);const n=e.get($u).getModel(i);if(!n)return;const r=bO(n,null,ws.None);if(!r)return e.get(zh).executeCommand("_provideDocumentRangeSemanticTokens",i,n.getFullModelRange());const{provider:s,request:o}=r;let a;try{a=yield o}catch(e){return void Kr(e)}if(!a||!mO(a))return;const l=pO({id:0,type:"full",data:a.data});return a.resultId&&s.releaseDocumentSemanticTokens(a.resultId),l})))),Hh.registerCommand("_provideDocumentRangeSemanticTokensLegend",((e,...t)=>gO(void 0,void 0,void 0,(function*(){const[i]=t;Ph(i instanceof uo);const n=e.get($u).getModel(i);if(!n)return;const r=yO(n);return r?r.getLegend():void 0})))),Hh.registerCommand("_provideDocumentRangeSemanticTokens",((e,...t)=>gO(void 0,void 0,void 0,(function*(){const[i,n]=t;Ph(i instanceof uo),Ph(xo.isIRange(n));const r=e.get($u).getModel(i);if(!r)return;const s=yO(r);if(!s)return;let o;try{o=yield s.provideDocumentRangeSemanticTokens(r,xo.lift(n),ws.None)}catch(e){return void Kr(e)}return o&&mO(o)?pO({id:0,type:"full",data:o.data}):void 0}))));var _O=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},wO=function(e,t){return function(i,n){t(i,n,e)}};function SO(e){return e.toString()}function CO(e){const t=new Cu,i=e.createSnapshot();let n;for(;n=i.read();)t.update(n);return t.digest()}class xO{constructor(e,t,i){this._modelEventListeners=new os,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose((()=>t(e)))),this._modelEventListeners.add(e.onDidChangeLanguage((t=>i(e,t))))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange((()=>this.model.setMode(e.languageIdentifier))),this.model.setMode(e.languageIdentifier)}}const kO=Qn||Xn?1:2;class EO{constructor(e,t,i,n,r,s,o,a){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=r,this.sha1=s,this.versionId=o,this.alternativeVersionId=a}}let TO=class e extends as{constructor(e,t,i,n,r){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=i,this._logService=n,this._undoRedoService=r,this._onModelAdded=this._register(new ms),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new ms),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new ms),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new OO(this._themeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration((()=>this._updateModelOptions()))),this._updateModelOptions(),this._register(new MO(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){let i=Pr;if(e.editor&&void 0!==e.editor.tabSize){const t=parseInt(e.editor.tabSize,10);isNaN(t)||(i=t),i<1&&(i=1)}let n=i;if(e.editor&&void 0!==e.editor.indentSize&&"tabSize"!==e.editor.indentSize){const t=parseInt(e.editor.indentSize,10);isNaN(t)||(n=t),n<1&&(n=1)}let r=Br;e.editor&&void 0!==e.editor.insertSpaces&&(r="false"!==e.editor.insertSpaces&&Boolean(e.editor.insertSpaces));let s=kO;const o=e.eol;"\r\n"===o?s=2:"\n"===o&&(s=1);let a=Wr;e.editor&&void 0!==e.editor.trimAutoWhitespace&&(a="false"!==e.editor.trimAutoWhitespace&&Boolean(e.editor.trimAutoWhitespace));let l=Fr;e.editor&&void 0!==e.editor.detectIndentation&&(l="false"!==e.editor.detectIndentation&&Boolean(e.editor.detectIndentation));let c=Vr;return e.editor&&void 0!==e.editor.largeFileOptimizations&&(c="false"!==e.editor.largeFileOptimizations&&Boolean(e.editor.largeFileOptimizations)),{isForSimpleWidget:t,tabSize:i,indentSize:n,insertSpaces:r,detectIndentation:l,defaultEOL:s,trimAutoWhitespace:a,largeFileOptimizations:c}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&"auto"!==i?i:3===rr||2===rr?"\n":"\r\n"}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!=typeof e||e}getCreationOptions(t,i,n){let r=this._modelCreationOptionsByLanguageAndResource[t+i];if(!r){const s=this._configurationService.getValue("editor",{overrideIdentifier:t,resource:i}),o=this._getEOL(i,t);r=e._readModelOptions({editor:s,eol:o},n),this._modelCreationOptionsByLanguageAndResource[t+i]=r}return r}_updateModelOptions(){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let n=0,r=i.length;n<r;n++){const r=i[n],s=this._models[r],o=s.model.getLanguageIdentifier().language,a=s.model.uri,l=t[o+a],c=this.getCreationOptions(o,a,s.model.isForSimpleWidget);e._setModelOptionsForModel(s.model,c,l)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===t.defaultEOL?0:1),i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace||(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace}))}_insertDisposedModel(e){this._disposedModels.set(SO(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(SO(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(SO(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach((e=>{e.sharesUndoRedoStack||t.push(e)})),t.sort(((e,t)=>e.time-t.time));t.length>0&&this._disposedModelsHeapSize>e;){const e=t.shift();this._removeDisposedModel(e.uri),null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){const r=this.getCreationOptions(t.language,i,n),s=new Ew(e,r,t,i,this._undoRedoService);if(i&&this._disposedModels.has(SO(i))){const e=this._removeDisposedModel(i),t=this._undoRedoService.getElements(i),n=CO(s)===e.sha1;if(n||e.sharesUndoRedoStack){for(const e of t.past)Fy(e)&&e.matchesResource(i)&&e.setModel(s);for(const e of t.future)Fy(e)&&e.matchesResource(i)&&e.setModel(s);this._undoRedoService.setElementsValidFlag(i,!0,(e=>Fy(e)&&e.matchesResource(i))),n&&(s._overwriteVersionId(e.versionId),s._overwriteAlternativeVersionId(e.alternativeVersionId),s._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}const o=SO(s.uri);if(this._models[o])throw new Error("ModelService: Cannot add model because it already exists!");const a=new xO(s,(e=>this._onWillDispose(e)),((e,t)=>this._onDidChangeLanguage(e,t)));return this._models[o]=a,a}createModel(e,t,i,n=!1){let r;return t?(r=this._createModelData(e,t.languageIdentifier,i,n),this.setMode(r.model,t)):r=this._createModelData(e,iO,i,n),this._onModelAdded.fire(r.model),r.model}setMode(e,t){if(!t)return;const i=this._models[SO(e.uri)];i&&i.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(this._models[n].model)}return e}getModel(e){const t=SO(e),i=this._models[t];return i?i.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_onWillDispose(t){const i=SO(t.uri),n=this._models[i],r=this._undoRedoService.getUriComparisonKey(t.uri)!==t.uri.toString();let s=!1,o=0;if(r||this._shouldRestoreUndoStack()&&((a=t.uri).scheme===il.file||a.scheme===il.vscodeRemote||a.scheme===il.userData||"fake-fs"===a.scheme)){const e=this._undoRedoService.getElements(t.uri);if(e.past.length>0||e.future.length>0){for(const i of e.past)Fy(i)&&i.matchesResource(t.uri)&&(s=!0,o+=i.heapSize(t.uri),i.setModel(t.uri));for(const i of e.future)Fy(i)&&i.matchesResource(t.uri)&&(s=!0,o+=i.heapSize(t.uri),i.setModel(t.uri))}}var a;const l=e.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(s)if(!r&&o>l){const e=n.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}else this._ensureDisposedModelsHeapSize(l-o),this._undoRedoService.setElementsValidFlag(t.uri,!1,(e=>Fy(e)&&e.matchesResource(t.uri))),this._insertDisposedModel(new EO(t.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),r,o,CO(t),t.getVersionId(),t.getAlternativeVersionId()));else if(!r){const e=n.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}delete this._models[i],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[t.getLanguageIdentifier().language+t.uri],this._onModelRemoved.fire(t)}_onDidChangeLanguage(t,i){const n=i.oldLanguage,r=t.getLanguageIdentifier().language,s=this.getCreationOptions(n,t.uri,t.isForSimpleWidget),o=this.getCreationOptions(r,t.uri,t.isForSimpleWidget);e._setModelOptionsForModel(t,o,s),this._onModelModeChanged.fire({model:t,oldModeId:n})}};TO.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520,TO=_O([wO(0,_m),wO(1,fp),wO(2,av),wO(3,xp),wO(4,aO)],TO);const LO="editor.semanticHighlighting";function NO(e,t,i){var n;const r=null===(n=i.getValue(LO,{overrideIdentifier:e.getLanguageIdentifier().language,resource:e.uri}))||void 0===n?void 0:n.enabled;return"boolean"==typeof r?r:t.getColorTheme().semanticHighlighting}class MO extends as{constructor(e,t,i,n){super(),this._watchers=Object.create(null),this._semanticStyling=n;const r=e=>{this._watchers[e.uri.toString()]=new IO(e,t,this._semanticStyling)},s=(e,t)=>{t.dispose(),delete this._watchers[e.uri.toString()]},o=()=>{for(let n of e.getModels()){const e=this._watchers[n.uri.toString()];NO(n,t,i)?e||r(n):e&&s(n,e)}};this._register(e.onModelAdded((e=>{NO(e,t,i)&&r(e)}))),this._register(e.onModelRemoved((e=>{const t=this._watchers[e.uri.toString()];t&&s(e,t)}))),this._register(i.onDidChangeConfiguration((e=>{e.affectsConfiguration(LO)&&o()}))),this._register(t.onDidColorThemeChange(o))}}class OO extends as{constructor(e,t){super(),this._themeService=e,this._logService=t,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange((()=>{this._caches=new WeakMap})))}get(e){return this._caches.has(e)||this._caches.set(e,new uO(e.getLegend(),this._themeService,this._logService)),this._caches.get(e)}}class DO{constructor(e,t,i){this._provider=e,this.resultId=t,this.data=i}dispose(){this._provider.releaseDocumentSemanticTokens(this.resultId)}}class IO extends as{constructor(e,t,i){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=i,this._fetchDocumentSemanticTokens=this._register(new Qa((()=>this._fetchDocumentSemanticTokensNow()),IO.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent((()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()}))),this._register(this._model.onDidChangeLanguage((()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)})));const n=()=>{ns(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const t of Id.all(e))"function"==typeof t.onDidChange&&this._documentProvidersChangeListeners.push(t.onDidChange((()=>this._fetchDocumentSemanticTokens.schedule(0))))};n(),this._register(Id.onDidChange((()=>{n(),this._fetchDocumentSemanticTokens.schedule()}))),this._register(t.onDidColorThemeChange((e=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()}))),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;const e=new Cs,t=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=bO(this._model,t,e.token);if(!i)return void(this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1));const{provider:n,request:r}=i;this._currentDocumentRequestCancellationTokenSource=e;const s=[],o=this._model.onDidChangeContent((e=>{s.push(e)})),a=this._semanticStyling.get(n);r.then((e=>{this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),this._setDocumentSemanticTokens(n,e||null,a,s)}),(e=>{e&&(Zr(e)||"string"==typeof e.message&&-1!==e.message.indexOf("busy"))||Gr(e),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),s.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())}))}static _copy(e,t,i,n,r){for(let s=0;s<r;s++)i[n+s]=e[t+s]}_setDocumentSemanticTokens(e,t,i,n){const r=this._currentDocumentResponse,s=()=>{n.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed)e&&t&&e.releaseDocumentSemanticTokens(t.resultId);else if(e&&i){if(!t)return this._model.setSemanticTokens(null,!0),void s();if(function(e){return e&&Array.isArray(e.edits)}(t)){if(!r)return void this._model.setSemanticTokens(null,!0);if(0===t.edits.length)t={resultId:t.resultId,data:r.data};else{let e=0;for(const i of t.edits)e+=(i.data?i.data.length:0)-i.deleteCount;const i=r.data,n=new Uint32Array(i.length+e);let s=i.length,o=n.length;for(let e=t.edits.length-1;e>=0;e--){const r=t.edits[e],a=s-(r.start+r.deleteCount);a>0&&(IO._copy(i,s-a,n,o-a,a),o-=a),r.data&&(IO._copy(r.data,0,n,o-r.data.length,r.data.length),o-=r.data.length),s=r.start}s>0&&IO._copy(i,0,n,0,s),t={resultId:t.resultId,data:n}}}if(mO(t)){this._currentDocumentResponse=new DO(e,t.resultId,t.data);const r=function(e,t,i){const n=e.data,r=e.data.length/5|0,s=Math.max(Math.ceil(r/1024),400),o=[];let a=0,l=1,c=0;for(;a<r;){const e=a;let h=Math.min(e+s,r);if(h<r){let t=h;for(;t-1>e&&0===n[5*t];)t--;if(t-1===e){let e=h;for(;e+1<r&&0===n[5*e];)e++;h=e}else h=t}let u=new Uint32Array(4*(h-e)),d=0,f=0,p=0,g=0,m=0;for(;a<h;){const e=5*a,r=n[e],s=n[e+1],o=l+r,h=0===r?c+s:s,b=n[e+2],v=n[e+3],y=n[e+4],_=t.getMetadata(v,y,i);2147483647!==_&&(0===f&&(f=o),p===o&&m>h&&(t.warnOverlappingSemanticTokens(o,h+1),g<h?u[d-4+2]=h:d-=4),u[d]=o-f,u[d+1]=h,u[d+2]=h+b,u[d+3]=_,d+=4,p=o,g=h,m=h+b),l=o,c=h,a++}d!==u.length&&(u=u.subarray(0,d));const b=new Y_(f,new q_(u));o.push(b)}return o}(t,i,this._model.getLanguageIdentifier());if(n.length>0)for(const e of n)for(const t of r)for(const i of e.changes)t.applyEdit(i.range,i.text);this._model.setSemanticTokens(r,!0)}else this._model.setSemanticTokens(null,!0);s()}else this._model.setSemanticTokens(null,!1)}}IO.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class AO{constructor(e,t,i,n,r){this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=r}}const PO=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class RO{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(null===e)return 0;const t=e.match(PO);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=vw.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class BO{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(function(e){if(!e||!Array.isArray(e))return[];let t=[],i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n],s=-1;if("string"==typeof r.fontStyle){s=0;let e=r.fontStyle.split(" ");for(let t=0,i=e.length;t<i;t++)switch(e[t]){case"italic":s|=1;break;case"bold":s|=2;break;case"underline":s|=4}}let o=null;"string"==typeof r.foreground&&(o=r.foreground);let a=null;"string"==typeof r.background&&(a=r.background),t[i++]=new AO(r.token||"",n,s,o,a)}return t}(e),t)}static createFromParsedTokenTheme(e,t){return function(e,t){e.sort(((e,t)=>{let i=function(e,t){return e<t?-1:e>t?1:0}(e.token,t.token);return 0!==i?i:e.index-t.index}));let i=0,n="000000",r="ffffff";for(;e.length>=1&&""===e[0].token;){let t=e.shift();-1!==t.fontStyle&&(i=t.fontStyle),null!==t.foreground&&(n=t.foreground),null!==t.background&&(r=t.background)}let s=new RO;for(let e of t)s.getId(e);let o=s.getId(n),a=s.getId(r),l=new WO(i,o,a),c=new VO(l);for(let t=0,i=e.length;t<i;t++){let i=e[t];c.insert(i.token,i.fontStyle,s.getId(i.foreground),s.getId(i.background))}return new BO(s,c)}(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(void 0===i){let e=this._match(t),n=function(e){let t=e.match(FO);if(!t)return 0;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}(t);i=(e.metadata|n<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const FO=/\b(comment|string|regex|regexp)\b/;class WO{constructor(e,t,i){this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new WO(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){-1!==e&&(this._fontStyle=e),0!==t&&(this._foreground=t),0!==i&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class VO{constructor(e){this._mainRule=e,this._children=new Map}match(e){if(""===e)return this._mainRule;let t,i,n=e.indexOf(".");-1===n?(t=e,i=""):(t=e.substring(0,n),i=e.substring(n+1));let r=this._children.get(t);return void 0!==r?r.match(i):this._mainRule}insert(e,t,i,n){if(""===e)return void this._mainRule.acceptOverwrite(t,i,n);let r,s,o=e.indexOf(".");-1===o?(r=e,s=""):(r=e.substring(0,o),s=e.substring(o+1));let a=this._children.get(r);void 0===a&&(a=new VO(this._mainRule.clone()),this._children.set(r,a)),a.insert(s,t,i,n)}}const zO={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[fC]:"#FFFFFE",[pC]:"#000000",[NC]:"#E5EBF1",[Hx]:"#D3D3D3",[jx]:"#939393",[MC]:"#ADD6FF4D",[ex]:"#9DDDFF"}},HO={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[fC]:"#1E1E1E",[pC]:"#D4D4D4",[NC]:"#3A3D41",[Hx]:"#404040",[jx]:"#707070",[MC]:"#ADD6FF26"}},jO={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[fC]:"#000000",[pC]:"#FFFFFF",[Hx]:"#FFFFFF",[jx]:"#FFFFFF"}};function UO(){const e=new ms,t=MN;return t.onDidChange((()=>e.fire())),{onDidChange:e.event,getCSS(){const e={},i=i=>{let n=i.defaults;for(;cv.isThemeIcon(n);){const e=t.getIcon(n.id);if(!e)return;n=e.defaults}const r=n.fontId;if(r){const s=t.getIconFont(r);if(s)return e[r]=s,`.codicon-${i.id}:before { content: '${n.fontCharacter}'; font-family: ${sc(r)}; }`}return`.codicon-${i.id}:before { content: '${n.fontCharacter}'; }`},n=[];for(let e of t.getIcons()){const t=i(e);t&&n.push(t)}for(let t in e){const i=e[t].definition.src.map((e=>`${rc(e.location)} format('${e.format}')`)).join(", ");n.push(`@font-face { src: ${i}; font-family: ${sc(t)}; }`)}return n.join("\n")}}}const GO="vs",KO="vs-dark",$O="hc-black",qO=zg.as(xS),ZO=zg.as(dv);class YO{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let i=t.base;e.length>0?(XO(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,vw.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=QO(this.themeData.base);for(let i in t.colors)e.has(i)||e.set(i,vw.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);return i||(!1!==t?this.getDefault(e):void 0)}getDefault(e){let t=this.defaultColors[e];return t||(t=qO.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case GO:return ov.LIGHT;case $O:return ov.HIGH_CONTRAST;default:return ov.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let i=QO(this.themeData.base);e=i.rules,i.encodedTokensColors&&(t=i.encodedTokensColors)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=BO.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const n=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=nd.getForeground(n),s=nd.getFontStyle(n);return{foreground:r,italic:Boolean(1&s),bold:Boolean(2&s),underline:Boolean(4&s)}}}function XO(e){return e===GO||e===KO||e===$O}function QO(e){switch(e){case GO:return zO;case KO:return HO;case $O:return jO}}function JO(e){let t=QO(e);return new YO(e,t)}class eD extends as{constructor(){super(),this._onColorThemeChange=this._register(new ms),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(GO,JO(GO)),this._knownThemes.set(KO,JO(KO)),this._knownThemes.set($O,JO($O));const e=UO();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(GO),e.onDidChange((()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),function(e,t){const i=window.matchMedia(e);"function"==typeof i.addEventListener?i.addEventListener("change",t):i.addListener(t)}("(forced-colors: active)",(()=>{this._updateActualTheme()}))}registerEditorContainer(e){return Al(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Bl(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),as.None}_registerShadowDomContainer(e){const t=Bl(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let e=0;e<this._styleElements.length;e++)if(this._styleElements[e]===t)return void this._styleElements.splice(e,1)}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!XO(t.base)&&!XO(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new YO(e,t)),XO(e)&&this._knownThemes.forEach((t=>{t.base===e&&t.notifyBaseUpdated()})),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;t=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get(GO),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get($O):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},i={addRule:i=>{t[i]||(e.push(i),t[i]=!0)}};ZO.getThemingParticipants().forEach((e=>e(this._theme,i,this._environment)));const n=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(function(e){let t=[];for(let i=1,n=e.length;i<n;i++){let n=e[i];t[i]=`.mtk${i} { color: ${n}; }`}return t.push(".mtki { font-style: italic; }"),t.push(".mtkb { font-weight: bold; }"),t.push(".mtku { text-decoration: underline; text-underline-position: under; }"),t.join("\n")}(n)),this._themeCSS=e.join("\n"),this._updateCSS(),Pd.setColorMap(n),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._styleElements.forEach((e=>e.textContent=this._allCSS))}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var tD=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},iD=function(e,t){return function(i,n){t(i,n,e)}};const nD="data-keybinding-context";class rD{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){const t=this._value[e];return void 0===t&&this._parent?this._parent.getValue(e):t}}class sD extends rD{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}sD.INSTANCE=new sD;class oD extends rD{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=ah.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration((e=>{if(6===e.source){const e=Array.from(Qr.map(this._values,(([e])=>e)));this._values.clear(),i.fire(new cD(e))}else{const t=[];for(const i of e.affectedKeys){const e=`config.${i}`,n=this._values.findSuperstr(e);void 0!==n&&(t.push(...Qr.map(n,(([e])=>e))),this._values.deleteSuperstr(e)),this._values.has(e)&&(t.push(e),this._values.delete(e))}i.fire(new cD(t))}}))}dispose(){this._listener.dispose()}getValue(e){if(0!==e.indexOf(oD._keyPrefix))return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(oD._keyPrefix.length),i=this._configurationService.getValue(t);let n;switch(typeof i){case"number":case"boolean":case"string":n=i;break;default:n=Array.isArray(i)?JSON.stringify(i):i}return this._values.set(e,n),n}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}oD._keyPrefix="config.";class aD{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){void 0===this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class lD{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class cD{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class hD{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class uD{constructor(e){this._onDidChangeContext=new bs({merge:e=>new hD(e)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new aD(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new fD(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return Mm.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new lD(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new lD(e))}getContext(e){return this._isDisposed?sD.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute(nD)){const t=e.getAttribute(nD);return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}}let dD=class extends uD{constructor(e){super(0),this._contexts=new Map,this._toDispose=new os,this._lastContextId=0;const t=new oD(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?sD.INSTANCE:this._contexts.get(e)||sD.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new rD(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};dD=tD([iD(0,_m)],dD);class fD extends uD{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new ls,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(nD)){let e="";this._domNode.classList&&(e=Array.from(this._domNode.classList.values()).join(", ")),console.error("Element already has context attribute"+(e?": "+e:""))}this._domNode.setAttribute(nD,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(nD),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?sD.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}var pD,gD;function mD(e,t,i){const n=i.mode===gD.ALIGN?i.offset:i.offset+i.size,r=i.mode===gD.ALIGN?i.offset+i.size:i.offset;return 0===i.position?t<=e-n?n:t<=r?r-t:Math.max(e-t,0):t<=r?r-t:t<=e-n?n:0}Hh.registerCommand("setContext",(function(e,t,i){e.get(nv).createKey(String(t),i)})),Hh.registerCommand({id:"getContextKeyInfo",handler:()=>[...iv.all()].sort(((e,t)=>e.key.localeCompare(t.key))),description:{description:On(0,"A command that returns information about context keys"),args:[]}}),Hh.registerCommand("_generateContextKeyInfo",(function(){const e=[],t=new Set;for(let i of iv.all())t.has(i.key)||(t.add(i.key),e.push(i));e.sort(((e,t)=>e.key.localeCompare(t.key))),console.log(JSON.stringify(e,void 0,2))})),function(e){function t(e,t){if(e.start>=t.end||t.start>=e.end)return{start:0,end:0};const i=Math.max(e.start,t.start),n=Math.min(e.end,t.end);return n-i<=0?{start:0,end:0}:{start:i,end:n}}function i(e){return e.end-e.start<=0}e.intersect=t,e.isEmpty=i,e.intersects=function(e,n){return!i(t(e,n))},e.relativeComplement=function(e,t){const n=[],r={start:e.start,end:Math.min(t.start,e.end)},s={start:Math.max(t.end,e.start),end:e.end};return i(r)||n.push(r),i(s)||n.push(s),n}}(pD||(pD={})),function(e){e[e.AVOID=0]="AVOID",e[e.ALIGN=1]="ALIGN"}(gD||(gD={}));class bD extends as{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=as.None,this.toDisposeOnSetContainer=as.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Ql(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,ec(this.view),this.setContainer(e,t),this._register(ss((()=>this.setContainer(null,1))))}setContainer(e,t){var i;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,null===(i=this.shadowRootHostElement)||void 0===i||i.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=1!==t,this.useShadowDOM=3===t,this.useShadowDOM){this.shadowRootHostElement=Ql(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent=vD,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Ql("slot"))}else this.container.appendChild(this.view);const i=new os;bD.BUBBLE_UP_EVENTS.forEach((e=>{i.add(ul(this.container,e,(e=>{this.onDOMEvent(e,!1)})))})),bD.BUBBLE_DOWN_EVENTS.forEach((e=>{i.add(ul(this.container,e,(e=>{this.onDOMEvent(e,!0)}),!0))})),this.toDisposeOnSetContainer=i}}show(e){this.isVisible()&&this.hide(),ol(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Jl(this.view),this.toDisposeOnClean=e.render(this.view)||as.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){this.isVisible()&&(!1!==this.delegate.canRelayout||tr&&sl?(this.delegate.layout&&this.delegate.layout(),this.doLayout()):this.hide())}doLayout(){if(!this.isVisible())return;let e,t=this.delegate.getAnchor();if(Hl(t)){let i=xl(t);e={top:i.top,left:i.left,width:i.width,height:i.height}}else e={top:t.y,left:t.x,width:t.width||1,height:t.height||2};const i=El(this.view),n=Nl(this.view),r=this.delegate.anchorPosition||0,s=this.delegate.anchorAlignment||0;let o,a;if(0===(this.delegate.anchorAxisAlignment||0)){const t={offset:e.top-window.pageYOffset,size:e.height,position:0===r?0:1},l={offset:e.left,size:e.width,position:0===s?0:1,mode:gD.ALIGN};o=mD(window.innerHeight,n,t)+window.pageYOffset,pD.intersects({start:o,end:o+n},{start:t.offset,end:t.offset+t.size})&&(l.mode=gD.AVOID),a=mD(window.innerWidth,i,l)}else{const t={offset:e.left,size:e.width,position:0===s?0:1},l={offset:e.top,size:e.height,position:0===r?0:1,mode:gD.ALIGN};a=mD(window.innerWidth,i,t),pD.intersects({start:a,end:a+i},{start:t.offset,end:t.offset+t.size})&&(l.mode=gD.AVOID),o=mD(window.innerHeight,n,l)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(0===r?"bottom":"top"),this.view.classList.add(0===s?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const l=xl(this.container);this.view.style.top=o-(this.useFixedPosition?xl(this.view).top:l.top)+"px",this.view.style.left=a-(this.useFixedPosition?xl(this.view).left:l.left)+"px",this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,(null==t?void 0:t.onHide)&&t.onHide(e),this.toDisposeOnClean.dispose(),ec(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Ml(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}bD.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],bD.BUBBLE_DOWN_EVENTS=["click"];let vD='\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t@font-face {\n\t\tfont-family: "codicon";\n\t\tsrc: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");\n\t}\n\n\t.codicon[class*=\'codicon-\'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n';function yD(e){let t=e.definition;for(;t instanceof ed;)t=t.definition;return`.codicon-${e.id}:before { content: '${t.fontCharacter}'; }`}function _D(...e){return function(t,i){for(let n=0,r=e.length;n<r;n++){const r=e[n](t,i);if(r)return r}return null}}const wD=function(e,t,i){if(!i||i.length<t.length)return null;let n;n=e?Tc(i,t):0===i.indexOf(t);if(!n)return null;return t.length>0?[{start:0,end:t.length}]:[]}.bind(void 0,!0);function SD(e,t,i,n){if(i===e.length)return[];if(n===t.length)return null;if(e[i]===t[n]){let r=null;return(r=SD(e,t,i+1,n+1))?ND({start:n,end:n+1},r):null}return SD(e,t,i,n+1)}function CD(e){return 97<=e&&e<=122}function xD(e){return 65<=e&&e<=90}function kD(e){return 48<=e&&e<=57}function ED(e){return 32===e||9===e||10===e||13===e}const TD=new Set;function LD(e){return CD(e)||xD(e)||kD(e)}function ND(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function MD(e,t){for(let i=t;i<e.length;i++){const t=e.charCodeAt(i);if(xD(t)||kD(t)||i>0&&!LD(e.charCodeAt(i-1)))return i}return e.length}function OD(e,t,i,n){if(i===e.length)return[];if(n===t.length)return null;if(e[i]!==t[n].toLowerCase())return null;{let r=null,s=n+1;for(r=OD(e,t,i+1,n+1);!r&&(s=MD(t,s))<t.length;)r=OD(e,t,i+1,s),s++;return null===r?null:ND({start:n,end:n+1},r)}}function DD(e,t){if(!t)return null;if(0===(t=t.trim()).length)return null;if(!function(e){let t=0,i=0,n=0,r=0;for(let s=0;s<e.length;s++)n=e.charCodeAt(s),xD(n)&&t++,CD(n)&&i++,ED(n)&&r++;return 0!==t&&0!==i||0!==r?t<=5:e.length<=30}(e))return null;if(t.length>60)return null;const i=function(e){let t=0,i=0,n=0,r=0,s=0;for(let o=0;o<e.length;o++)s=e.charCodeAt(o),xD(s)&&t++,CD(s)&&i++,LD(s)&&n++,kD(s)&&r++;return{upperPercent:t/e.length,lowerPercent:i/e.length,alphaPercent:n/e.length,numericPercent:r/e.length}}(t);if(!function(e){const{upperPercent:t,lowerPercent:i,alphaPercent:n,numericPercent:r}=e;return i>.2&&t<.8&&n>.6&&r<.2}(i)){if(!function(e){const{upperPercent:t,lowerPercent:i}=e;return 0===i&&t>.6}(i))return null;t=t.toLowerCase()}let n=null,r=0;for(e=e.toLowerCase();r<t.length&&null===(n=OD(e,t,0,r));)r=MD(t,r+1);return n}"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?".split("").forEach((e=>TD.add(e.charCodeAt(0))));const ID=_D(wD,DD,(function(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return-1===i?null:[{start:i,end:i+e.length}]})),AD=_D(wD,DD,(function(e,t){return SD(e.toLowerCase(),t.toLowerCase(),0,0)})),PD=new hh(1e4);function RD(e,t,i=!1){if("string"!=typeof e||"string"!=typeof t)return null;let n=PD.get(e);n||(n=new RegExp(e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*"),"i"),PD.set(e,n));const r=n.exec(t);return r?[{start:r.index,end:r.index+r[0].length}]:i?AD(e,t):ID(e,t)}const BD=128;function FD(){const e=[],t=[];for(let e=0;e<=BD;e++)t[e]=0;for(let i=0;i<=BD;i++)e.push(t.slice(0));return e}function WD(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}const VD=WD(256),zD=WD(256),HD=FD(),jD=FD(),UD=FD();function GD(e,t){if(t<0||t>=e.length)return!1;const i=e.codePointAt(t);switch(i){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!Uc(i)}}function KD(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case 32:case 9:return!0;default:return!1}}function $D(e,t,i){return t[e]!==i[e]}var qD;function ZD(e,t,i,n,r,s,o){const a=e.length>BD?BD:e.length,l=n.length>BD?BD:n.length;if(i>=a||s>=l||a-i>l-s)return;if(!function(e,t,i,n,r,s,o=!1){for(;t<i&&r<s;)e[t]===n[r]&&(o&&(VD[t]=r),t+=1),r+=1;return t===i}(t,i,a,r,s,l,!0))return;!function(e,t,i,n,r,s){let o=e-1,a=t-1;for(;o>=i&&a>=n;)r[o]===s[a]&&(zD[o]=a,o--),a--}(a,l,i,s,t,r);let c=1,h=1,u=i,d=s;const f=[!1];for(c=1,u=i;u<a;c++,u++){const o=VD[u],p=zD[u],g=u+1<a?zD[u+1]:l;for(h=o-s+1,d=o;d<g;h++,d++){let a=Number.MIN_SAFE_INTEGER,g=!1;d<=p&&(a=YD(e,t,u,i,n,r,d,l,s,0===HD[c-1][h-1],f));let m=0;a!==Number.MAX_SAFE_INTEGER&&(g=!0,m=a+jD[c-1][h-1]);const b=d>o,v=b?jD[c][h-1]+(HD[c][h-1]>0?-5:0):0,y=d>o+1&&HD[c][h-1]>0,_=y?jD[c][h-2]+(HD[c][h-2]>0?-5:0):0;if(y&&(!b||_>=v)&&(!g||_>=m))jD[c][h]=_,UD[c][h]=3,HD[c][h]=0;else if(b&&(!g||v>=m))jD[c][h]=v,UD[c][h]=2,HD[c][h]=0;else{if(!g)throw new Error("not possible");jD[c][h]=m,UD[c][h]=1,HD[c][h]=HD[c-1][h-1]+1}}}if(!f[0]&&!o)return;c--,h--;const p=[jD[c][h],s];let g=0,m=0;for(;c>=1;){let e=h;do{const t=UD[c][e];if(3===t)e-=2;else{if(2!==t)break;e-=1}}while(e>=1);g>1&&t[i+c-1]===r[s+h-1]&&!$D(e+s-1,n,r)&&g+1>HD[c][e]&&(e=h),e===h?g++:g=1,m||(m=e),c--,h=e-1,p.push(h)}l===a&&(p[0]+=2);const b=m-a;return p[0]-=b,p}function YD(e,t,i,n,r,s,o,a,l,c,h){if(t[i]!==s[o])return Number.MIN_SAFE_INTEGER;let u=1,d=!1;return o===i-n?u=e[i]===r[o]?7:5:!$D(o,r,s)||0!==o&&$D(o-1,r,s)?!GD(s,o)||0!==o&&GD(s,o-1)?(GD(s,o-1)||KD(s,o-1))&&(u=5,d=!0):u=5:(u=e[i]===r[o]?7:5,d=!0),u>1&&i===n&&(h[0]=!0),d||(d=$D(o,r,s)||GD(s,o-1)||KD(s,o-1)),i===n?o>l&&(u-=d?3:5):u+=c?d?2:0:d?0:1,o+1===a&&(u-=d?3:5),u}!function(e){e.Default=[-100,0],e.isDefault=function(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}}(qD||(qD={}));const XD="$(",QD=new RegExp(`\\$\\(${td.iconNameExpression}(?:${td.iconModifierExpression})?\\)`,"g");new RegExp(`(\\\\)?${QD.source}`,"g");new RegExp(`\\\\${QD.source}`,"g");const JD=new RegExp(`(\\s)?(\\\\)?${QD.source}(\\s)?`,"g");function eI(e){const t=e.indexOf(XD);return-1===t?{text:e}:function(e,t){const i=[];let n="";function r(e){if(e){n+=e;for(const t of e)i.push(c)}}let s,o,a=-1,l="",c=0,h=t;const u=e.length;r(e.substr(0,t));for(;h<u;){if(s=e[h],o=e[h+1],s===XD[0]&&o===XD[1])a=h,r(l),l=XD,h++;else if(")"===s&&-1!==a){c+=h-a+1,a=-1,l=""}else-1!==a?/^[a-z0-9\-]$/i.test(s)?l+=s:(r(l),a=-1,l=""):r(s);h++}return r(l),{text:n,iconOffsets:i}}(e,t)}function tI(e,t,i=!1){const{text:n,iconOffsets:r}=t;if(!r||0===r.length)return RD(e,n,i);const s=hc(n," "),o=n.length-s.length,a=RD(e,s,i);if(a)for(const e of a){const t=r[e.start+o]+o;e.start+=t,e.end+=t}return a}const iI=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,nI=/(&amp;)?(&amp;)([^\s&])/g,rI=Ju("menu-selection",ed.check),sI=Ju("menu-submenu",ed.chevronRight);var oI;!function(e){e[e.Right=0]="Right",e[e.Left=1]="Left"}(oI||(oI={}));class aI extends NN{constructor(e,t,i={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const n=document.createElement("div");n.classList.add("monaco-menu"),n.setAttribute("role","presentation"),super(n,{orientation:1,actionViewItemProvider:e=>this.doGetActionViewItem(e,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Xn||Qn?[10]:[]],keyDown:!0}}),this.menuElement=n,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new os),this.initializeStyleSheet(e),cl(n,jl.KEY_DOWN,(e=>{new Ra(e).equals(2)&&e.preventDefault()})),i.enableMnemonics&&this.menuDisposables.add(cl(n,jl.KEY_DOWN,(e=>{const t=e.key.toLocaleLowerCase();if(this.mnemonics.has(t)){Ul(e,!0);const i=this.mnemonics.get(t);if(1===i.length&&(i[0]instanceof cI&&i[0].container&&this.focusItemByElement(i[0].container),i[0].onClick(e)),i.length>1){const e=i.shift();e&&e.container&&(this.focusItemByElement(e.container),i.push(e)),this.mnemonics.set(t,i)}}}))),Qn&&this._register(cl(n,jl.KEY_DOWN,(e=>{const t=new Ra(e);t.equals(14)||t.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Ul(e,!0)):(t.equals(13)||t.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Ul(e,!0))}))),this._register(cl(this.domNode,jl.MOUSE_OUT,(e=>{Ml(e.relatedTarget,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())}))),this._register(cl(this.actionsList,jl.MOUSE_OVER,(e=>{let t=e.target;if(t&&Ml(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}})));let r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new NE(n,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const s=this.scrollableElement.getDomNode();s.style.position="",this._register(cl(s,jl.MOUSE_UP,(e=>{e.preventDefault()}))),n.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((e=>{var t;return!(null===(t=i.submenuIds)||void 0===t?void 0:t.has(e.id))||(console.warn(`Found submenu cycle: ${e.id}`),!1)})),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((e=>!(e instanceof hI))).forEach(((e,t,i)=>{e.updatePositionInSet(t+1,i.length)}))}initializeStyleSheet(e){Al(e)?(this.styleSheet=Bl(e),this.styleSheet.textContent=uI):(aI.globalStyleSheet||(aI.globalStyleSheet=Bl(),aI.globalStyleSheet.textContent=uI),this.styleSheet=aI.globalStyleSheet)}style(e){const t=this.getContainer(),i=e.foregroundColor?`${e.foregroundColor}`:"",n=e.backgroundColor?`${e.backgroundColor}`:"",r=e.borderColor?`1px solid ${e.borderColor}`:"",s=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=r,this.domNode.style.color=i,this.domNode.style.backgroundColor=n,t.style.boxShadow=s,this.viewItems&&this.viewItems.forEach((t=>{(t instanceof lI||t instanceof hI)&&t.style(e)}))}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){if(e===this.actionsList.children[t]){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0),void 0!==this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Db)return new hI(t.context,e,{icon:!0});if(e instanceof Ib){const n=new cI(e,e.actions,i,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const e=n.getMnemonic();if(e&&n.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(n),this.mnemonics.set(e,t)}}return n}{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const n=t.getKeyBinding(e);if(n){const e=n.getLabel();e&&(i.keybinding=e)}}const n=new lI(t.context,e,i);if(t.enableMnemonics){const e=n.getMnemonic();if(e&&n.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(n),this.mnemonics.set(e,t)}}return n}}}class lI extends EN{constructor(e,t,i={}){if(i.isMenu=!0,super(t,t,i),this.options=i,this.options.icon=void 0!==i.icon&&i.icon,this.options.label=void 0===i.label||i.label,this.cssClass="",this.options.label&&i.enableMnemonics){let e=this.getAction().label;if(e){let t=iI.exec(e);t&&(this.mnemonic=(t[1]?t[1]:t[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Qa((()=>{this.element&&(this._register(cl(this.element,jl.MOUSE_UP,(e=>{if(Ul(e,!0),Sa){if(new za(e).rightButton)return;this.onClick(e)}else setTimeout((()=>{this.onClick(e)}),0)}))),this._register(cl(this.element,jl.CONTEXT_MENU,(e=>{Ul(e,!0)}))))}),100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=$l(this.element,Ql("a.action-menu-item")),this._action.id===Db.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=$l(this.item,Ql("span.menu-item-check"+rI.cssSelector)),this.check.setAttribute("role","none"),this.label=$l(this.item,Ql("span.action-label")),this.options.label&&this.options.keybinding&&($l(this.item,Ql("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){ol(this.label);let t=-1===(e=this.getAction().label).indexOf(XD)?e:e.replace(JD,((e,t,i,n)=>i?e:t||n||""));if(t){const e=function(e){const t=iI,i=t.exec(e);if(!i)return e;const n=!i[1];return e.replace(t,n?"$2$3":"").trim()}(t);this.options.enableMnemonics||(t=e),this.label.setAttribute("aria-label",e.replace(/&&/g,"&"));const i=iI.exec(t);if(i){t=function(e){return e.replace(/[<>&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}))}(t),nI.lastIndex=0;let e=nI.exec(t);for(;e&&e[1];)e=nI.exec(t);const n=e=>e.replace(/&amp;&amp;/g,"&amp;");e?this.label.append(hc(n(t.substr(0,e.index))," "),Ql("u",{"aria-hidden":"true"},e[3]),uc(n(t.substr(e.index+e[0].length))," ")):this.label.innerText=n(t).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=On(0,"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){this.item&&(this.getAction().checked?(this.item.classList.add("checked"),this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked","true")):(this.item.classList.remove("checked"),this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked","false")))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=i?i.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=n)}style(e){this.menuStyle=e,this.applyStyle()}}class cI extends lI{constructor(e,t,i,n){super(e,e,n),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new os),this.mouseOver=!1,this.expandDirection=n&&void 0!==n.expandDirection?n.expandDirection:oI.Right,this.showScheduler=new Qa((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new Qa((()=>{this.element&&!Ml(Rl(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=$l(this.item,Ql("span.submenu-indicator"+sI.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(cl(this.element,jl.KEY_UP,(e=>{let t=new Ra(e);(t.equals(17)||t.equals(3))&&(Ul(e,!0),this.createSubmenu(!0))}))),this._register(cl(this.element,jl.KEY_DOWN,(e=>{let t=new Ra(e);Rl()===this.item&&(t.equals(17)||t.equals(3))&&Ul(e,!0)}))),this._register(cl(this.element,jl.MOUSE_OVER,(e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register(cl(this.element,jl.MOUSE_LEAVE,(e=>{this.mouseOver=!1}))),this._register(cl(this.element,jl.FOCUS_OUT,(e=>{this.element&&!Ml(Rl(),this.element)&&this.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)}))))}updateEnabled(){}onClick(e){Ul(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(e){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){const r={top:0,left:0};return r.left=mD(e.width,t.width,{position:n===oI.Right?0:1,offset:i.left,size:i.width}),r.left>=i.left&&r.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(r.left=i.left+10),i.top+=10,i.height=0),r.top=mD(e.height,t.height,{position:0,offset:i.top,size:0}),r.top+t.height===i.top&&r.top+i.height+t.height<=e.height&&(r.top+=i.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=$l(this.element,Ql("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new aI(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new Ab],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const n=this.element.getBoundingClientRect(),r={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},s=this.submenuContainer.getBoundingClientRect(),{top:o,left:a}=this.calculateSubmenuMenuLayout(new Cl(window.innerWidth,window.innerHeight),Cl.lift(s),r,this.expandDirection);this.submenuContainer.style.left=`${a}px`,this.submenuContainer.style.top=`${o}px`,this.submenuDisposables.add(cl(this.submenuContainer,jl.KEY_UP,(e=>{new Ra(e).equals(15)&&(Ul(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add(cl(this.submenuContainer,jl.KEY_DOWN,(e=>{new Ra(e).equals(15)&&Ul(e,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&(null===(t=this.item)||void 0===t||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=e?`${e}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class hI extends TN{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}let uI=`\n.monaco-menu {\n\tfont-size: 13px;\n\n}\n\n${yD(rI)}\n${yD(sI)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 =  */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\topacity: 0.4;\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid #bbb;\n\tpadding-top: 1px;\n\tmargin-left: .8em;\n\tmargin-right: .8em;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tpadding: 0.5em 0 0 0;\n\tmargin-bottom: 0.5em;\n\twidth: 100%;\n\theight: 0px !important;\n\tmargin-left: .8em !important;\n\tmargin-right: .8em !important;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tborder: thin solid transparent; /* prevents jumping behaviour on hover or focus */\n}\n\n\n/* High Contrast Theming */\n:host-context(.hc-black) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: .5em 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 1.8em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tpadding: 0.2em 0 0 0;\n\tmargin-bottom: 0.2em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}\n\n/* Arrows */\n.monaco-scrollable-element > .scrollbar > .scra {\n\tcursor: pointer;\n\tfont-size: 11px !important;\n}\n\n.monaco-scrollable-element > .visible {\n\topacity: 1;\n\n\t/* Background rule added for IE9 - to allow clicks on dom node */\n\tbackground:rgba(0,0,0,0);\n\n\ttransition: opacity 100ms linear;\n}\n.monaco-scrollable-element > .invisible {\n\topacity: 0;\n\tpointer-events: none;\n}\n.monaco-scrollable-element > .invisible.fade {\n\ttransition: opacity 800ms linear;\n}\n\n/* Scrollable Content Inset Shadow */\n.monaco-scrollable-element > .shadow {\n\tposition: absolute;\n\tdisplay: none;\n}\n.monaco-scrollable-element > .shadow.top {\n\tdisplay: block;\n\ttop: 0;\n\tleft: 3px;\n\theight: 3px;\n\twidth: 100%;\n\tbox-shadow: #DDD 0 6px 6px -6px inset;\n}\n.monaco-scrollable-element > .shadow.left {\n\tdisplay: block;\n\ttop: 3px;\n\tleft: 0;\n\theight: 100%;\n\twidth: 3px;\n\tbox-shadow: #DDD 6px 0 6px -6px inset;\n}\n.monaco-scrollable-element > .shadow.top-left-corner {\n\tdisplay: block;\n\ttop: 0;\n\tleft: 0;\n\theight: 3px;\n\twidth: 3px;\n}\n.monaco-scrollable-element > .shadow.top.left {\n\tbox-shadow: #DDD 6px 6px 6px -6px inset;\n}\n\n/* ---------- Default Style ---------- */\n\n:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {\n\tbackground: rgba(100, 100, 100, .4);\n}\n:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {\n\tbackground: rgba(121, 121, 121, .4);\n}\n:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {\n\tbackground: rgba(111, 195, 223, .6);\n}\n\n.monaco-scrollable-element > .scrollbar > .slider:hover {\n\tbackground: rgba(100, 100, 100, .7);\n}\n:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {\n\tbackground: rgba(111, 195, 223, .8);\n}\n\n.monaco-scrollable-element > .scrollbar > .slider.active {\n\tbackground: rgba(0, 0, 0, .6);\n}\n:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {\n\tbackground: rgba(191, 191, 191, .4);\n}\n:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {\n\tbackground: rgba(111, 195, 223, 1);\n}\n\n:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {\n\tbox-shadow: none;\n}\n\n:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {\n\tbox-shadow: #000 6px 0 6px -6px inset;\n}\n\n:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {\n\tbox-shadow: #000 6px 6px 6px -6px inset;\n}\n\n:host-context(.hc-black) .monaco-scrollable-element .shadow.top {\n\tbox-shadow: none;\n}\n\n:host-context(.hc-black) .monaco-scrollable-element .shadow.left {\n\tbox-shadow: none;\n}\n\n:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {\n\tbox-shadow: none;\n}\n`;function dI(e,t){const i=Object.create(null);for(let n in t){const r=t[n];r&&(i[n]=Nx(r,e))}return i}function fI(e,t,i){function n(){const n=dI(e.getColorTheme(),t);"function"==typeof i?i(n):i.style(n)}return n(),e.onDidColorThemeChange(n)}function pI(e,t,i){return fI(t,Object.assign(Object.assign({},gI),i||{}),e)}const gI={listFocusBackground:zC,listFocusForeground:HC,listFocusOutline:jC,listActiveSelectionBackground:UC,listActiveSelectionForeground:GC,listFocusAndSelectionBackground:UC,listFocusAndSelectionForeground:GC,listInactiveSelectionBackground:KC,listInactiveSelectionForeground:$C,listInactiveFocusBackground:qC,listInactiveFocusOutline:ZC,listHoverBackground:YC,listHoverForeground:XC,listDropBackground:QC,listSelectionOutline:MS,listHoverOutline:MS,listFilterWidgetBackground:tx,listFilterWidgetOutline:ix,listFilterWidgetNoMatchesOutline:nx,listMatchesShadow:OS,treeIndentGuidesStroke:rx,tableColumnsBorder:sx},mI={shadowColor:OS,borderColor:cx,foregroundColor:hx,backgroundColor:ux,selectionForegroundColor:dx,selectionBackgroundColor:fx,selectionBorderColor:px,separatorColor:gx};class bI{constructor(e,t,i,n,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.themeService=r,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;let i;this.focusToReturn=document.activeElement;let n=Hl(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:n=>{let r=e.getMenuClassName?e.getMenuClassName():"";r&&(n.className+=" "+r),this.options.blockMouse&&(this.block=n.appendChild(Ql(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",Na(this.block,jl.MOUSE_DOWN)((e=>e.stopPropagation())));const s=new os,o=e.actionRunner||new Ob;return o.onBeforeRun(this.onActionRun,this,s),o.onDidRun(this.onDidActionRun,this,s),i=new aI(n,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:o,getKeyBinding:e.getKeyBinding?e.getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)}),s.add(function(e,t,i){return fI(t,Object.assign(Object.assign({},mI),i),e)}(i,this.themeService)),i.onDidCancel((()=>this.contextViewService.hideContextView(!0)),null,s),i.onDidBlur((()=>this.contextViewService.hideContextView(!0)),null,s),Na(window,jl.BLUR)((()=>{this.contextViewService.hideContextView(!0)}),null,s),Na(window,jl.MOUSE_DOWN)((e=>{if(e.defaultPrevented)return;let t=new za(e),i=t.target;if(!t.rightButton){for(;i;){if(i===n)return;i=i.parentElement}this.contextViewService.hideContextView(!0)}}),null,s),rs(s,i)},focus:()=>{i&&i.focus(!!e.autoSelectFirstItem)},onHide:t=>{e.onHide&&e.onHide(!!t),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},n,!!n)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!Zr(e.error)&&this.notificationService.error(e.error)}}var vI=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},yI=function(e,t){return function(i,n){t(i,n,e)}};let _I=class extends as{constructor(e,t,i,n,r){super(),this.contextMenuHandler=new bI(i,e,t,n,r)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(e),oc.getInstance().resetKeyStatus()}};_I=vI([yI(0,xv),yI(1,jm),yI(2,UN),yI(3,_M),yI(4,av)],_I);const wI=ga("layoutService");var SI=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},CI=function(e,t){return function(i,n){t(i,n,e)}};let xI=class extends as{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=as.None,this.container=e.container,this.contextView=this._register(new bD(this.container,1)),this.layout(),this._register(e.onDidLayout((()=>this.layout())))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,i){t?t!==this.container&&(this.container=t,this.setContainer(t,i?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const n=ss((()=>{this.currentViewDisposable===n&&this.hideContextView()}));return this.currentViewDisposable=n,n}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};xI=SI([CI(0,wI)],xI);const kI=ga("dialogService");class EI{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}}class TI{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(this._hashFn(t),n),n.incoming.set(this._hashFn(e),i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let e of this._nodes.values())e.outgoing.delete(t),e.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new EI(e),this._nodes.set(t,i)),i}isEmpty(){return 0===this._nodes.size}toString(){let e=[];for(let[t,i]of this._nodes)e.push(`${t}, (incoming)[${[...i.incoming.keys()].join(", ")}], (outgoing)[${[...i.outgoing.keys()].join(",")}]`);return e.join("\n")}findCycleSlow(){for(let[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(let[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const e=this._findCycle(n,t);if(e)return e;t.delete(i)}}}class LI extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=null!==(t=e.findCycleSlow())&&void 0!==t?t:`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}class NI{constructor(e=new LL,t=!1,i){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=i,this._services.set(fa,this)}createChild(e){return new NI(e,this._strict,this)}invokeFunction(e,...t){let i=MI.traceInvocation(e),n=!1;try{return e({get:(e,t)=>{if(n)throw(r="service accessor is only valid during the invocation of its target method")?new Error(`Illegal state: ${r}`):new Error("Illegal state");var r;const s=this._getOrCreateServiceInstance(e,i);if(!s&&t!==ma)throw new Error(`[invokeFunction] unknown service '${e}'`);return s}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){let i,n;return e instanceof mN?(i=MI.traceCreation(e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=MI.traceCreation(e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){let n=ha.getServiceDependencies(e).sort(((e,t)=>e.index-t.index)),r=[];for(const t of n){let n=this._getOrCreateServiceInstance(t.id,i);if(!n&&this._strict&&!t.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);r.push(n)}let s=n.length>0?n[0].index:t.length;if(t.length!==s){console.warn(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${t.length} static arguments`);let i=s-t.length;t=i>0?t.concat(new Array(i)):t.slice(0,s)}return new e(...[...t,...r])}_setServiceInstance(e,t){if(this._services.get(e)instanceof mN)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let i=this._getServiceInstanceOrDescriptor(e);return i instanceof mN?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const n=new TI((e=>e.id.toString()));let r=0;const s=[{id:e,desc:t,_trace:i}];for(;s.length;){const t=s.pop();if(n.lookupOrInsertNode(t),r++>1e3)throw new LI(n);for(let i of ha.getServiceDependencies(t.desc.ctor)){let r=this._getServiceInstanceOrDescriptor(i.id);if(r||i.optional||console.warn(`[createInstance] ${e} depends on ${i.id} which is NOT registered.`),r instanceof mN){const e={id:i.id,desc:r,_trace:t._trace.branch(i.id,!0)};n.insertEdge(t,e),s.push(e)}}}for(;;){const e=n.roots();if(0===e.length){if(!n.isEmpty())throw new LI(n);break}for(const{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof mN){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}n.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,r){if(this._services.get(e)instanceof mN)return this._createServiceInstance(t,i,n,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],i,n){if(i){const i=new el((()=>this._createInstance(e,t,n)));return new Proxy(Object.create(null),{get(e,t){if(t in e)return e[t];let n=i.value,r=n[t];return"function"!=typeof r||(r=r.bind(n),e[t]=r),r},set:(e,t,n)=>(i.value[t]=n,!0)})}return this._createInstance(e,t,n)}}class MI{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return MI._None}static traceCreation(e){return MI._None}branch(e,t){let i=new MI(2,e.toString());return this._dep.push([e,t,i]),i}stop(){let e=Date.now()-this._start;MI._totals+=e;let t=!1;let i=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${function e(i,n){let r=[],s=new Array(i+1).join("\t");for(const[o,a,l]of n._dep)if(a&&l){t=!0,r.push(`${s}CREATES -> ${o}`);let n=e(i+1,l);n&&r.push(n)}else r.push(`${s}uses -> ${o}`);return r.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${MI._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(i.join("\n"))}}MI._None=new class extends MI{constructor(){super(-1,null)}stop(){}branch(){return this}},MI._totals=0;const OI=ga("labelService");class DI extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function II(e,t){const i=[];for(let n of t){if(e.start>=n.range.end)continue;if(e.end<n.range.start)break;const t=pD.intersect(e,n.range);pD.isEmpty(t)||i.push({range:t,size:n.size})}return i}function AI({start:e,end:t},i){return{start:e+i,end:t+i}}class PI{constructor(){this.groups=[],this._size=0}splice(e,t,i=[]){const n=i.length-t,r=II({start:0,end:e},this.groups),s=II({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map((e=>({range:AI(e.range,n),size:e.size}))),o=i.map(((t,i)=>({range:{start:e+i,end:e+i+1},size:t.size})));this.groups=function(...e){return function(e){const t=[];let i=null;for(let n of e){const e=n.range.start,r=n.range.end,s=n.size;i&&s===i.size?i.range.end=r:(i={range:{start:e,end:r},size:s},t.push(i))}return t}(e.reduce(((e,t)=>e.concat(t)),[]))}(r,o,s),this._size=this.groups.reduce(((e,t)=>e+t.size*(t.range.end-t.range.start)),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,i=0;for(let n of this.groups){const r=n.range.end-n.range.start,s=i+r*n.size;if(e<s)return t+Math.floor((e-i)/n.size);t+=r,i=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(let n of this.groups){const r=n.range.end-n.range.start,s=i+r;if(e<s)return t+(e-i)*n.size;t+=r*n.size,i=s}return-1}}class RI{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const i=Ql(".monaco-list-row");t={domNode:i,templateId:e,templateData:this.getRenderer(e).renderTemplate(i)}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(t.classList.remove("scrolling"),function(e){try{e.parentElement&&e.parentElement.removeChild(e)}catch(e){}}(t));this.getTemplateCache(i).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach(((e,t)=>{for(const i of e){this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}})),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var BI=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};const FI={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:e=>[e],getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class WI{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class VI{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class zI{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}class HI{constructor(e){(null==e?void 0:e.getSetSize)?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(e,t,i)=>i,(null==e?void 0:e.getPosInSet)?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(e,t)=>t+1,(null==e?void 0:e.getRole)?this.getRole=e.getRole.bind(e):this.getRole=e=>"listitem",(null==e?void 0:e.isChecked)?this.isChecked=e.isChecked.bind(e):this.isChecked=e=>{}}}class jI{constructor(e,t,i,n=FI){if(this.virtualDelegate=t,this.domId="list_id_"+ ++jI.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Ka(50),this.splicing=!1,this.dragOverAnimationStopDisposable=as.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=as.None,this.onDragLeaveTimeout=as.None,this.disposables=new os,this._onDidChangeContentHeight=new ms,this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new PI;for(const e of i)this.renderers.set(e.templateId,e);this.cache=this.disposables.add(new RI(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!=typeof n.mouseSupport||n.mouseSupport),this._horizontalScrolling=ru(n,(e=>e.horizontalScrolling),FI.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=void 0===n.additionalScrollHeight?0:n.additionalScrollHeight,this.accessibilityProvider=new HI(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows";ru(n,(e=>e.transformOptimization),FI.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(Jv.addTarget(this.rowsContainer)),this.scrollable=new _E(ru(n,(e=>e.smoothScrolling),!1)?125:0,(e=>pl(e))),this.scrollableElement=this.disposables.add(new LE(this.rowsContainer,{alwaysConsumeMouseWheel:ru(n,(e=>e.alwaysConsumeMouseWheel),FI.alwaysConsumeMouseWheel),horizontal:1,vertical:ru(n,(e=>e.verticalScrollMode),FI.verticalScrollMode),useShadows:ru(n,(e=>e.useShadows),FI.useShadows)},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),Na(this.rowsContainer,Xv.Change)((e=>this.onTouchChange(e)),this,this.disposables),Na(this.scrollableElement.getDomNode(),"scroll")((e=>e.target.scrollTop=0),null,this.disposables),ps.map(Na(this.domNode,"dragover"),(e=>this.toDragEvent(e)))(this.onDragOver,this,this.disposables),ps.map(Na(this.domNode,"drop"),(e=>this.toDragEvent(e)))(this.onDrop,this,this.disposables),Na(this.domNode,"dragleave")(this.onDragLeave,this,this.disposables),Na(window,"dragend")(this.onDragEnd,this,this.disposables),this.setRowLineHeight=ru(n,(e=>e.setRowLineHeight),FI.setRowLineHeight),this.setRowHeight=ru(n,(e=>e.setRowHeight),FI.setRowHeight),this.supportDynamicHeights=ru(n,(e=>e.supportDynamicHeights),FI.supportDynamicHeights),this.dnd=ru(n,(e=>e.dnd),FI.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Tl(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){void 0!==e.additionalScrollHeight&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==e.smoothScrolling&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),void 0!==e.horizontalScrolling&&(this.horizontalScrolling=e.horizontalScrolling)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},s=pD.intersect(n,r),o=new Map;for(let e=s.start;e<s.end;e++){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){let i=o.get(t.templateId);i||(i=[],o.set(t.templateId,i));const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),i.push(t.row)}t.row=null}const a={start:e+t,end:this.items.length},l=pD.intersect(a,n),c=pD.relativeComplement(a,n),h=i.map((e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:as.None})));let u;0===e&&t>=this.items.length?(this.rangeMap=new PI,this.rangeMap.splice(0,0,h),u=this.items,this.items=h):(this.rangeMap.splice(e,t,h),u=this.items.splice(e,t,...h));const d=i.length-t,f=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=AI(l,d),g=pD.intersect(f,p);for(let e=g.start;e<g.end;e++)this.updateItemInDOM(this.items[e],e);const m=pD.relativeComplement(p,f);for(const e of m)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);const b=c.map((e=>AI(e,d))),v=[{start:e,end:e+i.length},...b].map((e=>pD.intersect(f,e))),y=this.getNextToLastElement(v);for(const e of v)for(let t=e.start;t<e.end;t++){const e=this.items[t],i=o.get(e.templateId),n=null==i?void 0:i.pop();this.insertItemInDOM(t,y,n)}for(const e of o.values())for(const t of e)this.cache.release(t);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),u.map((e=>e.element))}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=pl((()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((()=>this.updateScrollWidth())):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)void 0!==t.width&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:0===e?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let i={height:"number"==typeof e?e:Ll(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),void 0!==t&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"==typeof t?t:Tl(this.domNode)})}render(e,t,i,n,r,s=!1){const o=this.getRenderRange(t,i),a=pD.relativeComplement(o,e),l=pD.relativeComplement(e,o),c=this.getNextToLastElement(a);if(s){const t=pD.intersect(e,o);for(let e=t.start;e<t.end;e++)this.updateItemInDOM(this.items[e],e)}for(const e of a)for(let t=e.start;t<e.end;t++)this.insertItemInDOM(t,c);for(const e of l)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);void 0!==n&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&void 0!==r&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t,i){const n=this.items[e];n.row||(n.row=null!=i?i:this.cache.alloc(n.templateId));const r=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",r);const s=this.accessibilityProvider.isChecked(n.element);void 0!==s&&n.row.domNode.setAttribute("aria-checked",String(!!s)),n.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(n.row.domNode,t):this.rowsContainer.appendChild(n.row.domNode)),this.updateItemInDOM(n,e);const o=this.renderers.get(n.templateId);if(!o)throw new Error(`No renderer found for template id ${n.templateId}`);o&&o.renderElement(n.element,e,n.row.templateData,n.size);const a=this.dnd.getDragURI(n.element);if(n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a){const e=Na(n.row.domNode,"dragstart");n.dragStartDisposable=e((e=>this.onDragStart(n.element,a,e)))}this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Sa?"-moz-fit-content":"fit-content",e.width=Tl(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return ps.map(Na(this.domNode,"click"),(e=>this.toMouseEvent(e)))}get onMouseDblClick(){return ps.map(Na(this.domNode,"dblclick"),(e=>this.toMouseEvent(e)))}get onMouseMiddleClick(){return ps.filter(ps.map(Na(this.domNode,"auxclick"),(e=>this.toMouseEvent(e))),(e=>1===e.browserEvent.button))}get onMouseDown(){return ps.map(Na(this.domNode,"mousedown"),(e=>this.toMouseEvent(e)))}get onContextMenu(){return ps.any(ps.map(Na(this.domNode,"contextmenu"),(e=>this.toMouseEvent(e))),ps.map(Na(this.domNode,Xv.Contextmenu),(e=>this.toGestureEvent(e))))}get onTouchStart(){return ps.map(Na(this.domNode,"touchstart"),(e=>this.toTouchEvent(e)))}get onTap(){return ps.map(Na(this.rowsContainer,Xv.Tap),(e=>this.toGestureEvent(e)))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){if(!i.dataTransfer)return;const n=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(SN,JSON.stringify([t])),i.dataTransfer.setDragImage){let e;this.dnd.getDragLabel&&(e=this.dnd.getDragLabel(n,i)),void 0===e&&(e=String(n.length));const t=Ql(".monaco-drag-image");t.textContent=e,document.body.appendChild(t),i.dataTransfer.setDragImage(t,-10,-10),setTimeout((()=>document.body.removeChild(t)),0)}this.currentDragData=new WI(n),kN.CurrentDragAndDropData=new VI(n),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,i)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),kN.CurrentDragAndDropData&&"vscode-ui"===kN.CurrentDragAndDropData.getData())return!1;if(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer)return!1;if(!this.currentDragData)if(kN.CurrentDragAndDropData)this.currentDragData=kN.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new zI}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop="boolean"==typeof t?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;let i;if(e.browserEvent.dataTransfer.dropEffect="boolean"!=typeof t&&0===t.effect?"copy":"move",i="boolean"!=typeof t&&t.feedback?t.feedback:void 0===e.index?[-1]:[e.index],i=bp(i).filter((e=>e>=-1&&e<this.length)).sort(((e,t)=>e-t)),i=-1===i[0]?[-1]:i,n=this.currentDragFeedback,r=i,Array.isArray(n)&&Array.isArray(r)?gp(n,r):n===r)return!0;var n,r;if(this.currentDragFeedback=i,this.currentDragFeedbackDisposable.dispose(),-1===i[0])this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=ss((()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")}));else{for(const e of i){const t=this.items[e];t.dropTarget=!0,t.row&&t.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=ss((()=>{for(const e of i){const t=this.items[e];t.dropTarget=!1,t.row&&t.row.domNode.classList.remove("drop-target")}}))}return!0}onDragLeave(){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Za((()=>this.clearDragOverFeedback()),100)}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,kN.CurrentDragAndDropData=void 0,t&&e.browserEvent.dataTransfer&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,kN.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=as.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const e=function(e){let t=e.offsetParent,i=e.offsetTop,n=e.offsetLeft;for(;null!==(e=e.parentNode)&&e!==document.body&&e!==document.documentElement;){i-=e.scrollTop;const r=Il(e)?null:_l(e);r&&(n-="rtl"!==r.direction?e.scrollLeft:-e.scrollLeft),e===t&&(n+=Sl.getBorderLeftWidth(e),i+=Sl.getBorderTopWidth(e),i+=e.offsetTop,n+=e.offsetLeft,t=e.offsetParent)}return{left:n,top:i}}(this.domNode).top;this.dragOverAnimationDisposable=function(e){const t=()=>{e(),i=pl(t)};let i=pl(t);return ss((()=>i.dispose()))}(this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Za((()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}),1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(void 0===this.dragOverMouseY)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;i instanceof HTMLElement&&i!==this.rowsContainer&&t.contains(i);){const e=i.getAttribute("data-index");if(e){const t=Number(e);if(!isNaN(t))return t}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const n=this.getRenderRange(e,t);let r,s;e===this.elementTop(n.start)?(r=n.start,s=0):n.end-n.start>1&&(r=n.start+1,s=this.elementTop(r)-e);let o=0;for(;;){const a=this.getRenderRange(e,t);let l=!1;for(let e=a.start;e<a.end;e++){const t=this.probeDynamicHeight(e);0!==t&&this.rangeMap.splice(e,1,[this.items[e]]),o+=t,l=l||0!==t}if(!l){0!==o&&this.eventuallyUpdateScrollDimensions();const t=pD.relativeComplement(n,a);for(const e of t)for(let t=e.start;t<e.end;t++)this.items[t].row&&this.removeItemFromDOM(t);const l=pD.relativeComplement(a,n);for(const e of l)for(let t=e.start;t<e.end;t++){const e=t+1,i=e<this.items.length?this.items[e].row:null,n=i?i.domNode:null;this.insertItemInDOM(t,n)}for(let e=a.start;e<a.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if("number"==typeof r){const t=this.scrollable.getFutureScrollPosition().scrollTop-e,n=this.elementTop(r)-s+t;this.setScrollTop(n,i)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(e){const t=this.items[e];if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth)return 0;if(this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(!this.setRowHeight&&t.row){let e=t.row.domNode.offsetHeight;return t.size=e,t.lastDynamicHeightWidth=this.renderWidth,e-i}const n=this.cache.alloc(t.templateId);n.domNode.style.height="",this.rowsContainer.appendChild(n.domNode);const r=this.renderers.get(t.templateId);return r&&(r.renderElement(t.element,e,n.templateData,void 0),r.disposeElement&&r.disposeElement(t.element,e,n.templateData,void 0)),t.size=n.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(n.domNode),this.cache.release(n),t.size-i}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const i=this.items[t.end];return i&&i.row?i.row.domNode:null}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),ns(this.disposables)}}jI.InstanceCount=0,BI([Yv],jI.prototype,"onMouseClick",null),BI([Yv],jI.prototype,"onMouseDblClick",null),BI([Yv],jI.prototype,"onMouseMiddleClick",null),BI([Yv],jI.prototype,"onMouseDown",null),BI([Yv],jI.prototype,"onContextMenu",null),BI([Yv],jI.prototype,"onTouchStart",null),BI([Yv],jI.prototype,"onTap",null);class UI{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach((n=>n.splice(e,t,i)))}}function GI(e,t,i){return Math.min(Math.max(e,t),i)}var KI,$I=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},qI=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class ZI{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,i){const n=this.renderedElements.findIndex((e=>e.templateData===i));if(n>=0){const e=this.renderedElements[n];this.trait.unrender(i),e.index=t}else{const e={index:t,templateData:i};this.renderedElements.push(e)}this.trait.renderIndex(t,i)}splice(e,t,i){const n=[];for(const r of this.renderedElements)r.index<e?n.push(r):r.index>=e+t&&n.push({index:r.index+i-t,templateData:r.templateData});this.renderedElements=n}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex((t=>t.templateData===e));t<0||this.renderedElements.splice(t,1)}}class YI{constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new ms,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new ZI(this)}splice(e,t,i){const n=i.length-t,r=e+t,s=[...this.sortedIndexes.filter((t=>t<e)),...i.map(((t,i)=>t?i+e:-1)).filter((e=>-1!==e)),...this.sortedIndexes.filter((e=>e>=r)).map((e=>e+n))];this.renderer.splice(e,t,i.length),this._set(s,s)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(fA),t)}_set(e,t,i){const n=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const s=dA(r,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return function(e,t,i){let n=0,r=e.length-1;for(;n<=r;){const s=(n+r)/2|0,o=i(e[s],t);if(o<0)n=s+1;else{if(!(o>0))return s;r=s-1}}return-(n+1)}(this.sortedIndexes,e,fA)>=0}dispose(){ns(this._onChange)}}$I([Yv],YI.prototype,"renderer",null);class XI extends YI{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class QI{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,i.map((()=>!1)));const n=this.trait.get().map((e=>this.identityProvider.getId(this.view.element(e)).toString())),r=i.map((e=>n.indexOf(this.identityProvider.getId(e).toString())>-1));this.trait.splice(e,t,r)}}function JI(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName}function eA(e){return!!e.classList.contains("monaco-editor")||!e.classList.contains("monaco-list")&&(!!e.parentElement&&eA(e.parentElement))}class tA{constructor(e,t,i){this.list=e,this.view=t,this.disposables=new os;const n=!1!==i.multipleSelectionSupport,r=ps.chain(Na(t.domNode,"keydown")).filter((e=>!JI(e.target))).map((e=>new Ra(e)));r.filter((e=>3===e.keyCode)).on(this.onEnter,this,this.disposables),r.filter((e=>16===e.keyCode)).on(this.onUpArrow,this,this.disposables),r.filter((e=>18===e.keyCode)).on(this.onDownArrow,this,this.disposables),r.filter((e=>11===e.keyCode)).on(this.onPageUpArrow,this,this.disposables),r.filter((e=>12===e.keyCode)).on(this.onPageDownArrow,this,this.disposables),r.filter((e=>9===e.keyCode)).on(this.onEscape,this,this.disposables),n&&r.filter((e=>(Xn?e.metaKey:e.ctrlKey)&&31===e.keyCode)).on(this.onCtrlA,this,this.disposables)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(_p(this.list.length),e.browserEvent),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.view.domNode.focus())}dispose(){this.disposables.dispose()}}!function(e){e[e.Idle=0]="Idle",e[e.Typing=1]="Typing"}(KI||(KI={}));const iA=new class{mightProducePrintableCharacter(e){return!(e.ctrlKey||e.metaKey||e.altKey)&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30||e.keyCode>=93&&e.keyCode<=102||e.keyCode>=80&&e.keyCode<=90)}};class nA{constructor(e,t,i,n){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.delegate=n,this.enabled=!1,this.state=KI.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new os,this.disposables=new os,this.updateOptions(e.options)}updateOptions(e){void 0===e.enableKeyboardNavigation||!!e.enableKeyboardNavigation?this.enable():this.disable(),void 0!==e.automaticKeyboardNavigation&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=ps.chain(Na(this.view.domNode,"keydown")).filter((e=>!JI(e.target))).filter((()=>this.automaticKeyboardNavigation||this.triggered)).map((e=>new Ra(e))).filter((e=>this.delegate.mightProducePrintableCharacter(e))).forEach((e=>{e.stopPropagation(),e.preventDefault()})).map((e=>e.browserEvent.key)).event,t=ps.debounce(e,(()=>null),800);ps.reduce(ps.any(e,t),((e,t)=>null===t?null:(e||"")+t))(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const i=null===(e=this.list.options.accessibilityProvider)||void 0===e?void 0:e.getAriaLabel(this.list.element(t[0]));i&&Eb(i)}this.previouslyFocused=-1}onInput(e){if(!e)return this.state=KI.Idle,void(this.triggered=!1);const t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===KI.Idle?1:0;this.state=KI.Typing;for(let t=0;t<this.list.length;t++){const r=(i+t+n)%this.list.length,s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),o=s&&s.toString();if(void 0===o||wD(e,o))return this.previouslyFocused=i,this.list.setFocus([r]),void this.list.reveal(r)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class rA{constructor(e,t){this.list=e,this.view=t,this.disposables=new os;ps.chain(Na(t.domNode,"keydown")).filter((e=>!JI(e.target))).map((e=>new Ra(e))).filter((e=>!(2!==e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey))).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(0===t.length)return;const i=this.view.domElement(t[0]);if(!i)return;const n=i.querySelector("[tabIndex]");if(!(n&&n instanceof HTMLElement&&-1!==n.tabIndex))return;const r=window.getComputedStyle(n);"hidden"!==r.visibility&&"none"!==r.display&&(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}}function sA(e){return Xn?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function oA(e){return e.browserEvent.shiftKey}const aA={isSelectionSingleChangeEvent:sA,isSelectionRangeChangeEvent:oA};class lA{constructor(e){this.list=e,this.disposables=new os,this._onPointer=new ms,this.onPointer=this._onPointer.event,this.multipleSelectionSupport=!(!1===e.options.multipleSelectionSupport),this.multipleSelectionSupport&&(this.multipleSelectionController=e.options.multipleSelectionController||aA),this.mouseSupport=void 0===e.options.mouseSupport||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Jv.addTarget(e.getHTMLElement()))),ps.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):Xn?e.browserEvent.metaKey:e.browserEvent.ctrlKey}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):e.browserEvent.shiftKey}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){eA(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(eA(e.browserEvent.target))return;const t=void 0===e.index?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport)return;if(JI(e.browserEvent.target)||eA(e.browserEvent.target))return;const t=e.index;return void 0===t?(this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),void this.list.setAnchor(void 0)):this.multipleSelectionSupport&&this.isSelectionRangeChangeEvent(e)||this.multipleSelectionSupport&&this.isSelectionChangeEvent(e)?this.changeSelection(e):(this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),(i=e.browserEvent)instanceof MouseEvent&&2===i.button||this.list.setSelection([t],e.browserEvent),void this._onPointer.fire(e));var i}onDoubleClick(e){if(JI(e.browserEvent.target)||eA(e.browserEvent.target))return;if(this.multipleSelectionSupport&&this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(void 0===i){const e=this.list.getFocus()[0];i=null!=e?e:t,this.list.setAnchor(i)}const n=_p(Math.min(i,t),Math.max(i,t)+1),r=this.list.getSelection(),s=function(e,t){const i=e.indexOf(t);if(-1===i)return[];const n=[];let r=i-1;for(;r>=0&&e[r]===t-(i-r);)n.push(e[r--]);n.reverse(),r=i;for(;r<e.length&&e[r]===t+(r-i);)n.push(e[r++]);return n}(dA(r,[i]),i);if(0===s.length)return;const o=dA(n,function(e,t){const i=[];let n=0,r=0;for(;n<e.length||r<t.length;)if(n>=e.length)i.push(t[r++]);else if(r>=t.length)i.push(e[n++]);else{if(e[n]===t[r]){n++,r++;continue}e[n]<t[r]?i.push(e[n++]):r++}return i}(r,s));this.list.setSelection(o,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),n=i.filter((e=>e!==t));this.list.setFocus([t]),this.list.setAnchor(t),i.length===n.length?this.list.setSelection([...n,t],e.browserEvent):this.list.setSelection(n,e.browserEvent)}}dispose(){this.disposables.dispose()}}class cA{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&(e.listBackground.isOpaque()?i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):Xn||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }\n\t\t\t`),e.listFocusAndSelectionForeground&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }\n\t\t\t`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&i.push(`\n\t\t\t\t.monaco-list${t}.drop-target,\n\t\t\t\t.monaco-list${t} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }\n\t\t\t`),e.listFilterWidgetBackground&&i.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&i.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&i.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&i.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&i.push(`\n\t\t\t\t.monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${e.tableColumnsBorder};\n\t\t\t}`),this.styleElement.textContent=i.join("\n")}}const hA={listFocusBackground:vw.fromHex("#7FB0D0"),listActiveSelectionBackground:vw.fromHex("#0E639C"),listActiveSelectionForeground:vw.fromHex("#FFFFFF"),listFocusAndSelectionBackground:vw.fromHex("#094771"),listFocusAndSelectionForeground:vw.fromHex("#FFFFFF"),listInactiveSelectionBackground:vw.fromHex("#3F3F46"),listHoverBackground:vw.fromHex("#2A2D2E"),listDropBackground:vw.fromHex("#383B3D"),treeIndentGuidesStroke:vw.fromHex("#a9a9a9"),tableColumnsBorder:vw.fromHex("#cccccc").transparent(.2)},uA={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){}}};function dA(e,t){const i=[];let n=0,r=0;for(;n<e.length||r<t.length;)if(n>=e.length)i.push(t[r++]);else if(r>=t.length)i.push(e[n++]);else{if(e[n]===t[r]){i.push(e[n]),n++,r++;continue}e[n]<t[r]?i.push(e[n++]):i.push(t[r++])}return i}const fA=(e,t)=>e-t;class pA{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map((t=>t.renderTemplate(e)))}renderElement(e,t,i,n){let r=0;for(const s of this.renderers)s.renderElement(e,t,i[r++],n)}disposeElement(e,t,i,n){let r=0;for(const s of this.renderers)s.disposeElement&&s.disposeElement(e,t,i[r],n),r+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class gA{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,i){const n=this.accessibilityProvider.getAriaLabel(e);n?i.setAttribute("aria-label",n):i.removeAttribute("aria-label");const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);"number"==typeof r?i.setAttribute("aria-level",`${r}`):i.removeAttribute("aria-level")}disposeTemplate(e){}}class mA{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,i,n){return this.dnd.onDragOver(e,t,i,n)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,i,n){this.dnd.drop(e,t,i,n)}}class bA{constructor(e,t,i,n,r=uA){var s;this.user=e,this._options=r,this.focus=new YI("focused"),this.anchor=new YI("anchor"),this.eventBufferer=new vs,this._ariaLabel="",this.disposables=new os,this._onDidDispose=new ms,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?null===(s=this._options.accessibilityProvider)||void 0===s?void 0:s.getWidgetRole():"list";this.selection=new XI("listbox"!==o),iu(r,hA,!1);const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(a.push(new gA(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map((e=>new pA(e.templateId,[...a,e])));const l=Object.assign(Object.assign({},r),{dnd:r.dnd&&new mA(this,r.dnd)});if(this.view=new jI(t,i,n,l),this.view.domNode.setAttribute("role",o),r.styleController)this.styleController=r.styleController(this.view.domId);else{const e=Bl(this.view.domNode);this.styleController=new cA(e,this.view.domId)}if(this.spliceable=new UI([new QI(this.focus,this.view,r.identityProvider),new QI(this.selection,this.view,r.identityProvider),new QI(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.onDidFocus=ps.map(Na(this.view.domNode,"focus",!0),(()=>null)),this.onDidBlur=ps.map(Na(this.view.domNode,"blur",!0),(()=>null)),this.disposables.add(new rA(this,this.view)),"boolean"!=typeof r.keyboardSupport||r.keyboardSupport){const e=new tA(this,this.view,r);this.disposables.add(e)}if(r.keyboardNavigationLabelProvider){const e=r.keyboardNavigationDelegate||iA;this.typeLabelController=new nA(this,this.view,r.keyboardNavigationLabelProvider,e),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),r.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return ps.map(this.eventBufferer.wrapEvent(this.focus.onChange),(e=>this.toListEvent(e)))}get onDidChangeSelection(){return ps.map(this.eventBufferer.wrapEvent(this.selection.onChange),(e=>this.toListEvent(e)))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=ps.chain(Na(this.view.domNode,"keydown")).map((e=>new Ra(e))).filter((t=>e=58===t.keyCode||t.shiftKey&&68===t.keyCode)).map(Oa).filter((()=>!1)).event,i=ps.chain(Na(this.view.domNode,"keyup")).forEach((()=>e=!1)).map((e=>new Ra(e))).filter((e=>58===e.keyCode||e.shiftKey&&68===e.keyCode)).map(Oa).map((({browserEvent:e})=>{const t=this.getFocus(),i=t.length?t[0]:void 0;return{index:i,element:void 0!==i?this.view.element(i):void 0,anchor:void 0!==i?this.view.domElement(i):this.view.domNode,browserEvent:e}})).event,n=ps.chain(this.view.onContextMenu).filter((t=>!e)).map((({element:e,index:t,browserEvent:i})=>({element:e,index:t,anchor:{x:i.pageX+1,y:i.pageY},browserEvent:i}))).event;return ps.any(t,i,n)}get onKeyDown(){return Na(this.view.domNode,"keydown")}createMouseController(e){return new lA(this)}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new DI(this.user,`Invalid start index: ${e}`);if(t<0)throw new DI(this.user,`Invalid delete count: ${t}`);0===t&&0===i.length||this.eventBufferer.bufferEvents((()=>this.spliceable.splice(e,t,i)))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const t of e)if(t<0||t>=this.length)throw new DI(this.user,`Invalid index ${t}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map((e=>this.view.element(e)))}setAnchor(e){if(void 0!==e){if(e<0||e>=this.length)throw new DI(this.user,`Invalid index ${e}`);this.anchor.set([e])}else this.anchor.set([])}getAnchor(){return yp(this.anchor.get(),void 0)}setFocus(e,t){for(const t of e)if(t<0||t>=this.length)throw new DI(this.user,`Invalid index ${t}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,n){if(0===this.length)return;const r=this.focus.get(),s=this.findNextIndex(r.length>0?r[0]+e:0,t,n);s>-1&&this.setFocus([s],i)}focusPrevious(e=1,t=!1,i,n){if(0===this.length)return;const r=this.focus.get(),s=this.findPreviousIndex(r.length>0?r[0]-e:0,t,n);s>-1&&this.setFocus([s],i)}focusNextPage(e,t){return qI(this,void 0,void 0,(function*(){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=0===i?0:i-1;const n=this.view.element(i),r=this.getFocusedElements()[0];if(r!==n){const n=this.findPreviousIndex(i,!1,t);n>-1&&r!==this.view.element(n)?this.setFocus([n],e):this.setFocus([i],e)}else{const n=this.view.getScrollTop();this.view.setScrollTop(n+this.view.renderHeight-this.view.elementHeight(i)),this.view.getScrollTop()!==n&&(this.setFocus([]),yield qa(0),yield this.focusNextPage(e,t))}}))}focusPreviousPage(e,t){return qI(this,void 0,void 0,(function*(){let i;const n=this.view.getScrollTop();i=0===n?this.view.indexAt(n):this.view.indexAfter(n-1);const r=this.view.element(i),s=this.getFocusedElements()[0];if(s!==r){const n=this.findNextIndex(i,!1,t);n>-1&&s!==this.view.element(n)?this.setFocus([n],e):this.setFocus([i],e)}else{const i=n;this.view.setScrollTop(n-this.view.renderHeight),this.view.getScrollTop()!==i&&(this.setFocus([]),yield qa(0),yield this.focusPreviousPage(e,t))}}))}focusLast(e,t){if(0===this.length)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(0===this.length)return;const n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e%=this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map((e=>this.view.element(e)))}reveal(e,t){if(e<0||e>=this.length)throw new DI(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),n=this.view.elementTop(e),r=this.view.elementHeight(e);if(Oh(t)){const e=r-this.view.renderHeight;this.view.setScrollTop(e*GI(t,0,1)+n)}else{const e=n+r,t=i+this.view.renderHeight;n<i&&e>=t||(n<i||e>=t&&r>=this.view.renderHeight?this.view.setScrollTop(n):e>=t&&this.view.setScrollTop(e-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new DI(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),i=this.view.elementTop(e),n=this.view.elementHeight(e);if(i<t||i+n>t+this.view.renderHeight)return null;const r=n-this.view.renderHeight;return Math.abs((t-i)/r)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map((e=>this.view.element(e))),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let i;(null===(e=this.accessibilityProvider)||void 0===e?void 0:e.getActiveDescendantId)&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===e.length),this.view.domNode.classList.toggle("selection-single",1===e.length),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}$I([Yv],bA.prototype,"onDidChangeFocus",null),$I([Yv],bA.prototype,"onDidChangeSelection",null),$I([Yv],bA.prototype,"onContextMenu",null);class vA{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:as.None}}renderElement(e,t,i,n){if(i.disposable&&i.disposable.dispose(),!i.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,i.data,n);const s=new Cs,o=r.resolve(e,s.token);i.disposable={dispose:()=>s.cancel()},this.renderer.renderPlaceholder(e,i.data),o.then((t=>this.renderer.renderElement(t,e,i.data,n)))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class yA{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}new iv("isWindows",Yn,On(0,"Whether the operating system is Windows"));var _A;!function(e){e[e.Unknown=0]="Unknown",e[e.Twistie=1]="Twistie",e[e.Element=2]="Element"}(_A||(_A={}));class wA extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class SA{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function CA(e){return"object"==typeof e&&"visibility"in e&&"data"in e}function xA(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function kA(e){return"boolean"==typeof e.collapsible}class EA{constructor(e,t,i,n={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new vs,this._onDidChangeCollapseState=new ms,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new ms,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new ms,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=void 0!==n.collapseByDefault&&n.collapseByDefault,this.filter=n.filter,this.autoExpandSingleChildren=void 0!==n.autoExpandSingleChildren&&n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=Qr.empty(),n={}){if(0===e.length)throw new wA(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,n,r,s){var o;void 0===n&&(n=Qr.empty()),void 0===s&&(s=null!==(o=r.diffDepth)&&void 0!==o?o:0);const{parentNode:a}=this.getParentNodeWithListIndex(t),l=[...n],c=t[t.length-1],h=new Hf({getElements:()=>a.children.map((t=>e.getId(t.element).toString()))},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+i)].map((t=>e.getId(t.element).toString()))}).ComputeDiff(!1);if(h.quitEarly)return this.spliceSimple(t,i,l,r);const u=t.slice(0,-1),d=(t,i,n)=>{if(s>0)for(let o=0;o<n;o++)t--,i--,this.spliceSmart(e,[...u,t,0],Number.MAX_SAFE_INTEGER,l[i].children,r,s-1)};let f=Math.min(a.children.length,c+i),p=l.length;for(const e of h.changes.sort(((e,t)=>t.originalStart-e.originalStart)))d(f,p,f-(e.originalStart+e.originalLength)),f=e.originalStart,p=e.modifiedStart-c,this.spliceSimple([...u,f],e.originalLength,Qr.slice(l,p,p+e.modifiedLength),r);d(f,p,f)}spliceSimple(e,t,i=Qr.empty(),{onDidCreateNode:n,onDidDeleteNode:r}){const{parentNode:s,listIndex:o,revealed:a,visible:l}=this.getParentNodeWithListIndex(e),c=[],h=Qr.map(i,(e=>this.createTreeNode(e,s,s.visible?1:0,a,c,n))),u=e[e.length-1],d=s.children.length>0;let f=0;for(let e=u;e>=0&&e<s.children.length;e--){const t=s.children[e];if(t.visible){f=t.visibleChildIndex;break}}const p=[];let g=0,m=0;for(const e of h)p.push(e),m+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=f+g++);const b=s.children.splice(u,t,...p);let v=0;for(const e of b)e.visible&&v++;if(0!==v)for(let e=u+p.length;e<s.children.length;e++){const t=s.children[e];t.visible&&(t.visibleChildIndex-=v)}if(s.visibleChildrenCount+=g-v,a&&l){const e=b.reduce(((e,t)=>e+(t.visible?t.renderNodeCount:0)),0);this._updateAncestorsRenderNodeCount(s,m-e),this.list.splice(o,e,c)}if(b.length>0&&r){const e=t=>{r(t),t.children.forEach(e)};b.forEach(e)}const y=s.children.length>0;d!==y&&this.setCollapsible(e.slice(0,-1),y),this._onDidSplice.fire({insertedNodes:p,deletedNodes:b});let _=s;for(;_;){if(2===_.visibility){this.refilter();break}_=_.parent}}rerender(e){if(0===e.length)throw new wA(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);void 0===t&&(t=!i.collapsible);const n={collapsible:t};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,n)))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const n=this.getTreeNode(e);void 0===t&&(t=!n.collapsed);const r={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,r)))}_setCollapseState(e,t){const{node:i,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e),s=this._setListNodeCollapseState(i,n,r,t);if(i!==this.root&&this.autoExpandSingleChildren&&s&&!kA(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let n=-1;for(let e=0;e<i.children.length;e++){if(i.children[e].visible){if(n>-1){n=-1;break}n=e}}n>-1&&this._setCollapseState([...e,n],t)}return s}_setListNodeCollapseState(e,t,i,n){const r=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!r)return r;const s=e.renderNodeCount,o=this.updateNodeAfterCollapseChange(e),a=s-(-1===t?0:1);return this.list.splice(t+1,a,o.slice(1)),r}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(kA(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!kA(t)&&t.recursive)for(const i of e.children)n=this._setNodeCollapseState(i,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents((()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})}))}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,i,n,r,s){const o={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"==typeof e.collapsible?e.collapsible:void 0!==e.collapsed,collapsed:void 0===e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},a=this._filterNode(o,i);o.visibility=a,n&&r.push(o);const l=e.children||Qr.empty(),c=n&&0!==a&&!o.collapsed,h=Qr.map(l,(e=>this.createTreeNode(e,o,a,c,r,s)));let u=0,d=1;for(const e of h)o.children.push(e),d+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=u++);return o.collapsible=o.collapsible||o.children.length>0,o.visibleChildrenCount=u,o.visible=2===a?u>0:1===a,o.visible?o.collapsed||(o.renderNodeCount=d):(o.renderNodeCount=0,n&&r.pop()),s&&s(o),o}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(!1===e.visible)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),0===r)return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}const s=i.length;e.renderNodeCount=e===this.root?0:1;let o=!1;if(e.collapsed&&0===r)e.visibleChildrenCount=0;else{let t=0;for(const s of e.children)o=this._updateNodeAfterFilterChange(s,r,i,n&&!e.collapsed)||o,s.visible&&(s.visibleChildIndex=t++);e.visibleChildrenCount=t}return e!==this.root&&(e.visible=2===r?o:1===r),e.visible?e.collapsed||(e.renderNodeCount+=i.length-s):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(0!==t)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return"boolean"==typeof i?(e.filterData=void 0,i?1:0):CA(i)?(e.filterData=i.data,xA(i.visibility)):(e.filterData=void 0,xA(i))}hasTreeNode(e,t=this.root){if(!e||0===e.length)return!0;const[i,...n]=e;return!(i<0||i>t.children.length)&&this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||0===e.length)return t;const[i,...n]=e;if(i<0||i>t.children.length)throw new wA(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:n,visible:r}=this.getParentNodeWithListIndex(e),s=e[e.length-1];if(s<0||s>t.children.length)throw new wA(this.user,"Invalid tree location");const o=t.children[s];return{node:o,listIndex:i,revealed:n,visible:r&&o.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,r=!0){const[s,...o]=e;if(s<0||s>t.children.length)throw new wA(this.user,"Invalid tree location");for(let e=0;e<s;e++)i+=t.children[e].renderNodeCount;return n=n&&!t.collapsed,r=r&&t.visible,0===o.length?{parentNode:t,listIndex:i,revealed:n,visible:r}:this.getParentNodeWithListIndex(o,t.children[s],i+1,n,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){return 0===e.length?void 0:1===e.length?[]:function(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}(e)[0]}}const TA=Ju("tree-item-expanded",ed.chevronDown),LA=Ju("tree-filter-on-type-on",ed.listFilter),NA=Ju("tree-filter-on-type-off",ed.listSelection),MA=Ju("tree-filter-clear",ed.close),OA=Ju("tree-item-loading",ed.loading);class DA extends WI{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function IA(e){return e instanceof WI?new DA(e):e}class AA{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=as.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(IA(e),t)}onDragOver(e,t,i,n,r=!0){const s=this.dnd.onDragOver(IA(e),t&&t.element,i,n),o=this.autoExpandNode!==t;if(o&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),void 0===t)return s;if(o&&"boolean"!=typeof s&&s.autoExpand&&(this.autoExpandDisposable=Za((()=>{const e=this.modelProvider(),i=e.getNodeLocation(t);e.isCollapsed(i)&&e.setCollapsed(i,!1),this.autoExpandNode=void 0}),500)),"boolean"==typeof s||!s.accept||void 0===s.bubble||s.feedback){if(!r){return{accept:"boolean"==typeof s?s:s.accept,effect:"boolean"==typeof s?void 0:s.effect,feedback:[i]}}return s}if(1===s.bubble){const i=this.modelProvider(),r=i.getNodeLocation(t),s=i.getParentNodeLocation(r),o=i.getNode(s),a=s&&i.getListIndex(s);return this.onDragOver(e,o,a,n,!1)}const a=this.modelProvider(),l=a.getNodeLocation(t),c=a.getListIndex(l),h=a.getListRenderCount(l);return Object.assign(Object.assign({},s),{feedback:_p(c,c+h)})}drop(e,t,i,n){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(IA(e),t&&t.element,i,n)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}class PA{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var RA;!function(e){e.None="none",e.OnHover="onHover",e.Always="always"}(RA||(RA={}));class BA{constructor(e,t=[]){this._elements=t,this.onDidChange=ps.forEach(e,(e=>this._elements=e))}get elements(){return this._elements}}class FA{constructor(e,t,i,n,r={}){this.renderer=e,this.modelProvider=t,this.activeNodes=n,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=FA.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new rm,this.activeIndentNodes=new Set,this.indentGuidesDisposable=as.None,this.disposables=new os,this.templateId=e.templateId,this.updateOptions(r),ps.map(i,(e=>e.node))(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(void 0!==e.indent&&(this.indent=GI(e.indent,0,40)),void 0!==e.renderIndentGuides){const t=e.renderIndentGuides!==RA.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const e=new os;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}void 0!==e.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=$l(e,Ql(".monaco-tl-row")),i=$l(t,Ql(".monaco-tl-indent")),n=$l(t,Ql(".monaco-tl-twistie")),r=$l(t,Ql(".monaco-tl-contents")),s=this.renderer.renderTemplate(r);return{container:e,indent:i,twistie:n,indentGuidesDisposable:as.None,templateData:s}}renderElement(e,t,i,n){"number"==typeof n&&(this.renderedNodes.set(e,{templateData:i,height:n}),this.renderedElements.set(e.element,e));const r=FA.DefaultIndent+(e.depth-1)*this.indent;i.twistie.style.paddingLeft=`${r}px`,i.indent.style.width=r+this.indent-16+"px",this.renderTwistie(e,i),"number"==typeof n&&this.renderIndentGuides(e,i),this.renderer.renderElement(e,t,i.templateData,n)}disposeElement(e,t,i,n){i.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,i.templateData,n),"number"==typeof n&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...TA.classNamesArray);let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...TA.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(ol(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new os,n=this.modelProvider();let r=e;for(;;){const e=n.getNodeLocation(r),s=n.getParentNodeLocation(e);if(!s)break;const o=n.getNode(s),a=Ql(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(o)&&a.classList.add("active"),0===t.indent.childElementCount?t.indent.appendChild(a):t.indent.insertBefore(a,t.indent.firstElementChild),this.renderedIndentGuides.add(o,a),i.add(ss((()=>this.renderedIndentGuides.delete(o,a)))),r=o}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach((e=>{const n=i.getNodeLocation(e);try{const r=i.getParentNodeLocation(n);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):r&&t.add(i.getNode(r))}catch(e){}})),this.activeIndentNodes.forEach((e=>{t.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.remove("active")))})),t.forEach((e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.add("active")))})),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),ns(this.disposables)}}FA.DefaultIndent=8;class WA{constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new os,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const i=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return i;let n;if(n="boolean"==typeof i?i?1:0:CA(i)?xA(i.visibility):i,0===n)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:qD.Default,visibility:!0};const i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),n=Array.isArray(i)?i:[i];for(const e of n){const t=e&&e.toString();if(void 0===t)return{data:qD.Default,visibility:!0};const i=ZD(this._pattern,this._lowercasePattern,0,t,t.toLowerCase(),0,!0);if(i)return this._matchCount++,1===n.length?{data:i,visibility:!0}:{data:{label:t,score:i},visibility:!0}}return this.tree.options.filterOnType?2:{data:qD.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){ns(this.disposables)}}class VA{constructor(e,t,i,n,r){this.tree=e,this.view=i,this.filter=n,this.keyboardNavigationDelegate=r,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new ms,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new ms,this.enabledDisposables=new os,this.disposables=new os,this.domNode=Ql(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,Na(this.domNode,"dragstart")(this.onDragStart,this,this.disposables),this.messageDomNode=$l(i.getHTMLElement(),Ql(".monaco-list-type-filter-message")),this.labelDomNode=$l(this.domNode,Ql("span.label"));const s=$l(this.domNode,Ql(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=$l(s,Ql("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),Na(this.filterOnTypeDomNode,"input")(this.onDidChangeFilterOnType,this,this.disposables),this.clearDomNode=$l(s,Ql("button.clear"+MA.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=On(0,"Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),void 0!==e.filterOnType&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),void 0!==e.automaticKeyboardNavigation&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=ps.chain(Na(this.view.getHTMLElement(),"keydown")).filter((e=>!JI(e.target)||e.target===this.filterOnTypeDomNode)).filter((e=>"Dead"!==e.key&&!/^Media/.test(e.key))).map((e=>new Ra(e))).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter((()=>this.automaticKeyboardNavigation||this.triggered)).filter((e=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(e)&&!(18===e.keyCode||16===e.keyCode||15===e.keyCode||17===e.keyCode)||(this.pattern.length>0||this.triggered)&&(9===e.keyCode||1===e.keyCode)&&!e.altKey&&!e.ctrlKey&&!e.metaKey||1===e.keyCode&&(Xn?e.altKey&&!e.metaKey:e.ctrlKey)&&!e.shiftKey)).forEach((e=>{e.stopPropagation(),e.preventDefault()})).event,t=Na(this.clearDomNode,"click");ps.chain(ps.any(e,t)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){"string"==typeof e?this.onInput(e):e instanceof MouseEvent||9===e.keyCode||1===e.keyCode&&(Xn?e.altKey:e.ctrlKey)?this.onInput(""):1===e.keyCode?this.onInput(0===this.pattern.length?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,(e=>!qD.isDefault(e.filterData)));const i=this.tree.getFocus();if(i.length>0){const e=i[0];null===this.tree.getRelativeTop(e)&&this.tree.reveal(e,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=xl(e),i=e.clientWidth,n=i/2,r=this.domNode.clientWidth,s=new os;let o=this.positionClassName;const a=()=>{switch(o){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=i-r-6+"px"}};a(),this.domNode.classList.remove(o),this.domNode.classList.add("dragging"),s.add(ss((()=>this.domNode.classList.remove("dragging")))),Na(document,"dragover")((e=>{e.preventDefault();const i=e.clientX-t;e.dataTransfer&&(e.dataTransfer.dropEffect="none"),o=i<n?"nw":"ne",a()}),null,s),Na(this.domNode,"dragend")((()=>{this.positionClassName=o,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",ns(s)}),null,s),kN.CurrentDragAndDropData=new xN("vscode-ui"),s.add(ss((()=>kN.CurrentDragAndDropData=void 0)))}onDidSpliceModel(){this._enabled&&0!==this.pattern.length&&(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...NA.classNamesArray),this.filterOnTypeDomNode.classList.add(...LA.classNamesArray),this.filterOnTypeDomNode.title=On(0,"Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...LA.classNamesArray),this.filterOnTypeDomNode.classList.add(...NA.classNamesArray),this.filterOnTypeDomNode.title=On(0,"Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&0===this.filter.matchCount;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=On(0,"No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=On(0,"Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?""+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!(this.enabled&&this.pattern&&!this.filterOnType)||(this.filter.totalCount>0&&this.filter.matchCount<=1||!qD.isDefault(e.filterData))}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),ns(this.disposables)}}function zA(e){let t=_A.Unknown;return Dl(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?t=_A.Twistie:Dl(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(t=_A.Element),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function HA(e,t){t(e),e.children.forEach((e=>HA(e,t)))}class jA{constructor(e){this.identityProvider=e,this.nodes=[],this._onDidChange=new ms,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var i;!(null===(i=t)||void 0===i?void 0:i.__forceEvent)&&gp(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map((e=>e.element))),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const e=this.createNodeSet(),i=t=>e.delete(t);return t.forEach((e=>HA(e,i))),void this.set([...e.values()])}const i=new Set,n=e=>i.add(this.identityProvider.getId(e.element).toString());t.forEach((e=>HA(e,n)));const r=new Map,s=e=>r.set(this.identityProvider.getId(e.element).toString(),e);e.forEach((e=>HA(e,s)));const o=[];for(const e of this.nodes){const t=this.identityProvider.getId(e.element).toString();if(i.has(t)){const e=r.get(t);e&&o.push(e)}else o.push(e)}this._set(o,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class UA extends lA{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(JI(e.browserEvent.target)||eA(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let r=!1;if(r="function"==typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick,r&&!n&&2!==e.browserEvent.detail)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return super.onViewPointer(e);if(t.collapsible){const i=this.tree.model,s=i.getNodeLocation(t),o=e.browserEvent.altKey;if(this.tree.setFocus([s]),i.setCollapsed(s,void 0,o),r&&n)return}super.onViewPointer(e)}onDoubleClick(e){!e.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&super.onDoubleClick(e)}}class GA extends bA{constructor(e,t,i,n,r,s,o,a){super(e,t,i,n,a),this.focusTrait=r,this.selectionTrait=s,this.anchorTrait=o}createMouseController(e){return new UA(this,e.tree)}splice(e,t,i=[]){if(super.splice(e,t,i),0===i.length)return;const n=[],r=[];let s;i.forEach(((t,i)=>{this.focusTrait.has(t)&&n.push(e+i),this.selectionTrait.has(t)&&r.push(e+i),this.anchorTrait.has(t)&&(s=e+i)})),n.length>0&&super.setFocus(vp([...super.getFocus(),...n])),r.length>0&&super.setSelection(vp([...super.getSelection(),...r])),"number"==typeof s&&super.setAnchor(s)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map((e=>this.element(e))),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map((e=>this.element(e))),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(void 0===e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class KA{constructor(e,t,i,n,r={}){this._options=r,this.eventBufferer=new vs,this.disposables=new os,this._onWillRefilter=new ms,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new ms;const s=new PA(i),o=new ys,a=new ys,l=new BA(a.event);this.renderers=n.map((e=>new FA(e,(()=>this.model),o.event,l,r)));for(let e of this.renderers)this.disposables.add(e);let c;var h,u;r.keyboardNavigationLabelProvider&&(c=new WA(this,r.keyboardNavigationLabelProvider,r.filter),r=Object.assign(Object.assign({},r),{filter:c}),this.disposables.add(c)),this.focus=new jA(r.identityProvider),this.selection=new jA(r.identityProvider),this.anchor=new jA(r.identityProvider),this.view=new GA(e,t,s,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},(h=()=>this.model,(u=r)&&Object.assign(Object.assign({},u),{identityProvider:u.identityProvider&&{getId:e=>u.identityProvider.getId(e.element)},dnd:u.dnd&&new AA(h,u.dnd),multipleSelectionController:u.multipleSelectionController&&{isSelectionSingleChangeEvent:e=>u.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element})),isSelectionRangeChangeEvent:e=>u.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},accessibilityProvider:u.accessibilityProvider&&Object.assign(Object.assign({},u.accessibilityProvider),{getSetSize(e){const t=h(),i=t.getNodeLocation(e),n=t.getParentNodeLocation(i);return t.getNode(n).visibleChildrenCount},getPosInSet:e=>e.visibleChildIndex+1,isChecked:u.accessibilityProvider&&u.accessibilityProvider.isChecked?e=>u.accessibilityProvider.isChecked(e.element):void 0,getRole:u.accessibilityProvider&&u.accessibilityProvider.getRole?e=>u.accessibilityProvider.getRole(e.element):()=>"treeitem",getAriaLabel:e=>u.accessibilityProvider.getAriaLabel(e.element),getWidgetAriaLabel:()=>u.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:u.accessibilityProvider&&u.accessibilityProvider.getWidgetRole?()=>u.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:u.accessibilityProvider&&u.accessibilityProvider.getAriaLevel?e=>u.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:u.accessibilityProvider.getActiveDescendantId&&(e=>u.accessibilityProvider.getActiveDescendantId(e.element))}),keyboardNavigationLabelProvider:u.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},u.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel:e=>u.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}),enableKeyboardNavigation:u.simpleKeyboardNavigation}))),{tree:this})),this.model=this.createModel(e,this.view,r),o.input=this.model.onDidChangeCollapseState;const d=ps.forEach(this.model.onDidSplice,(e=>{this.eventBufferer.bufferEvents((()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)}))}));if(d((()=>null),null,this.disposables),a.input=ps.chain(ps.any(d,this.focus.onDidChange,this.selection.onDidChange)).debounce((()=>null),0).map((()=>{const e=new Set;for(const t of this.focus.getNodes())e.add(t);for(const t of this.selection.getNodes())e.add(t);return[...e.values()]})).event,!1!==r.keyboardSupport){const e=ps.chain(this.view.onKeyDown).filter((e=>!JI(e.target))).map((e=>new Ra(e)));e.filter((e=>15===e.keyCode)).on(this.onLeftArrow,this,this.disposables),e.filter((e=>17===e.keyCode)).on(this.onRightArrow,this,this.disposables),e.filter((e=>10===e.keyCode)).on(this.onSpace,this,this.disposables)}if(r.keyboardNavigationLabelProvider){const e=r.keyboardNavigationDelegate||iA;this.typeFilterController=new VA(this,this.model,this.view,c,e),this.focusNavigationFilter=e=>this.typeFilterController.shouldAllowFocus(e),this.disposables.add(this.typeFilterController)}this.styleElement=Bl(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===RA.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return ps.map(this.view.onMouseDblClick,zA)}get onPointer(){return ps.map(this.view.onPointer,zA)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return void 0===this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return void 0===this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions({enableKeyboardNavigation:this._options.simpleKeyboardNavigation,automaticKeyboardNavigation:this._options.automaticKeyboardNavigation,smoothScrolling:this._options.smoothScrolling,horizontalScrolling:this._options.horizontalScrolling}),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===RA.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=i.join("\n"),this.view.style(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const i=e.map((e=>this.model.getNode(e)));this.selection.set(i,t);const n=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setSelection(n,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const i=e.map((e=>this.model.getNode(e)));this.focus.set(i,t);const n=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setFocus(n,t,!0)}focusNext(e=1,t=!1,i,n=this.focusNavigationFilter){this.view.focusNext(e,t,i,n)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);-1!==i&&this.view.reveal(i,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return-1===t?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){const e=this.model.getParentNodeLocation(n);if(!e)return;const t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some((e=>e.visible)))return;const[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],n=this.model.getNodeLocation(i),r=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,r)}dispose(){ns(this.disposables),this.view.dispose()}}class $A{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new EA(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare:(e,t)=>i.sorter.compare(e.element,t.element)}),this.identityProvider=i.identityProvider}setChildren(e,t=Qr.empty(),i={}){const n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=Qr.empty(),i){const n=new Set,r=new Set;this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},i),{onDidCreateNode:e=>{var t;if(null===e.element)return;const s=e;if(n.add(s.element),this.nodes.set(s.element,s),this.identityProvider){const e=this.identityProvider.getId(s.element).toString();r.add(e),this.nodesByIdentity.set(e,s)}null===(t=i.onDidCreateNode)||void 0===t||t.call(i,s)},onDidDeleteNode:e=>{var t;if(null===e.element)return;const s=e;if(n.has(s.element)||this.nodes.delete(s.element),this.identityProvider){const e=this.identityProvider.getId(s.element).toString();r.has(e)||this.nodesByIdentity.delete(e)}null===(t=i.onDidDeleteNode)||void 0===t||t.call(i,s)}}))}preserveCollapseState(e=Qr.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Qr.map(e,(e=>{let t=this.nodes.get(e.element);if(!t&&this.identityProvider){const i=this.identityProvider.getId(e.element).toString();t=this.nodesByIdentity.get(i)}if(!t)return Object.assign(Object.assign({},e),{children:this.preserveCollapseState(e.children)});const i="boolean"==typeof e.collapsible?e.collapsible:t.collapsible,n=void 0!==e.collapsed?e.collapsed:t.collapsed;return Object.assign(Object.assign({},e),{collapsible:i,collapsed:n,children:this.preserveCollapseState(e.children)})}))}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(null===e)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new wA(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(null===e)throw new wA(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new wA(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(null===e)return[];const t=this.nodes.get(e);if(!t)throw new wA(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function qA(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:Qr.map(Qr.from(e.children),qA),collapsible:e.collapsible,collapsed:e.collapsed}}function ZA(e){const t=[e.element],i=e.incompressible||!1;let n,r;for(;[r,n]=Qr.consume(Qr.from(e.children),2),1===r.length&&!r[0].incompressible;)e=r[0],t.push(e.element);return{element:{elements:t,incompressible:i},children:Qr.map(Qr.concat(r,n),ZA),collapsible:e.collapsible,collapsed:e.collapsed}}function YA(e,t=0){let i;return i=t<e.element.elements.length-1?[YA(e,t+1)]:Qr.map(Qr.from(e.children),(e=>YA(e,0))),0===t&&e.element.incompressible?{element:e.element.elements[t],children:i,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[t],children:i,collapsible:e.collapsible,collapsed:e.collapsed}}function XA(e){return YA(e,0)}function QA(e,t,i){return e.element===t?Object.assign(Object.assign({},e),{children:i}):Object.assign(Object.assign({},e),{children:Qr.map(Qr.from(e.children),(e=>QA(e,t,i)))})}class JA{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new $A(e,t,i),this.enabled=void 0===i.compressionEnabled||i.compressionEnabled,this.identityProvider=i.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=Qr.empty(),i){const n=i.diffIdentityProvider&&(r=i.diffIdentityProvider,{getId:e=>e.elements.map((e=>r.getId(e).toString())).join("\0")});var r;if(null===e){const e=Qr.map(t,this.enabled?ZA:qA);return void this._setChildren(null,e,{diffIdentityProvider:n,diffDepth:1/0})}const s=this.nodes.get(e);if(!s)throw new Error("Unknown compressed tree node");const o=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),c=QA(XA(o),e,t),h=(this.enabled?ZA:qA)(c),u=l.children.map((e=>e===o?h:e));this._setChildren(l.element,u,{diffIdentityProvider:n,diffDepth:o.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const t=this.model.getNode().children,i=Qr.map(t,XA),n=Qr.map(i,e?ZA:qA);this._setChildren(null,n,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const n=new Set;this.model.setChildren(e,t,Object.assign(Object.assign({},i),{onDidCreateNode:e=>{for(const t of e.element.elements)n.add(t),this.nodes.set(t,e.element)},onDidDeleteNode:e=>{for(const t of e.element.elements)n.has(t)||this.nodes.delete(t)}}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(void 0===e)return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return null===t?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return null===i?null:i.elements[i.elements.length-1]}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(null===e)return null;const t=this.nodes.get(e);if(!t)throw new wA(this.user,`Tree element not found: ${e}`);return t}}const eP=e=>e[e.length-1];class tP{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return null===this.node.element?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map((e=>new tP(this.unwrapper,e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class iP{constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||eP;const n=e=>this.elementMapper(e.elements);this.nodeMapper=new SA((e=>new tP(n,e))),this.model=new JA(e,function(e,t){return{splice(i,n,r){t.splice(i,n,r.map((t=>e.map(t))))},updateElementHeight(e,i){t.updateElementHeight(e,i)}}}(this.nodeMapper,t),function(e,t){return Object.assign(Object.assign({},t),{identityProvider:t.identityProvider&&{getId:i=>t.identityProvider.getId(e(i))},sorter:t.sorter&&{compare:(e,i)=>t.sorter.compare(e.elements[0],i.elements[0])},filter:t.filter&&{filter:(i,n)=>t.filter.filter(e(i),n)}})}(n,i))}get onDidSplice(){return ps.map(this.model.onDidSplice,(({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map((e=>this.nodeMapper.map(e))),deletedNodes:t.map((e=>this.nodeMapper.map(e)))})))}get onDidChangeCollapseState(){return ps.map(this.model.onDidChangeCollapseState,(({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t})))}get onDidChangeRenderNodeCount(){return ps.map(this.model.onDidChangeRenderNodeCount,(e=>this.nodeMapper.map(e)))}setChildren(e,t=Qr.empty(),i={}){this.model.setChildren(e,t,i)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var nP=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};class rP extends KA{constructor(e,t,i,n,r={}){super(e,t,i,n,r)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Qr.empty(),i){this.model.setChildren(e,t,i)}rerender(e){void 0!==e?this.model.rerender(e):this.view.rerender()}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new $A(e,t,i)}}class sP{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){const r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);1===r.element.elements.length?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,i.data,n))}disposeElement(e,t,i,n){i.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(i.compressedTreeNode,t,i.data,n):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(e,t)}}nP([Yv],sP.prototype,"compressedTreeNodeProvider",null);class oP extends rP{constructor(e,t,i,n,r={}){const s=()=>this;super(e,t,i,n.map((e=>new sP(s,e))),function(e,t){return t&&Object.assign(Object.assign({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(i){let n;try{n=e().getCompressedTreeNode(i)}catch(e){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return 1===n.element.elements.length?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}(s,r))}setChildren(e,t=Qr.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new iP(e,t,i)}updateOptions(e={}){super.updateOptions(e),void 0!==e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var aP=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};function lP(e){return Object.assign(Object.assign({},e),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function cP(e,t){return!!t.parent&&(t.parent===e||cP(e,t.parent))}class hP{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map((e=>new hP(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class uP{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...OA.classNamesArray),!0):(t.classList.remove(...OA.classNamesArray),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function dP(e){return{browserEvent:e.browserEvent,elements:e.elements.map((e=>e.element))}}function fP(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}class pP extends WI{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function gP(e){return e instanceof WI?new pP(e):e}class mP{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(gP(e),t)}onDragOver(e,t,i,n,r=!0){return this.dnd.onDragOver(gP(e),t&&t.element,i,n)}drop(e,t,i,n){this.dnd.drop(gP(e),t&&t.element,i,n)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function bP(e){return e&&Object.assign(Object.assign({},e),{collapseByDefault:!0,identityProvider:e.identityProvider&&{getId:t=>e.identityProvider.getId(t.element)},dnd:e.dnd&&new mP(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent:t=>e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element})),isSelectionRangeChangeEvent:t=>e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",isChecked:e.accessibilityProvider.isChecked?t=>{var i;return!!(null===(i=e.accessibilityProvider)||void 0===i?void 0:i.isChecked(t.element))}:void 0,getAriaLabel:t=>e.accessibilityProvider.getAriaLabel(t.element),getWidgetAriaLabel:()=>e.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),filter:e.filter&&{filter:(t,i)=>e.filter.filter(t.element,i)},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}),sorter:void 0,expandOnlyOnTwistieClick:void 0===e.expandOnlyOnTwistieClick?void 0:"function"!=typeof e.expandOnlyOnTwistieClick?e.expandOnlyOnTwistieClick:t=>e.expandOnlyOnTwistieClick(t.element),additionalScrollHeight:e.additionalScrollHeight})}function vP(e,t){t(e),e.children.forEach((e=>vP(e,t)))}class yP{constructor(e,t,i,n,r,s={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new ms,this._onDidChangeNodeSlowState=new ms,this.nodeMapper=new SA((e=>new hP(e))),this.disposables=new os,this.identityProvider=s.identityProvider,this.autoExpandSingleChildren=void 0!==s.autoExpandSingleChildren&&s.autoExpandSingleChildren,this.sorter=s.sorter,this.collapseByDefault=s.collapseByDefault,this.tree=this.createTree(e,t,i,n,s),this.root=lP({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return ps.map(this.tree.onDidChangeFocus,dP)}get onDidChangeSelection(){return ps.map(this.tree.onDidChangeSelection,dP)}get onMouseDblClick(){return ps.map(this.tree.onMouseDblClick,fP)}get onPointer(){return ps.map(this.tree.onPointer,fP)}get onDidFocus(){return this.tree.onDidFocus}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,i,n,r){const s=new PA(i),o=n.map((e=>new uP(e,this.nodeMapper,this._onDidChangeNodeSlowState.event))),a=bP(r)||{};return new rP(e,t,s,o,a)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return aP(this,void 0,void 0,(function*(){this.refreshPromises.forEach((e=>e.cancel())),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&"number"==typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}))}_updateChildren(e=this.root.element,t=!0,i=!1,n,r){return aP(this,void 0,void 0,(function*(){if(void 0===this.root.element)throw new wA(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ps.toPromise(this._onDidRender.event));const s=this.getDataNode(e);if(yield this.refreshAndRenderNode(s,t,n,r),i)try{this.tree.rerender(s)}catch(e){}}))}rerender(e){if(void 0===e||e===this.root.element)return void this.tree.rerender();const t=this.getDataNode(e);this.tree.rerender(t)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}expand(e,t=!1){return aP(this,void 0,void 0,(function*(){if(void 0===this.root.element)throw new wA(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ps.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i))return!1;if(i.refreshPromise&&(yield this.root.refreshPromise,yield ps.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i))return!1;const n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(yield this.root.refreshPromise,yield ps.toPromise(this._onDidRender.event)),n}))}setSelection(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map((e=>e.element))}setFocus(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map((e=>e.element))}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new wA(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,i,n){return aP(this,void 0,void 0,(function*(){yield this.refreshNode(e,t,i),this.render(e,i,n)}))}refreshNode(e,t,i){return aP(this,void 0,void 0,(function*(){let n;return this.subTreeRefreshPromises.forEach(((r,s)=>{!n&&function(e,t){return e===t||cP(e,t)||cP(t,e)}(s,e)&&(n=r.then((()=>this.refreshNode(e,t,i))))})),n||this.doRefreshSubTree(e,t,i)}))}doRefreshSubTree(e,t,i){return aP(this,void 0,void 0,(function*(){let n;e.refreshPromise=new Promise((e=>n=e)),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally((()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}));try{const r=yield this.doRefreshNode(e,t,i);e.stale=!1,yield tl.settled(r.map((e=>this.doRefreshSubTree(e,t,i))))}finally{n()}}))}doRefreshNode(e,t,i){return aP(this,void 0,void 0,(function*(){let n;if(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren){const t=qa(800);t.then((()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)}),(e=>null)),n=this.doGetChildren(e).finally((()=>t.cancel()))}else n=Promise.resolve(Qr.empty());try{const r=yield n;return this.setChildren(e,r,t,i)}catch(t){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Zr(t))return[];throw t}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}))}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=Ua((()=>aP(this,void 0,void 0,(function*(){const t=yield this.dataSource.getChildren(e.element);return this.processChildren(t)})))),this.refreshPromises.set(e,t),t.finally((()=>{this.refreshPromises.delete(e)})))}_onDidChangeCollapseState({node:e,deep:t}){null!==e.element&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Gr))}setChildren(e,t,i,n){const r=[...t];if(0===e.children.length&&0===r.length)return[];const s=new Map,o=new Map;for(const t of e.children)if(s.set(t.element,t),this.identityProvider){const e=this.tree.isCollapsed(t);o.set(t.id,{node:t,collapsed:e})}const a=[],l=r.map((t=>{const r=!!this.dataSource.hasChildren(t);if(!this.identityProvider){const i=lP({element:t,parent:e,hasChildren:r});return r&&this.collapseByDefault&&!this.collapseByDefault(t)&&(i.collapsedByDefault=!1,a.push(i)),i}const l=this.identityProvider.getId(t).toString(),c=o.get(l);if(c){const e=c.node;return s.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=r,i?c.collapsed?(e.children.forEach((e=>vP(e,(e=>this.nodes.delete(e.element))))),e.children.splice(0,e.children.length),e.stale=!0):a.push(e):r&&this.collapseByDefault&&!this.collapseByDefault(t)&&(e.collapsedByDefault=!1,a.push(e)),e}const h=lP({element:t,parent:e,id:l,hasChildren:r});return n&&n.viewState.focus&&n.viewState.focus.indexOf(l)>-1&&n.focus.push(h),n&&n.viewState.selection&&n.viewState.selection.indexOf(l)>-1&&n.selection.push(h),n&&n.viewState.expanded&&n.viewState.expanded.indexOf(l)>-1?a.push(h):r&&this.collapseByDefault&&!this.collapseByDefault(t)&&(h.collapsedByDefault=!1,a.push(h)),h}));for(const e of s.values())vP(e,(e=>this.nodes.delete(e.element)));for(const e of l)this.nodes.set(e.element,e);return e.children.splice(0,e.children.length,...l),e!==this.root&&this.autoExpandSingleChildren&&1===l.length&&0===a.length&&(l[0].collapsedByDefault=!1,a.push(l[0])),a}render(e,t,i){const n=e.children.map((e=>this.asTreeElement(e,t))),r=i&&Object.assign(Object.assign({},i),{diffIdentityProvider:i.diffIdentityProvider&&{getId:e=>i.diffIdentityProvider.getId(e.element)}});this.tree.setChildren(e===this.root?null:e,n,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return i=!(t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1)&&e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Qr.map(e.children,(e=>this.asTreeElement(e,t))):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class _P{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map((e=>e.element)),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map((e=>new _P(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class wP{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...OA.classNamesArray),!0):(t.classList.remove(...OA.classNamesArray),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=ns(this.disposables)}}class SP extends yP{constructor(e,t,i,n,r,s,o={}){super(e,t,i,r,s,o),this.compressionDelegate=n,this.compressibleNodeMapper=new SA((e=>new _P(e))),this.filter=o.filter}createTree(e,t,i,n,r){const s=new PA(i),o=n.map((e=>new wP(e,this.nodeMapper,(()=>this.compressibleNodeMapper),this._onDidChangeNodeSlowState.event))),a=function(e){const t=e&&bP(e);return t&&Object.assign(Object.assign({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},t.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map((e=>e.element)))})})}(r)||{};return new oP(e,t,s,o,a)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const i=e=>this.identityProvider.getId(e).toString(),n=e=>{const t=new Set;for(const n of e){const e=this.tree.getCompressedTreeNode(n===this.root?null:n);if(e.element)for(const n of e.element.elements)t.add(i(n.element))}return t},r=n(this.tree.getSelection()),s=n(this.tree.getFocus());super.render(e,t);const o=this.getSelection();let a=!1;const l=this.getFocus();let c=!1;const h=e=>{const t=e.element;if(t)for(let e=0;e<t.elements.length;e++){const n=i(t.elements[e].element),h=t.elements[t.elements.length-1].element;r.has(n)&&-1===o.indexOf(h)&&(o.push(h),a=!0),s.has(n)&&-1===l.indexOf(h)&&(l.push(h),c=!0)}e.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),a&&this.setSelection(o),c&&this.setFocus(l)}processChildren(e){return this.filter&&(e=Qr.filter(e,(e=>{const t=this.filter.filter(e,1),i="boolean"==typeof(n=t)?n?1:0:CA(n)?xA(n.visibility):xA(n);var n;if(2===i)throw new Error("Recursive tree visibility not supported in async data compressed trees");return 1===i}))),super.processChildren(e)}}class CP extends KA{constructor(e,t,i,n,r,s={}){super(e,t,i,n,s),this.user=e,this.dataSource=r,this.identityProvider=s.identityProvider}createModel(e,t,i){return new $A(e,t,i)}}const xP={separatorBorder:vw.transparent};class kP{constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,"number"==typeof i?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return void 0===this._cachedVisibleSize}setVisible(e,t){e!==this.visible&&(e?(this.size=GI(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"==typeof t?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class EP extends kP{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class TP extends kP{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var LP,NP;!function(e){e[e.Idle=0]="Idle",e[e.Busy=1]="Busy"}(LP||(LP={})),function(e){e.Distribute={type:"distribute"},e.Split=function(e){return{type:"split",index:e}},e.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}}}(NP||(NP={}));class MP extends as{constructor(e,t={}){var i,n;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=LP.Idle,this._onDidSashChange=this._register(new ms),this.onDidSashChange=this._onDidSashChange.event,this._onDidSashReset=this._register(new ms),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.orientation=Ih(t.orientation)?0:t.orientation,this.inverseAltBehavior=!!t.inverseAltBehavior,this.proportionalLayout=!!Ih(t.proportionalLayout)||!!t.proportionalLayout,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(0===this.orientation?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=$l(this.el,Ql(".sash-container")),this.viewContainer=Ql(".split-view-container"),this.scrollable=new _E(125,pl),this.scrollableElement=this._register(new LE(this.viewContainer,{vertical:0===this.orientation?null!==(i=t.scrollbarVisibility)&&void 0!==i?i:1:2,horizontal:1===this.orientation?null!==(n=t.scrollbarVisibility)&&void 0!==n?n:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll((e=>{this.viewContainer.scrollTop=e.scrollTop,this.viewContainer.scrollLeft=e.scrollLeft}))),$l(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||xP),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach(((e,t)=>{const i=Ih(e.visible)||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},n=e.view;this.doAddView(n,i,t,!0)})),this.contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,n){this.doAddView(e,t,i,n)}layout(e,t){const i=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let t=0;t<this.viewItems.length;t++){const i=this.viewItems[t];i.size=GI(Math.round(this.proportions[t]*e),i.minimumSize,i.maximumSize)}else{const t=_p(this.viewItems.length),n=t.filter((e=>1===this.viewItems[e].priority)),r=t.filter((e=>2===this.viewItems[e].priority));this.resize(this.viewItems.length-1,e-i,void 0,n,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map((e=>e.size/this.contentSize)))}onSashStart({sash:e,start:t,alt:i}){for(const e of this.viewItems)e.enabled=!1;const n=this.sashItems.findIndex((t=>t.sash===e)),r=rs(Na(document.body,"keydown")((e=>s(this.sashDragState.current,e.altKey))),Na(document.body,"keyup")((()=>s(this.sashDragState.current,!1)))),s=(e,t)=>{const i=this.viewItems.map((e=>e.size));let s,o,a=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(t=!t),t){if(n===this.sashItems.length-1){const e=this.viewItems[n];a=(e.minimumSize-e.size)/2,l=(e.maximumSize-e.size)/2}else{const e=this.viewItems[n+1];a=(e.size-e.maximumSize)/2,l=(e.size-e.minimumSize)/2}}if(!t){const e=_p(n,-1),t=_p(n+1,this.viewItems.length),r=e.reduce(((e,t)=>e+(this.viewItems[t].minimumSize-i[t])),0),a=e.reduce(((e,t)=>e+(this.viewItems[t].viewMaximumSize-i[t])),0),l=0===t.length?Number.POSITIVE_INFINITY:t.reduce(((e,t)=>e+(i[t]-this.viewItems[t].minimumSize)),0),c=0===t.length?Number.NEGATIVE_INFINITY:t.reduce(((e,t)=>e+(i[t]-this.viewItems[t].viewMaximumSize)),0),h=Math.max(r,c),u=Math.min(l,a),d=this.findFirstSnapIndex(e),f=this.findFirstSnapIndex(t);if("number"==typeof d){const e=this.viewItems[d],t=Math.floor(e.viewMinimumSize/2);s={index:d,limitDelta:e.visible?h-t:h+t,size:e.size}}if("number"==typeof f){const e=this.viewItems[f],t=Math.floor(e.viewMinimumSize/2);o={index:f,limitDelta:e.visible?u+t:u-t,size:e.size}}}this.sashDragState={start:e,current:e,index:n,sizes:i,minDelta:a,maxDelta:l,alt:t,snapBefore:s,snapAfter:o,disposable:r}};s(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:n,alt:r,minDelta:s,maxDelta:o,snapBefore:a,snapAfter:l}=this.sashDragState;this.sashDragState.current=e;const c=e-i,h=this.resize(t,c,n,void 0,void 0,s,o,a,l);if(r){const e=t===this.sashItems.length-1,i=this.viewItems.map((e=>e.size)),n=e?t:t+1,r=this.viewItems[n],s=r.size-r.maximumSize,o=r.size-r.minimumSize,a=e?t-1:t+1;this.resize(a,-h,i,void 0,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const e of this.viewItems)e.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=GI(t="number"==typeof t?t:e.size,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(this.state!==LP.Idle)throw new Error("Cant modify splitview");if(this.state=LP.Busy,e<0||e>=this.viewItems.length)return;const i=_p(this.viewItems.length).filter((t=>t!==e)),n=[...i.filter((e=>1===this.viewItems[e].priority)),e],r=i.filter((e=>2===this.viewItems[e].priority)),s=this.viewItems[e];t=GI(t=Math.round(t),s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=t,this.relayout(n,r),this.state=LP.Idle}distributeViewSizes(){const e=[];let t=0;for(const i of this.viewItems)i.maximumSize-i.minimumSize>0&&(e.push(i),t+=i.size);const i=Math.floor(t/e.length);for(const t of e)t.size=GI(i,t.minimumSize,t.maximumSize);const n=_p(this.viewItems.length),r=n.filter((e=>1===this.viewItems[e].priority)),s=n.filter((e=>2===this.viewItems[e].priority));this.relayout(r,s)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,n){if(this.state!==LP.Idle)throw new Error("Cant modify splitview");this.state=LP.Busy;const r=Ql(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(i));const s=rs(e.onDidChange((e=>this.onViewChange(a,e))),ss((()=>this.viewContainer.removeChild(r))));let o;o="number"==typeof t?t:"split"===t.type?this.getViewSize(t.index)/2:"invisible"===t.type?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize;const a=0===this.orientation?new EP(r,e,o,s):new TP(r,e,o,s);if(this.viewItems.splice(i,0,a),this.viewItems.length>1){let e={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const t=0===this.orientation?new gN(this.sashContainer,{getHorizontalSashTop:e=>this.getSashPosition(e),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},e),{orientation:1})):new gN(this.sashContainer,{getVerticalSashLeft:e=>this.getSashPosition(e),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},e),{orientation:0})),n=0===this.orientation?e=>({sash:t,start:e.startY,current:e.currentY,alt:e.altKey}):e=>({sash:t,start:e.startX,current:e.currentX,alt:e.altKey}),r=rs(ps.map(t.onDidStart,n)(this.onSashStart,this),ps.map(t.onDidChange,n)(this.onSashChange,this),ps.map(t.onDidEnd,(()=>this.sashItems.findIndex((e=>e.sash===t))))(this.onSashEnd,this),t.onDidReset((()=>{const e=this.sashItems.findIndex((e=>e.sash===t)),i=_p(e,-1),n=_p(e+1,this.viewItems.length),r=this.findFirstSnapIndex(i),s=this.findFirstSnapIndex(n);("number"!=typeof r||this.viewItems[r].visible)&&("number"!=typeof s||this.viewItems[s].visible)&&this._onDidSashReset.fire(e)})),t),s={sash:t,disposable:r};this.sashItems.splice(i-1,0,s)}let l;r.appendChild(e.element),"number"!=typeof t&&"split"===t.type&&(l=[t.index]),n||this.relayout([i],l),this.state=LP.Idle,n||"number"==typeof t||"distribute"!==t.type||this.distributeViewSizes()}relayout(e,t){const i=this.viewItems.reduce(((e,t)=>e+t.size),0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map((e=>e.size)),n,r,s=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a,l){if(e<0||e>=this.viewItems.length)return 0;const c=_p(e,-1),h=_p(e+1,this.viewItems.length);if(r)for(const e of r)Sp(c,e),Sp(h,e);if(n)for(const e of n)Cp(c,e),Cp(h,e);const u=c.map((e=>this.viewItems[e])),d=c.map((e=>i[e])),f=h.map((e=>this.viewItems[e])),p=h.map((e=>i[e])),g=c.reduce(((e,t)=>e+(this.viewItems[t].minimumSize-i[t])),0),m=c.reduce(((e,t)=>e+(this.viewItems[t].maximumSize-i[t])),0),b=0===h.length?Number.POSITIVE_INFINITY:h.reduce(((e,t)=>e+(i[t]-this.viewItems[t].minimumSize)),0),v=0===h.length?Number.NEGATIVE_INFINITY:h.reduce(((e,t)=>e+(i[t]-this.viewItems[t].maximumSize)),0),y=Math.max(g,v,s),_=Math.min(b,m,o);let w=!1;if(a){const e=this.viewItems[a.index],i=t>=a.limitDelta;w=i!==e.visible,e.setVisible(i,a.size)}if(!w&&l){const e=this.viewItems[l.index],i=t<l.limitDelta;w=i!==e.visible,e.setVisible(i,l.size)}if(w)return this.resize(e,t,i,n,r,s,o);for(let e=0,i=t=GI(t,y,_);e<u.length;e++){const t=u[e],n=GI(d[e]+i,t.minimumSize,t.maximumSize);i-=n-d[e],t.size=n}for(let e=0,i=t;e<f.length;e++){const t=f[e],n=GI(p[e]-i,t.minimumSize,t.maximumSize);i+=n-p[e],t.size=n}return t}distributeEmptySpace(e){const t=this.viewItems.reduce(((e,t)=>e+t.size),0);let i=this.size-t;const n=_p(this.viewItems.length-1,-1),r=n.filter((e=>1===this.viewItems[e].priority)),s=n.filter((e=>2===this.viewItems[e].priority));for(const e of s)Sp(n,e);for(const e of r)Cp(n,e);"number"==typeof e&&Cp(n,e);for(let e=0;0!==i&&e<n.length;e++){const t=this.viewItems[n[e]],r=GI(t.size+i,t.minimumSize,t.maximumSize);i-=r-t.size,t.size=r}}layoutViews(){this.contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach((e=>e.sash.layout())),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){0===this.orientation?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map((t=>e=t.size-t.minimumSize>0||e));e=!1;const i=this.viewItems.map((t=>e=t.maximumSize-t.size>0||e)),n=[...this.viewItems].reverse();e=!1;const r=n.map((t=>e=t.size-t.minimumSize>0||e)).reverse();e=!1;const s=n.map((t=>e=t.maximumSize-t.size>0||e)).reverse();let o=0;for(let e=0;e<this.sashItems.length;e++){const{sash:n}=this.sashItems[e];o+=this.viewItems[e].size;const a=!(t[e]&&s[e+1]),l=!(i[e]&&r[e+1]);if(a&&l){const i=_p(e,-1),s=_p(e+1,this.viewItems.length),a=this.findFirstSnapIndex(i),l=this.findFirstSnapIndex(s),c="number"==typeof a&&!this.viewItems[a].visible,h="number"==typeof l&&!this.viewItems[l].visible;c&&r[e]&&(o>0||this.startSnappingEnabled)?n.state=1:h&&t[e]&&(o<this.contentSize||this.endSnappingEnabled)?n.state=2:n.state=0}else n.state=a&&!l?1:!a&&l?2:3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const e=this.viewItems[t];if(e.visible&&e.snap)return t}for(const t of e){const e=this.viewItems[t];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach((e=>e.dispose())),this.viewItems=[],this.sashItems.forEach((e=>e.disposable.dispose())),this.sashItems=[]}}class OP{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=OP.TemplateId,this.renderedTemplates=new Set;const n=new Map(t.map((e=>[e.templateId,e])));this.renderers=[];for(const t of e){const e=n.get(t.templateId);if(!e)throw new Error(`Table cell renderer for template id ${t.templateId} not found.`);this.renderers.push(e)}}renderTemplate(e){const t=$l(e,Ql(".monaco-table-tr")),i=[],n=[];for(let e=0;e<this.columns.length;e++){const r=this.renderers[e],s=$l(t,Ql(".monaco-table-td",{"data-col-index":e}));s.style.width=`${this.getColumnSize(e)}px`,i.push(s),n.push(r.renderTemplate(s))}const r={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(r),r}renderElement(e,t,i,n){for(let r=0;r<this.columns.length;r++){const s=this.columns[r].project(e);this.renderers[r].renderElement(s,t,i.cellTemplateData[r],n)}}disposeElement(e,t,i,n){for(let r=0;r<this.columns.length;r++){const s=this.renderers[r];if(s.disposeElement){const o=this.columns[r].project(e);s.disposeElement(o,t,i.cellTemplateData[r],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++){this.renderers[t].disposeTemplate(e.cellTemplateData[t])}ol(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}OP.TemplateId="row";class DP{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new ms,this.onDidLayout=this._onDidLayout.event,this.element=Ql(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return null!==(e=this.column.minimumWidth)&&void 0!==e?e:120}get maximumSize(){var e;return null!==(e=this.column.maximumWidth)&&void 0!==e?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return null!==(e=this.column.onDidChangeWidthConstraints)&&void 0!==e?e:ps.None}layout(e){this._onDidLayout.fire([this.index,e])}}class IP{constructor(e,t,i,n,r,s){this.virtualDelegate=i,this.domId="table_id_"+ ++IP.InstanceCount,this.cachedHeight=0,this.domNode=$l(t,Ql(`.monaco-table.${this.domId}`));const o=n.map(((e,t)=>new DP(e,t))),a={size:o.reduce(((e,t)=>e+t.column.weight),0),views:o.map((e=>({size:e.column.weight,view:e})))};this.splitview=new MP(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:a}),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const l=new OP(n,r,(e=>this.splitview.getViewSize(e)));var c;this.list=new bA(e,this.domNode,(c=i,{getHeight:e=>c.getHeight(e),getTemplateId:()=>OP.TemplateId}),[l],s),this.columnLayoutDisposable=ps.any(...o.map((e=>e.onDidLayout)))((([e,t])=>l.layoutColumn(e,t))),this.styleElement=Bl(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight+1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`),this.styleElement.textContent=t.join("\n"),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.splitview.dispose(),this.list.dispose(),this.columnLayoutDisposable.dispose()}}IP.InstanceCount=0;var AP=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},PP=function(e,t){return function(i,n){t(i,n,e)}};const RP=ga("listService");let BP=class{constructor(e){this._themeService=e,this.disposables=new os,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const e=new cA(Bl(),"");this.disposables.add(pI(e,this._themeService))}if(this.lists.some((t=>t.widget===e)))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),e.getHTMLElement()===document.activeElement&&(this._lastFocusedWidget=e),rs(e.onDidFocus((()=>this._lastFocusedWidget=e)),ss((()=>this.lists.splice(this.lists.indexOf(i),1))),e.onDidDispose((()=>{this.lists=this.lists.filter((e=>e!==i)),this._lastFocusedWidget===e&&(this._lastFocusedWidget=void 0)})))}dispose(){this.disposables.dispose()}};BP=AP([PP(0,av)],BP);const FP=new iv("listFocus",!0),WP=new iv("listSupportsMultiselect",!0),VP=(Fb.and(FP,Fb.not("inputFocus")),new iv("listHasSelectionOrFocus",!1)),zP=new iv("listDoubleSelection",!1),HP=new iv("listMultiSelection",!1),jP=new iv("listSelectionNavigation",!1),UP=new iv("listSupportsKeyboardNavigation",!0),GP="listAutomaticKeyboardNavigation",KP=new iv(GP,!0);let $P=!1;function qP(e,t){const i=e.createScoped(t.getHTMLElement());return FP.bindTo(i),i}const ZP="workbench.list.multiSelectModifier",YP="workbench.list.openMode",XP="workbench.list.horizontalScrolling",QP="workbench.list.keyboardNavigation",JP="workbench.list.automaticKeyboardNavigation",eR="workbench.tree.indent",tR="workbench.tree.renderIndentGuides",iR="workbench.list.smoothScrolling",nR="workbench.tree.expandMode";function rR(e){return"alt"===e.getValue(ZP)}class sR extends as{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=rR(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(ZP)&&(this.useAltAsMultipleSelectionModifier=rR(this.configurationService))})))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:sA(e)}isSelectionRangeChangeEvent(e){return oA(e)}}function oR(e,t,i){const n=new os,r=Object.assign({},e);if(!1!==e.multipleSelectionSupport&&!e.multipleSelectionController){const e=new sR(t);r.multipleSelectionController=e,n.add(e)}return r.keyboardNavigationDelegate={mightProducePrintableCharacter:e=>i.mightProducePrintableCharacter(e)},r.smoothScrolling=Boolean(t.getValue(iR)),[r,n]}let aR=class extends bA{constructor(e,t,i,n,r,s,o,a,l,c){const h=void 0!==r.horizontalScrolling?r.horizontalScrolling:Boolean(l.getValue(XP)),[u,d]=oR(r,l,c);super(e,t,i,n,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},dI(a.getColorTheme(),gI)),u),{horizontalScrolling:h})),this.disposables.add(d),this.contextKeyService=qP(s,this),this.themeService=a;WP.bindTo(this.contextKeyService).set(!(!1===r.multipleSelectionSupport));jP.bindTo(this.contextKeyService).set(Boolean(r.selectionNavigation)),this.listHasSelectionOrFocus=VP.bindTo(this.contextKeyService),this.listDoubleSelection=zP.bindTo(this.contextKeyService),this.listMultiSelection=HP.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=rR(l),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),this.disposables.add(l.onDidChangeConfiguration((e=>{e.affectsConfiguration(ZP)&&(this._useAltAsMultipleSelectionModifier=rR(l));let t={};if(e.affectsConfiguration(XP)&&void 0===this.horizontalScrolling){const e=Boolean(l.getValue(XP));t=Object.assign(Object.assign({},t),{horizontalScrolling:e})}if(e.affectsConfiguration(iR)){const e=Boolean(l.getValue(iR));t=Object.assign(Object.assign({},t),{smoothScrolling:e})}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new uR(this,Object.assign({configurationService:l},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles)}updateStyles(e){var t;null===(t=this._styler)||void 0===t||t.dispose(),this._styler=pI(this,this.themeService,e)}dispose(){var e;null===(e=this._styler)||void 0===e||e.dispose(),super.dispose()}};aR=AP([PP(5,nv),PP(6,RP),PP(7,av),PP(8,_m),PP(9,_M)],aR);let lR=class extends class{constructor(e,t,i,n,r={}){const s=()=>this.model,o=n.map((e=>new vA(e,s)));this.list=new bA(e,t,i,o,function(e,t){return Object.assign(Object.assign({},t),{accessibilityProvider:t.accessibilityProvider&&new yA(e,t.accessibilityProvider)})}(s,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return ps.map(this.list.onMouseDblClick,(({element:e,index:t,browserEvent:i})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:i})))}get onPointer(){return ps.map(this.list.onPointer,(({element:e,index:t,browserEvent:i})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:i})))}get onDidChangeSelection(){return ps.map(this.list.onDidChangeSelection,(({elements:e,indexes:t,browserEvent:i})=>({elements:e.map((e=>this._model.get(e))),indexes:t,browserEvent:i})))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,_p(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map((e=>this.model.get(e)))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}{constructor(e,t,i,n,r,s,o,a,l,c){const h=void 0!==r.horizontalScrolling?r.horizontalScrolling:Boolean(l.getValue(XP)),[u,d]=oR(r,l,c);super(e,t,i,n,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},dI(a.getColorTheme(),gI)),u),{horizontalScrolling:h})),this.disposables=new os,this.disposables.add(d),this.contextKeyService=qP(s,this),this.themeService=a,this.horizontalScrolling=r.horizontalScrolling;WP.bindTo(this.contextKeyService).set(!(!1===r.multipleSelectionSupport));jP.bindTo(this.contextKeyService).set(Boolean(r.selectionNavigation)),this._useAltAsMultipleSelectionModifier=rR(l),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),r.overrideStyles&&this.disposables.add(pI(this,a,r.overrideStyles)),this.disposables.add(l.onDidChangeConfiguration((e=>{e.affectsConfiguration(ZP)&&(this._useAltAsMultipleSelectionModifier=rR(l));let t={};if(e.affectsConfiguration(XP)&&void 0===this.horizontalScrolling){const e=Boolean(l.getValue(XP));t=Object.assign(Object.assign({},t),{horizontalScrolling:e})}if(e.affectsConfiguration(iR)){const e=Boolean(l.getValue(iR));t=Object.assign(Object.assign({},t),{smoothScrolling:e})}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new uR(this,Object.assign({configurationService:l},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles)}updateStyles(e){var t;null===(t=this._styler)||void 0===t||t.dispose(),this._styler=pI(this,this.themeService,e)}dispose(){var e;null===(e=this._styler)||void 0===e||e.dispose(),this.disposables.dispose(),super.dispose()}};lR=AP([PP(5,nv),PP(6,RP),PP(7,av),PP(8,_m),PP(9,_M)],lR);let cR=class extends IP{constructor(e,t,i,n,r,s,o,a,l,c,h){const u=void 0!==s.horizontalScrolling?s.horizontalScrolling:Boolean(c.getValue(XP)),[d,f]=oR(s,c,h);super(e,t,i,n,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},dI(l.getColorTheme(),gI)),d),{horizontalScrolling:u})),this.disposables=new os,this.disposables.add(f),this.contextKeyService=qP(o,this),this.themeService=l;WP.bindTo(this.contextKeyService).set(!(!1===s.multipleSelectionSupport));jP.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this.listHasSelectionOrFocus=VP.bindTo(this.contextKeyService),this.listDoubleSelection=zP.bindTo(this.contextKeyService),this.listMultiSelection=HP.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=rR(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),this.disposables.add(c.onDidChangeConfiguration((e=>{e.affectsConfiguration(ZP)&&(this._useAltAsMultipleSelectionModifier=rR(c));let t={};if(e.affectsConfiguration(XP)&&void 0===this.horizontalScrolling){const e=Boolean(c.getValue(XP));t=Object.assign(Object.assign({},t),{horizontalScrolling:e})}if(e.affectsConfiguration(iR)){const e=Boolean(c.getValue(iR));t=Object.assign(Object.assign({},t),{smoothScrolling:e})}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new dR(this,Object.assign({configurationService:c},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles)}updateStyles(e){var t;null===(t=this._styler)||void 0===t||t.dispose(),this._styler=pI(this,this.themeService,e)}dispose(){var e;null===(e=this._styler)||void 0===e||e.dispose(),this.disposables.dispose(),super.dispose()}};cR=AP([PP(6,nv),PP(7,RP),PP(8,av),PP(9,_m),PP(10,_M)],cR);class hR extends as{constructor(e,t){var i;super(),this.widget=e,this._onDidOpen=this._register(new ms),this.onDidOpen=this._onDidOpen.event,this._register(ps.filter(this.widget.onDidChangeSelection,(e=>e.browserEvent instanceof KeyboardEvent))((e=>this.onSelectionFromKeyboard(e)))),this._register(this.widget.onPointer((e=>this.onPointer(e.element,e.browserEvent)))),this._register(this.widget.onMouseDblClick((e=>this.onMouseDblClick(e.element,e.browserEvent)))),"boolean"!=typeof(null==t?void 0:t.openOnSingleClick)&&(null==t?void 0:t.configurationService)?(this.openOnSingleClick="doubleClick"!==(null==t?void 0:t.configurationService.getValue(YP)),this._register(null==t?void 0:t.configurationService.onDidChangeConfiguration((()=>{this.openOnSingleClick="doubleClick"!==(null==t?void 0:t.configurationService.getValue(YP))})))):this.openOnSingleClick=null===(i=null==t?void 0:t.openOnSingleClick)||void 0===i||i}onSelectionFromKeyboard(e){if(1!==e.elements.length)return;const t=e.browserEvent,i="boolean"!=typeof t.preserveFocus||t.preserveFocus,n="boolean"==typeof t.pinned?t.pinned:!i;this._open(this.getSelectedElement(),i,n,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick)return;if(2===t.detail)return;const i=1===t.button,n=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!0,i,n,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const n=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!1,!0,n,t)}_open(e,t,i,n,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:r})}}class uR extends hR{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class dR extends hR{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class fR extends hR{constructor(e,t){super(e,t)}getSelectedElement(){var e;return null!==(e=this.widget.getSelection()[0])&&void 0!==e?e:void 0}}function pR(e,t){let i=!1;return n=>{if(i)return i=!1,!1;const r=t.softDispatch(n,e);return r&&r.enterChord?(i=!0,!1):(i=!1,!0)}}let gR=class extends rP{constructor(e,t,i,n,r,s,o,a,l,c,h){const{options:u,getAutomaticKeyboardNavigation:d,disposable:f}=_R(t,r,s,l,c,h);super(e,t,i,n,u),this.disposables.add(f),this.internals=new wR(this,r,d,r.overrideStyles,s,o,a,l,h),this.disposables.add(this.internals)}};gR=AP([PP(5,nv),PP(6,RP),PP(7,av),PP(8,_m),PP(9,_M),PP(10,NL)],gR);let mR=class extends oP{constructor(e,t,i,n,r,s,o,a,l,c,h){const{options:u,getAutomaticKeyboardNavigation:d,disposable:f}=_R(t,r,s,l,c,h);super(e,t,i,n,u),this.disposables.add(f),this.internals=new wR(this,r,d,r.overrideStyles,s,o,a,l,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles)}};mR=AP([PP(5,nv),PP(6,RP),PP(7,av),PP(8,_m),PP(9,_M),PP(10,NL)],mR);let bR=class extends CP{constructor(e,t,i,n,r,s,o,a,l,c,h,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:p}=_R(t,s,o,c,h,u);super(e,t,i,n,r,d),this.disposables.add(p),this.internals=new wR(this,s,f,s.overrideStyles,o,a,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles)}};bR=AP([PP(6,nv),PP(7,RP),PP(8,av),PP(9,_m),PP(10,_M),PP(11,NL)],bR);let vR=class extends yP{constructor(e,t,i,n,r,s,o,a,l,c,h,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:p}=_R(t,s,o,c,h,u);super(e,t,i,n,r,d),this.disposables.add(p),this.internals=new wR(this,s,f,s.overrideStyles,o,a,l,c,u),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles)}};vR=AP([PP(6,nv),PP(7,RP),PP(8,av),PP(9,_m),PP(10,_M),PP(11,NL)],vR);let yR=class extends SP{constructor(e,t,i,n,r,s,o,a,l,c,h,u,d){const{options:f,getAutomaticKeyboardNavigation:p,disposable:g}=_R(t,o,a,h,u,d);super(e,t,i,n,r,s,f),this.disposables.add(g),this.internals=new wR(this,o,p,o.overrideStyles,a,l,c,h,d),this.disposables.add(this.internals)}};function _R(e,t,i,n,r,s){var o;UP.bindTo(i),$P||(KP.bindTo(i),$P=!0);const a=()=>{let e=Boolean(i.getContextKeyValue(GP));return e&&(e=Boolean(n.getValue(JP))),e},l=s.isScreenReaderOptimized(),c=t.simpleKeyboardNavigation||l?"simple":n.getValue(QP),h=void 0!==t.horizontalScrolling?t.horizontalScrolling:Boolean(n.getValue(XP)),[u,d]=oR(t,n,r),f=t.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},u),{indent:n.getValue(eR),renderIndentGuides:n.getValue(tR),smoothScrolling:Boolean(n.getValue(iR)),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:"simple"===c,filterOnType:"filter"===c,horizontalScrolling:h,keyboardNavigationEventFilter:pR(e,r),additionalScrollHeight:f,hideTwistiesOfChildlessElements:t.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:null!==(o=t.expandOnlyOnTwistieClick)&&void 0!==o?o:"doubleClick"===n.getValue(nR)})}}yR=AP([PP(7,nv),PP(8,RP),PP(9,av),PP(10,_m),PP(11,_M),PP(12,NL)],yR);let wR=class{constructor(e,t,i,n,r,s,o,a,l){this.tree=e,this.themeService=o,this.disposables=[],this.contextKeyService=qP(r,e);WP.bindTo(this.contextKeyService).set(!(!1===t.multipleSelectionSupport));jP.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.hasSelectionOrFocus=VP.bindTo(this.contextKeyService),this.hasDoubleSelection=zP.bindTo(this.contextKeyService),this.hasMultiSelection=HP.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=rR(a);const c=new Set;c.add(GP);const h=()=>{const t=l.isScreenReaderOptimized()?"simple":a.getValue(QP);e.updateOptions({simpleKeyboardNavigation:"simple"===t,filterOnType:"filter"===t})};this.updateStyleOverrides(n),this.disposables.push(this.contextKeyService,s.register(e),e.onDidChangeSelection((()=>{const t=e.getSelection(),i=e.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.hasSelectionOrFocus.set(t.length>0||i.length>0),this.hasMultiSelection.set(t.length>1),this.hasDoubleSelection.set(2===t.length)}))})),e.onDidChangeFocus((()=>{const t=e.getSelection(),i=e.getFocus();this.hasSelectionOrFocus.set(t.length>0||i.length>0)})),a.onDidChangeConfiguration((n=>{let r={};if(n.affectsConfiguration(ZP)&&(this._useAltAsMultipleSelectionModifier=rR(a)),n.affectsConfiguration(eR)){const e=a.getValue(eR);r=Object.assign(Object.assign({},r),{indent:e})}if(n.affectsConfiguration(tR)){const e=a.getValue(tR);r=Object.assign(Object.assign({},r),{renderIndentGuides:e})}if(n.affectsConfiguration(iR)){const e=Boolean(a.getValue(iR));r=Object.assign(Object.assign({},r),{smoothScrolling:e})}if(n.affectsConfiguration(QP)&&h(),n.affectsConfiguration(JP)&&(r=Object.assign(Object.assign({},r),{automaticKeyboardNavigation:i()})),n.affectsConfiguration(XP)&&void 0===t.horizontalScrolling){const e=Boolean(a.getValue(XP));r=Object.assign(Object.assign({},r),{horizontalScrolling:e})}n.affectsConfiguration(nR)&&void 0===t.expandOnlyOnTwistieClick&&(r=Object.assign(Object.assign({},r),{expandOnlyOnTwistieClick:"doubleClick"===a.getValue(nR)})),Object.keys(r).length>0&&e.updateOptions(r)})),this.contextKeyService.onDidChangeContext((t=>{t.affectsSome(c)&&e.updateOptions({automaticKeyboardNavigation:i()})})),l.onDidChangeScreenReaderOptimized((()=>h()))),this.navigator=new fR(e,Object.assign({configurationService:a},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateStyleOverrides(e){ns(this.styler),this.styler=e?pI(this.tree,this.themeService,e):as.None}dispose(){this.disposables=ns(this.disposables),ns(this.styler),this.styler=void 0}};wR=AP([PP(4,nv),PP(5,RP),PP(6,av),PP(7,_m),PP(8,NL)],wR);var SR,CR;zg.as(Ug).registerConfiguration({id:"workbench",order:7,title:On(0,"Workbench"),type:"object",properties:{[ZP]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[On(0,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),On(0,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:On(0,"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[YP]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:On(0,"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[XP]:{type:"boolean",default:!1,description:On(0,"Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[eR]:{type:"number",default:8,minimum:0,maximum:40,description:On(0,"Controls tree indentation in pixels.")},[tR]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:On(0,"Controls whether the tree should render indent guides.")},[iR]:{type:"boolean",default:!1,description:On(0,"Controls whether lists and trees have smooth scrolling.")},[QP]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[On(0,"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),On(0,"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),On(0,"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:On(0,"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[JP]:{type:"boolean",default:!0,markdownDescription:On(0,"Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[nR]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:On(0,"Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}}),function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(SR||(SR={})),function(e){e.compare=function(e,t){return t-e};const t=Object.create(null);t[e.Error]=On(0,"Error"),t[e.Warning]=On(0,"Warning"),t[e.Info]=On(0,"Info"),e.toString=function(e){return t[e]||""},e.fromSeverity=function(t){switch(t){case Pg.Error:return e.Error;case Pg.Warning:return e.Warning;case Pg.Info:return e.Info;case Pg.Ignore:return e.Hint}},e.toSeverity=function(t){switch(t){case e.Error:return Pg.Error;case e.Warning:return Pg.Warning;case e.Info:return Pg.Info;case e.Hint:return Pg.Ignore}}}(SR||(SR={})),function(e){const t="";function i(e,i){let n=[t];return e.source?n.push(e.source.replace("","\\")):n.push(t),e.code?"string"==typeof e.code?n.push(e.code.replace("","\\")):n.push(e.code.value.replace("","\\")):n.push(t),void 0!==e.severity&&null!==e.severity?n.push(SR.toString(e.severity)):n.push(t),e.message&&i?n.push(e.message.replace("","\\")):n.push(t),void 0!==e.startLineNumber&&null!==e.startLineNumber?n.push(e.startLineNumber.toString()):n.push(t),void 0!==e.startColumn&&null!==e.startColumn?n.push(e.startColumn.toString()):n.push(t),void 0!==e.endLineNumber&&null!==e.endLineNumber?n.push(e.endLineNumber.toString()):n.push(t),void 0!==e.endColumn&&null!==e.endColumn?n.push(e.endColumn.toString()):n.push(t),n.push(t),n.join("")}e.makeKey=function(e){return i(e,!0)},e.makeKeyOptionalMessage=i}(CR||(CR={}));const xR=ga("markerService");class kR{constructor(){this._byResource=new lh,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let r=this._byOwner.get(t);r||(r=new lh,this._byOwner.set(t,r)),r.set(e,i)}get(e,t){let i=this._byResource.get(e);return null==i?void 0:i.get(t)}delete(e,t){let i=!1,n=!1,r=this._byResource.get(e);r&&(i=r.delete(t));let s=this._byOwner.get(t);if(s&&(n=s.delete(e)),i!==n)throw new Error("illegal state");return i&&n}values(e){var t,i,n,r;return"string"==typeof e?null!==(i=null===(t=this._byOwner.get(e))||void 0===t?void 0:t.values())&&void 0!==i?i:Qr.empty():uo.isUri(e)?null!==(r=null===(n=this._byResource.get(e))||void 0===n?void 0:n.values())&&void 0!==r?r:Qr.empty():Qr.map(Qr.concat(...this._byOwner.values()),(e=>e[1]))}}class ER{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new lh,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const e=this._data.get(t);e&&this._substract(e);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===il.inMemory||e.scheme===il.walkThrough||e.scheme===il.walkThroughSnippet)return t;for(const{severity:i}of this._service.read({resource:e}))i===SR.Error?t.errors+=1:i===SR.Warning?t.warnings+=1:i===SR.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class TR{constructor(){this._onMarkerChanged=new ms,this.onMarkerChanged=ps.debounce(this._onMarkerChanged.event,TR._debouncer,0),this._data=new kR,this._stats=new ER(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(n=i,Array.isArray(n)&&0!==n.length){const n=[];for(const r of i){const i=TR._toMarker(e,t,r);i&&n.push(i)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}else{this._data.delete(t,e)&&this._onMarkerChanged.fire([t])}var n}static _toMarker(e,t,i){let{code:n,severity:r,message:s,source:o,startLineNumber:a,startColumn:l,endLineNumber:c,endColumn:h,relatedInformation:u,tags:d}=i;if(s)return a=a>0?a:1,l=l>0?l:1,c=c>=a?c:a,h=h>0?h:l,{resource:t,owner:e,code:n,severity:r,message:s,source:o,startLineNumber:a,startColumn:l,endLineNumber:c,endColumn:h,relatedInformation:u,tags:d}}read(e=Object.create(null)){let{owner:t,resource:i,severities:n,take:r}=e;if((!r||r<0)&&(r=-1),t&&i){const e=this._data.get(i,t);if(e){const t=[];for(const i of e)if(TR._accept(i,n)){const e=t.push(i);if(r>0&&e===r)break}return t}return[]}if(t||i){const e=this._data.values(null!=i?i:t),s=[];for(const t of e)for(const e of t)if(TR._accept(e,n)){const t=s.push(e);if(r>0&&t===r)return s}return s}{const e=[];for(let t of this._data.values())for(let i of t)if(TR._accept(i,n)){const t=e.push(i);if(r>0&&t===r)return e}return e}}static _accept(e,t){return void 0===t||(t&e.severity)===e.severity}static _debouncer(e,t){e||(TR._dedupeMap=new lh,e=[]);for(const i of t)TR._dedupeMap.has(i)||(TR._dedupeMap.set(i,!0),e.push(i));return e}}var LR,NR=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};!function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"}(LR||(LR={}));class MR extends as{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new ms),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=LR.None,this.cache=new Map,this.flushDelayer=new $a(MR.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal((e=>this.onDidChangeItemsExternal(e))))}onDidChangeItemsExternal(e){var t,i;null===(t=e.changed)||void 0===t||t.forEach(((e,t)=>this.accept(t,e))),null===(i=e.deleted)||void 0===i||i.forEach((e=>this.accept(e,void 0)))}accept(e,t){if(this.state===LR.Closed)return;let i=!1;if(Ah(t))i=this.cache.delete(e);else{this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0)}i&&this._onDidChangeStorage.fire(e)}get(e,t){const i=this.cache.get(e);return Ah(i)?t:i}getBoolean(e,t){const i=this.get(e);return Ah(i)?t:"true"===i}getNumber(e,t){const i=this.get(e);return Ah(i)?t:parseInt(i,10)}set(e,t){return NR(this,void 0,void 0,(function*(){if(this.state===LR.Closed)return;if(Ah(t))return this.delete(e);const i=String(t);return this.cache.get(e)!==i?(this.cache.set(e,i),this.pendingInserts.set(e,i),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger((()=>this.flushPending()))):void 0}))}delete(e){return NR(this,void 0,void 0,(function*(){if(this.state===LR.Closed)return;return this.cache.delete(e)?(this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger((()=>this.flushPending()))):void 0}))}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return NR(this,void 0,void 0,(function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally((()=>{var e;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)null===(e=this.whenFlushedCallbacks.pop())||void 0===e||e()}))}))}dispose(){this.flushDelayer.cancel(),this.flushDelayer.dispose(),super.dispose()}}MR.DEFAULT_FLUSH_DELAY=100;class OR{constructor(){this.onDidChangeItemsExternal=ps.None,this.items=new Map}updateItems(e){return NR(this,void 0,void 0,(function*(){e.insert&&e.insert.forEach(((e,t)=>this.items.set(t,e))),e.delete&&e.delete.forEach((e=>this.items.delete(e)))}))}}const DR="__$__targetStorageMarker",IR=ga("storageService");var AR;!function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"}(AR||(AR={}));class PR extends as{constructor(e={flushInterval:PR.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new bs),this._onDidChangeTarget=this._register(new bs),this._onWillSaveState=this._register(new ms),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===DR?(0===e?this._globalKeyTargets=void 0:1===e&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.get(e,i)}getBoolean(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.getBoolean(e,i)}getNumber(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.getNumber(e,i)}store(e,t,i,n){Ah(t)?this.remove(e,i):this.withPausedEmitters((()=>{var r;this.updateKeyTarget(e,i,n),null===(r=this.getStorage(i))||void 0===r||r.set(e,t)}))}remove(e,t){this.withPausedEmitters((()=>{var i;this.updateKeyTarget(e,t,void 0),null===(i=this.getStorage(t))||void 0===i||i.delete(e)}))}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i){var n,r;const s=this.getKeyTargets(t);"number"==typeof i?s[e]!==i&&(s[e]=i,null===(n=this.getStorage(t))||void 0===n||n.set(DR,JSON.stringify(s))):"number"==typeof s[e]&&(delete s[e],null===(r=this.getStorage(t))||void 0===r||r.set(DR,JSON.stringify(s)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return 0===e?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(DR,e);if(t)try{return JSON.parse(t)}catch(e){}return Object.create(null)}}PR.DEFAULT_FLUSH_INTERVAL=6e4;class RR extends PR{constructor(){super(),this.globalStorage=new MR(new OR),this.workspaceStorage=new MR(new OR),this._register(this.workspaceStorage.onDidChangeStorage((e=>this.emitDidChangeValue(1,e)))),this._register(this.globalStorage.onDidChangeStorage((e=>this.emitDidChangeValue(0,e))))}getStorage(e){return 0===e?this.globalStorage:this.workspaceStorage}}var BR=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},FR=function(e,t){return function(i,n){t(i,n,e)}};let WR=class{constructor(e){this._commandService=e}createMenu(e,t,i=!1){return new VR(e,i,this._commandService,t,this)}};WR=BR([FR(0,zh)],WR);let VR=class e{constructor(e,t,i,n,r){this._id=e,this._fireEventsForSubmenuChanges=t,this._commandService=i,this._contextKeyService=n,this._menuService=r,this._dispoables=new os,this._onDidChange=new ms,this.onDidChange=this._onDidChange.event,this._menuGroups=[],this._contextKeys=new Set,this._build();const s=new Qa((()=>this._build()),50);this._dispoables.add(s),this._dispoables.add(wv.onDidChangeMenu((t=>{t.has(e)&&s.schedule()})));const o=new Qa((()=>this._onDidChange.fire(this)),50);this._dispoables.add(o),this._dispoables.add(n.onDidChangeContext((e=>{e.affectsSome(this._contextKeys)&&o.schedule()})))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const t=wv.getMenuItems(this._id);let i;t.sort(e._compareMenuItems);for(let e of t){const t=e.group||"";i&&i[0]===t||(i=[t,[]],this._menuGroups.push(i)),i[1].push(e),this._collectContextKeys(e)}this._onDidChange.fire(this)}_collectContextKeys(t){if(e._fillInKbExprKeys(t.when,this._contextKeys),vv(t)){if(t.command.precondition&&e._fillInKbExprKeys(t.command.precondition,this._contextKeys),t.command.toggled){const i=t.command.toggled.condition||t.command.toggled;e._fillInKbExprKeys(i,this._contextKeys)}}else this._fireEventsForSubmenuChanges&&wv.getMenuItems(t.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let i of this._menuGroups){const[n,r]=i,s=[];for(const t of r)if(this._contextKeyService.contextMatchesRules(t.when)){const i=vv(t)?new Cv(t.command,t.alt,e,this._contextKeyService,this._commandService):new Sv(t,this._menuService,this._contextKeyService,e);s.push(i)}s.length>0&&t.push([n,s])}return t}static _fillInKbExprKeys(e,t){if(e)for(let i of e.keys())t.add(i)}static _compareMenuItems(t,i){let n=t.group,r=i.group;if(n!==r){if(!n)return 1;if(!r)return-1;if("navigation"===n)return-1;if("navigation"===r)return 1;let e=n.localeCompare(r);if(0!==e)return e}let s=t.order||0,o=i.order||0;return s<o?-1:s>o?1:e._compareTitles(vv(t)?t.command.title:t.title,vv(i)?i.command.title:i.title)}static _compareTitles(e,t){const i="string"==typeof e?e:e.original,n="string"==typeof t?t:t.original;return i.localeCompare(n)}};VR=BR([FR(2,zh),FR(3,nv),FR(4,_v)],VR);var zR=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},HR=function(e,t){return function(i,n){t(i,n,e)}};function jR(e){return e.toString()}class UR extends as{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(ss((()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()})))}update(e,t){const i=[...this._markersData.keys()];this._markersData.clear();const n=this.model.deltaDecorations(i,t);for(let t=0;t<n.length;t++)this._markersData.set(n[t],e[t]);return 0!==i.length||0!==n.length}getMarker(e){return this._markersData.get(e.id)}}let GR=class extends as{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new ms),this._markerDecorations=new Map,e.getModels().forEach((e=>this._onModelAdded(e))),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach((e=>e.dispose())),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(jR(e));return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach((e=>{const t=this._markerDecorations.get(jR(e));t&&this._updateDecorations(t)}))}_onModelAdded(e){const t=new UR(e);this._markerDecorations.set(jR(e.uri),t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(jR(e.uri));t&&(t.dispose(),this._markerDecorations.delete(jR(e.uri))),e.uri.scheme!==il.inMemory&&e.uri.scheme!==il.internal&&e.uri.scheme!==il.vscode||this._markerService&&this._markerService.read({resource:e.uri}).map((e=>e.owner)).forEach((t=>this._markerService.remove(t,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let i=t.map((t=>({range:this._createDecorationRange(e.model,t),options:this._createDecorationOption(t)})));e.update(t,i)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let i=xo.lift(t);if(t.severity!==SR.Hint||this._hasMarkerTag(t,1)||this._hasMarkerTag(t,2)||(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){let t=e.getWordAtPosition(i.getStartPosition());if(t)i=new xo(i.startLineNumber,t.startColumn,i.endLineNumber,t.endColumn);else{let t=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);1===t||(i=i.endColumn>=t?new xo(i.startLineNumber,t-1,i.endLineNumber,t):new xo(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn+1))}}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&i.startLineNumber===i.endLineNumber){let n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new xo(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,n,r,s;switch(e.severity){case SR.Hint:t=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",n=0;break;case SR.Warning:t="squiggly-warning",i=hv(tk),n=20,s={color:hv(vx),position:fu.Inline};break;case SR.Info:t="squiggly-info",i=hv(ik),n=10;break;case SR.Error:default:t="squiggly-error",i=hv(ek),n=30,s={color:hv(bx),position:fu.Inline}}return e.tags&&(-1!==e.tags.indexOf(1)&&(r="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:du.Right},minimap:s,zIndex:n,inlineClassName:r}}_hasMarkerTag(e,t){return!!e.tags&&e.tags.indexOf(t)>=0}};GR=zR([HR(0,$u),HR(1,xR)],GR);var KR=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},$R=function(e,t){return function(i,n){t(i,n,e)}};let qR=class extends as{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new ms,this._accessibilityModeEnabledContext=ML.bindTo(this._contextKeyService);const i=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("editor.accessibilitySupport")&&(i(),this._onDidChangeScreenReaderOptimized.fire())}))),i(),this.onDidChangeScreenReaderOptimized((()=>i()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return"on"===e||"auto"===e&&2===this._accessibilitySupport}getAccessibilitySupport(){return this._accessibilitySupport}};qR=KR([$R(0,nv),$R(1,_m)],qR);var ZR=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class YR{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return ZR(this,void 0,void 0,(function*(){if(t)return void this.mapTextToType.set(t,e);try{return yield navigator.clipboard.writeText(e)}catch(e){console.error(e)}const i=document.activeElement,n=document.body.appendChild(Ql("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),document.execCommand("copy"),i instanceof HTMLElement&&i.focus(),document.body.removeChild(n)}))}readText(e){return ZR(this,void 0,void 0,(function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(e){return console.error(e),""}}))}readFindText(){return ZR(this,void 0,void 0,(function*(){return this.findText}))}writeFindText(e){return ZR(this,void 0,void 0,(function*(){this.findText=e}))}}var XR=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},QR=function(e,t){return function(i,n){t(i,n,e)}},JR=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const eB=!1;function tB(e){return e.scheme===il.file?e.fsPath:e.path}let iB=0;class nB{constructor(e,t,i,n,r,s,o){this.id=++iB,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=r,this.sourceId=s,this.sourceOrder=o,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class rB{constructor(e,t){this.resourceLabel=e,this.reason=t}}class sB{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements){(0===i.reason?e:t).push(i.resourceLabel)}let i=[];return e.length>0&&i.push(On(0,"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(On(0,"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join("\n")}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class oB{constructor(e,t,i,n,r,s,o){this.id=++iB,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=r,this.sourceId=s,this.sourceOrder=o,this.removedResources=null,this.invalidatedResources=null}canSplit(){return"function"==typeof this.actual.split}removeResource(e,t,i){this.removedResources||(this.removedResources=new sB),this.removedResources.has(t)||this.removedResources.set(t,new rB(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),0===this.invalidatedResources.size&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new sB),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new rB(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class aB{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join("\n")}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){1===e.type?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const e of this._future)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let e=0,i=this._past.length;e<i;e++)t.push(this._past[e].id);for(let e=this._future.length-1;e>=0;e--)t.push(this._future[e].id);return new lO(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,n=0,r=-1;for(let s=0,o=this._past.length;s<o;s++,n++){const o=this._past[s];i&&(n>=t||o.id!==e.elements[n])&&(i=!1,r=0),i||1!==o.type||o.removeResource(this.resourceLabel,this.strResource,0)}let s=-1;for(let r=this._future.length-1;r>=0;r--,n++){const o=this._future[r];i&&(n>=t||o.id!==e.elements[n])&&(i=!1,s=r),i||1!==o.type||o.removeResource(this.resourceLabel,this.strResource,0)}-1!==r&&(this._past=this._past.slice(0,r)),-1!==s&&(this._future=this._future.slice(s+1)),this.versionId++}getElements(){const e=[],t=[];for(const t of this._past)e.push(t.actual);for(const e of this._future)t.push(e.actual);return{past:e,future:t}}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class lB{constructor(e){this.editStacks=e,this._versionIds=[];for(let e=0,t=this.editStacks.length;e<t;e++)this._versionIds[e]=this.editStacks[e].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const cB=new aB("","");cB.locked=!0;let hB=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const e of this._editStacks)t.push(e[1].toString());console.log(t.join("\n"))}pushElement(e,t=cO.None,i=hO.None){if(0===e.type){const n=tB(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new nB(e,n,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const n=new Set,r=[],s=[];for(const t of e.resources){const e=tB(t),i=this.getUriComparisonKey(t);n.has(i)||(n.add(i),r.push(e),s.push(i))}1===r.length?this._pushElement(new nB(e,r[0],s[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new oB(e,r,s,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const i=e.resourceLabels[t],n=e.strResources[t];let r;this._editStacks.has(n)?r=this._editStacks.get(n):(r=new aB(i,n),this._editStacks.set(n,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const e=this._editStacks.get(t);if(e.hasFutureElements())return null;const i=e.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const e of i){const t=tB(e.resource),i=this.getUriComparisonKey(e.resource),r=new nB(e,t,i,0,0,0,0);n.set(r.strResource,r)}for(const i of e.strResources){if(t&&t.has(i))continue;this._editStacks.get(i).splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const e of i){const t=tB(e.resource),i=this.getUriComparisonKey(e.resource),r=new nB(e,t,i,0,0,0,0);n.set(r.strResource,r)}for(const i of e.strResources){if(t&&t.has(i))continue;this._editStacks.get(i).splitFutureWorkspaceElement(e,n)}}removeElements(e){const t="string"==typeof e?e:this.getUriComparisonKey(e);if(this._editStacks.has(t)){this._editStacks.get(t).dispose(),this._editStacks.delete(t)}}setElementsValidFlag(e,t,i){const n=this.getUriComparisonKey(e);if(this._editStacks.has(n)){this._editStacks.get(n).setElementsValidFlag(t,i)}}createSnapshot(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).createSnapshot(e)}return new lO(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),i.hasPastElements()||i.hasFutureElements()||(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).getElements()}return{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const s=r.getClosestPastElement();s&&(s.sourceId===e&&(!t||s.sourceOrder>t.sourceOrder)&&(t=s,i=n))}return[t,i]}canUndo(e){if(e instanceof hO){const[,t]=this._findClosestUndoElementWithSource(e.id);return!!t}const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).hasPastElements()}return!1}_onError(e,t){Gr(e);for(const e of t.strResources)this.removeElements(e);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,r){const s=this._acquireLocks(i);let o;try{o=t()}catch(t){return s(),n.dispose(),this._onError(t,e)}return o?o.then((()=>(s(),n.dispose(),r())),(t=>(s(),n.dispose(),this._onError(t,e)))):(s(),n.dispose(),r())}_invokeWorkspacePrepare(e){return JR(this,void 0,void 0,(function*(){if(void 0===e.actual.prepareUndoRedo)return as.None;const t=e.actual.prepareUndoRedo();return void 0===t?as.None:t}))}_invokeResourcePrepare(e,t){if(1!==e.actual.type||void 0===e.actual.prepareUndoRedo)return t(as.None);const i=e.actual.prepareUndoRedo();return i?"function"==typeof(n=i).dispose&&0===n.dispose.length?t(i):i.then((e=>t(e))):t(as.None);var n}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||cB);return new lB(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new uB(this._undo(e,0,!0));for(const e of t.strResources)this.removeElements(e);return this._notificationService.warn(n),new uB}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,On(0,"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,On(0,"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const e of i.editStacks)e.getClosestPastElement()!==t&&r.push(e.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,On(0,"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const s=[];for(const e of i.editStacks)e.locked&&s.push(e.resourceLabel);return s.length>0?this._tryToSplitAndUndo(e,t,null,On(0,"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,On(0,"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const n=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,n,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,i,n){return JR(this,void 0,void 0,(function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const r=yield this._dialogService.show(Pg.Info,On(0,"Would you like to undo '{0}' across all files?",t.label),[On(0,"Undo in {0} Files",i.editStacks.length),On(0,"Undo this File"),On(0,"Cancel")],{cancelId:2});if(2===r.choice)return;if(1===r.choice)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const s=this._checkWorkspaceUndo(e,t,i,!1);if(s)return s.returnValue;n=!0}let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}const s=this._checkWorkspaceUndo(e,t,i,!0);if(s)return r.dispose(),s.returnValue;for(const e of i.editStacks)e.moveBackward(t);return this._safeInvokeWithLocks(t,(()=>t.actual.undo()),i,r,(()=>this._continueUndoInGroup(t.groupId,n)))}))}_resourceUndo(e,t,i){if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,(()=>t.actual.undo()),new lB([e]),n,(()=>this._continueUndoInGroup(t.groupId,i))))));{const e=On(0,"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const s=r.getClosestPastElement();s&&(s.groupId===e&&(!t||s.groupOrder>t.groupOrder)&&(t=s,i=n))}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);return i?this._undo(i,0,t):void 0}undo(e){if(e instanceof hO){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return"string"==typeof e?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const n=this._editStacks.get(e),r=n.getClosestPastElement();if(!r)return;if(r.groupId){const[e,n]=this._findClosestUndoElementInGroup(r.groupId);if(r!==e&&n)return this._undo(n,t,i)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,r);try{return 1===r.type?this._workspaceUndo(e,r,i):this._resourceUndo(n,r,i)}finally{eB}}_confirmAndContinueUndo(e,t,i){return JR(this,void 0,void 0,(function*(){if(1!==(yield this._dialogService.show(Pg.Info,On(0,"Would you like to undo '{0}'?",i.label),[On(0,"Undo"),On(0,"Cancel")],{cancelId:1})).choice)return this._undo(e,t,!0)}))}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const s=r.getClosestFutureElement();s&&(s.sourceId===e&&(!t||s.sourceOrder<t.sourceOrder)&&(t=s,i=n))}return[t,i]}canRedo(e){if(e instanceof hO){const[,t]=this._findClosestRedoElementWithSource(e.id);return!!t}const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).hasFutureElements()}return!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new uB(this._redo(e));for(const e of t.strResources)this.removeElements(e);return this._notificationService.warn(n),new uB}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,On(0,"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,On(0,"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const e of i.editStacks)e.getClosestFutureElement()!==t&&r.push(e.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,On(0,"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const s=[];for(const e of i.editStacks)e.locked&&s.push(e.resourceLabel);return s.length>0?this._tryToSplitAndRedo(e,t,null,On(0,"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,On(0,"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}_executeWorkspaceRedo(e,t,i){return JR(this,void 0,void 0,(function*(){let n;try{n=yield this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}const r=this._checkWorkspaceRedo(e,t,i,!0);if(r)return n.dispose(),r.returnValue;for(const e of i.editStacks)e.moveForward(t);return this._safeInvokeWithLocks(t,(()=>t.actual.redo()),i,n,(()=>this._continueRedoInGroup(t.groupId)))}))}_resourceRedo(e,t){if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(i=>(e.moveForward(t),this._safeInvokeWithLocks(t,(()=>t.actual.redo()),new lB([e]),i,(()=>this._continueRedoInGroup(t.groupId))))));{const e=On(0,"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const s=r.getClosestFutureElement();s&&(s.groupId===e&&(!t||s.groupOrder<t.groupOrder)&&(t=s,i=n))}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);return t?this._redo(t):void 0}redo(e){if(e instanceof hO){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return"string"==typeof e?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[e,t]=this._findClosestRedoElementInGroup(i.groupId);if(i!==e&&t)return this._redo(t)}try{return 1===i.type?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{eB}}}};hB=XR([QR(0,kI),QR(1,jm)],hB);class uB{constructor(e){this.returnValue=e}}vN(aO,hB);const dB={ctrlCmd:!1,alt:!1};var fB,pB;!function(e){e[e.Blur=1]="Blur",e[e.Gesture=2]="Gesture",e[e.Other=3]="Other"}(fB||(fB={})),function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND",e[e.LAST=3]="LAST"}(pB||(pB={}));const gB=new el((()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}));function mB(e,t,i){const n=e.toLowerCase(),r=t.toLowerCase(),s=function(e,t,i){const n=e.toLowerCase(),r=t.toLowerCase(),s=n.startsWith(i),o=r.startsWith(i);if(s!==o)return s?-1:1;if(s&&o){if(n.length<r.length)return-1;if(n.length>r.length)return 1}return 0}(e,t,i);if(s)return s;const o=n.endsWith(i);if(o!==r.endsWith(i))return o?-1:1;const a=function(e,t,i=!1){const n=e||"",r=t||"",s=gB.value.collator.compare(n,r);return gB.value.collatorIsNumeric&&0===s&&n!==r?n<r?-1:1:s}(n,r);return 0!==a?a:n.localeCompare(r)}const bB=new RegExp(`(\\\\)?\\$\\((${td.iconNameExpression}(?:${td.iconModifierExpression})?)\\)`,"g");function vB(e){const t=new Array;let i,n=0,r=0;for(;null!==(i=bB.exec(e));){r=i.index||0,t.push(e.substring(n,r)),n=(i.index||0)+i[0].length;const[,s,o]=i;t.push(s?`$(${o})`:yB({id:o}))}return n<e.length&&t.push(e.substring(n)),t}function yB(e){const t=Ql("span");return t.classList.add(...td.asClassNameArray(e)),t}class _B{constructor(e,t){this.supportIcons=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t=[],i="",n){e||(e=""),n&&(e=_B.escapeNewLines(e,t)),this.didEverRender&&this.text===e&&this.title===i&&nu(this.highlights,t)||(this.text=e,this.title=i,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const i of this.highlights){if(i.end===i.start)continue;if(t<i.start){const n=this.text.substring(t,i.start);e.push(Ql("span",void 0,...this.supportIcons?vB(n):[n])),t=i.end}const n=this.text.substring(i.start,i.end),r=Ql("span.highlight",void 0,...this.supportIcons?vB(n):[n]);i.extraClasses&&r.classList.add(i.extraClasses),e.push(r),t=i.end}if(t<this.text.length){const i=this.text.substring(t);e.push(Ql("span",void 0,...this.supportIcons?vB(i):[i]))}ql(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,((e,r)=>{n="\r\n"===e?-1:0,r+=i;for(const e of t)e.end<=r||(e.start>=r&&(e.start+=n),e.end>=r&&(e.end+=n));return i+=n,""}))}}var wB=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};function SB(e,t,i){if(!i)return;const n=function(e){if(Nh(e))return()=>wB(this,void 0,void 0,(function*(){return e}));if(Rh(e.markdown))return e.markdown;{const t=e.markdown;return()=>wB(this,void 0,void 0,(function*(){return t}))}}(i);let r,s,o,a,l=!1;const c=new Ma(t,jl.MOUSE_OVER,!0);return c.event((c=>{if(l)return;function h(e){const i=e.type===jl.MOUSE_DOWN;i&&(null==a||a.dispose(),a=void 0),(i||e.fromElement===t)&&(l=!1,r=void 0,o.dispose(!0),u.dispose(),d.dispose())}o=new Cs;const u=new Ma(t,jl.MOUSE_LEAVE,!0);u.event(h);const d=new Ma(t,jl.MOUSE_DOWN,!0);d.event(h),l=!0;const f=new Ma(t,jl.MOUSE_MOVE,!0);f.event((function(e){s=e.x})),setTimeout((()=>wB(this,void 0,void 0,(function*(){var c;if(l&&n&&!r){const h={targetElements:[t],dispose:()=>{}};r={text:On(0,"Loading..."),target:h,hoverPosition:2},a=CB(r,s,e,l);const u=null!==(c=yield n(o.token))&&void 0!==c?c:Nh(i)?void 0:i.markdownNotSupportedFallback;u?(r={text:u,target:h,showPointer:"element"===e.placement,hoverPosition:2},a=CB(r,s,e,l)):a&&(a.dispose(),a=void 0)}f.dispose()}))),e.delay)})),c}function CB(e,t,i,n){if(e&&n)return void 0===t||void 0!==i.placement&&"mouse"!==i.placement||(e.target.x=t+10),i.showHover(e)}class xB{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class kB extends as{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new xB($l(e,Ql(".monaco-icon-label")))),this.labelContainer=$l(this.domNode.element,Ql(".monaco-icon-label-container"));const i=$l(this.labelContainer,Ql("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new xB($l(this.labelContainer,Ql("span.monaco-icon-description-container")))),(null==t?void 0:t.supportHighlights)||(null==t?void 0:t.supportIcons)?this.nameNode=new TB(i,!!t.supportIcons):this.nameNode=new EB(i),(null==t?void 0:t.supportDescriptionHighlights)?this.descriptionNodeFactory=()=>new _B($l(this.descriptionContainer.element,Ql("span.label-description")),!!t.supportIcons):this.descriptionNodeFactory=()=>this._register(new xB($l(this.descriptionContainer.element,Ql("span.label-description")))),this.hoverDelegate=null==t?void 0:t.hoverDelegate}setLabel(e,t,i){const n=["monaco-icon-label"];i&&(i.extraClasses&&n.push(...i.extraClasses),i.italic&&n.push("italic"),i.strikethrough&&n.push("strikethrough")),this.domNode.className=n.join(" "),this.setupHover(this.labelContainer,null==i?void 0:i.title),this.nameNode.setLabel(e,i),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof _B?(this.descriptionNode.set(t||"",i?i.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,null==i?void 0:i.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(null==i?void 0:i.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),t)if(this.hoverDelegate){const i=SB(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}else!function(e,t){Nh(t)?e.title=t:(null==t?void 0:t.markdownNotSupportedFallback)?e.title=t.markdownNotSupportedFallback:e.removeAttribute("title")}(e,t);else e.removeAttribute("title")}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class EB{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label!==e||!nu(this.options,t))if(this.label=e,this.options=t,"string"==typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=$l(this.container,Ql("a.label-name",{id:null==t?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const n=e[i],r=(null==t?void 0:t.domId)&&`${null==t?void 0:t.domId}_${i}`;$l(this.container,Ql("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&$l(this.container,Ql("span.label-separator",void 0,(null==t?void 0:t.separator)||"/"))}}}}class TB{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label!==e||!nu(this.options,t))if(this.label=e,this.options=t,"string"==typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new _B($l(this.container,Ql("a.label-name",{id:null==t?void 0:t.domId})),this.supportIcons)),this.singleLabel.set(e,null==t?void 0:t.matches,void 0,null==t?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(null==t?void 0:t.separator)||"/",n=function(e,t,i){if(!i)return;let n=0;return e.map((e=>{const r={start:n,end:n+e.length},s=i.map((e=>pD.intersect(r,e))).filter((e=>!pD.isEmpty(e))).map((({start:e,end:t})=>({start:e-n,end:t-n})));return n=r.end+t.length,s}))}(e,i,null==t?void 0:t.matches);for(let r=0;r<e.length;r++){const s=e[r],o=n?n[r]:void 0,a=Ql("a.label-name",{id:(null==t?void 0:t.domId)&&`${null==t?void 0:t.domId}_${r}`,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});new _B($l(this.container,a),this.supportIcons).set(s,o,void 0,null==t?void 0:t.labelEscapeNewLines),r<e.length-1&&$l(a,Ql("span.label-separator",void 0,i))}}}}class LB{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}new LB("id#");const NB={},MB=new LB("quick-input-button-icon-");function OB(e){if(!e)return;let t;const i=e.dark.toString();return NB[i]?t=NB[i]:(t=MB.nextId(),Vl(`.${t}`,`background-image: ${rc(e.light||e.dark)}`),Vl(`.vs-dark .${t}, .hc-black .${t}`,`background-image: ${rc(e.dark)}`),NB[i]=t),t}const DB=Ql;class IB{constructor(e,t,i){this.os=t,this.keyElements=new Set,this.options=i||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=$l(e,DB(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&IB.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&($l(this.domNode,DB("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){ol(this.domNode),this.keyElements.clear()}renderPart(e,t,i){const n=Wm.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,Boolean(null==i?void 0:i.ctrlKey),n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,Boolean(null==i?void 0:i.shiftKey),n.separator),t.altKey&&this.renderKey(e,n.altKey,Boolean(null==i?void 0:i.altKey),n.separator),t.metaKey&&this.renderKey(e,n.metaKey,Boolean(null==i?void 0:i.metaKey),n.separator);const r=t.keyLabel;r&&this.renderKey(e,r,Boolean(null==i?void 0:i.keyCode),"")}renderKey(e,t,i,n){$l(e,this.createKeyElement(t,i?".highlight":"")),n&&$l(e,DB("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){$l(e,this.createKeyElement(On(0,"Unbound")))}createKeyElement(e,t=""){const i=DB("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),i}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=null===(e=this.labelBackground)||void 0===e?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t||!!e&&!!t&&nu(e.firstPart,t.firstPart)&&nu(e.chordPart,t.chordPart)}}var AB=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},PB=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const RB=Ql;class BB{constructor(e){this.hidden=!1,this._onChecked=new ms,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class FB{get templateId(){return FB.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=$l(e,RB(".quick-input-list-entry"));const i=$l(t.entry,RB("label.quick-input-list-label"));t.toDisposeTemplate.push(ul(i,jl.CLICK,(e=>{t.checkbox.offsetParent||e.preventDefault()}))),t.checkbox=$l(i,RB("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(ul(t.checkbox,jl.CHANGE,(e=>{t.element.checked=t.checkbox.checked})));const n=$l(i,RB(".quick-input-list-rows")),r=$l(n,RB(".quick-input-list-row")),s=$l(n,RB(".quick-input-list-row"));t.label=new kB(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const o=$l(r,RB(".quick-input-list-entry-keybinding"));t.keybinding=new IB(o,rr);const a=$l(s,RB(".quick-input-list-label-meta"));return t.detail=new _B(a,!0),t.separator=$l(t.entry,RB(".quick-input-list-separator")),t.actionBar=new NN(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,i){i.toDisposeElement=ns(i.toDisposeElement),i.element=e,i.checkbox.checked=e.checked,i.toDisposeElement.push(e.onChecked((e=>i.checkbox.checked=e)));const{labelHighlights:n,descriptionHighlights:r,detailHighlights:s}=e,o=Object.create(null);o.matches=n||[],o.descriptionTitle=e.saneDescription,o.descriptionMatches=r||[],o.extraClasses=e.item.iconClasses,o.italic=e.item.italic,o.strikethrough=e.item.strikethrough,i.label.setLabel(e.saneLabel,e.saneDescription,o),i.keybinding.set(e.item.keybinding),i.detail.set(e.saneDetail,s),e.separator&&e.separator.label?(i.separator.textContent=e.separator.label,i.separator.style.display=""):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),i.actionBar.clear();const a=e.item.buttons;a&&a.length?(i.actionBar.push(a.map(((t,i)=>{let n=t.iconClass||(t.iconPath?OB(t.iconPath):void 0);t.alwaysVisible&&(n=n?`${n} always-visible`:"always-visible");const r=new Mb(`id-${i}`,"",n,!0,(()=>PB(this,void 0,void 0,(function*(){e.fireButtonTriggered({button:t,item:e.item})}))));return r.tooltip=t.tooltip||"",r})),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){i.toDisposeElement=ns(i.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=ns(e.toDisposeElement),e.toDisposeTemplate=ns(e.toDisposeTemplate)}}FB.ID="listelement";class WB{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return FB.ID}}var VB;!function(e){e[e.First=1]="First",e[e.Second=2]="Second",e[e.Last=3]="Last",e[e.Next=4]="Next",e[e.Previous=5]="Previous",e[e.NextPage=6]="NextPage",e[e.PreviousPage=7]="PreviousPage"}(VB||(VB={}));class zB{constructor(e,t,i){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new ms,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new ms,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new ms,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new ms,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new ms,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new ms,this.onKeyDown=this._onKeyDown.event,this._onLeave=new ms,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=$l(this.parent,RB(".quick-input-list"));const n=new WB,r=new HB;this.list=i.createList("QuickInput",this.container,n,[new FB],{identityProvider:{getId:e=>e.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown((e=>{const t=new Ra(e);switch(t.keyCode){case 10:this.toggleCheckbox();break;case 31:(Xn?e.metaKey:e.ctrlKey)&&this.list.setFocus(_p(this.list.length));break;case 16:const t=this.list.getFocus();1===t.length&&0===t[0]&&this._onLeave.fire();break;case 18:const i=this.list.getFocus();1===i.length&&i[0]===this.list.length-1&&this._onLeave.fire()}this._onKeyDown.fire(t)}))),this.disposables.push(this.list.onMouseDown((e=>{2!==e.browserEvent.button&&e.browserEvent.preventDefault()}))),this.disposables.push(cl(this.container,jl.CLICK,(e=>{(e.x||e.y)&&this._onLeave.fire()}))),this.disposables.push(this.list.onMouseMiddleClick((e=>{this._onLeave.fire()}))),this.disposables.push(this.list.onContextMenu((e=>{"number"==typeof e.index&&(e.browserEvent.preventDefault(),this.list.setSelection([e.index]))}))),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return ps.map(this.list.onDidChangeFocus,(e=>e.elements.map((e=>e.item))))}get onDidChangeSelection(){return ps.map(this.list.onDidChangeSelection,(e=>({items:e.elements.map((e=>e.item)),event:e.browserEvent})))}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let i=0,n=e.length;i<n;i++){const n=e[i];if(!n.hidden){if(!n.checked)return!1;t=!0}}return t}getCheckedCount(){let e=0;const t=this.elements;for(let i=0,n=t.length;i<n;i++)t[i].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let i=0,n=t.length;i<n;i++)t[i].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach((t=>{t.hidden||(t.checked=e)}))}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=ns(this.elementDisposables);const t=e=>this.fireButtonTriggered(e);this.inputElements=e,this.elements=e.reduce(((i,n,r)=>{var s,o,a;if("separator"!==n.type){const l=r&&e[r-1],c=n.label&&n.label.replace(/\r?\n/g," "),h=n.meta&&n.meta.replace(/\r?\n/g," "),u=n.description&&n.description.replace(/\r?\n/g," "),d=n.detail&&n.detail.replace(/\r?\n/g," "),f=n.ariaLabel||[c,u,d].map((e=>{return(t=e)?t.replace(/\$\((.*?)\)/g,((e,t)=>` ${t} `)).trim():"";var t})).filter((e=>!!e)).join(", ");i.push(new BB({index:r,item:n,saneLabel:c,saneMeta:h,saneAriaLabel:f,saneDescription:u,saneDetail:d,labelHighlights:null===(s=n.highlights)||void 0===s?void 0:s.label,descriptionHighlights:null===(o=n.highlights)||void 0===o?void 0:o.description,detailHighlights:null===(a=n.highlights)||void 0===a?void 0:a.detail,checked:!1,separator:l&&"separator"===l.type?l:void 0,fireButtonTriggered:t}))}return i}),[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map((e=>e.onChecked((()=>this.fireCheckedEvents()))))),this.elementsToIndexes=this.elements.reduce(((e,t,i)=>(e.set(t.item,i),e)),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map((e=>e.item))}setFocusedElements(e){if(this.list.setFocus(e.filter((e=>this.elementsToIndexes.has(e))).map((e=>this.elementsToIndexes.get(e)))),e.length>0){const e=this.list.getFocus()[0];"number"==typeof e&&this.list.reveal(e)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter((e=>this.elementsToIndexes.has(e))).map((e=>this.elementsToIndexes.get(e))))}getCheckedElements(){return this.elements.filter((e=>e.checked)).map((e=>e.item))}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const i of e)t.add(i);for(const e of this.elements)e.checked=t.has(e.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===VB.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=VB.First),e===VB.Previous&&0===this.list.getFocus()[0]&&(e=VB.Last),e===VB.Second&&this.list.length<2&&(e=VB.First),e){case VB.First:this.list.focusFirst();break;case VB.Second:this.list.focusNth(1);break;case VB.Last:this.list.focusLast();break;case VB.Next:this.list.focusNext();break;case VB.Previous:this.list.focusPrevious();break;case VB.NextPage:this.list.focusNextPage();break;case VB.PreviousPage:this.list.focusPreviousPage()}const t=this.list.getFocus()[0];"number"==typeof t&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${44*Math.floor(e/44)}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if((e=e.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let t;this.elements.forEach((i=>{const n=this.matchOnLabel?Vh(tI(e,eI(i.saneLabel))):void 0,r=this.matchOnDescription?Vh(tI(e,eI(i.saneDescription||""))):void 0,s=this.matchOnDetail?Vh(tI(e,eI(i.saneDetail||""))):void 0,o=this.matchOnMeta?Vh(tI(e,eI(i.saneMeta||""))):void 0;if(n||r||s||o?(i.labelHighlights=n,i.descriptionHighlights=r,i.detailHighlights=s,i.hidden=!1):(i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!i.item.alwaysShow),i.separator=void 0,!this.sortByLabel){const e=i.index&&this.inputElements[i.index-1];t=e&&"separator"===e.type?e:t,t&&!i.hidden&&(i.separator=t,t=void 0)}}))}else this.elements.forEach((e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;const t=e.index&&this.inputElements[e.index-1];e.separator=t&&"separator"===t.type?t:void 0}));const t=this.elements.filter((e=>!e.hidden));if(this.sortByLabel&&e){const i=e.toLowerCase();t.sort(((e,t)=>function(e,t,i){const n=e.labelHighlights||[],r=t.labelHighlights||[];if(n.length&&!r.length)return-1;if(!n.length&&r.length)return 1;if(0===n.length&&0===r.length)return 0;return mB(e.saneLabel,t.saneLabel,i)}(e,t,i)))}return this.elementsToIndexes=t.reduce(((e,t,i)=>(e.set(t.item,i),e)),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const i of e)i.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return"none"!==this.container.style.display}dispose(){this.elementDisposables=ns(this.elementDisposables),this.disposables=ns(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}AB([Yv],zB.prototype,"onDidChangeFocus",null),AB([Yv],zB.prototype,"onDidChangeSelection",null);class HB{getWidgetAriaLabel(){return On(0,"Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}function jB(e,t={}){const i=UB(t);return KB(i,function(e,t){const i={type:1,children:[]};let n=0,r=i;const s=[],o=new GB(e);for(;!o.eos();){let e=o.next();const i="\\"===e&&0!==qB(o.peek(),t);if(i&&(e=o.next()),!i&&$B(e,t)&&e===o.peek()){o.advance(),2===r.type&&(r=s.pop());const i=qB(e,t);if(r.type===i||5===r.type&&6===i)r=s.pop();else{const e={type:i,children:[]};5===i&&(e.index=n,n++),r.children.push(e),s.push(r),r=e}}else if("\n"===e)2===r.type&&(r=s.pop()),r.children.push({type:8});else if(2!==r.type){const t={type:2,content:e};r.children.push(t),s.push(r),r=t}else r.content+=e}2===r.type&&(r=s.pop());s.length;return i}(e,!!t.renderCodeSegements),t.actionHandler,t.renderCodeSegements),i}function UB(e){const t=e.inline?"span":"div",i=document.createElement(t);return e.className&&(i.className=e.className),i}class GB{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function KB(e,t,i,n){let r;if(2===t.type)r=document.createTextNode(t.content||"");else if(3===t.type)r=document.createElement("b");else if(4===t.type)r=document.createElement("i");else if(7===t.type&&n)r=document.createElement("code");else if(5===t.type&&i){const e=document.createElement("a");e.href="#",i.disposeables.add(ul(e,"click",(e=>{i.callback(String(t.index),e)}))),r=e}else 8===t.type?r=document.createElement("br"):1===t.type&&(r=e);r&&e!==r&&e.appendChild(r),r&&Array.isArray(t.children)&&t.children.forEach((e=>{KB(r,e,i,n)}))}function $B(e,t){return 0!==qB(e,t)}function qB(e,t){switch(e){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return t?7:0;default:return 0}}const ZB=Ql,YB={inputBackground:vw.fromHex("#3C3C3C"),inputForeground:vw.fromHex("#CCCCCC"),inputValidationInfoBorder:vw.fromHex("#55AAFF"),inputValidationInfoBackground:vw.fromHex("#063B49"),inputValidationWarningBorder:vw.fromHex("#B89500"),inputValidationWarningBackground:vw.fromHex("#352A05"),inputValidationErrorBorder:vw.fromHex("#BE1100"),inputValidationErrorBackground:vw.fromHex("#5A1D1D")};class XB extends aE{constructor(e,t,i){var n;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new ms),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new ms),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i||Object.create(null),iu(this.options,YB,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=null!==(n=this.options.tooltip)&&void 0!==n?n:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=$l(e,ZB(".monaco-inputbox.idle"));let r=this.options.flexibleHeight?"textarea":"input",s=$l(this.element,ZB(".ibwrapper"));if(this.input=$l(s,ZB(r+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,(()=>this.element.classList.add("synthetic-focus"))),this.onblur(this.input,(()=>this.element.classList.remove("synthetic-focus"))),this.options.flexibleHeight){this.maxHeight="number"==typeof this.options.flexibleMaxHeight?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=$l(s,ZB("div.mirror")),this.mirror.innerText="",this.scrollableElement=new TE(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),$l(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll((e=>this.input.scrollTop=e.scrollTop)));const t=ps.filter(Na(document,"selectionchange"),(()=>{const e=document.getSelection();return(null==e?void 0:e.anchorNode)===s}));this._register(t(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,(()=>this.onValueChange())),this.onblur(this.input,(()=>this.onBlur())),this.onfocus(this.input,(()=>this.onFocus())),this.ignoreGesture(this.input),setTimeout((()=>this.updateMirror()),0),this.options.actions&&(this.actionbar=this._register(new NN(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage()}onFocus(){this._showMessage()}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return"number"==typeof this.cachedHeight?this.cachedHeight:Nl(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return El(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){t=(parseFloat(this.mirror.style.paddingLeft||"")||0)+(parseFloat(this.mirror.style.paddingRight||"")||0)}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.options.flexibleHeight&&this.options.flexibleWidth?this.input.style.width=`calc(100% - ${e}px)`:this.input.style.paddingRight=e+"px",this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if("number"!=typeof this.cachedContentHeight||"number"!=typeof this.cachedHeight||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=i.border?`1px solid ${i.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),null==e?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t,i=()=>e.style.width=El(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:t=>{if(!this.message)return null;e=$l(t,ZB(".monaco-inputbox-container")),i();const n={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?jB(this.message.content,n):function(e,t={}){const i=UB(t);return i.textContent=e,i}(this.message.content,n);r.classList.add(this.classForType(this.message.type));const s=this.stylesForType(this.message.type);return r.style.backgroundColor=s.background?s.background.toString():"",r.style.color=s.foreground?s.foreground.toString():"",r.style.border=s.border?`1px solid ${s.border}`:"",$l(e,r),null},onHide:()=>{this.state="closed"},layout:i}),t=3===this.message.type?On(0,"Error: {0}",this.message.content):2===this.message.type?On(0,"Warning: {0}",this.message.content):On(0,"Info: {0}",this.message.content),Eb(t),this.state="open"}_hideMessage(){this.contextViewProvider&&("open"===this.state&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,t=10===e.charCodeAt(e.length-1)?" ":"";e+t?this.mirror.textContent=e+t:this.mirror.innerText="",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",i=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=i?"1px":"",this.element.style.borderStyle=i?"solid":"",this.element.style.borderColor=i}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=Nl(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,r=t.value;null!==i&&null!==n&&(this.value=r.substr(0,i)+e+r.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}const QB=Ql;class JB extends as{constructor(e){super(),this.parent=e,this.onKeyDown=e=>cl(this.inputBox.inputElement,jl.KEY_DOWN,(t=>{e(new Ra(t))})),this.onMouseDown=e=>cl(this.inputBox.inputElement,jl.MOUSE_DOWN,(t=>{e(new za(t))})),this.onDidChange=e=>this.inputBox.onDidChange(e),this.container=$l(this.parent,QB(".quick-input-box")),this.inputBox=this._register(new XB(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return"password"===this.inputBox.inputElement.type}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Pg.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Pg.Info?1:e===Pg.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Pg.Info?1:e===Pg.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}const eF={badgeBackground:vw.fromHex("#4D4D4D"),badgeForeground:vw.fromHex("#FFFFFF")};class tF{constructor(e,t){this.count=0,this.options=t||Object.create(null),iu(this.options,eF,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=$l(e,Ql(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=lc(this.countFormat,this.count),this.element.title=lc(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",i=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=i?"1px":"",this.element.style.borderStyle=i?"solid":"",this.element.style.borderColor=i}}}const iF="done",nF="active",rF="infinite",sF="discrete",oF={progressBarBackground:vw.fromHex("#0E70C0")};class aF extends as{constructor(e,t){super(),this.options=t||Object.create(null),iu(this.options,oF,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new Qa((()=>Jl(this.element)),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(nF,rF,sF),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(iF),this.element.classList.contains(rF)?(this.bit.style.opacity="0",e?setTimeout((()=>this.off()),200):this.off()):(this.bit.style.width="inherit",e?setTimeout((()=>this.off()),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(sF,iF),this.element.classList.add(nF,rF),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}const lF={buttonBackground:vw.fromHex("#0E639C"),buttonHoverBackground:vw.fromHex("#006BB3"),buttonForeground:vw.white};class cF extends as{constructor(e,t){super(),this._onDidClick=this._register(new ms),this.options=t||Object.create(null),iu(this.options,lF,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(Jv.addTarget(this._element)),[jl.CLICK,Xv.Tap].forEach((e=>{this._register(cl(this._element,e,(e=>{this.enabled?this._onDidClick.fire(e):Ul(e)})))})),this._register(cl(this._element,jl.KEY_DOWN,(e=>{const t=new Ra(e);let i=!1;this.enabled&&(t.equals(3)||t.equals(10))?(this._onDidClick.fire(e),i=!0):t.equals(9)&&(this._element.blur(),i=!0),i&&Ul(t,!0)}))),this._register(cl(this._element,jl.MOUSE_OVER,(e=>{this._element.classList.contains("disabled")||this.setHoverBackground()}))),this._register(cl(this._element,jl.MOUSE_OUT,(e=>{this.applyStyles()}))),this.focusTracker=this._register(Kl(this._element)),this._register(this.focusTracker.onDidFocus((()=>this.setHoverBackground()))),this._register(this.focusTracker.onDidBlur((()=>this.applyStyles()))),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;e=this.options.secondary?this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const i=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=i?"1px":"",this._element.style.borderStyle=i?"solid":"",this._element.style.borderColor=i}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?ql(this._element,...vB(e)):this._element.textContent=e,"string"==typeof this.options.title?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}var hF=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const uF=Ql,dF={iconClass:Ju("quick-input-back",ed.arrowLeft).classNames,tooltip:On(0,"Back"),handle:-1};class fF extends as{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=fF.noPromptMessage,this._severity=Pg.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new ms),this.onDidHideEmitter=this._register(new ms),this.onDisposeEmitter=this._register(new ms),this.visibleDisposables=this._register(new os),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){this._ignoreFocusOut=e,this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton((e=>{-1!==this.buttons.indexOf(e)&&this.onDidTriggerButtonEmitter.fire(e)}))),this.ui.show(this),this.visible=!0,this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=fB.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:e||"&nbsp;"===this.ui.title.innerHTML||(this.ui.title.innerText=";");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Ya,this.busyDelay.setIfNotSet((()=>{this.visible&&this.ui.progressBar.infinite()}),800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const e=this.buttons.filter((e=>e===dF));this.ui.leftActionBar.push(e.map(((e,t)=>{const i=new Mb(`id-${t}`,"",e.iconClass||OB(e.iconPath),!0,(()=>hF(this,void 0,void 0,(function*(){this.onDidTriggerButtonEmitter.fire(e)}))));return i.tooltip=e.tooltip||"",i})),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const t=this.buttons.filter((e=>e!==dF));this.ui.rightActionBar.push(t.map(((e,t)=>{const i=new Mb(`id-${t}`,"",e.iconClass||OB(e.iconPath),!0,(()=>hF(this,void 0,void 0,(function*(){this.onDidTriggerButtonEmitter.fire(e)}))));return i.tooltip=e.tooltip||"",i})),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,ql(this.ui.message,...vB(i))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?On(0,"{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Pg.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}fF.noPromptMessage=On(0,"Press 'Enter' to confirm your input or 'Escape' to cancel");class pF extends fF{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new ms),this.onWillAcceptEmitter=this._register(new ms),this.onDidAcceptEmitter=this._register(new ms),this.onDidCustomEmitter=this._register(new ms),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._itemActivation=this.ui.isScreenReaderOptimized()?pB.NONE:pB.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new ms),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new ms),this.onDidTriggerItemButtonEmitter=this._register(new ms),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?dB:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(VB.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((e=>{if(e===this.value)return;this._value=e;this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)}))),this.visibleDisposables.add(this.ui.inputBox.onMouseDown((e=>{this.autoFocusOnList||this.ui.list.clearFocus()}))),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown((e=>{switch(e.keyCode){case 18:this.ui.list.focus(VB.Next),this.canSelectMany&&this.ui.list.domFocus(),Ul(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(VB.Previous):this.ui.list.focus(VB.Last),this.canSelectMany&&this.ui.list.domFocus(),Ul(e,!0);break;case 12:this.ui.list.focus(VB.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Ul(e,!0);break;case 11:this.ui.list.focus(VB.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Ul(e,!0);break;case 17:if(!this._canAcceptInBackground)return;if(!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey||(this.ui.list.focus(VB.First),Ul(e,!0));break;case 13:!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey||(this.ui.list.focus(VB.Last),Ul(e,!0))}}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>{!this.canSelectMany&&this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)}))),this.visibleDisposables.add(this.ui.onDidCustom((()=>{this.onDidCustomEmitter.fire()}))),this.visibleDisposables.add(this.ui.list.onDidChangeFocus((e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&gp(e,this._activeItems,((e,t)=>e===t))||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))}))),this.visibleDisposables.add(this.ui.list.onDidChangeSelection((({items:e,event:t})=>{this.canSelectMany?e.length&&this.ui.list.setSelectedElements([]):this.selectedItemsToConfirm!==this._selectedItems&&gp(e,this._selectedItems,((e,t)=>e===t))||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&1===t.button))}))),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&gp(e,this._selectedItems,((e,t)=>e===t))||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))}))),this.visibleDisposables.add(this.ui.list.onButtonTriggered((e=>this.onDidTriggerItemButtonEmitter.fire(e)))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return cl(this.ui.container,jl.KEY_UP,(e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Ra(e),i=t.keyCode;this._quickNavigate.keybindings.some((e=>{const[n,r]=e.getParts();return!r&&(n.shiftKey&&4===i?!(t.ctrlKey||t.altKey||t.metaKey):!(!n.altKey||6!==i)||(!(!n.ctrlKey||5!==i)||!(!n.metaKey||57!==i)))}))&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)}))}update(){if(!this.visible)return;const e=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",e&&!this.description);const t={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!e,progressBar:!e,visibleCount:!0,count:this.canSelectMany,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(t),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const i=this.ariaLabel||this.placeholder||pF.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==i&&(this.ui.inputBox.ariaLabel=i),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case pB.NONE:this._itemActivation=pB.FIRST;break;case pB.SECOND:this.ui.list.focus(VB.Second),this._itemActivation=pB.FIRST;break;case pB.LAST:this.ui.list.focus(VB.Last),this._itemActivation=pB.FIRST;break;default:this.trySelectFirst()}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),t.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(VB.First))}}pF.DEFAULT_ARIA_LABEL=On(0,"Type to narrow down results.");class gF extends as{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new ms),this.onDidCustomEmitter=this._register(new ms),this.onDidTriggerButtonEmitter=this._register(new ms),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new ms),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new ms),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};this._register(cl(window,jl.KEY_DOWN,e,!0)),this._register(cl(window,jl.KEY_UP,e,!0)),this._register(cl(window,jl.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=$l(this.parentElement,uF(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=Bl(e),i=$l(e,uF(".quick-input-titlebar")),n=this._register(new NN(i));n.domNode.classList.add("quick-input-left-action-bar");const r=$l(i,uF(".quick-input-title")),s=this._register(new NN(i));s.domNode.classList.add("quick-input-right-action-bar");const o=$l(e,uF(".quick-input-description")),a=$l(e,uF(".quick-input-header")),l=$l(a,uF("input.quick-input-check-all"));l.type="checkbox",this._register(ul(l,jl.CHANGE,(e=>{const t=l.checked;S.setAllVisibleChecked(t)}))),this._register(cl(l,jl.CLICK,(e=>{(e.x||e.y)&&d.setFocus()})));const c=$l(a,uF(".quick-input-description")),h=$l(a,uF(".quick-input-and-message")),u=$l(h,uF(".quick-input-filter")),d=this._register(new JB(u));d.setAttribute("aria-describedby",`${this.idPrefix}message`);const f=$l(u,uF(".quick-input-visible-count"));f.setAttribute("aria-live","polite"),f.setAttribute("aria-atomic","true");const p=new tF(f,{countFormat:On(0,"{0} Results")}),g=$l(u,uF(".quick-input-count"));g.setAttribute("aria-live","polite");const m=new tF(g,{countFormat:On(0,"{0} Selected")}),b=$l(a,uF(".quick-input-action")),v=new cF(b);v.label=On(0,"OK"),this._register(v.onDidClick((e=>{this.onDidAcceptEmitter.fire()})));const y=$l(a,uF(".quick-input-action")),_=new cF(y);_.label=On(0,"Custom"),this._register(_.onDidClick((e=>{this.onDidCustomEmitter.fire()})));const w=$l(h,uF(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new zB(e,this.idPrefix+"list",this.options));this._register(S.onChangedAllVisibleChecked((e=>{l.checked=e}))),this._register(S.onChangedVisibleCount((e=>{p.setCount(e)}))),this._register(S.onChangedCheckedCount((e=>{m.setCount(e)}))),this._register(S.onLeave((()=>{setTimeout((()=>{d.setFocus(),this.controller instanceof pF&&this.controller.canSelectMany&&S.clearFocus()}),0)}))),this._register(S.onDidChangeFocus((()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")})));const C=new aF(e);C.getContainer().classList.add("quick-input-progress");const x=Kl(e);return this._register(x),this._register(cl(e,jl.FOCUS,(e=>{this.previousFocusElement=e.relatedTarget instanceof HTMLElement?e.relatedTarget:void 0}),!0)),this._register(x.onDidBlur((()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide(fB.Blur),this.previousFocusElement=void 0}))),this._register(cl(e,jl.FOCUS,(e=>{d.setFocus()}))),this._register(cl(e,jl.KEY_DOWN,(t=>{const i=new Ra(t);switch(i.keyCode){case 3:Ul(t,!0),this.onDidAcceptEmitter.fire();break;case 9:Ul(t,!0),this.hide(fB.Gesture);break;case 2:if(!i.altKey&&!i.ctrlKey&&!i.metaKey){const n=[".action-label.codicon"];e.classList.contains("show-checkboxes")?n.push("input"):n.push("input[type=text]"),this.getUI().list.isDisplayed()&&n.push(".monaco-list");const r=e.querySelectorAll(n.join(", "));i.shiftKey&&i.target===r[0]?(Ul(t,!0),r[r.length-1].focus()):i.shiftKey||i.target!==r[r.length-1]||(Ul(t,!0),r[0].focus())}}}))),this.ui={container:e,styleSheet:t,leftActionBar:n,titleBar:i,title:r,description1:o,description2:c,rightActionBar:s,checkAll:l,filterContainer:u,inputBox:d,visibleCountContainer:f,visibleCount:p,countContainer:g,count:m,okContainer:b,ok:v,message:w,customButtonContainer:y,customButton:_,list:S,progressBar:C,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setComboboxAccessibility:e=>this.setComboboxAccessibility(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e)},this.updateStyles(),this.ui}pick(e,t={},i=ws.None){return new Promise(((n,r)=>{let s=e=>{s=n,t.onKeyMods&&t.onKeyMods(o.keyMods),n(e)};if(i.isCancellationRequested)return void s(void 0);const o=this.createQuickPick();let a;const l=[o,o.onDidAccept((()=>{if(o.canSelectMany)s(o.selectedItems.slice()),o.hide();else{const e=o.activeItems[0];e&&(s(e),o.hide())}})),o.onDidChangeActive((e=>{const i=e[0];i&&t.onDidFocus&&t.onDidFocus(i)})),o.onDidChangeSelection((e=>{if(!o.canSelectMany){const t=e[0];t&&(s(t),o.hide())}})),o.onDidTriggerItemButton((e=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},e),{removeItem:()=>{const t=o.items.indexOf(e.item);if(-1!==t){const e=o.items.slice(),i=e.splice(t,1),n=o.activeItems.filter((e=>e!==i[0]));o.items=e,n&&(o.activeItems=n)}}})))),o.onDidChangeValue((e=>{!a||e||1===o.activeItems.length&&o.activeItems[0]===a||(o.activeItems=[a])})),i.onCancellationRequested((()=>{o.hide()})),o.onDidHide((()=>{ns(l),s(void 0)}))];o.title=t.title,o.canSelectMany=!!t.canPickMany,o.placeholder=t.placeHolder,o.ignoreFocusOut=!!t.ignoreFocusLost,o.matchOnDescription=!!t.matchOnDescription,o.matchOnDetail=!!t.matchOnDetail,o.matchOnLabel=void 0===t.matchOnLabel||t.matchOnLabel,o.autoFocusOnList=void 0===t.autoFocusOnList||t.autoFocusOnList,o.quickNavigate=t.quickNavigate,o.contextKey=t.contextKey,o.busy=!0,Promise.all([e,t.activeItem]).then((([e,t])=>{a=t,o.busy=!1,o.items=e,o.canSelectMany&&(o.selectedItems=e.filter((e=>"separator"!==e.type&&e.picked))),a&&(o.activeItems=[a])})),o.show(),Promise.resolve(e).then(void 0,(e=>{r(e),o.hide()}))}))}createQuickPick(){const e=this.getUI();return new pF(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const i=this.controller;this.controller=e,i&&i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Pg.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),ql(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const n=this.options.backKeybindingLabel();dF.tooltip=n?On(0,"Back ({0})",n):On(0,"Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=!e.description||e.inputBox||e.checkAll?"none":"",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const i=this.controller;if(i){const n=!(null===(t=this.ui)||void 0===t?void 0:t.container.contains(document.activeElement));this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",n||(this.previousFocusElement&&this.previousFocusElement.offsetParent?(this.previousFocusElement.focus(),this.previousFocusElement=void 0):this.options.returnFocus()),i.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(.62*this.dimension.width,gF.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,contrastBorder:n,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=i?i.toString():"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const s=[];this.styles.list.pickerGroupBorder&&s.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&s.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(s.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&s.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&s.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&s.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&s.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&s.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),s.push("}"));const o=s.join("\n");o!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=o)}}}gF.MAX_WIDTH=600;const mF=ga("quickInputService");var bF;!function(e){e[e.PRESERVE=0]="PRESERVE",e[e.LAST=1]="LAST"}(bF||(bF={}));const vF="workbench.contributions.quickaccess";zg.add(vF,new class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return 0===e.prefix.length?this.defaultProvider=e:this.providers.push(e),this.providers.sort(((e,t)=>t.prefix.length-e.prefix.length)),ss((()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)}))}getQuickAccessProviders(){return function(e){return e.filter((e=>!!e))}([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find((t=>e.startsWith(t.prefix)))||void 0||this.defaultProvider}});var yF=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},_F=function(e,t){return function(i,n){t(i,n,e)}};let wF=class extends as{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=zg.as(vF),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var n;const[r,s]=this.getOrInstantiateProvider(e),o=this.visibleQuickAccess,a=null==o?void 0:o.descriptor;if(o&&s&&a===s)return e===s.prefix||(null==i?void 0:i.preserveValue)||(o.picker.value=e),void this.adjustValueSelection(o.picker,s,i);if(s&&!(null==i?void 0:i.preserveValue)){let t;if(o&&a&&a!==s){const e=o.value.substr(a.prefix.length);e&&(t=`${s.prefix}${e}`)}if(!t){const e=null==r?void 0:r.defaultFilterValue;e===bF.LAST?t=this.lastAcceptedPickerValues.get(s):"string"==typeof e&&(t=`${s.prefix}${e}`)}"string"==typeof t&&(e=t)}const l=new os,c=l.add(this.quickInputService.createQuickPick());let h,u;c.value=e,this.adjustValueSelection(c,s,i),c.placeholder=null==s?void 0:s.placeholder,c.quickNavigate=null==i?void 0:i.quickNavigateConfiguration,c.hideInput=!!c.quickNavigate&&!o,("number"==typeof(null==i?void 0:i.itemActivation)||(null==i?void 0:i.quickNavigateConfiguration))&&(c.itemActivation=null!==(n=null==i?void 0:i.itemActivation)&&void 0!==n?n:pB.SECOND),c.contextKey=null==s?void 0:s.contextKey,c.filterValue=e=>e.substring(s?s.prefix.length:0),(null==s?void 0:s.placeholder)&&(c.ariaLabel=null==s?void 0:s.placeholder),t&&(h=new Promise((e=>u=e)),l.add(GE(c.onWillAccept)((e=>{e.veto(),c.hide()})))),l.add(this.registerPickerListeners(c,r,s,e));const d=l.add(new Cs);return r&&l.add(r.provide(c,d.token)),GE(c.onDidHide)((()=>{0===c.selectedItems.length&&d.cancel(),l.dispose(),null==u||u(c.selectedItems)})),c.show(),t?h:void 0}adjustValueSelection(e,t,i){var n;let r;r=(null==i?void 0:i.preserveValue)?[e.value.length,e.value.length]:[null!==(n=null==t?void 0:t.prefix.length)&&void 0!==n?n:0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,i,n){const r=new os,s=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return r.add(ss((()=>{s===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)}))),r.add(e.onDidChangeValue((e=>{const[i]=this.getOrInstantiateProvider(e);i!==t?this.show(e,{preserveValue:!0}):s.value=e}))),i&&r.add(e.onDidAccept((()=>{this.lastAcceptedPickerValues.set(i,e.value)}))),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let i=this.mapProviderToDescriptor.get(t);return i||(i=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,i)),[i,t]}};wF=yF([_F(0,mF),_F(1,fa)],wF);var SF=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},CF=function(e,t){return function(i,n){t(i,n,e)}};let xF=class extends gv{constructor(e,t,i,n,r){super(i),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=n,this.layoutService=r,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(wF))),this._quickAccess}createController(e=this.layoutService,t){var i,n;const r={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:e=>this.setContextKey(e),returnFocus:()=>e.focus(),createList:(e,t,i,n,r)=>this.instantiationService.createInstance(aR,e,t,i,n,r),styles:this.computeStyles()},s=this._register(new gF(Object.assign(Object.assign({},r),t)));return s.layout(e.dimension,null!==(n=null===(i=e.offset)||void 0===i?void 0:i.top)&&void 0!==n?n:0),this._register(e.onDidLayout((t=>{var i,n;return s.layout(t,null!==(n=null===(i=e.offset)||void 0===i?void 0:i.top)&&void 0!==n?n:0)}))),this._register(s.onShow((()=>this.resetContextKeys()))),this._register(s.onHide((()=>this.resetContextKeys()))),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new iv(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),t&&t.get()||(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach((e=>{e.get()&&e.reset()}))}pick(e,t={},i=ws.None){return this.controller.pick(e,t,i)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},dI(this.theme,{quickInputBackground:vC,quickInputForeground:yC,quickInputTitleBackground:_C,contrastBorder:NS,widgetShadow:OS})),inputBox:dI(this.theme,{inputForeground:IS,inputBackground:DS,inputBorder:AS,inputValidationInfoBackground:PS,inputValidationInfoForeground:RS,inputValidationInfoBorder:BS,inputValidationWarningBackground:FS,inputValidationWarningForeground:WS,inputValidationWarningBorder:VS,inputValidationErrorBackground:zS,inputValidationErrorForeground:HS,inputValidationErrorBorder:jS}),countBadge:dI(this.theme,{badgeBackground:ZS,badgeForeground:YS,badgeBorder:NS}),button:dI(this.theme,{buttonForeground:KS,buttonBackground:$S,buttonHoverBackground:qS,buttonBorder:NS}),progressBar:dI(this.theme,{progressBarBackground:tC}),keybindingLabel:dI(this.theme,{keybindingLabelBackground:CC,keybindingLabelForeground:xC,keybindingLabelBorder:kC,keybindingLabelBottomBorder:EC,keybindingLabelShadow:OS}),list:dI(this.theme,{listBackground:vC,listInactiveFocusForeground:ax,listInactiveFocusBackground:lx,listFocusOutline:MS,listInactiveFocusOutline:MS,pickerGroupBorder:SC,pickerGroupForeground:wC})}}};xF=SF([CF(0,fa),CF(1,nv),CF(2,av),CF(3,NL),CF(4,wI)],xF);var kF=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},EF=function(e,t){return function(i,n){t(i,n,e)}};let TF=class extends xF{constructor(e,t,i,n,r,s){super(t,i,n,r,s),this.host=void 0;const o=NF.get(e);this.host={_serviceBrand:void 0,get container(){return o.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};TF=kF([EF(1,fa),EF(2,nv),EF(3,av),EF(4,NL),EF(5,wI)],TF);let LF=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(TF,e);this.mapEditorToService.set(e,t),GE(e.onDidDispose)((()=>{i.dispose(),this.mapEditorToService.delete(e)}))}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},i=ws.None){return this.activeService.pick(e,t,i)}createQuickPick(){return this.activeService.createQuickPick()}};LF=kF([EF(0,fa),EF(1,ba)],LF);class NF{constructor(e){this.editor=e,this.widget=new MF(this.editor)}static get(e){return e.getContribution(NF.ID)}dispose(){this.widget.dispose()}}NF.ID="editor.controller.quickInput";class MF{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return MF.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}var OF;MF.ID="editor.contrib.quickInputWidget",Dv(NF.ID,NF),function(e){const t=new LL;class i{constructor(e,t){this._serviceId=e,this._factory=t,this._value=null}get id(){return this._serviceId}get(e){if(!this._value){if(e&&(this._value=e[this._serviceId.toString()]),this._value||(this._value=this._factory(e)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");t.set(this._serviceId,this._value)}return this._value}}e.LazyStaticService=i;let n=[];function r(e,t){let r=new i(e,t);return n.push(r),r}e.init=function(e){let t=new LL;for(const[e,i]of bN)t.set(e,i);for(let i in e)e.hasOwnProperty(i)&&t.set(ga(i),e[i]);n.forEach((i=>t.set(i.id,i.get(e))));let i=new NI(t,!0);return t.set(fa,i),[t,i]},e.instantiationService=r(fa,(()=>new NI(t,!0)));const s=new db;e.configurationService=r(_m,(()=>s)),e.resourceConfigurationService=r(dp,(()=>new fb(s))),e.resourcePropertiesService=r(fp,(()=>new pb(s))),e.contextService=r(Um,(()=>new mb)),e.labelService=r(OI,(()=>new yb)),e.telemetryService=r(xv,(()=>new gb)),e.dialogService=r(kI,(()=>new ab)),e.notificationService=r(jm,(()=>new lb)),e.markerService=r(xR,(()=>new TR)),e.modeService=r(zd,(e=>new oO)),e.standaloneThemeService=r(yM,(()=>new eD)),e.logService=r(xp,(()=>new Np(new Lp))),e.undoRedoService=r(aO,(t=>new hB(e.dialogService.get(t),e.notificationService.get(t)))),e.modelService=r($u,(t=>new TO(e.configurationService.get(t),e.resourcePropertiesService.get(t),e.standaloneThemeService.get(t),e.logService.get(t),e.undoRedoService.get(t)))),e.markerDecorationsService=r(Lb,(t=>new GR(e.modelService.get(t),e.markerService.get(t)))),e.contextKeyService=r(nv,(t=>new dD(e.configurationService.get(t)))),e.codeEditorService=r(ba,(t=>new AM(null,e.contextKeyService.get(t),e.standaloneThemeService.get(t)))),e.editorProgressService=r(ZN,(()=>new ob)),e.storageService=r(IR,(()=>new RR)),e.editorWorkerService=r(Vd,(t=>new Pp(e.modelService.get(t),e.resourceConfigurationService.get(t),e.logService.get(t))))}(OF||(OF={}));class DF extends as{constructor(e,t){super();const[i,n]=OF.init(t);this._serviceCollection=i,this._instantiationService=n;const r=this.get(_m),s=this.get(jm),o=this.get(xv),a=this.get(av),l=this.get(xp),c=this.get(nv);let h=(e,i)=>{let n=null;return t&&(n=t[e.toString()]),n||(n=i()),this._serviceCollection.set(e,n),n};h(NL,(()=>new qR(c,r))),h(RP,(()=>new BP(a)));let u=h(zh,(()=>new cb(this._instantiationService))),d=h(_M,(()=>this._register(new hb(c,u,o,s,l,e)))),f=h(wI,(()=>new _b(OF.codeEditorService.get(ba),e)));h(mF,(()=>new LF(n,OF.codeEditorService.get(ba))));let p=h(UN,(()=>this._register(new xI(f))));h(qN,(()=>new YR)),h(GN,(()=>{const e=new _I(o,s,p,d,a);return e.configure({blockMouse:!1}),this._register(e)})),h(_v,(()=>new WR(u))),h(Bg,(()=>new vb(OF.modelService.get($u))))}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}function IF(e,t,i){let n=new DF(e,t),r=null;n.has(Hd)||(r=new sb(OF.modelService.get()),n.set(Hd,r)),n.has(Gh)||n.set(Gh,new Qh(n.get(ba),n.get(zh)));let s=i(n);return r&&r.setEditor(s),s}function AF(e,t,i){return IF(e,i||{},(i=>new zM(e,t,i,i.get(fa),i.get(ba),i.get(zh),i.get(nv),i.get(_M),i.get(UN),i.get(yM),i.get(jm),i.get(_m),i.get(NL),i.get($u),i.get(zd))))}function PF(e){return OF.codeEditorService.get().onCodeEditorAdd((t=>{e(t)}))}function RF(e,t,i){return IF(e,i||{},(i=>new HM(e,t,i,i.get(fa),i.get(nv),i.get(_M),i.get(UN),i.get(Vd),i.get(ba),i.get(yM),i.get(jm),i.get(_m),i.get(GN),i.get(ZN),i.get(qN))))}function BF(e,t){return new ou(e,t)}function FF(e,t,i){return jM(OF.modelService.get(),OF.modeService.get(),e,t,i)}function WF(e,t){OF.modelService.get().setMode(e,OF.modeService.get().create(t))}function VF(e,t,i){e&&OF.markerService.get().changeOne(t,e.uri,i)}function zF(e){return OF.markerService.get().read(e)}function HF(e){return OF.markerService.get().onMarkerChanged(e)}function jF(e){return OF.modelService.get().getModel(e)}function UF(){return OF.modelService.get().getModels()}function GF(e){return OF.modelService.get().onModelAdded(e)}function KF(e){return OF.modelService.get().onModelRemoved(e)}function $F(e){return OF.modelService.get().onModelModeChanged((t=>{e({model:t.model,oldLanguage:t.oldModeId})}))}function qF(e){return function(e,t){return new Hp(e,t)}(OF.modelService.get(),e)}function ZF(e,t){const i=OF.standaloneThemeService.get();return i.registerEditorContainer(e),Og.colorizeElement(i,OF.modeService.get(),e,t)}function YF(e,t,i){return OF.standaloneThemeService.get().registerEditorContainer(document.body),Og.colorize(OF.modeService.get(),e,t,i)}function XF(e,t,i=4){return OF.standaloneThemeService.get().registerEditorContainer(document.body),Og.colorizeModelLine(e,t,i)}function QF(e){let t=Pd.get(e);return t||{getInitialState:()=>Rd,tokenize:(t,i,n,r)=>function(e,t,i,n){return new To([new Eo(n,"",e)],i)}(e,0,n,r)}}function JF(e,t){OF.modeService.get().triggerMode(t);let i=QF(t),n=pc(e),r=[],s=i.getInitialState();for(let e=0,t=n.length;e<t;e++){let t=n[e],o=i.tokenize(t,!0,s,0);r[e]=o.tokens,s=o.endState}return r}function eW(e,t){OF.standaloneThemeService.get().defineTheme(e,t)}function tW(e){OF.standaloneThemeService.get().setTheme(e)}function iW(){Kv.INSTANCE.clearCache()}function nW(e,t){return Hh.registerCommand({id:e,handler:t})}function rW(e,t){return"boolean"==typeof e?e:t}function sW(e,t){return"string"==typeof e?e:t}function oW(e,t=!1){t&&(e=e.map((function(e){return e.toLowerCase()})));const i=function(e){const t={};for(const i of e)t[i]=!0;return t}(e);return t?function(e){return void 0!==i[e.toLowerCase()]&&i.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==i[e]&&i.hasOwnProperty(e)}}function aW(e,t){t=t.replace(/@@/g,"");let i,n=0;do{i=!1,t=t.replace(/@(\w+)/g,(function(n,r){i=!0;let s="";if("string"==typeof e[r])s=e[r];else{if(!(e[r]&&e[r]instanceof RegExp))throw void 0===e[r]?bg(e,"language definition does not contain attribute '"+r+"', used at: "+t):bg(e,"attribute reference '"+r+"' must be a string, used at: "+t);s=e[r].source}return pg(s)?"":"(?:"+s+")"})),n++}while(i&&n<5);t=t.replace(/\x01/g,"@");let r=(e.ignoreCase?"i":"")+(e.unicode?"u":"");return new RegExp(t,r)}function lW(e,t,i,n){let r=-1,s=i,o=i.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(r=parseInt(o[3]),o[2]&&(r+=100)),s=o[4]);let a,l="~",c=s;if(s&&0!==s.length?/^\w*$/.test(c)?l="==":(o=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(l=o[1],c=o[2])):(l="!=",c=""),"~"!==l&&"!~"!==l||!/^(\w|\|)*$/.test(c))if("@"===l||"!@"===l){let i=e[c];if(!i)throw bg(e,"the @ match target '"+c+"' is not defined, in rule: "+t);if(!function(e,t){if(!t)return!1;if(!Array.isArray(t))return!1;for(const i of t)if(!e(i))return!1;return!0}((function(e){return"string"==typeof e}),i))throw bg(e,"the @ match target '"+c+"' must be an array of strings, in rule: "+t);let n=oW(i,e.ignoreCase);a=function(e){return"@"===l?n(e):!n(e)}}else if("~"===l||"!~"===l)if(c.indexOf("$")<0){let t=aW(e,"^"+c+"$");a=function(e){return"~"===l?t.test(e):!t.test(e)}}else a=function(t,i,n,r){return aW(e,"^"+vg(e,c,i,n,r)+"$").test(t)};else if(c.indexOf("$")<0){let t=gg(e,c);a=function(e){return"=="===l?e===t:e!==t}}else{let t=gg(e,c);a=function(i,n,r,s,o){let a=vg(e,t,n,r,s);return"=="===l?i===a:i!==a}}else{let t=oW(c.split("|"),e.ignoreCase);a=function(e){return"~"===l?t(e):!t(e)}}return-1===r?{name:i,value:n,test:function(e,t,i,n){return a(e,e,t,i,n)}}:{name:i,value:n,test:function(e,t,i,n){let s=function(e,t,i,n){if(n<0)return e;if(n<t.length)return t[n];if(n>=100){n-=100;let e=i.split(".");if(e.unshift(i),n<e.length)return e[n]}return null}(e,t,i,r);return a(s||"",e,t,i,n)}}}function cW(e,t,i){if(i){if("string"==typeof i)return i;if(i.token||""===i.token){if("string"!=typeof i.token)throw bg(e,"a 'token' attribute must be of type string, in rule: "+t);{let n={token:i.token};if(i.token.indexOf("$")>=0&&(n.tokenSubst=!0),"string"==typeof i.bracket)if("@open"===i.bracket)n.bracket=1;else{if("@close"!==i.bracket)throw bg(e,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+t);n.bracket=-1}if(i.next){if("string"!=typeof i.next)throw bg(e,"the next state must be a string value in rule: "+t);{let r=i.next;if(!/^(@pop|@push|@popall)$/.test(r)&&("@"===r[0]&&(r=r.substr(1)),r.indexOf("$")<0&&!function(e,t){let i=t;for(;i&&i.length>0;){if(e.stateNames[i])return!0;const t=i.lastIndexOf(".");i=t<0?null:i.substr(0,t)}return!1}(e,vg(e,r,"",[],""))))throw bg(e,"the next state '"+i.next+"' is not defined in rule: "+t);n.next=r}}return"number"==typeof i.goBack&&(n.goBack=i.goBack),"string"==typeof i.switchTo&&(n.switchTo=i.switchTo),"string"==typeof i.log&&(n.log=i.log),"string"==typeof i.nextEmbedded&&(n.nextEmbedded=i.nextEmbedded,e.usesEmbedded=!0),n}}if(Array.isArray(i)){let n=[];for(let r=0,s=i.length;r<s;r++)n[r]=cW(e,t,i[r]);return{group:n}}if(i.cases){let n=[];for(let r in i.cases)if(i.cases.hasOwnProperty(r)){const s=cW(e,t,i.cases[r]);"@default"===r||"@"===r||""===r?n.push({test:void 0,value:s,name:r}):"@eos"===r?n.push({test:function(e,t,i,n){return n},value:s,name:r}):n.push(lW(e,t,r,s))}const r=e.defaultToken;return{test:function(e,t,i,s){for(const r of n){if(!r.test||r.test(e,t,i,s))return r.value}return r}}}throw bg(e,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+t)}return{token:""}}class hW{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if("string"==typeof t)i=t;else{if(!(t instanceof RegExp))throw bg(e,"rules must start with a match string or regular expression: "+this.name);i=t.source}this.matchOnlyAtLineStart=i.length>0&&"^"===i[0],this.name=this.name+": "+i,this.regex=aW(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")")}setAction(e,t){this.action=cW(e,this.name,t)}}function uW(e){eO.registerLanguage(e)}function dW(){let e=[];return e=e.concat(eO.getLanguages()),e}function fW(e){let t=OF.modeService.get().getLanguageIdentifier(e);return t?t.id:0}function pW(e,t){let i=OF.modeService.get().onDidCreateMode((n=>{n.getId()===e&&(i.dispose(),t())}));return i}function gW(e,t){let i=OF.modeService.get().getLanguageIdentifier(e);if(!i)throw new Error(`Cannot set configuration for unknown language ${e}`);return Pf.register(i,t,100)}class mW{constructor(e,t){this._languageIdentifier=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i,n){if("function"==typeof this._actual.tokenize)return bW.adaptTokenize(this._languageIdentifier.language,this._actual,e,i,n);throw new Error("Not supported!")}tokenize2(e,t,i){let n=this._actual.tokenizeEncoded(e,i);return new Lo(n.tokens,n.endState)}}class bW{constructor(e,t,i){this._standaloneThemeService=e,this._languageIdentifier=t,this._actual=i}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,i){let n=[],r=0;for(let s=0,o=e.length;s<o;s++){const o=e[s];let a=o.startIndex;0===s?a=0:a<r&&(a=r),n[s]=new Eo(a+i,o.scopes,t),r=a}return n}static adaptTokenize(e,t,i,n,r){let s,o=t.tokenize(i,n),a=bW._toClassicTokens(o.tokens,e,r);return s=o.endState.equals(n)?n:o.endState,new To(a,s)}tokenize(e,t,i,n){return bW.adaptTokenize(this._languageIdentifier.language,this._actual,e,i,n)}_toBinaryTokens(e,t){const i=this._languageIdentifier.id,n=this._standaloneThemeService.getColorTheme().tokenTheme;let r=[],s=0,o=0;for(let a=0,l=e.length;a<l;a++){const l=e[a],c=n.match(i,l.scopes);if(s>0&&r[s-1]===c)continue;let h=l.startIndex;0===a?h=0:h<o&&(h=o),r[s++]=h+t,r[s++]=c,o=h}let a=new Uint32Array(s);for(let e=0;e<s;e++)a[e]=r[e];return a}tokenize2(e,t,i,n){let r,s=this._actual.tokenize(e,i),o=this._toBinaryTokens(s.tokens,n);return r=s.endState.equals(i)?i:s.endState,new Lo(o,r)}}function vW(e){return e&&"function"==typeof e.then}function yW(e){if(e){const t=[null];for(let i=1,n=e.length;i<n;i++)t[i]=vw.fromHex(e[i]);OF.standaloneThemeService.get().setColorMapOverride(t)}else OF.standaloneThemeService.get().setColorMapOverride(null)}function _W(e,t){let i=OF.modeService.get().getLanguageIdentifier(e);if(!i)throw new Error(`Cannot set tokens provider for unknown language ${e}`);const n=e=>function(e){return"tokenizeEncoded"in e}(e)?new mW(i,e):new bW(OF.standaloneThemeService.get(),i,e);return vW(t)?Pd.registerPromise(e,t.then((e=>n(e)))):Pd.register(e,n(t))}function wW(e,t){const i=t=>{return i=OF.modeService.get(),n=OF.standaloneThemeService.get(),r=e,s=function(e,t){if(!t||"object"!=typeof t)throw new Error("Monarch: expecting a language definition object");let i={};i.languageId=e,i.includeLF=rW(t.includeLF,!1),i.noThrow=!1,i.maxStack=100,i.start="string"==typeof t.start?t.start:null,i.ignoreCase=rW(t.ignoreCase,!1),i.unicode=rW(t.unicode,!1),i.tokenPostfix=sW(t.tokenPostfix,"."+i.languageId),i.defaultToken=sW(t.defaultToken,"source"),i.usesEmbedded=!1;let n=t;function r(e,s,o){for(const a of o){let o=a.include;if(o){if("string"!=typeof o)throw bg(i,"an 'include' attribute must be a string at: "+e);if("@"===o[0]&&(o=o.substr(1)),!t.tokenizer[o])throw bg(i,"include target '"+o+"' is not defined at: "+e);r(e+"."+o,s,t.tokenizer[o])}else{const t=new hW(e);if(Array.isArray(a)&&a.length>=1&&a.length<=3)if(t.setRegex(n,a[0]),a.length>=3)if("string"==typeof a[1])t.setAction(n,{token:a[1],next:a[2]});else{if("object"!=typeof a[1])throw bg(i,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+e);{const e=a[1];e.next=a[2],t.setAction(n,e)}}else t.setAction(n,a[1]);else{if(!a.regex)throw bg(i,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+e);a.name&&"string"==typeof a.name&&(t.name=a.name),a.matchOnlyAtStart&&(t.matchOnlyAtLineStart=rW(a.matchOnlyAtLineStart,!1)),t.setRegex(n,a.regex),t.setAction(n,a.action)}s.push(t)}}}if(n.languageId=e,n.includeLF=i.includeLF,n.ignoreCase=i.ignoreCase,n.unicode=i.unicode,n.noThrow=i.noThrow,n.usesEmbedded=i.usesEmbedded,n.stateNames=t.tokenizer,n.defaultToken=i.defaultToken,!t.tokenizer||"object"!=typeof t.tokenizer)throw bg(i,"a language definition must define the 'tokenizer' attribute as an object");i.tokenizer=[];for(let e in t.tokenizer)if(t.tokenizer.hasOwnProperty(e)){i.start||(i.start=e);const n=t.tokenizer[e];i.tokenizer[e]=new Array,r("tokenizer."+e,i.tokenizer[e],n)}if(i.usesEmbedded=n.usesEmbedded,t.brackets){if(!Array.isArray(t.brackets))throw bg(i,"the 'brackets' attribute must be defined as an array")}else t.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let s=[];for(let e of t.brackets){let t=e;if(t&&Array.isArray(t)&&3===t.length&&(t={token:t[2],open:t[0],close:t[1]}),t.open===t.close)throw bg(i,"open and close brackets in a 'brackets' attribute must be different: "+t.open+"\n hint: use the 'bracket' attribute if matching on equal brackets is required.");if("string"!=typeof t.open||"string"!=typeof t.token||"string"!=typeof t.close)throw bg(i,"every element in the 'brackets' array must be a '{open,close,token}' object or array");s.push({token:t.token+i.tokenPostfix,open:gg(i,t.open),close:gg(i,t.close)})}return i.brackets=s,i.noThrow=!0,i}(e,t),new Tg(i,n,r,s);var i,n,r,s};return vW(t)?Pd.registerPromise(e,t.then((e=>i(e)))):Pd.register(e,i(t))}function SW(e,t){return hd.register(e,t)}function CW(e,t){return ud.register(e,t)}function xW(e,t){return pd.register(e,t)}function kW(e,t){return gd.register(e,{provideHover:(e,i,n)=>{let r=e.getWordAtPosition(i);return Promise.resolve(t.provideHover(e,i,n)).then((e=>{if(e)return!e.range&&r&&(e.range=new xo(i.lineNumber,r.startColumn,i.lineNumber,r.endColumn)),e.range||(e.range=new xo(i.lineNumber,i.column,i.lineNumber,i.column)),e}))}})}function EW(e,t){return md.register(e,t)}function TW(e,t){return bd.register(e,t)}function LW(e,t){return vd.register(e,t)}function NW(e,t){return yd.register(e,t)}function MW(e,t){return wd.register(e,t)}function OW(e,t){return Sd.register(e,t)}function DW(e,t){return Cd.register(e,t)}function IW(e,t){return kd.register(e,{provideCodeActions:(e,i,n,r)=>{let s=OF.markerService.get().read({resource:e.uri}).filter((e=>xo.areIntersectingOrTouching(e,i)));return t.provideCodeActions(e,i,{markers:s,only:n.only},r)}})}function AW(e,t){return Ed.register(e,t)}function PW(e,t){return Td.register(e,t)}function RW(e,t){return Ld.register(e,t)}function BW(e,t){return Nd.register(e,t)}function FW(e,t){return dd.register(e,t)}function WW(e,t){return Md.register(e,t)}function VW(e,t){return Dd.register(e,t)}function zW(e,t){return _d.register(e,t)}function HW(e,t){return Od.register(e,t)}function jW(e,t){return Id.register(e,t)}function UW(e,t){return Ad.register(e,t)}function GW(e,t){return fd.register(e,t)}class KW{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return"string"==typeof e?e.toLowerCase():e._lower}}var $W,qW=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};function ZW(e){const t=[],i=new Set,n=Ed.ordered(e);for(const e of n)t.push(e),e.extensionId&&i.add(KW.toKey(e.extensionId));const r=Td.ordered(e);for(const e of r){if(e.extensionId){if(i.has(KW.toKey(e.extensionId)))continue;i.add(KW.toKey(e.extensionId))}t.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits:(t,i,n)=>e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),i,n)})}return t}class YW{static setFormatterSelector(e){return{dispose:YW._selectors.unshift(e)}}static select(e,t,i){return qW(this,void 0,void 0,(function*(){if(0===e.length)return;const n=Qr.first(YW._selectors);return n?yield n(e,t,i):void 0}))}}YW._selectors=new us,Hh.registerCommand("_executeFormatRangeProvider",(function(e,...t){const[i,n,r]=t;Ph(uo.isUri(i)),Ph(xo.isIRange(n));const s=e.get($u).getModel(i);if(!s)throw Xr("resource");return function(e,t,i,n,r){return qW(this,void 0,void 0,(function*(){const s=Td.ordered(t);for(const o of s){let s=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(t,i,n,r)).catch(Kr);if(mp(s))return yield e.computeMoreMinimalEdits(t.uri,s)}}))}(e.get(Vd),s,xo.lift(n),r,ws.None)})),Hh.registerCommand("_executeFormatDocumentProvider",(function(e,...t){const[i,n]=t;Ph(uo.isUri(i));const r=e.get($u).getModel(i);if(!r)throw Xr("resource");return function(e,t,i,n){return qW(this,void 0,void 0,(function*(){const r=ZW(t);for(const s of r){let r=yield Promise.resolve(s.provideDocumentFormattingEdits(t,i,n)).catch(Kr);if(mp(r))return yield e.computeMoreMinimalEdits(t.uri,r)}}))}(e.get(Vd),r,n,ws.None)})),Hh.registerCommand("_executeFormatOnTypeProvider",(function(e,...t){const[i,n,r,s]=t;Ph(uo.isUri(i)),Ph(Co.isIPosition(n)),Ph("string"==typeof r);const o=e.get($u).getModel(i);if(!o)throw Xr("resource");return function(e,t,i,n,r){const s=Ld.ordered(t);return 0===s.length||s[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(s[0].provideOnTypeFormattingEdits(t,i,n,r,ws.None)).catch(Kr).then((i=>e.computeMoreMinimalEdits(t.uri,i)))}(e.get(Vd),o,Co.lift(n),r,s)})),jr.wrappingIndent.defaultValue=0,jr.glyphMargin.defaultValue=!1,jr.autoIndent.defaultValue=3,jr.overviewRulerLanes.defaultValue=2,YW.setFormatterSelector(((e,t,i)=>Promise.resolve(e[0])));const XW=da();XW.editor={create:AF,onDidCreateEditor:PF,createDiffEditor:RF,createDiffNavigator:BF,createModel:FF,setModelLanguage:WF,setModelMarkers:VF,getModelMarkers:zF,onDidChangeMarkers:HF,getModels:UF,getModel:jF,onDidCreateModel:GF,onWillDisposeModel:KF,onDidChangeModelLanguage:$F,createWebWorker:qF,colorizeElement:ZF,colorize:YF,colorizeModelLine:XF,tokenize:JF,defineTheme:eW,setTheme:tW,remeasureFonts:iW,registerCommand:nW,AccessibilitySupport:No,ContentWidgetPositionPreference:Ao,CursorChangeReason:Po,DefaultEndOfLine:Ro,EditorAutoIndentStrategy:Fo,EditorOption:Wo,EndOfLinePreference:Vo,EndOfLineSequence:zo,MinimapPosition:qo,MouseTargetType:Zo,OverlayWidgetPositionPreference:Yo,OverviewRulerLane:Xo,RenderLineNumbersType:Qo,RenderMinimap:Jo,ScrollbarVisibility:ta,ScrollType:ea,TextEditorCursorBlinkingStyle:oa,TextEditorCursorStyle:aa,TrackedRangeStickiness:la,WrappingIndent:ca,ConfigurationChangedEvent:pr,BareFontInfo:cu,FontInfo:hu,TextModelResolvedOptions:pu,FindMatch:gu,EditorType:uu,EditorOptions:jr},XW.languages={register:uW,getLanguages:dW,onLanguage:pW,getEncodedLanguageId:fW,setLanguageConfiguration:gW,setColorMap:yW,setTokensProvider:_W,setMonarchTokensProvider:wW,registerReferenceProvider:SW,registerRenameProvider:CW,registerCompletionItemProvider:FW,registerSignatureHelpProvider:xW,registerHoverProvider:kW,registerDocumentSymbolProvider:EW,registerDocumentHighlightProvider:TW,registerLinkedEditingRangeProvider:LW,registerDefinitionProvider:NW,registerImplementationProvider:MW,registerTypeDefinitionProvider:OW,registerCodeLensProvider:DW,registerCodeActionProvider:IW,registerDocumentFormattingEditProvider:AW,registerDocumentRangeFormattingEditProvider:PW,registerOnTypeFormattingEditProvider:RW,registerLinkProvider:BW,registerColorProvider:WW,registerFoldingRangeProvider:VW,registerDeclarationProvider:zW,registerSelectionRangeProvider:HW,registerDocumentSemanticTokensProvider:jW,registerDocumentRangeSemanticTokensProvider:UW,registerInlineCompletionsProvider:GW,DocumentHighlightKind:Bo,CompletionItemKind:Oo,CompletionItemTag:Do,CompletionItemInsertTextRule:Mo,SymbolKind:ra,SymbolTag:sa,IndentAction:Ho,CompletionTriggerKind:Io,SignatureHelpTriggerKind:na,InlayHintKind:jo,InlineCompletionTriggerKind:Uo,FoldingRangeKind:cd};const QW=XW.CancellationTokenSource,JW=XW.Emitter,eV=XW.KeyCode,tV=XW.KeyMod,iV=XW.Position,nV=XW.Range,rV=XW.Selection,sV=XW.SelectionDirection,oV=XW.MarkerSeverity,aV=XW.MarkerTag,lV=XW.Uri,cV=XW.Token,hV=XW.editor,uV=XW.languages;function dV(e){return/^\d+$/.test(e)?e+"px":e}function fV(){}((null===($W=Un.MonacoEnvironment)||void 0===$W?void 0:$W.globalAPI)||"function"==typeof define&&i.amdO)&&(self.monaco=XW),void 0!==self.require&&"function"==typeof self.require.config&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var pV,gV=(pV=function(e,t){return(pV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}pV(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),mV=function(){return(mV=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};!function(e){function t(t){var i=e.call(this,t)||this;return i.assignRef=function(e){i.containerElement=e},i.containerElement=void 0,i}gV(t,e),t.prototype.componentDidMount=function(){this.initMonaco()},t.prototype.componentDidUpdate=function(e){var t=this.props,i=t.language,n=t.theme,r=t.height,s=t.options,o=t.width,a=t.className,l=this.editor.getModel(),c=l.original,h=l.modified;this.props.original!==c.getValue()&&c.setValue(this.props.original),null!=this.props.value&&this.props.value!==h.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.getModifiedEditor().pushUndoStop(),h.pushEditOperations([],[{range:h.getFullModelRange(),text:this.props.value}]),this.editor.getModifiedEditor().pushUndoStop(),this.__prevent_trigger_change_event=!1),e.language!==i&&(hV.setModelLanguage(c,i),hV.setModelLanguage(h,i)),e.theme!==n&&hV.setTheme(n),!this.editor||o===e.width&&r===e.height||this.editor.layout(),e.options!==s&&this.editor.updateOptions(mV(mV({},a?{extraEditorClassName:a}:{}),s))},t.prototype.componentWillUnmount=function(){this.destroyMonaco()},t.prototype.editorWillMount=function(){return(0,this.props.editorWillMount)(n)||{}},t.prototype.editorDidMount=function(e){var t=this;this.props.editorDidMount(e,n);var i=e.getModel().modified;this._subscription=i.onDidChangeContent((function(e){t.__prevent_trigger_change_event||t.props.onChange(i.getValue(),e)}))},t.prototype.initModels=function(e,t){var i=this.props.language,n=hV.createModel(t,i),r=hV.createModel(e,i);this.editor.setModel({original:n,modified:r})},t.prototype.initMonaco=function(){var e=null!=this.props.value?this.props.value:this.props.defaultValue,t=this.props,i=t.original,n=t.theme,r=t.options,s=t.overrideServices,o=t.className;this.containerElement&&(this.editorWillMount(),this.editor=hV.createDiffEditor(this.containerElement,mV(mV(mV({},o?{extraEditorClassName:o}:{}),r),n?{theme:n}:{}),s),this.initModels(e,i),this.editorDidMount(this.editor))},t.prototype.destroyMonaco=function(){if(this.editor){this.editor.dispose();var e=this.editor.getModel(),t=e.original,i=e.modified;t&&t.dispose(),i&&i.dispose()}this._subscription&&this._subscription.dispose()},t.prototype.render=function(){var e=this.props,t=e.width,i=e.height,n={width:dV(t),height:dV(i)};return r.createElement("div",{ref:this.assignRef,style:n,className:"react-monaco-editor-container"})},t.propTypes={width:u.oneOfType([u.string,u.number]),height:u.oneOfType([u.string,u.number]),original:u.string,value:u.string,defaultValue:u.string,language:u.string,theme:u.string,options:u.object,overrideServices:u.object,editorDidMount:u.func,editorWillMount:u.func,onChange:u.func,className:u.string},t.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorDidMount:fV,editorWillMount:fV,onChange:fV,className:null}}(r.Component);var bV=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vV=function(){return(vV=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},yV=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const _V=function(e){function t(t){var i=e.call(this,t)||this;return i.assignRef=function(e){i.containerElement=e},i.containerElement=void 0,i}return bV(t,e),t.prototype.componentDidMount=function(){this.initMonaco()},t.prototype.componentDidUpdate=function(e){var t=this.props,i=t.value,n=t.language,r=t.theme,s=t.height,o=t.options,a=t.width,l=t.className,c=this.editor,h=c.getModel();if(null!=this.props.value&&this.props.value!==h.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.pushUndoStop(),h.pushEditOperations([],[{range:h.getFullModelRange(),text:i}]),this.editor.pushUndoStop(),this.__prevent_trigger_change_event=!1),e.language!==n&&hV.setModelLanguage(h,n),e.theme!==r&&hV.setTheme(r),!c||a===e.width&&s===e.height||c.layout(),e.options!==o){o.model;var u=yV(o,["model"]);c.updateOptions(vV(vV({},l?{extraEditorClassName:l}:{}),u))}},t.prototype.componentWillUnmount=function(){this.destroyMonaco()},t.prototype.destroyMonaco=function(){if(this.editor){this.editor.dispose();var e=this.editor.getModel();e&&e.dispose()}this._subscription&&this._subscription.dispose()},t.prototype.initMonaco=function(){var e=null!=this.props.value?this.props.value:this.props.defaultValue,t=this.props,i=t.language,n=t.theme,r=t.overrideServices,s=t.className;if(this.containerElement){var o=vV(vV({},this.props.options),this.editorWillMount());this.editor=hV.create(this.containerElement,vV(vV(vV({value:e,language:i},s?{extraEditorClassName:s}:{}),o),n?{theme:n}:{}),r),this.editorDidMount(this.editor)}},t.prototype.editorWillMount=function(){return(0,this.props.editorWillMount)(n)||{}},t.prototype.editorDidMount=function(e){var t=this;this.props.editorDidMount(e,n),this._subscription=e.onDidChangeModelContent((function(i){t.__prevent_trigger_change_event||t.props.onChange(e.getValue(),i)}))},t.prototype.render=function(){var e=this.props,t=e.width,i=e.height,n={width:dV(t),height:dV(i)};return r.createElement("div",{ref:this.assignRef,style:n,className:"react-monaco-editor-container"})},t.propTypes={width:u.oneOfType([u.string,u.number]),height:u.oneOfType([u.string,u.number]),value:u.string,defaultValue:u.string,language:u.string,theme:u.string,options:u.object,overrideServices:u.object,editorDidMount:u.func,editorWillMount:u.func,onChange:u.func,className:u.string},t.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorDidMount:fV,editorWillMount:fV,onChange:fV,className:null},t}(r.Component);function wV(e){return function(e){if(Array.isArray(e))return SV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return SV(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return SV(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SV(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var CV=function(e){return function(t){var i=t.fileText,n=t.filePath,r=hV.createModel(i,void 0,lV.file(n));e((function(e){return[].concat(wV(e),[r])}))}};function xV(e,t){return e===t}function kV(e,t,i){if(null===t||null===i||t.length!==i.length)return!1;for(var n=t.length,r=0;r<n;r++)if(!e(t[r],i[r]))return!1;return!0}function EV(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var i=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+i+"]")}return t}!function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n]}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xV,i=null,n=null;return function(){return kV(t,i,arguments)||(n=e.apply(null,arguments)),i=arguments,n}}));function TV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function LV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?TV(Object(i),!0).forEach((function(t){(0,Qi.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):TV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function NV(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var MV="function"==typeof Symbol&&Symbol.observable||"@@observable",OV=function(){return Math.random().toString(36).substring(7).split("").join(".")},DV={INIT:"@@redux/INIT"+OV(),REPLACE:"@@redux/REPLACE"+OV(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+OV()}};function IV(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function AV(e,t,i){var n;if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error(NV(0));if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error(NV(1));return i(AV)(e,t)}if("function"!=typeof e)throw new Error(NV(2));var r=e,s=t,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function h(){if(l)throw new Error(NV(3));return s}function u(e){if("function"!=typeof e)throw new Error(NV(4));if(l)throw new Error(NV(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(NV(6));t=!1,c();var i=a.indexOf(e);a.splice(i,1),o=null}}}function d(e){if(!IV(e))throw new Error(NV(7));if(void 0===e.type)throw new Error(NV(8));if(l)throw new Error(NV(9));try{l=!0,s=r(s,e)}finally{l=!1}for(var t=o=a,i=0;i<t.length;i++){(0,t[i])()}return e}function f(e){if("function"!=typeof e)throw new Error(NV(10));r=e,d({type:DV.REPLACE})}function p(){var e,t=u;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(NV(11));function i(){e.next&&e.next(h())}return i(),{unsubscribe:t(i)}}})[MV]=function(){return this},e}return d({type:DV.INIT}),(n={dispatch:d,subscribe:u,getState:h,replaceReducer:f})[MV]=p,n}function PV(e){for(var t=Object.keys(e),i={},n=0;n<t.length;n++){var r=t[n];0,"function"==typeof e[r]&&(i[r]=e[r])}var s,o=Object.keys(i);try{!function(e){Object.keys(e).forEach((function(t){var i=e[t];if(void 0===i(void 0,{type:DV.INIT}))throw new Error(NV(12));if(void 0===i(void 0,{type:DV.PROBE_UNKNOWN_ACTION()}))throw new Error(NV(13))}))}(i)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var n=!1,r={},a=0;a<o.length;a++){var l=o[a],c=i[l],h=e[l],u=c(h,t);if(void 0===u){t&&t.type;throw new Error(NV(14))}r[l]=u,n=n||u!==h}return(n=n||o.length!==Object.keys(e).length)?r:e}}function RV(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function BV(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(){var i=e.apply(void 0,arguments),n=function(){throw new Error(NV(15))},r={getState:i.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=t.map((function(e){return e(r)}));return n=RV.apply(void 0,s)(i.dispatch),LV(LV({},i),{},{dispatch:n})}}}function FV(e){return function(t){var i=t.dispatch,n=t.getState;return function(t){return function(r){return"function"==typeof r?r(i,n,e):t(r)}}}}var WV=FV();WV.withExtraArgument=FV;const VV=WV;function zV(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(i.length?" "+i.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function HV(e){return!!e&&!!e[Oz]}function jV(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object||"function"==typeof i&&Function.toString.call(i)===Dz}(e)||Array.isArray(e)||!!e[Mz]||!!e.constructor[Mz]||YV(e)||XV(e))}function UV(e,t,i){void 0===i&&(i=!1),0===GV(e)?(i?Object.keys:Iz)(e).forEach((function(n){i&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(i,n){return t(n,i,e)}))}function GV(e){var t=e[Oz];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:YV(e)?2:XV(e)?3:0}function KV(e,t){return 2===GV(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function $V(e,t){return 2===GV(e)?e.get(t):e[t]}function qV(e,t,i){var n=GV(e);2===n?e.set(t,i):3===n?(e.delete(t),e.add(i)):e[t]=i}function ZV(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function YV(e){return Ez&&e instanceof Map}function XV(e){return Tz&&e instanceof Set}function QV(e){return e.o||e.t}function JV(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Az(e);delete t[Oz];for(var i=Iz(t),n=0;n<i.length;n++){var r=i[n],s=t[r];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[r]})}return Object.create(Object.getPrototypeOf(e),t)}function ez(e,t){return void 0===t&&(t=!1),iz(e)||HV(e)||!jV(e)||(GV(e)>1&&(e.set=e.add=e.clear=e.delete=tz),Object.freeze(e),t&&UV(e,(function(e,t){return ez(t,!0)}),!0)),e}function tz(){zV(2)}function iz(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function nz(e){var t=Pz[e];return t||zV(18,e),t}function rz(e,t){Pz[e]||(Pz[e]=t)}function sz(){return xz}function oz(e,t){t&&(nz("Patches"),e.u=[],e.s=[],e.v=t)}function az(e){lz(e),e.p.forEach(hz),e.p=null}function lz(e){e===xz&&(xz=e.l)}function cz(e){return xz={p:[],l:xz,h:e,m:!0,_:0}}function hz(e){var t=e[Oz];0===t.i||1===t.i?t.j():t.O=!0}function uz(e,t){t._=t.p.length;var i=t.p[0],n=void 0!==e&&e!==i;return t.h.g||nz("ES5").S(t,e,n),n?(i[Oz].P&&(az(t),zV(4)),jV(e)&&(e=dz(t,e),t.l||pz(t,e)),t.u&&nz("Patches").M(i[Oz],e,t.u,t.s)):e=dz(t,i,[]),az(t),t.u&&t.v(t.u,t.s),e!==Nz?e:void 0}function dz(e,t,i){if(iz(t))return t;var n=t[Oz];if(!n)return UV(t,(function(r,s){return fz(e,n,t,r,s,i)}),!0),t;if(n.A!==e)return t;if(!n.P)return pz(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var r=4===n.i||5===n.i?n.o=JV(n.k):n.o;UV(3===n.i?new Set(r):r,(function(t,s){return fz(e,n,r,t,s,i)})),pz(e,r,!1),i&&e.u&&nz("Patches").R(n,i,e.u,e.s)}return n.o}function fz(e,t,i,n,r,s){if(HV(r)){var o=dz(e,r,s&&t&&3!==t.i&&!KV(t.D,n)?s.concat(n):void 0);if(qV(i,n,o),!HV(o))return;e.m=!1}if(jV(r)&&!iz(r)){if(!e.h.F&&e._<1)return;dz(e,r),t&&t.A.l||pz(e,r)}}function pz(e,t,i){void 0===i&&(i=!1),e.h.F&&e.m&&ez(t,i)}function gz(e,t){var i=e[Oz];return(i?QV(i):e)[t]}function mz(e,t){if(t in e)for(var i=Object.getPrototypeOf(e);i;){var n=Object.getOwnPropertyDescriptor(i,t);if(n)return n;i=Object.getPrototypeOf(i)}}function bz(e){e.P||(e.P=!0,e.l&&bz(e.l))}function vz(e){e.o||(e.o=JV(e.t))}function yz(e,t,i){var n=YV(t)?nz("MapSet").N(t,i):XV(t)?nz("MapSet").T(t,i):e.g?function(e,t){var i=Array.isArray(e),n={i:i?1:0,A:t?t.A:sz(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},r=n,s=Rz;i&&(r=[n],s=Bz);var o=Proxy.revocable(r,s),a=o.revoke,l=o.proxy;return n.k=l,n.j=a,l}(t,i):nz("ES5").J(t,i);return(i?i.A:sz()).p.push(n),n}function _z(e){return HV(e)||zV(22,e),function e(t){if(!jV(t))return t;var i,n=t[Oz],r=GV(t);if(n){if(!n.P&&(n.i<4||!nz("ES5").K(n)))return n.t;n.I=!0,i=wz(t,r),n.I=!1}else i=wz(t,r);return UV(i,(function(t,r){n&&$V(n.t,t)===r||qV(i,t,e(r))})),3===r?new Set(i):i}(e)}function wz(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return JV(e)}function Sz(){function e(e,t){var i=r[e];return i?i.enumerable=t:r[e]=i={configurable:!0,enumerable:t,get:function(){var t=this[Oz];return Rz.get(t,e)},set:function(t){var i=this[Oz];Rz.set(i,e,t)}},i}function t(e){for(var t=e.length-1;t>=0;t--){var r=e[t][Oz];if(!r.P)switch(r.i){case 5:n(r)&&bz(r);break;case 4:i(r)&&bz(r)}}}function i(e){for(var t=e.t,i=e.k,n=Iz(i),r=n.length-1;r>=0;r--){var s=n[r];if(s!==Oz){var o=t[s];if(void 0===o&&!KV(t,s))return!0;var a=i[s],l=a&&a[Oz];if(l?l.t!==o:!ZV(a,o))return!0}}var c=!!t[Oz];return n.length!==Iz(t).length+(c?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var i=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!i||i.get)}var r={};rz("ES5",{J:function(t,i){var n=Array.isArray(t),r=function(t,i){if(t){for(var n=Array(i.length),r=0;r<i.length;r++)Object.defineProperty(n,""+r,e(r,!0));return n}var s=Az(i);delete s[Oz];for(var o=Iz(s),a=0;a<o.length;a++){var l=o[a];s[l]=e(l,t||!!s[l].enumerable)}return Object.create(Object.getPrototypeOf(i),s)}(n,t),s={i:n?5:4,A:i?i.A:sz(),P:!1,I:!1,D:{},l:i,t,k:r,o:null,O:!1,C:!1};return Object.defineProperty(r,Oz,{value:s,writable:!0}),r},S:function(e,i,r){r?HV(i)&&i[Oz].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var i=t[Oz];if(i){var r=i.t,s=i.k,o=i.D,a=i.i;if(4===a)UV(s,(function(t){t!==Oz&&(void 0!==r[t]||KV(r,t)?o[t]||e(s[t]):(o[t]=!0,bz(i)))})),UV(r,(function(e){void 0!==s[e]||KV(s,e)||(o[e]=!1,bz(i))}));else if(5===a){if(n(i)&&(bz(i),o.length=!0),s.length<r.length)for(var l=s.length;l<r.length;l++)o[l]=!1;else for(var c=r.length;c<s.length;c++)o[c]=!0;for(var h=Math.min(s.length,r.length),u=0;u<h;u++)void 0===o[u]&&e(s[u])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?i(e):n(e)}})}var Cz,xz,kz="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ez="undefined"!=typeof Map,Tz="undefined"!=typeof Set,Lz="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Nz=kz?Symbol.for("immer-nothing"):((Cz={})["immer-nothing"]=!0,Cz),Mz=kz?Symbol.for("immer-draftable"):"__$immer_draftable",Oz=kz?Symbol.for("immer-state"):"__$immer_state",Dz=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Iz="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Az=Object.getOwnPropertyDescriptors||function(e){var t={};return Iz(e).forEach((function(i){t[i]=Object.getOwnPropertyDescriptor(e,i)})),t},Pz={},Rz={get:function(e,t){if(t===Oz)return e;var i=QV(e);if(!KV(i,t))return function(e,t,i){var n,r=mz(t,i);return r?"value"in r?r.value:null===(n=r.get)||void 0===n?void 0:n.call(e.k):void 0}(e,i,t);var n=i[t];return e.I||!jV(n)?n:n===gz(e.t,t)?(vz(e),e.o[t]=yz(e.A.h,n,e)):n},has:function(e,t){return t in QV(e)},ownKeys:function(e){return Reflect.ownKeys(QV(e))},set:function(e,t,i){var n=mz(QV(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,i),!0;if(!e.P){var r=gz(QV(e),t),s=null==r?void 0:r[Oz];if(s&&s.t===i)return e.o[t]=i,e.D[t]=!1,!0;if(ZV(i,r)&&(void 0!==i||KV(e.t,t)))return!0;vz(e),bz(e)}return e.o[t]===i&&"number"!=typeof i&&(void 0!==i||t in e.o)||(e.o[t]=i,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==gz(e.t,t)||t in e.t?(e.D[t]=!1,vz(e),bz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var i=QV(e),n=Reflect.getOwnPropertyDescriptor(i,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:i[t]}:n},defineProperty:function(){zV(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){zV(12)}},Bz={};UV(Rz,(function(e,t){Bz[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Bz.deleteProperty=function(e,t){return Rz.deleteProperty.call(this,e[0],t)},Bz.set=function(e,t,i){return Rz.set.call(this,e[0],t,i,e[0])};var Fz=new(function(){function e(e){var t=this;this.g=Lz,this.F=!0,this.produce=function(e,i,n){if("function"==typeof e&&"function"!=typeof i){var r=i;i=e;var s=t;return function(e){var t=this;void 0===e&&(e=r);for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return s.produce(e,(function(e){var n;return(n=i).call.apply(n,[t,e].concat(o))}))}}var o;if("function"!=typeof i&&zV(6),void 0!==n&&"function"!=typeof n&&zV(7),jV(e)){var a=cz(t),l=yz(t,e,void 0),c=!0;try{o=i(l),c=!1}finally{c?az(a):lz(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return oz(a,n),uz(e,a)}),(function(e){throw az(a),e})):(oz(a,n),uz(o,a))}if(!e||"object"!=typeof e){if((o=i(e))===Nz)return;return void 0===o&&(o=e),t.F&&ez(o,!0),o}zV(21,e)},this.produceWithPatches=function(e,i){return"function"==typeof e?function(i){for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return t.produceWithPatches(i,(function(t){return e.apply(void 0,[t].concat(r))}))}:[t.produce(e,i,(function(e,t){n=e,r=t})),n,r];var n,r},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){jV(e)||zV(8),HV(e)&&(e=_z(e));var t=cz(this),i=yz(this,e,void 0);return i[Oz].C=!0,lz(t),i},t.finishDraft=function(e,t){var i=(e&&e[Oz]).A;return oz(i,t),uz(void 0,i)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Lz&&zV(20),this.g=e},t.applyPatches=function(e,t){var i;for(i=t.length-1;i>=0;i--){var n=t[i];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var r=nz("Patches").$;return HV(e)?r(e,t):this.produce(e,(function(e){return r(e,t.slice(i+1))}))},e}()),Wz=Fz.produce;Fz.produceWithPatches.bind(Fz),Fz.setAutoFreeze.bind(Fz),Fz.setUseProxies.bind(Fz),Fz.applyPatches.bind(Fz),Fz.createDraft.bind(Fz),Fz.finishDraft.bind(Fz);const Vz=Wz;var zz=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hz=function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e},jz=Object.defineProperty,Uz=Object.prototype.hasOwnProperty,Gz=Object.getOwnPropertySymbols,Kz=Object.prototype.propertyIsEnumerable,$z=function(e,t,i){return t in e?jz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i},qz=function(e,t){for(var i in t||(t={}))Uz.call(t,i)&&$z(e,i,t[i]);if(Gz)for(var n=0,r=Gz(t);n<r.length;n++){i=r[n];Kz.call(t,i)&&$z(e,i,t[i])}return e},Zz="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?RV:RV.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Yz(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}var Xz=function(e){function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,i)||this;return Object.setPrototypeOf(r,t.prototype),r}return zz(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Hz([void 0],e[0].concat(this)))):new(t.bind.apply(t,Hz([void 0],e.concat(this))))},t}(Array);function Qz(e){void 0===e&&(e={});var t=e.thunk,i=void 0===t||t,n=(e.immutableCheck,e.serializableCheck,new Xz);return i&&(!function(e){return"boolean"==typeof e}(i)?n.push(VV.withExtraArgument(i.extraArgument)):n.push(VV)),n}function Jz(e){var t,i=function(e){return Qz(e)},n=e||{},r=n.reducer,s=void 0===r?void 0:r,o=n.middleware,a=void 0===o?i():o,l=n.devTools,c=void 0===l||l,h=n.preloadedState,u=void 0===h?void 0:h,d=n.enhancers,f=void 0===d?void 0:d;if("function"==typeof s)t=s;else{if(!Yz(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=PV(s)}var p=a;"function"==typeof p&&(p=p(i));var g=BV.apply(void 0,p),m=RV;c&&(m=Zz(qz({trace:!1},"object"==typeof c&&c)));var b=[g];return Array.isArray(f)?b=Hz([g],f):"function"==typeof f&&(b=f(b)),AV(t,u,m.apply(void 0,b))}function eH(e,t){function i(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(t){var r=t.apply(void 0,i);if(!r)throw new Error("prepareAction did not return an object");return qz(qz({type:e,payload:r.payload},"meta"in r&&{meta:r.meta}),"error"in r&&{error:r.error})}return{type:e,payload:i[0]}}return i.toString=function(){return""+e},i.type=e,i.match=function(t){return t.type===e},i}function tH(e){var t,i={},n=[],r={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(n in i)throw new Error("addCase cannot be called with two reducers for the same action type");return i[n]=t,r},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),r},addDefaultCase:function(e){return t=e,r}};return e(r),[i,n,t]}function iH(e){var t=e.name,i=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var n=e.reducers||{},r="function"==typeof e.extraReducers?tH(e.extraReducers):[e.extraReducers],s=r[0],o=void 0===s?{}:s,a=r[1],l=void 0===a?[]:a,c=r[2],h=void 0===c?void 0:c,u=Object.keys(n),d={},f={},p={};u.forEach((function(e){var i,r,s=n[e],o=t+"/"+e;"reducer"in s?(i=s.reducer,r=s.prepare):i=s,d[e]=i,f[o]=i,p[e]=r?eH(o,r):eH(o)}));var g=function(e,t,i,n){void 0===i&&(i=[]),Sz();var r="function"==typeof t?tH(t):[t,i,n],s=r[0],o=r[1],a=r[2],l=Vz(e,(function(){}));return function(e,t){void 0===e&&(e=l);var i=Hz([s[t.type]],o.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===i.filter((function(e){return!!e})).length&&(i=[a]),i.reduce((function(e,i){if(i){var n;if(HV(e))return void 0===(n=i(e,t))?e:n;if(jV(e))return Vz(e,(function(e){return i(e,t)}));if(void 0===(n=i(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}}(i,qz(qz({},o),f),l,h);return{name:t,reducer:g,actions:p,caseReducers:d}}function nH(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function rH(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?nH(Object(i),!0).forEach((function(t){sH(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nH(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function sH(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function oH(e){return function(e){if(Array.isArray(e))return aH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return aH(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return aH(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aH(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var lH={tabs:[],activeTabIndex:-1},cH=iH({name:"tab",initialState:lH,reducers:{add:function(e,t){var i=!1;if(e.tabs.forEach((function(n,r){n.filePath===t.payload.filePath&&(e.activeTabIndex=r,i=!0)})),!i){var n=t.payload,r=n.fileText,s=n.filePath;t.payload.createMonacoModel({fileText:r,filePath:s}),e.tabs=[].concat(oH(e.tabs),[rH(rH({},t.payload),{},{isChanged:!1})]),e.activeTabIndex=e.tabs.length-1}},remove:function(e,t){e.activeTabIndex-=1,e.tabs=e.tabs.filter((function(e,i){return i!==t.payload}))},change:function(e){e.tabs[e.activeTabIndex].isChanged=!0},changed:function(e){e.tabs[e.activeTabIndex].isChanged=!1,e.tabs=oH(e.tabs)},select:function(e,t){e.activeTabIndex=t.payload},refresh:function(e){e.activeTabIndex=lH.activeTabIndex,e.tabs=lH.tabs}}}),hH=function(e){return e.tab.tabs},uH=function(e){return e.tab.activeTabIndex},dH=cH.actions,fH=dH.add,pH=dH.remove,gH=dH.select,mH=dH.changed,bH=dH.change,vH=dH.refresh;const yH=cH.reducer;var _H=iH({name:"theme",initialState:{theme:"dark"},reducers:{change:function(e){e.theme="dark"===e.theme?"light":"dark"}}}),wH=function(e){return e.theme.theme},SH=_H.actions.change;const CH=_H.reducer;const xH=(0,r.createContext)({});var kH=i(85622),EH=i.n(kH),TH=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.component,o=void 0===s?"div":s,a=e.square,l=void 0!==a&&a,u=e.elevation,d=void 0===u?1:u,f=e.variant,p=void 0===f?"elevation":f,g=(0,h.Z)(e,["classes","className","component","square","elevation","variant"]);return r.createElement(o,(0,c.Z)({className:(0,z.Z)(i.root,n,"outlined"===p?i.outlined:i["elevation".concat(d)],!l&&i.rounded),ref:t},g))}));const LH=(0,R.Z)((function(e){var t={};return e.shadows.forEach((function(e,i){t["elevation".concat(i)]={boxShadow:e}})),(0,c.Z)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(TH);i(65122);var NH,MH=i(80713);function OH(){if(NH)return NH;var e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),NH="reverse",e.scrollLeft>0?NH="default":(e.scrollLeft=1,0===e.scrollLeft&&(NH="negative")),document.body.removeChild(e),NH}function DH(e,t){var i=e.scrollLeft;if("rtl"!==t)return i;switch(OH()){case"negative":return e.scrollWidth-e.clientWidth+i;case"reverse":return e.scrollWidth-e.clientWidth-i;default:return i}}function IH(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}var AH={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function PH(e){var t=e.onChange,i=(0,h.Z)(e,["onChange"]),n=r.useRef(),s=r.useRef(null),o=function(){n.current=s.current.offsetHeight-s.current.clientHeight};return r.useEffect((function(){var e=(0,f.Z)((function(){var e=n.current;o(),e!==n.current&&t(n.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[t]),r.useEffect((function(){o(),t(n.current)}),[t]),r.createElement("div",(0,c.Z)({style:AH,ref:s},i))}var RH=i(93871),BH=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.color,o=e.orientation,a=(0,h.Z)(e,["classes","className","color","orientation"]);return r.createElement("span",(0,c.Z)({className:(0,z.Z)(i.root,i["color".concat((0,RH.Z)(s))],n,"vertical"===o&&i.vertical),ref:t},a))}));const FH=(0,R.Z)((function(e){return{root:{position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},colorPrimary:{backgroundColor:e.palette.primary.main},colorSecondary:{backgroundColor:e.palette.secondary.main},vertical:{height:"100%",width:2,right:0}}}),{name:"PrivateTabIndicator"})(BH);var WH=i(63786);const VH=(0,WH.Z)(r.createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),zH=(0,WH.Z)(r.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");var HH=i(24896),jH=i(63349);function UH(e,t){var i=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){i[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),i}function GH(e,t,i){return null!=i[t]?i[t]:e.props[t]}function KH(e,t,i){var n=UH(e.children),s=function(e,t){function i(i){return i in t?t[i]:e[i]}e=e||{},t=t||{};var n,r=Object.create(null),s=[];for(var o in e)o in t?s.length&&(r[o]=s,s=[]):s.push(o);var a={};for(var l in t){if(r[l])for(n=0;n<r[l].length;n++){var c=r[l][n];a[r[l][n]]=i(c)}a[l]=i(l)}for(n=0;n<s.length;n++)a[s[n]]=i(s[n]);return a}(t,n);return Object.keys(s).forEach((function(o){var a=s[o];if((0,r.isValidElement)(a)){var l=o in t,c=o in n,h=t[o],u=(0,r.isValidElement)(h)&&!h.props.in;!c||l&&!u?c||!l||u?c&&l&&(0,r.isValidElement)(h)&&(s[o]=(0,r.cloneElement)(a,{onExited:i.bind(null,a),in:h.props.in,exit:GH(a,"exit",e),enter:GH(a,"enter",e)})):s[o]=(0,r.cloneElement)(a,{in:!1}):s[o]=(0,r.cloneElement)(a,{onExited:i.bind(null,a),in:!0,exit:GH(a,"exit",e),enter:GH(a,"enter",e)})}})),s}var $H=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},qH=function(e){function t(t,i){var n,r=(n=e.call(this,t,i)||this).handleExited.bind((0,jH.Z)(n));return n.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},n}(0,g.Z)(t,e);var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var i,n,s=t.children,o=t.handleExited;return{children:t.firstRender?(i=e,n=o,UH(i.children,(function(e){return(0,r.cloneElement)(e,{onExited:n.bind(null,e),in:!0,appear:GH(e,"appear",i),enter:GH(e,"enter",i),exit:GH(e,"exit",i)})}))):KH(e,s,o),firstRender:!1}},i.handleExited=function(e,t){var i=UH(this.props.children);e.key in i||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var i=(0,c.Z)({},t.children);return delete i[e.key],{children:i}})))},i.render=function(){var e=this.props,t=e.component,i=e.childFactory,n=(0,p.Z)(e,["component","childFactory"]),s=this.state.contextValue,o=$H(this.state.children).map(i);return delete n.appear,delete n.enter,delete n.exit,null===t?r.createElement(b.Provider,{value:s},o):r.createElement(b.Provider,{value:s},r.createElement(t,n,o))},t}(r.Component);qH.propTypes={},qH.defaultProps={component:"div",childFactory:function(e){return e}};const ZH=qH;var YH="undefined"==typeof window?r.useEffect:r.useLayoutEffect;const XH=function(e){var t=e.classes,i=e.pulsate,n=void 0!==i&&i,s=e.rippleX,o=e.rippleY,a=e.rippleSize,l=e.in,c=e.onExited,h=void 0===c?function(){}:c,u=e.timeout,d=r.useState(!1),f=d[0],p=d[1],g=(0,z.Z)(t.ripple,t.rippleVisible,n&&t.ripplePulsate),m={width:a,height:a,top:-a/2+o,left:-a/2+s},b=(0,z.Z)(t.child,f&&t.childLeaving,n&&t.childPulsate),v=(0,K.Z)(h);return YH((function(){if(!l){p(!0);var e=setTimeout(v,u);return function(){clearTimeout(e)}}}),[v,l,u]),r.createElement("span",{className:g,style:m},r.createElement("span",{className:b}))};var QH=r.forwardRef((function(e,t){var i=e.center,n=void 0!==i&&i,s=e.classes,o=e.className,a=(0,h.Z)(e,["center","classes","className"]),l=r.useState([]),u=l[0],d=l[1],f=r.useRef(0),p=r.useRef(null);r.useEffect((function(){p.current&&(p.current(),p.current=null)}),[u]);var g=r.useRef(!1),m=r.useRef(null),b=r.useRef(null),v=r.useRef(null);r.useEffect((function(){return function(){clearTimeout(m.current)}}),[]);var y=r.useCallback((function(e){var t=e.pulsate,i=e.rippleX,n=e.rippleY,o=e.rippleSize,a=e.cb;d((function(e){return[].concat((0,Ki.Z)(e),[r.createElement(XH,{key:f.current,classes:s,timeout:550,pulsate:t,rippleX:i,rippleY:n,rippleSize:o})])})),f.current+=1,p.current=a}),[s]),_=r.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,r=t.pulsate,s=void 0!==r&&r,o=t.center,a=void 0===o?n||t.pulsate:o,l=t.fakeElement,c=void 0!==l&&l;if("mousedown"===e.type&&g.current)g.current=!1;else{"touchstart"===e.type&&(g.current=!0);var h,u,d,f=c?null:v.current,p=f?f.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(a||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)h=Math.round(p.width/2),u=Math.round(p.height/2);else{var _=e.touches?e.touches[0]:e,w=_.clientX,S=_.clientY;h=Math.round(w-p.left),u=Math.round(S-p.top)}if(a)(d=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2==0&&(d+=1);else{var C=2*Math.max(Math.abs((f?f.clientWidth:0)-h),h)+2,x=2*Math.max(Math.abs((f?f.clientHeight:0)-u),u)+2;d=Math.sqrt(Math.pow(C,2)+Math.pow(x,2))}e.touches?null===b.current&&(b.current=function(){y({pulsate:s,rippleX:h,rippleY:u,rippleSize:d,cb:i})},m.current=setTimeout((function(){b.current&&(b.current(),b.current=null)}),80)):y({pulsate:s,rippleX:h,rippleY:u,rippleSize:d,cb:i})}}),[n,y]),w=r.useCallback((function(){_({},{pulsate:!0})}),[_]),S=r.useCallback((function(e,t){if(clearTimeout(m.current),"touchend"===e.type&&b.current)return e.persist(),b.current(),b.current=null,void(m.current=setTimeout((function(){S(e,t)})));b.current=null,d((function(e){return e.length>0?e.slice(1):e})),p.current=t}),[]);return r.useImperativeHandle(t,(function(){return{pulsate:w,start:_,stop:S}}),[w,_,S]),r.createElement("span",(0,c.Z)({className:(0,z.Z)(s.root,o),ref:v},a),r.createElement(ZH,{component:null,exit:!0},u))}));const JH=(0,R.Z)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(r.memo(QH));var ej=r.forwardRef((function(e,t){var i=e.action,n=e.buttonRef,o=e.centerRipple,a=void 0!==o&&o,l=e.children,u=e.classes,d=e.className,f=e.component,p=void 0===f?"button":f,g=e.disabled,m=void 0!==g&&g,b=e.disableRipple,v=void 0!==b&&b,y=e.disableTouchRipple,_=void 0!==y&&y,w=e.focusRipple,S=void 0!==w&&w,C=e.focusVisibleClassName,x=e.onBlur,k=e.onClick,T=e.onFocus,L=e.onFocusVisible,N=e.onKeyDown,M=e.onKeyUp,O=e.onMouseDown,D=e.onMouseLeave,I=e.onMouseUp,A=e.onTouchEnd,P=e.onTouchMove,R=e.onTouchStart,B=e.onDragLeave,F=e.tabIndex,W=void 0===F?0:F,V=e.TouchRippleProps,H=e.type,j=void 0===H?"button":H,U=(0,h.Z)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),G=r.useRef(null);var $=r.useRef(null),q=r.useState(!1),Z=q[0],Y=q[1];m&&Z&&Y(!1);var X=(0,HH.Z)(),Q=X.isFocusVisible,J=X.onBlurVisible,ee=X.ref;function te(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return(0,K.Z)((function(n){return t&&t(n),!i&&$.current&&$.current[e](n),!0}))}r.useImperativeHandle(i,(function(){return{focusVisible:function(){Y(!0),G.current.focus()}}}),[]),r.useEffect((function(){Z&&S&&!v&&$.current.pulsate()}),[v,S,Z]);var ie=te("start",O),ne=te("stop",B),re=te("stop",I),se=te("stop",(function(e){Z&&e.preventDefault(),D&&D(e)})),oe=te("start",R),ae=te("stop",A),le=te("stop",P),ce=te("stop",(function(e){Z&&(J(e),Y(!1)),x&&x(e)}),!1),he=(0,K.Z)((function(e){G.current||(G.current=e.currentTarget),Q(e)&&(Y(!0),L&&L(e)),T&&T(e)})),ue=function(){var e=s.findDOMNode(G.current);return p&&"button"!==p&&!("A"===e.tagName&&e.href)},de=r.useRef(!1),fe=(0,K.Z)((function(e){S&&!de.current&&Z&&$.current&&" "===e.key&&(de.current=!0,e.persist(),$.current.stop(e,(function(){$.current.start(e)}))),e.target===e.currentTarget&&ue()&&" "===e.key&&e.preventDefault(),N&&N(e),e.target===e.currentTarget&&ue()&&"Enter"===e.key&&!m&&(e.preventDefault(),k&&k(e))})),pe=(0,K.Z)((function(e){S&&" "===e.key&&$.current&&Z&&!e.defaultPrevented&&(de.current=!1,e.persist(),$.current.stop(e,(function(){$.current.pulsate(e)}))),M&&M(e),k&&e.target===e.currentTarget&&ue()&&" "===e.key&&!e.defaultPrevented&&k(e)})),ge=p;"button"===ge&&U.href&&(ge="a");var me={};"button"===ge?(me.type=j,me.disabled=m):("a"===ge&&U.href||(me.role="button"),me["aria-disabled"]=m);var be=(0,E.Z)(n,t),ve=(0,E.Z)(ee,G),ye=(0,E.Z)(be,ve),_e=r.useState(!1),we=_e[0],Se=_e[1];r.useEffect((function(){Se(!0)}),[]);var Ce=we&&!v&&!m;return r.createElement(ge,(0,c.Z)({className:(0,z.Z)(u.root,d,Z&&[u.focusVisible,C],m&&u.disabled),onBlur:ce,onClick:k,onFocus:he,onKeyDown:fe,onKeyUp:pe,onMouseDown:ie,onMouseLeave:se,onMouseUp:re,onDragLeave:ne,onTouchEnd:ae,onTouchMove:le,onTouchStart:oe,ref:ye,tabIndex:m?-1:W},me,U),l,Ce?r.createElement(JH,(0,c.Z)({ref:$,center:a},V)):null)}));const tj=(0,R.Z)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(ej);var ij=r.createElement(VH,{fontSize:"small"}),nj=r.createElement(zH,{fontSize:"small"}),rj=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.direction,o=e.orientation,a=e.disabled,l=(0,h.Z)(e,["classes","className","direction","orientation","disabled"]);return r.createElement(tj,(0,c.Z)({component:"div",className:(0,z.Z)(i.root,n,a&&i.disabled,"vertical"===o&&i.vertical),ref:t,role:null,tabIndex:null},l),"left"===s?ij:nj)}));const sj=(0,R.Z)({root:{width:40,flexShrink:0,opacity:.8,"&$disabled":{opacity:0}},vertical:{width:"100%",height:40,"& svg":{transform:"rotate(90deg)"}},disabled:{}},{name:"MuiTabScrollButton"})(rj);var oj=r.forwardRef((function(e,t){var i=e["aria-label"],n=e["aria-labelledby"],s=e.action,o=e.centered,a=void 0!==o&&o,l=e.children,u=e.classes,d=e.className,p=e.component,g=void 0===p?"div":p,m=e.indicatorColor,b=void 0===m?"secondary":m,v=e.onChange,y=e.orientation,_=void 0===y?"horizontal":y,w=e.ScrollButtonComponent,S=void 0===w?sj:w,C=e.scrollButtons,x=void 0===C?"auto":C,k=e.selectionFollowsFocus,E=e.TabIndicatorProps,T=void 0===E?{}:E,L=e.TabScrollButtonProps,M=e.textColor,O=void 0===M?"inherit":M,D=e.value,I=e.variant,A=void 0===I?"standard":I,P=(0,h.Z)(e,["aria-label","aria-labelledby","action","centered","children","classes","className","component","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant"]),R=N(),B="scrollable"===A,F="rtl"===R.direction,W="vertical"===_,V=W?"scrollTop":"scrollLeft",H=W?"top":"left",j=W?"bottom":"right",U=W?"clientHeight":"clientWidth",G=W?"height":"width";var $=r.useState(!1),q=$[0],Z=$[1],Y=r.useState({}),X=Y[0],Q=Y[1],J=r.useState({start:!1,end:!1}),ee=J[0],te=J[1],ie=r.useState({overflow:"hidden",marginBottom:null}),ne=ie[0],re=ie[1],se=new Map,oe=r.useRef(null),ae=r.useRef(null),le=function(){var e,t,i=oe.current;if(i){var n=i.getBoundingClientRect();e={clientWidth:i.clientWidth,scrollLeft:i.scrollLeft,scrollTop:i.scrollTop,scrollLeftNormalized:DH(i,R.direction),scrollWidth:i.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(i&&!1!==D){var r=ae.current.children;if(r.length>0){var s=r[se.get(D)];0,t=s?s.getBoundingClientRect():null}}return{tabsMeta:e,tabMeta:t}},ce=(0,K.Z)((function(){var e,t=le(),i=t.tabsMeta,n=t.tabMeta,r=0;if(n&&i)if(W)r=n.top-i.top+i.scrollTop;else{var s=F?i.scrollLeftNormalized+i.clientWidth-i.scrollWidth:i.scrollLeft;r=n.left-i.left+s}var o=(e={},(0,Qi.Z)(e,H,r),(0,Qi.Z)(e,G,n?n[G]:0),e);if(isNaN(X[H])||isNaN(X[G]))Q(o);else{var a=Math.abs(X[H]-o[H]),l=Math.abs(X[G]-o[G]);(a>=1||l>=1)&&Q(o)}})),he=function(e){!function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},s=n.ease,o=void 0===s?IH:s,a=n.duration,l=void 0===a?300:a,c=null,h=t[e],u=!1,d=function(){u=!0},f=function n(s){if(u)r(new Error("Animation cancelled"));else{null===c&&(c=s);var a=Math.min(1,(s-c)/l);t[e]=o(a)*(i-h)+h,a>=1?requestAnimationFrame((function(){r(null)})):requestAnimationFrame(n)}};h===i?r(new Error("Element already at target position")):requestAnimationFrame(f)}(V,oe.current,e)},ue=function(e){var t=oe.current[V];W?t+=e:(t+=e*(F?-1:1),t*=F&&"reverse"===OH()?-1:1),he(t)},de=function(){ue(-oe.current[U])},fe=function(){ue(oe.current[U])},pe=r.useCallback((function(e){re({overflow:null,marginBottom:-e})}),[]),ge=(0,K.Z)((function(){var e=le(),t=e.tabsMeta,i=e.tabMeta;if(i&&t)if(i[H]<t[H]){var n=t[V]+(i[H]-t[H]);he(n)}else if(i[j]>t[j]){var r=t[V]+(i[j]-t[j]);he(r)}})),me=(0,K.Z)((function(){if(B&&"off"!==x){var e,t,i=oe.current,n=i.scrollTop,r=i.scrollHeight,s=i.clientHeight,o=i.scrollWidth,a=i.clientWidth;if(W)e=n>1,t=n<r-s-1;else{var l=DH(oe.current,R.direction);e=F?l<o-a-1:l>1,t=F?l>1:l<o-a-1}e===ee.start&&t===ee.end||te({start:e,end:t})}}));r.useEffect((function(){var e=(0,f.Z)((function(){ce(),me()})),t=(0,MH.Z)(oe.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}),[ce,me]);var be=r.useCallback((0,f.Z)((function(){me()})));r.useEffect((function(){return function(){be.clear()}}),[be]),r.useEffect((function(){Z(!0)}),[]),r.useEffect((function(){ce(),me()})),r.useEffect((function(){ge()}),[ge,X]),r.useImperativeHandle(s,(function(){return{updateIndicator:ce,updateScrollButtons:me}}),[ce,me]);var ve=r.createElement(FH,(0,c.Z)({className:u.indicator,orientation:_,color:b},T,{style:(0,c.Z)({},X,T.style)})),ye=0,_e=r.Children.map(l,(function(e){if(!r.isValidElement(e))return null;var t=void 0===e.props.value?ye:e.props.value;se.set(t,ye);var i=t===D;return ye+=1,r.cloneElement(e,{fullWidth:"fullWidth"===A,indicator:i&&!q&&ve,selected:i,selectionFollowsFocus:k,onChange:v,textColor:O,value:t})})),we=function(){var e={};e.scrollbarSizeListener=B?r.createElement(PH,{className:u.scrollable,onChange:pe}):null;var t=ee.start||ee.end,i=B&&("auto"===x&&t||"desktop"===x||"on"===x);return e.scrollButtonStart=i?r.createElement(S,(0,c.Z)({orientation:_,direction:F?"right":"left",onClick:de,disabled:!ee.start,className:(0,z.Z)(u.scrollButtons,"on"!==x&&u.scrollButtonsDesktop)},L)):null,e.scrollButtonEnd=i?r.createElement(S,(0,c.Z)({orientation:_,direction:F?"left":"right",onClick:fe,disabled:!ee.end,className:(0,z.Z)(u.scrollButtons,"on"!==x&&u.scrollButtonsDesktop)},L)):null,e}();return r.createElement(g,(0,c.Z)({className:(0,z.Z)(u.root,d,W&&u.vertical),ref:t},P),we.scrollButtonStart,we.scrollbarSizeListener,r.createElement("div",{className:(0,z.Z)(u.scroller,B?u.scrollable:u.fixed),style:ne,ref:oe,onScroll:be},r.createElement("div",{"aria-label":i,"aria-labelledby":n,className:(0,z.Z)(u.flexContainer,W&&u.flexContainerVertical,a&&!B&&u.centered),onKeyDown:function(e){var t=e.target;if("tab"===t.getAttribute("role")){var i=null,n="vertical"!==_?"ArrowLeft":"ArrowUp",r="vertical"!==_?"ArrowRight":"ArrowDown";switch("vertical"!==_&&"rtl"===R.direction&&(n="ArrowRight",r="ArrowLeft"),e.key){case n:i=t.previousElementSibling||ae.current.lastChild;break;case r:i=t.nextElementSibling||ae.current.firstChild;break;case"Home":i=ae.current.firstChild;break;case"End":i=ae.current.lastChild}null!==i&&(i.focus(),e.preventDefault())}},ref:ae,role:"tablist"},_e),q&&ve),we.scrollButtonEnd)}));const aj=(0,R.Z)((function(e){return{root:{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},vertical:{flexDirection:"column"},flexContainer:{display:"flex"},flexContainerVertical:{flexDirection:"column"},centered:{justifyContent:"center"},scroller:{position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},fixed:{overflowX:"hidden",width:"100%"},scrollable:{overflowX:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},scrollButtons:{},scrollButtonsDesktop:(0,Qi.Z)({},e.breakpoints.down("xs"),{display:"none"}),indicator:{}}}),{name:"MuiTabs"})(oj);var lj=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.disabled,o=void 0!==s&&s,a=e.disableFocusRipple,l=void 0!==a&&a,u=e.fullWidth,d=e.icon,f=e.indicator,p=e.label,g=e.onChange,m=e.onClick,b=e.onFocus,v=e.selected,y=e.selectionFollowsFocus,_=e.textColor,w=void 0===_?"inherit":_,S=e.value,C=e.wrapped,x=void 0!==C&&C,k=(0,h.Z)(e,["classes","className","disabled","disableFocusRipple","fullWidth","icon","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"]);return r.createElement(tj,(0,c.Z)({focusRipple:!l,className:(0,z.Z)(i.root,i["textColor".concat((0,RH.Z)(w))],n,o&&i.disabled,v&&i.selected,p&&d&&i.labelIcon,u&&i.fullWidth,x&&i.wrapped),ref:t,role:"tab","aria-selected":v,disabled:o,onClick:function(e){g&&g(e,S),m&&m(e)},onFocus:function(e){y&&!v&&g&&g(e,S),b&&b(e)},tabIndex:v?0:-1},k),r.createElement("span",{className:i.wrapper},d,p),f)}));const cj=(0,R.Z)((function(e){var t;return{root:(0,c.Z)({},e.typography.button,(t={maxWidth:264,minWidth:72,position:"relative",boxSizing:"border-box",minHeight:48,flexShrink:0,padding:"6px 12px"},(0,Qi.Z)(t,e.breakpoints.up("sm"),{padding:"6px 24px"}),(0,Qi.Z)(t,"overflow","hidden"),(0,Qi.Z)(t,"whiteSpace","normal"),(0,Qi.Z)(t,"textAlign","center"),(0,Qi.Z)(t,e.breakpoints.up("sm"),{minWidth:160}),t)),labelIcon:{minHeight:72,paddingTop:9,"& $wrapper > *:first-child":{marginBottom:6}},textColorInherit:{color:"inherit",opacity:.7,"&$selected":{opacity:1},"&$disabled":{opacity:.5}},textColorPrimary:{color:e.palette.text.secondary,"&$selected":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled}},textColorSecondary:{color:e.palette.text.secondary,"&$selected":{color:e.palette.secondary.main},"&$disabled":{color:e.palette.text.disabled}},selected:{},disabled:{},fullWidth:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},wrapped:{fontSize:e.typography.pxToRem(12),lineHeight:1.5},wrapper:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",flexDirection:"column"}}}),{name:"MuiTab"})(lj);var hj={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},uj=r.forwardRef((function(e,t){var i=e.align,n=void 0===i?"inherit":i,s=e.classes,o=e.className,a=e.color,l=void 0===a?"initial":a,u=e.component,d=e.display,f=void 0===d?"initial":d,p=e.gutterBottom,g=void 0!==p&&p,m=e.noWrap,b=void 0!==m&&m,v=e.paragraph,y=void 0!==v&&v,_=e.variant,w=void 0===_?"body1":_,S=e.variantMapping,C=void 0===S?hj:S,x=(0,h.Z)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),k=u||(y?"p":C[w]||hj[w])||"span";return r.createElement(k,(0,c.Z)({className:(0,z.Z)(s.root,o,"inherit"!==w&&s[w],"initial"!==l&&s["color".concat((0,RH.Z)(l))],b&&s.noWrap,g&&s.gutterBottom,y&&s.paragraph,"inherit"!==n&&s["align".concat((0,RH.Z)(n))],"initial"!==f&&s["display".concat((0,RH.Z)(f))]),ref:t},x))}));const dj=(0,R.Z)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(uj);var fj={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},pj=r.createContext&&r.createContext(fj),gj=function(){return(gj=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},mj=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function bj(e){return e&&e.map((function(e,t){return r.createElement(e.tag,gj({key:t},e.attr),bj(e.child))}))}function vj(e){return function(t){return r.createElement(yj,gj({attr:gj({},e.attr)},t),bj(e.child))}}function yj(e){var t=function(t){var i,n=e.attr,s=e.size,o=e.title,a=mj(e,["attr","size","title"]),l=s||t.size||"1em";return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),r.createElement("svg",gj({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:i,style:gj(gj({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==pj?r.createElement(pj.Consumer,null,(function(e){return t(e)})):t(fj)}function _j(e){return vj({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm52.7 283.3L256 278.6l-52.7 52.7c-6.2 6.2-16.4 6.2-22.6 0-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3l52.7-52.7-52.7-52.7c-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3 6.2-6.2 16.4-6.2 22.6 0l52.7 52.7 52.7-52.7c6.2-6.2 16.4-6.2 22.6 0 6.2 6.2 6.2 16.4 0 22.6L278.6 256l52.7 52.7c6.2 6.2 6.2 16.4 0 22.6-6.2 6.3-16.4 6.3-22.6 0z"}}]})(e)}function wj(e){return vj({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z"}}]})(e)}function Sj(e){return vj({tag:"svg",attr:{viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M13 8V6H7V4h6V2l3 3-3 3zM4 2H3v1h1V2zm7 5h1v6c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v2h-1V1H2v9h9V7zm0 4H1v2h2v-1h3v1h5v-2zM4 6H3v1h1V6zm0-2H3v1h1V4zM3 9h1V8H3v1z"}}]})(e)}function Cj(e){return vj({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.24 7.4a4.15 4.15 0 0 1-1.2 3.6 4.346 4.346 0 0 1-5.41.54L4.8 10.4.5 9.8l.6 4.2 1.31-1.26c2.36 1.74 5.7 1.57 7.84-.54a5.876 5.876 0 0 0 1.74-4.46l-1.75-.34zM2.96 5a4.346 4.346 0 0 1 5.41-.54L7.2 5.6l4.3.6-.6-4.2-1.31 1.26c-2.36-1.74-5.7-1.57-7.85.54C.5 5.03-.06 6.65.01 8.26l1.75.35A4.17 4.17 0 0 1 2.96 5z"}}]})(e)}const xj="_232rWBRntR_D5xqXKeXPQ-",kj="_19jM5cn2q4336cmBupo8dp";var Ej;function Tj(e,t,i,n){Ej||(Ej="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Ej,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function Lj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nj(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Nj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nj(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Mj=Tj(_j,{}),Oj=Tj(wj,{}),Dj=Tj(wj,{});const Ij=function(e){var t=e.isChanged,i=e.onClick,n=Lj((0,r.useState)(!1),2),s=n[0],o=n[1],a=(0,r.useRef)(null),l=function(){return s?Mj:Oj},c=Tj((function(){return s?Dj:Tj(Cj,{className:kj})}),{}),h=Tj(l,{}),u=function(){return t?c:h},d=function(e){return function(){return o(e)}};return r.createElement("div",{role:"button",ref:a,className:xj,onClick:i,onMouseEnter:d(!0),onMouseLeave:d(!1)},Tj(u,{}))};var Aj;function Pj(e,t,i,n){Aj||(Aj="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Aj,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}const Rj=function(){var e=Ye(),t=et(hH),i=et(uH),n=(0,r.useContext)(xH).setMonacoModels,s=t.map((function(t,i){var r=t.filePath,s=t.isChanged;return Pj(cj,{style:{textTransform:"none"},label:Pj(xn,{display:"flex",justifyContent:"space-between",width:"100%"},void 0,Pj(dj,{variant:"body2"},void 0,EH().basename(r)),Pj(Ij,{isChanged:s,onClick:function(t){t.stopPropagation(),e(pH(i)),n((function(e){return e.filter((function(e,t){return t!==i||(e.dispose(),!1)}))}))}}))},r)}));return Pj(LH,{square:!0},void 0,Pj(aj,{indicatorColor:"secondary",textColor:"secondary",value:i,onChange:function(t,i){return e(gH(i))},scrollButtons:"auto",variant:"scrollable"},void 0,s))},Bj=JSON.parse('{"$W":"open-folder","ZB":"open-file","Tk":"open-new-project-modal","Xv":"open-setting-modal"}');var Fj;function Wj(e,t,i,n){Fj||(Fj="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Fj,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var Vj=Wj(Rj,{});const zj=function(){var e=(0,r.useRef)(null),t=(0,r.useContext)(xH),i=t.monacoModels,n=t.setMonacoModels,s=Ye(),o=et(hH),a=et(uH),l=et(wH),c=(0,r.useCallback)((function(){var t,i,n=o[a].filePath;Nn().writeFileSync(n,(null===(t=e.current)||void 0===t||null===(i=t.editor)||void 0===i?void 0:i.getValue())||""),s(mH())}),[a,s,o]);return(0,r.useEffect)((function(){return Mn.ipcRenderer.on(Bj.ZB,(function(e,t){s(fH({filePath:t,fileText:Nn().readFileSync(t,"utf-8"),createMonacoModel:CV(n)}))})),function(){Mn.ipcRenderer.removeAllListeners(Bj.ZB)}}),[s,n]),(0,r.useEffect)((function(){var t,n;o.length&&(null===(t=e.current)||void 0===t||null===(n=t.editor)||void 0===n||n.setModel(i[a]))}),[a,i,o]),(0,r.useEffect)((function(){var t;(null===(t=e.current)||void 0===t?void 0:t.editor).addCommand(tV.CtrlCmd|eV.KEY_S,c)}),[c]),Wj(xn,{className:"Editor",height:"100%"},void 0,Vj,r.createElement(_V,{ref:e,theme:"vs-".concat(l),onChange:function(){return s(bH())},options:{automaticLayout:!0}}))};var Hj=i(47056),jj=i.n(Hj);const Uj=r.createContext({});var Gj=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.component,a=void 0===o?"ul":o,l=e.dense,u=void 0!==l&&l,d=e.disablePadding,f=void 0!==d&&d,p=e.subheader,g=(0,h.Z)(e,["children","classes","className","component","dense","disablePadding","subheader"]),m=r.useMemo((function(){return{dense:u}}),[u]);return r.createElement(Uj.Provider,{value:m},r.createElement(a,(0,c.Z)({className:(0,z.Z)(n.root,s,u&&n.dense,!f&&n.padding,p&&n.subheader),ref:t},g),p,i))}));const Kj=(0,R.Z)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(Gj);var $j=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.color,o=void 0===s?"default":s,a=e.component,l=void 0===a?"li":a,u=e.disableGutters,d=void 0!==u&&u,f=e.disableSticky,p=void 0!==f&&f,g=e.inset,m=void 0!==g&&g,b=(0,h.Z)(e,["classes","className","color","component","disableGutters","disableSticky","inset"]);return r.createElement(l,(0,c.Z)({className:(0,z.Z)(i.root,n,"default"!==o&&i["color".concat((0,RH.Z)(o))],m&&i.inset,!p&&i.sticky,!d&&i.gutters),ref:t},b))}));const qj=(0,R.Z)((function(e){return{root:{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},gutters:{paddingLeft:16,paddingRight:16},inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}}),{name:"MuiListSubheader"})($j);var Zj=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.color,a=void 0===o?"default":o,l=e.component,u=void 0===l?"button":l,d=e.disabled,f=void 0!==d&&d,p=e.disableElevation,g=void 0!==p&&p,m=e.disableFocusRipple,b=void 0!==m&&m,v=e.endIcon,y=e.focusVisibleClassName,_=e.fullWidth,w=void 0!==_&&_,S=e.size,C=void 0===S?"medium":S,x=e.startIcon,k=e.type,E=void 0===k?"button":k,T=e.variant,L=void 0===T?"text":T,N=(0,h.Z)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),M=x&&r.createElement("span",{className:(0,z.Z)(n.startIcon,n["iconSize".concat((0,RH.Z)(C))])},x),O=v&&r.createElement("span",{className:(0,z.Z)(n.endIcon,n["iconSize".concat((0,RH.Z)(C))])},v);return r.createElement(tj,(0,c.Z)({className:(0,z.Z)(n.root,n[L],s,"inherit"===a?n.colorInherit:"default"!==a&&n["".concat(L).concat((0,RH.Z)(a))],"medium"!==C&&[n["".concat(L,"Size").concat((0,RH.Z)(C))],n["size".concat((0,RH.Z)(C))]],g&&n.disableElevation,f&&n.disabled,w&&n.fullWidth),component:u,disabled:f,focusRipple:!b,focusVisibleClassName:(0,z.Z)(n.focusVisible,y),ref:t,type:E},N),r.createElement("span",{className:n.label},M,i,O))}));const Yj=(0,R.Z)((function(e){return{root:(0,c.Z)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:(0,B.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,B.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,B.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat((0,B.Fq)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:(0,B.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat((0,B.Fq)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:(0,B.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(Zj);var Xj=r.forwardRef((function(e,t){var i=e.edge,n=void 0!==i&&i,s=e.children,o=e.classes,a=e.className,l=e.color,u=void 0===l?"default":l,d=e.disabled,f=void 0!==d&&d,p=e.disableFocusRipple,g=void 0!==p&&p,m=e.size,b=void 0===m?"medium":m,v=(0,h.Z)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return r.createElement(tj,(0,c.Z)({className:(0,z.Z)(o.root,a,"default"!==u&&o["color".concat((0,RH.Z)(u))],f&&o.disabled,"small"===b&&o["size".concat((0,RH.Z)(b))],{start:o.edgeStart,end:o.edgeEnd}[n]),centerRipple:!0,focusRipple:!g,disabled:f,ref:t},v),r.createElement("span",{className:o.label},s))}));const Qj=(0,R.Z)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:(0,B.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,B.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,B.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(Xj);i(99869);var Jj=function(e,t){return e.showOpenDialog({properties:[t]}).then((function(e){var t=e.filePaths;return e.canceled?null:t[0]})).catch((function(e){return e}))},eU=function(e){return Jj(e,"openDirectory")},tU=function(){return eU(Mn.remote.dialog)};var iU=i(83711),nU="undefined"==typeof window?r.useEffect:r.useLayoutEffect,rU=r.forwardRef((function(e,t){var i=e.alignItems,n=void 0===i?"center":i,o=e.autoFocus,a=void 0!==o&&o,l=e.button,u=void 0!==l&&l,d=e.children,f=e.classes,p=e.className,g=e.component,m=e.ContainerComponent,b=void 0===m?"li":m,v=e.ContainerProps,y=(v=void 0===v?{}:v).className,_=(0,h.Z)(v,["className"]),w=e.dense,S=void 0!==w&&w,C=e.disabled,x=void 0!==C&&C,k=e.disableGutters,T=void 0!==k&&k,L=e.divider,N=void 0!==L&&L,M=e.focusVisibleClassName,O=e.selected,D=void 0!==O&&O,I=(0,h.Z)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),A=r.useContext(Uj),P={dense:S||A.dense||!1,alignItems:n},R=r.useRef(null);nU((function(){a&&R.current&&R.current.focus()}),[a]);var B=r.Children.toArray(d),F=B.length&&(0,iU.Z)(B[B.length-1],["ListItemSecondaryAction"]),W=r.useCallback((function(e){R.current=s.findDOMNode(e)}),[]),V=(0,E.Z)(W,t),H=(0,c.Z)({className:(0,z.Z)(f.root,p,P.dense&&f.dense,!T&&f.gutters,N&&f.divider,x&&f.disabled,u&&f.button,"center"!==n&&f.alignItemsFlexStart,F&&f.secondaryAction,D&&f.selected),disabled:x},I),j=g||"li";return u&&(H.component=g||"div",H.focusVisibleClassName=(0,z.Z)(f.focusVisible,M),j=tj),F?(j=H.component||g?j:"div","li"===b&&("li"===j?j="div":"li"===H.component&&(H.component="div")),r.createElement(Uj.Provider,{value:P},r.createElement(b,(0,c.Z)({className:(0,z.Z)(f.container,y),ref:V},_),r.createElement(j,H,B),B.pop()))):r.createElement(Uj.Provider,{value:P},r.createElement(j,(0,c.Z)({ref:V},H),B))}));const sU=(0,R.Z)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(rU);var oU=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.disableTypography,a=void 0!==o&&o,l=e.inset,u=void 0!==l&&l,d=e.primary,f=e.primaryTypographyProps,p=e.secondary,g=e.secondaryTypographyProps,m=(0,h.Z)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),b=r.useContext(Uj).dense,v=null!=d?d:i;null==v||v.type===dj||a||(v=r.createElement(dj,(0,c.Z)({variant:b?"body2":"body1",className:n.primary,component:"span",display:"block"},f),v));var y=p;return null==y||y.type===dj||a||(y=r.createElement(dj,(0,c.Z)({variant:"body2",className:n.secondary,color:"textSecondary",display:"block"},g),y)),r.createElement("div",(0,c.Z)({className:(0,z.Z)(n.root,s,b&&n.dense,u&&n.inset,v&&y&&n.multiline),ref:t},m),v,y)}));const aU=(0,R.Z)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(oU);var lU=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=(0,h.Z)(e,["classes","className"]),o=r.useContext(Uj);return r.createElement("div",(0,c.Z)({className:(0,z.Z)(i.root,n,"flex-start"===o.alignItems&&i.alignItemsFlexStart),ref:t},s))}));const cU=(0,R.Z)((function(e){return{root:{minWidth:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex"},alignItemsFlexStart:{marginTop:8}}}),{name:"MuiListItemIcon"})(lU);var hU=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=(0,h.Z)(e,["classes","className"]);return r.createElement("div",(0,c.Z)({className:(0,z.Z)(i.root,n),ref:t},s))}));hU.muiName="ListItemSecondaryAction";const uU=(0,R.Z)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(hU);var dU,fU=i(35025),pU=i(64566),gU=i(96470),mU=i(67879),bU=i(428);function vU(e,t,i,n){dU||(dU="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:dU,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var yU=W((function(e){return{nested:function(t){var i=t.nestCount;return{paddingLeft:e.spacing(2*i)}},listItemIcon:{minWidth:"30px"}}})),_U=vU(mU.Z,{fontSize:"small"});const wU=function(e){var t=e.filePath,i=e.nestCount,n=yU({nestCount:i}),s=Ye(),o=(0,r.useContext)(xH).setMonacoModels,a=(0,r.useCallback)((function(){var e=Nn().readFileSync(t,"utf-8");s(fH({filePath:t,fileText:e,createMonacoModel:CV(o)}))}),[s,t,o]);return vU(sU,{button:!0,onClick:a,className:"File ".concat(n.nested)},void 0,vU(cU,{className:n.listItemIcon},void 0,_U),vU(aU,{primary:vU(dj,{variant:"body2"},void 0,EH().basename(t))}))};var SU;function CU(e,t,i,n){SU||(SU="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:SU,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}const xU=function(e){var t=e.files,i=e.filePath,n=e.nestCount,s=t.map((function(e){var t=EH().join(i,e);return Nn().statSync(t).isDirectory()?CU(kK,{filePath:t,nestCount:n},t):CU(wU,{filePath:t,nestCount:n},t)}));return r.createElement(r.Fragment,null,s)};var kU=i(60288);function EU(e){var t=e.props,i=e.states,n=e.muiFormControl;return i.reduce((function(e,i){return e[i]=t[i],n&&void 0===t[i]&&(e[i]=n[i]),e}),{})}var TU=r.createContext();const LU=TU;function NU(e,t){return parseInt(e[t],10)||0}var MU="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,OU={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const DU=r.forwardRef((function(e,t){var i=e.onChange,n=e.rows,s=e.rowsMax,o=e.rowsMin,a=e.maxRows,l=e.minRows,u=void 0===l?1:l,d=e.style,p=e.value,g=(0,h.Z)(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),m=a||s,b=n||o||u,v=r.useRef(null!=p).current,y=r.useRef(null),_=(0,E.Z)(t,y),w=r.useRef(null),S=r.useRef(0),C=r.useState({}),x=C[0],k=C[1],T=r.useCallback((function(){var t=y.current,i=window.getComputedStyle(t),n=w.current;n.style.width=i.width,n.value=t.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");var r=i["box-sizing"],s=NU(i,"padding-bottom")+NU(i,"padding-top"),o=NU(i,"border-bottom-width")+NU(i,"border-top-width"),a=n.scrollHeight-s;n.value="x";var l=n.scrollHeight-s,c=a;b&&(c=Math.max(Number(b)*l,c)),m&&(c=Math.min(Number(m)*l,c));var h=(c=Math.max(c,l))+("border-box"===r?s+o:0),u=Math.abs(c-a)<=1;k((function(e){return S.current<20&&(h>0&&Math.abs((e.outerHeightStyle||0)-h)>1||e.overflow!==u)?(S.current+=1,{overflow:u,outerHeightStyle:h}):e}))}),[m,b,e.placeholder]);r.useEffect((function(){var e=(0,f.Z)((function(){S.current=0,T()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[T]),MU((function(){T()})),r.useEffect((function(){S.current=0}),[p]);return r.createElement(r.Fragment,null,r.createElement("textarea",(0,c.Z)({value:p,onChange:function(e){S.current=0,v||T(),i&&i(e)},ref:_,rows:b,style:(0,c.Z)({height:x.outerHeightStyle,overflow:x.overflow?"hidden":null},d)},g)),r.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:w,tabIndex:-1,style:(0,c.Z)({},OU,d)}))}));function IU(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function AU(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(IU(e.value)&&""!==e.value||t&&IU(e.defaultValue)&&""!==e.defaultValue)}var PU="undefined"==typeof window?r.useEffect:r.useLayoutEffect,RU=r.forwardRef((function(e,t){var i=e["aria-describedby"],n=e.autoComplete,s=e.autoFocus,o=e.classes,a=e.className,l=(e.color,e.defaultValue),u=e.disabled,d=e.endAdornment,f=(e.error,e.fullWidth),p=void 0!==f&&f,g=e.id,m=e.inputComponent,b=void 0===m?"input":m,v=e.inputProps,y=void 0===v?{}:v,_=e.inputRef,w=(e.margin,e.multiline),S=void 0!==w&&w,C=e.name,x=e.onBlur,k=e.onChange,T=e.onClick,L=e.onFocus,N=e.onKeyDown,M=e.onKeyUp,O=e.placeholder,D=e.readOnly,I=e.renderSuffix,A=e.rows,P=e.rowsMax,R=e.rowsMin,B=e.maxRows,F=e.minRows,W=e.startAdornment,V=e.type,H=void 0===V?"text":V,j=e.value,U=(0,h.Z)(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),G=null!=y.value?y.value:j,K=r.useRef(null!=G).current,$=r.useRef(),q=r.useCallback((function(e){0}),[]),Z=(0,E.Z)(y.ref,q),Y=(0,E.Z)(_,Z),X=(0,E.Z)($,Y),Q=r.useState(!1),J=Q[0],ee=Q[1],te=r.useContext(TU);var ie=EU({props:e,muiFormControl:te,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});ie.focused=te?te.focused:J,r.useEffect((function(){!te&&u&&J&&(ee(!1),x&&x())}),[te,u,J,x]);var ne=te&&te.onFilled,re=te&&te.onEmpty,se=r.useCallback((function(e){AU(e)?ne&&ne():re&&re()}),[ne,re]);PU((function(){K&&se({value:G})}),[G,se,K]);r.useEffect((function(){se($.current)}),[]);var oe=b,ae=(0,c.Z)({},y,{ref:X});"string"!=typeof oe?ae=(0,c.Z)({inputRef:X,type:H},ae,{ref:null}):S?!A||B||F||P||R?(ae=(0,c.Z)({minRows:A||F,rowsMax:P,maxRows:B},ae),oe=DU):oe="textarea":ae=(0,c.Z)({type:H},ae);return r.useEffect((function(){te&&te.setAdornedStart(Boolean(W))}),[te,W]),r.createElement("div",(0,c.Z)({className:(0,z.Z)(o.root,o["color".concat((0,RH.Z)(ie.color||"primary"))],a,ie.disabled&&o.disabled,ie.error&&o.error,p&&o.fullWidth,ie.focused&&o.focused,te&&o.formControl,S&&o.multiline,W&&o.adornedStart,d&&o.adornedEnd,"dense"===ie.margin&&o.marginDense),onClick:function(e){$.current&&e.currentTarget===e.target&&$.current.focus(),T&&T(e)},ref:t},U),W,r.createElement(LU.Provider,{value:null},r.createElement(oe,(0,c.Z)({"aria-invalid":ie.error,"aria-describedby":i,autoComplete:n,autoFocus:s,defaultValue:l,disabled:ie.disabled,id:g,onAnimationStart:function(e){se("mui-auto-fill-cancel"===e.animationName?$.current:{value:"x"})},name:C,placeholder:O,readOnly:D,required:ie.required,rows:A,value:G,onKeyDown:N,onKeyUp:M},ae,{className:(0,z.Z)(o.input,y.className,ie.disabled&&o.disabled,S&&o.inputMultiline,ie.hiddenLabel&&o.inputHiddenLabel,W&&o.inputAdornedStart,d&&o.inputAdornedEnd,"search"===H&&o.inputTypeSearch,"dense"===ie.margin&&o.inputMarginDense),onBlur:function(e){x&&x(e),y.onBlur&&y.onBlur(e),te&&te.onBlur?te.onBlur(e):ee(!1)},onChange:function(e){if(!K){var t=e.target||$.current;if(null==t)throw new Error((0,kU.Z)(1));se({value:t.value})}for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];y.onChange&&y.onChange.apply(y,[e].concat(n)),k&&k.apply(void 0,[e].concat(n))},onFocus:function(e){ie.disabled?e.stopPropagation():(L&&L(e),y.onFocus&&y.onFocus(e),te&&te.onFocus?te.onFocus(e):ee(!0))}}))),d,I?I((0,c.Z)({},ie,{startAdornment:W})):null)}));const BU=(0,R.Z)((function(e){var t="light"===e.palette.type,i={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},r={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:(0,c.Z)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":r,"&:focus::-moz-placeholder":r,"&:focus:-ms-input-placeholder":r,"&:focus::-ms-input-placeholder":r},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(RU);var FU=r.forwardRef((function(e,t){var i=e.disableUnderline,n=e.classes,s=e.fullWidth,o=void 0!==s&&s,a=e.inputComponent,l=void 0===a?"input":a,u=e.multiline,d=void 0!==u&&u,f=e.type,p=void 0===f?"text":f,g=(0,h.Z)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return r.createElement(BU,(0,c.Z)({classes:(0,c.Z)({},n,{root:(0,z.Z)(n.root,!i&&n.underline),underline:null}),fullWidth:o,inputComponent:l,multiline:d,ref:t,type:p},g))}));FU.muiName="Input";const WU=(0,R.Z)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(FU);var VU=r.forwardRef((function(e,t){var i=e.disableUnderline,n=e.classes,s=e.fullWidth,o=void 0!==s&&s,a=e.inputComponent,l=void 0===a?"input":a,u=e.multiline,d=void 0!==u&&u,f=e.type,p=void 0===f?"text":f,g=(0,h.Z)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return r.createElement(BU,(0,c.Z)({classes:(0,c.Z)({},n,{root:(0,z.Z)(n.root,!i&&n.underline),underline:null}),fullWidth:o,inputComponent:l,multiline:d,ref:t,type:p},g))}));VU.muiName="Input";const zU=(0,R.Z)((function(e){var t="light"===e.palette.type,i=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:n,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:n}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(VU);var HU=r.forwardRef((function(e,t){e.children;var i=e.classes,n=e.className,s=e.label,o=e.labelWidth,a=e.notched,l=e.style,u=(0,h.Z)(e,["children","classes","className","label","labelWidth","notched","style"]),d="rtl"===N().direction?"right":"left";if(void 0!==s)return r.createElement("fieldset",(0,c.Z)({"aria-hidden":!0,className:(0,z.Z)(i.root,n),ref:t,style:l},u),r.createElement("legend",{className:(0,z.Z)(i.legendLabelled,a&&i.legendNotched)},s?r.createElement("span",null,s):r.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var f=o>0?.75*o+8:.01;return r.createElement("fieldset",(0,c.Z)({"aria-hidden":!0,style:(0,c.Z)((0,Qi.Z)({},"padding".concat((0,RH.Z)(d)),8),l),className:(0,z.Z)(i.root,n),ref:t},u),r.createElement("legend",{className:i.legend,style:{width:a?f:.01}},r.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))}));const jU=(0,R.Z)((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(HU);var UU=r.forwardRef((function(e,t){var i=e.classes,n=e.fullWidth,s=void 0!==n&&n,o=e.inputComponent,a=void 0===o?"input":o,l=e.label,u=e.labelWidth,d=void 0===u?0:u,f=e.multiline,p=void 0!==f&&f,g=e.notched,m=e.type,b=void 0===m?"text":m,v=(0,h.Z)(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return r.createElement(BU,(0,c.Z)({renderSuffix:function(e){return r.createElement(jU,{className:i.notchedOutline,label:l,labelWidth:d,notched:void 0!==g?g:Boolean(e.startAdornment||e.filled||e.focused)})},classes:(0,c.Z)({},i,{root:(0,z.Z)(i.root,i.underline),notchedOutline:null}),fullWidth:s,inputComponent:a,multiline:p,ref:t,type:b},v))}));UU.muiName="Input";const GU=(0,R.Z)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(UU);function KU(){return r.useContext(LU)}var $U=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=(e.color,e.component),a=void 0===o?"label":o,l=(e.disabled,e.error,e.filled,e.focused,e.required,(0,h.Z)(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),u=EU({props:e,muiFormControl:KU(),states:["color","required","focused","disabled","error","filled"]});return r.createElement(a,(0,c.Z)({className:(0,z.Z)(n.root,n["color".concat((0,RH.Z)(u.color||"primary"))],s,u.disabled&&n.disabled,u.error&&n.error,u.filled&&n.filled,u.focused&&n.focused,u.required&&n.required),ref:t},l),i,u.required&&r.createElement("span",{"aria-hidden":!0,className:(0,z.Z)(n.asterisk,u.error&&n.error)},"","*"))}));const qU=(0,R.Z)((function(e){return{root:(0,c.Z)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})($U);var ZU=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.disableAnimation,o=void 0!==s&&s,a=(e.margin,e.shrink),l=(e.variant,(0,h.Z)(e,["classes","className","disableAnimation","margin","shrink","variant"])),u=KU(),d=a;void 0===d&&u&&(d=u.filled||u.focused||u.adornedStart);var f=EU({props:e,muiFormControl:u,states:["margin","variant"]});return r.createElement(qU,(0,c.Z)({"data-shrink":d,className:(0,z.Z)(i.root,n,u&&i.formControl,!o&&i.animated,d&&i.shrink,"dense"===f.margin&&i.marginDense,{filled:i.filled,outlined:i.outlined}[f.variant]),classes:{focused:i.focused,disabled:i.disabled,error:i.error,required:i.required,asterisk:i.asterisk},ref:t},l))}));const YU=(0,R.Z)((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(ZU);var XU=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.color,a=void 0===o?"primary":o,l=e.component,u=void 0===l?"div":l,d=e.disabled,f=void 0!==d&&d,p=e.error,g=void 0!==p&&p,m=e.fullWidth,b=void 0!==m&&m,v=e.focused,y=e.hiddenLabel,_=void 0!==y&&y,w=e.margin,S=void 0===w?"none":w,C=e.required,x=void 0!==C&&C,k=e.size,E=e.variant,T=void 0===E?"standard":E,L=(0,h.Z)(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),N=r.useState((function(){var e=!1;return i&&r.Children.forEach(i,(function(t){if((0,iU.Z)(t,["Input","Select"])){var i=(0,iU.Z)(t,["Select"])?t.props.input:t;i&&i.props.startAdornment&&(e=!0)}})),e})),M=N[0],O=N[1],D=r.useState((function(){var e=!1;return i&&r.Children.forEach(i,(function(t){(0,iU.Z)(t,["Input","Select"])&&AU(t.props,!0)&&(e=!0)})),e})),I=D[0],A=D[1],P=r.useState(!1),R=P[0],B=P[1],F=void 0!==v?v:R;f&&F&&B(!1);var W=r.useCallback((function(){A(!0)}),[]),V={adornedStart:M,setAdornedStart:O,color:a,disabled:f,error:g,filled:I,focused:F,fullWidth:b,hiddenLabel:_,margin:("small"===k?"dense":void 0)||S,onBlur:function(){B(!1)},onEmpty:r.useCallback((function(){A(!1)}),[]),onFilled:W,onFocus:function(){B(!0)},registerEffect:undefined,required:x,variant:T};return r.createElement(LU.Provider,{value:V},r.createElement(u,(0,c.Z)({className:(0,z.Z)(n.root,s,"none"!==S&&n["margin".concat((0,RH.Z)(S))],b&&n.fullWidth),ref:t},L),i))}));const QU=(0,R.Z)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(XU);var JU=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.component,a=void 0===o?"p":o,l=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,(0,h.Z)(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),u=EU({props:e,muiFormControl:KU(),states:["variant","margin","disabled","error","filled","focused","required"]});return r.createElement(a,(0,c.Z)({className:(0,z.Z)(n.root,("filled"===u.variant||"outlined"===u.variant)&&n.contained,s,u.disabled&&n.disabled,u.error&&n.error,u.filled&&n.filled,u.focused&&n.focused,u.required&&n.required,"dense"===u.margin&&n.marginDense),ref:t},l)," "===i?r.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):i)}));const eG=(0,R.Z)((function(e){return{root:(0,c.Z)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(JU);var tG=i(65835),iG=i(90484),nG=i(82568),rG=i(93869),sG=i(34236);var oG="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;const aG=r.forwardRef((function(e,t){var i=e.children,n=e.container,o=e.disablePortal,a=void 0!==o&&o,l=e.onRendered,c=r.useState(null),h=c[0],u=c[1],d=(0,E.Z)(r.isValidElement(i)?i.ref:null,t);return oG((function(){a||u(function(e){return e="function"==typeof e?e():e,s.findDOMNode(e)}(n)||document.body)}),[n,a]),oG((function(){if(h&&!a)return(0,sG.Z)(t,h),function(){(0,sG.Z)(t,null)}}),[t,h,a]),oG((function(){l&&(h||a)&&l()}),[l,h,a]),a?r.isValidElement(i)?r.cloneElement(i,{ref:d}):i:h?s.createPortal(i,h):h}));var lG=i(92781);var cG=i(5991);function hG(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function uG(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function dG(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function fG(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4?arguments[4]:void 0,s=[t,i].concat((0,Ki.Z)(n)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===s.indexOf(e)&&-1===o.indexOf(e.tagName)&&uG(e,r)}))}function pG(e,t){var i=-1;return e.some((function(e,n){return!!t(e)&&(i=n,!0)})),i}function gG(e,t){var i,n=[],r=[],s=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,G.Z)(e);return t.body===e?(0,MH.Z)(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(s)){var o=hG();n.push({value:s.style.paddingRight,key:"padding-right",el:s}),s.style["padding-right"]="".concat(dG(s)+o,"px"),i=(0,G.Z)(s).querySelectorAll(".mui-fixed"),[].forEach.call(i,(function(e){r.push(e.style.paddingRight),e.style.paddingRight="".concat(dG(e)+o,"px")}))}var a=s.parentElement,l="HTML"===a.nodeName&&"scroll"===window.getComputedStyle(a)["overflow-y"]?a:s;n.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}return function(){i&&[].forEach.call(i,(function(e,t){r[t]?e.style.paddingRight=r[t]:e.style.removeProperty("padding-right")})),n.forEach((function(e){var t=e.value,i=e.el,n=e.key;t?i.style.setProperty(n,t):i.style.removeProperty(n)}))}}var mG=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modals=[],this.containers=[]}return(0,cG.Z)(e,[{key:"add",value:function(e,t){var i=this.modals.indexOf(e);if(-1!==i)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&uG(e.modalRef,!1);var n=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);fG(t,e.mountNode,e.modalRef,n,!0);var r=pG(this.containers,(function(e){return e.container===t}));return-1!==r?(this.containers[r].modals.push(e),i):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:n}),i)}},{key:"mount",value:function(e,t){var i=pG(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),n=this.containers[i];n.restore||(n.restore=gG(n,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var i=pG(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),n=this.containers[i];if(n.modals.splice(n.modals.indexOf(e),1),this.modals.splice(t,1),0===n.modals.length)n.restore&&n.restore(),e.modalRef&&uG(e.modalRef,!0),fG(n.container,e.mountNode,e.modalRef,n.hiddenSiblingNodes,!1),this.containers.splice(i,1);else{var r=n.modals[n.modals.length-1];r.modalRef&&uG(r.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();const bG=function(e){var t=e.children,i=e.disableAutoFocus,n=void 0!==i&&i,o=e.disableEnforceFocus,a=void 0!==o&&o,l=e.disableRestoreFocus,c=void 0!==l&&l,h=e.getDoc,u=e.isEnabled,d=e.open,f=r.useRef(),p=r.useRef(null),g=r.useRef(null),m=r.useRef(),b=r.useRef(null),v=r.useCallback((function(e){b.current=s.findDOMNode(e)}),[]),y=(0,E.Z)(t.ref,v),_=r.useRef();return r.useEffect((function(){_.current=d}),[d]),!_.current&&d&&"undefined"!=typeof window&&(m.current=h().activeElement),r.useEffect((function(){if(d){var e=(0,G.Z)(b.current);n||!b.current||b.current.contains(e.activeElement)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex",-1),b.current.focus());var t=function(){null!==b.current&&(e.hasFocus()&&!a&&u()&&!f.current?b.current&&!b.current.contains(e.activeElement)&&b.current.focus():f.current=!1)},i=function(t){!a&&u()&&9===t.keyCode&&e.activeElement===b.current&&(f.current=!0,t.shiftKey?g.current.focus():p.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",i,!0);var r=setInterval((function(){t()}),50);return function(){clearInterval(r),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",i,!0),c||(m.current&&m.current.focus&&m.current.focus(),m.current=null)}}}),[n,a,c,u,d]),r.createElement(r.Fragment,null,r.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelStart"}),r.cloneElement(t,{ref:y}),r.createElement("div",{tabIndex:0,ref:g,"data-test":"sentinelEnd"}))};var vG={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}};const yG=r.forwardRef((function(e,t){var i=e.invisible,n=void 0!==i&&i,s=e.open,o=(0,h.Z)(e,["invisible","open"]);return s?r.createElement("div",(0,c.Z)({"aria-hidden":!0,ref:t},o,{style:(0,c.Z)({},vG.root,n?vG.invisible:{},o.style)})):null}));var _G=new mG;const wG=r.forwardRef((function(e,t){var i=(0,T.Z)(),n=(0,rG.Z)({name:"MuiModal",props:(0,c.Z)({},e),theme:i}),o=n.BackdropComponent,a=void 0===o?yG:o,l=n.BackdropProps,u=n.children,d=n.closeAfterTransition,f=void 0!==d&&d,p=n.container,g=n.disableAutoFocus,m=void 0!==g&&g,b=n.disableBackdropClick,v=void 0!==b&&b,y=n.disableEnforceFocus,_=void 0!==y&&y,w=n.disableEscapeKeyDown,S=void 0!==w&&w,C=n.disablePortal,x=void 0!==C&&C,k=n.disableRestoreFocus,L=void 0!==k&&k,N=n.disableScrollLock,M=void 0!==N&&N,O=n.hideBackdrop,D=void 0!==O&&O,I=n.keepMounted,A=void 0!==I&&I,P=n.manager,R=void 0===P?_G:P,B=n.onBackdropClick,F=n.onClose,W=n.onEscapeKeyDown,V=n.onRendered,z=n.open,H=(0,h.Z)(n,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),j=r.useState(!0),U=j[0],$=j[1],q=r.useRef({}),Z=r.useRef(null),Y=r.useRef(null),X=(0,E.Z)(Y,t),Q=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(n),J=function(){return(0,G.Z)(Z.current)},ee=function(){return q.current.modalRef=Y.current,q.current.mountNode=Z.current,q.current},te=function(){R.mount(ee(),{disableScrollLock:M}),Y.current.scrollTop=0},ie=(0,K.Z)((function(){var e=function(e){return e="function"==typeof e?e():e,s.findDOMNode(e)}(p)||J().body;R.add(ee(),e),Y.current&&te()})),ne=r.useCallback((function(){return R.isTopModal(ee())}),[R]),re=(0,K.Z)((function(e){Z.current=e,e&&(V&&V(),z&&ne()?te():uG(Y.current,!0))})),se=r.useCallback((function(){R.remove(ee())}),[R]);if(r.useEffect((function(){return function(){se()}}),[se]),r.useEffect((function(){z?ie():Q&&f||se()}),[z,se,Q,f,ie]),!A&&!z&&(!Q||U))return null;var oe=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(i||{zIndex:lG.Z}),ae={};return void 0===u.props.tabIndex&&(ae.tabIndex=u.props.tabIndex||"-1"),Q&&(ae.onEnter=(0,nG.Z)((function(){$(!1)}),u.props.onEnter),ae.onExited=(0,nG.Z)((function(){$(!0),f&&se()}),u.props.onExited)),r.createElement(aG,{ref:re,container:p,disablePortal:x},r.createElement("div",(0,c.Z)({ref:X,onKeyDown:function(e){"Escape"===e.key&&ne()&&(W&&W(e),S||(e.stopPropagation(),F&&F(e,"escapeKeyDown")))},role:"presentation"},H,{style:(0,c.Z)({},oe.root,!z&&U?oe.hidden:{},H.style)}),D?null:r.createElement(a,(0,c.Z)({open:z,onClick:function(e){e.target===e.currentTarget&&(B&&B(e),!v&&F&&F(e,"backdropClick"))}},l)),r.createElement(bG,{disableEnforceFocus:_,disableAutoFocus:m,disableRestoreFocus:L,getDoc:J,isEnabled:ne,open:z},r.cloneElement(u,ae))))}));function SG(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var CG={entering:{opacity:1,transform:SG(1)},entered:{opacity:1,transform:"none"}},xG=r.forwardRef((function(e,t){var i=e.children,n=e.disableStrictModeCompat,s=void 0!==n&&n,o=e.in,a=e.onEnter,l=e.onEntered,u=e.onEntering,d=e.onExit,f=e.onExited,p=e.onExiting,g=e.style,m=e.timeout,b=void 0===m?"auto":m,v=e.TransitionComponent,y=void 0===v?k:v,_=(0,h.Z)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),w=r.useRef(),S=r.useRef(),C=N(),x=C.unstable_strictMode&&!s,T=r.useRef(null),L=(0,E.Z)(i.ref,t),M=(0,E.Z)(x?T:void 0,L),I=function(e){return function(t,i){if(e){var n=x?[T.current,t]:[t,i],r=(0,V.Z)(n,2),s=r[0],o=r[1];void 0===o?e(s):e(s,o)}}},A=I(u),P=I((function(e,t){O(e);var i,n=D({style:g,timeout:b},{mode:"enter"}),r=n.duration,s=n.delay;"auto"===b?(i=C.transitions.getAutoHeightDuration(e.clientHeight),S.current=i):i=r,e.style.transition=[C.transitions.create("opacity",{duration:i,delay:s}),C.transitions.create("transform",{duration:.666*i,delay:s})].join(","),a&&a(e,t)})),R=I(l),B=I(p),F=I((function(e){var t,i=D({style:g,timeout:b},{mode:"exit"}),n=i.duration,r=i.delay;"auto"===b?(t=C.transitions.getAutoHeightDuration(e.clientHeight),S.current=t):t=n,e.style.transition=[C.transitions.create("opacity",{duration:t,delay:r}),C.transitions.create("transform",{duration:.666*t,delay:r||.333*t})].join(","),e.style.opacity="0",e.style.transform=SG(.75),d&&d(e)})),W=I(f);return r.useEffect((function(){return function(){clearTimeout(w.current)}}),[]),r.createElement(y,(0,c.Z)({appear:!0,in:o,nodeRef:x?T:void 0,onEnter:P,onEntered:R,onEntering:A,onExit:F,onExited:W,onExiting:B,addEndListener:function(e,t){var i=x?e:t;"auto"===b&&(w.current=setTimeout(i,S.current||0))},timeout:"auto"===b?null:b},_),(function(e,t){return r.cloneElement(i,(0,c.Z)({style:(0,c.Z)({opacity:0,transform:SG(.75),visibility:"exited"!==e||o?void 0:"hidden"},CG[e],g,i.props.style),ref:M},t))}))}));xG.muiSupportAuto=!0;const kG=xG;function EG(e,t){var i=0;return"number"==typeof t?i=t:"center"===t?i=e.height/2:"bottom"===t&&(i=e.height),i}function TG(e,t){var i=0;return"number"==typeof t?i=t:"center"===t?i=e.width/2:"right"===t&&(i=e.width),i}function LG(e){return[e.horizontal,e.vertical].map((function(e){return"number"==typeof e?"".concat(e,"px"):e})).join(" ")}function NG(e){return"function"==typeof e?e():e}var MG=r.forwardRef((function(e,t){var i=e.action,n=e.anchorEl,o=e.anchorOrigin,a=void 0===o?{vertical:"top",horizontal:"left"}:o,l=e.anchorPosition,u=e.anchorReference,d=void 0===u?"anchorEl":u,p=e.children,g=e.classes,m=e.className,b=e.container,v=e.elevation,y=void 0===v?8:v,_=e.getContentAnchorEl,w=e.marginThreshold,S=void 0===w?16:w,C=e.onEnter,x=e.onEntered,k=e.onEntering,E=e.onExit,T=e.onExited,L=e.onExiting,N=e.open,M=e.PaperProps,O=void 0===M?{}:M,D=e.transformOrigin,I=void 0===D?{vertical:"top",horizontal:"left"}:D,A=e.TransitionComponent,P=void 0===A?kG:A,R=e.transitionDuration,B=void 0===R?"auto":R,F=e.TransitionProps,W=void 0===F?{}:F,V=(0,h.Z)(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),H=r.useRef(),j=r.useCallback((function(e){if("anchorPosition"===d)return l;var t=NG(n),i=(t&&1===t.nodeType?t:(0,G.Z)(H.current).body).getBoundingClientRect(),r=0===e?a.vertical:"center";return{top:i.top+EG(i,r),left:i.left+TG(i,a.horizontal)}}),[n,a.horizontal,a.vertical,l,d]),U=r.useCallback((function(e){var t=0;if(_&&"anchorEl"===d){var i=_(e);if(i&&e.contains(i)){var n=function(e,t){for(var i=t,n=0;i&&i!==e;)n+=(i=i.parentElement).scrollTop;return n}(e,i);t=i.offsetTop+i.clientHeight/2-n||0}0}return t}),[a.vertical,d,_]),K=r.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:EG(e,I.vertical)+t,horizontal:TG(e,I.horizontal)}}),[I.horizontal,I.vertical]),$=r.useCallback((function(e){var t=U(e),i={width:e.offsetWidth,height:e.offsetHeight},r=K(i,t);if("none"===d)return{top:null,left:null,transformOrigin:LG(r)};var s=j(t),o=s.top-r.vertical,a=s.left-r.horizontal,l=o+i.height,c=a+i.width,h=(0,MH.Z)(NG(n)),u=h.innerHeight-S,f=h.innerWidth-S;if(o<S){var p=o-S;o-=p,r.vertical+=p}else if(l>u){var g=l-u;o-=g,r.vertical+=g}if(a<S){var m=a-S;a-=m,r.horizontal+=m}else if(c>f){var b=c-f;a-=b,r.horizontal+=b}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:LG(r)}}),[n,d,j,U,K,S]),q=r.useCallback((function(){var e=H.current;if(e){var t=$(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[$]),Z=r.useCallback((function(e){H.current=s.findDOMNode(e)}),[]);r.useEffect((function(){N&&q()})),r.useImperativeHandle(i,(function(){return N?{updatePosition:function(){q()}}:null}),[N,q]),r.useEffect((function(){if(N){var e=(0,f.Z)((function(){q()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[N,q]);var Y=B;"auto"!==B||P.muiSupportAuto||(Y=void 0);var X=b||(n?(0,G.Z)(NG(n)).body:void 0);return r.createElement(wG,(0,c.Z)({container:X,open:N,ref:t,BackdropProps:{invisible:!0},className:(0,z.Z)(g.root,m)},V),r.createElement(P,(0,c.Z)({appear:!0,in:N,onEnter:C,onEntered:x,onExit:E,onExited:T,onExiting:L,timeout:Y},W,{onEntering:(0,nG.Z)((function(e,t){k&&k(e,t),q()}),W.onEntering)}),r.createElement(LH,(0,c.Z)({elevation:y,ref:Z},O,{className:(0,z.Z)(g.paper,O.className)}),p)))}));const OG=(0,R.Z)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(MG);function DG(e,t,i){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:i?null:e.firstChild}function IG(e,t,i){return e===t?i?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:i?null:e.lastChild}function AG(e,t){if(void 0===t)return!0;var i=e.innerText;return void 0===i&&(i=e.textContent),0!==(i=i.trim().toLowerCase()).length&&(t.repeating?i[0]===t.keys[0]:0===i.indexOf(t.keys.join("")))}function PG(e,t,i,n,r,s){for(var o=!1,a=r(e,t,!!t&&i);a;){if(a===e.firstChild){if(o)return;o=!0}var l=!n&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&AG(a,s)&&!l)return void a.focus();a=r(e,a,i)}}var RG="undefined"==typeof window?r.useEffect:r.useLayoutEffect;const BG=r.forwardRef((function(e,t){var i=e.actions,n=e.autoFocus,o=void 0!==n&&n,a=e.autoFocusItem,l=void 0!==a&&a,u=e.children,d=e.className,f=e.disabledItemsFocusable,p=void 0!==f&&f,g=e.disableListWrap,m=void 0!==g&&g,b=e.onKeyDown,v=e.variant,y=void 0===v?"selectedMenu":v,_=(0,h.Z)(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),w=r.useRef(null),S=r.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});RG((function(){o&&w.current.focus()}),[o]),r.useImperativeHandle(i,(function(){return{adjustStyleForScrollbar:function(e,t){var i=!w.current.style.width;if(e.clientHeight<w.current.clientHeight&&i){var n="".concat(hG(),"px");w.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,w.current.style.width="calc(100% + ".concat(n,")")}return w.current}}}),[]);var C=r.useCallback((function(e){w.current=s.findDOMNode(e)}),[]),x=(0,E.Z)(C,t),k=-1;r.Children.forEach(u,(function(e,t){r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===k)&&(k=t))}));var T=r.Children.map(u,(function(e,t){if(t===k){var i={};return l&&(i.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===y&&(i.tabIndex=0),r.cloneElement(e,i)}return e}));return r.createElement(Kj,(0,c.Z)({role:"menu",ref:x,className:d,onKeyDown:function(e){var t=w.current,i=e.key,n=(0,G.Z)(t).activeElement;if("ArrowDown"===i)e.preventDefault(),PG(t,n,m,p,DG);else if("ArrowUp"===i)e.preventDefault(),PG(t,n,m,p,IG);else if("Home"===i)e.preventDefault(),PG(t,null,m,p,DG);else if("End"===i)e.preventDefault(),PG(t,null,m,p,IG);else if(1===i.length){var r=S.current,s=i.toLowerCase(),o=performance.now();r.keys.length>0&&(o-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&s!==r.keys[0]&&(r.repeating=!1)),r.lastTime=o,r.keys.push(s);var a=n&&!r.repeating&&AG(n,r);r.previousKeyMatched&&(a||PG(t,n,!1,p,DG,r))?e.preventDefault():r.previousKeyMatched=!1}b&&b(e)},tabIndex:o?0:-1},_),T)}));var FG={vertical:"top",horizontal:"right"},WG={vertical:"top",horizontal:"left"},VG=r.forwardRef((function(e,t){var i=e.autoFocus,n=void 0===i||i,o=e.children,a=e.classes,l=e.disableAutoFocusItem,u=void 0!==l&&l,d=e.MenuListProps,f=void 0===d?{}:d,p=e.onClose,g=e.onEntering,m=e.open,b=e.PaperProps,v=void 0===b?{}:b,y=e.PopoverClasses,_=e.transitionDuration,w=void 0===_?"auto":_,S=e.TransitionProps,C=(S=void 0===S?{}:S).onEntering,x=(0,h.Z)(S,["onEntering"]),k=e.variant,E=void 0===k?"selectedMenu":k,T=(0,h.Z)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),L=N(),M=n&&!u&&m,O=r.useRef(null),D=r.useRef(null),I=-1;r.Children.map(o,(function(e,t){r.isValidElement(e)&&(e.props.disabled||("menu"!==E&&e.props.selected||-1===I)&&(I=t))}));var A=r.Children.map(o,(function(e,t){return t===I?r.cloneElement(e,{ref:function(t){D.current=s.findDOMNode(t),(0,sG.Z)(e.ref,t)}}):e}));return r.createElement(OG,(0,c.Z)({getContentAnchorEl:function(){return D.current},classes:y,onClose:p,TransitionProps:(0,c.Z)({onEntering:function(e,t){O.current&&O.current.adjustStyleForScrollbar(e,L),g&&g(e,t),C&&C(e,t)}},x),anchorOrigin:"rtl"===L.direction?FG:WG,transformOrigin:"rtl"===L.direction?FG:WG,PaperProps:(0,c.Z)({},v,{classes:(0,c.Z)({},v.classes,{root:a.paper})}),open:m,ref:t,transitionDuration:w},T),r.createElement(BG,(0,c.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),p&&p(e,"tabKeyDown"))},actions:O,autoFocus:n&&(-1===I||u),autoFocusItem:M,variant:E},f,{className:(0,z.Z)(a.list,f.className)}),A))}));const zG=(0,R.Z)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(VG);var HG=i(22775);function jG(e,t){return"object"===(0,iG.Z)(t)&&null!==t?e===t:String(e)===String(t)}const UG=r.forwardRef((function(e,t){var i=e["aria-label"],n=e.autoFocus,s=e.autoWidth,o=e.children,a=e.classes,l=e.className,u=e.defaultValue,d=e.disabled,f=e.displayEmpty,p=e.IconComponent,g=e.inputRef,m=e.labelId,b=e.MenuProps,v=void 0===b?{}:b,y=e.multiple,_=e.name,w=e.onBlur,S=e.onChange,C=e.onClose,x=e.onFocus,k=e.onOpen,T=e.open,L=e.readOnly,N=e.renderValue,M=e.SelectDisplayProps,O=void 0===M?{}:M,D=e.tabIndex,I=(e.type,e.value),A=e.variant,P=void 0===A?"standard":A,R=(0,h.Z)(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),B=(0,HG.Z)({controlled:I,default:u,name:"Select"}),F=(0,V.Z)(B,2),W=F[0],H=F[1],j=r.useRef(null),U=r.useState(null),K=U[0],$=U[1],q=r.useRef(null!=T).current,Z=r.useState(),Y=Z[0],X=Z[1],Q=r.useState(!1),J=Q[0],ee=Q[1],te=(0,E.Z)(t,g);r.useImperativeHandle(te,(function(){return{focus:function(){K.focus()},node:j.current,value:W}}),[K,W]),r.useEffect((function(){n&&K&&K.focus()}),[n,K]),r.useEffect((function(){if(K){var e=(0,G.Z)(K).getElementById(m);if(e){var t=function(){getSelection().isCollapsed&&K.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[m,K]);var ie,ne,re=function(e,t){e?k&&k(t):C&&C(t),q||(X(s?null:K.clientWidth),ee(e))},se=r.Children.toArray(o),oe=function(e){return function(t){var i;if(y||re(!1,t),y){i=Array.isArray(W)?W.slice():[];var n=W.indexOf(e.props.value);-1===n?i.push(e.props.value):i.splice(n,1)}else i=e.props.value;e.props.onClick&&e.props.onClick(t),W!==i&&(H(i),S&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:i,name:_}}),S(t,e)))}},ae=null!==K&&(q?T:J);delete R["aria-invalid"];var le=[],ce=!1;(AU({value:W})||f)&&(N?ie=N(W):ce=!0);var he=se.map((function(e){if(!r.isValidElement(e))return null;var t;if(y){if(!Array.isArray(W))throw new Error((0,kU.Z)(2));(t=W.some((function(t){return jG(t,e.props.value)})))&&ce&&le.push(e.props.children)}else(t=jG(W,e.props.value))&&ce&&(ne=e.props.children);return t&&!0,r.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:oe(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));ce&&(ie=y?le.join(", "):ne);var ue,de=Y;!s&&q&&K&&(de=K.clientWidth),ue=void 0!==D?D:d?null:0;var fe=O.id||(_?"mui-component-select-".concat(_):void 0);return r.createElement(r.Fragment,null,r.createElement("div",(0,c.Z)({className:(0,z.Z)(a.root,a.select,a.selectMenu,a[P],l,d&&a.disabled),ref:$,tabIndex:ue,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":ae?"true":void 0,"aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[m,fe].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!L){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),re(!0,e))}},onMouseDown:d||L?null:function(e){0===e.button&&(e.preventDefault(),K.focus(),re(!0,e))},onBlur:function(e){!ae&&w&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:W,name:_}}),w(e))},onFocus:x},O,{id:fe}),function(e){return null==e||"string"==typeof e&&!e.trim()}(ie)?r.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):ie),r.createElement("input",(0,c.Z)({value:Array.isArray(W)?W.join(","):W,name:_,ref:j,"aria-hidden":!0,onChange:function(e){var t=se.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var i=se[t];H(i.props.value),S&&S(e,i)}},tabIndex:-1,className:a.nativeInput,autoFocus:n},R)),r.createElement(p,{className:(0,z.Z)(a.icon,a["icon".concat((0,RH.Z)(P))],ae&&a.iconOpen,d&&a.disabled)}),r.createElement(zG,(0,c.Z)({id:"menu-".concat(_||""),anchorEl:K,open:ae,onClose:function(e){re(!1,e)}},v,{MenuListProps:(0,c.Z)({"aria-labelledby":m,role:"listbox",disableListWrap:!0},v.MenuListProps),PaperProps:(0,c.Z)({},v.PaperProps,{style:(0,c.Z)({minWidth:de},null!=v.PaperProps?v.PaperProps.style:null)})}),he))})),GG=(0,WH.Z)(r.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");const KG=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.disabled,o=e.IconComponent,a=e.inputRef,l=e.variant,u=void 0===l?"standard":l,d=(0,h.Z)(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return r.createElement(r.Fragment,null,r.createElement("select",(0,c.Z)({className:(0,z.Z)(i.root,i.select,i[u],n,s&&i.disabled),disabled:s,ref:a||t},d)),e.multiple?null:r.createElement(o,{className:(0,z.Z)(i.icon,i["icon".concat((0,RH.Z)(u))],s&&i.disabled)}))}));var $G=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},qG=r.createElement(WU,null),ZG=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.IconComponent,o=void 0===s?GG:s,a=e.input,l=void 0===a?qG:a,u=e.inputProps,d=(e.variant,(0,h.Z)(e,["children","classes","IconComponent","input","inputProps","variant"])),f=EU({props:e,muiFormControl:KU(),states:["variant"]});return r.cloneElement(l,(0,c.Z)({inputComponent:KG,inputProps:(0,c.Z)({children:i,classes:n,IconComponent:o,variant:f.variant,type:void 0},u,l?l.props.inputProps:{}),ref:t},d))}));ZG.muiName="Select";(0,R.Z)($G,{name:"MuiNativeSelect"})(ZG);var YG=$G,XG=r.createElement(WU,null),QG=r.createElement(zU,null),JG=r.forwardRef((function e(t,i){var n=t.autoWidth,s=void 0!==n&&n,o=t.children,a=t.classes,l=t.displayEmpty,u=void 0!==l&&l,d=t.IconComponent,f=void 0===d?GG:d,p=t.id,g=t.input,m=t.inputProps,b=t.label,v=t.labelId,y=t.labelWidth,_=void 0===y?0:y,w=t.MenuProps,S=t.multiple,C=void 0!==S&&S,x=t.native,k=void 0!==x&&x,E=t.onClose,T=t.onOpen,L=t.open,N=t.renderValue,M=t.SelectDisplayProps,O=t.variant,D=void 0===O?"standard":O,I=(0,h.Z)(t,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),A=k?KG:UG,P=EU({props:t,muiFormControl:KU(),states:["variant"]}).variant||D,R=g||{standard:XG,outlined:r.createElement(GU,{label:b,labelWidth:_}),filled:QG}[P];return r.cloneElement(R,(0,c.Z)({inputComponent:A,inputProps:(0,c.Z)({children:o,IconComponent:f,variant:P,type:void 0,multiple:C},k?{id:p}:{autoWidth:s,displayEmpty:u,labelId:v,MenuProps:w,onClose:E,onOpen:T,open:L,renderValue:N,SelectDisplayProps:(0,c.Z)({id:p},M)},m,{classes:m?(0,tG.Z)({baseClasses:a,newClasses:m.classes,Component:e}):a},g?g.props.inputProps:{}),ref:i},I))}));JG.muiName="Select";const eK=(0,R.Z)(YG,{name:"MuiSelect"})(JG);var tK={standard:WU,filled:zU,outlined:GU},iK=r.forwardRef((function(e,t){var i=e.autoComplete,n=e.autoFocus,s=void 0!==n&&n,o=e.children,a=e.classes,l=e.className,u=e.color,d=void 0===u?"primary":u,f=e.defaultValue,p=e.disabled,g=void 0!==p&&p,m=e.error,b=void 0!==m&&m,v=e.FormHelperTextProps,y=e.fullWidth,_=void 0!==y&&y,w=e.helperText,S=e.hiddenLabel,C=e.id,x=e.InputLabelProps,k=e.inputProps,E=e.InputProps,T=e.inputRef,L=e.label,N=e.multiline,M=void 0!==N&&N,O=e.name,D=e.onBlur,I=e.onChange,A=e.onFocus,P=e.placeholder,R=e.required,B=void 0!==R&&R,F=e.rows,W=e.rowsMax,V=e.maxRows,H=e.select,j=void 0!==H&&H,U=e.SelectProps,G=e.type,K=e.value,$=e.variant,q=void 0===$?"standard":$,Z=(0,h.Z)(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","select","SelectProps","type","value","variant"]);var Y={};if("outlined"===q&&(x&&void 0!==x.shrink&&(Y.notched=x.shrink),L)){var X,Q=null!==(X=null==x?void 0:x.required)&&void 0!==X?X:B;Y.label=r.createElement(r.Fragment,null,L,Q&&"*")}j&&(U&&U.native||(Y.id=void 0),Y["aria-describedby"]=void 0);var J=w&&C?"".concat(C,"-helper-text"):void 0,ee=L&&C?"".concat(C,"-label"):void 0,te=tK[q],ie=r.createElement(te,(0,c.Z)({"aria-describedby":J,autoComplete:i,autoFocus:s,defaultValue:f,fullWidth:_,multiline:M,name:O,rows:F,rowsMax:W,maxRows:V,type:G,value:K,id:C,inputRef:T,onBlur:D,onChange:I,onFocus:A,placeholder:P,inputProps:k},Y,E));return r.createElement(QU,(0,c.Z)({className:(0,z.Z)(a.root,l),disabled:g,error:b,fullWidth:_,hiddenLabel:S,ref:t,required:B,color:d,variant:q},Z),L&&r.createElement(YU,(0,c.Z)({htmlFor:C,id:ee},x),L),j?r.createElement(eK,(0,c.Z)({"aria-describedby":J,id:C,labelId:ee,value:K,input:ie},U),o):ie,w&&r.createElement(eG,(0,c.Z)({id:J},v),w))}));const nK=(0,R.Z)({root:{}},{name:"MuiTextField"})(iK);var rK;function sK(e,t,i,n){rK||(rK="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:rK,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function oK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return aK(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return aK(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aK(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var lK=function(e){var t=e.inputType,i=e.filePath,n=e.setActiveInput,s=e.setFiles,o=oK((0,r.useState)(""),2),a=o[0],l=o[1],c=(0,r.useCallback)((function(e){if("Enter"===e.key)if(a){var r=EH().join(i,a);"folder"===t&&Nn().mkdirSync(r),"file"===t&&Nn().writeFileSync(r,""),s(Nn().readdirSync(i)),l(""),n(!1)}else n(!1)}),[i,t,n,s,a]);return sK("li",{className:"Input"},void 0,sK(nK,{id:"filled-basic",variant:"filled",label:"New ".concat(t),value:a,onKeyDown:c,onChange:function(e){return l(e.currentTarget.value)},fullWidth:!0}))};const cK=function(e){var t=e.inputs.map((function(e){var t=e.inputType,i=e.filePath,n=e.isActiveInput,r=e.setActiveInput,s=e.setFiles;return n&&sK(lK,{inputType:t,filePath:i,setActiveInput:r,setFiles:s},i+t)}));return r.createElement(r.Fragment,null,t)};var hK;function uK(e,t,i,n){hK||(hK="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:hK,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var dK=function(e){var t=e.children,i=e.handleActiveInput;return uK(Qj,{onClick:function(){return i()}},void 0,t)};const fK=function(e){var t=e.icons.map((function(e,t){var i=e.children,n=e.handleActiveInput;return uK(xn,{ml:1},t,uK(dK,{handleActiveInput:n},void 0,i))}));return uK(xn,{display:"flex",justifyContent:"around"},void 0,t)};var pK;function gK(e,t,i,n){pK||(pK="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:pK,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function mK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bK(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bK(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bK(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var vK=W((function(e){return{nested:function(t){var i=t.nestCount;return{paddingLeft:e.spacing(2*i)}},listItemIcon:{minWidth:"30px"}}})),yK=gK(mU.Z,{fontSize:"small"}),_K=gK(gU.Z,{fontSize:"small"}),wK=gK(bU.Z,{fontSize:"small"}),SK=gK(fU.Z,{}),CK=gK(pU.Z,{}),xK=function(e){var t=e.filePath,i=e.isRoot,n=e.nestCount,s=vK({nestCount:n}),o=mK((0,r.useState)(!1),2),a=o[0],l=o[1],c=mK((0,r.useState)(!1),2),h=c[0],u=c[1],d=mK((0,r.useState)([]),2),f=d[0],p=d[1],g=mK((0,r.useState)(!1),2),m=g[0],b=g[1],v=(0,r.useCallback)((function(){m?(p([]),b(!1)):(p(Nn().readdirSync(t)),b(!0))}),[t,m]),y=function(){return l(!0)},_=function(){return u(!0)},w=(0,r.useCallback)((function(){return p(Nn().readdirSync(t))}),[t]),S=(0,r.useMemo)((function(){var e=[{children:yK,handleActiveInput:y},{children:_K,handleActiveInput:_}];return i&&e.unshift({children:wK,handleActiveInput:w}),e}),[w,i]),C=(0,r.useMemo)((function(){return[{inputType:"folder",isActiveInput:h,setActiveInput:u,setFiles:p,filePath:t},{inputType:"file",isActiveInput:a,setActiveInput:l,setFiles:p,filePath:t}]}),[t,a,h]);return(0,r.useEffect)((function(){b(!1)}),[t]),r.createElement(r.Fragment,null,gK(sU,{button:!0,disableGutters:!0,onClick:v,className:"Folder ".concat(s.nested)},void 0,gK(cU,{className:s.listItemIcon},void 0,m?SK:CK),gK(aU,{primary:gK(xn,{pr:13},void 0,gK(dj,{variant:"body2",noWrap:!0},void 0,EH().basename(t)))}),gK(uU,{onClick:function(){b(!0),p(Nn().readdirSync(t))}},void 0,gK(fK,{icons:S}))),gK(j,{in:m,unmountOnExit:!0},void 0,gK(Kj,{component:"div",disablePadding:!0},void 0,gK(cK,{inputs:C}),gK(xU,{filePath:t,files:f,nestCount:n+1}))))};xK.defaultProps={isRoot:!1};const kK=xK;var EK=iH({name:"workDir",initialState:{workDir:void 0},reducers:{set:function(e,t){e.workDir=t.payload}}}),TK=function(e){return e.workDir.workDir},LK=EK.actions.set;const NK=EK.reducer;var MK;function OK(e,t,i,n){MK||(MK="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:MK,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function DK(e,t,i,n,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(n,r)}var IK=OK(qj,{color:"default"},void 0,"EXPLORER"),AK=OK(Sj,{});const PK=function(){var e=Ye(),t=et(TK),i=function(){var t=function(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var s=e.apply(t,i);function o(e){DK(s,n,r,o,a,"next",e)}function a(e){DK(s,n,r,o,a,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tU();case 2:i=t.sent,e(LK(i));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,r.useEffect)((function(){return Mn.ipcRenderer.on(Bj.$W,(function(t,i){e(LK(i))})),function(){Mn.ipcRenderer.removeAllListeners(Bj.$W)}}),[e]),OK(LH,{style:{height:"100%",overflow:"auto"}},void 0,OK(Kj,{dense:!0,subheader:IK},void 0,t?r.createElement(r.Fragment,null,OK(Qj,{onClick:function(){var e=jj()(t);e.add("."),e.commit("commit"),e.push(["-u","origin","master"])}},void 0,AK),OK(kK,{isRoot:!0,nestCount:0,filePath:t})):OK(xn,{textAlign:"center"},void 0,OK(Yj,{variant:"outlined",onClick:i},void 0,"Open Folder"))))};var RK=i(43092),BK=i.n(RK);const FK="_2c_LCemwJl82IbjchUros-";function WK(e){return vj({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.63 39L473 9.37a32 32 0 0 0-45.26 0L381.46 55.7a35.14 35.14 0 0 0-8.53 13.79L360.77 106l-76.26 76.26c-12.16-8.76-25.5-15.74-40.1-19.14-33.45-7.78-67-.88-89.88 22a82.45 82.45 0 0 0-20.24 33.47c-6 18.56-23.21 32.69-42.15 34.46-23.7 2.27-45.73 11.45-62.61 28.44C-16.11 327-7.9 409 47.58 464.45S185 528 230.56 482.52c17-16.88 26.16-38.9 28.45-62.71 1.76-18.85 15.89-36.13 34.43-42.14a82.6 82.6 0 0 0 33.48-20.25c22.87-22.88 29.74-56.36 22-89.75-3.39-14.64-10.37-28-19.16-40.2L406 151.23l36.48-12.16a35.14 35.14 0 0 0 13.79-8.53l46.33-46.32a32 32 0 0 0 .03-45.22zM208 352a48 48 0 1 1 48-48 48 48 0 0 1-48 48z"}}]})(e)}var VK=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.disabled,a=void 0!==o&&o,l=e.disableFocusRipple,u=void 0!==l&&l,d=e.onChange,f=e.onClick,p=e.selected,g=e.size,m=void 0===g?"medium":g,b=e.value,v=(0,h.Z)(e,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]);return r.createElement(tj,(0,c.Z)({className:(0,z.Z)(n.root,s,a&&n.disabled,p&&n.selected,"medium"!==m&&n["size".concat((0,RH.Z)(m))]),disabled:a,focusRipple:!u,ref:t,onClick:function(e){f&&(f(e,b),e.isDefaultPrevented())||d&&d(e,b)},onChange:d,value:b,"aria-pressed":p},v),r.createElement("span",{className:n.label},i))}));const zK=(0,R.Z)((function(e){return{root:(0,c.Z)({},e.typography.button,{boxSizing:"border-box",borderRadius:e.shape.borderRadius,padding:11,border:"1px solid ".concat((0,B.Fq)(e.palette.action.active,.12)),color:(0,B.Fq)(e.palette.action.active,.38),"&$selected":{color:e.palette.action.active,backgroundColor:(0,B.Fq)(e.palette.action.active,.12),"&:hover":{backgroundColor:(0,B.Fq)(e.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:(0,B.Fq)(e.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:(0,B.Fq)(e.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:e.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:e.typography.pxToRem(15)}}}),{name:"MuiToggleButton"})(VK);i(74352);function HK(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.indexOf(e)>=0:e===t)}var jK=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.exclusive,a=void 0!==o&&o,l=e.onChange,u=e.orientation,d=void 0===u?"horizontal":u,f=e.size,p=void 0===f?"medium":f,g=e.value,m=(0,h.Z)(e,["children","classes","className","exclusive","onChange","orientation","size","value"]),b=function(e,t){if(l){var i,n=g&&g.indexOf(t);g&&n>=0?(i=g.slice()).splice(n,1):i=g?g.concat(t):[t],l(e,i)}},v=function(e,t){l&&l(e,g===t?null:t)};return r.createElement("div",(0,c.Z)({role:"group",className:(0,z.Z)(n.root,s,"vertical"===d&&n.vertical),ref:t},m),r.Children.map(i,(function(e){return r.isValidElement(e)?r.cloneElement(e,{className:(0,z.Z)(n.grouped,n["grouped".concat((0,RH.Z)(d))],e.props.className),onChange:a?v:b,selected:void 0===e.props.selected?HK(e.props.value,g):e.props.selected,size:e.props.size||p}):null})))}));const UK=(0,R.Z)((function(e){return{root:{display:"inline-flex",borderRadius:e.shape.borderRadius},vertical:{flexDirection:"column"},grouped:{},groupedHorizontal:{"&:not(:first-child)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-child)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}}),{name:"MuiToggleButtonGroup"})(jK);var GK,KK=i(81157);function $K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qK(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qK(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qK(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ZK(e,t,i,n){GK||(GK="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:GK,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var YK=ZK(WK,{}),XK=function(e){var t=e.color;return ZK(U.Z,{color:t},void 0,YK)},QK=(new KK.model.Track,function(e){var t=e.track,i=e.selectedIndex,n=e.i,s=e.onListItemClick,o=e.onMute,a=e.onSolo,l=$K((0,r.useState)(!1),2),c=l[0],h=l[1],u=$K((0,r.useState)(!1),2),d=u[0],f=u[1],p=i===n;return ZK(sU,{id:"at-track-template",button:!0,selected:p,onClick:function(){s&&s(t,n)}},t.name,ZK(cU,{},void 0,ZK(XK,{color:p?"primary":"inherit"})),ZK(aU,{primary:t.name,secondary:ZK(UK,{},void 0,ZK(zK,{size:"small",selected:c,onClick:function(e){e.stopPropagation(),o&&o(c,t),h(!c)}},void 0,"M"),ZK(zK,{size:"small",selected:d,onClick:function(e){e.stopPropagation(),a&&a(d,t),f(!d)}},void 0,"S"))}))}),JK=function(e){var t=e.tracks,i=e.selectedIndex,n=e.onListItemClick,r=e.onSolo,s=e.onMute;return ZK(Kj,{className:"at-track-list",component:LH},void 0,null==t?void 0:t.map((function(e,t){return ZK(QK,{track:e,selectedIndex:i,i:t,onListItemClick:n,onSolo:r,onMute:s},e.index)})))};JK.defaultProps={tracks:[],selectedIndex:0,onMute:void 0,onSolo:void 0,onListItemClick:void 0};const e$=JK;var t$,i$=W((function(e){return{paper:{background:e.palette.background.paper}}})),n$=W((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(5)}}}));function r$(){return(r$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function s$(e,t,i,n){t$||(t$="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:t$,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function o$(e,t,i,n,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(n,r)}function a$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l$(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l$(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var c$=i(99869);const h$=function(e){var t=e.mainRef,i=e.scrollRef,n=e.alphaTabApi,s=a$((0,r.useState)([]),2),o=s[0],a=s[1],l=a$((0,r.useState)(0),2),c=l[0],h=l[1],u=BK()(i).width,d=et(hH),f=et(uH),p=i$(),g=function(e){return a(e.tracks)},m=(0,r.useCallback)((function(){n&&h(null==n?void 0:n.tracks[0].index)}),[n]);return(0,r.useEffect)((function(){return null==n||n.renderStarted.on(m),null==n||n.scoreLoaded.on(g),function(){null==n||n.renderStarted.off(m),null==n||n.scoreLoaded.off(g)}}),[n,m]),(0,r.useEffect)((function(){if(null==n||n.tex(""),d[f]){var e=d[f].filePath;switch(EH().extname(e)){case".js":!function(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var s=e.apply(t,i);function o(e){o$(s,n,r,o,a,"next",e)}function a(e){o$(s,n,r,o,a,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c$(e);case 2:i=t.sent,null==n||n.tex(i);case 4:case"end":return t.stop()}}),t)})))();break;case".tex":var t=Nn().readFileSync(e,"utf-8");null==n||n.tex(t);break;default:null==n||n.tex("")}}}),[d,f,n]),(0,r.useEffect)((function(){n&&(n.renderer.width=u,n.renderer.resizeRender())}),[n,u]),s$(xn,{id:"alphaTab",className:"Score",height:"100%",width:"100%",style:{background:"white"}},void 0,s$(xn,{className:"at-wrap",position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",mx:"auto",overflow:"hidden"},void 0,s$(xn,{className:"at-content",position:"relative",overflow:"hidden",flexGrow:1},void 0,s$(xn,{className:"".concat(FK," ").concat(p.paper),position:"absolute",top:"0",left:"0",bottom:"0",zIndex:1001,display:"flex",alignContent:"stretch",width:"auto",maxWidth:"60px",overflow:"hidden",border:1,borderLeft:0,borderTop:0,borderBottom:0,borderColor:"divider"},void 0,s$(e$,{tracks:o,selectedIndex:c,onListItemClick:function(e,t){h(t),null==n||n.renderTracks([e])}})),r.createElement(xn,r$({ref:i},{className:"at-viewport",overflow:"auto",position:"absolute",top:0,left:70,right:0,bottom:0,pr:3}),r.createElement("div",{ref:t,className:"at-main"})))))};var u$=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.color,o=void 0===s?"primary":s,a=e.position,l=void 0===a?"fixed":a,u=(0,h.Z)(e,["classes","className","color","position"]);return r.createElement(LH,(0,c.Z)({square:!0,component:"header",elevation:4,className:(0,z.Z)(i.root,i["position".concat((0,RH.Z)(l))],i["color".concat((0,RH.Z)(o))],n,"fixed"===l&&"mui-fixed"),ref:t},u))}));const d$=(0,R.Z)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(u$);var f$=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.component,o=void 0===s?"div":s,a=e.disableGutters,l=void 0!==a&&a,u=e.variant,d=void 0===u?"regular":u,f=(0,h.Z)(e,["classes","className","component","disableGutters","variant"]);return r.createElement(o,(0,c.Z)({className:(0,z.Z)(i.root,i[d],n,!l&&i.gutters),ref:t},f))}));const p$=(0,R.Z)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:(0,Qi.Z)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),regular:e.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(f$);var g$=[0,1,2,3,4,5,6,7,8,9,10],m$=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function b$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=parseFloat(e);return"".concat(i/t).concat(String(e).replace(String(i),"")||"px")}var v$=r.forwardRef((function(e,t){var i=e.alignContent,n=void 0===i?"stretch":i,s=e.alignItems,o=void 0===s?"stretch":s,a=e.classes,l=e.className,u=e.component,d=void 0===u?"div":u,f=e.container,p=void 0!==f&&f,g=e.direction,m=void 0===g?"row":g,b=e.item,v=void 0!==b&&b,y=e.justify,_=e.justifyContent,w=void 0===_?"flex-start":_,S=e.lg,C=void 0!==S&&S,x=e.md,k=void 0!==x&&x,E=e.sm,T=void 0!==E&&E,L=e.spacing,N=void 0===L?0:L,M=e.wrap,O=void 0===M?"wrap":M,D=e.xl,I=void 0!==D&&D,A=e.xs,P=void 0!==A&&A,R=e.zeroMinWidth,B=void 0!==R&&R,F=(0,h.Z)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),W=(0,z.Z)(a.root,l,p&&[a.container,0!==N&&a["spacing-xs-".concat(String(N))]],v&&a.item,B&&a.zeroMinWidth,"row"!==m&&a["direction-xs-".concat(String(m))],"wrap"!==O&&a["wrap-xs-".concat(String(O))],"stretch"!==o&&a["align-items-xs-".concat(String(o))],"stretch"!==n&&a["align-content-xs-".concat(String(n))],"flex-start"!==(y||w)&&a["justify-content-xs-".concat(String(y||w))],!1!==P&&a["grid-xs-".concat(String(P))],!1!==T&&a["grid-sm-".concat(String(T))],!1!==k&&a["grid-md-".concat(String(k))],!1!==C&&a["grid-lg-".concat(String(C))],!1!==I&&a["grid-xl-".concat(String(I))]);return r.createElement(d,(0,c.Z)({className:W,ref:t},F))}));const y$=(0,R.Z)((function(e){return(0,c.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var i={};return g$.forEach((function(n){var r=e.spacing(n);0!==r&&(i["spacing-".concat(t,"-").concat(n)]={margin:"-".concat(b$(r,2)),width:"calc(100% + ".concat(b$(r),")"),"& > $item":{padding:b$(r,2)}})})),i}(e,"xs"),e.breakpoints.keys.reduce((function(t,i){return function(e,t,i){var n={};m$.forEach((function(e){var t="grid-".concat(i,"-").concat(e);if(!0!==e)if("auto"!==e){var r="".concat(Math.round(e/12*1e8)/1e6,"%");n[t]={flexBasis:r,flexGrow:0,maxWidth:r}}else n[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else n[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===i?(0,c.Z)(e,n):e[t.breakpoints.up(i)]=n}(t,e,i),t}),{}))}),{name:"MuiGrid"})(v$);var _$=function(e,t){return"boolean"==typeof t?t:!e};const w$=function(e){return(0,r.useReducer)(_$,e)};var S$;function C$(e,t,i,n){S$||(S$="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:S$,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}const x$=function(e){var t=e.title,i=e.artist;return C$(xn,{className:"SongInfo",display:"flex",alignItems:"center",height:"100%"},void 0,C$(xn,{className:"at-song-title",mx:3},void 0,C$(dj,{variant:"body1"},void 0,t)),"-",C$(xn,{className:"at-song-artist",mx:3},void 0,C$(dj,{variant:"body2"},void 0,i)))};var k$;function E$(e,t,i,n){k$||(k$="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:k$,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var T$=E$(i(20008).Z,{}),L$=function(e){var t=e.className,i=e.disabled,n=e.onStop;return E$(zK,{className:t,value:"check",disabled:i,onClick:function(){i||n&&n()}},void 0,T$)};L$.defaultProps={className:"",disabled:!1,onStop:void 0};const N$=L$;var M$,O$=i(73770);function D$(e,t,i,n){M$||(M$="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:M$,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var I$=D$(i(66652).Z,{}),A$=D$(O$.Z,{}),P$=function(e){var t=e.className,i=e.paused,n=e.disabled,r=e.onPause;return D$(zK,{className:t,value:"check",disabled:n,onClick:function(){n||r&&r()}},void 0,i?I$:A$)};P$.defaultProps={className:"",paused:!0,disabled:!1,onPause:void 0};const R$=P$;const B$=(0,R.Z)((function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:(0,c.Z)({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}}),{name:"PrivateValueLabel"})((function(e){var t=e.children,i=e.classes,n=e.className,s=e.open,o=e.value,a=e.valueLabelDisplay;return"off"===a?t:r.cloneElement(t,{className:(0,z.Z)(t.props.className,(s||"on"===a)&&i.open,i.thumb)},r.createElement("span",{className:(0,z.Z)(i.offset,n)},r.createElement("span",{className:i.circle},r.createElement("span",{className:i.label},o))))}));function F$(e,t){return e-t}function W$(e,t,i){return Math.min(Math.max(t,e),i)}function V$(e,t){return e.reduce((function(e,i,n){var r=Math.abs(t-i);return null===e||r<e.distance||r===e.distance?{distance:r,index:n}:e}),null).index}function z$(e,t){if(void 0!==t.current&&e.changedTouches){for(var i=0;i<e.changedTouches.length;i+=1){var n=e.changedTouches[i];if(n.identifier===t.current)return{x:n.clientX,y:n.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function H$(e,t,i){return 100*(e-t)/(i-t)}function j$(e,t,i){var n=Math.round((e-i)/t)*t+i;return Number(n.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),i=t[0].split(".")[1];return(i?i.length:0)+parseInt(t[1],10)}var n=e.toString().split(".")[1];return n?n.length:0}(t)))}function U$(e){var t=e.values,i=e.source,n=e.newValue,r=e.index;if(t[r]===n)return i;var s=t.slice();return s[r]=n,s}function G$(e){var t=e.sliderRef,i=e.activeIndex,n=e.setActive;t.current.contains(document.activeElement)&&Number(document.activeElement.getAttribute("data-index"))===i||t.current.querySelector('[role="slider"][data-index="'.concat(i,'"]')).focus(),n&&n(i)}var K$={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},$$=function(e){return e},q$=r.forwardRef((function(e,t){var i=e["aria-label"],n=e["aria-labelledby"],s=e["aria-valuetext"],o=e.classes,a=e.className,l=e.color,u=void 0===l?"primary":l,d=e.component,f=void 0===d?"span":d,p=e.defaultValue,g=e.disabled,m=void 0!==g&&g,b=e.getAriaLabel,v=e.getAriaValueText,y=e.marks,_=void 0!==y&&y,w=e.max,S=void 0===w?100:w,C=e.min,x=void 0===C?0:C,k=e.name,T=e.onChange,L=e.onChangeCommitted,M=e.onMouseDown,O=e.orientation,D=void 0===O?"horizontal":O,I=e.scale,A=void 0===I?$$:I,P=e.step,R=void 0===P?1:P,B=e.ThumbComponent,F=void 0===B?"span":B,W=e.track,H=void 0===W?"normal":W,j=e.value,U=e.ValueLabelComponent,$=void 0===U?B$:U,q=e.valueLabelDisplay,Z=void 0===q?"off":q,Y=e.valueLabelFormat,X=void 0===Y?$$:Y,Q=(0,h.Z)(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),J=N(),ee=r.useRef(),te=r.useState(-1),ie=te[0],ne=te[1],re=r.useState(-1),se=re[0],oe=re[1],ae=(0,HG.Z)({controlled:j,default:p,name:"Slider"}),le=(0,V.Z)(ae,2),ce=le[0],he=le[1],ue=Array.isArray(ce),de=ue?ce.slice().sort(F$):[ce];de=de.map((function(e){return W$(e,x,S)}));var fe=!0===_&&null!==R?(0,Ki.Z)(Array(Math.floor((S-x)/R)+1)).map((function(e,t){return{value:x+R*t}})):_||[],pe=(0,HH.Z)(),ge=pe.isFocusVisible,me=pe.onBlurVisible,be=pe.ref,ve=r.useState(-1),ye=ve[0],_e=ve[1],we=r.useRef(),Se=(0,E.Z)(be,we),Ce=(0,E.Z)(t,Se),xe=(0,K.Z)((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));ge(e)&&_e(t),oe(t)})),ke=(0,K.Z)((function(){-1!==ye&&(_e(-1),me()),oe(-1)})),Ee=(0,K.Z)((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));oe(t)})),Te=(0,K.Z)((function(){oe(-1)})),Le="rtl"===J.direction,Ne=(0,K.Z)((function(e){var t,i=Number(e.currentTarget.getAttribute("data-index")),n=de[i],r=(S-x)/10,s=fe.map((function(e){return e.value})),o=s.indexOf(n),a=Le?"ArrowLeft":"ArrowRight",l=Le?"ArrowRight":"ArrowLeft";switch(e.key){case"Home":t=x;break;case"End":t=S;break;case"PageUp":R&&(t=n+r);break;case"PageDown":R&&(t=n-r);break;case a:case"ArrowUp":t=R?n+R:s[o+1]||s[s.length-1];break;case l:case"ArrowDown":t=R?n-R:s[o-1]||s[0];break;default:return}if(e.preventDefault(),R&&(t=j$(t,R,x)),t=W$(t,x,S),ue){var c=t;t=U$({values:de,source:ce,newValue:t,index:i}).sort(F$),G$({sliderRef:we,activeIndex:t.indexOf(c)})}he(t),_e(i),T&&T(e,t),L&&L(e,t)})),Me=r.useRef(),Oe=D;Le&&"vertical"!==D&&(Oe+="-reverse");var De=function(e){var t,i,n=e.finger,r=e.move,s=void 0!==r&&r,o=e.values,a=e.source,l=we.current.getBoundingClientRect(),c=l.width,h=l.height,u=l.bottom,d=l.left;if(t=0===Oe.indexOf("vertical")?(u-n.y)/h:(n.x-d)/c,-1!==Oe.indexOf("-reverse")&&(t=1-t),i=function(e,t,i){return(i-t)*e+t}(t,x,S),R)i=j$(i,R,x);else{var f=fe.map((function(e){return e.value}));i=f[V$(f,i)]}i=W$(i,x,S);var p=0;if(ue){var g=i;p=(i=U$({values:o,source:a,newValue:i,index:p=s?Me.current:V$(o,i)}).sort(F$)).indexOf(g),Me.current=p}return{newValue:i,activeIndex:p}},Ie=(0,K.Z)((function(e){var t=z$(e,ee);if(t){var i=De({finger:t,move:!0,values:de,source:ce}),n=i.newValue,r=i.activeIndex;G$({sliderRef:we,activeIndex:r,setActive:ne}),he(n),T&&T(e,n)}})),Ae=(0,K.Z)((function(e){var t=z$(e,ee);if(t){var i=De({finger:t,values:de,source:ce}).newValue;ne(-1),"touchend"===e.type&&oe(-1),L&&L(e,i),ee.current=void 0;var n=(0,G.Z)(we.current);n.removeEventListener("mousemove",Ie),n.removeEventListener("mouseup",Ae),n.removeEventListener("touchmove",Ie),n.removeEventListener("touchend",Ae)}})),Pe=(0,K.Z)((function(e){e.preventDefault();var t=e.changedTouches[0];null!=t&&(ee.current=t.identifier);var i=z$(e,ee),n=De({finger:i,values:de,source:ce}),r=n.newValue,s=n.activeIndex;G$({sliderRef:we,activeIndex:s,setActive:ne}),he(r),T&&T(e,r);var o=(0,G.Z)(we.current);o.addEventListener("touchmove",Ie),o.addEventListener("touchend",Ae)}));r.useEffect((function(){var e=we.current;e.addEventListener("touchstart",Pe);var t=(0,G.Z)(e);return function(){e.removeEventListener("touchstart",Pe),t.removeEventListener("mousemove",Ie),t.removeEventListener("mouseup",Ae),t.removeEventListener("touchmove",Ie),t.removeEventListener("touchend",Ae)}}),[Ae,Ie,Pe]);var Re=(0,K.Z)((function(e){M&&M(e),e.preventDefault();var t=z$(e,ee),i=De({finger:t,values:de,source:ce}),n=i.newValue,r=i.activeIndex;G$({sliderRef:we,activeIndex:r,setActive:ne}),he(n),T&&T(e,n);var s=(0,G.Z)(we.current);s.addEventListener("mousemove",Ie),s.addEventListener("mouseup",Ae)})),Be=H$(ue?de[0]:x,x,S),Fe=H$(de[de.length-1],x,S)-Be,We=(0,c.Z)({},K$[Oe].offset(Be),K$[Oe].leap(Fe));return r.createElement(f,(0,c.Z)({ref:Ce,className:(0,z.Z)(o.root,o["color".concat((0,RH.Z)(u))],a,m&&o.disabled,fe.length>0&&fe.some((function(e){return e.label}))&&o.marked,!1===H&&o.trackFalse,"vertical"===D&&o.vertical,"inverted"===H&&o.trackInverted),onMouseDown:Re},Q),r.createElement("span",{className:o.rail}),r.createElement("span",{className:o.track,style:We}),r.createElement("input",{value:de.join(","),name:k,type:"hidden"}),fe.map((function(e,t){var i,n=H$(e.value,x,S),s=K$[Oe].offset(n);return i=!1===H?-1!==de.indexOf(e.value):"normal"===H&&(ue?e.value>=de[0]&&e.value<=de[de.length-1]:e.value<=de[0])||"inverted"===H&&(ue?e.value<=de[0]||e.value>=de[de.length-1]:e.value>=de[0]),r.createElement(r.Fragment,{key:e.value},r.createElement("span",{style:s,"data-index":t,className:(0,z.Z)(o.mark,i&&o.markActive)}),null!=e.label?r.createElement("span",{"aria-hidden":!0,"data-index":t,style:s,className:(0,z.Z)(o.markLabel,i&&o.markLabelActive)},e.label):null)})),de.map((function(e,t){var a=H$(e,x,S),l=K$[Oe].offset(a);return r.createElement($,{key:t,valueLabelFormat:X,valueLabelDisplay:Z,className:o.valueLabel,value:"function"==typeof X?X(A(e),t):X,index:t,open:se===t||ie===t||"on"===Z,disabled:m},r.createElement(F,{className:(0,z.Z)(o.thumb,o["thumbColor".concat((0,RH.Z)(u))],ie===t&&o.active,m&&o.disabled,ye===t&&o.focusVisible),tabIndex:m?null:0,role:"slider",style:l,"data-index":t,"aria-label":b?b(t):i,"aria-labelledby":n,"aria-orientation":D,"aria-valuemax":A(S),"aria-valuemin":A(x),"aria-valuenow":A(e),"aria-valuetext":v?v(A(e),t):s,onKeyDown:Ne,onFocus:xe,onBlur:ke,onMouseOver:Ee,onMouseLeave:Te}))})))}));const Z$=(0,R.Z)((function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:"light"===e.palette.type?(0,B.$n)(e.palette.primary.main,.62):(0,B._j)(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat((0,B.Fq)(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat((0,B.Fq)(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat((0,B.Fq)(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat((0,B.Fq)(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:(0,c.Z)({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}}),{name:"MuiSlider"})(q$);var Y$,X$=i(97429),Q$=i(52541),J$=i(90651);function eq(e,t,i,n){Y$||(Y$="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Y$,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var tq=eq(i(91366).Z,{}),iq=eq(X$.Z,{}),nq=eq(Q$.Z,{}),rq=eq(J$.Z,{}),sq=function(e){var t=e.value;return e.muted||!t?tq:t>=.6?iq:t>=.3?nq:rq};sq.defaultProps={value:void 0,muted:!1};var oq=function(e){var t=e.className,i=e.volume,n=e.muted,r=e.onMute,s=e.onVolume;return eq(zK,{className:t,value:"",selected:n,onChange:function(){r&&r()}},void 0,eq(xn,{width:200,display:"flex",alignItems:"center"},void 0,eq(sq,{value:i,muted:n}),eq(Z$,{className:t,disabled:n,value:i,onClick:function(e){return e.stopPropagation()},onChange:s})))};oq.defaultProps={className:"",muted:!1,onVolume:void 0,onMute:void 0};const aq=oq;var lq;function cq(e,t,i,n){lq||(lq="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:lq,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var hq=cq(i(43776).Z,{}),uq=function(e){var t=e.className,i=e.selected,n=e.onClick;return cq(zK,{className:t,value:"check",selected:i,onClick:n},void 0,hq)};uq.defaultProps={className:"",selected:!1,onClick:void 0};const dq=uq;var fq;function pq(e,t,i,n){fq||(fq="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:fq,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var gq=pq(i(9753).Z,{}),mq=function(e){var t=e.className,i=e.selected,n=e.onClick;return pq(zK,{className:t,value:"check",selected:i,onClick:n},void 0,gq)};mq.defaultProps={className:"",selected:!1,onClick:void 0};const bq=mq;function vq(e){return vj({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 81c-7.7 0-15.5.33-23 .95V119h46V81.95c-7.5-.62-15.3-.95-23-.95zm-41 3.07c-4.8.76-9.5 1.65-13.9 2.69-14.7 3.46-26.3 8.71-32.8 14.04l-22.4 140.3L215 341V137h-23v-18h23V84.07zm82 0V119h23v18h-23v238.4c30.6 2.8 54.5 19.5 73.7 40.5 11 12.2 20.6 25.8 29.6 39.4l-56.6-354.5c-6.5-5.33-18.1-10.58-32.8-14.04-4.4-1.04-9.1-1.93-13.9-2.69zM39.34 90.79L24.66 101.2l20.89 29.6 15.14-9.9-21.35-30.11zm54.81 29.71l-56.04 36.7L82.56 183l17.54-11.5-5.95-51zM233 137v46h46v-46h-46zm-124.8 50.8l-15.3 10 48.9 69.2-30.1 188.3c9-13.6 18.6-27.2 29.6-39.4 19.2-21 43.1-37.7 73.7-40.5v-2.8l-73.2-105.7 4.1-26-37.7-53.1zM233 201v46h46v-46h-46zm0 64v46h46v-46h-46zm0 64v38l5.5 8H279v-46h-46zm206 23v23h-33.2l2.9 18H439v23h18v-64h-18zm-215 41c-29 0-50.3 14.1-69.3 35.1-15.5 17-28.9 38.4-42.1 58.9h286.8c-13.2-20.5-26.6-41.9-42.1-58.9-19-21-40.3-35.1-69.3-35.1h-37l12.4 17.9-14.8 10.2-19.5-28.1H224z"}}]})(e)}var yq;function _q(e,t,i,n){yq||(yq="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:yq,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var wq=_q(vq,{size:24}),Sq=function(e){var t=e.className,i=e.selected,n=e.onClick;return _q(zK,{value:"check",className:t,selected:i,onClick:n},void 0,wq)};Sq.defaultProps={className:"",selected:!1,onClick:void 0};const Cq=Sq;var xq=r.forwardRef((function(e,t){var i,n=e.classes,s=e.className,o=e.component,a=void 0===o?"li":o,l=e.disableGutters,u=void 0!==l&&l,d=e.ListItemClasses,f=e.role,p=void 0===f?"menuitem":f,g=e.selected,m=e.tabIndex,b=(0,h.Z)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(i=void 0!==m?m:-1),r.createElement(sU,(0,c.Z)({button:!0,role:p,tabIndex:i,component:a,selected:g,disableGutters:u,classes:(0,c.Z)({dense:n.dense},d),className:(0,z.Z)(n.root,s,g&&n.selected,!u&&n.gutters),ref:t},b))}));const kq=(0,R.Z)((function(e){return{root:(0,c.Z)({},e.typography.body1,(0,Qi.Z)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:(0,c.Z)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(xq);var Eq;function Tq(e,t,i,n){Eq||(Eq="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Eq,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var Lq=Tq(YU,{id:"layout-select-label"},void 0,"Layout"),Nq=Tq(kq,{value:0},void 0,"Horizontal"),Mq=Tq(kq,{value:1},void 0,"Page"),Oq=function(e){var t=e.onLayout,i=e.layout;return Tq(QU,{className:"Layout"},void 0,Lq,Tq(eK,{id:"layout-select",labelId:"layout-select-label",value:i,onChange:t,autoWidth:!0},void 0,Nq,Mq))};Oq.defaultProps={layout:0,onLayout:void 0};const Dq=Oq;var Iq;function Aq(e,t,i,n){Iq||(Iq="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Iq,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var Pq=Aq(YU,{id:"zoom-select-label"},void 0,"Zoom"),Rq=function(e){var t=e.zoom,i=e.onZoom,n=[25,50,75,90,100,110,125,150,200].map((function(e){return Aq(kq,{value:e},e,e,"%")}));return Aq(QU,{className:"Zoom"},void 0,Pq,Aq(eK,{id:"zoom-select",labelId:"zoom-select-label",value:t,onChange:i},void 0,n))};Rq.defaultProps={zoom:100,onZoom:void 0};const Bq=Rq;var Fq;function Wq(e,t,i,n){Fq||(Fq="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Fq,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function Vq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zq(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return zq(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zq(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Hq=Wq(y$,{item:!0,xs:6}),jq=function(e){var t=e.alphaTabApi,i=Vq((0,r.useState)(""),2),n=i[0],s=i[1],o=Vq((0,r.useState)(""),2),a=o[0],l=o[1],c=Vq((0,r.useState)(100),2),h=c[0],u=c[1],d=Vq((0,r.useState)(!0),2),f=d[0],p=d[1],g=Vq((0,r.useState)(!0),2),m=g[0],b=g[1],v=Vq(w$(!1),2),y=v[0],_=v[1],w=Vq(w$(!1),2),S=w[0],C=w[1],x=Vq(w$(!1),2),k=x[0],E=x[1],T=Vq(w$(!1),2),L=T[0],N=T[1],M=Vq((0,r.useState)(0),2),O=M[0],D=M[1],I=Vq((0,r.useState)(100),2),A=I[0],P=I[1],R=function(){return b(!1)},B=function(e){var t=e.state;return p(0===t)},F=function(e){s(e.title),l(e.artist)};return(0,r.useEffect)((function(){return null==t||t.scoreLoaded.on(F),null==t||t.playerReady.on(R),null==t||t.playerStateChanged.on(B),function(){null==t||t.scoreLoaded.off(F),null==t||t.playerReady.off(R),null==t||t.playerStateChanged.off(B)}}),[t]),Wq(d$,{className:"Header",position:"absolute",color:"default"},void 0,Wq(p$,{},void 0,Wq(y$,{container:!0},void 0,Wq(y$,{className:"at-controls-left",item:!0,xs:4},void 0,Wq(x$,{title:n,artist:a})),Wq(y$,{item:!0,xs:5},void 0,Wq(xn,{display:"flex",justifyContent:"center"},void 0,Wq(UK,{},void 0,Wq(N$,{onStop:function(){return null==t?void 0:t.stop()}}),Wq(R$,{paused:f,disabled:m,onPause:function(){return null==t?void 0:t.playPause()}}),Wq(aq,{volume:h,muted:y,onMute:function(){t&&(_(),0===t.masterVolume?t.masterVolume=h/100:t.masterVolume=0)},onVolume:function(e,i){t&&(Array.isArray(i)||(t.masterVolume=i/100,u(i)))}}),Wq(dq,{selected:S,onClick:function(){t&&(C(),t.countInVolume=S?0:1)}}),Wq(bq,{selected:k,onClick:function(){t&&(E(),t.isLooping=!k)}}),Wq(Cq,{selected:L,onClick:function(){t&&(N(),t.metronomeVolume=L?0:1)}})))),Wq(y$,{item:!0,xs:3},void 0,Wq(y$,{className:"at-controls-right",container:!0},void 0,Hq,Wq(y$,{item:!0,xs:3},void 0,Wq(Bq,{zoom:A,onZoom:function(e){if(t){P(e.target.value);var i=parseInt(e.target.value,10)/100;t.settings.display.scale=i,t.updateSettings(),t.render()}}})),Wq(y$,{item:!0,xs:3},void 0,Wq(Dq,{layout:O,onLayout:function(e){if(t){switch(e.target.value){case 0:D(0),t.settings.display.layoutMode=0;break;case 1:D(1),t.settings.display.layoutMode=1}t.updateSettings(),t.render()}}})))))))};jq.defaultProps={alphaTabApi:void 0};const Uq=jq;var Gq,Kq=i(28428),$q=i(66582);function qq(e,t,i,n){Gq||(Gq="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Gq,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function Zq(e){return function(e){if(Array.isArray(e))return Qq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Xq(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||Xq(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xq(e,t){if(e){if("string"==typeof e)return Qq(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Qq(e,t):void 0}}function Qq(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Jq=qq(dj,{variant:"body2",color:"textSecondary"},void 0,"Console"),eZ=qq(Kq.Z,{fontSize:"small"});const tZ=function(){var e=Yq((0,r.useState)([]),2),t=e[0],i=e[1],n=(0,r.useRef)(null),s=i$();return(0,r.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[t]),(0,r.useEffect)((function(){(0,$q.Hook)(window.console,(function(e){i((function(t){return[].concat(Zq(t),[(0,$q.Decode)(e)])}))}))}),[]),r.createElement(r.Fragment,null,qq(xn,{className:s.paper,display:"flex",alignItems:"center",position:"sticky",zIndex:1,top:0,height:"50px",px:3},void 0,Jq,qq(xn,{ml:"auto"},void 0,qq(Qj,{onClick:function(){return i([])}},void 0,eZ))),qq(xn,{overflow:"auto",height:"100%",pt:"51px",style:{background:"#242424"}},void 0,qq($q.Console,{logs:t,variant:"dark"}),r.createElement("div",{ref:n})))};var iZ=e=>e instanceof HTMLElement;const nZ="blur",rZ="change",sZ="input",oZ="onBlur",aZ="onChange",lZ="onSubmit",cZ="onTouched",hZ="all",uZ="undefined",dZ="max",fZ="min",pZ="maxLength",gZ="minLength",mZ="pattern",bZ="required",vZ="validate";var yZ=e=>null==e;const _Z=e=>"object"==typeof e;var wZ=e=>!yZ(e)&&!Array.isArray(e)&&_Z(e)&&!(e instanceof Date),SZ=e=>/^\w*$/.test(e),CZ=e=>e.filter(Boolean),xZ=e=>CZ(e.replace(/["|']/g,"").replace(/\[/g,".").replace(/\]/g,"").split("."));function kZ(e,t,i){let n=-1;const r=SZ(t)?[t]:xZ(t),s=r.length,o=s-1;for(;++n<s;){const t=r[n];let s=i;if(n!==o){const i=e[t];s=wZ(i)||Array.isArray(i)?i:isNaN(+r[n+1])?{}:[]}e[t]=s,e=e[t]}return e}var EZ=(e,t={})=>{for(const i in e)SZ(i)?t[i]=e[i]:kZ(t,i,e[i]);return t},TZ=e=>void 0===e,LZ=(e={},t,i)=>{const n=CZ(t.split(/[,[\].]+?/)).reduce(((e,t)=>yZ(e)?e:e[t]),e);return TZ(n)||n===e?TZ(e[t])?i:e[t]:n},NZ=(e,t)=>{iZ(e)&&e.removeEventListener&&(e.removeEventListener(sZ,t),e.removeEventListener(rZ,t),e.removeEventListener(nZ,t))};const MZ={isValid:!1,value:null};var OZ=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.ref.checked?{isValid:!0,value:t.ref.value}:e),MZ):MZ,DZ=e=>"radio"===e.type,IZ=e=>"file"===e.type,AZ=e=>"checkbox"===e.type,PZ=e=>"select-multiple"===e.type;const RZ={value:!1,isValid:!1},BZ={value:!0,isValid:!0};var FZ=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.ref.checked)).map((({ref:{value:e}})=>e));return{value:t,isValid:!!t.length}}const{checked:t,value:i,attributes:n}=e[0].ref;return t?n&&!TZ(n.value)?TZ(i)||""===i?BZ:{value:i,isValid:!0}:BZ:RZ}return RZ};function WZ(e,t,i,n,r){const s=e.current[t];if(s){const{ref:{value:e,disabled:t},ref:i,valueAsNumber:a,valueAsDate:l,setValueAs:c}=s;if(t&&n)return;return IZ(i)?i.files:DZ(i)?OZ(s.options).value:PZ(i)?(o=i.options,[...o].filter((({selected:e})=>e)).map((({value:e})=>e))):AZ(i)?FZ(s.options).value:r?e:a?""===e?NaN:+e:l?i.valueAsDate:c?c(e):e}var o;if(i)return LZ(i.current,t)}function VZ(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&VZ(e.parentNode)}var zZ=e=>wZ(e)&&!Object.keys(e).length,HZ=e=>"boolean"==typeof e;function jZ(e,t){const i=SZ(t)?[t]:xZ(t),n=1==i.length?e:function(e,t){const i=t.slice(0,-1).length;let n=0;for(;n<i;)e=TZ(e)?n++:e[t[n++]];return e}(e,i),r=i[i.length-1];let s;n&&delete n[r];for(let t=0;t<i.slice(0,-1).length;t++){let n,r=-1;const o=i.slice(0,-(t+1)),a=o.length-1;for(t>0&&(s=e);++r<o.length;){const t=o[r];n=n?n[t]:e[t],a===r&&(wZ(n)&&zZ(n)||Array.isArray(n)&&!n.filter((e=>wZ(e)&&!zZ(e)||HZ(e))).length)&&(s?delete s[t]:delete e[t]),s=n}}return e}const UZ=(e,t)=>e&&e.ref===t;var GZ=e=>yZ(e)||!_Z(e);function KZ(e,t){if(GZ(e)||GZ(t))return t;for(const i in t){const n=e[i],r=t[i];try{e[i]=wZ(n)&&wZ(r)||Array.isArray(n)&&Array.isArray(r)?KZ(n,r):r}catch(e){}}return e}function $Z(e,t,i){if(GZ(e)||GZ(t)||e instanceof Date||t instanceof Date)return e===t;if(!(0,r.isValidElement)(e)){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const r of n){const n=e[r];if(!i||"ref"!==r){const e=t[r];if((wZ(n)||Array.isArray(n))&&(wZ(e)||Array.isArray(e))?!$Z(n,e,i):n!==e)return!1}}}return!0}function qZ(e,t,i,n,r){let s=-1;for(;++s<e.length;){for(const n in e[s])Array.isArray(e[s][n])?(!i[s]&&(i[s]={}),i[s][n]=[],qZ(e[s][n],LZ(t[s]||{},n,[]),i[s][n],i[s],n)):$Z(LZ(t[s]||{},n),e[s][n])?kZ(i[s]||{},n):i[s]=Object.assign(Object.assign({},i[s]),{[n]:!0});n&&!i.length&&delete n[r]}return i}var ZZ=(e,t,i)=>KZ(qZ(e,t,i.slice(0,e.length)),qZ(t,e,i.slice(0,e.length))),YZ=e=>"string"==typeof e,XZ=(e,t,i,n,r)=>{const s={};for(const t in e.current)(TZ(r)||(YZ(r)?t.startsWith(r):Array.isArray(r)&&r.find((e=>t.startsWith(e)))))&&(s[t]=WZ(e,t,void 0,n));return i?EZ(s):KZ(t,EZ(s))},QZ=e=>e instanceof RegExp,JZ=e=>wZ(e)&&!QZ(e)?e:{value:e,message:""},eY=e=>"function"==typeof e,tY=e=>YZ(e)||(0,r.isValidElement)(e);function iY(e,t,i="validate"){if(tY(e)||HZ(e)&&!e)return{type:i,message:tY(e)?e:"",ref:t}}var nY=(e,t,i,n,r)=>t?Object.assign(Object.assign({},i[e]),{types:Object.assign(Object.assign({},i[e]&&i[e].types?i[e].types:{}),{[n]:r||!0})}):{},rY=async(e,t,{ref:i,ref:{value:n},options:r,required:s,maxLength:o,minLength:a,min:l,max:c,pattern:h,validate:u},d)=>{const f=i.name,p={},g=DZ(i),m=AZ(i),b=g||m,v=""===n,y=nY.bind(null,f,t,p),_=(e,t,n,r=pZ,s=gZ)=>{const o=e?t:n;p[f]=Object.assign({type:e?r:s,message:o,ref:i},y(e?r:s,o))};if(s&&(!g&&!m&&(v||yZ(n))||HZ(n)&&!n||m&&!FZ(r).isValid||g&&!OZ(r).isValid)){const{value:n,message:r}=tY(s)?{value:!!s,message:s}:JZ(s);if(n&&(p[f]=Object.assign({type:bZ,message:r,ref:b?((e.current[f].options||[])[0]||{}).ref:i},y(bZ,r)),!t))return p}if(!(yZ(l)&&yZ(c)||""===n)){let e,r;const s=JZ(c),o=JZ(l);if(isNaN(n)){const t=i.valueAsDate||new Date(n);YZ(s.value)&&(e=t>new Date(s.value)),YZ(o.value)&&(r=t<new Date(o.value))}else{const t=i.valueAsNumber||parseFloat(n);yZ(s.value)||(e=t>s.value),yZ(o.value)||(r=t<o.value)}if((e||r)&&(_(!!e,s.message,o.message,dZ,fZ),!t))return p}if(YZ(n)&&!v&&(o||a)){const e=JZ(o),i=JZ(a),r=!yZ(e.value)&&n.length>e.value,s=!yZ(i.value)&&n.length<i.value;if((r||s)&&(_(r,e.message,i.message),!t))return p}if(YZ(n)&&h&&!v){const{value:e,message:r}=JZ(h);if(QZ(e)&&!e.test(n)&&(p[f]=Object.assign({type:mZ,message:r,ref:i},y(mZ,r)),!t))return p}if(u){const n=WZ(e,f,d,!1,!0),s=b&&r?r[0].ref:i;if(eY(u)){const e=iY(await u(n),s);if(e&&(p[f]=Object.assign(Object.assign({},e),y(vZ,e.message)),!t))return p}else if(wZ(u)){let e={};for(const[i,r]of Object.entries(u)){if(!zZ(e)&&!t)break;const o=iY(await r(n),s,i);o&&(e=Object.assign(Object.assign({},o),y(i,o.message)),t&&(p[f]=e))}if(!zZ(e)&&(p[f]=Object.assign({ref:s},e),!t))return p}}return p};const sY=(e,t,i=[])=>{for(const n in t){const r=e+(wZ(t)?`.${n}`:`[${n}]`);GZ(t[n])?i.push(r):sY(r,t[n],i)}return i};var oY=(e,t,i,n,r)=>{let s;return i.add(t),zZ(e)||(s=LZ(e,t),(wZ(s)||Array.isArray(s))&&sY(t,s).forEach((e=>i.add(e)))),TZ(s)?r?n:LZ(n,t):s},aY=({isOnBlur:e,isOnChange:t,isOnTouch:i,isTouched:n,isReValidateOnBlur:r,isReValidateOnChange:s,isBlurEvent:o,isSubmitted:a,isOnAll:l})=>!l&&(!a&&i?!(n||o):(a?r:e)?!o:!(a?s:t)||o),lY=e=>e.substring(0,e.indexOf("["));const cY=(e,t)=>RegExp(`^${t}([|.)\\d+`.replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e);var hY=(e,t)=>[...e].some((e=>cY(t,e)));var uY=typeof window!==uZ&&typeof document!==uZ;function dY(e){var t;let i;if(GZ(e)||uY&&(e instanceof File||iZ(e)))return e;if(!["Set","Map","Object","Date","Array"].includes(null===(t=e.constructor)||void 0===t?void 0:t.name))return e;if(e instanceof Date)return i=new Date(e.getTime()),i;if(e instanceof Set){i=new Set;for(const t of e)i.add(t);return i}if(e instanceof Map){i=new Map;for(const t of e.keys())i.set(t,dY(e.get(t)));return i}i=Array.isArray(e)?[]:{};for(const t in e)i[t]=dY(e[t]);return i}var fY=e=>({isOnSubmit:!e||e===lZ,isOnBlur:e===oZ,isOnChange:e===aZ,isOnAll:e===hZ,isOnTouch:e===cZ}),pY=e=>DZ(e)||AZ(e);const gY=typeof window===uZ,mY=uY?"Proxy"in window:typeof Proxy!==uZ;function bY({mode:e=lZ,reValidateMode:t=aZ,resolver:i,context:n,defaultValues:s={},shouldFocusError:o=!0,shouldUnregister:a=!0,criteriaMode:l}={}){const c=(0,r.useRef)({}),h=(0,r.useRef)({}),u=(0,r.useRef)({}),d=(0,r.useRef)(new Set),f=(0,r.useRef)({}),p=(0,r.useRef)({}),g=(0,r.useRef)({}),m=(0,r.useRef)({}),b=(0,r.useRef)(s),v=(0,r.useRef)(!1),y=(0,r.useRef)(!1),_=(0,r.useRef)(),w=(0,r.useRef)({}),S=(0,r.useRef)({}),C=(0,r.useRef)(n),x=(0,r.useRef)(i),k=(0,r.useRef)(new Set),E=(0,r.useRef)(fY(e)),{isOnSubmit:T,isOnTouch:L}=E.current,N=l===hZ,[M,O]=(0,r.useState)({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touched:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!T,errors:{}}),D=(0,r.useRef)({isDirty:!mY,dirtyFields:!mY,touched:!mY||L,isValidating:!mY,isSubmitting:!mY,isValid:!mY}),I=(0,r.useRef)(M),A=(0,r.useRef)(),{isOnBlur:P,isOnChange:R}=(0,r.useRef)(fY(t)).current;C.current=n,x.current=i,I.current=M,w.current=a?{}:zZ(w.current)?dY(s):w.current;const B=(0,r.useCallback)(((e={})=>{v.current||(I.current=Object.assign(Object.assign({},I.current),e),O(I.current))}),[]),F=()=>D.current.isValidating&&B({isValidating:!0}),W=(0,r.useCallback)(((e,t,i=!1,n={},r)=>{let s=i||(({errors:e,name:t,error:i,validFields:n,fieldsWithValidation:r})=>{const s=TZ(i),o=LZ(e,t);return s&&!!o||!s&&!$Z(o,i,!0)||s&&LZ(r,t)&&!LZ(n,t)})({errors:I.current.errors,error:t,name:e,validFields:m.current,fieldsWithValidation:g.current});const o=LZ(I.current.errors,e);t?(jZ(m.current,e),s=s||!o||!$Z(o,t,!0),kZ(I.current.errors,e,t)):((LZ(g.current,e)||x.current)&&(kZ(m.current,e,!0),s=s||o),jZ(I.current.errors,e)),(s&&!yZ(i)||!zZ(n)||D.current.isValidating)&&B(Object.assign(Object.assign(Object.assign({},n),x.current?{isValid:!!r}:{}),{isValidating:!1}))}),[]),V=(0,r.useCallback)(((e,t)=>{const{ref:i,options:n}=c.current[e],r=uY&&iZ(i)&&yZ(t)?"":t;DZ(i)?(n||[]).forEach((({ref:e})=>e.checked=e.value===r)):IZ(i)&&!YZ(r)?i.files=r:PZ(i)?[...i.options].forEach((e=>e.selected=r.includes(e.value))):AZ(i)&&n?n.length>1?n.forEach((({ref:e})=>e.checked=Array.isArray(r)?!!r.find((t=>t===e.value)):r===e.value)):n[0].ref.checked=!!r:i.value=r}),[]),z=(0,r.useCallback)(((e,t)=>{if(D.current.isDirty){const i=X();return e&&t&&kZ(i,e,t),!$Z(i,b.current)}return!1}),[]),H=(0,r.useCallback)(((e,t=!0)=>{if(D.current.isDirty||D.current.dirtyFields){const i=!$Z(LZ(b.current,e),WZ(c,e,w)),n=LZ(I.current.dirtyFields,e),r=I.current.isDirty;i?kZ(I.current.dirtyFields,e,!0):jZ(I.current.dirtyFields,e);const s={isDirty:z(),dirtyFields:I.current.dirtyFields},o=D.current.isDirty&&r!==s.isDirty||D.current.dirtyFields&&n!==LZ(I.current.dirtyFields,e);return o&&t&&B(s),o?s:{}}return{}}),[]),j=(0,r.useCallback)((async(e,t)=>{const i=(await rY(c,N,c.current[e],w))[e];return W(e,i,t),TZ(i)}),[W,N]),U=(0,r.useCallback)((async e=>{const{errors:t}=await x.current(X(),C.current,N),i=I.current.isValid;if(Array.isArray(e)){const i=e.map((e=>{const i=LZ(t,e);return i?kZ(I.current.errors,e,i):jZ(I.current.errors,e),!i})).every(Boolean);return B({isValid:zZ(t),isValidating:!1}),i}{const n=LZ(t,e);return W(e,n,i!==zZ(t),{},zZ(t)),!n}}),[W,N]),G=(0,r.useCallback)((async e=>{const t=e||Object.keys(c.current);if(F(),x.current)return U(t);if(Array.isArray(t)){!e&&(I.current.errors={});const i=await Promise.all(t.map((async e=>await j(e,null))));return B({isValidating:!1}),i.every(Boolean)}return await j(t)}),[U,j]),K=(0,r.useCallback)(((e,t,{shouldDirty:i,shouldValidate:n})=>{const r={};kZ(r,e,t);for(const s of sY(e,t))c.current[s]&&(V(s,LZ(r,s)),i&&H(s),n&&G(s))}),[G,V,H]),$=(0,r.useCallback)(((e,t,i)=>{if(!a&&!GZ(t)&&kZ(w.current,e,Array.isArray(t)?[...t]:Object.assign({},t)),c.current[e])V(e,t),i.shouldDirty&&H(e),i.shouldValidate&&G(e);else if(!GZ(t)&&(K(e,t,i),k.current.has(e))){const n=lY(e)||e;kZ(h.current,e,t),S.current[n]({[n]:LZ(h.current,n)}),(D.current.isDirty||D.current.dirtyFields)&&i.shouldDirty&&(kZ(I.current.dirtyFields,e,ZZ(t,LZ(b.current,e,[]),LZ(I.current.dirtyFields,e,[]))),B({isDirty:!$Z(Object.assign(Object.assign({},X()),{[e]:t}),b.current)}))}!a&&kZ(w.current,e,t)}),[H,V,K]),q=e=>y.current||d.current.has(e)||d.current.has((e.match(/\w+/)||[])[0]),Z=e=>{let t=!0;if(!zZ(f.current))for(const i in f.current)e&&f.current[i].size&&!f.current[i].has(e)&&!f.current[i].has(lY(e))||(p.current[i](),t=!1);return t};function Y(e){if(!a){let t=dY(e);for(const e of k.current)SZ(e)&&!t[e]&&(t=Object.assign(Object.assign({},t),{[e]:[]}));return t}return e}function X(e){if(YZ(e))return WZ(c,e,w);if(Array.isArray(e)){const t={};for(const i of e)kZ(t,i,WZ(c,i,w));return t}return Y(XZ(c,dY(w.current),a))}_.current=_.current?_.current:async({type:e,target:t})=>{let i=t.name;const n=c.current[i];let r,s;if(n){const o=e===nZ,l=aY(Object.assign({isBlurEvent:o,isReValidateOnChange:R,isReValidateOnBlur:P,isTouched:!!LZ(I.current.touched,i),isSubmitted:I.current.isSubmitted},E.current));let h=H(i,!1),u=!zZ(h)||!o&&q(i);if(o&&!LZ(I.current.touched,i)&&D.current.touched&&(kZ(I.current.touched,i,!0),h=Object.assign(Object.assign({},h),{touched:I.current.touched})),!a&&AZ(t)&&kZ(w.current,i,WZ(c,i)),l)return!o&&Z(i),(!zZ(h)||u&&zZ(h))&&B(h);if(F(),x.current){const{errors:e}=await x.current(X(),C.current,N),n=I.current.isValid;if(r=LZ(e,i),AZ(t)&&!r&&x.current){const t=lY(i),n=LZ(e,t,{});n.type&&n.message&&(r=n),t&&(n||LZ(I.current.errors,t))&&(i=t)}s=zZ(e),n!==s&&(u=!0)}else r=(await rY(c,N,n,w))[i];!o&&Z(i),W(i,r,u,h,s)}};const Q=(0,r.useCallback)((async(e={})=>{const t=zZ(c.current)?b.current:{},{errors:i}=await x.current(Object.assign(Object.assign(Object.assign({},t),X()),e),C.current,N)||{},n=zZ(i);I.current.isValid!==n&&B({isValid:n})}),[N]),J=(0,r.useCallback)(((e,t)=>{!function(e,t,i,n,r,s){const{ref:o,ref:{name:a}}=i,l=e.current[a];if(!r){const t=WZ(e,a,n);!TZ(t)&&kZ(n.current,a,t)}o.type&&l?DZ(o)||AZ(o)?Array.isArray(l.options)&&l.options.length?(CZ(l.options).forEach(((e={},i)=>{(VZ(e.ref)&&UZ(e,e.ref)||s)&&(NZ(e.ref,t),jZ(l.options,`[${i}]`))})),l.options&&!CZ(l.options).length&&delete e.current[a]):delete e.current[a]:(VZ(o)&&UZ(l,o)||s)&&(NZ(o,t),delete e.current[a]):delete e.current[a]}(c,_.current,e,w,a,t),a&&(jZ(m.current,e.ref.name),jZ(g.current,e.ref.name))}),[a]),ee=(0,r.useCallback)((e=>{if(y.current)B();else{for(const t of d.current)if(t.startsWith(e)){B();break}Z(e)}}),[]),te=(0,r.useCallback)(((e,t)=>{e&&(J(e,t),a&&!CZ(e.options||[]).length&&(jZ(I.current.errors,e.ref.name),kZ(I.current.dirtyFields,e.ref.name,!0),B({isDirty:z()}),D.current.isValid&&x.current&&Q(),ee(e.ref.name)))}),[Q,J]);const ie=(0,r.useCallback)(((e,t,i)=>{const n=i?f.current[i]:d.current;let r=XZ(c,dY(w.current),a,!1,e);if(YZ(e)){const i=lY(e)||e;return k.current.has(i)&&(r=Object.assign(Object.assign({},u.current),r)),oY(r,e,n,TZ(LZ(b.current,e))?t:LZ(b.current,e),!0)}const s=TZ(t)?b.current:t;return Array.isArray(e)?e.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:oY(r,t,n,s)})),{}):(y.current=TZ(i),EZ(!zZ(r)&&r||s))}),[]);function ne(e,t={}){const{name:i,type:n,value:r}=e,s=Object.assign({ref:e},t),o=c.current,l=pY(e),h=hY(k.current,i),u=t=>uY&&(!iZ(e)||t===e);let d,f=o[i],p=!0;if(f&&(l?Array.isArray(f.options)&&CZ(f.options).find((e=>r===e.ref.value&&u(e.ref))):u(f.ref)))return void(o[i]=Object.assign(Object.assign({},f),t));f=n?l?Object.assign({options:[...CZ(f&&f.options||[]),{ref:e}],ref:{type:n,name:i}},t):Object.assign({},s):s,o[i]=f;const v=TZ(LZ(w.current,i));zZ(b.current)&&v||(d=LZ(v?b.current:w.current,i),p=TZ(d),p||h||V(i,d)),zZ(t)||(kZ(g.current,i,!0),!T&&D.current.isValid&&rY(c,N,f,w).then((e=>{const t=I.current.isValid;zZ(e)?kZ(m.current,i,!0):jZ(m.current,i),t!==zZ(e)&&B()}))),!a||h&&p||!h&&jZ(I.current.dirtyFields,i),n&&function({ref:e},t,i){iZ(e)&&i&&(e.addEventListener(t?rZ:sZ,i),e.addEventListener(nZ,i))}(l&&f.options?f.options[f.options.length-1]:f,l||"select-one"===e.type,_.current)}const re=(0,r.useCallback)(((e,t)=>async i=>{i&&i.preventDefault&&(i.preventDefault(),i.persist());let n={},r=Y(XZ(c,dY(w.current),a,!0));D.current.isSubmitting&&B({isSubmitting:!0});try{if(x.current){const{errors:e,values:t}=await x.current(r,C.current,N);I.current.errors=n=e,r=t}else for(const e of Object.values(c.current))if(e){const{name:t}=e.ref,i=await rY(c,N,e,w);i[t]?(kZ(n,t,i[t]),jZ(m.current,t)):LZ(g.current,t)&&(jZ(I.current.errors,t),kZ(m.current,t,!0))}zZ(n)&&Object.keys(I.current.errors).every((e=>e in c.current))?(B({errors:{},isSubmitting:!0}),await e(r,i)):(I.current.errors=Object.assign(Object.assign({},I.current.errors),n),t&&await t(I.current.errors,i),o&&((e,t)=>{for(const i in e)if(LZ(t,i)){const t=e[i];if(t){if(t.ref.focus&&TZ(t.ref.focus()))break;if(t.options){t.options[0].ref.focus();break}}}})(c.current,I.current.errors))}finally{I.current.isSubmitting=!1,B({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:zZ(I.current.errors),submitCount:I.current.submitCount+1})}}),[o,N]);(0,r.useEffect)((()=>{i&&D.current.isValid&&Q(),A.current=A.current||!uY?A.current:function(e,t){const i=new MutationObserver((()=>{for(const i of Object.values(e.current))if(i&&i.options)for(const e of i.options)e&&e.ref&&VZ(e.ref)&&t(i);else i&&VZ(i.ref)&&t(i)}));return i.observe(window.document,{childList:!0,subtree:!0}),i}(c,te)}),[te,b.current]),(0,r.useEffect)((()=>()=>{A.current&&A.current.disconnect(),v.current=!0,Object.values(c.current).forEach((e=>te(e,!0)))}),[]),!i&&D.current.isValid&&(M.isValid=$Z(m.current,g.current)&&zZ(I.current.errors));const se={trigger:G,setValue:(0,r.useCallback)((function(e,t,i){$(e,t,i||{}),q(e)&&B(),Z(e)}),[$,G]),getValues:(0,r.useCallback)(X,[]),register:(0,r.useCallback)((function(e,t){if(!gY)if(YZ(e))ne({name:e},t);else{if(!wZ(e)||!("name"in e))return t=>t&&ne(t,e);ne(e,t)}}),[b.current]),unregister:(0,r.useCallback)((function(e){for(const t of Array.isArray(e)?e:[e])te(c.current[t],!0)}),[]),formState:mY?new Proxy(M,{get:(e,t)=>{if(t in e)return D.current[t]=!0,e[t]}}):M},oe=(0,r.useMemo)((()=>Object.assign({isFormDirty:z,updateWatchedValue:ee,shouldUnregister:a,updateFormState:B,removeFieldEventListener:J,watchInternal:ie,mode:E.current,reValidateMode:{isReValidateOnBlur:P,isReValidateOnChange:R},validateResolver:i?Q:void 0,fieldsRef:c,resetFieldArrayFunctionRef:S,useWatchFieldsRef:f,useWatchRenderFunctionsRef:p,fieldArrayDefaultValuesRef:h,validFieldsRef:m,fieldsWithValidationRef:g,fieldArrayNamesRef:k,readFormStateRef:D,formStateRef:I,defaultValuesRef:b,shallowFieldsStateRef:w,fieldArrayValuesRef:u},se)),[b.current,ee,a,J,ie]);return Object.assign({watch:function(e,t){return ie(e,t)},control:oe,handleSubmit:re,reset:(0,r.useCallback)(((e,t={})=>{if(uY)for(const e of Object.values(c.current))if(e){const{ref:t,options:i}=e,n=pY(t)&&Array.isArray(i)?i[0].ref:t;if(iZ(n))try{n.closest("form").reset();break}catch(e){}}c.current={},b.current=Object.assign({},e||b.current),e&&Z(""),Object.values(S.current).forEach((e=>eY(e)&&e())),w.current=a?{}:dY(e||b.current),(({errors:e,isDirty:t,isSubmitted:i,touched:n,isValid:r,submitCount:s,dirtyFields:o})=>{r||(m.current={},g.current={}),h.current={},d.current=new Set,y.current=!1,B({submitCount:s?I.current.submitCount:0,isDirty:!!t&&I.current.isDirty,isSubmitted:!!i&&I.current.isSubmitted,isValid:!!r&&I.current.isValid,dirtyFields:o?I.current.dirtyFields:{},touched:n?I.current.touched:{},errors:e?I.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})})(t)}),[]),clearErrors:(0,r.useCallback)((function(e){e&&(Array.isArray(e)?e:[e]).forEach((e=>c.current[e]&&SZ(e)?delete I.current.errors[e]:jZ(I.current.errors,e))),B({errors:e?I.current.errors:{}})}),[]),setError:(0,r.useCallback)((function(e,t){const i=(c.current[e]||{}).ref;kZ(I.current.errors,e,Object.assign(Object.assign({},t),{ref:i})),B({isValid:!1}),t.shouldFocus&&i&&i.focus&&i.focus()}),[]),errors:M.errors},se)}function vY(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}const yY=(0,r.createContext)(null);yY.displayName="RHFContext";const _Y=()=>(0,r.useContext)(yY);function wY({name:e,rules:t,defaultValue:i,control:n,onFocus:s}){const o=_Y();const{defaultValuesRef:a,setValue:l,register:c,unregister:h,trigger:u,mode:d,reValidateMode:{isReValidateOnBlur:f,isReValidateOnChange:p},formState:g,formStateRef:{current:{isSubmitted:m,touched:b,errors:v}},updateFormState:y,readFormStateRef:_,fieldsRef:w,fieldArrayNamesRef:S,shallowFieldsStateRef:C}=n||o.control,x=!hY(S.current,e),k=()=>!TZ(LZ(C.current,e))&&x?LZ(C.current,e):TZ(i)?LZ(a.current,e):i,[E,T]=(0,r.useState)(k()),L=(0,r.useRef)(E),N=(0,r.useRef)({focus:()=>null}),M=(0,r.useRef)(s||(()=>{eY(N.current.focus)&&N.current.focus()})),O=(0,r.useCallback)((t=>!aY(Object.assign({isBlurEvent:t,isReValidateOnBlur:f,isReValidateOnChange:p,isSubmitted:m,isTouched:!!LZ(b,e)},d))),[f,p,m,b,e,d]),D=(0,r.useCallback)((([e])=>{const t=(e=>GZ(e)||!wZ(e.target)||wZ(e.target)&&!e.type?e:TZ(e.target.value)?e.target.checked:e.target.value)(e);return T(t),L.current=t,t}),[]),I=(0,r.useCallback)((i=>{w.current[e]?w.current[e]=Object.assign({ref:w.current[e].ref},t):(c(Object.defineProperties({name:e,focus:M.current},{value:{set(e){T(e),L.current=e},get:()=>L.current}}),t),i=TZ(LZ(a.current,e))),i&&x&&T(k())}),[t,e,c]);(0,r.useEffect)((()=>()=>h(e)),[e]),(0,r.useEffect)((()=>{I()}),[I]),(0,r.useEffect)((()=>{!w.current[e]&&I(!0)}));const A=(0,r.useCallback)((()=>{_.current.touched&&!LZ(b,e)&&(kZ(b,e,!0),y({touched:b})),O(!0)&&u(e)}),[e,y,O,u,_]);return{field:{onChange:(0,r.useCallback)(((...t)=>l(e,D(t),{shouldValidate:O(),shouldDirty:!0})),[l,e,O]),onBlur:A,name:e,value:E,ref:N},meta:Object.defineProperties({invalid:!!LZ(v,e)},{isDirty:{get:()=>!!LZ(g.dirtyFields,e)},isTouched:{get:()=>!!LZ(g.touched,e)}})}}const SY=e=>{const{rules:t,as:i,render:n,defaultValue:s,control:o,onFocus:a}=e,l=vY(e,["rules","as","render","defaultValue","control","onFocus"]),{field:c,meta:h}=wY(e),u=Object.assign(Object.assign({},l),c);return i?(0,r.isValidElement)(i)?(0,r.cloneElement)(i,u):(0,r.createElement)(i,u):n?n(c,h):null};var CY={entering:{opacity:1},entered:{opacity:1}},xY={enter:M.x9.enteringScreen,exit:M.x9.leavingScreen};const kY=r.forwardRef((function(e,t){var i=e.children,n=e.disableStrictModeCompat,s=void 0!==n&&n,o=e.in,a=e.onEnter,l=e.onEntered,u=e.onEntering,d=e.onExit,f=e.onExited,p=e.onExiting,g=e.style,m=e.TransitionComponent,b=void 0===m?k:m,v=e.timeout,y=void 0===v?xY:v,_=(0,h.Z)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),w=N(),S=w.unstable_strictMode&&!s,C=r.useRef(null),x=(0,E.Z)(i.ref,t),T=(0,E.Z)(S?C:void 0,x),L=function(e){return function(t,i){if(e){var n=S?[C.current,t]:[t,i],r=(0,V.Z)(n,2),s=r[0],o=r[1];void 0===o?e(s):e(s,o)}}},M=L(u),I=L((function(e,t){O(e);var i=D({style:g,timeout:y},{mode:"enter"});e.style.webkitTransition=w.transitions.create("opacity",i),e.style.transition=w.transitions.create("opacity",i),a&&a(e,t)})),A=L(l),P=L(p),R=L((function(e){var t=D({style:g,timeout:y},{mode:"exit"});e.style.webkitTransition=w.transitions.create("opacity",t),e.style.transition=w.transitions.create("opacity",t),d&&d(e)})),B=L(f);return r.createElement(b,(0,c.Z)({appear:!0,in:o,nodeRef:S?C:void 0,onEnter:I,onEntered:A,onEntering:M,onExit:R,onExited:B,onExiting:P,timeout:y},_),(function(e,t){return r.cloneElement(i,(0,c.Z)({style:(0,c.Z)({opacity:0,visibility:"exited"!==e||o?void 0:"hidden"},CY[e],g,i.props.style),ref:T},t))}))}));var EY=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.invisible,a=void 0!==o&&o,l=e.open,u=e.transitionDuration,d=e.TransitionComponent,f=void 0===d?kY:d,p=(0,h.Z)(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return r.createElement(f,(0,c.Z)({in:l,timeout:u},p),r.createElement("div",{className:(0,z.Z)(n.root,s,a&&n.invisible),"aria-hidden":!0,ref:t},i))}));const TY=(0,R.Z)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(EY);var LY=r.forwardRef((function(e,t){var i=e.autoFocus,n=e.checked,s=e.checkedIcon,o=e.classes,a=e.className,l=e.defaultChecked,u=e.disabled,d=e.icon,f=e.id,p=e.inputProps,g=e.inputRef,m=e.name,b=e.onBlur,v=e.onChange,y=e.onFocus,_=e.readOnly,w=e.required,S=e.tabIndex,C=e.type,x=e.value,k=(0,h.Z)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),E=(0,HG.Z)({controlled:n,default:Boolean(l),name:"SwitchBase",state:"checked"}),T=(0,V.Z)(E,2),L=T[0],N=T[1],M=KU(),O=u;M&&void 0===O&&(O=M.disabled);var D="checkbox"===C||"radio"===C;return r.createElement(Qj,(0,c.Z)({component:"span",className:(0,z.Z)(o.root,a,L&&o.checked,O&&o.disabled),disabled:O,tabIndex:null,role:void 0,onFocus:function(e){y&&y(e),M&&M.onFocus&&M.onFocus(e)},onBlur:function(e){b&&b(e),M&&M.onBlur&&M.onBlur(e)},ref:t},k),r.createElement("input",(0,c.Z)({autoFocus:i,checked:n,defaultChecked:l,className:o.input,disabled:O,id:D&&f,name:m,onChange:function(e){var t=e.target.checked;N(t),v&&v(e,t)},readOnly:_,ref:g,required:w,tabIndex:S,type:C,value:x},p)),L?s:d)}));const NY=(0,R.Z)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(LY);var MY=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.color,o=void 0===s?"secondary":s,a=e.edge,l=void 0!==a&&a,u=e.size,d=void 0===u?"medium":u,f=(0,h.Z)(e,["classes","className","color","edge","size"]),p=r.createElement("span",{className:i.thumb});return r.createElement("span",{className:(0,z.Z)(i.root,n,{start:i.edgeStart,end:i.edgeEnd}[l],"small"===d&&i["size".concat((0,RH.Z)(d))])},r.createElement(NY,(0,c.Z)({type:"checkbox",icon:p,checkedIcon:p,classes:{root:(0,z.Z)(i.switchBase,i["color".concat((0,RH.Z)(o))]),input:i.input,checked:i.checked,disabled:i.disabled},ref:t},f)),r.createElement("span",{className:i.track}))}));const OY=(0,R.Z)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,B.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,B.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(MY);var DY=r.forwardRef((function(e,t){var i=e.absolute,n=void 0!==i&&i,s=e.classes,o=e.className,a=e.component,l=void 0===a?"hr":a,u=e.flexItem,d=void 0!==u&&u,f=e.light,p=void 0!==f&&f,g=e.orientation,m=void 0===g?"horizontal":g,b=e.role,v=void 0===b?"hr"!==l?"separator":void 0:b,y=e.variant,_=void 0===y?"fullWidth":y,w=(0,h.Z)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return r.createElement(l,(0,c.Z)({className:(0,z.Z)(s.root,o,"fullWidth"!==_&&s[_],n&&s.absolute,d&&s.flexItem,p&&s.light,"vertical"===m&&s.vertical),role:v,ref:t},w))}));const IY=(0,R.Z)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:(0,B.Fq)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(DY);var AY={enter:M.x9.enteringScreen,exit:M.x9.leavingScreen},PY=r.forwardRef((function(e,t){var i=e.BackdropProps,n=e.children,s=e.classes,o=e.className,a=e.disableBackdropClick,l=void 0!==a&&a,u=e.disableEscapeKeyDown,d=void 0!==u&&u,f=e.fullScreen,p=void 0!==f&&f,g=e.fullWidth,m=void 0!==g&&g,b=e.maxWidth,v=void 0===b?"sm":b,y=e.onBackdropClick,_=e.onClose,w=e.onEnter,S=e.onEntered,C=e.onEntering,x=e.onEscapeKeyDown,k=e.onExit,E=e.onExited,T=e.onExiting,L=e.open,N=e.PaperComponent,M=void 0===N?LH:N,O=e.PaperProps,D=void 0===O?{}:O,I=e.scroll,A=void 0===I?"paper":I,P=e.TransitionComponent,R=void 0===P?kY:P,B=e.transitionDuration,F=void 0===B?AY:B,W=e.TransitionProps,V=e["aria-describedby"],H=e["aria-labelledby"],j=(0,h.Z)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),U=r.useRef();return r.createElement(wG,(0,c.Z)({className:(0,z.Z)(s.root,o),BackdropComponent:TY,BackdropProps:(0,c.Z)({transitionDuration:F},i),closeAfterTransition:!0},l?{disableBackdropClick:l}:{},{disableEscapeKeyDown:d,onEscapeKeyDown:x,onClose:_,open:L,ref:t},j),r.createElement(R,(0,c.Z)({appear:!0,in:L,timeout:F,onEnter:w,onEntering:C,onEntered:S,onExit:k,onExiting:T,onExited:E,role:"none presentation"},W),r.createElement("div",{className:(0,z.Z)(s.container,s["scroll".concat((0,RH.Z)(A))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===U.current&&(U.current=null,y&&y(e),!l&&_&&_(e,"backdropClick"))},onMouseDown:function(e){U.current=e.target}},r.createElement(M,(0,c.Z)({elevation:24,role:"dialog","aria-describedby":V,"aria-labelledby":H},D,{className:(0,z.Z)(s.paper,s["paperScroll".concat((0,RH.Z)(A))],s["paperWidth".concat((0,RH.Z)(String(v)))],D.className,p&&s.paperFullScreen,m&&s.paperFullWidth)}),n))))}));const RY=(0,R.Z)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":(0,Qi.Z)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":(0,Qi.Z)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":(0,Qi.Z)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":(0,Qi.Z)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":(0,Qi.Z)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(PY);var BY=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.disableTypography,a=void 0!==o&&o,l=(0,h.Z)(e,["children","classes","className","disableTypography"]);return r.createElement("div",(0,c.Z)({className:(0,z.Z)(n.root,s),ref:t},l),a?i:r.createElement(dj,{component:"h2",variant:"h6"},i))}));const FY=(0,R.Z)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(BY);function WY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return VY(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return VY(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VY(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}const zY=function(){var e=WY((0,r.useState)(!1),2),t=e[0],i=e[1];return[t,function(){return i(!0)},function(){return i(!1)}]};var HY,jY=function(e){var t=e.as,i=e.errors,n=e.name,s=e.message,o=e.render,a=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)t.indexOf(i=s[n])>=0||(r[i]=e[i]);return r}(e,["as","errors","name","message","render"]),l=_Y(),c=LZ(i||l.formState.errors,n);if(!c)return null;var h=c.message,u=c.types,d=Object.assign({},a,{children:h||s});return r.isValidElement(t)?r.cloneElement(t,d):o?o({message:h||s,messages:u}):r.createElement(t||r.Fragment,d)};function UY(){return(UY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function GY(e,t,i,n){HY||(HY="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:HY,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function KY(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var $Y=function(e){var t=e.name,i=e.defaultValue,n=e.onChange,s=e.onKeyPress,o=e.errors,a=e.control,l=e.rules,c=KY(e,["name","defaultValue","onChange","onKeyPress","errors","control","rules"]),h=wY({name:t,control:a,rules:l,defaultValue:i}),u=h.field,d=u.ref,f=u.value,p=u.onChange,g=h.meta.invalid;return r.createElement(nK,UY({},c,{value:f,inputRef:d,error:g,helperText:o&&GY(jY,{errors:o,name:t}),onChange:function(e){n&&n(e),p(e.target.value)},onKeyPress:function(e){s&&s(e)}}))};$Y.defaultProps={rules:{}};const qY=$Y;var ZY=44,YY=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.color,o=void 0===s?"primary":s,a=e.disableShrink,l=void 0!==a&&a,u=e.size,d=void 0===u?40:u,f=e.style,p=e.thickness,g=void 0===p?3.6:p,m=e.value,b=void 0===m?0:m,v=e.variant,y=void 0===v?"indeterminate":v,_=(0,h.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),w={},S={},C={};if("determinate"===y||"static"===y){var x=2*Math.PI*((ZY-g)/2);w.strokeDasharray=x.toFixed(3),C["aria-valuenow"]=Math.round(b),w.strokeDashoffset="".concat(((100-b)/100*x).toFixed(3),"px"),S.transform="rotate(-90deg)"}return r.createElement("div",(0,c.Z)({className:(0,z.Z)(i.root,n,"inherit"!==o&&i["color".concat((0,RH.Z)(o))],{determinate:i.determinate,indeterminate:i.indeterminate,static:i.static}[y]),style:(0,c.Z)({width:d,height:d},S,f),ref:t,role:"progressbar"},C,_),r.createElement("svg",{className:i.svg,viewBox:"".concat(22," ").concat(22," ").concat(ZY," ").concat(ZY)},r.createElement("circle",{className:(0,z.Z)(i.circle,l&&i.circleDisableShrink,{determinate:i.circleDeterminate,indeterminate:i.circleIndeterminate,static:i.circleStatic}[y]),style:w,cx:ZY,cy:ZY,r:(ZY-g)/2,fill:"none",strokeWidth:g})))}));var XY;function QY(e,t,i,n){XY||(XY="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:XY,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function JY(){return(JY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function eX(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var tX=QY((0,R.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(YY),{size:20});const iX=function(e){var t=e.disabled,i=e.loading,n=e.children,s=eX(e,["disabled","loading","children"]);return r.createElement(Yj,JY({},s,{variant:"contained",startIcon:i&&tX,disabled:i||t,disableElevation:!0}),n)};var nX;function rX(e,t,i,n){nX||(nX="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:nX,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function sX(e){return function(e){if(Array.isArray(e))return lX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||aX(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||aX(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aX(e,t){if(e){if("string"==typeof e)return lX(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?lX(e,t):void 0}}function lX(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var cX=rX(FY,{},void 0,"Setting"),hX=rX(IY,{}),uX=rX(aU,{primary:"Theme"}),dX=rX(IY,{}),fX=rX(IY,{}),pX=rX(y$,{item:!0,xs:2},void 0,rX(iX,{type:"submit",loading:!1,size:"small"},void 0,"add")),gX=rX(IY,{});const mX=function(){var e=oX((0,r.useState)([]),2),t=e[0],i=e[1],n=oX((0,r.useState)(),2),s=n[0],o=n[1],a=oX(zY(),3),l=a[0],c=a[1],h=a[2],u=bY(),d=u.control,f=u.errors,p=u.handleSubmit,g=n$(),m=Ye(),b=et(TK);return(0,r.useEffect)((function(){var e=jj()(b);o(e),e.getRemotes(!0,(function(e,t){return i(t||[])}))}),[b]),console.log(t),(0,r.useEffect)((function(){return Mn.ipcRenderer.on(Bj.Xv,c),function(){Mn.ipcRenderer.removeAllListeners(Bj.Tk)}}),[c]),rX(RY,{open:l,onClose:h,closeAfterTransition:!0,BackdropComponent:TY,BackdropProps:{timeout:500},className:g.modal,fullWidth:!0},void 0,rX(kY,{in:l},void 0,rX(LH,{},void 0,cX,rX(Kj,{},void 0,rX(xn,{width:500},void 0,hX,rX(sU,{},void 0,uX,rX(uU,{},void 0,rX(OY,{onChange:function(){return m(SH())},color:"primary"}))),dX,b&&r.createElement(r.Fragment,null,t.map((function(e){return rX(r.Fragment,{},e.name,rX(sU,{},void 0,rX(aU,{primary:e.refs.fetch,secondary:e.name}),rX(uU,{},void 0,rX(iX,{loading:!1,size:"small",color:"secondary",onClick:function(){i((function(t){return t.filter((function(t){return t.name!==e.name}))})),null==s||s.removeRemote(e.name)}},void 0,"remove"))),fX)})),rX(sU,{},void 0,rX(xn,{component:"form",width:"100%",onSubmit:p((function(e){i((function(e){return sX(e)})),null==s||s.addRemote(e.name,e.repo)}))},void 0,rX(y$,{container:!0},void 0,rX(y$,{item:!0,xs:10},void 0,rX(qY,{control:d,errors:f,defaultValue:"",name:"repo",label:"repo",fullWidth:!0}),rX(qY,{control:d,errors:f,defaultValue:"origin",name:"name",label:"name",fullWidth:!0})),pX))),gX))))))};function bX(){return(bX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var vX=function(e,t){return void 0===t&&(t={abortEarly:!1}),function(i,n,r){void 0===r&&(r=!1);try{return Promise.resolve(function(r,s){try{var o=(t.context,Promise.resolve(e.validate(i,bX({},t,{context:n}))).then((function(e){return{values:e,errors:{}}})))}catch(r){return s(r)}return o&&o.then?o.then(void 0,s):o}(0,(function(e){var t=function(e,t){var i;return Array.isArray(e.inner)&&e.inner.length?e.inner.reduce((function(e,i){var n,r,s=i.path,o=i.message,a=i.type,l=e[s]&&e[s].types||{},c=s||a;return bX({},e,c?((r={})[c]=bX({},e[c]||{message:o,type:a},t?{types:bX({},l,(n={},n[a]=l[a]?[].concat([].concat(l[a]),[o]):o,n))}:{}),r):{})}),{}):((i={})[e.path]={message:e.message,type:e.type},i)}(e,r);return{values:{},errors:EZ(t)}})))}catch(e){return Promise.reject(e)}}},yX=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.dividers,o=void 0!==s&&s,a=(0,h.Z)(e,["classes","className","dividers"]);return r.createElement("div",(0,c.Z)({className:(0,z.Z)(i.root,n,o&&i.dividers),ref:t},a))}));const _X=(0,R.Z)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(yX);var wX=i(59968),SX=i(96410),CX=i(82961),xX=i(28970);const kX=r.createContext({});var EX=r.forwardRef((function(e,t){var i,n=e.children,s=e.classes,o=e.className,a=e.defaultExpanded,l=void 0!==a&&a,u=e.disabled,d=void 0!==u&&u,f=e.expanded,p=e.onChange,g=e.square,m=void 0!==g&&g,b=e.TransitionComponent,v=void 0===b?j:b,y=e.TransitionProps,_=(0,h.Z)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),w=(0,HG.Z)({controlled:f,default:l,name:"Accordion",state:"expanded"}),S=(0,V.Z)(w,2),C=S[0],x=S[1],k=r.useCallback((function(e){x(!C),p&&p(e,!C)}),[C,p,x]),E=r.Children.toArray(n),T=(i=E,(0,wX.Z)(i)||(0,SX.Z)(i)||(0,CX.Z)(i)||(0,xX.Z)()),L=T[0],N=T.slice(1),M=r.useMemo((function(){return{expanded:C,disabled:d,toggle:k}}),[C,d,k]);return r.createElement(LH,(0,c.Z)({className:(0,z.Z)(s.root,o,C&&s.expanded,d&&s.disabled,!m&&s.rounded),ref:t,square:m},_),r.createElement(kX.Provider,{value:M},L),r.createElement(v,(0,c.Z)({in:C,timeout:"auto"},y),r.createElement("div",{"aria-labelledby":L.props.id,id:L.props["aria-controls"],role:"region"},N)))}));const TX=(0,R.Z)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiAccordion"})(EX);var LX=r.forwardRef((function(e,t){var i=e.children,n=e.classes,s=e.className,o=e.expandIcon,a=e.focusVisibleClassName,l=e.IconButtonProps,u=void 0===l?{}:l,d=e.onClick,f=(0,h.Z)(e,["children","classes","className","expandIcon","focusVisibleClassName","IconButtonProps","onClick"]),p=r.useContext(kX),g=p.disabled,m=void 0!==g&&g,b=p.expanded,v=p.toggle;return r.createElement(tj,(0,c.Z)({focusRipple:!1,disableRipple:!0,disabled:m,component:"div","aria-expanded":b,className:(0,z.Z)(n.root,s,m&&n.disabled,b&&n.expanded),focusVisibleClassName:(0,z.Z)(n.focusVisible,n.focused,a),onClick:function(e){v&&v(e),d&&d(e)},ref:t},f),r.createElement("div",{className:(0,z.Z)(n.content,b&&n.expanded)},i),o&&r.createElement(Qj,(0,c.Z)({className:(0,z.Z)(n.expandIcon,b&&n.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},u),o))}));const NX=(0,R.Z)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focusVisible":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focusVisible:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiAccordionSummary"})(LX);var MX=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=(0,h.Z)(e,["classes","className"]);return r.createElement("div",(0,c.Z)({className:(0,z.Z)(i.root,n),ref:t},s))}));const OX=(0,R.Z)((function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}}),{name:"MuiAccordionDetails"})(MX),DX=(0,WH.Z)(r.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),IX=(0,WH.Z)(r.createElement("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");const AX=(0,R.Z)((function(e){return{root:{position:"relative",display:"flex","&$checked $layer":{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}},layer:{left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},checked:{}}}),{name:"PrivateRadioButtonIcon"})((function(e){var t=e.checked,i=e.classes,n=e.fontSize;return r.createElement("div",{className:(0,z.Z)(i.root,t&&i.checked)},r.createElement(DX,{fontSize:n}),r.createElement(IX,{fontSize:n,className:i.layer}))}));const PX=r.createContext();var RX=r.createElement(AX,{checked:!0}),BX=r.createElement(AX,null),FX=r.forwardRef((function(e,t){var i=e.checked,n=e.classes,s=e.color,o=void 0===s?"secondary":s,a=e.name,l=e.onChange,u=e.size,d=void 0===u?"medium":u,f=(0,h.Z)(e,["checked","classes","color","name","onChange","size"]),p=r.useContext(PX),g=i,m=(0,nG.Z)(l,p&&p.onChange),b=a;return p&&(void 0===g&&(g=p.value===e.value),void 0===b&&(b=p.name)),r.createElement(NY,(0,c.Z)({color:o,type:"radio",icon:r.cloneElement(BX,{fontSize:"small"===d?"small":"medium"}),checkedIcon:r.cloneElement(RX,{fontSize:"small"===d?"small":"medium"}),classes:{root:(0,z.Z)(n.root,n["color".concat((0,RH.Z)(o))]),checked:n.checked,disabled:n.disabled},name:b,checked:g,onChange:m,ref:t},f))}));const WX=(0,R.Z)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,B.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,B.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiRadio"})(FX);var VX=r.forwardRef((function(e,t){var i=e.classes,n=e.className,s=e.row,o=void 0!==s&&s,a=(0,h.Z)(e,["classes","className","row"]);return r.createElement("div",(0,c.Z)({className:(0,z.Z)(i.root,n,o&&i.row),ref:t},a))}));const zX=(0,R.Z)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(VX);var HX=i(95001);const jX=r.forwardRef((function(e,t){var i=e.actions,n=e.children,s=e.name,o=e.value,a=e.onChange,l=(0,h.Z)(e,["actions","children","name","value","onChange"]),u=r.useRef(null),d=(0,HG.Z)({controlled:o,default:e.defaultValue,name:"RadioGroup"}),f=(0,V.Z)(d,2),p=f[0],g=f[1];r.useImperativeHandle(i,(function(){return{focus:function(){var e=u.current.querySelector("input:not(:disabled):checked");e||(e=u.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var m=(0,E.Z)(t,u),b=(0,HX.Z)(s);return r.createElement(PX.Provider,{value:{name:b,onChange:function(e){g(e.target.value),a&&a(e,e.target.value)},value:p}},r.createElement(zX,(0,c.Z)({role:"radiogroup",ref:m},l),n))}));var UX=r.forwardRef((function(e,t){e.checked;var i=e.classes,n=e.className,s=e.control,o=e.disabled,a=(e.inputRef,e.label),l=e.labelPlacement,u=void 0===l?"end":l,d=(e.name,e.onChange,e.value,(0,h.Z)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),f=KU(),p=o;void 0===p&&void 0!==s.props.disabled&&(p=s.props.disabled),void 0===p&&f&&(p=f.disabled);var g={disabled:p};return["checked","name","onChange","value","inputRef"].forEach((function(t){void 0===s.props[t]&&void 0!==e[t]&&(g[t]=e[t])})),r.createElement("label",(0,c.Z)({className:(0,z.Z)(i.root,n,"end"!==u&&i["labelPlacement".concat((0,RH.Z)(u))],p&&i.disabled),ref:t},d),r.cloneElement(s,g),r.createElement(dj,{component:"span",className:(0,z.Z)(i.label,p&&i.disabled)},a))}));const GX=(0,R.Z)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(UX);var KX,$X,qX=i(81146),ZX=function(e){var t=e.title,i=e.subtitle,n=e.artist,r=e.album,s=e.words,o=e.music,a=e.bpm,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"".concat(l,'\n\nmodule.export = `\n\\\\title "').concat(t,'"\n\\\\subtitle "').concat(i,'"\n\\\\artist "').concat(n,'"\n\\\\album "').concat(r,'"\n\\\\words "').concat(s,'"\n\\\\music "').concat(o,'"\n\\\\tempo ').concat(a,"\n.\n\n").concat(c,"\n`")},YX=function(e){switch(e.template){case"empty":!function(e){var t=EH().join(e.workDir,e.title);Nn().mkdirSync(t,{recursive:!0}),Nn().writeFileSync(EH().join(t,"index.js"),ZX(e))}(e);break;case"band":!function(e){var t=["guitar","bass","drum","vocal"],i=t.map((function(e){return"const ".concat(e,' = staveRequire("').concat(e,"/").concat(e,'.js")')})).join("\n"),n=t.map((function(e){return"${".concat(e,"}")})).join("\n");Nn().mkdirSync(e.workDir,{recursive:!0}),Nn().writeFileSync(EH().join(e.workDir,"index.js"),ZX(e,i,n)),t.forEach((function(t){var i=EH().join(e.workDir,t);Nn().mkdirSync(i,{recursive:!0}),Nn().writeFileSync(EH().join(i,"".concat(t,".js")),"module.export = ``")}))}(e)}};try{KX=Map}catch(sz){}try{$X=Set}catch(sz){}function XX(e,t,i){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(QX);if(KX&&e instanceof KX)return new Map(Array.from(e.entries()));if($X&&e instanceof $X)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var n=Object.create(e);for(var r in i.push(n),e){var s=t.findIndex((function(t){return t===e[r]}));n[r]=s>-1?i[s]:XX(e[r],t,i)}return n}return e}function QX(e){return XX(e,[],[])}const JX=Object.prototype.toString,eQ=Error.prototype.toString,tQ=RegExp.prototype.toString,iQ="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",nQ=/^Symbol\((.*)\)(.*)$/;function rQ(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const i=typeof e;if("number"===i)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===i)return t?`"${e}"`:e;if("function"===i)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===i)return iQ.call(e).replace(nQ,"Symbol($1)");const n=JX.call(e).slice(8,-1);return"Date"===n?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===n||e instanceof Error?"["+eQ.call(e)+"]":"RegExp"===n?tQ.call(e):null}function sQ(e,t){let i=rQ(e,t);return null!==i?i:JSON.stringify(e,(function(e,i){let n=rQ(this[e],t);return null!==n?n:i}),2)}let oQ={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:i,originalValue:n})=>{let r=null!=n&&n!==i,s=`${e} must be a \`${t}\` type, but the final value was: \`${sQ(i,!0)}\``+(r?` (cast from the value \`${sQ(n,!0)}\`).`:".");return null===i&&(s+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),s},defined:"${path} must be defined"},aQ={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},lQ={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},cQ={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},hQ={isValue:"${path} field must be ${value}"},uQ={noUnknown:"${path} field has unspecified keys: ${unknown}"},dQ={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must be have ${length} items"};Object.assign(Object.create(null),{mixed:oQ,string:aQ,number:lQ,date:cQ,object:uQ,array:dQ,boolean:hQ});var fQ=i(18721),pQ=i.n(fQ);const gQ=e=>e&&e.__isYupSchema__;const mQ=class{constructor(e,t){if(this.refs=e,this.refs=e,"function"==typeof t)return void(this.fn=t);if(!pQ()(t,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:i,then:n,otherwise:r}=t,s="function"==typeof i?i:(...e)=>e.every((e=>e===i));this.fn=function(...e){let t=e.pop(),i=e.pop(),o=s(...e)?n:r;if(o)return"function"==typeof o?o(i):i.concat(o.resolve(t))}}resolve(e,t){let i=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),n=this.fn.apply(e,i.concat(e,t));if(void 0===n||n===e)return e;if(!gQ(n))throw new TypeError("conditions must return a schema object");return n.resolve(t)}};function bQ(e){return null==e?[]:[].concat(e)}function vQ(){return(vQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}let yQ=/\$\{\s*(\w+)\s*\}/g;class _Q extends Error{static formatError(e,t){const i=t.label||t.path||"this";return i!==t.path&&(t=vQ({},t,{path:i})),"string"==typeof e?e.replace(yQ,((e,i)=>sQ(t[i]))):"function"==typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,i,n){super(),this.name="ValidationError",this.value=t,this.path=i,this.type=n,this.errors=[],this.inner=[],bQ(e).forEach((e=>{_Q.isError(e)?(this.errors.push(...e.errors),this.inner=this.inner.concat(e.inner.length?e.inner:e)):this.errors.push(e)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,_Q)}}function wQ(e,t){let{endEarly:i,tests:n,args:r,value:s,errors:o,sort:a,path:l}=e,c=(e=>{let t=!1;return(...i)=>{t||(t=!0,e(...i))}})(t),h=n.length;const u=[];if(o=o||[],!h)return o.length?c(new _Q(o,s,l)):c(null,s);for(let e=0;e<n.length;e++){(0,n[e])(r,(function(e){if(e){if(!_Q.isError(e))return c(e,s);if(i)return e.value=s,c(e,s);u.push(e)}if(--h<=0){if(u.length&&(a&&u.sort(a),o.length&&u.push(...o),o=u),o.length)return void c(new _Q(o,s,l),s);c(null,s)}}))}}var SQ=i(66604),CQ=i.n(SQ),xQ=i(55760);const kQ="$",EQ=".";class TQ{constructor(e,t={}){if("string"!=typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===kQ,this.isValue=this.key[0]===EQ,this.isSibling=!this.isContext&&!this.isValue;let i=this.isContext?kQ:this.isValue?EQ:"";this.path=this.key.slice(i.length),this.getter=this.path&&(0,xQ.getter)(this.path,!0),this.map=t.map}getValue(e,t,i){let n=this.isContext?i:this.isValue?e:t;return this.getter&&(n=this.getter(n||{})),this.map&&(n=this.map(n)),n}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}function LQ(){return(LQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function NQ(e){function t(t,i){let{value:n,path:r="",label:s,options:o,originalValue:a,sync:l}=t,c=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(t,["value","path","label","options","originalValue","sync"]);const{name:h,test:u,params:d,message:f}=e;let{parent:p,context:g}=o;function m(e){return TQ.isRef(e)?e.getValue(n,p,g):e}function b(e={}){const t=CQ()(LQ({value:n,originalValue:a,label:s,path:e.path||r},d,e.params),m),i=new _Q(_Q.formatError(e.message||f,t),n,t.path,e.type||h);return i.params=t,i}let v,y=LQ({path:r,parent:p,type:h,createError:b,resolve:m,options:o,originalValue:a},c);if(l){try{var _;if(v=u.call(y,n,y),"function"==typeof(null==(_=v)?void 0:_.then))throw new Error(`Validation test of type: "${y.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(e){return void i(e)}_Q.isError(v)?i(v):v?i(null,v):i(b())}else try{Promise.resolve(u.call(y,n,y)).then((e=>{_Q.isError(e)?i(e):e?i(null,e):i(b())}))}catch(e){i(e)}}return t.OPTIONS=e,t}TQ.prototype.__isYupRef=!0;function MQ(e,t,i,n=i){let r,s,o;return t?((0,xQ.forEach)(t,((a,l,c)=>{let h=l?(e=>e.substr(0,e.length-1).substr(1))(a):a;if((e=e.resolve({context:n,parent:r,value:i})).innerType){let n=c?parseInt(h,10):0;if(i&&n>=i.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${t}. because there is no value at that index. `);r=i,i=i&&i[n],e=e.innerType}if(!c){if(!e.fields||!e.fields[h])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${o} which is a type: "${e._type}")`);r=i,i=i&&i[h],e=e.fields[h]}s=h,o=l?"["+a+"]":"."+a})),{schema:e,parent:r,parentPath:s}):{parent:r,parentPath:t,schema:e}}class OQ{constructor(){this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const e=[];for(const t of this.list)e.push(t);for(const[,t]of this.refs)e.push(t.describe());return e}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}add(e){TQ.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}delete(e){TQ.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}has(e,t){if(this.list.has(e))return!0;let i,n=this.refs.values();for(;i=n.next(),!i.done;)if(t(i.value)===e)return!0;return!1}clone(){const e=new OQ;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}merge(e,t){const i=this.clone();return e.list.forEach((e=>i.add(e))),e.refs.forEach((e=>i.add(e))),t.list.forEach((e=>i.delete(e))),t.refs.forEach((e=>i.delete(e))),i}}function DQ(){return(DQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}class IQ{constructor(e){this.deps=[],this.conditions=[],this._whitelist=new OQ,this._blacklist=new OQ,this.exclusiveTests=Object.create(null),this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(oQ.notType)})),this.type=(null==e?void 0:e.type)||"mixed",this.spec=DQ({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},null==e?void 0:e.spec)}get _type(){return this.type}_typeCheck(e){return!0}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeError=this._typeError,t._whitelistError=this._whitelistError,t._blacklistError=this._blacklistError,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.exclusiveTests=DQ({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=QX(DQ({},this.spec,e)),t}label(e){var t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let i=e(this);return this._mutate=t,i}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,i=e.clone();const n=DQ({},t.spec,i.spec);return i.spec=n,i._typeError||(i._typeError=t._typeError),i._whitelistError||(i._whitelistError=t._whitelistError),i._blacklistError||(i._blacklistError=t._blacklistError),i._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),i._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),i.tests=t.tests,i.exclusiveTests=t.exclusiveTests,i.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),i}isType(e){return!(!this.spec.nullable||null!==e)||this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let i=t.conditions;t=t.clone(),t.conditions=[],t=i.reduce(((t,i)=>i.resolve(t,e)),t),t=t.resolve(e)}return t}cast(e,t={}){let i=this.resolve(DQ({value:e},t)),n=i._cast(e,t);if(void 0!==e&&!1!==t.assert&&!0!==i.isType(n)){let r=sQ(e),s=sQ(n);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${i._type}". \n\nattempted value: ${r} \n`+(s!==r?`result of cast: ${s}`:""))}return n}_cast(e,t){let i=void 0===e?e:this.transforms.reduce(((t,i)=>i.call(this,t,e,this)),e);return void 0===i&&(i=this.getDefault()),i}_validate(e,t={},i){let{sync:n,path:r,from:s=[],originalValue:o=e,strict:a=this.spec.strict,abortEarly:l=this.spec.abortEarly}=t,c=e;a||(c=this._cast(c,DQ({assert:!1},t)));let h={value:c,path:r,options:t,originalValue:o,schema:this,label:this.spec.label,sync:n,from:s},u=[];this._typeError&&u.push(this._typeError),this._whitelistError&&u.push(this._whitelistError),this._blacklistError&&u.push(this._blacklistError),wQ({args:h,value:c,path:r,sync:n,tests:u,endEarly:l},(e=>{e?i(e,c):wQ({tests:this.tests,args:h,path:r,sync:n,value:c,endEarly:l},i)}))}validate(e,t,i){let n=this.resolve(DQ({},t,{value:e}));return"function"==typeof i?n._validate(e,t,i):new Promise(((i,r)=>n._validate(e,t,((e,t)=>{e?r(e):i(t)}))))}validateSync(e,t){let i;return this.resolve(DQ({},t,{value:e}))._validate(e,DQ({},t,{sync:!0}),((e,t)=>{if(e)throw e;i=t})),i}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(_Q.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(e){if(_Q.isError(e))return!1;throw e}}_getDefault(){let e=this.spec.default;return null==e?e:"function"==typeof e?e.call(this):QX(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(e=!0){var t=this.clone();return t.spec.strict=e,t}_isPresent(e){return null!=e}defined(e=oQ.defined){return this.test({message:e,name:"defined",exclusive:!0,test:e=>void 0!==e})}required(e=oQ.required){return this.clone({presence:"required"}).withMutation((t=>t.test({message:e,name:"required",exclusive:!0,test(e){return this.schema._isPresent(e)}})))}notRequired(){var e=this.clone({presence:"optional"});return e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e}nullable(e=!0){return this.clone({nullable:!1!==e})}transform(e){var t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"==typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=oQ.default),"function"!=typeof t.test)throw new TypeError("`test` is a required parameters");let i=this.clone(),n=NQ(t),r=t.exclusive||t.name&&!0===i.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(i.exclusiveTests[t.name]=!!t.exclusive),i.tests=i.tests.filter((e=>{if(e.OPTIONS.name===t.name){if(r)return!1;if(e.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),i.tests.push(n),i}when(e,t){Array.isArray(e)||"string"==typeof e||(t=e,e=".");let i=this.clone(),n=bQ(e).map((e=>new TQ(e)));return n.forEach((e=>{e.isSibling&&i.deps.push(e.key)})),i.conditions.push(new mQ(n,t)),i}typeError(e){var t=this.clone();return t._typeError=NQ({message:e,name:"typeError",test(e){return!(void 0!==e&&!this.schema.isType(e))||this.createError({params:{type:this.schema._type}})}}),t}oneOf(e,t=oQ.oneOf){var i=this.clone();return e.forEach((e=>{i._whitelist.add(e),i._blacklist.delete(e)})),i._whitelistError=NQ({message:t,name:"oneOf",test(e){if(void 0===e)return!0;let t=this.schema._whitelist;return!!t.has(e,this.resolve)||this.createError({params:{values:t.toArray().join(", ")}})}}),i}notOneOf(e,t=oQ.notOneOf){var i=this.clone();return e.forEach((e=>{i._blacklist.add(e),i._whitelist.delete(e)})),i._blacklistError=NQ({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist;return!t.has(e,this.resolve)||this.createError({params:{values:t.toArray().join(", ")}})}}),i}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(){const e=this.clone(),{label:t,meta:i}=e.spec;return{meta:i,label:t,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,i)=>i.findIndex((t=>t.name===e.name))===t))}}}IQ.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])IQ.prototype[`${e}At`]=function(t,i,n={}){const{parent:r,parentPath:s,schema:o}=MQ(this,t,i,n.context);return o[e](r&&r[s],DQ({},n,{parent:r,path:t}))};for(const e of["equals","is"])IQ.prototype[e]=IQ.prototype.oneOf;for(const e of["not","nope"])IQ.prototype[e]=IQ.prototype.notOneOf;IQ.prototype.optional=IQ.prototype.notRequired;const AQ=IQ;AQ.prototype;const PQ=e=>null==e;let RQ=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,BQ=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,FQ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,WQ=e=>PQ(e)||e===e.trim(),VQ={}.toString();function zQ(){return new HQ}class HQ extends IQ{constructor(){super({type:"string"}),this.withMutation((()=>{this.transform((function(e){if(this.isType(e))return e;if(Array.isArray(e))return e;const t=null!=e&&e.toString?e.toString():e;return t===VQ?e:t}))}))}_typeCheck(e){return e instanceof String&&(e=e.valueOf()),"string"==typeof e}_isPresent(e){return super._isPresent(e)&&!!e.length}length(e,t=aQ.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return PQ(t)||t.length===this.resolve(e)}})}min(e,t=aQ.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return PQ(t)||t.length>=this.resolve(e)}})}max(e,t=aQ.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},test(t){return PQ(t)||t.length<=this.resolve(e)}})}matches(e,t){let i,n,r=!1;return t&&("object"==typeof t?({excludeEmptyString:r=!1,message:i,name:n}=t):i=t),this.test({name:n||"matches",message:i||aQ.matches,params:{regex:e},test:t=>PQ(t)||""===t&&r||-1!==t.search(e)})}email(e=aQ.email){return this.matches(RQ,{name:"email",message:e,excludeEmptyString:!0})}url(e=aQ.url){return this.matches(BQ,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=aQ.uuid){return this.matches(FQ,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(e=aQ.trim){return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:WQ})}lowercase(e=aQ.lowercase){return this.transform((e=>PQ(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>PQ(e)||e===e.toLowerCase()})}uppercase(e=aQ.uppercase){return this.transform((e=>PQ(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>PQ(e)||e===e.toUpperCase()})}}zQ.prototype=HQ.prototype;function jQ(){return new UQ}class UQ extends IQ{constructor(){super({type:"number"}),this.withMutation((()=>{this.transform((function(e){let t=e;if("string"==typeof t){if(t=t.replace(/\s/g,""),""===t)return NaN;t=+t}return this.isType(t)?t:parseFloat(t)}))}))}_typeCheck(e){return e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&!(e=>e!=+e)(e)}min(e,t=lQ.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return PQ(t)||t>=this.resolve(e)}})}max(e,t=lQ.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(t){return PQ(t)||t<=this.resolve(e)}})}lessThan(e,t=lQ.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},test(t){return PQ(t)||t<this.resolve(e)}})}moreThan(e,t=lQ.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},test(t){return PQ(t)||t>this.resolve(e)}})}positive(e=lQ.positive){return this.moreThan(0,e)}negative(e=lQ.negative){return this.lessThan(0,e)}integer(e=lQ.integer){return this.test({name:"integer",message:e,test:e=>PQ(e)||Number.isInteger(e)})}truncate(){return this.transform((e=>PQ(e)?e:0|e))}round(e){var t,i=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===i.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+i.join(", "));return this.transform((t=>PQ(t)?t:Math[e](t)))}}jQ.prototype=UQ.prototype;var GQ=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;let KQ=new Date("");function $Q(){return new qQ}class qQ extends IQ{constructor(){super({type:"date"}),this.withMutation((()=>{this.transform((function(e){return this.isType(e)?e:(e=function(e){var t,i,n=[1,4,5,6,7,10,11],r=0;if(i=GQ.exec(e)){for(var s,o=0;s=n[o];++o)i[s]=+i[s]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,i[7]=i[7]?String(i[7]).substr(0,3):0,void 0!==i[8]&&""!==i[8]||void 0!==i[9]&&""!==i[9]?("Z"!==i[8]&&void 0!==i[9]&&(r=60*i[10]+i[11],"+"===i[9]&&(r=0-r)),t=Date.UTC(i[1],i[2],i[3],i[4],i[5]+r,i[6],i[7])):t=+new Date(i[1],i[2],i[3],i[4],i[5],i[6],i[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?KQ:new Date(e))}))}))}_typeCheck(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}prepareParam(e,t){let i;if(TQ.isRef(e))i=e;else{let n=this.cast(e);if(!this._typeCheck(n))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);i=n}return i}min(e,t=cQ.min){let i=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(e){return PQ(e)||e>=this.resolve(i)}})}max(e,t=cQ.max){var i=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(e){return PQ(e)||e<=this.resolve(i)}})}}qQ.INVALID_DATE=KQ,$Q.prototype=qQ.prototype,$Q.INVALID_DATE=KQ;var ZQ=i(11865),YQ=i.n(ZQ),XQ=i(68929),QQ=i.n(XQ),JQ=i(67523),eJ=i.n(JQ),tJ=i(94633),iJ=i.n(tJ);function nJ(e,t){let i=1/0;return e.some(((e,n)=>{var r;if(-1!==(null==(r=t.path)?void 0:r.indexOf(e)))return i=n,!0})),i}function rJ(e){return(t,i)=>nJ(e,t)-nJ(e,i)}function sJ(){return(sJ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}let oJ=e=>"[object Object]"===Object.prototype.toString.call(e);const aJ=rJ([]);class lJ extends IQ{constructor(e){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=aJ,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{this.transform((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null})),e&&this.shape(e)}))}_typeCheck(e){return oJ(e)||"function"==typeof e}_cast(e,t={}){var i;let n=super._cast(e,t);if(void 0===n)return this.getDefault();if(!this._typeCheck(n))return n;let r=this.fields,s=null!=(i=t.stripUnknown)?i:this.spec.noUnknown,o=this._nodes.concat(Object.keys(n).filter((e=>-1===this._nodes.indexOf(e)))),a={},l=sJ({},t,{parent:a,__validating:t.__validating||!1}),c=!1;for(const e of o){let i=r[e],o=pQ()(n,e);if(i){let r,s=n[e];l.path=(t.path?`${t.path}.`:"")+e,i=i.resolve({value:s,context:t.context,parent:a});let o="spec"in i?i.spec:void 0,h=null==o?void 0:o.strict;if(null==o?void 0:o.strip){c=c||e in n;continue}r=t.__validating&&h?n[e]:i.cast(n[e],l),void 0!==r&&(a[e]=r)}else o&&!s&&(a[e]=n[e]);a[e]!==n[e]&&(c=!0)}return c?a:n}_validate(e,t={},i){let n=[],{sync:r,from:s=[],originalValue:o=e,abortEarly:a=this.spec.abortEarly,recursive:l=this.spec.recursive}=t;s=[{schema:this,value:o},...s],t.__validating=!0,t.originalValue=o,t.from=s,super._validate(e,t,((e,c)=>{if(e){if(!_Q.isError(e)||a)return void i(e,c);n.push(e)}if(!l||!oJ(c))return void i(n[0]||null,c);o=o||c;let h=this._nodes.map((e=>(i,n)=>{let r=-1===e.indexOf(".")?(t.path?`${t.path}.`:"")+e:`${t.path||""}["${e}"]`,a=this.fields[e];a&&"validate"in a?a.validate(c[e],sJ({},t,{path:r,from:s,strict:!0,parent:c,originalValue:o[e]}),n):n(null)}));wQ({sync:r,tests:h,value:c,errors:n,endEarly:a,sort:this._sortErrors,path:t.path},i)}))}clone(e){const t=super.clone(e);return t.fields=sJ({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),i=t.fields;for(let[e,t]of Object.entries(this.fields)){const n=i[e];void 0===n?i[e]=t:n instanceof IQ&&t instanceof IQ&&(i[e]=t.concat(n))}return t.withMutation((()=>t.shape(i)))}getDefaultFromShape(){let e={};return this._nodes.forEach((t=>{const i=this.fields[t];e[t]="default"in i?i.getDefault():void 0})),e}_getDefault(){return"default"in this.spec?super._getDefault():this._nodes.length?this.getDefaultFromShape():void 0}shape(e,t=[]){let i=this.clone(),n=Object.assign(i.fields,e);if(i.fields=n,i._sortErrors=rJ(Object.keys(n)),t.length){Array.isArray(t[0])||(t=[t]);let e=t.map((([e,t])=>`${e}-${t}`));i._excludedEdges=i._excludedEdges.concat(e)}return i._nodes=function(e,t=[]){let i=[],n=[];function r(e,r){var s=(0,xQ.split)(e)[0];~n.indexOf(s)||n.push(s),~t.indexOf(`${r}-${s}`)||i.push([r,s])}for(const t in e)if(pQ()(e,t)){let i=e[t];~n.indexOf(t)||n.push(t),TQ.isRef(i)&&i.isSibling?r(i.path,t):gQ(i)&&"deps"in i&&i.deps.forEach((e=>r(e,t)))}return iJ().array(n,i).reverse()}(n,i._excludedEdges),i}pick(e){const t={};for(const i of e)this.fields[i]&&(t[i]=this.fields[i]);return this.clone().withMutation((e=>(e.fields={},e.shape(t))))}omit(e){const t=this.clone(),i=t.fields;t.fields={};for(const t of e)delete i[t];return t.withMutation((()=>t.shape(i)))}from(e,t,i){let n=(0,xQ.getter)(e,!0);return this.transform((r=>{if(null==r)return r;let s=r;return pQ()(r,e)&&(s=sJ({},r),i||delete s[e],s[t]=n(r)),s}))}noUnknown(e=!0,t=uQ.noUnknown){"string"==typeof e&&(t=e,e=!0);let i=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const i=function(e,t){let i=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===i.indexOf(e)))}(this.schema,t);return!e||0===i.length||this.createError({params:{unknown:i.join(", ")}})}});return i.spec.noUnknown=e,i}unknown(e=!0,t=uQ.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>t&&eJ()(t,((t,i)=>e(i)))))}camelCase(){return this.transformKeys(QQ())}snakeCase(){return this.transformKeys(YQ())}constantCase(){return this.transformKeys((e=>YQ()(e).toUpperCase()))}describe(){let e=super.describe();return e.fields=CQ()(this.fields,(e=>e.describe())),e}}function cJ(e){return new lJ(e)}cJ.prototype=lJ.prototype;var hJ=cJ().shape({title:zQ().required().max(100),artist:zQ().required().max(100),bpm:jQ(),subtitle:zQ(),album:zQ(),music:zQ(),words:zQ()});var uJ;function dJ(e,t,i,n){uJ||(uJ="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:uJ,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function fJ(e,t,i,n,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(n,r)}function pJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gJ(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return gJ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var mJ=dJ(FY,{},void 0,"New Project"),bJ=dJ(NX,{expandIcon:dJ(pU.Z,{})},void 0,dJ(dj,{},void 0,"Template")),vJ=dJ(GX,{value:"empty",control:dJ(WX,{}),label:"Empty"}),yJ=dJ(GX,{value:"band",control:dJ(WX,{}),label:"Band"}),_J=dJ(NX,{expandIcon:dJ(pU.Z,{})},void 0,dJ(dj,{},void 0,"Details")),wJ=dJ(Yj,{type:"submit",variant:"contained",color:"primary",fullWidth:!0},void 0,"Create New Project"),SJ=dJ(qX.Z,{});const CJ=function(){var e=pJ(zY(),3),t=e[0],i=e[1],n=e[2],s=(0,r.useContext)(xH).setMonacoModels,o=Ye(),a=bY({resolver:vX(hJ)}),l=a.control,c=a.errors,h=a.handleSubmit,u=a.setValue,d=function(){var e=function(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var s=e.apply(t,i);function o(e){fJ(s,n,r,o,a,"next",e)}function a(e){fJ(s,n,r,o,a,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,tU();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)("workDir",e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){return Mn.ipcRenderer.on(Bj.Tk,i),function(){Mn.ipcRenderer.removeAllListeners(Bj.Tk)}}),[i]);var f=dJ(Qj,{onClick:d},void 0,SJ);return dJ(RY,{open:t,onClose:n,closeAfterTransition:!0,BackdropComponent:TY,BackdropProps:{timeout:500}},void 0,dJ(kY,{in:t},void 0,dJ(xn,{},void 0,mJ,dJ(_X,{},void 0,dJ("form",{onSubmit:h((function(e){var t=EH().join(e.workDir,e.title);jj()(t).init(),YX(e),o(vH()),s((function(e){return e.forEach((function(e){return e.dispose()})),[]})),o(LK(t)),n()}))},void 0,dJ(qY,{control:l,name:"title",defaultValue:"",label:"Title",margin:"normal",variant:"filled",errors:c,fullWidth:!0}),dJ(qY,{control:l,name:"artist",defaultValue:"",label:"Artist",variant:"filled",errors:c,fullWidth:!0}),dJ(TX,{},void 0,bJ,dJ(OX,{},void 0,dJ(QU,{},void 0,dJ(SY,{name:"template",control:l,defaultValue:"empty",rules:{required:!0},render:function(e){var t=e.ref,i=e.value,n=e.onChange;return r.createElement(jX,{ref:t,value:i,onChange:function(e){return n(e.target.value)}},vJ,yJ)}})))),dJ(TX,{},void 0,_J,dJ(OX,{},void 0,dJ(xn,{},void 0,dJ(qY,{control:l,name:"bpm",defaultValue:90,label:"BPM",variant:"filled",size:"small",errors:c,fullWidth:!0}),dJ(qY,{control:l,name:"subtitle",defaultValue:"",label:"Subtitle",variant:"filled",size:"small",errors:c,fullWidth:!0}),dJ(qY,{control:l,name:"album",defaultValue:"",label:"Album",variant:"filled",size:"small",errors:c,fullWidth:!0}),dJ(qY,{control:l,name:"music",defaultValue:"",label:"Music",variant:"filled",size:"small",errors:c,fullWidth:!0}),dJ(qY,{control:l,name:"words",defaultValue:"",label:"Words",variant:"filled",size:"small",errors:c,fullWidth:!0})))),dJ(SY,{name:"workDir",control:l,defaultValue:EH().join(Mn.remote.app.getPath("documents"),"stave"),rules:{required:!0,maxLength:100,validate:function(e){return!Nn().existsSync(e)||"File is exist"}},render:function(e,t){var i=e.ref,n=e.value,r=e.onChange,s=t.invalid;return dJ(LH,{},void 0,dJ(xn,{display:"flex",alignItems:"center",pl:2},void 0,dJ(BU,{placeholder:"Save Path",value:n,inputRef:i,onChange:function(e){return r(e.target.value)},error:s,style:{flex:1}}),f))}}),wJ)))))};var xJ;function kJ(e,t,i,n){xJ||(xJ="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:xJ,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function EJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return TJ(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return TJ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var LJ=kJ(mX,{}),NJ=kJ(CJ,{}),MJ=kJ(Gi,{}),OJ=kJ(PK,{}),DJ=kJ(zj,{}),IJ=kJ(tZ,{});var AJ;function PJ(e,t,i,n){AJ||(AJ="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:AJ,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var RJ,BJ=PJ((function(){var e=EJ((0,r.useState)([]),2),t=e[0],i=e[1],n=EJ((0,r.useState)(),2),s=n[0],o=n[1],a=(0,r.useRef)(null),l=(0,r.useRef)(null),c=EJ(Tn()({src:"../src/alphatab-1.1.0/package/dist/alphaTab.js"}),1)[0],h=et(wH),u=(0,Wi.A)({palette:{type:h}});return(0,r.useEffect)((function(){!c&&a.current&&l.current&&o(new window.alphaTab.AlphaTabApi(a.current,{tex:!0,player:{soundFont:"../src/alphatab-1.1.0/package/dist/soundfont/sonivox.sf2",enablePlayer:!0}}))}),[c]),kJ(Hi,{theme:u},void 0,kJ(xH.Provider,{value:{monacoModels:t,setMonacoModels:i}},void 0,LJ,NJ,kJ(xn,{height:"100%"},void 0,MJ,kJ(Uq,{alphaTabApi:s}),kJ(xn,{height:"100%",pt:8},void 0,kJ(Fi,{split:"vertical",defaultSize:"280px",minSize:80,style:{position:"relative"}},void 0,OJ,kJ(Fi,{split:"horizontal",defaultSize:"90%",pane2Style:{height:"100%",minHeight:"50px",overflow:"hidden"}},void 0,kJ(Fi,{minSize:50,defaultSize:"50%",split:"vertical"},void 0,DJ,kJ(h$,{mainRef:a,scrollRef:l,alphaTabApi:s})),IJ))))))}),{});function FJ(){return BJ}function WJ(e,t,i,n){RJ||(RJ="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:RJ,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function VJ(){return WJ(Ft,{},void 0,WJ(Dt,{path:fi,component:FJ}))}var zJ=i(94500),HJ="persist:",jJ="persist/FLUSH",UJ="persist/REHYDRATE",GJ="persist/PAUSE",KJ="persist/PERSIST",$J="persist/PURGE",qJ="persist/REGISTER";function ZJ(e){return(ZJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YJ(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function XJ(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function QJ(e,t,i,n){n.debug;var r=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?YJ(i,!0).forEach((function(t){XJ(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):YJ(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},i);return e&&"object"===ZJ(e)&&Object.keys(e).forEach((function(n){"_persist"!==n&&t[n]===i[n]&&(r[n]=e[n])})),r}function JJ(e){var t,i=e.blacklist||null,n=e.whitelist||null,r=e.transforms||[],s=e.throttle||0,o="".concat(void 0!==e.keyPrefix?e.keyPrefix:HJ).concat(e.key),a=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:e0;var l=e.writeFailHandler||null,c={},h={},u=[],d=null,f=null;function p(){if(0===u.length)return d&&clearInterval(d),void(d=null);var e=u.shift(),i=r.reduce((function(t,i){return i.in(t,e,c)}),c[e]);if(void 0!==i)try{h[e]=t(i)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete h[e];0===u.length&&(Object.keys(h).forEach((function(e){void 0===c[e]&&delete h[e]})),f=a.setItem(o,t(h)).catch(m))}function g(e){return(!n||-1!==n.indexOf(e)||"_persist"===e)&&(!i||-1===i.indexOf(e))}function m(e){l&&l(e)}return{update:function(e){Object.keys(e).forEach((function(t){g(t)&&c[t]!==e[t]&&-1===u.indexOf(t)&&u.push(t)})),Object.keys(c).forEach((function(t){void 0===e[t]&&g(t)&&-1===u.indexOf(t)&&void 0!==c[t]&&u.push(t)})),null===d&&(d=setInterval(p,s)),c=e},flush:function(){for(;0!==u.length;)p();return f||Promise.resolve()}}}function e0(e){return JSON.stringify(e)}function t0(e){var t,i=e.transforms||[],n="".concat(void 0!==e.keyPrefix?e.keyPrefix:HJ).concat(e.key),r=e.storage;e.debug;return t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:i0,r.getItem(n).then((function(e){if(e)try{var n={},r=t(e);return Object.keys(r).forEach((function(e){n[e]=i.reduceRight((function(t,i){return i.out(t,e,r)}),t(r[e]))})),n}catch(e){throw e}}))}function i0(e){return JSON.parse(e)}function n0(e){0}function r0(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s0(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r0(i,!0).forEach((function(t){o0(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r0(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o0(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a0(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function l0(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c0(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function h0(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c0(i,!0).forEach((function(t){u0(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c0(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function u0(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d0={registry:[],bootstrapped:!1},f0=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qJ:return h0({},e,{registry:[].concat(l0(e.registry),[t.key])});case UJ:var i=e.registry.indexOf(t.key),n=l0(e.registry);return n.splice(i,1),h0({},e,{registry:n,bootstrapped:0===n.length});default:return e}};var p0=i(76734),g0=iH({name:"currentUser",initialState:{currentUser:void 0,headers:void 0},reducers:{setCurrentUser:function(e,t){e.currentUser=t.payload},setHeaders:function(e,t){var i,n=t.payload,r=n["content-type"],s=n["access-token"],o=n.client,a=n.uid,l=(null===(i=e.headers)||void 0===i?void 0:i.headers["access-token"])||"";e.headers={headers:{"content-type":r,"access-token":s||l,client:o,uid:a}}},remove:function(e){e.currentUser=void 0,e.headers=void 0}}}),m0=g0.actions;m0.setCurrentUser,m0.setHeaders,m0.remove;const b0=PV({tab:yH,theme:CH,currentUser:g0.reducer,workDir:NK});function v0(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var y0,_0=function(e,t){var i=void 0!==e.version?e.version:-1,n=(e.debug,void 0===e.stateReconciler?QJ:e.stateReconciler),r=e.getStoredState||t0,s=void 0!==e.timeout?e.timeout:5e3,o=null,a=!1,l=!0,c=function(e){return e._persist.rehydrated&&o&&!l&&o.update(e),e};return function(h,u){var d=h||{},f=d._persist,p=a0(d,["_persist"]);if(u.type===KJ){var g=!1,m=function(t,i){g||(u.rehydrate(e.key,t,i),g=!0)};if(s&&setTimeout((function(){!g&&m(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),s),l=!1,o||(o=JJ(e)),f)return s0({},t(p,u),{_persist:f});if("function"!=typeof u.rehydrate||"function"!=typeof u.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return u.register(e.key),r(e).then((function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,i).then((function(e){m(e)}),(function(e){m(void 0,e)}))}),(function(e){m(void 0,e)})),s0({},t(p,u),{_persist:{version:i,rehydrated:!1}})}if(u.type===$J)return a=!0,u.result(function(e){var t=e.storage,i="".concat(void 0!==e.keyPrefix?e.keyPrefix:HJ).concat(e.key);return t.removeItem(i,n0)}(e)),s0({},t(p,u),{_persist:f});if(u.type===jJ)return u.result(o&&o.flush()),s0({},t(p,u),{_persist:f});if(u.type===GJ)l=!0;else if(u.type===UJ){if(a)return s0({},p,{_persist:s0({},f,{rehydrated:!0})});if(u.key===e.key){var b=t(p,u),v=u.payload,y=s0({},!1!==n&&void 0!==v?n(v,h,b,e):b,{_persist:s0({},f,{rehydrated:!0})});return c(y)}}if(!f)return t(h,u);var _=t(p,u);return _===p?h:c(s0({},_,{_persist:f}))}}({key:"root",version:1,storage:p0.Z,whitelist:["theme"]},b0),w0=function(e){if(Array.isArray(e))return v0(e)}(y0=Qz({serializableCheck:!1}))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(y0)||function(e,t){if(e){if("string"==typeof e)return v0(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v0(e,t):void 0}}(y0)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(!["test","production"].includes("production")){var S0=(0,zJ.createLogger)({level:"info",collapsed:!0});w0.push(S0)}var C0,x0=Jz({reducer:_0,middleware:w0}),k0=function(e,t,i){var n=i||!1,r=AV(f0,d0,t&&t.enhancer?t.enhancer:void 0),s=function(e){r.dispatch({type:qJ,key:e})},o=function(t,i,s){var o={type:UJ,payload:i,err:s,key:t};e.dispatch(o),r.dispatch(o),n&&a.getState().bootstrapped&&(n(),n=!1)},a=h0({},r,{purge:function(){var t=[];return e.dispatch({type:$J,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:jJ,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:GJ})},persist:function(){e.dispatch({type:KJ,register:s,rehydrate:o})}});return t&&t.manualPersist||a.persist(),a}(x0);function E0(e,t,i,n){C0||(C0="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:C0,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}var T0,L0=E0(Re,{maxSnack:3},void 0,E0(je,{store:x0},void 0,E0(ct,{loading:null,persistor:k0},void 0,E0(ri,{},void 0,E0(VJ,{})))));function N0(){return(0,r.useEffect)((function(){var e=new o.Titlebar({backgroundColor:o.Color.fromHex("#5B5B5B")});return e.updateTitle("Stave Editor"),function(){e.dispose()}}),[]),L0}function M0(e,t,i,n){T0||(T0="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var o=new Array(s),a=0;a<s;a++)o[a]=arguments[a+3];t.children=o}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:T0,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}(0,s.render)(M0(N0,{}),document.getElementById("root"))},86010:(e,t,i)=>{"use strict";function n(e){var t,i,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=n(e[t]))&&(r&&(r+=" "),r+=i);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,i=0,r="";i<arguments.length;)(e=arguments[i++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}i.d(t,{Z:()=>r})},61284:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&o(t,e,i);return a(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var h=l(i(67294)),u=i(76861),d=i(11096),f=c(i(6110)),p=c(i(30965)),g=c(i(99777)),m=/(%[coOs])|(%(([0-9]*[.])?[0-9]+)?[dif])/g,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.theme=function(e){return s(s({},e),{method:t.props.log.method})},t}return r(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.log.amount!==e.log.amount},t.prototype.render=function(){var e=this.props.log;return h.createElement(u.ThemeProvider,{theme:this.theme},h.createElement(d.Message,{"data-method":e.method},e.amount>1?h.createElement(d.AmountIcon,null,e.amount):h.createElement(d.Icon,null),h.createElement(d.Content,null,this.getNode())))},t.prototype.getNode=function(){var e,t=this.props.log,i=this.typeCheck(t);if(i)return i;if(t.data.length>0&&"string"==typeof t.data[0]){var n=null===(e=t.data[0].match(m))||void 0===e?void 0:e.length;if(n){var r=t.data.slice(1+n);return h.createElement(h.Fragment,null,h.createElement(f.default,{data:t.data}),r.length>0&&h.createElement(p.default,{quoted:!1,log:s(s({},t),{data:r}),linkifyOptions:this.props.linkifyOptions}))}}if(t.data.every((function(e){return"string"==typeof e}))&&"error"===t.method)return h.createElement(g.default,{error:t.data.join(" ")});var o="string"!=typeof t.data[0];return h.createElement(p.default,{log:t,quoted:o,linkifyOptions:this.props.linkifyOptions})},t.prototype.typeCheck=function(e){return e?!(e.data instanceof Array)&&h.createElement(f.default,{data:["%c[console-feed] %cFailed to parse message! %clog.data was not an array!","color: red","color: orange","color: cyan"]}):h.createElement(f.default,{data:["%c[console-feed] %cFailed to parse message! %clog was typeof "+typeof e+", but it should've been a log object","color: red","color: orange","color: cyan"]})},t}(h.Component);t.default=b},32477:(e,t,i)=>{"use strict";t.__esModule=!0;var n=i(42903);t.default=function(e,t,i){var r={};function s(e){return"number"!=typeof e?"NaN":Math.floor(e)}var o=null;function a(e){for(var t=["background","border","color","font","line","margin","padding","text","-webkit-background","-webkit-border","-webkit-font","-webkit-margin","-webkit-padding","-webkit-text"],i=0;i<t.length;i++)if(e.startsWith(t[i]))return!0;return!1}function l(e){for(var t in o)e.style[t]=o[t]}return r.s=function(e){return"string"!=typeof e?"":String(e)},r.f=function(e){return"number"!=typeof e?"NaN":e},r.i=s,r.d=s,r.c=function(e){o={};var t=document.createElement("span");t.setAttribute("style",e);for(var i=0;i<t.style.length;i++){var n=t.style[i];a(n)&&(o[n]=t.style[n])}},n.String.format(e,t,r,i,(function(e,t){if(t instanceof Node)e.appendChild(t);else if(void 0!==t){var i=(s=String(t),(a=document.createDocumentFragment()).appendChild(document.createTextNode(s)),a);if(o){var n=document.createElement("span");n.appendChild(i),l(n);for(var r=0;r<n.children.length;++r)l(n.children[r]);i=n}e.appendChild(i)}var s,a;return e}))}},32880:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=n(i(56163)),s=n(i(32477));t.default=function(e){var t=document.createElement("span");return s.default(e[0],e.slice(1),t),r.default(t.outerHTML.replace(/(?:\r\n|\r|\n)/g,"<br />"))}},42903:(e,t)=>{"use strict";t.__esModule=!0,t.String=void 0,function(e){function t(e,t){var i=e.charCodeAt(t);return 48<=i&&i<=57}e.format=function(e,i,n,r,s,o){if(!e||!i||!i.length)return{formattedResult:s(r,e),unusedSubstitutions:i};function a(){return'String.format("'+e+'", "'+Array.prototype.join.call(i,'", "')+'")'}function l(e){console.error(a()+": "+e)}for(var c,h=r,u=o||function(e,i){var n=[],r=0;function s(e){n.length&&"string"===n[n.length-1].type?n[n.length-1].value+=e:n.push({type:"string",value:e})}function o(e,t,i){n.push({type:"specifier",specifier:e,precision:t,substitutionIndex:i})}for(var a=0,l=e.indexOf("%",a);-1!==l&&e.length!==a;l=e.indexOf("%",a))if(s(e.substring(a,l)),"%"!==e[a=l+1]){if(t(e,a)){for(var c=parseInt(e.substring(a),10);t(e,a);)++a;c>0&&"$"===e[a]&&(r=c-1,++a)}var h=-1;if("."===e[a])for(++a,h=parseInt(e.substring(a),10),isNaN(h)&&(h=0);t(e,a);)++a;e[a]in i?(o(e[a],h,r),++r,++a):(s(e.substring(l,a+1)),++a)}else s("%"),++a;return s(e.substring(a)),n}(e,n),d={},f=0;f<u.length;++f){var p=u[f];"string"!==p.type?"specifier"===p.type?p.substitutionIndex>=i.length?(l("not enough substitution arguments. Had "+i.length+" but needed "+(p.substitutionIndex+1)+", so substitution was skipped."),h=s(h,"%"+(p.precision>-1?p.precision:"")+p.specifier)):(d[p.substitutionIndex]=!0,p.specifier in n?h=s(h,n[p.specifier](i[p.substitutionIndex],p)):(c="unsupported format character "+p.specifier+". Treating as a string.",console.warn(a()+": "+c),h=s(h,i[p.substitutionIndex]))):l('Unknown token type "'+p.type+'" found.'):h=s(h,p.value)}var g=[];for(f=0;f<i.length;++f)f in d||g.push(i[f]);return{formattedResult:h,unusedSubstitutions:g}}}(t.String||(t.String={}))},11096:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.Content=t.AmountIcon=t.Icon=t.Message=t.Root=void 0;var r=n(i(23727)),s=function(e,t,i){return i["LOG_"+t.toUpperCase()+"_"+e.toUpperCase()]||i["LOG_"+e.toUpperCase()]};t.Root=r.default("div")({wordBreak:"break-word",width:"100%"}),t.Message=r.default("div")((function(e){var t=e.theme,i=t.styles,n=t.method;return{position:"relative",display:"flex",color:s("color",n,i),backgroundColor:s("background",n,i),borderTop:"1px solid "+s("border",n,i),borderBottom:"1px solid "+s("border",n,i),marginTop:-1,marginBottom:+/^warn|error$/.test(n),paddingLeft:10,boxSizing:"border-box","& *":{verticalAlign:"top",boxSizing:"border-box",fontFamily:i.BASE_FONT_FAMILY,whiteSpace:"pre-wrap",fontSize:i.BASE_FONT_SIZE},"& a":{color:"rgb(177, 177, 177)"}}})),t.Icon=r.default("div")((function(e){var t=e.theme,i=t.styles,n=t.method;return{width:i.LOG_ICON_WIDTH,height:i.LOG_ICON_HEIGHT,backgroundImage:s("icon",n,i),backgroundRepeat:"no-repeat",backgroundSize:i.LOG_ICON_BACKGROUND_SIZE,backgroundPosition:"50% 50%"}})),t.AmountIcon=r.default("div")((function(e){var t=e.theme,i=t.styles,n=t.method;return{height:"16px",margin:"1px 0",whiteSpace:"nowrap",fontSize:"10px",lineHeight:"17px",padding:"0px 3px",background:s("amount_background",n,i),color:s("amount_color",n,i),borderRadius:"8px",minWidth:"18px",textAlign:"center"}})),t.Content=r.default("div")((function(e){return{clear:"right",position:"relative",padding:e.theme.styles.PADDING,marginLeft:15,minHeight:18,flex:"auto",width:"calc(100% - 15px)"}}))},99456:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&o(t,e,i);return a(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var h=l(i(67294)),u=i(76861),d=c(i(46491)),f=i(11096),p=c(i(61284)),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.theme=function(){return{variant:t.props.variant||"light",styles:s(s({},d.default(t.props)),t.props.styles)}},t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,i=t.filter,n=void 0===i?[]:i,r=t.logs,o=void 0===r?[]:r,a=t.searchKeywords,l=t.logFilter,c=t.logGrouping,d=void 0===c||c;if(a){var g=new RegExp(a),m=l||function(e){try{return g.test((t=e,i=new Set,JSON.stringify(t,(function(e,t){if("object"==typeof t&&null!==t){if(i.has(t))return;i.add(t)}return t}))))}catch(e){return!0}var t,i};o=o.filter(m)}return d&&(o=o.reduce((function(e,t){var i=e[e.length-1];return i&&i.amount&&i.method===t.method&&i.data.length===t.data.length&&i.data.every((function(e,i){return t.data[i]===e}))?(i.amount+=1,e):(e.push(s(s({},t),{amount:1})),e)}),[])),h.createElement(u.ThemeProvider,{theme:this.theme},h.createElement(f.Root,null,o.map((function(t,i){return 0!==n.length&&t.method&&-1===n.indexOf(t.method)?null:h.createElement(p.default,{log:t,key:t.id||t.method+"-"+i,linkifyOptions:e.props.linkifyOptions})}))))},t}(h.PureComponent);t.default=g},99777:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=s(i(67294)),l=o(i(28175));t.default=function(e){var t,i,n,r=e.error,s=-1===(n=(i=r).indexOf("\n"))?i:i.substr(0,n),o=r.split("\n");return o.length>1&&(t=o.slice(1)),t?a.createElement("details",null,a.createElement("summary",{style:{outline:"none",cursor:"pointer"}},s),a.createElement(l.default,null,t.join("\n\r"))):a.createElement(l.default,null,r)}},6110:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return o(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var c=a(i(67294)),h=i(49730),u=l(i(32880)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return c.createElement(h.Root,{"data-type":"formatted",dangerouslySetInnerHTML:{__html:u.default(this.props.data||[])}})},t}(c.PureComponent);t.default=d},30965:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return o(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var c=a(i(67294)),h=i(76861),u=i(49730),d=l(i(28175)),f=l(i(41194)),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,i=t.theme,n=t.quoted;return t.log.data.map((function(t,r){if("string"==typeof t){var s=!n&&t.length?t+" ":c.createElement("span",null,c.createElement("span",null,'"'),c.createElement("span",{style:{color:i.styles.OBJECT_VALUE_STRING_COLOR}},t),c.createElement("span",null,'" '));return c.createElement(u.Root,{"data-type":"string",key:r},c.createElement(d.default,{options:e.props.linkifyOptions},s))}return c.createElement(f.default,{data:t,key:r})}))},t}(c.PureComponent);t.default=h.withTheme(p)},49730:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.Constructor=t.HTML=t.Table=t.Root=void 0;var r=n(i(23727));t.Root=r.default("div")({display:"inline-block",wordBreak:"break-all","&::after":{content:"' '",display:"inline-block"},"& > li, & > ol, & > details":{backgroundColor:"transparent !important",display:"inline-block"},"& ol:empty":{paddingLeft:"0 !important"}}),t.Table=r.default("span")({"& > li":{display:"inline-block",marginTop:5}}),t.HTML=r.default("span")({display:"inline-block","& div:hover":{backgroundColor:"rgba(255, 220, 158, .05) !important",borderRadius:"2px"}}),t.Constructor=r.default("span")({"& > span > span:nth-child(1)":{opacity:.6}})},41194:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&o(t,e,i);return a(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var h=i(76861),u=l(i(67294)),d=i(52255),f=c(i(99777)),p=i(49730),g=function(e){var t=e.name,i=e.data,n=e.isNonenumerable,r=void 0!==n&&n;return u.createElement("span",null,"string"==typeof t?u.createElement(d.ObjectName,{name:t,dimmed:r}):u.createElement(d.ObjectPreview,{data:t}),u.createElement("span",null,": "),u.createElement(d.ObjectValue,{object:i}))},m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.data,i=e.theme,n=i.styles,r=i.method,o=t instanceof HTMLElement,a="table"===r;return u.createElement(p.Root,{"data-type":a?"table":o?"html":"object"},a?u.createElement(p.Table,null,u.createElement(d.Inspector,s({},this.props,{theme:n,table:!0})),u.createElement(d.Inspector,s({},this.props,{theme:n}))):o?u.createElement(p.HTML,null,u.createElement(d.DOMInspector,s({},this.props,{theme:n}))):u.createElement(d.Inspector,s({},this.props,{theme:n,nodeRenderer:this.nodeRenderer.bind(this)})))},t.prototype.getCustomNode=function(e){var t,i=this.props.theme.styles,n=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name;return"Function"===n?u.createElement("span",{style:{fontStyle:"italic"}},u.createElement(d.ObjectPreview,{data:e})," {",u.createElement("span",{style:{color:"rgb(181, 181, 181)"}},e.body),"}"):e instanceof Error&&"string"==typeof e.stack?u.createElement(f.default,{error:e.stack}):"Promise"===n?u.createElement("span",{style:{fontStyle:"italic"}},"Promise ","{",u.createElement("span",{style:{opacity:.6}},"<pending>"),"}"):e instanceof HTMLElement?u.createElement(p.HTML,null,u.createElement(d.DOMInspector,{data:e,theme:i})):null},t.prototype.nodeRenderer=function(e){var t=e.depth,i=e.name,n=e.data,r=e.isNonenumerable;if(0===t)return this.getCustomNode(n)||u.createElement(d.ObjectRootLabel,{name:i,data:n});if("constructor"===i)return u.createElement(p.Constructor,null,u.createElement(d.ObjectLabel,{name:"<constructor>",data:n.name,isNonenumerable:r}));var s=this.getCustomNode(n);return s?u.createElement(p.Root,null,u.createElement(d.ObjectName,{name:i}),u.createElement("span",null,": "),s):u.createElement(g,{name:i,data:n,isNonenumerable:r})},t}(u.PureComponent);t.default=h.withTheme(m)},46491:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};t.__esModule=!0;var r=i(52255);t.default=function(e){return n(n({},"light"===(e.variant||"light")?r.chromeLight:r.chromeDark),{PADDING:"3px 22px 2px 0",LOG_COLOR:"rgba(255,255,255,0.9)",LOG_BACKGROUND:"transparent",LOG_BORDER:"rgba(255,255,255,0.03)",LOG_ICON_WIDTH:10,LOG_ICON_HEIGHT:18,LOG_ICON:"none",LOG_AMOUNT_BACKGROUND:"#42597f",LOG_AMOUNT_COLOR:"#8d8f91",LOG_WARN_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACkSURBVChTbY7BCoJQFERn0Q/3BX1JuxQjsSCXiV8gtCgxhCIrKIRIqKDVzXl5w5cNHBjm6eGinXiAXu5inY2xYm/mbpIh+vcFhLA3sx0athNUhymEsP+10lAEEA17x8o/9wFuNGnYuVlWve0SQl7P0sBu3aq2R1Q/1JzSkYGd29eqNv2wjdnUuvNRciC/N+qe+7gidbA8zyHkOINsvA/sumcOkjcabcBmw2+mMgAAAABJRU5ErkJggg==)",LOG_WARN_BACKGROUND:"#332b00",LOG_WARN_COLOR:"#ffdc9e",LOG_WARN_BORDER:"#650",LOG_WARN_AMOUNT_BACKGROUND:"#ffbb17",LOG_WARN_AMOUNT_COLOR:"#8d8f91",LOG_ERROR_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADESURBVChTY4CB7ZI8tmfU5E6e01b+DMIgNkgMKg0BR9Vkux6YWPx/bemIgkFiIDmwogOaqrYPzazAEm8DwuGKYGyQHEgNw0VT05Mwib9v3v7/kJEHxiA2TDFIDcNNU4vPMFPACj58/P/v40cwGyYOUsNwy8IZRSFIEUgxskKQGoZrzp4ErQapYbgYHG371M4dLACTQGaD5EBqwD6/FpzQ9dTBE64IhkFiIDmwIhi4mlJqey8o4eR9r8jPIAxig8QgsgwMAFZz1YtGPXgjAAAAAElFTkSuQmCC)",LOG_ERROR_BACKGROUND:"#290000",LOG_ERROR_BORDER:"#5b0000",LOG_ERROR_COLOR:"#ff8080",LOG_ERROR_AMOUNT_BACKGROUND:"#dc2727",LOG_ERROR_AMOUNT_COLOR:"#8d8f91",LOG_DEBUG_ICON:"url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 459 459'%3e%3cpath fill='%234D88FF' d='M433.5 127.5h-71.4a177.7 177.7 0 0 0-45.9-51L357 35.7 321.3 0l-56.1 56.1c-10.2-2.6-23-5.1-35.7-5.1s-25.5 2.5-35.7 5.1L137.7 0 102 35.7l40.8 40.8a177.7 177.7 0 0 0-45.9 51H25.5v51H79c-2.5 7.7-2.5 17.9-2.5 25.5v25.5h-51v51h51V306a88 88 0 0 0 2.5 25.5H25.5v51h71.4A152.2 152.2 0 0 0 229.5 459c56.1 0 107.1-30.6 132.6-76.5h71.4v-51H380c2.5-7.7 2.5-17.9 2.5-25.5v-25.5h51v-51h-51V204c0-7.7 0-17.9-2.5-25.5h53.5v-51zm-153 204h-102v-51h102v51zm0-102h-102v-51h102v51z'/%3e%3c/svg%3e\")",LOG_DEBUG_BACKGROUND:"",LOG_DEBUG_BORDER:"",LOG_DEBUG_COLOR:"#4D88FF",LOG_COMMAND_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABaSURBVChTY6AtmDx5cvnUqVP1oFzsoL+/XwCo8DEQv584caIVVBg7mDBhghxQ4Y2+vr6vU6ZM8YAKYwdA00SB+CxQ8S+g4jCoMCYgSiFRVpPkGaAiHMHDwAAA5Ko+F4/l6+MAAAAASUVORK5CYII=)",LOG_RESULT_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABpSURBVChTY6A92LNnj96uXbvKoVzsYMeOHVbbt29/D1T4eP/+/QJQYVSwe/duD6CCr0B8A8iWgwqjAqBk2NatW38B6bPbtm0TBYkBFbsA+c9ANFgRCBCtEASAAoSthgGiPAMD2IOHgQEA521bM7uG52wAAAAASUVORK5CYII=)",LOG_INFO_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADISURBVChTY4ABp/AztmZBZ07qe538rO114rOa8+GTskYHbKHSEOARd6nLIOTsf61gIA46U6kVePYQiK3uc/K/hPG+LrCi8IyrtkZh5yCKgk/80w46ba0RdGYGhH/2v6rXyf88qtttGVwSLp2ECQLxeiAu1wo6uwpJ7L+o2f6TDA6xZz8jCyqFnuHXCj4djywmZXHoM/EK0azGqhBsNYpngL6VCTnGqRF4xgKo+D5IDO4ZEEAKnjcQBafvqwWf/YoSPDCAP8AZGAC7mLM81zgOTQAAAABJRU5ErkJggg==)",BASE_FONT_FAMILY:"Consolas, Lucida Console, Courier New, monospace",BASE_FONT_SIZE:"12px",ARROW_FONT_SIZE:10,OBJECT_VALUE_STRING_COLOR:"rgb(233,63,59)"})}},23727:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=n(i(80395));t.default=r.default},35288:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=n(i(88965)),s=n(i(16910)),o=i(95575);t.default=function(e,t,i){void 0===i&&(i=!0);for(var n=e,a={pointers:{},src:{npm:"https://npmjs.com/package/console-feed",github:"https://github.com/samdenty99/console-feed"}},l=function(e){var r=n[e];n[e]=function(){r.apply(this,arguments);var n=[].slice.call(arguments);setTimeout((function(){var r=s.default(e,n);if(r){var a=r;i&&(a=o.Encode(r)),t(a,r)}}))},a.pointers[e]=r},c=0,h=r.default;c<h.length;c++){l(h[c])}return n.feed=a,n}},99721:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+"-"+Date.now()}},16910:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var c=l(i(99721)),h=o(i(5226)),u=o(i(22391)),d=o(i(45776));t.default=function(e,t,i){var r=i||c.default();switch(e){case"clear":return{method:e,id:r};case"count":return!!(s="string"==typeof t[0]?t[0]:"default")&&n(n({},u.increment(s)),{id:r});case"time":case"timeEnd":var s;return!!(s="string"==typeof t[0]?t[0]:"default")&&("time"===e?(h.start(s),!1):n(n({},h.stop(s)),{id:r}));case"assert":if(0!==t.length){var o=d.test.apply(d,a([t[0]],t.slice(1)));if(o)return n(n({},o),{id:r})}return!1;case"error":return{method:e,id:r,data:t.map((function(e){try{return e.stack||e}catch(t){return e}}))};default:return{method:e,id:r,data:t}}}},45776:function(e,t){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n};t.__esModule=!0,t.test=void 0,t.test=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return!e&&(0===t.length&&t.push("console.assert"),{method:"error",data:i(["Assertion failed:"],t)})}},22391:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.increment=void 0;var r=i(33585),s=n(i(91616)),o=i(64138);t.increment=function(e){return s.default(o.count(e)),{method:"log",data:[e+": "+r.state.count[e]]}}},5226:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.stop=t.start=void 0;var r=i(33585),s=n(i(91616)),o=i(64138);t.start=function(e){s.default(o.timeStart(e))},t.stop=function(e){var t=null===r.state||void 0===r.state?void 0:r.state.timings[e];return t&&!t.end?(s.default(o.timeEnd(e)),{method:"log",data:[e+": "+r.state.timings[e].time+"ms"]}):{method:"warn",data:["Timer '"+e+"' does not exist"]}}},64138:(e,t)=>{"use strict";t.__esModule=!0,t.timeEnd=t.timeStart=t.count=void 0,t.count=function(e){return{type:"COUNT",name:e}},t.timeStart=function(e){return{type:"TIME_START",name:e}},t.timeEnd=function(e){return{type:"TIME_END",name:e}}},91616:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=n(i(13591)),s=i(33585);t.default=function(e){s.update(r.default(s.state,e))}},13591:function(e,t){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};t.__esModule=!0,t.initialState=void 0,t.initialState={timings:{},count:{}},t.default=function(e,n){var r,s,o;switch(void 0===e&&(e=t.initialState),n.type){case"COUNT":var a=e.count[n.name]||0;return i(i({},e),{count:i(i({},e.count),(r={},r[n.name]=a+1,r))});case"TIME_START":return i(i({},e),{timings:i(i({},e.timings),(s={},s[n.name]={start:performance.now()||+new Date},s))});case"TIME_END":var l=e.timings[n.name],c=performance.now()||+new Date,h=c-l.start;return i(i({},e),{timings:i(i({},e.timings),(o={},o[n.name]=i(i({},l),{end:c,time:h}),o))});default:return e}}},33585:(e,t)=>{"use strict";t.__esModule=!0,t.update=t.state=void 0,t.update=function(e){t.state=e}},30076:(e,t)=>{"use strict";t.__esModule=!0,t.default={type:"Function",shouldTransform:function(e,t){return"function"==typeof t},toSerializable:function(e){var t="";try{t=e.toString().substring(t.indexOf("{")+1,t.lastIndexOf("}"))}catch(e){}return{name:e.name,body:t,proto:Object.getPrototypeOf(e).constructor.name}},fromSerializable:function(e){try{var t=function(){};return"string"==typeof e.name&&Object.defineProperty(t,"name",{value:e.name,writable:!1}),"string"==typeof e.body&&Object.defineProperty(t,"body",{value:e.body,writable:!1}),"string"==typeof e.proto&&(t.constructor={name:e.proto}),t}catch(t){return e}}}},69329:(e,t)=>{"use strict";t.__esModule=!0;var i=document.implementation.createHTMLDocument("sandbox");function n(e){for(var t={},i=0,n=e.attributes;i<n.length;i++){var r=n[i];t[r.name]=r.value}return t}t.default={type:"HTMLElement",shouldTransform:function(e,t){return t&&t.children&&"string"==typeof t.innerHTML&&"string"==typeof t.tagName},toSerializable:function(e){return{tagName:e.tagName.toLowerCase(),attributes:n(e),innerHTML:e.innerHTML}},fromSerializable:function(e){try{var t=i.createElement(e.tagName);t.innerHTML=e.innerHTML;for(var n=0,r=Object.keys(e.attributes);n<r.length;n++){var s=r[n];try{t.setAttribute(s,e.attributes[s])}catch(e){}}return t}catch(t){return e}}}},5761:function(e,t){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};t.__esModule=!0,t.default={type:"Map",shouldTransform:function(e,t){return t&&t.constructor&&"Map"===t.constructor.name},toSerializable:function(e){var t={};return e.forEach((function(e,i){var n="object"==typeof i?JSON.stringify(i):i;t[n]=e})),{name:"Map",body:t,proto:Object.getPrototypeOf(e).constructor.name}},fromSerializable:function(e){var t=e.body,n=i({},t);return"string"==typeof e.proto&&(n.constructor={name:e.proto}),n}}},4290:(e,t)=>{"use strict";var i;t.__esModule=!0,function(e){e[e.infinity=0]="infinity",e[e.minusInfinity=1]="minusInfinity",e[e.minusZero=2]="minusZero"}(i||(i={})),t.default={type:"Arithmetic",shouldTransform:function(e,t){return"number"===e&&(t===1/0||t===-1/0||function(e){return 1/e==-1/0}(t))},toSerializable:function(e){return e===1/0?i.infinity:e===-1/0?i.minusInfinity:i.minusZero},fromSerializable:function(e){return e===i.infinity?1/0:e===i.minusInfinity?-1/0:e===i.minusZero?-0:e}}},95575:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.Decode=t.Encode=void 0;var r=n(i(4290)),s=n(i(30076)),o=n(i(69329)),a=n(i(5761)),l=n(i(25954)),c=[o.default,s.default,r.default,a.default],h=new l.default;h.addTransforms(c),t.Encode=function(e){return JSON.parse(h.encode(e))},t.Decode=function(e){return h.decode(JSON.stringify(e))}},25954:(e,t)=>{"use strict";t.__esModule=!0;var i=/^#*@(t|r)$/,n=(0,eval)("this"),r="function"==typeof ArrayBuffer,s="function"==typeof Map,o="function"==typeof Set,a=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],l=Array.prototype.slice,c={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return JSON.parse(e)}},h=function(){function e(e,t){this.references=e,this.transforms=t,this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}return e._createRefMark=function(e){var t=Object.create(null);return t["@r"]=e,t},e.prototype._createCircularCandidate=function(e,t,i){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:i,refIdx:-1})},e.prototype._applyTransform=function(e,t,i,n){var r=Object.create(null),s=n.toSerializable(e);return"object"==typeof s&&this._createCircularCandidate(e,t,i),r["@t"]=n.type,r.data=this._handleValue((function(){return s}),t,i),r},e.prototype._handleArray=function(e){for(var t=[],i=function(i){t[i]=n._handleValue((function(){return e[i]}),t,i)},n=this,r=0;r<e.length;r++)i(r);return t},e.prototype._handlePlainObject=function(e){var t,n,r=Object.create(null),s=function(t){if(Reflect.has(e,t)){var n=i.test(t)?"#"+t:t;r[n]=o._handleValue((function(){return e[t]}),r,n)}},o=this;for(var a in e)s(a);var l=null===(n=null===(t=null==e?void 0:e.__proto__)||void 0===t?void 0:t.constructor)||void 0===n?void 0:n.name;return l&&"Object"!==l&&(r.constructor={name:l}),r},e.prototype._handleObject=function(e,t,i){return this._createCircularCandidate(e,t,i),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)},e.prototype._ensureCircularReference=function(t){var i=this.circularCandidates.indexOf(t);if(i>-1){var n=this.circularCandidatesDescrs[i];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),e._createRefMark(n.refIdx)}return null},e.prototype._handleValue=function(e,t,i){try{var n=e(),r=typeof n,s="object"===r&&null!==n;if(s){var o=this._ensureCircularReference(n);if(o)return o}for(var a=0,l=this.transforms;a<l.length;a++){var c=l[a];if(c.shouldTransform(r,n))return this._applyTransform(n,t,i,c)}return s?this._handleObject(n,t,i):n}catch(e){try{return this._handleValue((function(){return e instanceof Error?e:new Error(e)}),t,i)}catch(e){return null}}},e.prototype.transform=function(){for(var t=this,i=[this._handleValue((function(){return t.references}),null,null)],n=0,r=this.circularCandidatesDescrs;n<r.length;n++){var s=r[n];s.refIdx>0&&(i[s.refIdx]=s.parent[s.key],s.parent[s.key]=e._createRefMark(s.refIdx))}return i},e}(),u=function(){function e(e,t){this.activeTransformsStack=[],this.visitedRefs=Object.create(null),this.references=e,this.transformMap=t}return e.prototype._handlePlainObject=function(e){var t=Object.create(null);for(var n in"constructor"in e&&(e.constructor&&"string"==typeof e.constructor.name||(e.constructor={name:"Object"})),e)e.hasOwnProperty(n)&&(this._handleValue(e[n],e,n),i.test(n)&&(t[n.substring(1)]=e[n],delete e[n]));for(var r in t)e[r]=t[r]},e.prototype._handleTransformedObject=function(e,t,i){var n=e["@t"],r=this.transformMap[n];if(!r)throw new Error("Can't find transform for \""+n+'" type.');this.activeTransformsStack.push(e),this._handleValue(e.data,e,"data"),this.activeTransformsStack.pop(),t[i]=r.fromSerializable(e.data)},e.prototype._handleCircularSelfRefDuringTransform=function(e,t,i){var n=this.references;Object.defineProperty(t,i,{val:void 0,configurable:!0,enumerable:!0,get:function(){return void 0===this.val&&(this.val=n[e]),this.val},set:function(e){this.val=e}})},e.prototype._handleCircularRef=function(e,t,i){this.activeTransformsStack.includes(this.references[e])?this._handleCircularSelfRefDuringTransform(e,t,i):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[i]=this.references[e])},e.prototype._handleValue=function(e,t,i){if("object"==typeof e&&null!==e){var n=e["@r"];if(void 0!==n)this._handleCircularRef(n,t,i);else if(e["@t"])this._handleTransformedObject(e,t,i);else if(Array.isArray(e))for(var r=0;r<e.length;r++)this._handleValue(e[r],e,r);else this._handlePlainObject(e)}},e.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]},e}(),d=[{type:"[[NaN]]",shouldTransform:function(e,t){return"number"===e&&isNaN(t)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(e){return"undefined"===e},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",shouldTransform:function(e,t){return t instanceof Date},toSerializable:function(e){return e.getTime()},fromSerializable:function(e){var t=new Date;return t.setTime(e),t}},{type:"[[RegExp]]",shouldTransform:function(e,t){return t instanceof RegExp},toSerializable:function(e){var t={src:e.source,flags:""};return e.global&&(t.flags+="g"),e.ignoreCase&&(t.flags+="i"),e.multiline&&(t.flags+="m"),t},fromSerializable:function(e){return new RegExp(e.src,e.flags)}},{type:"[[Error]]",shouldTransform:function(e,t){return t instanceof Error},toSerializable:function(e){var t,i;return e.stack||null===(i=(t=Error).captureStackTrace)||void 0===i||i.call(t,e),{name:e.name,message:e.message,stack:e.stack}},fromSerializable:function(e){var t=new(n[e.name]||Error)(e.message);return t.stack=e.stack,t}},{type:"[[ArrayBuffer]]",shouldTransform:function(e,t){return r&&t instanceof ArrayBuffer},toSerializable:function(e){var t=new Int8Array(e);return l.call(t)},fromSerializable:function(e){if(r){var t=new ArrayBuffer(e.length);return new Int8Array(t).set(e),t}return e}},{type:"[[TypedArray]]",shouldTransform:function(e,t){for(var i=0,r=a;i<r.length;i++){var s=r[i];if("function"==typeof n[s]&&t instanceof n[s])return!0}return!1},toSerializable:function(e){return{ctorName:e.constructor.name,arr:l.call(e)}},fromSerializable:function(e){return"function"==typeof n[e.ctorName]?new n[e.ctorName](e.arr):e.arr}},{type:"[[Map]]",shouldTransform:function(e,t){return s&&t instanceof Map},toSerializable:function(e){var t=[];return e.forEach((function(e,i){t.push(i),t.push(e)})),t},fromSerializable:function(e){if(s){for(var t=new Map,i=0;i<e.length;i+=2)t.set(e[i],e[i+1]);return t}for(var n=[],r=0;r<e.length;r+=2)n.push([e[i],e[i+1]]);return n}},{type:"[[Set]]",shouldTransform:function(e,t){return o&&t instanceof Set},toSerializable:function(e){var t=[];return e.forEach((function(e){t.push(e)})),t},fromSerializable:function(e){if(o){for(var t=new Set,i=0;i<e.length;i++)t.add(e[i]);return t}return e}}],f=function(){function e(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||c,this.addTransforms(d)}return e.prototype.addTransforms=function(e){for(var t=0,i=e=Array.isArray(e)?e:[e];t<i.length;t++){var n=i[t];if(this.transformsMap[n.type])throw new Error('Transform with type "'+n.type+'" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},e.prototype.removeTransforms=function(e){for(var t=0,i=e=Array.isArray(e)?e:[e];t<i.length;t++){var n=i[t],r=this.transforms.indexOf(n);r>-1&&this.transforms.splice(r,1),delete this.transformsMap[n.type]}return this},e.prototype.encode=function(e){var t=new h(e,this.transforms).transform();return this.serializer.serialize(t)},e.prototype.decode=function(e){var t=this.serializer.deserialize(e);return new u(t,this.transformsMap).transform()},e}();t.default=f},45558:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){if(e.feed){for(var t=0,i=Object.keys(e.feed.pointers);t<i.length;t++){var n=i[t];e[n]=e.feed.pointers[n]}return delete e.feed}return!1}},88965:(e,t)=>{"use strict";t.__esModule=!0;t.default=["log","debug","info","warn","error","table","clear","time","timeEnd","count","assert","command","result"]},66582:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]});t.__esModule=!0,t.Encode=t.Decode=t.Unhook=t.Hook=t.Console=void 0,n(t,i(99456),"default","Console"),n(t,i(35288),"default","Hook"),n(t,i(45558),"default","Unhook"),n(t,i(95575),"Decode"),n(t,i(95575),"Encode")},21926:(e,t,i)=>{i(82526),i(72443),i(41817),i(92401),i(8722),i(32165),i(69007),i(16066),i(83510),i(41840),i(6982),i(32159),i(96649),i(39341),i(60543),i(9170),i(91038),i(79753),i(26572),i(92222),i(50545),i(26541),i(43290),i(57327),i(69826),i(34553),i(84944),i(86535),i(89554),i(26699),i(82772),i(69600),i(94986),i(21249),i(85827),i(96644),i(65069),i(47042),i(5212),i(2707),i(40561),i(38706),i(33792),i(99244),i(66992),i(24812),i(68309),i(4855),i(35837),i(19601),i(78011),i(69070),i(33321),i(69720),i(43371),i(38559),i(38880),i(49337),i(36210),i(30489),i(43304),i(41825),i(98410),i(72200),i(47941),i(57227),i(60514),i(68304),i(26833),i(41539),i(59595),i(35500),i(94869),i(33952),i(94953),i(38992),i(79841),i(27852),i(32023),i(4723),i(76373),i(66528),i(83112),i(82481),i(15306),i(64765),i(23123),i(23157),i(73210),i(55674),i(48702),i(78783),i(15218),i(74475),i(57929),i(50915),i(29253),i(42125),i(78830),i(58734),i(29254),i(37268),i(7397),i(60086),i(80623),i(68757),i(24603),i(74916),i(92087),i(88386),i(77601),i(39714),i(91058),i(54678),i(9653),i(93299),i(35192),i(33161),i(44048),i(78285),i(44363),i(55994),i(61874),i(9494),i(56977),i(55147),i(99752),i(82376),i(73181),i(23484),i(2388),i(88621),i(60403),i(84755),i(25438),i(90332),i(40658),i(40197),i(44914),i(52420),i(60160),i(60970),i(10408),i(73689),i(3843),i(5735),i(28733),i(83710),i(96078),i(38862),i(73706),i(88674),i(17922),i(34668),i(17727),i(51532),i(70189),i(4129),i(38478),i(18264),i(76938),i(39575),i(16716),i(87145),i(82472),i(49743),i(35109),i(8255),i(65125),i(29135),i(44197),i(76495),i(98145),i(95206),i(92990),i(18927),i(33105),i(35035),i(74345),i(7174),i(32846),i(44731),i(77209),i(96319),i(58867),i(37789),i(33739),i(29368),i(14483),i(12056),i(3462),i(30678),i(27462),i(33824),i(55021),i(12974),i(15016),i(36535),i(12419),i(69596),i(52586),i(74819),i(95683),i(39361),i(51037),i(5898),i(67556),i(14361),i(83593),i(39532),i(81299);var n=i(40857);e.exports=n},81486:(e,t,i)=>{i(21926),i(87079),i(96337);var n=i(40857);e.exports=n},13099:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},96077:(e,t,i)=>{var n=i(70111);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},51223:(e,t,i)=>{var n=i(5112),r=i(70030),s=i(3070),o=n("unscopables"),a=Array.prototype;null==a[o]&&s.f(a,o,{configurable:!0,value:r(null)}),e.exports=function(e){a[o][e]=!0}},31530:(e,t,i)=>{"use strict";var n=i(28710).charAt;e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},25787:e=>{e.exports=function(e,t,i){if(!(e instanceof t))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return e}},19670:(e,t,i)=>{var n=i(70111);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},24019:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},90260:(e,t,i)=>{"use strict";var n,r=i(24019),s=i(19781),o=i(17854),a=i(70111),l=i(86656),c=i(70648),h=i(68880),u=i(31320),d=i(3070).f,f=i(79518),p=i(27674),g=i(5112),m=i(69711),b=o.Int8Array,v=b&&b.prototype,y=o.Uint8ClampedArray,_=y&&y.prototype,w=b&&f(b),S=v&&f(v),C=Object.prototype,x=C.isPrototypeOf,k=g("toStringTag"),E=m("TYPED_ARRAY_TAG"),T=r&&!!p&&"Opera"!==c(o.opera),L=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M=function(e){return a(e)&&l(N,c(e))};for(n in N)o[n]||(T=!1);if((!T||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},T))for(n in N)o[n]&&p(o[n],w);if((!T||!S||S===C)&&(S=w.prototype,T))for(n in N)o[n]&&p(o[n].prototype,S);if(T&&f(_)!==S&&p(_,S),s&&!l(S,k))for(n in L=!0,d(S,k,{get:function(){return a(this)?this[E]:void 0}}),N)o[n]&&h(o[n],E,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:L&&E,aTypedArray:function(e){if(M(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(p){if(x.call(w,e))return e}else for(var t in N)if(l(N,n)){var i=o[t];if(i&&(e===i||x.call(i,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i){if(s){if(i)for(var n in N){var r=o[n];r&&l(r.prototype,e)&&delete r.prototype[e]}S[e]&&!i||u(S,e,i?t:T&&v[e]||t)}},exportTypedArrayStaticMethod:function(e,t,i){var n,r;if(s){if(p){if(i)for(n in N)(r=o[n])&&l(r,e)&&delete r[e];if(w[e]&&!i)return;try{return u(w,e,i?t:T&&b[e]||t)}catch(e){}}for(n in N)!(r=o[n])||r[e]&&!i||u(r,e,t)}},isView:function(e){var t=c(e);return"DataView"===t||l(N,t)},isTypedArray:M,TypedArray:w,TypedArrayPrototype:S}},13331:(e,t,i)=>{"use strict";var n=i(17854),r=i(19781),s=i(24019),o=i(68880),a=i(12248),l=i(47293),c=i(25787),h=i(99958),u=i(17466),d=i(57067),f=i(11179),p=i(79518),g=i(27674),m=i(8006).f,b=i(3070).f,v=i(21285),y=i(58003),_=i(29909),w=_.get,S=_.set,C="ArrayBuffer",x="DataView",k="Wrong index",E=n.ArrayBuffer,T=E,L=n.DataView,N=L&&L.prototype,M=Object.prototype,O=n.RangeError,D=f.pack,I=f.unpack,A=function(e){return[255&e]},P=function(e){return[255&e,e>>8&255]},R=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},B=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},F=function(e){return D(e,23,4)},W=function(e){return D(e,52,8)},V=function(e,t){b(e.prototype,t,{get:function(){return w(this)[t]}})},z=function(e,t,i,n){var r=d(i),s=w(e);if(r+t>s.byteLength)throw O(k);var o=w(s.buffer).bytes,a=r+s.byteOffset,l=o.slice(a,a+t);return n?l:l.reverse()},H=function(e,t,i,n,r,s){var o=d(i),a=w(e);if(o+t>a.byteLength)throw O(k);for(var l=w(a.buffer).bytes,c=o+a.byteOffset,h=n(+r),u=0;u<t;u++)l[c+u]=h[s?u:t-u-1]};if(s){if(!l((function(){E(1)}))||!l((function(){new E(-1)}))||l((function(){return new E,new E(1.5),new E(NaN),E.name!=C}))){for(var j,U=(T=function(e){return c(this,T),new E(d(e))}).prototype=E.prototype,G=m(E),K=0;G.length>K;)(j=G[K++])in T||o(T,j,E[j]);U.constructor=T}g&&p(N)!==M&&g(N,M);var $=new L(new T(2)),q=N.setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||a(N,{setInt8:function(e,t){q.call(this,e,t<<24>>24)},setUint8:function(e,t){q.call(this,e,t<<24>>24)}},{unsafe:!0})}else T=function(e){c(this,T,C);var t=d(e);S(this,{bytes:v.call(new Array(t),0),byteLength:t}),r||(this.byteLength=t)},L=function(e,t,i){c(this,L,x),c(e,T,x);var n=w(e).byteLength,s=h(t);if(s<0||s>n)throw O("Wrong offset");if(s+(i=void 0===i?n-s:u(i))>n)throw O("Wrong length");S(this,{buffer:e,byteLength:i,byteOffset:s}),r||(this.buffer=e,this.byteLength=i,this.byteOffset=s)},r&&(V(T,"byteLength"),V(L,"buffer"),V(L,"byteLength"),V(L,"byteOffset")),a(L.prototype,{getInt8:function(e){return z(this,1,e)[0]<<24>>24},getUint8:function(e){return z(this,1,e)[0]},getInt16:function(e){var t=z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return B(z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return B(z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return I(z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return I(z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){H(this,1,e,A,t)},setUint8:function(e,t){H(this,1,e,A,t)},setInt16:function(e,t){H(this,2,e,P,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){H(this,2,e,P,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){H(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){H(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){H(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){H(this,8,e,W,t,arguments.length>2?arguments[2]:void 0)}});y(T,C),y(L,x),e.exports={ArrayBuffer:T,DataView:L}},1048:(e,t,i)=>{"use strict";var n=i(47908),r=i(51400),s=i(17466),o=Math.min;e.exports=[].copyWithin||function(e,t){var i=n(this),a=s(i.length),l=r(e,a),c=r(t,a),h=arguments.length>2?arguments[2]:void 0,u=o((void 0===h?a:r(h,a))-c,a-l),d=1;for(c<l&&l<c+u&&(d=-1,c+=u-1,l+=u-1);u-- >0;)c in i?i[l]=i[c]:delete i[l],l+=d,c+=d;return i}},21285:(e,t,i)=>{"use strict";var n=i(47908),r=i(51400),s=i(17466);e.exports=function(e){for(var t=n(this),i=s(t.length),o=arguments.length,a=r(o>1?arguments[1]:void 0,i),l=o>2?arguments[2]:void 0,c=void 0===l?i:r(l,i);c>a;)t[a++]=e;return t}},18533:(e,t,i)=>{"use strict";var n=i(42092).forEach,r=i(9341),s=i(29207),o=r("forEach"),a=s("forEach");e.exports=o&&a?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},48457:(e,t,i)=>{"use strict";var n=i(49974),r=i(47908),s=i(53411),o=i(97659),a=i(17466),l=i(86135),c=i(71246);e.exports=function(e){var t,i,h,u,d,f,p=r(e),g="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,v=void 0!==b,y=c(p),_=0;if(v&&(b=n(b,m>2?arguments[2]:void 0,2)),null==y||g==Array&&o(y))for(i=new g(t=a(p.length));t>_;_++)f=v?b(p[_],_):p[_],l(i,_,f);else for(d=(u=y.call(p)).next,i=new g;!(h=d.call(u)).done;_++)f=v?s(u,b,[h.value,_],!0):h.value,l(i,_,f);return i.length=_,i}},41318:(e,t,i)=>{var n=i(45656),r=i(17466),s=i(51400),o=function(e){return function(t,i,o){var a,l=n(t),c=r(l.length),h=s(o,c);if(e&&i!=i){for(;c>h;)if((a=l[h++])!=a)return!0}else for(;c>h;h++)if((e||h in l)&&l[h]===i)return e||h||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},42092:(e,t,i)=>{var n=i(49974),r=i(68361),s=i(47908),o=i(17466),a=i(65417),l=[].push,c=function(e){var t=1==e,i=2==e,c=3==e,h=4==e,u=6==e,d=5==e||u;return function(f,p,g,m){for(var b,v,y=s(f),_=r(y),w=n(p,g,3),S=o(_.length),C=0,x=m||a,k=t?x(f,S):i?x(f,0):void 0;S>C;C++)if((d||C in _)&&(v=w(b=_[C],C,y),e))if(t)k[C]=v;else if(v)switch(e){case 3:return!0;case 5:return b;case 6:return C;case 2:l.call(k,b)}else if(h)return!1;return u?-1:c||h?h:k}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},86583:(e,t,i)=>{"use strict";var n=i(45656),r=i(99958),s=i(17466),o=i(9341),a=i(29207),l=Math.min,c=[].lastIndexOf,h=!!c&&1/[1].lastIndexOf(1,-0)<0,u=o("lastIndexOf"),d=a("indexOf",{ACCESSORS:!0,1:0}),f=h||!u||!d;e.exports=f?function(e){if(h)return c.apply(this,arguments)||0;var t=n(this),i=s(t.length),o=i-1;for(arguments.length>1&&(o=l(o,r(arguments[1]))),o<0&&(o=i+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:c},81194:(e,t,i)=>{var n=i(47293),r=i(5112),s=i(7392),o=r("species");e.exports=function(e){return s>=51||!n((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:(e,t,i)=>{"use strict";var n=i(47293);e.exports=function(e,t){var i=[][e];return!!i&&n((function(){i.call(null,t||function(){throw 1},1)}))}},29207:(e,t,i)=>{var n=i(19781),r=i(47293),s=i(86656),o=Object.defineProperty,a={},l=function(e){throw e};e.exports=function(e,t){if(s(a,e))return a[e];t||(t={});var i=[][e],c=!!s(t,"ACCESSORS")&&t.ACCESSORS,h=s(t,0)?t[0]:l,u=s(t,1)?t[1]:void 0;return a[e]=!!i&&!r((function(){if(c&&!n)return!0;var e={length:-1};c?o(e,1,{enumerable:!0,get:l}):e[1]=1,i.call(e,h,u)}))}},53671:(e,t,i)=>{var n=i(13099),r=i(47908),s=i(68361),o=i(17466),a=function(e){return function(t,i,a,l){n(i);var c=r(t),h=s(c),u=o(c.length),d=e?u-1:0,f=e?-1:1;if(a<2)for(;;){if(d in h){l=h[d],d+=f;break}if(d+=f,e?d<0:u<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:u>d;d+=f)d in h&&(l=i(l,h[d],d,c));return l}};e.exports={left:a(!1),right:a(!0)}},65417:(e,t,i)=>{var n=i(70111),r=i(43157),s=i(5112)("species");e.exports=function(e,t){var i;return r(e)&&("function"!=typeof(i=e.constructor)||i!==Array&&!r(i.prototype)?n(i)&&null===(i=i[s])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===t?0:t)}},45348:(e,t,i)=>{"use strict";var n=i(40857),r=i(13099),s=i(19670),o=i(70030),a=i(68880),l=i(12248),c=i(5112),h=i(29909),u=i(35005)("Promise"),d=h.set,f=h.get,p=c("toStringTag"),g=function(e){var t=f(this).iterator,i=t.return;return void 0===i?u.resolve({done:!0,value:e}):s(i.call(t,e))},m=function(e){var t=f(this).iterator,i=t.throw;return void 0===i?u.reject(e):i.call(t,e)};e.exports=function(e,t){var i=function(e){e.next=r(e.iterator.next),e.done=!1,d(this,e)};return i.prototype=l(o(n.AsyncIterator.prototype),{next:function(t){var i=f(this);if(i.done)return u.resolve({done:!0,value:void 0});try{return u.resolve(s(e.call(i,t,u)))}catch(e){return u.reject(e)}},return:g,throw:m}),t||a(i.prototype,p,"Generator"),i}},12269:(e,t,i)=>{"use strict";var n=i(13099),r=i(19670),s=i(35005)("Promise"),o=[].push,a=function(e){var t=0==e,i=1==e,a=2==e,l=3==e;return function(e,c){r(e);var h=n(e.next),u=t?[]:void 0;return t||n(c),new s((function(n,d){var f=function(t,i){try{var n=e.return;if(void 0!==n)return s.resolve(n.call(e)).then((function(){t(i)}),(function(e){d(e)}))}catch(e){return d(e)}t(i)},p=function(e){f(d,e)},g=function(){try{s.resolve(r(h.call(e))).then((function(e){try{if(r(e).done)n(t?u:!l&&(a||void 0));else{var h=e.value;t?(o.call(u,h),g()):s.resolve(c(h)).then((function(e){i?g():a?e?g():f(n,!1):e?f(n,l||h):g()}),p)}}catch(e){p(e)}}),p)}catch(e){p(e)}};g()}))}};e.exports={toArray:a(0),forEach:a(1),every:a(2),some:a(3),find:a(4)}},66462:(e,t,i)=>{var n,r,s=i(17854),o=i(5465),a=i(79518),l=i(86656),c=i(68880),h=i(5112),u=i(31913),d=h("asyncIterator"),f=s.AsyncIterator,p=o.AsyncIteratorPrototype;if(!u)if(p)n=p;else if("function"==typeof f)n=f.prototype;else if(o.USE_FUNCTION_CONSTRUCTOR||s.USE_FUNCTION_CONSTRUCTOR)try{r=a(a(a(Function("return async function*(){}()")()))),a(r)===Object.prototype&&(n=r)}catch(e){}n||(n={}),l(n,d)||c(n,d,(function(){return this})),e.exports=n},53411:(e,t,i)=>{var n=i(19670),r=i(99212);e.exports=function(e,t,i,s){try{return s?t(n(i)[0],i[1]):t(i)}catch(t){throw r(e),t}}},17072:(e,t,i)=>{var n=i(5112)("iterator"),r=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){r=!0}};o[n]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var s={};s[n]=function(){return{next:function(){return{done:i=!0}}}},e(s)}catch(e){}return i}},84326:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},70648:(e,t,i)=>{var n=i(51694),r=i(84326),s=i(5112)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=n?r:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?i:o?r(t):"Object"==(n=r(t))&&"function"==typeof t.callee?"Arguments":n}},31501:(e,t,i)=>{"use strict";var n=i(19670),r=i(13099);e.exports=function(){for(var e=n(this),t=r(e.add),i=0,s=arguments.length;i<s;i++)t.call(e,arguments[i]);return e}},34092:(e,t,i)=>{"use strict";var n=i(19670),r=i(13099);e.exports=function(){for(var e,t=n(this),i=r(t.delete),s=!0,o=0,a=arguments.length;o<a;o++)e=i.call(t,arguments[o]),s=s&&e;return!!s}},27296:(e,t,i)=>{"use strict";var n=i(13099),r=i(49974),s=i(20408);e.exports=function(e){var t,i,o,a,l=arguments.length,c=l>1?arguments[1]:void 0;return n(this),(t=void 0!==c)&&n(c),null==e?new this:(i=[],t?(o=0,a=r(c,l>2?arguments[2]:void 0,2),s(e,(function(e){i.push(a(e,o++))}))):s(e,i.push,{that:i}),new this(i))}},82044:e=>{"use strict";e.exports=function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}},95631:(e,t,i)=>{"use strict";var n=i(3070).f,r=i(70030),s=i(12248),o=i(49974),a=i(25787),l=i(20408),c=i(70654),h=i(96340),u=i(19781),d=i(62423).fastKey,f=i(29909),p=f.set,g=f.getterFor;e.exports={getConstructor:function(e,t,i,c){var h=e((function(e,n){a(e,h,t),p(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),u||(e.size=0),null!=n&&l(n,e[c],{that:e,AS_ENTRIES:i})})),f=g(t),m=function(e,t,i){var n,r,s=f(e),o=b(e,t);return o?o.value=i:(s.last=o={index:r=d(t,!0),key:t,value:i,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=o),n&&(n.next=o),u?s.size++:e.size++,"F"!==r&&(s.index[r]=o)),e},b=function(e,t){var i,n=f(e),r=d(t);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==t)return i};return s(h.prototype,{clear:function(){for(var e=f(this),t=e.index,i=e.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete t[i.index],i=i.next;e.first=e.last=void 0,u?e.size=0:this.size=0},delete:function(e){var t=this,i=f(t),n=b(t,e);if(n){var r=n.next,s=n.previous;delete i.index[n.index],n.removed=!0,s&&(s.next=r),r&&(r.previous=s),i.first==n&&(i.first=r),i.last==n&&(i.last=s),u?i.size--:t.size--}return!!n},forEach:function(e){for(var t,i=f(this),n=o(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:i.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!b(this,e)}}),s(h.prototype,i?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),u&&n(h.prototype,"size",{get:function(){return f(this).size}}),h},setStrong:function(e,t,i){var n=t+" Iterator",r=g(t),s=g(n);c(e,t,(function(e,t){p(this,{type:n,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=s(this),t=e.kind,i=e.last;i&&i.removed;)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?"keys"==t?{value:i.key,done:!1}:"values"==t?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),h(t)}}},29320:(e,t,i)=>{"use strict";var n=i(12248),r=i(62423).getWeakData,s=i(19670),o=i(70111),a=i(25787),l=i(20408),c=i(42092),h=i(86656),u=i(29909),d=u.set,f=u.getterFor,p=c.find,g=c.findIndex,m=0,b=function(e){return e.frozen||(e.frozen=new v)},v=function(){this.entries=[]},y=function(e,t){return p(e.entries,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var i=y(this,e);i?i[1]=t:this.entries.push([e,t])},delete:function(e){var t=g(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,i,c){var u=e((function(e,n){a(e,u,t),d(e,{type:t,id:m++,frozen:void 0}),null!=n&&l(n,e[c],{that:e,AS_ENTRIES:i})})),p=f(t),g=function(e,t,i){var n=p(e),o=r(s(t),!0);return!0===o?b(n).set(t,i):o[n.id]=i,e};return n(u.prototype,{delete:function(e){var t=p(this);if(!o(e))return!1;var i=r(e);return!0===i?b(t).delete(e):i&&h(i,t.id)&&delete i[t.id]},has:function(e){var t=p(this);if(!o(e))return!1;var i=r(e);return!0===i?b(t).has(e):i&&h(i,t.id)}}),n(u.prototype,i?{get:function(e){var t=p(this);if(o(e)){var i=r(e);return!0===i?b(t).get(e):i?i[t.id]:void 0}},set:function(e,t){return g(this,e,t)}}:{add:function(e){return g(this,e,!0)}}),u}}},77710:(e,t,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(54705),o=i(31320),a=i(62423),l=i(20408),c=i(25787),h=i(70111),u=i(47293),d=i(17072),f=i(58003),p=i(79587);e.exports=function(e,t,i){var g=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),b=g?"set":"add",v=r[e],y=v&&v.prototype,_=v,w={},S=function(e){var t=y[e];o(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!h(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!h(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!h(e))&&t.call(this,0===e?0:e)}:function(e,i){return t.call(this,0===e?0:e,i),this})};if(s(e,"function"!=typeof v||!(m||y.forEach&&!u((function(){(new v).entries().next()})))))_=i.getConstructor(t,e,g,b),a.REQUIRED=!0;else if(s(e,!0)){var C=new _,x=C[b](m?{}:-0,1)!=C,k=u((function(){C.has(1)})),E=d((function(e){new v(e)})),T=!m&&u((function(){for(var e=new v,t=5;t--;)e[b](t,t);return!e.has(-0)}));E||((_=t((function(t,i){c(t,_,e);var n=p(new v,t,_);return null!=i&&l(i,n[b],{that:n,AS_ENTRIES:g}),n}))).prototype=y,y.constructor=_),(k||T)&&(S("delete"),S("has"),g&&S("get")),(T||x)&&S(b),m&&y.clear&&delete y.clear}return w[e]=_,n({global:!0,forced:_!=v},w),f(_,e),m||i.setStrong(_,e,g),_}},10313:(e,t,i)=>{var n=i(51532),r=i(4129),s=i(70030),o=i(70111),a=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=s(null)};a.prototype.get=function(e,t){return this[e]||(this[e]=t())},a.prototype.next=function(e,t,i){var s=i?this.objectsByIndex[e]||(this.objectsByIndex[e]=new r):this.primitives||(this.primitives=new n),o=s.get(t);return o||s.set(t,o=new a),o};var l=new a;e.exports=function(){var e,t,i=l,n=arguments.length;for(e=0;e<n;e++)o(t=arguments[e])&&(i=i.next(e,t,!0));if(this===Object&&i===l)throw TypeError("Composite keys must contain a non-primitive component");for(e=0;e<n;e++)o(t=arguments[e])||(i=i.next(e,t,!1));return i}},99920:(e,t,i)=>{var n=i(86656),r=i(53887),s=i(31236),o=i(3070);e.exports=function(e,t){for(var i=r(t),a=o.f,l=s.f,c=0;c<i.length;c++){var h=i[c];n(e,h)||a(e,h,l(t,h))}}},84964:(e,t,i)=>{var n=i(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},49920:(e,t,i)=>{var n=i(47293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},14230:(e,t,i)=>{var n=i(84488),r=/"/g;e.exports=function(e,t,i,s){var o=String(n(e)),a="<"+t;return""!==i&&(a+=" "+i+'="'+String(s).replace(r,"&quot;")+'"'),a+">"+o+"</"+t+">"}},24994:(e,t,i)=>{"use strict";var n=i(13383).IteratorPrototype,r=i(70030),s=i(79114),o=i(58003),a=i(97497),l=function(){return this};e.exports=function(e,t,i){var c=t+" Iterator";return e.prototype=r(n,{next:s(1,i)}),o(e,c,!1,!0),a[c]=l,e}},68880:(e,t,i)=>{var n=i(19781),r=i(3070),s=i(79114);e.exports=n?function(e,t,i){return r.f(e,t,s(1,i))}:function(e,t,i){return e[t]=i,e}},79114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},86135:(e,t,i)=>{"use strict";var n=i(57593),r=i(3070),s=i(79114);e.exports=function(e,t,i){var o=n(t);o in e?r.f(e,o,s(0,i)):e[o]=i}},85573:(e,t,i)=>{"use strict";var n=i(47293),r=i(76650).start,s=Math.abs,o=Date.prototype,a=o.getTime,l=o.toISOString;e.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-50000000000001))}))||!n((function(){l.call(new Date(NaN))}))?function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),i=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+r(s(t),n?6:4,0)+"-"+r(e.getUTCMonth()+1,2,0)+"-"+r(e.getUTCDate(),2,0)+"T"+r(e.getUTCHours(),2,0)+":"+r(e.getUTCMinutes(),2,0)+":"+r(e.getUTCSeconds(),2,0)+"."+r(i,3,0)+"Z"}:l},38709:(e,t,i)=>{"use strict";var n=i(19670),r=i(57593);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return r(n(this),"number"!==e)}},70654:(e,t,i)=>{"use strict";var n=i(82109),r=i(24994),s=i(79518),o=i(27674),a=i(58003),l=i(68880),c=i(31320),h=i(5112),u=i(31913),d=i(97497),f=i(13383),p=f.IteratorPrototype,g=f.BUGGY_SAFARI_ITERATORS,m=h("iterator"),b="keys",v="values",y="entries",_=function(){return this};e.exports=function(e,t,i,h,f,w,S){r(i,t,h);var C,x,k,E=function(e){if(e===f&&O)return O;if(!g&&e in N)return N[e];switch(e){case b:case v:case y:return function(){return new i(this,e)}}return function(){return new i(this)}},T=t+" Iterator",L=!1,N=e.prototype,M=N[m]||N["@@iterator"]||f&&N[f],O=!g&&M||E(f),D="Array"==t&&N.entries||M;if(D&&(C=s(D.call(new e)),p!==Object.prototype&&C.next&&(u||s(C)===p||(o?o(C,p):"function"!=typeof C[m]&&l(C,m,_)),a(C,T,!0,!0),u&&(d[T]=_))),f==v&&M&&M.name!==v&&(L=!0,O=function(){return M.call(this)}),u&&!S||N[m]===O||l(N,m,O),d[t]=O,f)if(x={values:E(v),keys:w?O:E(b),entries:E(y)},S)for(k in x)(g||L||!(k in N))&&c(N,k,x[k]);else n({target:t,proto:!0,forced:g||L},x);return x}},97235:(e,t,i)=>{var n=i(40857),r=i(86656),s=i(6061),o=i(3070).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});r(t,e)||o(t,e,{value:s.f(e)})}},19781:(e,t,i)=>{var n=i(47293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},80317:(e,t,i)=>{var n=i(17854),r=i(70111),s=n.document,o=r(s)&&r(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},48324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},6833:(e,t,i)=>{var n=i(88113);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},35268:(e,t,i)=>{var n=i(84326),r=i(17854);e.exports="process"==n(r.process)},88113:(e,t,i)=>{var n=i(35005);e.exports=n("navigator","userAgent")||""},7392:(e,t,i)=>{var n,r,s=i(17854),o=i(88113),a=s.process,l=a&&a.versions,c=l&&l.v8;c?r=(n=c.split("."))[0]+n[1]:o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(r=n[1]),e.exports=r&&+r},80748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},82109:(e,t,i)=>{var n=i(17854),r=i(31236).f,s=i(68880),o=i(31320),a=i(83505),l=i(99920),c=i(54705);e.exports=function(e,t){var i,h,u,d,f,p=e.target,g=e.global,m=e.stat;if(i=g?n:m?n[p]||a(p,{}):(n[p]||{}).prototype)for(h in t){if(d=t[h],u=e.noTargetGet?(f=r(i,h))&&f.value:i[h],!c(g?h:p+(m?".":"#")+h,e.forced)&&void 0!==u){if(typeof d==typeof u)continue;l(d,u)}(e.sham||u&&u.sham)&&s(d,"sham",!0),o(i,h,d,e)}}},47293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},27007:(e,t,i)=>{"use strict";i(74916);var n=i(31320),r=i(47293),s=i(5112),o=i(22261),a=i(68880),l=s("species"),c=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),h="$0"==="a".replace(/./,"$0"),u=s("replace"),d=!!/./[u]&&""===/./[u]("a","$0"),f=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));e.exports=function(e,t,i,u){var p=s(e),g=!r((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=g&&!r((function(){var t=!1,i=/a/;return"split"===e&&((i={}).constructor={},i.constructor[l]=function(){return i},i.flags="",i[p]=/./[p]),i.exec=function(){return t=!0,null},i[p](""),!t}));if(!g||!m||"replace"===e&&(!c||!h||d)||"split"===e&&!f){var b=/./[p],v=i(p,""[e],(function(e,t,i,n,r){return t.exec===o?g&&!r?{done:!0,value:b.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=v[0],_=v[1];n(String.prototype,e,y),n(RegExp.prototype,p,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}u&&a(RegExp.prototype[p],"sham",!0)}},6790:(e,t,i)=>{"use strict";var n=i(43157),r=i(17466),s=i(49974),o=function(e,t,i,a,l,c,h,u){for(var d,f=l,p=0,g=!!h&&s(h,u,3);p<a;){if(p in i){if(d=g?g(i[p],p,t):i[p],c>0&&n(d))f=o(e,t,d,r(d.length),f,c-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=d}f++}p++}return f};e.exports=o},76677:(e,t,i)=>{var n=i(47293);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},49974:(e,t,i)=>{var n=i(13099);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},27065:(e,t,i)=>{"use strict";var n=i(13099),r=i(70111),s=[].slice,o={},a=function(e,t,i){if(!(t in o)){for(var n=[],r=0;r<t;r++)n[r]="a["+r+"]";o[t]=Function("C,a","return new C("+n.join(",")+")")}return o[t](e,i)};e.exports=Function.bind||function(e){var t=n(this),i=s.call(arguments,1),o=function(){var n=i.concat(s.call(arguments));return this instanceof o?a(t,n.length,n):t.apply(e,n)};return r(t.prototype)&&(o.prototype=t.prototype),o}},28523:(e,t,i)=>{var n=i(71246),r=i(5112)("asyncIterator");e.exports=function(e){var t=e[r];return void 0===t?n(e):t}},35005:(e,t,i)=>{var n=i(40857),r=i(17854),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(n[e])||s(r[e]):n[e]&&n[e][t]||r[e]&&r[e][t]}},71246:(e,t,i)=>{var n=i(70648),r=i(97497),s=i(5112)("iterator");e.exports=function(e){if(null!=e)return e[s]||e["@@iterator"]||r[n(e)]}},18554:(e,t,i)=>{var n=i(19670),r=i(71246);e.exports=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},54647:(e,t,i)=>{var n=i(31913),r=i(18554);e.exports=n?r:function(e){return Map.prototype.entries.call(e)}},96767:(e,t,i)=>{var n=i(31913),r=i(18554);e.exports=n?r:function(e){return Set.prototype.values.call(e)}},17854:e=>{var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},86656:e=>{var t={}.hasOwnProperty;e.exports=function(e,i){return t.call(e,i)}},3501:e=>{e.exports={}},842:(e,t,i)=>{var n=i(17854);e.exports=function(e,t){var i=n.console;i&&i.error&&(1===arguments.length?i.error(e):i.error(e,t))}},60490:(e,t,i)=>{var n=i(35005);e.exports=n("document","documentElement")},64664:(e,t,i)=>{var n=i(19781),r=i(47293),s=i(80317);e.exports=!n&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},11179:e=>{var t=1/0,i=Math.abs,n=Math.pow,r=Math.floor,s=Math.log,o=Math.LN2;e.exports={pack:function(e,a,l){var c,h,u,d=new Array(l),f=8*l-a-1,p=(1<<f)-1,g=p>>1,m=23===a?n(2,-24)-n(2,-77):0,b=e<0||0===e&&1/e<0?1:0,v=0;for((e=i(e))!=e||e===t?(h=e!=e?1:0,c=p):(c=r(s(e)/o),e*(u=n(2,-c))<1&&(c--,u*=2),(e+=c+g>=1?m/u:m*n(2,1-g))*u>=2&&(c++,u/=2),c+g>=p?(h=0,c=p):c+g>=1?(h=(e*u-1)*n(2,a),c+=g):(h=e*n(2,g-1)*n(2,a),c=0));a>=8;d[v++]=255&h,h/=256,a-=8);for(c=c<<a|h,f+=a;f>0;d[v++]=255&c,c/=256,f-=8);return d[--v]|=128*b,d},unpack:function(e,i){var r,s=e.length,o=8*s-i-1,a=(1<<o)-1,l=a>>1,c=o-7,h=s-1,u=e[h--],d=127&u;for(u>>=7;c>0;d=256*d+e[h],h--,c-=8);for(r=d&(1<<-c)-1,d>>=-c,c+=i;c>0;r=256*r+e[h],h--,c-=8);if(0===d)d=1-l;else{if(d===a)return r?NaN:u?-1/0:t;r+=n(2,i),d-=l}return(u?-1:1)*r*n(2,d-i)}}},68361:(e,t,i)=>{var n=i(47293),r=i(84326),s="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?s.call(e,""):Object(e)}:Object},79587:(e,t,i)=>{var n=i(70111),r=i(27674);e.exports=function(e,t,i){var s,o;return r&&"function"==typeof(s=t.constructor)&&s!==i&&n(o=s.prototype)&&o!==i.prototype&&r(e,o),e}},42788:(e,t,i)=>{var n=i(5465),r=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return r.call(e)}),e.exports=n.inspectSource},62423:(e,t,i)=>{var n=i(3501),r=i(70111),s=i(86656),o=i(3070).f,a=i(69711),l=i(76677),c=a("meta"),h=0,u=Object.isExtensible||function(){return!0},d=function(e){o(e,c,{value:{objectID:"O"+ ++h,weakData:{}}})},f=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,c)){if(!u(e))return"F";if(!t)return"E";d(e)}return e[c].objectID},getWeakData:function(e,t){if(!s(e,c)){if(!u(e))return!0;if(!t)return!1;d(e)}return e[c].weakData},onFreeze:function(e){return l&&f.REQUIRED&&u(e)&&!s(e,c)&&d(e),e}};n[c]=!0},29909:(e,t,i)=>{var n,r,s,o=i(68536),a=i(17854),l=i(70111),c=i(68880),h=i(86656),u=i(5465),d=i(6200),f=i(3501),p=a.WeakMap;if(o){var g=u.state||(u.state=new p),m=g.get,b=g.has,v=g.set;n=function(e,t){return t.facade=e,v.call(g,e,t),t},r=function(e){return m.call(g,e)||{}},s=function(e){return b.call(g,e)}}else{var y=d("state");f[y]=!0,n=function(e,t){return t.facade=e,c(e,y,t),t},r=function(e){return h(e,y)?e[y]:{}},s=function(e){return h(e,y)}}e.exports={set:n,get:r,has:s,enforce:function(e){return s(e)?r(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!l(t)||(i=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}}}},97659:(e,t,i)=>{var n=i(5112),r=i(97497),s=n("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[s]===e)}},43157:(e,t,i)=>{var n=i(84326);e.exports=Array.isArray||function(e){return"Array"==n(e)}},54705:(e,t,i)=>{var n=i(47293),r=/#|\.prototype\./,s=function(e,t){var i=a[o(e)];return i==c||i!=l&&("function"==typeof t?n(t):!!t)},o=s.normalize=function(e){return String(e).replace(r,".").toLowerCase()},a=s.data={},l=s.NATIVE="N",c=s.POLYFILL="P";e.exports=s},18730:(e,t,i)=>{var n=i(70111),r=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&r(e)===e}},70111:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},31913:e=>{e.exports=!1},47850:(e,t,i)=>{var n=i(70111),r=i(84326),s=i(5112)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},20408:(e,t,i)=>{var n=i(19670),r=i(97659),s=i(17466),o=i(49974),a=i(71246),l=i(99212),c=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,i){var h,u,d,f,p,g,m,b=i&&i.that,v=!(!i||!i.AS_ENTRIES),y=!(!i||!i.IS_ITERATOR),_=!(!i||!i.INTERRUPTED),w=o(t,b,1+v+_),S=function(e){return h&&l(h),new c(!0,e)},C=function(e){return v?(n(e),_?w(e[0],e[1],S):w(e[0],e[1])):_?w(e,S):w(e)};if(y)h=e;else{if("function"!=typeof(u=a(e)))throw TypeError("Target is not iterable");if(r(u)){for(d=0,f=s(e.length);f>d;d++)if((p=C(e[d]))&&p instanceof c)return p;return new c(!1)}h=u.call(e)}for(g=h.next;!(m=g.call(h)).done;){try{p=C(m.value)}catch(e){throw l(h),e}if("object"==typeof p&&p&&p instanceof c)return p}return new c(!1)}},99212:(e,t,i)=>{var n=i(19670);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},54956:(e,t,i)=>{"use strict";var n=i(40857),r=i(13099),s=i(19670),o=i(70030),a=i(68880),l=i(12248),c=i(5112),h=i(29909),u=h.set,d=h.get,f=c("toStringTag"),p=function(e){var t=d(this).iterator,i=t.return;return void 0===i?{done:!0,value:e}:s(i.call(t,e))},g=function(e){var t=d(this).iterator,i=t.throw;if(void 0===i)throw e;return i.call(t,e)};e.exports=function(e,t){var i=function(e){e.next=r(e.iterator.next),e.done=!1,u(this,e)};return i.prototype=l(o(n.Iterator.prototype),{next:function(){var t=d(this),i=t.done?void 0:e.apply(t,arguments);return{done:t.done,value:i}},return:p,throw:g}),t||a(i.prototype,f,"Generator"),i}},13383:(e,t,i)=>{"use strict";var n,r,s,o=i(79518),a=i(68880),l=i(86656),c=i(5112),h=i(31913),u=c("iterator"),d=!1;[].keys&&("next"in(s=[].keys())?(r=o(o(s)))!==Object.prototype&&(n=r):d=!0),null==n&&(n={}),h||l(n,u)||a(n,u,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},97497:e=>{e.exports={}},37502:(e,t,i)=>{"use strict";var n=i(19670);e.exports=function(e,t){var i=n(this),r=i.has(e)&&"update"in t?t.update(i.get(e),e,i):t.insert(e,i);return i.set(e,r),r}},8154:(e,t,i)=>{"use strict";var n=i(19670);e.exports=function(e,t){var i,r=n(this),s=arguments.length>2?arguments[2]:void 0;if("function"!=typeof t&&"function"!=typeof s)throw TypeError("At least one callback required");return r.has(e)?(i=r.get(e),"function"==typeof t&&(i=t(i),r.set(e,i))):"function"==typeof s&&(i=s(),r.set(e,i)),i}},66736:e=>{var t=Math.expm1,i=Math.exp;e.exports=!t||t(10)>22025.465794806718||t(10)<22025.465794806718||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:i(e)-1}:t},26130:(e,t,i)=>{var n=i(64310),r=Math.abs,s=Math.pow,o=s(2,-52),a=s(2,-23),l=s(2,127)*(2-a),c=s(2,-126);e.exports=Math.fround||function(e){var t,i,s=r(e),h=n(e);return s<c?h*(s/c/a+1/o-1/o)*c*a:(i=(t=(1+a/o)*s)-(t-s))>l||i!=i?h*(1/0):h*i}},26513:e=>{var t=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:t(1+e)}},47103:e=>{e.exports=Math.scale||function(e,t,i,n,r){return 0===arguments.length||e!=e||t!=t||i!=i||n!=n||r!=r?NaN:e===1/0||e===-1/0?e:(e-t)*(r-n)/(i-t)+n}},64310:e=>{e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},95948:(e,t,i)=>{var n,r,s,o,a,l,c,h,u=i(17854),d=i(31236).f,f=i(20261).set,p=i(6833),g=i(35268),m=u.MutationObserver||u.WebKitMutationObserver,b=u.document,v=u.process,y=u.Promise,_=d(u,"queueMicrotask"),w=_&&_.value;w||(n=function(){var e,t;for(g&&(e=v.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?o():s=void 0,e}}s=void 0,e&&e.enter()},!p&&!g&&m&&b?(a=!0,l=b.createTextNode(""),new m(n).observe(l,{characterData:!0}),o=function(){l.data=a=!a}):y&&y.resolve?(c=y.resolve(void 0),h=c.then,o=function(){h.call(c,n)}):o=g?function(){v.nextTick(n)}:function(){f.call(u,n)}),e.exports=w||function(e){var t={fn:e,next:void 0};s&&(s.next=t),r||(r=t,o()),s=t}},13366:(e,t,i)=>{var n=i(17854);e.exports=n.Promise},30133:(e,t,i)=>{var n=i(47293);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},590:(e,t,i)=>{var n=i(47293),r=i(5112),s=i(31913),o=r("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),i+=n+e})),s&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}))},68536:(e,t,i)=>{var n=i(17854),r=i(42788),s=n.WeakMap;e.exports="function"==typeof s&&/native code/.test(r(s))},78523:(e,t,i)=>{"use strict";var n=i(13099),r=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=n(t),this.reject=n(i)};e.exports.f=function(e){return new r(e)}},3929:(e,t,i)=>{var n=i(47850);e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},77023:(e,t,i)=>{var n=i(17854).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&n(e)}},2814:(e,t,i)=>{var n=i(17854),r=i(53111).trim,s=i(81361),o=n.parseFloat,a=1/o(s+"-0")!=-1/0;e.exports=a?function(e){var t=r(String(e)),i=o(t);return 0===i&&"-"==t.charAt(0)?-0:i}:o},83009:(e,t,i)=>{var n=i(17854),r=i(53111).trim,s=i(81361),o=n.parseInt,a=/^[+-]?0[Xx]/,l=8!==o(s+"08")||22!==o(s+"0x16");e.exports=l?function(e,t){var i=r(String(e));return o(i,t>>>0||(a.test(i)?16:10))}:o},21574:(e,t,i)=>{"use strict";var n=i(19781),r=i(47293),s=i(81956),o=i(25181),a=i(55296),l=i(47908),c=i(68361),h=Object.assign,u=Object.defineProperty;e.exports=!h||r((function(){if(n&&1!==h({b:1},h(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),r="abcdefghijklmnopqrst";return e[i]=7,r.split("").forEach((function(e){t[e]=e})),7!=h({},e)[i]||s(h({},t)).join("")!=r}))?function(e,t){for(var i=l(e),r=arguments.length,h=1,u=o.f,d=a.f;r>h;)for(var f,p=c(arguments[h++]),g=u?s(p).concat(u(p)):s(p),m=g.length,b=0;m>b;)f=g[b++],n&&!d.call(p,f)||(i[f]=p[f]);return i}:h},70030:(e,t,i)=>{var n,r=i(19670),s=i(36048),o=i(80748),a=i(3501),l=i(60490),c=i(80317),h=i(6200),u=h("IE_PROTO"),d=function(){},f=function(e){return"<script>"+e+"</"+"script>"},p=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=n?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var i=o.length;i--;)delete p.prototype[o[i]];return p()};a[u]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(d.prototype=r(e),i=new d,d.prototype=null,i[u]=e):i=p(),void 0===t?i:s(i,t)}},36048:(e,t,i)=>{var n=i(19781),r=i(3070),s=i(19670),o=i(81956);e.exports=n?Object.defineProperties:function(e,t){s(e);for(var i,n=o(t),a=n.length,l=0;a>l;)r.f(e,i=n[l++],t[i]);return e}},3070:(e,t,i)=>{var n=i(19781),r=i(64664),s=i(19670),o=i(57593),a=Object.defineProperty;t.f=n?a:function(e,t,i){if(s(e),t=o(t,!0),s(i),r)try{return a(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},31236:(e,t,i)=>{var n=i(19781),r=i(55296),s=i(79114),o=i(45656),a=i(57593),l=i(86656),c=i(64664),h=Object.getOwnPropertyDescriptor;t.f=n?h:function(e,t){if(e=o(e),t=a(t,!0),c)try{return h(e,t)}catch(e){}if(l(e,t))return s(!r.f.call(e,t),e[t])}},1156:(e,t,i)=>{var n=i(45656),r=i(8006).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?function(e){try{return r(e)}catch(e){return o.slice()}}(e):r(n(e))}},8006:(e,t,i)=>{var n=i(16324),r=i(80748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},25181:(e,t)=>{t.f=Object.getOwnPropertySymbols},79518:(e,t,i)=>{var n=i(86656),r=i(47908),s=i(6200),o=i(49920),a=s("IE_PROTO"),l=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=r(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},60996:(e,t,i)=>{"use strict";var n=i(29909),r=i(24994),s=i(86656),o=i(81956),a=i(47908),l="Object Iterator",c=n.set,h=n.getterFor(l);e.exports=r((function(e,t){var i=a(e);c(this,{type:l,mode:t,object:i,keys:o(i),index:0})}),"Object",(function(){for(var e=h(this),t=e.keys;;){if(null===t||e.index>=t.length)return e.object=e.keys=null,{value:void 0,done:!0};var i=t[e.index++],n=e.object;if(s(n,i)){switch(e.mode){case"keys":return{value:i,done:!1};case"values":return{value:n[i],done:!1}}return{value:[i,n[i]],done:!1}}}}))},16324:(e,t,i)=>{var n=i(86656),r=i(45656),s=i(41318).indexOf,o=i(3501);e.exports=function(e,t){var i,a=r(e),l=0,c=[];for(i in a)!n(o,i)&&n(a,i)&&c.push(i);for(;t.length>l;)n(a,i=t[l++])&&(~s(c,i)||c.push(i));return c}},81956:(e,t,i)=>{var n=i(16324),r=i(80748);e.exports=Object.keys||function(e){return n(e,r)}},55296:(e,t)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!i.call({1:2},1);t.f=r?function(e){var t=n(this,e);return!!t&&t.enumerable}:i},69026:(e,t,i)=>{"use strict";var n=i(31913),r=i(17854),s=i(47293);e.exports=n||!s((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete r[e]}))},27674:(e,t,i)=>{var n=i(19670),r=i(96077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),t=i instanceof Array}catch(e){}return function(i,s){return n(i),r(s),t?e.call(i,s):i.__proto__=s,i}}():void 0)},44699:(e,t,i)=>{var n=i(19781),r=i(81956),s=i(45656),o=i(55296).f,a=function(e){return function(t){for(var i,a=s(t),l=r(a),c=l.length,h=0,u=[];c>h;)i=l[h++],n&&!o.call(a,i)||u.push(e?[i,a[i]]:a[i]);return u}};e.exports={entries:a(!0),values:a(!1)}},90288:(e,t,i)=>{"use strict";var n=i(51694),r=i(70648);e.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},53887:(e,t,i)=>{var n=i(35005),r=i(8006),s=i(25181),o=i(19670);e.exports=n("Reflect","ownKeys")||function(e){var t=r.f(o(e)),i=s.f;return i?t.concat(i(e)):t}},40857:(e,t,i)=>{var n=i(17854);e.exports=n},12534:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},69478:(e,t,i)=>{var n=i(19670),r=i(70111),s=i(78523);e.exports=function(e,t){if(n(e),r(t)&&t.constructor===e)return t;var i=s.f(e);return(0,i.resolve)(t),i.promise}},12248:(e,t,i)=>{var n=i(31320);e.exports=function(e,t,i){for(var r in t)n(e,r,t[r],i);return e}},31320:(e,t,i)=>{var n=i(17854),r=i(68880),s=i(86656),o=i(83505),a=i(42788),l=i(29909),c=l.get,h=l.enforce,u=String(String).split("String");(e.exports=function(e,t,i,a){var l,c=!!a&&!!a.unsafe,d=!!a&&!!a.enumerable,f=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof t||s(i,"name")||r(i,"name",t),(l=h(i)).source||(l.source=u.join("string"==typeof t?t:""))),e!==n?(c?!f&&e[t]&&(d=!0):delete e[t],d?e[t]=i:r(e,t,i)):d?e[t]=i:o(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},38845:(e,t,i)=>{var n=i(51532),r=i(4129),s=i(72309)("metadata"),o=s.store||(s.store=new r),a=function(e,t,i){var r=o.get(e);if(!r){if(!i)return;o.set(e,r=new n)}var s=r.get(t);if(!s){if(!i)return;r.set(t,s=new n)}return s};e.exports={store:o,getMap:a,has:function(e,t,i){var n=a(t,i,!1);return void 0!==n&&n.has(e)},get:function(e,t,i){var n=a(t,i,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,i,n){a(i,n,!0).set(e,t)},keys:function(e,t){var i=a(e,t,!1),n=[];return i&&i.forEach((function(e,t){n.push(t)})),n},toKey:function(e){return void 0===e||"symbol"==typeof e?e:String(e)}}},97651:(e,t,i)=>{var n=i(84326),r=i(22261);e.exports=function(e,t){var i=e.exec;if("function"==typeof i){var s=i.call(e,t);if("object"!=typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},22261:(e,t,i)=>{"use strict";var n,r,s=i(67066),o=i(52999),a=RegExp.prototype.exec,l=String.prototype.replace,c=a,h=(n=/a/,r=/b*/g,a.call(n,"a"),a.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),u=o.UNSUPPORTED_Y||o.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(h||d||u)&&(c=function(e){var t,i,n,r,o=this,c=u&&o.sticky,f=s.call(o),p=o.source,g=0,m=e;return c&&(-1===(f=f.replace("y","")).indexOf("g")&&(f+="g"),m=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,g++),i=new RegExp("^(?:"+p+")",f)),d&&(i=new RegExp("^"+p+"$(?!\\s)",f)),h&&(t=o.lastIndex),n=a.call(c?i:o,m),c?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=o.lastIndex,o.lastIndex+=n[0].length):o.lastIndex=0:h&&n&&(o.lastIndex=o.global?n.index+n[0].length:t),d&&n&&n.length>1&&l.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n}),e.exports=c},67066:(e,t,i)=>{"use strict";var n=i(19670);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},52999:(e,t,i)=>{"use strict";var n=i(47293);function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},84488:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},46465:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},81150:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},83505:(e,t,i)=>{var n=i(17854),r=i(68880);e.exports=function(e,t){try{r(n,e,t)}catch(i){n[e]=t}return t}},96340:(e,t,i)=>{"use strict";var n=i(35005),r=i(3070),s=i(5112),o=i(19781),a=s("species");e.exports=function(e){var t=n(e),i=r.f;o&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},58003:(e,t,i)=>{var n=i(3070).f,r=i(86656),s=i(5112)("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,s)&&n(e,s,{configurable:!0,value:t})}},6200:(e,t,i)=>{var n=i(72309),r=i(69711),s=n("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},5465:(e,t,i)=>{var n=i(17854),r=i(83505),s="__core-js_shared__",o=n[s]||r(s,{});e.exports=o},72309:(e,t,i)=>{var n=i(31913),r=i(5465);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.7.0",mode:n?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},36707:(e,t,i)=>{var n=i(19670),r=i(13099),s=i(5112)("species");e.exports=function(e,t){var i,o=n(e).constructor;return void 0===o||null==(i=n(o)[s])?t:r(i)}},43429:(e,t,i)=>{var n=i(47293);e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},28710:(e,t,i)=>{var n=i(99958),r=i(84488),s=function(e){return function(t,i){var s,o,a=String(r(t)),l=n(i),c=a.length;return l<0||l>=c?e?"":void 0:(s=a.charCodeAt(l))<55296||s>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?e?a.charAt(l):s:e?a.slice(l,l+2):o-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},54986:(e,t,i)=>{var n=i(88113);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},76650:(e,t,i)=>{var n=i(17466),r=i(38415),s=i(84488),o=Math.ceil,a=function(e){return function(t,i,a){var l,c,h=String(s(t)),u=h.length,d=void 0===a?" ":String(a),f=n(i);return f<=u||""==d?h:(l=f-u,(c=r.call(d,o(l/d.length))).length>l&&(c=c.slice(0,l)),e?h+c:c+h)}};e.exports={start:a(!1),end:a(!0)}},33197:e=>{"use strict";var t=2147483647,i=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,r="Overflow: input needs wider integers to process",s=Math.floor,o=String.fromCharCode,a=function(e){return e+22+75*(e<26)},l=function(e,t,i){var n=0;for(e=i?s(e/700):e>>1,e+=s(e/t);e>455;n+=36)e=s(e/35);return s(n+36*e/(e+38))},c=function(e){var i,n,c=[],h=(e=function(e){for(var t=[],i=0,n=e.length;i<n;){var r=e.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var s=e.charCodeAt(i++);56320==(64512&s)?t.push(((1023&r)<<10)+(1023&s)+65536):(t.push(r),i--)}else t.push(r)}return t}(e)).length,u=128,d=0,f=72;for(i=0;i<e.length;i++)(n=e[i])<128&&c.push(o(n));var p=c.length,g=p;for(p&&c.push("-");g<h;){var m=t;for(i=0;i<e.length;i++)(n=e[i])>=u&&n<m&&(m=n);var b=g+1;if(m-u>s((t-d)/b))throw RangeError(r);for(d+=(m-u)*b,u=m,i=0;i<e.length;i++){if((n=e[i])<u&&++d>t)throw RangeError(r);if(n==u){for(var v=d,y=36;;y+=36){var _=y<=f?1:y>=f+26?26:y-f;if(v<_)break;var w=v-_,S=36-_;c.push(o(a(_+w%S))),v=s(w/S)}c.push(o(a(v))),f=l(d,b,g==p),d=0,++g}}++d,++u}return c.join("")};e.exports=function(e){var t,r,s=[],o=e.toLowerCase().replace(n,".").split(".");for(t=0;t<o.length;t++)r=o[t],s.push(i.test(r)?"xn--"+c(r):r);return s.join(".")}},38415:(e,t,i)=>{"use strict";var n=i(99958),r=i(84488);e.exports="".repeat||function(e){var t=String(r(this)),i="",s=n(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(i+=t);return i}},76091:(e,t,i)=>{var n=i(47293),r=i(81361);e.exports=function(e){return n((function(){return!!r[e]()||""!=""[e]()||r[e].name!==e}))}},53111:(e,t,i)=>{var n=i(84488),r="["+i(81361)+"]",s=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),a=function(e){return function(t){var i=String(n(t));return 1&e&&(i=i.replace(s,"")),2&e&&(i=i.replace(o,"")),i}};e.exports={start:a(1),end:a(2),trim:a(3)}},20261:(e,t,i)=>{var n,r,s,o=i(17854),a=i(47293),l=i(49974),c=i(60490),h=i(80317),u=i(6833),d=i(35268),f=o.location,p=o.setImmediate,g=o.clearImmediate,m=o.process,b=o.MessageChannel,v=o.Dispatch,y=0,_={},w="onreadystatechange",S=function(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},C=function(e){return function(){S(e)}},x=function(e){S(e.data)},k=function(e){o.postMessage(e+"",f.protocol+"//"+f.host)};p&&g||(p=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return _[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(y),y},g=function(e){delete _[e]},d?n=function(e){m.nextTick(C(e))}:v&&v.now?n=function(e){v.now(C(e))}:b&&!u?(s=(r=new b).port2,r.port1.onmessage=x,n=l(s.postMessage,s,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&f&&"file:"!==f.protocol&&!a(k)?(n=k,o.addEventListener("message",x,!1)):n=w in h("script")?function(e){c.appendChild(h("script")).onreadystatechange=function(){c.removeChild(this),S(e)}}:function(e){setTimeout(C(e),0)}),e.exports={set:p,clear:g}},50863:(e,t,i)=>{var n=i(84326);e.exports=function(e){if("number"!=typeof e&&"Number"!=n(e))throw TypeError("Incorrect invocation");return+e}},51400:(e,t,i)=>{var n=i(99958),r=Math.max,s=Math.min;e.exports=function(e,t){var i=n(e);return i<0?r(i+t,0):s(i,t)}},57067:(e,t,i)=>{var n=i(99958),r=i(17466);e.exports=function(e){if(void 0===e)return 0;var t=n(e),i=r(t);if(t!==i)throw RangeError("Wrong length or index");return i}},45656:(e,t,i)=>{var n=i(68361),r=i(84488);e.exports=function(e){return n(r(e))}},99958:e=>{var t=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}},17466:(e,t,i)=>{var n=i(99958),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},47908:(e,t,i)=>{var n=i(84488);e.exports=function(e){return Object(n(e))}},84590:(e,t,i)=>{var n=i(73002);e.exports=function(e,t){var i=n(e);if(i%t)throw RangeError("Wrong offset");return i}},73002:(e,t,i)=>{var n=i(99958);e.exports=function(e){var t=n(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},57593:(e,t,i)=>{var n=i(70111);e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},51694:(e,t,i)=>{var n={};n[i(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},19843:(e,t,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(19781),o=i(63832),a=i(90260),l=i(13331),c=i(25787),h=i(79114),u=i(68880),d=i(17466),f=i(57067),p=i(84590),g=i(57593),m=i(86656),b=i(70648),v=i(70111),y=i(70030),_=i(27674),w=i(8006).f,S=i(97321),C=i(42092).forEach,x=i(96340),k=i(3070),E=i(31236),T=i(29909),L=i(79587),N=T.get,M=T.set,O=k.f,D=E.f,I=Math.round,A=r.RangeError,P=l.ArrayBuffer,R=l.DataView,B=a.NATIVE_ARRAY_BUFFER_VIEWS,F=a.TYPED_ARRAY_TAG,W=a.TypedArray,V=a.TypedArrayPrototype,z=a.aTypedArrayConstructor,H=a.isTypedArray,j="BYTES_PER_ELEMENT",U="Wrong length",G=function(e,t){for(var i=0,n=t.length,r=new(z(e))(n);n>i;)r[i]=t[i++];return r},K=function(e,t){O(e,t,{get:function(){return N(this)[t]}})},$=function(e){var t;return e instanceof P||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},q=function(e,t){return H(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Z=function(e,t){return q(e,t=g(t,!0))?h(2,e[t]):D(e,t)},Y=function(e,t,i){return!(q(e,t=g(t,!0))&&v(i)&&m(i,"value"))||m(i,"get")||m(i,"set")||i.configurable||m(i,"writable")&&!i.writable||m(i,"enumerable")&&!i.enumerable?O(e,t,i):(e[t]=i.value,e)};s?(B||(E.f=Z,k.f=Y,K(V,"buffer"),K(V,"byteOffset"),K(V,"byteLength"),K(V,"length")),n({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:Z,defineProperty:Y}),e.exports=function(e,t,i){var s=e.match(/\d+$/)[0]/8,a=e+(i?"Clamped":"")+"Array",l="get"+e,h="set"+e,g=r[a],m=g,b=m&&m.prototype,k={},E=function(e,t){O(e,t,{get:function(){return function(e,t){var i=N(e);return i.view[l](t*s+i.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var r=N(e);i&&(n=(n=I(n))<0?0:n>255?255:255&n),r.view[h](t*s+r.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};B?o&&(m=t((function(e,t,i,n){return c(e,m,a),L(v(t)?$(t)?void 0!==n?new g(t,p(i,s),n):void 0!==i?new g(t,p(i,s)):new g(t):H(t)?G(m,t):S.call(m,t):new g(f(t)),e,m)})),_&&_(m,W),C(w(g),(function(e){e in m||u(m,e,g[e])})),m.prototype=b):(m=t((function(e,t,i,n){c(e,m,a);var r,o,l,h=0,u=0;if(v(t)){if(!$(t))return H(t)?G(m,t):S.call(m,t);r=t,u=p(i,s);var g=t.byteLength;if(void 0===n){if(g%s)throw A(U);if((o=g-u)<0)throw A(U)}else if((o=d(n)*s)+u>g)throw A(U);l=o/s}else l=f(t),r=new P(o=l*s);for(M(e,{buffer:r,byteOffset:u,byteLength:o,length:l,view:new R(r)});h<l;)E(e,h++)})),_&&_(m,W),b=m.prototype=y(V)),b.constructor!==m&&u(b,"constructor",m),F&&u(b,F,a),k[a]=m,n({global:!0,forced:m!=g,sham:!B},k),j in m||u(m,j,s),j in b||u(b,j,s),x(a)}):e.exports=function(){}},63832:(e,t,i)=>{var n=i(17854),r=i(47293),s=i(17072),o=i(90260).NATIVE_ARRAY_BUFFER_VIEWS,a=n.ArrayBuffer,l=n.Int8Array;e.exports=!o||!r((function(){l(1)}))||!r((function(){new l(-1)}))||!s((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||r((function(){return 1!==new l(new a(2),1,void 0).length}))},97321:(e,t,i)=>{var n=i(47908),r=i(17466),s=i(71246),o=i(97659),a=i(49974),l=i(90260).aTypedArrayConstructor;e.exports=function(e){var t,i,c,h,u,d,f=n(e),p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,b=s(f);if(null!=b&&!o(b))for(d=(u=b.call(f)).next,f=[];!(h=d.call(u)).done;)f.push(h.value);for(m&&p>2&&(g=a(g,arguments[2],2)),i=r(f.length),c=new(l(this))(i),t=0;i>t;t++)c[t]=m?g(f[t],t):f[t];return c}},69711:e=>{var t=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+i).toString(36)}},43307:(e,t,i)=>{var n=i(30133);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},6061:(e,t,i)=>{var n=i(5112);t.f=n},5112:(e,t,i)=>{var n=i(17854),r=i(72309),s=i(86656),o=i(69711),a=i(30133),l=i(43307),c=r("wks"),h=n.Symbol,u=l?h:h&&h.withoutSetter||o;e.exports=function(e){return s(c,e)||(a&&s(h,e)?c[e]=h[e]:c[e]=u("Symbol."+e)),c[e]}},81361:e=>{e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},9170:(e,t,i)=>{"use strict";var n=i(82109),r=i(79518),s=i(27674),o=i(70030),a=i(68880),l=i(79114),c=i(20408),h=function(e,t){var i=this;if(!(i instanceof h))return new h(e,t);s&&(i=s(new Error(void 0),r(i))),void 0!==t&&a(i,"message",String(t));var n=[];return c(e,n.push,{that:n}),a(i,"errors",n),i};h.prototype=o(Error.prototype,{constructor:l(5,h),message:l(5,""),name:l(5,"AggregateError")}),n({global:!0},{AggregateError:h})},18264:(e,t,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(13331),o=i(96340),a="ArrayBuffer",l=s.ArrayBuffer;n({global:!0,forced:r.ArrayBuffer!==l},{ArrayBuffer:l}),o(a)},76938:(e,t,i)=>{var n=i(82109),r=i(90260);n({target:"ArrayBuffer",stat:!0,forced:!r.NATIVE_ARRAY_BUFFER_VIEWS},{isView:r.isView})},39575:(e,t,i)=>{"use strict";var n=i(82109),r=i(47293),s=i(13331),o=i(19670),a=i(51400),l=i(17466),c=i(36707),h=s.ArrayBuffer,u=s.DataView,d=h.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:r((function(){return!new h(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==d&&void 0===t)return d.call(o(this),e);for(var i=o(this).byteLength,n=a(e,i),r=a(void 0===t?i:t,i),s=new(c(this,h))(l(r-n)),f=new u(this),p=new u(s),g=0;n<r;)p.setUint8(g++,f.getUint8(n++));return s}})},92222:(e,t,i)=>{"use strict";var n=i(82109),r=i(47293),s=i(43157),o=i(70111),a=i(47908),l=i(17466),c=i(86135),h=i(65417),u=i(81194),d=i(5112),f=i(7392),p=d("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",b=f>=51||!r((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=u("concat"),y=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:s(e)};n({target:"Array",proto:!0,forced:!b||!v},{concat:function(e){var t,i,n,r,s,o=a(this),u=h(o,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(y(s=-1===t?o:arguments[t])){if(d+(r=l(s.length))>g)throw TypeError(m);for(i=0;i<r;i++,d++)i in s&&c(u,d,s[i])}else{if(d>=g)throw TypeError(m);c(u,d++,s)}return u.length=d,u}})},50545:(e,t,i)=>{var n=i(82109),r=i(1048),s=i(51223);n({target:"Array",proto:!0},{copyWithin:r}),s("copyWithin")},26541:(e,t,i)=>{"use strict";var n=i(82109),r=i(42092).every,s=i(9341),o=i(29207),a=s("every"),l=o("every");n({target:"Array",proto:!0,forced:!a||!l},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},43290:(e,t,i)=>{var n=i(82109),r=i(21285),s=i(51223);n({target:"Array",proto:!0},{fill:r}),s("fill")},57327:(e,t,i)=>{"use strict";var n=i(82109),r=i(42092).filter,s=i(81194),o=i(29207),a=s("filter"),l=o("filter");n({target:"Array",proto:!0,forced:!a||!l},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},34553:(e,t,i)=>{"use strict";var n=i(82109),r=i(42092).findIndex,s=i(51223),o=i(29207),a="findIndex",l=!0,c=o(a);a in[]&&Array(1).findIndex((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!c},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s(a)},69826:(e,t,i)=>{"use strict";var n=i(82109),r=i(42092).find,s=i(51223),o=i(29207),a="find",l=!0,c=o(a);a in[]&&Array(1).find((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s(a)},86535:(e,t,i)=>{"use strict";var n=i(82109),r=i(6790),s=i(47908),o=i(17466),a=i(13099),l=i(65417);n({target:"Array",proto:!0},{flatMap:function(e){var t,i=s(this),n=o(i.length);return a(e),(t=l(i,0)).length=r(t,i,i,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},84944:(e,t,i)=>{"use strict";var n=i(82109),r=i(6790),s=i(47908),o=i(17466),a=i(99958),l=i(65417);n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=s(this),i=o(t.length),n=l(t,0);return n.length=r(n,t,t,i,0,void 0===e?1:a(e)),n}})},89554:(e,t,i)=>{"use strict";var n=i(82109),r=i(18533);n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},91038:(e,t,i)=>{var n=i(82109),r=i(48457);n({target:"Array",stat:!0,forced:!i(17072)((function(e){Array.from(e)}))},{from:r})},26699:(e,t,i)=>{"use strict";var n=i(82109),r=i(41318).includes,s=i(51223);n({target:"Array",proto:!0,forced:!i(29207)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},82772:(e,t,i)=>{"use strict";var n=i(82109),r=i(41318).indexOf,s=i(9341),o=i(29207),a=[].indexOf,l=!!a&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),h=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:l||!c||!h},{indexOf:function(e){return l?a.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},79753:(e,t,i)=>{i(82109)({target:"Array",stat:!0},{isArray:i(43157)})},66992:(e,t,i)=>{"use strict";var n=i(45656),r=i(51223),s=i(97497),o=i(29909),a=i(70654),l="Array Iterator",c=o.set,h=o.getterFor(l);e.exports=a(Array,"Array",(function(e,t){c(this,{type:l,target:n(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},69600:(e,t,i)=>{"use strict";var n=i(82109),r=i(68361),s=i(45656),o=i(9341),a=[].join,l=r!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:l||!c},{join:function(e){return a.call(s(this),void 0===e?",":e)}})},94986:(e,t,i)=>{var n=i(82109),r=i(86583);n({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},21249:(e,t,i)=>{"use strict";var n=i(82109),r=i(42092).map,s=i(81194),o=i(29207),a=s("map"),l=o("map");n({target:"Array",proto:!0,forced:!a||!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},26572:(e,t,i)=>{"use strict";var n=i(82109),r=i(47293),s=i(86135);n({target:"Array",stat:!0,forced:r((function(){function e(){}return!(Array.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,i=new("function"==typeof this?this:Array)(t);t>e;)s(i,e,arguments[e++]);return i.length=t,i}})},96644:(e,t,i)=>{"use strict";var n=i(82109),r=i(53671).right,s=i(9341),o=i(29207),a=i(7392),l=i(35268),c=s("reduceRight"),h=o("reduce",{1:0});n({target:"Array",proto:!0,forced:!c||!h||!l&&a>79&&a<83},{reduceRight:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},85827:(e,t,i)=>{"use strict";var n=i(82109),r=i(53671).left,s=i(9341),o=i(29207),a=i(7392),l=i(35268),c=s("reduce"),h=o("reduce",{1:0});n({target:"Array",proto:!0,forced:!c||!h||!l&&a>79&&a<83},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},65069:(e,t,i)=>{"use strict";var n=i(82109),r=i(43157),s=[].reverse,o=[1,2];n({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),s.call(this)}})},47042:(e,t,i)=>{"use strict";var n=i(82109),r=i(70111),s=i(43157),o=i(51400),a=i(17466),l=i(45656),c=i(86135),h=i(5112),u=i(81194),d=i(29207),f=u("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),g=h("species"),m=[].slice,b=Math.max;n({target:"Array",proto:!0,forced:!f||!p},{slice:function(e,t){var i,n,h,u=l(this),d=a(u.length),f=o(e,d),p=o(void 0===t?d:t,d);if(s(u)&&("function"!=typeof(i=u.constructor)||i!==Array&&!s(i.prototype)?r(i)&&null===(i=i[g])&&(i=void 0):i=void 0,i===Array||void 0===i))return m.call(u,f,p);for(n=new(void 0===i?Array:i)(b(p-f,0)),h=0;f<p;f++,h++)f in u&&c(n,h,u[f]);return n.length=h,n}})},5212:(e,t,i)=>{"use strict";var n=i(82109),r=i(42092).some,s=i(9341),o=i(29207),a=s("some"),l=o("some");n({target:"Array",proto:!0,forced:!a||!l},{some:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},2707:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(47908),o=i(47293),a=i(9341),l=[],c=l.sort,h=o((function(){l.sort(void 0)})),u=o((function(){l.sort(null)})),d=a("sort");n({target:"Array",proto:!0,forced:h||!u||!d},{sort:function(e){return void 0===e?c.call(s(this)):c.call(s(this),r(e))}})},38706:(e,t,i)=>{i(96340)("Array")},40561:(e,t,i)=>{"use strict";var n=i(82109),r=i(51400),s=i(99958),o=i(17466),a=i(47908),l=i(65417),c=i(86135),h=i(81194),u=i(29207),d=h("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var i,n,h,u,d,f,v=a(this),y=o(v.length),_=r(e,y),w=arguments.length;if(0===w?i=n=0:1===w?(i=0,n=y-_):(i=w-2,n=g(p(s(t),0),y-_)),y+i-n>m)throw TypeError(b);for(h=l(v,n),u=0;u<n;u++)(d=_+u)in v&&c(h,u,v[d]);if(h.length=n,i<n){for(u=_;u<y-n;u++)f=u+i,(d=u+n)in v?v[f]=v[d]:delete v[f];for(u=y;u>y-n+i;u--)delete v[u-1]}else if(i>n)for(u=y-n;u>_;u--)f=u+i-1,(d=u+n-1)in v?v[f]=v[d]:delete v[f];for(u=0;u<i;u++)v[u+_]=arguments[u+2];return v.length=y-n+i,h}})},99244:(e,t,i)=>{i(51223)("flatMap")},33792:(e,t,i)=>{i(51223)("flat")},16716:(e,t,i)=>{var n=i(82109),r=i(13331);n({global:!0,forced:!i(24019)},{DataView:r.DataView})},3843:(e,t,i)=>{i(82109)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},28733:(e,t,i)=>{var n=i(82109),r=i(85573);n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==r},{toISOString:r})},5735:(e,t,i)=>{"use strict";var n=i(82109),r=i(47293),s=i(47908),o=i(57593);n({target:"Date",proto:!0,forced:r((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=s(this),i=o(t);return"number"!=typeof i||isFinite(i)?t.toISOString():null}})},96078:(e,t,i)=>{var n=i(68880),r=i(38709),s=i(5112)("toPrimitive"),o=Date.prototype;s in o||n(o,s,r)},83710:(e,t,i)=>{var n=i(31320),r=Date.prototype,s="Invalid Date",o="toString",a=r.toString,l=r.getTime;new Date(NaN)+""!=s&&n(r,o,(function(){var e=l.call(this);return e==e?a.call(this):s}))},24812:(e,t,i)=>{i(82109)({target:"Function",proto:!0},{bind:i(27065)})},4855:(e,t,i)=>{"use strict";var n=i(70111),r=i(3070),s=i(79518),o=i(5112)("hasInstance"),a=Function.prototype;o in a||r.f(a,o,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=s(e);)if(this.prototype===e)return!0;return!1}})},68309:(e,t,i)=>{var n=i(19781),r=i(3070).f,s=Function.prototype,o=s.toString,a=/^\s*function ([^ (]*)/,l="name";n&&!(l in s)&&r(s,l,{configurable:!0,get:function(){try{return o.call(this).match(a)[1]}catch(e){return""}}})},35837:(e,t,i)=>{i(82109)({global:!0},{globalThis:i(17854)})},38862:(e,t,i)=>{var n=i(82109),r=i(35005),s=i(47293),o=r("JSON","stringify"),a=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,h=function(e,t,i){var n=i.charAt(t-1),r=i.charAt(t+1);return l.test(e)&&!c.test(r)||c.test(e)&&!l.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},u=s((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&n({target:"JSON",stat:!0,forced:u},{stringify:function(e,t,i){var n=o.apply(null,arguments);return"string"==typeof n?n.replace(a,h):n}})},73706:(e,t,i)=>{var n=i(17854);i(58003)(n.JSON,"JSON",!0)},51532:(e,t,i)=>{"use strict";var n=i(77710),r=i(95631);e.exports=n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},99752:(e,t,i)=>{var n=i(82109),r=i(26513),s=Math.acosh,o=Math.log,a=Math.sqrt,l=Math.LN2;n({target:"Math",stat:!0,forced:!s||710!=Math.floor(s(Number.MAX_VALUE))||s(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?o(e)+l:r(e-1+a(e-1)*a(e+1))}})},82376:(e,t,i)=>{var n=i(82109),r=Math.asinh,s=Math.log,o=Math.sqrt;n({target:"Math",stat:!0,forced:!(r&&1/r(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):s(t+o(t*t+1)):t}})},73181:(e,t,i)=>{var n=i(82109),r=Math.atanh,s=Math.log;n({target:"Math",stat:!0,forced:!(r&&1/r(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:s((1+e)/(1-e))/2}})},23484:(e,t,i)=>{var n=i(82109),r=i(64310),s=Math.abs,o=Math.pow;n({target:"Math",stat:!0},{cbrt:function(e){return r(e=+e)*o(s(e),1/3)}})},2388:(e,t,i)=>{var n=i(82109),r=Math.floor,s=Math.log,o=Math.LOG2E;n({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-r(s(e+.5)*o):32}})},88621:(e,t,i)=>{var n=i(82109),r=i(66736),s=Math.cosh,o=Math.abs,a=Math.E;n({target:"Math",stat:!0,forced:!s||s(710)===1/0},{cosh:function(e){var t=r(o(e)-1)+1;return(t+1/(t*a*a))*(a/2)}})},60403:(e,t,i)=>{var n=i(82109),r=i(66736);n({target:"Math",stat:!0,forced:r!=Math.expm1},{expm1:r})},84755:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{fround:i(26130)})},25438:(e,t,i)=>{var n=i(82109),r=Math.hypot,s=Math.abs,o=Math.sqrt;n({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(e,t){for(var i,n,r=0,a=0,l=arguments.length,c=0;a<l;)c<(i=s(arguments[a++]))?(r=r*(n=c/i)*n+1,c=i):r+=i>0?(n=i/c)*n:i;return c===1/0?1/0:c*o(r)}})},90332:(e,t,i)=>{var n=i(82109),r=i(47293),s=Math.imul;n({target:"Math",stat:!0,forced:r((function(){return-5!=s(4294967295,5)||2!=s.length}))},{imul:function(e,t){var i=65535,n=+e,r=+t,s=i&n,o=i&r;return 0|s*o+((i&n>>>16)*o+s*(i&r>>>16)<<16>>>0)}})},40658:(e,t,i)=>{var n=i(82109),r=Math.log,s=Math.LOG10E;n({target:"Math",stat:!0},{log10:function(e){return r(e)*s}})},40197:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{log1p:i(26513)})},44914:(e,t,i)=>{var n=i(82109),r=Math.log,s=Math.LN2;n({target:"Math",stat:!0},{log2:function(e){return r(e)/s}})},52420:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{sign:i(64310)})},60160:(e,t,i)=>{var n=i(82109),r=i(47293),s=i(66736),o=Math.abs,a=Math.exp,l=Math.E;n({target:"Math",stat:!0,forced:r((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return o(e=+e)<1?(s(e)-s(-e))/2:(a(e-1)-a(-e-1))*(l/2)}})},60970:(e,t,i)=>{var n=i(82109),r=i(66736),s=Math.exp;n({target:"Math",stat:!0},{tanh:function(e){var t=r(e=+e),i=r(-e);return t==1/0?1:i==1/0?-1:(t-i)/(s(e)+s(-e))}})},10408:(e,t,i)=>{i(58003)(Math,"Math",!0)},73689:(e,t,i)=>{var n=i(82109),r=Math.ceil,s=Math.floor;n({target:"Math",stat:!0},{trunc:function(e){return(e>0?s:r)(e)}})},9653:(e,t,i)=>{"use strict";var n=i(19781),r=i(17854),s=i(54705),o=i(31320),a=i(86656),l=i(84326),c=i(79587),h=i(57593),u=i(47293),d=i(70030),f=i(8006).f,p=i(31236).f,g=i(3070).f,m=i(53111).trim,b="Number",v=r.Number,y=v.prototype,_=l(d(y))==b,w=function(e){var t,i,n,r,s,o,a,l,c=h(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=m(c)).charCodeAt(0))||45===t){if(88===(i=c.charCodeAt(2))||120===i)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(o=(s=c.slice(2)).length,a=0;a<o;a++)if((l=s.charCodeAt(a))<48||l>r)return NaN;return parseInt(s,n)}return+c};if(s(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var S,C=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof C&&(_?u((function(){y.valueOf.call(i)})):l(i)!=b)?c(new v(w(t)),i,C):w(t)},x=n?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;x.length>k;k++)a(v,S=x[k])&&!a(C,S)&&g(C,S,p(v,S));C.prototype=y,y.constructor=C,o(r,b,C)}},93299:(e,t,i)=>{i(82109)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},35192:(e,t,i)=>{i(82109)({target:"Number",stat:!0},{isFinite:i(77023)})},33161:(e,t,i)=>{i(82109)({target:"Number",stat:!0},{isInteger:i(18730)})},44048:(e,t,i)=>{i(82109)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},78285:(e,t,i)=>{var n=i(82109),r=i(18730),s=Math.abs;n({target:"Number",stat:!0},{isSafeInteger:function(e){return r(e)&&s(e)<=9007199254740991}})},44363:(e,t,i)=>{i(82109)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},55994:(e,t,i)=>{i(82109)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},61874:(e,t,i)=>{var n=i(82109),r=i(2814);n({target:"Number",stat:!0,forced:Number.parseFloat!=r},{parseFloat:r})},9494:(e,t,i)=>{var n=i(82109),r=i(83009);n({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},56977:(e,t,i)=>{"use strict";var n=i(82109),r=i(99958),s=i(50863),o=i(38415),a=i(47293),l=1..toFixed,c=Math.floor,h=function(e,t,i){return 0===t?i:t%2==1?h(e,t-1,i*e):h(e*e,t/2,i)};n({target:"Number",proto:!0,forced:l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){l.call({})}))},{toFixed:function(e){var t,i,n,a,l=s(this),u=r(e),d=[0,0,0,0,0,0],f="",p="0",g=function(e,t){for(var i=-1,n=t;++i<6;)n+=e*d[i],d[i]=n%1e7,n=c(n/1e7)},m=function(e){for(var t=6,i=0;--t>=0;)i+=d[t],d[t]=c(i/e),i=i%e*1e7},b=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==d[e]){var i=String(d[e]);t=""===t?i:t+o.call("0",7-i.length)+i}return t};if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(f="-",l=-l),l>1e-21)if(i=(t=function(e){for(var t=0,i=e;i>=4096;)t+=12,i/=4096;for(;i>=2;)t+=1,i/=2;return t}(l*h(2,69,1))-69)<0?l*h(2,-t,1):l/h(2,t,1),i*=4503599627370496,(t=52-t)>0){for(g(0,i),n=u;n>=7;)g(1e7,0),n-=7;for(g(h(10,n,1),0),n=t-1;n>=23;)m(1<<23),n-=23;m(1<<n),g(1,1),m(2),p=b()}else g(0,i),g(1<<-t,0),p=b()+o.call("0",u);return p=u>0?f+((a=p.length)<=u?"0."+o.call("0",u-a)+p:p.slice(0,a-u)+"."+p.slice(a-u)):f+p}})},55147:(e,t,i)=>{"use strict";var n=i(82109),r=i(47293),s=i(50863),o=1..toPrecision;n({target:"Number",proto:!0,forced:r((function(){return"1"!==o.call(1,void 0)}))||!r((function(){o.call({})}))},{toPrecision:function(e){return void 0===e?o.call(s(this)):o.call(s(this),e)}})},19601:(e,t,i)=>{var n=i(82109),r=i(21574);n({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},78011:(e,t,i)=>{i(82109)({target:"Object",stat:!0,sham:!i(19781)},{create:i(70030)})},59595:(e,t,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(69026),o=i(47908),a=i(13099),l=i(3070);r&&n({target:"Object",proto:!0,forced:s},{__defineGetter__:function(e,t){l.f(o(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},33321:(e,t,i)=>{var n=i(82109),r=i(19781);n({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperties:i(36048)})},69070:(e,t,i)=>{var n=i(82109),r=i(19781);n({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:i(3070).f})},35500:(e,t,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(69026),o=i(47908),a=i(13099),l=i(3070);r&&n({target:"Object",proto:!0,forced:s},{__defineSetter__:function(e,t){l.f(o(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},69720:(e,t,i)=>{var n=i(82109),r=i(44699).entries;n({target:"Object",stat:!0},{entries:function(e){return r(e)}})},43371:(e,t,i)=>{var n=i(82109),r=i(76677),s=i(47293),o=i(70111),a=i(62423).onFreeze,l=Object.freeze;n({target:"Object",stat:!0,forced:s((function(){l(1)})),sham:!r},{freeze:function(e){return l&&o(e)?l(a(e)):e}})},38559:(e,t,i)=>{var n=i(82109),r=i(20408),s=i(86135);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return r(e,(function(e,i){s(t,e,i)}),{AS_ENTRIES:!0}),t}})},38880:(e,t,i)=>{var n=i(82109),r=i(47293),s=i(45656),o=i(31236).f,a=i(19781),l=r((function(){o(1)}));n({target:"Object",stat:!0,forced:!a||l,sham:!a},{getOwnPropertyDescriptor:function(e,t){return o(s(e),t)}})},49337:(e,t,i)=>{var n=i(82109),r=i(19781),s=i(53887),o=i(45656),a=i(31236),l=i(86135);n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){for(var t,i,n=o(e),r=a.f,c=s(n),h={},u=0;c.length>u;)void 0!==(i=r(n,t=c[u++]))&&l(h,t,i);return h}})},36210:(e,t,i)=>{var n=i(82109),r=i(47293),s=i(1156).f;n({target:"Object",stat:!0,forced:r((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:s})},30489:(e,t,i)=>{var n=i(82109),r=i(47293),s=i(47908),o=i(79518),a=i(49920);n({target:"Object",stat:!0,forced:r((function(){o(1)})),sham:!a},{getPrototypeOf:function(e){return o(s(e))}})},41825:(e,t,i)=>{var n=i(82109),r=i(47293),s=i(70111),o=Object.isExtensible;n({target:"Object",stat:!0,forced:r((function(){o(1)}))},{isExtensible:function(e){return!!s(e)&&(!o||o(e))}})},98410:(e,t,i)=>{var n=i(82109),r=i(47293),s=i(70111),o=Object.isFrozen;n({target:"Object",stat:!0,forced:r((function(){o(1)}))},{isFrozen:function(e){return!s(e)||!!o&&o(e)}})},72200:(e,t,i)=>{var n=i(82109),r=i(47293),s=i(70111),o=Object.isSealed;n({target:"Object",stat:!0,forced:r((function(){o(1)}))},{isSealed:function(e){return!s(e)||!!o&&o(e)}})},43304:(e,t,i)=>{i(82109)({target:"Object",stat:!0},{is:i(81150)})},47941:(e,t,i)=>{var n=i(82109),r=i(47908),s=i(81956);n({target:"Object",stat:!0,forced:i(47293)((function(){s(1)}))},{keys:function(e){return s(r(e))}})},94869:(e,t,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(69026),o=i(47908),a=i(57593),l=i(79518),c=i(31236).f;r&&n({target:"Object",proto:!0,forced:s},{__lookupGetter__:function(e){var t,i=o(this),n=a(e,!0);do{if(t=c(i,n))return t.get}while(i=l(i))}})},33952:(e,t,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(69026),o=i(47908),a=i(57593),l=i(79518),c=i(31236).f;r&&n({target:"Object",proto:!0,forced:s},{__lookupSetter__:function(e){var t,i=o(this),n=a(e,!0);do{if(t=c(i,n))return t.set}while(i=l(i))}})},57227:(e,t,i)=>{var n=i(82109),r=i(70111),s=i(62423).onFreeze,o=i(76677),a=i(47293),l=Object.preventExtensions;n({target:"Object",stat:!0,forced:a((function(){l(1)})),sham:!o},{preventExtensions:function(e){return l&&r(e)?l(s(e)):e}})},60514:(e,t,i)=>{var n=i(82109),r=i(70111),s=i(62423).onFreeze,o=i(76677),a=i(47293),l=Object.seal;n({target:"Object",stat:!0,forced:a((function(){l(1)})),sham:!o},{seal:function(e){return l&&r(e)?l(s(e)):e}})},68304:(e,t,i)=>{i(82109)({target:"Object",stat:!0},{setPrototypeOf:i(27674)})},41539:(e,t,i)=>{var n=i(51694),r=i(31320),s=i(90288);n||r(Object.prototype,"toString",s,{unsafe:!0})},26833:(e,t,i)=>{var n=i(82109),r=i(44699).values;n({target:"Object",stat:!0},{values:function(e){return r(e)}})},54678:(e,t,i)=>{var n=i(82109),r=i(2814);n({global:!0,forced:parseFloat!=r},{parseFloat:r})},91058:(e,t,i)=>{var n=i(82109),r=i(83009);n({global:!0,forced:parseInt!=r},{parseInt:r})},17922:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(78523),o=i(12534),a=i(20408);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,i=s.f(t),n=i.resolve,l=i.reject,c=o((function(){var i=r(t.resolve),s=[],o=0,l=1;a(e,(function(e){var r=o++,a=!1;s.push(void 0),l++,i.call(t,e).then((function(e){a||(a=!0,s[r]={status:"fulfilled",value:e},--l||n(s))}),(function(e){a||(a=!0,s[r]={status:"rejected",reason:e},--l||n(s))}))})),--l||n(s)}));return c.error&&l(c.value),i.promise}})},34668:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(35005),o=i(78523),a=i(12534),l=i(20408),c="No one promise resolved";n({target:"Promise",stat:!0},{any:function(e){var t=this,i=o.f(t),n=i.resolve,h=i.reject,u=a((function(){var i=r(t.resolve),o=[],a=0,u=1,d=!1;l(e,(function(e){var r=a++,l=!1;o.push(void 0),u++,i.call(t,e).then((function(e){l||d||(d=!0,n(e))}),(function(e){l||d||(l=!0,o[r]=e,--u||h(new(s("AggregateError"))(o,c)))}))})),--u||h(new(s("AggregateError"))(o,c))}));return u.error&&h(u.value),i.promise}})},17727:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(13366),o=i(47293),a=i(35005),l=i(36707),c=i(69478),h=i(31320);n({target:"Promise",proto:!0,real:!0,forced:!!s&&o((function(){s.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,a("Promise")),i="function"==typeof e;return this.then(i?function(i){return c(t,e()).then((function(){return i}))}:e,i?function(i){return c(t,e()).then((function(){throw i}))}:e)}}),r||"function"!=typeof s||s.prototype.finally||h(s.prototype,"finally",a("Promise").prototype.finally)},88674:(e,t,i)=>{"use strict";var n,r,s,o,a=i(82109),l=i(31913),c=i(17854),h=i(35005),u=i(13366),d=i(31320),f=i(12248),p=i(58003),g=i(96340),m=i(70111),b=i(13099),v=i(25787),y=i(42788),_=i(20408),w=i(17072),S=i(36707),C=i(20261).set,x=i(95948),k=i(69478),E=i(842),T=i(78523),L=i(12534),N=i(29909),M=i(54705),O=i(5112),D=i(35268),I=i(7392),A=O("species"),P="Promise",R=N.get,B=N.set,F=N.getterFor(P),W=u,V=c.TypeError,z=c.document,H=c.process,j=h("fetch"),U=T.f,G=U,K=!!(z&&z.createEvent&&c.dispatchEvent),$="function"==typeof PromiseRejectionEvent,q="unhandledrejection",Z=M(P,(function(){if(!(y(W)!==String(W))){if(66===I)return!0;if(!D&&!$)return!0}if(l&&!W.prototype.finally)return!0;if(I>=51&&/native code/.test(W))return!1;var e=W.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[A]=t,!(e.then((function(){}))instanceof t)})),Y=Z||!w((function(e){W.all(e).catch((function(){}))})),X=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},Q=function(e,t){if(!e.notified){e.notified=!0;var i=e.reactions;x((function(){for(var n=e.value,r=1==e.state,s=0;i.length>s;){var o,a,l,c=i[s++],h=r?c.ok:c.fail,u=c.resolve,d=c.reject,f=c.domain;try{h?(r||(2===e.rejection&&ie(e),e.rejection=1),!0===h?o=n:(f&&f.enter(),o=h(n),f&&(f.exit(),l=!0)),o===c.promise?d(V("Promise-chain cycle")):(a=X(o))?a.call(o,u,d):u(o)):d(n)}catch(e){f&&!l&&f.exit(),d(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},J=function(e,t,i){var n,r;K?((n=z.createEvent("Event")).promise=t,n.reason=i,n.initEvent(e,!1,!0),c.dispatchEvent(n)):n={promise:t,reason:i},!$&&(r=c["on"+e])?r(n):e===q&&E("Unhandled promise rejection",i)},ee=function(e){C.call(c,(function(){var t,i=e.facade,n=e.value;if(te(e)&&(t=L((function(){D?H.emit("unhandledRejection",n,i):J(q,i,n)})),e.rejection=D||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ie=function(e){C.call(c,(function(){var t=e.facade;D?H.emit("rejectionHandled",t):J("rejectionhandled",t,e.value)}))},ne=function(e,t,i){return function(n){e(t,n,i)}},re=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=2,Q(e,!0))},se=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw V("Promise can't be resolved itself");var n=X(t);n?x((function(){var i={done:!1};try{n.call(t,ne(se,i,e),ne(re,i,e))}catch(t){re(i,t,e)}})):(e.value=t,e.state=1,Q(e,!1))}catch(t){re({done:!1},t,e)}}};Z&&(W=function(e){v(this,W,P),b(e),n.call(this);var t=R(this);try{e(ne(se,t),ne(re,t))}catch(e){re(t,e)}},(n=function(e){B(this,{type:P,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(W.prototype,{then:function(e,t){var i=F(this),n=U(S(this,W));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=D?H.domain:void 0,i.parent=!0,i.reactions.push(n),0!=i.state&&Q(i,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new n,t=R(e);this.promise=e,this.resolve=ne(se,t),this.reject=ne(re,t)},T.f=U=function(e){return e===W||e===s?new r(e):G(e)},l||"function"!=typeof u||(o=u.prototype.then,d(u.prototype,"then",(function(e,t){var i=this;return new W((function(e,t){o.call(i,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof j&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return k(W,j.apply(c,arguments))}}))),a({global:!0,wrap:!0,forced:Z},{Promise:W}),p(W,P,!1,!0),g(P),s=h(P),a({target:P,stat:!0,forced:Z},{reject:function(e){var t=U(this);return t.reject.call(void 0,e),t.promise}}),a({target:P,stat:!0,forced:l||Z},{resolve:function(e){return k(l&&this===s?W:this,e)}}),a({target:P,stat:!0,forced:Y},{all:function(e){var t=this,i=U(t),n=i.resolve,r=i.reject,s=L((function(){var i=b(t.resolve),s=[],o=0,a=1;_(e,(function(e){var l=o++,c=!1;s.push(void 0),a++,i.call(t,e).then((function(e){c||(c=!0,s[l]=e,--a||n(s))}),r)})),--a||n(s)}));return s.error&&r(s.value),i.promise},race:function(e){var t=this,i=U(t),n=i.reject,r=L((function(){var r=b(t.resolve);_(e,(function(e){r.call(t,e).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}})},36535:(e,t,i)=>{var n=i(82109),r=i(35005),s=i(13099),o=i(19670),a=i(47293),l=r("Reflect","apply"),c=Function.apply;n({target:"Reflect",stat:!0,forced:!a((function(){l((function(){}))}))},{apply:function(e,t,i){return s(e),o(i),l?l(e,t,i):c.call(e,t,i)}})},12419:(e,t,i)=>{var n=i(82109),r=i(35005),s=i(13099),o=i(19670),a=i(70111),l=i(70030),c=i(27065),h=i(47293),u=r("Reflect","construct"),d=h((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),f=!h((function(){u((function(){}))})),p=d||f;n({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){s(e),o(t);var i=arguments.length<3?e:s(arguments[2]);if(f&&!d)return u(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(c.apply(e,n))}var r=i.prototype,h=l(a(r)?r:Object.prototype),p=Function.apply.call(e,h,t);return a(p)?p:h}})},69596:(e,t,i)=>{var n=i(82109),r=i(19781),s=i(19670),o=i(57593),a=i(3070);n({target:"Reflect",stat:!0,forced:i(47293)((function(){Reflect.defineProperty(a.f({},1,{value:1}),1,{value:2})})),sham:!r},{defineProperty:function(e,t,i){s(e);var n=o(t,!0);s(i);try{return a.f(e,n,i),!0}catch(e){return!1}}})},52586:(e,t,i)=>{var n=i(82109),r=i(19670),s=i(31236).f;n({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var i=s(r(e),t);return!(i&&!i.configurable)&&delete e[t]}})},95683:(e,t,i)=>{var n=i(82109),r=i(19781),s=i(19670),o=i(31236);n({target:"Reflect",stat:!0,sham:!r},{getOwnPropertyDescriptor:function(e,t){return o.f(s(e),t)}})},39361:(e,t,i)=>{var n=i(82109),r=i(19670),s=i(79518);n({target:"Reflect",stat:!0,sham:!i(49920)},{getPrototypeOf:function(e){return s(r(e))}})},74819:(e,t,i)=>{var n=i(82109),r=i(70111),s=i(19670),o=i(86656),a=i(31236),l=i(79518);n({target:"Reflect",stat:!0},{get:function e(t,i){var n,c,h=arguments.length<3?t:arguments[2];return s(t)===h?t[i]:(n=a.f(t,i))?o(n,"value")?n.value:void 0===n.get?void 0:n.get.call(h):r(c=l(t))?e(c,i,h):void 0}})},51037:(e,t,i)=>{i(82109)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},5898:(e,t,i)=>{var n=i(82109),r=i(19670),s=Object.isExtensible;n({target:"Reflect",stat:!0},{isExtensible:function(e){return r(e),!s||s(e)}})},67556:(e,t,i)=>{i(82109)({target:"Reflect",stat:!0},{ownKeys:i(53887)})},14361:(e,t,i)=>{var n=i(82109),r=i(35005),s=i(19670);n({target:"Reflect",stat:!0,sham:!i(76677)},{preventExtensions:function(e){s(e);try{var t=r("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},39532:(e,t,i)=>{var n=i(82109),r=i(19670),s=i(96077),o=i(27674);o&&n({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){r(e),s(t);try{return o(e,t),!0}catch(e){return!1}}})},83593:(e,t,i)=>{var n=i(82109),r=i(19670),s=i(70111),o=i(86656),a=i(47293),l=i(3070),c=i(31236),h=i(79518),u=i(79114);n({target:"Reflect",stat:!0,forced:a((function(){var e=function(){},t=l.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function e(t,i,n){var a,d,f=arguments.length<4?t:arguments[3],p=c.f(r(t),i);if(!p){if(s(d=h(t)))return e(d,i,n,f);p=u(0)}if(o(p,"value")){if(!1===p.writable||!s(f))return!1;if(a=c.f(f,i)){if(a.get||a.set||!1===a.writable)return!1;a.value=n,l.f(f,i,a)}else l.f(f,i,u(0,n));return!0}return void 0!==p.set&&(p.set.call(f,n),!0)}})},81299:(e,t,i)=>{var n=i(82109),r=i(17854),s=i(58003);n({global:!0},{Reflect:{}}),s(r.Reflect,"Reflect",!0)},24603:(e,t,i)=>{var n=i(19781),r=i(17854),s=i(54705),o=i(79587),a=i(3070).f,l=i(8006).f,c=i(47850),h=i(67066),u=i(52999),d=i(31320),f=i(47293),p=i(29909).set,g=i(96340),m=i(5112)("match"),b=r.RegExp,v=b.prototype,y=/a/g,_=/a/g,w=new b(y)!==y,S=u.UNSUPPORTED_Y;if(n&&s("RegExp",!w||S||f((function(){return _[m]=!1,b(y)!=y||b(_)==_||"/a/i"!=b(y,"i")})))){for(var C=function(e,t){var i,n=this instanceof C,r=c(e),s=void 0===t;if(!n&&r&&e.constructor===C&&s)return e;w?r&&!s&&(e=e.source):e instanceof C&&(s&&(t=h.call(e)),e=e.source),S&&(i=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var a=o(w?new b(e,t):b(e,t),n?this:v,C);return S&&i&&p(a,{sticky:i}),a},x=function(e){e in C||a(C,e,{configurable:!0,get:function(){return b[e]},set:function(t){b[e]=t}})},k=l(b),E=0;k.length>E;)x(k[E++]);v.constructor=C,C.prototype=v,d(r,"RegExp",C)}g("RegExp")},74916:(e,t,i)=>{"use strict";var n=i(82109),r=i(22261);n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},92087:(e,t,i)=>{var n=i(19781),r=i(3070),s=i(67066),o=i(52999).UNSUPPORTED_Y;n&&("g"!=/./g.flags||o)&&r.f(RegExp.prototype,"flags",{configurable:!0,get:s})},88386:(e,t,i)=>{var n=i(19781),r=i(52999).UNSUPPORTED_Y,s=i(3070).f,o=i(29909).get,a=RegExp.prototype;n&&r&&s(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==a){if(this instanceof RegExp)return!!o(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},77601:(e,t,i)=>{"use strict";i(74916);var n,r,s=i(82109),o=i(70111),a=(n=!1,(r=/[ac]/).exec=function(){return n=!0,/./.exec.apply(this,arguments)},!0===r.test("abc")&&n),l=/./.test;s({target:"RegExp",proto:!0,forced:!a},{test:function(e){if("function"!=typeof this.exec)return l.call(this,e);var t=this.exec(e);if(null!==t&&!o(t))throw new Error("RegExp exec method returned something other than an Object or null");return!!t}})},39714:(e,t,i)=>{"use strict";var n=i(31320),r=i(19670),s=i(47293),o=i(67066),a="toString",l=RegExp.prototype,c=l.toString,h=s((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=a;(h||u)&&n(RegExp.prototype,a,(function(){var e=r(this),t=String(e.source),i=e.flags;return"/"+t+"/"+String(void 0===i&&e instanceof RegExp&&!("flags"in l)?o.call(e):i)}),{unsafe:!0})},70189:(e,t,i)=>{"use strict";var n=i(77710),r=i(95631);e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},15218:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("anchor")},{anchor:function(e){return r(this,"a","name",e)}})},74475:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("big")},{big:function(){return r(this,"big","","")}})},57929:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("blink")},{blink:function(){return r(this,"blink","","")}})},50915:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("bold")},{bold:function(){return r(this,"b","","")}})},79841:(e,t,i)=>{"use strict";var n=i(82109),r=i(28710).codeAt;n({target:"String",proto:!0},{codePointAt:function(e){return r(this,e)}})},27852:(e,t,i)=>{"use strict";var n,r=i(82109),s=i(31236).f,o=i(17466),a=i(3929),l=i(84488),c=i(84964),h=i(31913),u="".endsWith,d=Math.min,f=c("endsWith");r({target:"String",proto:!0,forced:!!(h||f||(n=s(String.prototype,"endsWith"),!n||n.writable))&&!f},{endsWith:function(e){var t=String(l(this));a(e);var i=arguments.length>1?arguments[1]:void 0,n=o(t.length),r=void 0===i?n:d(o(i),n),s=String(e);return u?u.call(t,s,r):t.slice(r-s.length,r)===s}})},29253:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("fixed")},{fixed:function(){return r(this,"tt","","")}})},42125:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("fontcolor")},{fontcolor:function(e){return r(this,"font","color",e)}})},78830:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("fontsize")},{fontsize:function(e){return r(this,"font","size",e)}})},94953:(e,t,i)=>{var n=i(82109),r=i(51400),s=String.fromCharCode,o=String.fromCodePoint;n({target:"String",stat:!0,forced:!!o&&1!=o.length},{fromCodePoint:function(e){for(var t,i=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");i.push(t<65536?s(t):s(55296+((t-=65536)>>10),t%1024+56320))}return i.join("")}})},32023:(e,t,i)=>{"use strict";var n=i(82109),r=i(3929),s=i(84488);n({target:"String",proto:!0,forced:!i(84964)("includes")},{includes:function(e){return!!~String(s(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},58734:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("italics")},{italics:function(){return r(this,"i","","")}})},78783:(e,t,i)=>{"use strict";var n=i(28710).charAt,r=i(29909),s=i(70654),o="String Iterator",a=r.set,l=r.getterFor(o);s(String,"String",(function(e){a(this,{type:o,string:String(e),index:0})}),(function(){var e,t=l(this),i=t.string,r=t.index;return r>=i.length?{value:void 0,done:!0}:(e=n(i,r),t.index+=e.length,{value:e,done:!1})}))},29254:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("link")},{link:function(e){return r(this,"a","href",e)}})},76373:(e,t,i)=>{"use strict";var n=i(82109),r=i(24994),s=i(84488),o=i(17466),a=i(13099),l=i(19670),c=i(84326),h=i(47850),u=i(67066),d=i(68880),f=i(47293),p=i(5112),g=i(36707),m=i(31530),b=i(29909),v=i(31913),y=p("matchAll"),_="RegExp String",w="RegExp String Iterator",S=b.set,C=b.getterFor(w),x=RegExp.prototype,k=x.exec,E="".matchAll,T=!!E&&!f((function(){"a".matchAll(/./)})),L=r((function(e,t,i,n){S(this,{type:w,regexp:e,string:t,global:i,unicode:n,done:!1})}),_,(function(){var e=C(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,i=e.string,n=function(e,t){var i,n=e.exec;if("function"==typeof n){if("object"!=typeof(i=n.call(e,t)))throw TypeError("Incorrect exec result");return i}return k.call(e,t)}(t,i);return null===n?{value:void 0,done:e.done=!0}:e.global?(""==String(n[0])&&(t.lastIndex=m(i,o(t.lastIndex),e.unicode)),{value:n,done:!1}):(e.done=!0,{value:n,done:!1})})),N=function(e){var t,i,n,r,s,a,c=l(this),h=String(e);return t=g(c,RegExp),void 0===(i=c.flags)&&c instanceof RegExp&&!("flags"in x)&&(i=u.call(c)),n=void 0===i?"":String(i),r=new t(t===RegExp?c.source:c,n),s=!!~n.indexOf("g"),a=!!~n.indexOf("u"),r.lastIndex=o(c.lastIndex),new L(r,h,s,a)};n({target:"String",proto:!0,forced:T},{matchAll:function(e){var t,i,n,r=s(this);if(null!=e){if(h(e)&&!~String(s("flags"in x?e.flags:u.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(T)return E.apply(r,arguments);if(void 0===(i=e[y])&&v&&"RegExp"==c(e)&&(i=N),null!=i)return a(i).call(e,r)}else if(T)return E.apply(r,arguments);return t=String(r),n=new RegExp(e,"g"),v?N.call(n,t):n[y](t)}}),v||y in x||d(x,y,N)},4723:(e,t,i)=>{"use strict";var n=i(27007),r=i(19670),s=i(17466),o=i(84488),a=i(31530),l=i(97651);n("match",1,(function(e,t,i){return[function(t){var i=o(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,i):new RegExp(t)[e](String(i))},function(e){var n=i(t,e,this);if(n.done)return n.value;var o=r(e),c=String(this);if(!o.global)return l(o,c);var h=o.unicode;o.lastIndex=0;for(var u,d=[],f=0;null!==(u=l(o,c));){var p=String(u[0]);d[f]=p,""===p&&(o.lastIndex=a(c,s(o.lastIndex),h)),f++}return 0===f?null:d}]}))},66528:(e,t,i)=>{"use strict";var n=i(82109),r=i(76650).end;n({target:"String",proto:!0,forced:i(54986)},{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},83112:(e,t,i)=>{"use strict";var n=i(82109),r=i(76650).start;n({target:"String",proto:!0,forced:i(54986)},{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},38992:(e,t,i)=>{var n=i(82109),r=i(45656),s=i(17466);n({target:"String",stat:!0},{raw:function(e){for(var t=r(e.raw),i=s(t.length),n=arguments.length,o=[],a=0;i>a;)o.push(String(t[a++])),a<n&&o.push(String(arguments[a]));return o.join("")}})},82481:(e,t,i)=>{i(82109)({target:"String",proto:!0},{repeat:i(38415)})},68757:(e,t,i)=>{"use strict";var n=i(82109),r=i(84488),s=i(47850),o=i(67066),a=i(5112),l=i(31913),c=a("replace"),h=RegExp.prototype;n({target:"String",proto:!0},{replaceAll:function e(t,i){var n,a,u,d,f,p,g,m,b=r(this);if(null!=t){if((n=s(t))&&!~String(r("flags"in h?t.flags:o.call(t))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(a=t[c]))return a.call(t,b,i);if(l&&n)return String(b).replace(t,i)}if(u=String(b),""===(d=String(t)))return e.call(u,/(?:)/g,i);if(f=u.split(d),"function"!=typeof i)return f.join(String(i));for(g=(p=f[0]).length,m=1;m<f.length;m++)p+=String(i(d,g,u)),g+=d.length+f[m].length,p+=f[m];return p}})},15306:(e,t,i)=>{"use strict";var n=i(27007),r=i(19670),s=i(47908),o=i(17466),a=i(99958),l=i(84488),c=i(31530),h=i(97651),u=Math.max,d=Math.min,f=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;n("replace",2,(function(e,t,i,n){var m=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=n.REPLACE_KEEPS_$0,v=m?"$":"$0";return[function(i,n){var r=l(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,r,n):t.call(String(r),i,n)},function(e,n){if(!m&&b||"string"==typeof n&&-1===n.indexOf(v)){var s=i(t,e,this,n);if(s.done)return s.value}var l=r(e),f=String(this),p="function"==typeof n;p||(n=String(n));var g=l.global;if(g){var _=l.unicode;l.lastIndex=0}for(var w=[];;){var S=h(l,f);if(null===S)break;if(w.push(S),!g)break;""===String(S[0])&&(l.lastIndex=c(f,o(l.lastIndex),_))}for(var C,x="",k=0,E=0;E<w.length;E++){S=w[E];for(var T=String(S[0]),L=u(d(a(S.index),f.length),0),N=[],M=1;M<S.length;M++)N.push(void 0===(C=S[M])?C:String(C));var O=S.groups;if(p){var D=[T].concat(N,L,f);void 0!==O&&D.push(O);var I=String(n.apply(void 0,D))}else I=y(T,f,L,N,O,n);L>=k&&(x+=f.slice(k,L)+I,k=L+T.length)}return x+f.slice(k)}];function y(e,i,n,r,o,a){var l=n+e.length,c=r.length,h=g;return void 0!==o&&(o=s(o),h=p),t.call(a,h,(function(t,s){var a;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return i.slice(0,n);case"'":return i.slice(l);case"<":a=o[s.slice(1,-1)];break;default:var h=+s;if(0===h)return t;if(h>c){var u=f(h/10);return 0===u?t:u<=c?void 0===r[u-1]?s.charAt(1):r[u-1]+s.charAt(1):t}a=r[h-1]}return void 0===a?"":a}))}}))},64765:(e,t,i)=>{"use strict";var n=i(27007),r=i(19670),s=i(84488),o=i(81150),a=i(97651);n("search",1,(function(e,t,i){return[function(t){var i=s(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,i):new RegExp(t)[e](String(i))},function(e){var n=i(t,e,this);if(n.done)return n.value;var s=r(e),l=String(this),c=s.lastIndex;o(c,0)||(s.lastIndex=0);var h=a(s,l);return o(s.lastIndex,c)||(s.lastIndex=c),null===h?-1:h.index}]}))},37268:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("small")},{small:function(){return r(this,"small","","")}})},23123:(e,t,i)=>{"use strict";var n=i(27007),r=i(47850),s=i(19670),o=i(84488),a=i(36707),l=i(31530),c=i(17466),h=i(97651),u=i(22261),d=i(47293),f=[].push,p=Math.min,g=4294967295,m=!d((function(){return!RegExp(g,"y")}));n("split",2,(function(e,t,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var n=String(o(this)),s=void 0===i?g:i>>>0;if(0===s)return[];if(void 0===e)return[n];if(!r(e))return t.call(n,e,s);for(var a,l,c,h=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=new RegExp(e.source,d+"g");(a=u.call(m,n))&&!((l=m.lastIndex)>p&&(h.push(n.slice(p,a.index)),a.length>1&&a.index<n.length&&f.apply(h,a.slice(1)),c=a[0].length,p=l,h.length>=s));)m.lastIndex===a.index&&m.lastIndex++;return p===n.length?!c&&m.test("")||h.push(""):h.push(n.slice(p)),h.length>s?h.slice(0,s):h}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var r=o(this),s=null==t?void 0:t[e];return void 0!==s?s.call(t,r,i):n.call(String(r),t,i)},function(e,r){var o=i(n,e,this,r,n!==t);if(o.done)return o.value;var u=s(e),d=String(this),f=a(u,RegExp),b=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),y=new f(m?u:"^(?:"+u.source+")",v),_=void 0===r?g:r>>>0;if(0===_)return[];if(0===d.length)return null===h(y,d)?[d]:[];for(var w=0,S=0,C=[];S<d.length;){y.lastIndex=m?S:0;var x,k=h(y,m?d:d.slice(S));if(null===k||(x=p(c(y.lastIndex+(m?0:S)),d.length))===w)S=l(d,S,b);else{if(C.push(d.slice(w,S)),C.length===_)return C;for(var E=1;E<=k.length-1;E++)if(C.push(k[E]),C.length===_)return C;S=w=x}}return C.push(d.slice(w)),C}]}),!m)},23157:(e,t,i)=>{"use strict";var n,r=i(82109),s=i(31236).f,o=i(17466),a=i(3929),l=i(84488),c=i(84964),h=i(31913),u="".startsWith,d=Math.min,f=c("startsWith");r({target:"String",proto:!0,forced:!!(h||f||(n=s(String.prototype,"startsWith"),!n||n.writable))&&!f},{startsWith:function(e){var t=String(l(this));a(e);var i=o(d(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return u?u.call(t,n,i):t.slice(i,i+n.length)===n}})},7397:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("strike")},{strike:function(){return r(this,"strike","","")}})},60086:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("sub")},{sub:function(){return r(this,"sub","","")}})},80623:(e,t,i)=>{"use strict";var n=i(82109),r=i(14230);n({target:"String",proto:!0,forced:i(43429)("sup")},{sup:function(){return r(this,"sup","","")}})},48702:(e,t,i)=>{"use strict";var n=i(82109),r=i(53111).end,s=i(76091)("trimEnd"),o=s?function(){return r(this)}:"".trimEnd;n({target:"String",proto:!0,forced:s},{trimEnd:o,trimRight:o})},55674:(e,t,i)=>{"use strict";var n=i(82109),r=i(53111).start,s=i(76091)("trimStart"),o=s?function(){return r(this)}:"".trimStart;n({target:"String",proto:!0,forced:s},{trimStart:o,trimLeft:o})},73210:(e,t,i)=>{"use strict";var n=i(82109),r=i(53111).trim;n({target:"String",proto:!0,forced:i(76091)("trim")},{trim:function(){return r(this)}})},72443:(e,t,i)=>{i(97235)("asyncIterator")},41817:(e,t,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(17854),o=i(86656),a=i(70111),l=i(3070).f,c=i(99920),h=s.Symbol;if(r&&"function"==typeof h&&(!("description"in h.prototype)||void 0!==h().description)){var u={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new h(e):void 0===e?h():h(e);return""===e&&(u[t]=!0),t};c(d,h);var f=d.prototype=h.prototype;f.constructor=d;var p=f.toString,g="Symbol(test)"==String(h("test")),m=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=p.call(e);if(o(u,e))return"";var i=g?t.slice(7,-1):t.replace(m,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:d})}},92401:(e,t,i)=>{i(97235)("hasInstance")},8722:(e,t,i)=>{i(97235)("isConcatSpreadable")},32165:(e,t,i)=>{i(97235)("iterator")},82526:(e,t,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(35005),o=i(31913),a=i(19781),l=i(30133),c=i(43307),h=i(47293),u=i(86656),d=i(43157),f=i(70111),p=i(19670),g=i(47908),m=i(45656),b=i(57593),v=i(79114),y=i(70030),_=i(81956),w=i(8006),S=i(1156),C=i(25181),x=i(31236),k=i(3070),E=i(55296),T=i(68880),L=i(31320),N=i(72309),M=i(6200),O=i(3501),D=i(69711),I=i(5112),A=i(6061),P=i(97235),R=i(58003),B=i(29909),F=i(42092).forEach,W=M("hidden"),V="Symbol",z=I("toPrimitive"),H=B.set,j=B.getterFor(V),U=Object.prototype,G=r.Symbol,K=s("JSON","stringify"),$=x.f,q=k.f,Z=S.f,Y=E.f,X=N("symbols"),Q=N("op-symbols"),J=N("string-to-symbol-registry"),ee=N("symbol-to-string-registry"),te=N("wks"),ie=r.QObject,ne=!ie||!ie.prototype||!ie.prototype.findChild,re=a&&h((function(){return 7!=y(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=$(U,t);n&&delete U[t],q(e,t,i),n&&e!==U&&q(U,t,n)}:q,se=function(e,t){var i=X[e]=y(G.prototype);return H(i,{type:V,tag:e,description:t}),a||(i.description=t),i},oe=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof G},ae=function(e,t,i){e===U&&ae(Q,t,i),p(e);var n=b(t,!0);return p(i),u(X,n)?(i.enumerable?(u(e,W)&&e[W][n]&&(e[W][n]=!1),i=y(i,{enumerable:v(0,!1)})):(u(e,W)||q(e,W,v(1,{})),e[W][n]=!0),re(e,n,i)):q(e,n,i)},le=function(e,t){p(e);var i=m(t),n=_(i).concat(de(i));return F(n,(function(t){a&&!ce.call(i,t)||ae(e,t,i[t])})),e},ce=function(e){var t=b(e,!0),i=Y.call(this,t);return!(this===U&&u(X,t)&&!u(Q,t))&&(!(i||!u(this,t)||!u(X,t)||u(this,W)&&this[W][t])||i)},he=function(e,t){var i=m(e),n=b(t,!0);if(i!==U||!u(X,n)||u(Q,n)){var r=$(i,n);return!r||!u(X,n)||u(i,W)&&i[W][n]||(r.enumerable=!0),r}},ue=function(e){var t=Z(m(e)),i=[];return F(t,(function(e){u(X,e)||u(O,e)||i.push(e)})),i},de=function(e){var t=e===U,i=Z(t?Q:m(e)),n=[];return F(i,(function(e){!u(X,e)||t&&!u(U,e)||n.push(X[e])})),n};(l||(L((G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=D(e),i=function(e){this===U&&i.call(Q,e),u(this,W)&&u(this[W],t)&&(this[W][t]=!1),re(this,t,v(1,e))};return a&&ne&&re(U,t,{configurable:!0,set:i}),se(t,e)}).prototype,"toString",(function(){return j(this).tag})),L(G,"withoutSetter",(function(e){return se(D(e),e)})),E.f=ce,k.f=ae,x.f=he,w.f=S.f=ue,C.f=de,A.f=function(e){return se(I(e),e)},a&&(q(G.prototype,"description",{configurable:!0,get:function(){return j(this).description}}),o||L(U,"propertyIsEnumerable",ce,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:G}),F(_(te),(function(e){P(e)})),n({target:V,stat:!0,forced:!l},{for:function(e){var t=String(e);if(u(J,t))return J[t];var i=G(t);return J[t]=i,ee[i]=t,i},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(u(ee,e))return ee[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),n({target:"Object",stat:!0,forced:!l,sham:!a},{create:function(e,t){return void 0===t?y(e):le(y(e),t)},defineProperty:ae,defineProperties:le,getOwnPropertyDescriptor:he}),n({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ue,getOwnPropertySymbols:de}),n({target:"Object",stat:!0,forced:h((function(){C.f(1)}))},{getOwnPropertySymbols:function(e){return C.f(g(e))}}),K)&&n({target:"JSON",stat:!0,forced:!l||h((function(){var e=G();return"[null]"!=K([e])||"{}"!=K({a:e})||"{}"!=K(Object(e))}))},{stringify:function(e,t,i){for(var n,r=[e],s=1;arguments.length>s;)r.push(arguments[s++]);if(n=t,(f(t)||void 0!==e)&&!oe(e))return d(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!oe(t))return t}),r[1]=t,K.apply(null,r)}});G.prototype[z]||T(G.prototype,z,G.prototype.valueOf),R(G,V),O[W]=!0},16066:(e,t,i)=>{i(97235)("matchAll")},69007:(e,t,i)=>{i(97235)("match")},83510:(e,t,i)=>{i(97235)("replace")},41840:(e,t,i)=>{i(97235)("search")},6982:(e,t,i)=>{i(97235)("species")},32159:(e,t,i)=>{i(97235)("split")},96649:(e,t,i)=>{i(97235)("toPrimitive")},39341:(e,t,i)=>{i(97235)("toStringTag")},60543:(e,t,i)=>{i(97235)("unscopables")},92990:(e,t,i)=>{"use strict";var n=i(90260),r=i(1048),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("copyWithin",(function(e,t){return r.call(s(this),e,t,arguments.length>2?arguments[2]:void 0)}))},18927:(e,t,i)=>{"use strict";var n=i(90260),r=i(42092).every,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0)}))},33105:(e,t,i)=>{"use strict";var n=i(90260),r=i(21285),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",(function(e){return r.apply(s(this),arguments)}))},35035:(e,t,i)=>{"use strict";var n=i(90260),r=i(42092).filter,s=i(36707),o=n.aTypedArray,a=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("filter",(function(e){for(var t=r(o(this),e,arguments.length>1?arguments[1]:void 0),i=s(this,this.constructor),n=0,l=t.length,c=new(a(i))(l);l>n;)c[n]=t[n++];return c}))},7174:(e,t,i)=>{"use strict";var n=i(90260),r=i(42092).findIndex,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0)}))},74345:(e,t,i)=>{"use strict";var n=i(90260),r=i(42092).find,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0)}))},44197:(e,t,i)=>{i(19843)("Float32",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},76495:(e,t,i)=>{i(19843)("Float64",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},32846:(e,t,i)=>{"use strict";var n=i(90260),r=i(42092).forEach,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",(function(e){r(s(this),e,arguments.length>1?arguments[1]:void 0)}))},98145:(e,t,i)=>{"use strict";var n=i(63832);(0,i(90260).exportTypedArrayStaticMethod)("from",i(97321),n)},44731:(e,t,i)=>{"use strict";var n=i(90260),r=i(41318).includes,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0)}))},77209:(e,t,i)=>{"use strict";var n=i(90260),r=i(41318).indexOf,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0)}))},35109:(e,t,i)=>{i(19843)("Int16",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},65125:(e,t,i)=>{i(19843)("Int32",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},87145:(e,t,i)=>{i(19843)("Int8",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},96319:(e,t,i)=>{"use strict";var n=i(17854),r=i(90260),s=i(66992),o=i(5112)("iterator"),a=n.Uint8Array,l=s.values,c=s.keys,h=s.entries,u=r.aTypedArray,d=r.exportTypedArrayMethod,f=a&&a.prototype[o],p=!!f&&("values"==f.name||null==f.name),g=function(){return l.call(u(this))};d("entries",(function(){return h.call(u(this))})),d("keys",(function(){return c.call(u(this))})),d("values",g,!p),d(o,g,!p)},58867:(e,t,i)=>{"use strict";var n=i(90260),r=n.aTypedArray,s=n.exportTypedArrayMethod,o=[].join;s("join",(function(e){return o.apply(r(this),arguments)}))},37789:(e,t,i)=>{"use strict";var n=i(90260),r=i(86583),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",(function(e){return r.apply(s(this),arguments)}))},33739:(e,t,i)=>{"use strict";var n=i(90260),r=i(42092).map,s=i(36707),o=n.aTypedArray,a=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("map",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(a(s(e,e.constructor)))(t)}))}))},95206:(e,t,i)=>{"use strict";var n=i(90260),r=i(63832),s=n.aTypedArrayConstructor;(0,n.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,i=new(s(this))(t);t>e;)i[e]=arguments[e++];return i}),r)},14483:(e,t,i)=>{"use strict";var n=i(90260),r=i(53671).right,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",(function(e){return r(s(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},29368:(e,t,i)=>{"use strict";var n=i(90260),r=i(53671).left,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",(function(e){return r(s(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},12056:(e,t,i)=>{"use strict";var n=i(90260),r=n.aTypedArray,s=n.exportTypedArrayMethod,o=Math.floor;s("reverse",(function(){for(var e,t=this,i=r(t).length,n=o(i/2),s=0;s<n;)e=t[s],t[s++]=t[--i],t[i]=e;return t}))},3462:(e,t,i)=>{"use strict";var n=i(90260),r=i(17466),s=i(84590),o=i(47908),a=i(47293),l=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",(function(e){l(this);var t=s(arguments.length>1?arguments[1]:void 0,1),i=this.length,n=o(e),a=r(n.length),c=0;if(a+t>i)throw RangeError("Wrong length");for(;c<a;)this[t+c]=n[c++]}),a((function(){new Int8Array(1).set({})})))},30678:(e,t,i)=>{"use strict";var n=i(90260),r=i(36707),s=i(47293),o=n.aTypedArray,a=n.aTypedArrayConstructor,l=n.exportTypedArrayMethod,c=[].slice;l("slice",(function(e,t){for(var i=c.call(o(this),e,t),n=r(this,this.constructor),s=0,l=i.length,h=new(a(n))(l);l>s;)h[s]=i[s++];return h}),s((function(){new Int8Array(1).slice()})))},27462:(e,t,i)=>{"use strict";var n=i(90260),r=i(42092).some,s=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0)}))},33824:(e,t,i)=>{"use strict";var n=i(90260),r=n.aTypedArray,s=n.exportTypedArrayMethod,o=[].sort;s("sort",(function(e){return o.call(r(this),e)}))},55021:(e,t,i)=>{"use strict";var n=i(90260),r=i(17466),s=i(51400),o=i(36707),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",(function(e,t){var i=a(this),n=i.length,l=s(e,n);return new(o(i,i.constructor))(i.buffer,i.byteOffset+l*i.BYTES_PER_ELEMENT,r((void 0===t?n:s(t,n))-l))}))},12974:(e,t,i)=>{"use strict";var n=i(17854),r=i(90260),s=i(47293),o=n.Int8Array,a=r.aTypedArray,l=r.exportTypedArrayMethod,c=[].toLocaleString,h=[].slice,u=!!o&&s((function(){c.call(new o(1))}));l("toLocaleString",(function(){return c.apply(u?h.call(a(this)):a(this),arguments)}),s((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!s((function(){o.prototype.toLocaleString.call([1,2])})))},15016:(e,t,i)=>{"use strict";var n=i(90260).exportTypedArrayMethod,r=i(47293),s=i(17854).Uint8Array,o=s&&s.prototype||{},a=[].toString,l=[].join;r((function(){a.call({})}))&&(a=function(){return l.call(this)});var c=o.toString!=a;n("toString",a,c)},8255:(e,t,i)=>{i(19843)("Uint16",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},29135:(e,t,i)=>{i(19843)("Uint32",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},82472:(e,t,i)=>{i(19843)("Uint8",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},49743:(e,t,i)=>{i(19843)("Uint8",(function(e){return function(t,i,n){return e(this,t,i,n)}}),!0)},4129:(e,t,i)=>{"use strict";var n,r=i(17854),s=i(12248),o=i(62423),a=i(77710),l=i(29320),c=i(70111),h=i(29909).enforce,u=i(68536),d=!r.ActiveXObject&&"ActiveXObject"in r,f=Object.isExtensible,p=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},g=e.exports=a("WeakMap",p,l);if(u&&d){n=l.getConstructor(p,"WeakMap",!0),o.REQUIRED=!0;var m=g.prototype,b=m.delete,v=m.has,y=m.get,_=m.set;s(m,{delete:function(e){if(c(e)&&!f(e)){var t=h(this);return t.frozen||(t.frozen=new n),b.call(this,e)||t.frozen.delete(e)}return b.call(this,e)},has:function(e){if(c(e)&&!f(e)){var t=h(this);return t.frozen||(t.frozen=new n),v.call(this,e)||t.frozen.has(e)}return v.call(this,e)},get:function(e){if(c(e)&&!f(e)){var t=h(this);return t.frozen||(t.frozen=new n),v.call(this,e)?y.call(this,e):t.frozen.get(e)}return y.call(this,e)},set:function(e,t){if(c(e)&&!f(e)){var i=h(this);i.frozen||(i.frozen=new n),v.call(this,e)?_.call(this,e,t):i.frozen.set(e,t)}else _.call(this,e,t);return this}})}},38478:(e,t,i)=>{"use strict";i(77710)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i(29320))},8628:(e,t,i)=>{i(9170)},8e4:(e,t,i)=>{var n=i(82109),r=i(43157),s=Object.isFrozen,o=function(e,t){if(!s||!r(e)||!s(e))return!1;for(var i,n=0,o=e.length;n<o;)if(!("string"==typeof(i=e[n++])||t&&void 0===i))return!1;return 0!==o};n({target:"Array",stat:!0},{isTemplateObject:function(e){if(!o(e,!0))return!1;var t=e.raw;return!(t.length!==e.length||!o(t,!1))}})},83475:(e,t,i)=>{"use strict";var n=i(19781),r=i(51223),s=i(47908),o=i(17466),a=i(3070).f;n&&!("lastIndex"in[])&&(a(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=s(this),t=o(e.length);return 0==t?0:t-1}}),r("lastIndex"))},46273:(e,t,i)=>{"use strict";var n=i(19781),r=i(51223),s=i(47908),o=i(17466),a=i(3070).f;n&&!("lastItem"in[])&&(a(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=s(this),t=o(e.length);return 0==t?void 0:e[t-1]},set:function(e){var t=s(this),i=o(t.length);return t[0==i?0:i-1]=e}}),r("lastItem"))},40787:(e,t,i)=>{"use strict";var n=i(82109),r=i(19670),s=i(45348)((function(e,t){var i=this,n=i.iterator;return t.resolve(r(i.next.call(n,e))).then((function(e){return r(e).done?(i.done=!0,{done:!0,value:void 0}):{done:!1,value:[i.index++,e.value]}}))}));n({target:"AsyncIterator",proto:!0,real:!0},{asIndexedPairs:function(){return new s({iterator:r(this),index:0})}})},66342:(e,t,i)=>{"use strict";var n=i(82109),r=i(25787),s=i(68880),o=i(86656),a=i(5112),l=i(66462),c=i(31913),h=a("toStringTag"),u=function(){r(this,u)};u.prototype=l,o(l,h)||s(l,h,"AsyncIterator"),o(l,"constructor")&&l.constructor!==Object||s(l,"constructor",u),n({global:!0,forced:c},{AsyncIterator:u})},23647:(e,t,i)=>{"use strict";var n=i(82109),r=i(19670),s=i(73002),o=i(45348)((function(e,t){var i=this;return new t((function(n,s){var o=function(){try{t.resolve(r(i.next.call(i.iterator,i.remaining?void 0:e))).then((function(e){try{r(e).done?(i.done=!0,n({done:!0,value:void 0})):i.remaining?(i.remaining--,o()):n({done:!1,value:e.value})}catch(e){s(e)}}),s)}catch(e){s(e)}};o()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{drop:function(e){return new o({iterator:r(this),remaining:s(e)})}})},68216:(e,t,i)=>{"use strict";var n=i(82109),r=i(12269).every;n({target:"AsyncIterator",proto:!0,real:!0},{every:function(e){return r(this,e)}})},88449:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(19670),o=i(45348)((function(e,t){var i=this,n=i.filterer;return new t((function(r,o){var a=function(){try{t.resolve(s(i.next.call(i.iterator,e))).then((function(e){try{if(s(e).done)i.done=!0,r({done:!0,value:void 0});else{var l=e.value;t.resolve(n(l)).then((function(e){e?r({done:!1,value:l}):a()}),o)}}catch(e){o(e)}}),o)}catch(e){o(e)}};a()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{filter:function(e){return new o({iterator:s(this),filterer:r(e)})}})},31672:(e,t,i)=>{"use strict";var n=i(82109),r=i(12269).find;n({target:"AsyncIterator",proto:!0,real:!0},{find:function(e){return r(this,e)}})},74326:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(19670),o=i(45348),a=i(28523),l=o((function(e,t){var i,n,o=this,l=o.mapper;return new t((function(c,h){var u=function(){try{t.resolve(s(o.next.call(o.iterator,e))).then((function(e){try{s(e).done?(o.done=!0,c({done:!0,value:void 0})):t.resolve(l(e.value)).then((function(e){try{if(void 0!==(n=a(e)))return o.innerIterator=i=s(n.call(e)),o.innerNext=r(i.next),d();h(TypeError(".flatMap callback should return an iterable object"))}catch(e){h(e)}}),h)}catch(e){h(e)}}),h)}catch(e){h(e)}},d=function(){if(i=o.innerIterator)try{t.resolve(s(o.innerNext.call(i))).then((function(e){try{s(e).done?(o.innerIterator=o.innerNext=null,u()):c({done:!1,value:e.value})}catch(e){h(e)}}),h)}catch(e){h(e)}else u()};d()}))}));n({target:"AsyncIterator",proto:!0,real:!0},{flatMap:function(e){return new l({iterator:s(this),mapper:r(e),innerIterator:null,innerNext:null})}})},15581:(e,t,i)=>{"use strict";var n=i(82109),r=i(12269).forEach;n({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(e){return r(this,e)}})},78631:(e,t,i)=>{var n=i(82109),r=i(40857),s=i(13099),o=i(19670),a=i(47908),l=i(45348),c=i(28523),h=r.AsyncIterator,u=l((function(e){return o(this.next.call(this.iterator,e))}),!0);n({target:"AsyncIterator",stat:!0},{from:function(e){var t,i=a(e),n=c(i);if(null!=n){if((t=s(n).call(i))instanceof h)return t}else t=i;return new u({iterator:t})}})},57640:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(19670),o=i(45348)((function(e,t){var i=this,n=i.mapper;return t.resolve(s(i.next.call(i.iterator,e))).then((function(e){return s(e).done?(i.done=!0,{done:!0,value:void 0}):t.resolve(n(e.value)).then((function(e){return{done:!1,value:e}}))}))}));n({target:"AsyncIterator",proto:!0,real:!0},{map:function(e){return new o({iterator:s(this),mapper:r(e)})}})},25387:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(19670),o=i(35005)("Promise");n({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(e){var t=s(this),i=r(t.next),n=arguments.length<2,a=n?void 0:arguments[1];return r(e),new o((function(r,l){var c=function(){try{o.resolve(s(i.call(t))).then((function(t){try{if(s(t).done)n?l(TypeError("Reduce of empty iterator with no initial value")):r(a);else{var i=t.value;n?(n=!1,a=i,c()):o.resolve(e(a,i)).then((function(e){a=e,c()}),l)}}catch(e){l(e)}}),l)}catch(e){l(e)}};c()}))}})},64211:(e,t,i)=>{"use strict";var n=i(82109),r=i(12269).some;n({target:"AsyncIterator",proto:!0,real:!0},{some:function(e){return r(this,e)}})},12771:(e,t,i)=>{"use strict";var n=i(82109),r=i(19670),s=i(73002),o=i(45348)((function(e,t){var i,n,r=this.iterator;return this.remaining--?this.next.call(r,e):(n={done:!0,value:void 0},this.done=!0,void 0!==(i=r.return)?t.resolve(i.call(r)).then((function(){return n})):n)}));n({target:"AsyncIterator",proto:!0,real:!0},{take:function(e){return new o({iterator:r(this),remaining:s(e)})}})},62962:(e,t,i)=>{"use strict";var n=i(82109),r=i(12269).toArray;n({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return r(this)}})},51568:(e,t,i)=>{var n=i(82109),r=i(10313),s=i(35005),o=i(70030),a=function(){var e=s("Object","freeze");return e?e(o(null)):o(null)};n({global:!0},{compositeKey:function(){return r.apply(Object,arguments).get("object",a)}})},26349:(e,t,i)=>{var n=i(82109),r=i(10313),s=i(35005);n({global:!0},{compositeSymbol:function(){return 1===arguments.length&&"string"==typeof arguments[0]?s("Symbol").for(arguments[0]):r.apply(null,arguments).get("symbol",s("Symbol"))}})},65743:(e,t,i)=>{i(35837)},85567:(e,t,i)=>{"use strict";var n=i(82109),r=i(19670),s=i(54956)((function(e){var t=r(this.next.call(this.iterator,e));if(!(this.done=!!t.done))return[this.index++,t.value]}));n({target:"Iterator",proto:!0,real:!0},{asIndexedPairs:function(){return new s({iterator:r(this),index:0})}})},2490:(e,t,i)=>{"use strict";var n=i(82109),r=i(17854),s=i(25787),o=i(68880),a=i(47293),l=i(86656),c=i(5112),h=i(13383).IteratorPrototype,u=i(31913),d=c("iterator"),f=c("toStringTag"),p=r.Iterator,g=u||"function"!=typeof p||p.prototype!==h||!a((function(){p({})})),m=function(){s(this,m)};u&&o(h={},d,(function(){return this})),l(h,f)||o(h,f,"Iterator"),!g&&l(h,"constructor")&&h.constructor!==Object||o(h,"constructor",m),m.prototype=h,n({global:!0,forced:g},{Iterator:m})},5332:(e,t,i)=>{"use strict";var n=i(82109),r=i(19670),s=i(73002),o=i(54956)((function(e){for(var t,i=this.iterator,n=this.next;this.remaining;)if(this.remaining--,t=r(n.call(i)),this.done=!!t.done)return;if(t=r(n.call(i,e)),!(this.done=!!t.done))return t.value}));n({target:"Iterator",proto:!0,real:!0},{drop:function(e){return new o({iterator:r(this),remaining:s(e)})}})},79433:(e,t,i)=>{"use strict";var n=i(82109),r=i(20408),s=i(13099),o=i(19670);n({target:"Iterator",proto:!0,real:!0},{every:function(e){return o(this),s(e),!r(this,(function(t,i){if(!e(t))return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},59849:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(19670),o=i(54956),a=i(53411),l=o((function(e){for(var t,i,n=this.iterator,r=this.filterer,o=this.next;;){if(t=s(o.call(n,e)),this.done=!!t.done)return;if(i=t.value,a(n,r,i))return i}}));n({target:"Iterator",proto:!0,real:!0},{filter:function(e){return new l({iterator:s(this),filterer:r(e)})}})},59461:(e,t,i)=>{"use strict";var n=i(82109),r=i(20408),s=i(13099),o=i(19670);n({target:"Iterator",proto:!0,real:!0},{find:function(e){return o(this),s(e),r(this,(function(t,i){if(e(t))return i(t)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},82499:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(19670),o=i(71246),a=i(54956),l=i(99212),c=a((function(e){for(var t,i,n,a,c=this.iterator,h=this.mapper;;)try{if(a=this.innerIterator){if(!(t=s(this.innerNext.call(a))).done)return t.value;this.innerIterator=this.innerNext=null}if(t=s(this.next.call(c,e)),this.done=!!t.done)return;if(i=h(t.value),void 0===(n=o(i)))throw TypeError(".flatMap callback should return an iterable object");this.innerIterator=a=s(n.call(i)),this.innerNext=r(a.next)}catch(e){throw l(c),e}}));n({target:"Iterator",proto:!0,real:!0},{flatMap:function(e){return new c({iterator:s(this),mapper:r(e),innerIterator:null,innerNext:null})}})},34514:(e,t,i)=>{"use strict";var n=i(82109),r=i(20408),s=i(19670);n({target:"Iterator",proto:!0,real:!0},{forEach:function(e){r(s(this),e,{IS_ITERATOR:!0})}})},26877:(e,t,i)=>{var n=i(82109),r=i(40857),s=i(13099),o=i(19670),a=i(47908),l=i(54956),c=i(71246),h=r.Iterator,u=l((function(e){var t=o(this.next.call(this.iterator,e));if(!(this.done=!!t.done))return t.value}),!0);n({target:"Iterator",stat:!0},{from:function(e){var t,i=a(e),n=c(i);if(null!=n){if((t=s(n).call(i))instanceof h)return t}else t=i;return new u({iterator:t})}})},9924:(e,t,i)=>{"use strict";var n=i(82109),r=i(13099),s=i(19670),o=i(54956),a=i(53411),l=o((function(e){var t=this.iterator,i=s(this.next.call(t,e));if(!(this.done=!!i.done))return a(t,this.mapper,i.value)}));n({target:"Iterator",proto:!0,real:!0},{map:function(e){return new l({iterator:s(this),mapper:r(e)})}})},72608:(e,t,i)=>{"use strict";var n=i(82109),r=i(20408),s=i(13099),o=i(19670);n({target:"Iterator",proto:!0,real:!0},{reduce:function(e){o(this),s(e);var t=arguments.length<2,i=t?void 0:arguments[1];if(r(this,(function(n){t?(t=!1,i=n):i=e(i,n)}),{IS_ITERATOR:!0}),t)throw TypeError("Reduce of empty iterator with no initial value");return i}})},41874:(e,t,i)=>{"use strict";var n=i(82109),r=i(20408),s=i(13099),o=i(19670);n({target:"Iterator",proto:!0,real:!0},{some:function(e){return o(this),s(e),r(this,(function(t,i){if(e(t))return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},66043:(e,t,i)=>{"use strict";var n=i(82109),r=i(19670),s=i(73002),o=i(54956),a=i(99212),l=o((function(e){var t=this.iterator;if(!this.remaining--)return this.done=!0,a(t);var i=r(this.next.call(t,e));return(this.done=!!i.done)?void 0:i.value}));n({target:"Iterator",proto:!0,real:!0},{take:function(e){return new l({iterator:r(this),remaining:s(e)})}})},23748:(e,t,i)=>{"use strict";var n=i(82109),r=i(20408),s=i(19670),o=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return r(s(this),o,{that:e,IS_ITERATOR:!0}),e}})},10072:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(34092);n({target:"Map",proto:!0,real:!0,forced:r},{deleteAll:function(){return s.apply(this,arguments)}})},23042:(e,t,i)=>{"use strict";i(82109)({target:"Map",proto:!0,real:!0,forced:i(31913)},{emplace:i(37502)})},99137:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(49974),a=i(54647),l=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{every:function(e){var t=s(this),i=a(t),n=o(e,arguments.length>1?arguments[1]:void 0,3);return!l(i,(function(e,i,r){if(!n(i,e,t))return r()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},71957:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(49974),c=i(36707),h=i(54647),u=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{filter:function(e){var t=o(this),i=h(t),n=l(e,arguments.length>1?arguments[1]:void 0,3),r=new(c(t,s("Map"))),d=a(r.set);return u(i,(function(e,i){n(i,e,t)&&d.call(r,e,i)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),r}})},103:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(49974),a=i(54647),l=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{findKey:function(e){var t=s(this),i=a(t),n=o(e,arguments.length>1?arguments[1]:void 0,3);return l(i,(function(e,i,r){if(n(i,e,t))return r(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},96306:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(49974),a=i(54647),l=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{find:function(e){var t=s(this),i=a(t),n=o(e,arguments.length>1?arguments[1]:void 0,3);return l(i,(function(e,i,r){if(n(i,e,t))return r(i)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},8582:(e,t,i)=>{i(82109)({target:"Map",stat:!0},{from:i(27296)})},90618:(e,t,i)=>{"use strict";var n=i(82109),r=i(20408),s=i(13099);n({target:"Map",stat:!0},{groupBy:function(e,t){var i=new this;s(t);var n=s(i.has),o=s(i.get),a=s(i.set);return r(e,(function(e){var r=t(e);n.call(i,r)?o.call(i,r).push(e):a.call(i,r,[e])})),i}})},74592:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(54647),a=i(46465),l=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{includes:function(e){return l(o(s(this)),(function(t,i,n){if(a(i,e))return n()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},88440:(e,t,i)=>{"use strict";var n=i(82109),r=i(20408),s=i(13099);n({target:"Map",stat:!0},{keyBy:function(e,t){var i=new this;s(t);var n=s(i.set);return r(e,(function(e){n.call(i,t(e),e)})),i}})},58276:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(54647),a=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{keyOf:function(e){return a(o(s(this)),(function(t,i,n){if(i===e)return n(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},35082:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(49974),c=i(36707),h=i(54647),u=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{mapKeys:function(e){var t=o(this),i=h(t),n=l(e,arguments.length>1?arguments[1]:void 0,3),r=new(c(t,s("Map"))),d=a(r.set);return u(i,(function(e,i){d.call(r,n(i,e,t),i)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),r}})},12813:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(49974),c=i(36707),h=i(54647),u=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{mapValues:function(e){var t=o(this),i=h(t),n=l(e,arguments.length>1?arguments[1]:void 0,3),r=new(c(t,s("Map"))),d=a(r.set);return u(i,(function(e,i){d.call(r,e,n(i,e,t))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),r}})},18222:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(13099),a=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{merge:function(e){for(var t=s(this),i=o(t.set),n=0;n<arguments.length;)a(arguments[n++],i,{that:t,AS_ENTRIES:!0});return t}})},24838:(e,t,i)=>{i(82109)({target:"Map",stat:!0},{of:i(82044)})},38563:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(13099),a=i(54647),l=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{reduce:function(e){var t=s(this),i=a(t),n=arguments.length<2,r=n?void 0:arguments[1];if(o(e),l(i,(function(i,s){n?(n=!1,r=s):r=e(r,s,i,t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),n)throw TypeError("Reduce of empty map with no initial value");return r}})},50336:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(49974),a=i(54647),l=i(20408);n({target:"Map",proto:!0,real:!0,forced:r},{some:function(e){var t=s(this),i=a(t),n=o(e,arguments.length>1?arguments[1]:void 0,3);return l(i,(function(e,i,r){if(n(i,e,t))return r()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},74442:(e,t,i)=>{"use strict";i(82109)({target:"Map",proto:!0,real:!0,forced:i(31913)},{updateOrInsert:i(8154)})},7512:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(13099);n({target:"Map",proto:!0,real:!0,forced:r},{update:function(e,t){var i=s(this),n=arguments.length;o(t);var r=i.has(e);if(!r&&n<3)throw TypeError("Updating absent value");var a=r?i.get(e):o(n>2?arguments[2]:void 0)(e,i);return i.set(e,t(a,e,i)),i}})},87713:(e,t,i)=>{"use strict";i(82109)({target:"Map",proto:!0,real:!0,forced:i(31913)},{upsert:i(8154)})},46603:(e,t,i)=>{var n=i(82109),r=Math.min,s=Math.max;n({target:"Math",stat:!0},{clamp:function(e,t,i){return r(i,s(t,e))}})},70100:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{DEG_PER_RAD:Math.PI/180})},10490:(e,t,i)=>{var n=i(82109),r=180/Math.PI;n({target:"Math",stat:!0},{degrees:function(e){return e*r}})},13187:(e,t,i)=>{var n=i(82109),r=i(47103),s=i(26130);n({target:"Math",stat:!0},{fscale:function(e,t,i,n,o){return s(r(e,t,i,n,o))}})},60092:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{iaddh:function(e,t,i,n){var r=e>>>0,s=i>>>0;return(t>>>0)+(n>>>0)+((r&s|(r|s)&~(r+s>>>0))>>>31)|0}})},19041:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{imulh:function(e,t){var i=65535,n=+e,r=+t,s=n&i,o=r&i,a=n>>16,l=r>>16,c=(a*o>>>0)+(s*o>>>16);return a*l+(c>>16)+((s*l>>>0)+(c&i)>>16)}})},30666:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{isubh:function(e,t,i,n){var r=e>>>0,s=i>>>0;return(t>>>0)-(n>>>0)-((~r&s|~(r^s)&r-s>>>0)>>>31)|0}})},51638:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{RAD_PER_DEG:180/Math.PI})},62975:(e,t,i)=>{var n=i(82109),r=Math.PI/180;n({target:"Math",stat:!0},{radians:function(e){return e*r}})},15728:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{scale:i(47103)})},46056:(e,t,i)=>{var n=i(82109),r=i(19670),s=i(77023),o=i(24994),a=i(29909),l="Seeded Random",c="Seeded Random Generator",h=a.set,u=a.getterFor(c),d=o((function(e){h(this,{type:c,seed:e%2147483647})}),l,(function(){var e=u(this);return{value:(1073741823&(e.seed=(1103515245*e.seed+12345)%2147483647))/1073741823,done:!1}}));n({target:"Math",stat:!0,forced:!0},{seededPRNG:function(e){var t=r(e).seed;if(!s(t))throw TypeError('Math.seededPRNG() argument should have a "seed" field with a finite value.');return new d(t)}})},44299:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{signbit:function(e){return(e=+e)==e&&0==e?1/e==-1/0:e<0}})},5162:(e,t,i)=>{i(82109)({target:"Math",stat:!0},{umulh:function(e,t){var i=65535,n=+e,r=+t,s=n&i,o=r&i,a=n>>>16,l=r>>>16,c=(a*o>>>0)+(s*o>>>16);return a*l+(c>>>16)+((s*l>>>0)+(c&i)>>>16)}})},50292:(e,t,i)=>{"use strict";var n=i(82109),r=i(99958),s=i(83009),o="Invalid number representation",a=/^[\da-z]+$/;n({target:"Number",stat:!0},{fromString:function(e,t){var i,n,l=1;if("string"!=typeof e)throw TypeError(o);if(!e.length)throw SyntaxError(o);if("-"==e.charAt(0)&&(l=-1,!(e=e.slice(1)).length))throw SyntaxError(o);if((i=void 0===t?10:r(t))<2||i>36)throw RangeError("Invalid radix");if(!a.test(e)||(n=s(e,i)).toString(i)!==e)throw SyntaxError(o);return l*n}})},99964:(e,t,i)=>{"use strict";var n=i(82109),r=i(60996);n({target:"Object",stat:!0},{iterateEntries:function(e){return new r(e,"entries")}})},75238:(e,t,i)=>{"use strict";var n=i(82109),r=i(60996);n({target:"Object",stat:!0},{iterateKeys:function(e){return new r(e,"keys")}})},4987:(e,t,i)=>{"use strict";var n=i(82109),r=i(60996);n({target:"Object",stat:!0},{iterateValues:function(e){return new r(e,"values")}})},1025:(e,t,i)=>{"use strict";var n=i(82109),r=i(19781),s=i(96340),o=i(13099),a=i(19670),l=i(70111),c=i(25787),h=i(3070).f,u=i(68880),d=i(12248),f=i(18554),p=i(20408),g=i(842),m=i(5112),b=i(29909),v=m("observable"),y=b.get,_=b.set,w=function(e){return null==e?void 0:o(e)},S=function(e){var t=e.cleanup;if(t){e.cleanup=void 0;try{t()}catch(e){g(e)}}},C=function(e){return void 0===e.observer},x=function(e,t){if(!r){e.closed=!0;var i=t.subscriptionObserver;i&&(i.closed=!0)}t.observer=void 0},k=function(e,t){var i,n=_(this,{cleanup:void 0,observer:a(e),subscriptionObserver:void 0});r||(this.closed=!1);try{(i=w(e.start))&&i.call(e,this)}catch(e){g(e)}if(!C(n)){var s=n.subscriptionObserver=new E(this);try{var l=t(s),c=l;null!=l&&(n.cleanup="function"==typeof l.unsubscribe?function(){c.unsubscribe()}:o(l))}catch(e){return void s.error(e)}C(n)&&S(n)}};k.prototype=d({},{unsubscribe:function(){var e=y(this);C(e)||(x(this,e),S(e))}}),r&&h(k.prototype,"closed",{configurable:!0,get:function(){return C(y(this))}});var E=function(e){_(this,{subscription:e}),r||(this.closed=!1)};E.prototype=d({},{next:function(e){var t=y(y(this).subscription);if(!C(t)){var i=t.observer;try{var n=w(i.next);n&&n.call(i,e)}catch(e){g(e)}}},error:function(e){var t=y(this).subscription,i=y(t);if(!C(i)){var n=i.observer;x(t,i);try{var r=w(n.error);r?r.call(n,e):g(e)}catch(e){g(e)}S(i)}},complete:function(){var e=y(this).subscription,t=y(e);if(!C(t)){var i=t.observer;x(e,t);try{var n=w(i.complete);n&&n.call(i)}catch(e){g(e)}S(t)}}}),r&&h(E.prototype,"closed",{configurable:!0,get:function(){return C(y(y(this).subscription))}});var T=function(e){c(this,T,"Observable"),_(this,{subscriber:o(e)})};d(T.prototype,{subscribe:function(e){var t=arguments.length;return new k("function"==typeof e?{next:e,error:t>1?arguments[1]:void 0,complete:t>2?arguments[2]:void 0}:l(e)?e:{},y(this).subscriber)}}),d(T,{from:function(e){var t="function"==typeof this?this:T,i=w(a(e)[v]);if(i){var n=a(i.call(e));return n.constructor===t?n:new t((function(e){return n.subscribe(e)}))}var r=f(e);return new t((function(e){p(r,(function(t,i){if(e.next(t),e.closed)return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}),e.complete()}))},of:function(){for(var e="function"==typeof this?this:T,t=arguments.length,i=new Array(t),n=0;n<t;)i[n]=arguments[n++];return new e((function(e){for(var n=0;n<t;n++)if(e.next(i[n]),e.closed)return;e.complete()}))}}),u(T.prototype,v,(function(){return this})),n({global:!0},{Observable:T}),s("Observable")},97314:(e,t,i)=>{i(17922)},96290:(e,t,i)=>{i(34668)},77479:(e,t,i)=>{"use strict";var n=i(82109),r=i(78523),s=i(12534);n({target:"Promise",stat:!0},{try:function(e){var t=r.f(this),i=s(e);return(i.error?t.reject:t.resolve)(i.value),t.promise}})},34582:(e,t,i)=>{var n=i(82109),r=i(38845),s=i(19670),o=r.toKey,a=r.set;n({target:"Reflect",stat:!0},{defineMetadata:function(e,t,i){var n=arguments.length<4?void 0:o(arguments[3]);a(e,t,s(i),n)}})},47896:(e,t,i)=>{var n=i(82109),r=i(38845),s=i(19670),o=r.toKey,a=r.getMap,l=r.store;n({target:"Reflect",stat:!0},{deleteMetadata:function(e,t){var i=arguments.length<3?void 0:o(arguments[2]),n=a(s(t),i,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var r=l.get(t);return r.delete(i),!!r.size||l.delete(t)}})},98558:(e,t,i)=>{var n=i(82109),r=i(70189),s=i(38845),o=i(19670),a=i(79518),l=i(20408),c=s.keys,h=s.toKey,u=function(e,t){var i=c(e,t),n=a(e);if(null===n)return i;var s,o,h=u(n,t);return h.length?i.length?(s=new r(i.concat(h)),l(s,(o=[]).push,{that:o}),o):h:i};n({target:"Reflect",stat:!0},{getMetadataKeys:function(e){var t=arguments.length<2?void 0:h(arguments[1]);return u(o(e),t)}})},12647:(e,t,i)=>{var n=i(82109),r=i(38845),s=i(19670),o=i(79518),a=r.has,l=r.get,c=r.toKey,h=function(e,t,i){if(a(e,t,i))return l(e,t,i);var n=o(t);return null!==n?h(e,n,i):void 0};n({target:"Reflect",stat:!0},{getMetadata:function(e,t){var i=arguments.length<3?void 0:c(arguments[2]);return h(e,s(t),i)}})},97507:(e,t,i)=>{var n=i(82109),r=i(38845),s=i(19670),o=r.keys,a=r.toKey;n({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(e){var t=arguments.length<2?void 0:a(arguments[1]);return o(s(e),t)}})},84018:(e,t,i)=>{var n=i(82109),r=i(38845),s=i(19670),o=r.get,a=r.toKey;n({target:"Reflect",stat:!0},{getOwnMetadata:function(e,t){var i=arguments.length<3?void 0:a(arguments[2]);return o(e,s(t),i)}})},61605:(e,t,i)=>{var n=i(82109),r=i(38845),s=i(19670),o=i(79518),a=r.has,l=r.toKey,c=function(e,t,i){if(a(e,t,i))return!0;var n=o(t);return null!==n&&c(e,n,i)};n({target:"Reflect",stat:!0},{hasMetadata:function(e,t){var i=arguments.length<3?void 0:l(arguments[2]);return c(e,s(t),i)}})},49076:(e,t,i)=>{var n=i(82109),r=i(38845),s=i(19670),o=r.has,a=r.toKey;n({target:"Reflect",stat:!0},{hasOwnMetadata:function(e,t){var i=arguments.length<3?void 0:a(arguments[2]);return o(e,s(t),i)}})},34999:(e,t,i)=>{var n=i(82109),r=i(38845),s=i(19670),o=r.toKey,a=r.set;n({target:"Reflect",stat:!0},{metadata:function(e,t){return function(i,n){a(e,t,s(i),o(n))}}})},88921:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(31501);n({target:"Set",proto:!0,real:!0,forced:r},{addAll:function(){return s.apply(this,arguments)}})},96248:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(34092);n({target:"Set",proto:!0,real:!0,forced:r},{deleteAll:function(){return s.apply(this,arguments)}})},13599:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(36707),c=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{difference:function(e){var t=o(this),i=new(l(t,s("Set")))(t),n=a(i.delete);return c(e,(function(e){n.call(i,e)})),i}})},11477:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(49974),a=i(96767),l=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{every:function(e){var t=s(this),i=a(t),n=o(e,arguments.length>1?arguments[1]:void 0,3);return!l(i,(function(e,i){if(!n(e,e,t))return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},64362:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(49974),c=i(36707),h=i(96767),u=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{filter:function(e){var t=o(this),i=h(t),n=l(e,arguments.length>1?arguments[1]:void 0,3),r=new(c(t,s("Set"))),d=a(r.add);return u(i,(function(e){n(e,e,t)&&d.call(r,e)}),{IS_ITERATOR:!0}),r}})},15389:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(49974),a=i(96767),l=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{find:function(e){var t=s(this),i=a(t),n=o(e,arguments.length>1?arguments[1]:void 0,3);return l(i,(function(e,i){if(n(e,e,t))return i(e)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},46006:(e,t,i)=>{i(82109)({target:"Set",stat:!0},{from:i(27296)})},90401:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(36707),c=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{intersection:function(e){var t=o(this),i=new(l(t,s("Set"))),n=a(t.has),r=a(i.add);return c(e,(function(e){n.call(t,e)&&r.call(i,e)})),i}})},45164:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(13099),a=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{isDisjointFrom:function(e){var t=s(this),i=o(t.has);return!a(e,(function(e,n){if(!0===i.call(t,e))return n()}),{INTERRUPTED:!0}).stopped}})},91238:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(18554),c=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{isSubsetOf:function(e){var t=l(this),i=o(e),n=i.has;return"function"!=typeof n&&(i=new(s("Set"))(e),n=a(i.has)),!c(t,(function(e,t){if(!1===n.call(i,e))return t()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},54837:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(13099),a=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{isSupersetOf:function(e){var t=s(this),i=o(t.has);return!a(e,(function(e,n){if(!1===i.call(t,e))return n()}),{INTERRUPTED:!0}).stopped}})},87485:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(96767),a=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{join:function(e){var t=s(this),i=o(t),n=void 0===e?",":String(e),r=[];return a(i,r.push,{that:r,IS_ITERATOR:!0}),r.join(n)}})},56767:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(49974),c=i(36707),h=i(96767),u=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{map:function(e){var t=o(this),i=h(t),n=l(e,arguments.length>1?arguments[1]:void 0,3),r=new(c(t,s("Set"))),d=a(r.add);return u(i,(function(e){d.call(r,n(e,e,t))}),{IS_ITERATOR:!0}),r}})},69916:(e,t,i)=>{i(82109)({target:"Set",stat:!0},{of:i(82044)})},76651:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(13099),a=i(96767),l=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{reduce:function(e){var t=s(this),i=a(t),n=arguments.length<2,r=n?void 0:arguments[1];if(o(e),l(i,(function(i){n?(n=!1,r=i):r=e(r,i,i,t)}),{IS_ITERATOR:!0}),n)throw TypeError("Reduce of empty set with no initial value");return r}})},61437:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(19670),o=i(49974),a=i(96767),l=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{some:function(e){var t=s(this),i=a(t),n=o(e,arguments.length>1?arguments[1]:void 0,3);return l(i,(function(e,i){if(n(e,e,t))return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},35285:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(36707),c=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{symmetricDifference:function(e){var t=o(this),i=new(l(t,s("Set")))(t),n=a(i.delete),r=a(i.add);return c(e,(function(e){n.call(i,e)||r.call(i,e)})),i}})},39865:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(35005),o=i(19670),a=i(13099),l=i(36707),c=i(20408);n({target:"Set",proto:!0,real:!0,forced:r},{union:function(e){var t=o(this),i=new(l(t,s("Set")))(t);return c(e,a(i.add),{that:i}),i}})},86035:(e,t,i)=>{"use strict";var n=i(82109),r=i(28710).charAt;n({target:"String",proto:!0},{at:function(e){return r(this,e)}})},67501:(e,t,i)=>{"use strict";var n=i(82109),r=i(24994),s=i(84488),o=i(29909),a=i(28710),l=a.codeAt,c=a.charAt,h="String Iterator",u=o.set,d=o.getterFor(h),f=r((function(e){u(this,{type:h,string:e,index:0})}),"String",(function(){var e,t=d(this),i=t.string,n=t.index;return n>=i.length?{value:void 0,done:!0}:(e=c(i,n),t.index+=e.length,{value:{codePoint:l(e,0),position:n},done:!1})}));n({target:"String",proto:!0},{codePoints:function(){return new f(String(s(this)))}})},13728:(e,t,i)=>{i(76373)},27207:(e,t,i)=>{i(68757)},609:(e,t,i)=>{i(97235)("asyncDispose")},21568:(e,t,i)=>{i(97235)("dispose")},48824:(e,t,i)=>{i(97235)("observable")},44130:(e,t,i)=>{i(97235)("patternMatch")},35954:(e,t,i)=>{i(97235)("replaceAll")},78206:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(34092);n({target:"WeakMap",proto:!0,real:!0,forced:r},{deleteAll:function(){return s.apply(this,arguments)}})},12714:(e,t,i)=>{"use strict";i(82109)({target:"WeakMap",proto:!0,real:!0,forced:i(31913)},{emplace:i(37502)})},76478:(e,t,i)=>{i(82109)({target:"WeakMap",stat:!0},{from:i(27296)})},79715:(e,t,i)=>{i(82109)({target:"WeakMap",stat:!0},{of:i(82044)})},5964:(e,t,i)=>{"use strict";i(82109)({target:"WeakMap",proto:!0,real:!0,forced:i(31913)},{upsert:i(8154)})},43561:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(31501);n({target:"WeakSet",proto:!0,real:!0,forced:r},{addAll:function(){return s.apply(this,arguments)}})},32049:(e,t,i)=>{"use strict";var n=i(82109),r=i(31913),s=i(34092);n({target:"WeakSet",proto:!0,real:!0,forced:r},{deleteAll:function(){return s.apply(this,arguments)}})},86020:(e,t,i)=>{i(82109)({target:"WeakSet",stat:!0},{from:i(27296)})},56585:(e,t,i)=>{i(82109)({target:"WeakSet",stat:!0},{of:i(82044)})},54747:(e,t,i)=>{var n=i(17854),r=i(48324),s=i(18533),o=i(68880);for(var a in r){var l=n[a],c=l&&l.prototype;if(c&&c.forEach!==s)try{o(c,"forEach",s)}catch(e){c.forEach=s}}},33948:(e,t,i)=>{var n=i(17854),r=i(48324),s=i(66992),o=i(68880),a=i(5112),l=a("iterator"),c=a("toStringTag"),h=s.values;for(var u in r){var d=n[u],f=d&&d.prototype;if(f){if(f[l]!==h)try{o(f,l,h)}catch(e){f[l]=h}if(f[c]||o(f,c,u),r[u])for(var p in s)if(f[p]!==s[p])try{o(f,p,s[p])}catch(e){f[p]=s[p]}}}},84633:(e,t,i)=>{var n=i(82109),r=i(17854),s=i(20261);n({global:!0,bind:!0,enumerable:!0,forced:!r.setImmediate||!r.clearImmediate},{setImmediate:s.set,clearImmediate:s.clear})},85844:(e,t,i)=>{var n=i(82109),r=i(17854),s=i(95948),o=i(35268),a=r.process;n({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=o&&a.domain;s(t?t.bind(e):e)}})},32564:(e,t,i)=>{var n=i(82109),r=i(17854),s=i(88113),o=[].slice,a=function(e){return function(t,i){var n=arguments.length>2,r=n?o.call(arguments,2):void 0;return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,i)}};n({global:!0,bind:!0,forced:/MSIE .\./.test(s)},{setTimeout:a(r.setTimeout),setInterval:a(r.setInterval)})},41637:(e,t,i)=>{"use strict";i(66992);var n=i(82109),r=i(35005),s=i(590),o=i(31320),a=i(12248),l=i(58003),c=i(24994),h=i(29909),u=i(25787),d=i(86656),f=i(49974),p=i(70648),g=i(19670),m=i(70111),b=i(70030),v=i(79114),y=i(18554),_=i(71246),w=i(5112),S=r("fetch"),C=r("Headers"),x=w("iterator"),k="URLSearchParams",E="URLSearchParamsIterator",T=h.set,L=h.getterFor(k),N=h.getterFor(E),M=/\+/g,O=Array(4),D=function(e){return O[e-1]||(O[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},I=function(e){try{return decodeURIComponent(e)}catch(t){return e}},A=function(e){var t=e.replace(M," "),i=4;try{return decodeURIComponent(t)}catch(e){for(;i;)t=t.replace(D(i--),I);return t}},P=/[!'()~]|%20/g,R={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},B=function(e){return R[e]},F=function(e){return encodeURIComponent(e).replace(P,B)},W=function(e,t){if(t)for(var i,n,r=t.split("&"),s=0;s<r.length;)(i=r[s++]).length&&(n=i.split("="),e.push({key:A(n.shift()),value:A(n.join("="))}))},V=function(e){this.entries.length=0,W(this.entries,e)},z=function(e,t){if(e<t)throw TypeError("Not enough arguments")},H=c((function(e,t){T(this,{type:E,iterator:y(L(e).entries),kind:t})}),"Iterator",(function(){var e=N(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),i})),j=function(){u(this,j,k);var e,t,i,n,r,s,o,a,l,c=arguments.length>0?arguments[0]:void 0,h=this,f=[];if(T(h,{type:k,entries:f,updateURL:function(){},updateSearchParams:V}),void 0!==c)if(m(c))if("function"==typeof(e=_(c)))for(i=(t=e.call(c)).next;!(n=i.call(t)).done;){if((o=(s=(r=y(g(n.value))).next).call(r)).done||(a=s.call(r)).done||!s.call(r).done)throw TypeError("Expected sequence with length 2");f.push({key:o.value+"",value:a.value+""})}else for(l in c)d(c,l)&&f.push({key:l,value:c[l]+""});else W(f,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},U=j.prototype;a(U,{append:function(e,t){z(arguments.length,2);var i=L(this);i.entries.push({key:e+"",value:t+""}),i.updateURL()},delete:function(e){z(arguments.length,1);for(var t=L(this),i=t.entries,n=e+"",r=0;r<i.length;)i[r].key===n?i.splice(r,1):r++;t.updateURL()},get:function(e){z(arguments.length,1);for(var t=L(this).entries,i=e+"",n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){z(arguments.length,1);for(var t=L(this).entries,i=e+"",n=[],r=0;r<t.length;r++)t[r].key===i&&n.push(t[r].value);return n},has:function(e){z(arguments.length,1);for(var t=L(this).entries,i=e+"",n=0;n<t.length;)if(t[n++].key===i)return!0;return!1},set:function(e,t){z(arguments.length,1);for(var i,n=L(this),r=n.entries,s=!1,o=e+"",a=t+"",l=0;l<r.length;l++)(i=r[l]).key===o&&(s?r.splice(l--,1):(s=!0,i.value=a));s||r.push({key:o,value:a}),n.updateURL()},sort:function(){var e,t,i,n=L(this),r=n.entries,s=r.slice();for(r.length=0,i=0;i<s.length;i++){for(e=s[i],t=0;t<i;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===i&&r.push(e)}n.updateURL()},forEach:function(e){for(var t,i=L(this).entries,n=f(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<i.length;)n((t=i[r++]).value,t.key,this)},keys:function(){return new H(this,"keys")},values:function(){return new H(this,"values")},entries:function(){return new H(this,"entries")}},{enumerable:!0}),o(U,x,U.entries),o(U,"toString",(function(){for(var e,t=L(this).entries,i=[],n=0;n<t.length;)e=t[n++],i.push(F(e.key)+"="+F(e.value));return i.join("&")}),{enumerable:!0}),l(j,k),n({global:!0,forced:!s},{URLSearchParams:j}),s||"function"!=typeof S||"function"!=typeof C||n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,i,n,r=[e];return arguments.length>1&&(m(t=arguments[1])&&(i=t.body,p(i)===k&&((n=t.headers?new C(t.headers):new C).has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=b(t,{body:v(0,String(i)),headers:v(0,n)}))),r.push(t)),S.apply(this,r)}}),e.exports={URLSearchParams:j,getState:L}},60285:(e,t,i)=>{"use strict";i(78783);var n,r=i(82109),s=i(19781),o=i(590),a=i(17854),l=i(36048),c=i(31320),h=i(25787),u=i(86656),d=i(21574),f=i(48457),p=i(28710).codeAt,g=i(33197),m=i(58003),b=i(41637),v=i(29909),y=a.URL,_=b.URLSearchParams,w=b.getState,S=v.set,C=v.getterFor("URL"),x=Math.floor,k=Math.pow,E="Invalid scheme",T="Invalid host",L="Invalid port",N=/[A-Za-z]/,M=/[\d+-.A-Za-z]/,O=/\d/,D=/^(0x|0X)/,I=/^[0-7]+$/,A=/^\d+$/,P=/^[\dA-Fa-f]+$/,R=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,B=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,F=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,W=/[\u0009\u000A\u000D]/g,V=function(e,t){var i,n,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return T;if(!(i=H(t.slice(1,-1))))return T;e.host=i}else if(Y(e)){if(t=g(t),R.test(t))return T;if(null===(i=z(t)))return T;e.host=i}else{if(B.test(t))return T;for(i="",n=f(t),r=0;r<n.length;r++)i+=q(n[r],U);e.host=i}},z=function(e){var t,i,n,r,s,o,a,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(i=[],n=0;n<t;n++){if(""==(r=l[n]))return e;if(s=10,r.length>1&&"0"==r.charAt(0)&&(s=D.test(r)?16:8,r=r.slice(8==s?1:2)),""===r)o=0;else{if(!(10==s?A:8==s?I:P).test(r))return e;o=parseInt(r,s)}i.push(o)}for(n=0;n<t;n++)if(o=i[n],n==t-1){if(o>=k(256,5-t))return null}else if(o>255)return null;for(a=i.pop(),n=0;n<i.length;n++)a+=i[n]*k(256,3-n);return a},H=function(e){var t,i,n,r,s,o,a,l=[0,0,0,0,0,0,0,0],c=0,h=null,u=0,d=function(){return e.charAt(u)};if(":"==d()){if(":"!=e.charAt(1))return;u+=2,h=++c}for(;d();){if(8==c)return;if(":"!=d()){for(t=i=0;i<4&&P.test(d());)t=16*t+parseInt(d(),16),u++,i++;if("."==d()){if(0==i)return;if(u-=i,c>6)return;for(n=0;d();){if(r=null,n>0){if(!("."==d()&&n<4))return;u++}if(!O.test(d()))return;for(;O.test(d());){if(s=parseInt(d(),10),null===r)r=s;else{if(0==r)return;r=10*r+s}if(r>255)return;u++}l[c]=256*l[c]+r,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==d()){if(u++,!d())return}else if(d())return;l[c++]=t}else{if(null!==h)return;u++,h=++c}}if(null!==h)for(o=c-h,c=7;0!=c&&o>0;)a=l[c],l[c--]=l[h+o-1],l[h+--o]=a;else if(8!=c)return;return l},j=function(e){var t,i,n,r;if("number"==typeof e){for(t=[],i=0;i<4;i++)t.unshift(e%256),e=x(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,i=1,n=null,r=0,s=0;s<8;s++)0!==e[s]?(r>i&&(t=n,i=r),n=null,r=0):(null===n&&(n=s),++r);return r>i&&(t=n,i=r),t}(e),i=0;i<8;i++)r&&0===e[i]||(r&&(r=!1),n===i?(t+=i?":":"::",r=!0):(t+=e[i].toString(16),i<7&&(t+=":")));return"["+t+"]"}return e},U={},G=d({},U,{" ":1,'"':1,"<":1,">":1,"`":1}),K=d({},G,{"#":1,"?":1,"{":1,"}":1}),$=d({},K,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),q=function(e,t){var i=p(e,0);return i>32&&i<127&&!u(t,e)?e:encodeURIComponent(e)},Z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Y=function(e){return u(Z,e.scheme)},X=function(e){return""!=e.username||""!=e.password},Q=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},J=function(e,t){var i;return 2==e.length&&N.test(e.charAt(0))&&(":"==(i=e.charAt(1))||!t&&"|"==i)},ee=function(e){var t;return e.length>1&&J(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},te=function(e){var t=e.path,i=t.length;!i||"file"==e.scheme&&1==i&&J(t[0],!0)||t.pop()},ie=function(e){return"."===e||"%2e"===e.toLowerCase()},ne={},re={},se={},oe={},ae={},le={},ce={},he={},ue={},de={},fe={},pe={},ge={},me={},be={},ve={},ye={},_e={},we={},Se={},Ce={},xe=function(e,t,i,r){var s,o,a,l,c,h=i||ne,d=0,p="",g=!1,m=!1,b=!1;for(i||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(F,"")),t=t.replace(W,""),s=f(t);d<=s.length;){switch(o=s[d],h){case ne:if(!o||!N.test(o)){if(i)return E;h=se;continue}p+=o.toLowerCase(),h=re;break;case re:if(o&&(M.test(o)||"+"==o||"-"==o||"."==o))p+=o.toLowerCase();else{if(":"!=o){if(i)return E;p="",h=se,d=0;continue}if(i&&(Y(e)!=u(Z,p)||"file"==p&&(X(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,i)return void(Y(e)&&Z[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?h=me:Y(e)&&r&&r.scheme==e.scheme?h=oe:Y(e)?h=he:"/"==s[d+1]?(h=ae,d++):(e.cannotBeABaseURL=!0,e.path.push(""),h=we)}break;case se:if(!r||r.cannotBeABaseURL&&"#"!=o)return E;if(r.cannotBeABaseURL&&"#"==o){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,h=Ce;break}h="file"==r.scheme?me:le;continue;case oe:if("/"!=o||"/"!=s[d+1]){h=le;continue}h=ue,d++;break;case ae:if("/"==o){h=de;break}h=_e;continue;case le:if(e.scheme=r.scheme,o==n)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==o||"\\"==o&&Y(e))h=ce;else if("?"==o)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",h=Se;else{if("#"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),h=_e;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",h=Ce}break;case ce:if(!Y(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,h=_e;continue}h=de}else h=ue;break;case he:if(h=ue,"/"!=o||"/"!=p.charAt(d+1))continue;d++;break;case ue:if("/"!=o&&"\\"!=o){h=de;continue}break;case de:if("@"==o){g&&(p="%40"+p),g=!0,a=f(p);for(var v=0;v<a.length;v++){var y=a[v];if(":"!=y||b){var _=q(y,$);b?e.password+=_:e.username+=_}else b=!0}p=""}else if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&Y(e)){if(g&&""==p)return"Invalid authority";d-=f(p).length+1,p="",h=fe}else p+=o;break;case fe:case pe:if(i&&"file"==e.scheme){h=ve;continue}if(":"!=o||m){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&Y(e)){if(Y(e)&&""==p)return T;if(i&&""==p&&(X(e)||null!==e.port))return;if(l=V(e,p))return l;if(p="",h=ye,i)return;continue}"["==o?m=!0:"]"==o&&(m=!1),p+=o}else{if(""==p)return T;if(l=V(e,p))return l;if(p="",h=ge,i==pe)return}break;case ge:if(!O.test(o)){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&Y(e)||i){if(""!=p){var w=parseInt(p,10);if(w>65535)return L;e.port=Y(e)&&w===Z[e.scheme]?null:w,p=""}if(i)return;h=ye;continue}return L}p+=o;break;case me:if(e.scheme="file","/"==o||"\\"==o)h=be;else{if(!r||"file"!=r.scheme){h=_e;continue}if(o==n)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==o)e.host=r.host,e.path=r.path.slice(),e.query="",h=Se;else{if("#"!=o){ee(s.slice(d).join(""))||(e.host=r.host,e.path=r.path.slice(),te(e)),h=_e;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",h=Ce}}break;case be:if("/"==o||"\\"==o){h=ve;break}r&&"file"==r.scheme&&!ee(s.slice(d).join(""))&&(J(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),h=_e;continue;case ve:if(o==n||"/"==o||"\\"==o||"?"==o||"#"==o){if(!i&&J(p))h=_e;else if(""==p){if(e.host="",i)return;h=ye}else{if(l=V(e,p))return l;if("localhost"==e.host&&(e.host=""),i)return;p="",h=ye}continue}p+=o;break;case ye:if(Y(e)){if(h=_e,"/"!=o&&"\\"!=o)continue}else if(i||"?"!=o)if(i||"#"!=o){if(o!=n&&(h=_e,"/"!=o))continue}else e.fragment="",h=Ce;else e.query="",h=Se;break;case _e:if(o==n||"/"==o||"\\"==o&&Y(e)||!i&&("?"==o||"#"==o)){if(".."===(c=(c=p).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(te(e),"/"==o||"\\"==o&&Y(e)||e.path.push("")):ie(p)?"/"==o||"\\"==o&&Y(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&J(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(o==n||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",h=Se):"#"==o&&(e.fragment="",h=Ce)}else p+=q(o,K);break;case we:"?"==o?(e.query="",h=Se):"#"==o?(e.fragment="",h=Ce):o!=n&&(e.path[0]+=q(o,U));break;case Se:i||"#"!=o?o!=n&&("'"==o&&Y(e)?e.query+="%27":e.query+="#"==o?"%23":q(o,U)):(e.fragment="",h=Ce);break;case Ce:o!=n&&(e.fragment+=q(o,G))}d++}},ke=function(e){var t,i,n=h(this,ke,"URL"),r=arguments.length>1?arguments[1]:void 0,o=String(e),a=S(n,{type:"URL"});if(void 0!==r)if(r instanceof ke)t=C(r);else if(i=xe(t={},String(r)))throw TypeError(i);if(i=xe(a,o,null,t))throw TypeError(i);var l=a.searchParams=new _,c=w(l);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(l)||null},s||(n.href=Te.call(n),n.origin=Le.call(n),n.protocol=Ne.call(n),n.username=Me.call(n),n.password=Oe.call(n),n.host=De.call(n),n.hostname=Ie.call(n),n.port=Ae.call(n),n.pathname=Pe.call(n),n.search=Re.call(n),n.searchParams=Be.call(n),n.hash=Fe.call(n))},Ee=ke.prototype,Te=function(){var e=C(this),t=e.scheme,i=e.username,n=e.password,r=e.host,s=e.port,o=e.path,a=e.query,l=e.fragment,c=t+":";return null!==r?(c+="//",X(e)&&(c+=i+(n?":"+n:"")+"@"),c+=j(r),null!==s&&(c+=":"+s)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},Le=function(){var e=C(this),t=e.scheme,i=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Y(e)?t+"://"+j(e.host)+(null!==i?":"+i:""):"null"},Ne=function(){return C(this).scheme+":"},Me=function(){return C(this).username},Oe=function(){return C(this).password},De=function(){var e=C(this),t=e.host,i=e.port;return null===t?"":null===i?j(t):j(t)+":"+i},Ie=function(){var e=C(this).host;return null===e?"":j(e)},Ae=function(){var e=C(this).port;return null===e?"":String(e)},Pe=function(){var e=C(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Re=function(){var e=C(this).query;return e?"?"+e:""},Be=function(){return C(this).searchParams},Fe=function(){var e=C(this).fragment;return e?"#"+e:""},We=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(s&&l(Ee,{href:We(Te,(function(e){var t=C(this),i=String(e),n=xe(t,i);if(n)throw TypeError(n);w(t.searchParams).updateSearchParams(t.query)})),origin:We(Le),protocol:We(Ne,(function(e){var t=C(this);xe(t,String(e)+":",ne)})),username:We(Me,(function(e){var t=C(this),i=f(String(e));if(!Q(t)){t.username="";for(var n=0;n<i.length;n++)t.username+=q(i[n],$)}})),password:We(Oe,(function(e){var t=C(this),i=f(String(e));if(!Q(t)){t.password="";for(var n=0;n<i.length;n++)t.password+=q(i[n],$)}})),host:We(De,(function(e){var t=C(this);t.cannotBeABaseURL||xe(t,String(e),fe)})),hostname:We(Ie,(function(e){var t=C(this);t.cannotBeABaseURL||xe(t,String(e),pe)})),port:We(Ae,(function(e){var t=C(this);Q(t)||(""==(e=String(e))?t.port=null:xe(t,e,ge))})),pathname:We(Pe,(function(e){var t=C(this);t.cannotBeABaseURL||(t.path=[],xe(t,e+"",ye))})),search:We(Re,(function(e){var t=C(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",xe(t,e,Se)),w(t.searchParams).updateSearchParams(t.query)})),searchParams:We(Be),hash:We(Fe,(function(e){var t=C(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",xe(t,e,Ce)):t.fragment=null}))}),c(Ee,"toJSON",(function(){return Te.call(this)}),{enumerable:!0}),c(Ee,"toString",(function(){return Te.call(this)}),{enumerable:!0}),y){var Ve=y.createObjectURL,ze=y.revokeObjectURL;Ve&&c(ke,"createObjectURL",(function(e){return Ve.apply(y,arguments)})),ze&&c(ke,"revokeObjectURL",(function(e){return ze.apply(y,arguments)}))}m(ke,"URL"),r({global:!0,forced:!o,sham:!s},{URL:ke})},83753:(e,t,i)=>{"use strict";i(82109)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},61887:(e,t,i)=>{i(8e4)},65445:(e,t,i)=>{i(83475),i(46273)},49809:(e,t,i)=>{i(90618),i(88440),i(10072),i(99137),i(71957),i(96306),i(103),i(74592),i(58276),i(35082),i(12813),i(18222),i(38563),i(50336),i(7512),i(88921),i(96248),i(11477),i(64362),i(15389),i(87485),i(56767),i(76651),i(61437),i(78206),i(43561),i(32049)},81998:(e,t,i)=>{i(8582),i(24838),i(46006),i(69916),i(76478),i(79715),i(86020),i(56585)},97053:(e,t,i)=>{i(60092),i(30666),i(19041),i(5162)},78260:(e,t,i)=>{i(65743);var n=i(17854);e.exports=n},87079:(e,t,i)=>{i(79780)},46462:(e,t,i)=>{i(66342),i(40787),i(23647),i(68216),i(88449),i(31672),i(74326),i(15581),i(78631),i(57640),i(25387),i(64211),i(12771),i(62962),i(2490),i(85567),i(5332),i(79433),i(59849),i(59461),i(82499),i(34514),i(26877),i(9924),i(72608),i(41874),i(66043),i(23748)},69918:(e,t,i)=>{i(51568),i(26349)},39871:(e,t,i)=>{i(23042),i(74442),i(87713),i(12714),i(5964)},2126:(e,t,i)=>{i(46603),i(70100),i(10490),i(13187),i(51638),i(62975),i(15728)},86325:(e,t,i)=>{i(44299)},96897:(e,t,i)=>{i(50292)},31715:(e,t,i)=>{i(99964),i(75238),i(4987)},47106:(e,t,i)=>{i(1025),i(48824)},42387:(e,t,i)=>{i(44130)},83361:(e,t,i)=>{i(97314)},15382:(e,t,i)=>{i(8628),i(96290)},25226:(e,t,i)=>{i(77479)},74500:(e,t,i)=>{i(34582),i(47896),i(12647),i(98558),i(84018),i(97507),i(61605),i(49076),i(34999)},64956:(e,t,i)=>{i(46056)},92318:(e,t,i)=>{i(13599),i(90401),i(45164),i(91238),i(54837),i(39865),i(35285)},89407:(e,t,i)=>{i(86035)},69345:(e,t,i)=>{i(67501)},85851:(e,t,i)=>{i(13728)},68965:(e,t,i)=>{i(27207),i(35954)},39999:(e,t,i)=>{i(60285),i(83753),i(41637)},42983:(e,t,i)=>{i(609),i(21568)},81252:(e,t,i)=>{i(97053),i(89407),i(39999);var n=i(333);e.exports=n},333:(e,t,i)=>{i(65445),i(49809),i(81998),i(69918),i(2126),i(86325),i(96897),i(31715),i(47106),i(42387),i(25226),i(64956),i(69345);var n=i(32064);e.exports=n},32064:(e,t,i)=>{i(61887),i(46462),i(39871),i(92318),i(42983);var n=i(99020);e.exports=n},99020:(e,t,i)=>{var n=i(60945);e.exports=n},60945:(e,t,i)=>{i(78260),i(83361),i(15382),i(85851),i(68965);var n=i(40857);e.exports=n},79780:(e,t,i)=>{var n=i(91884);e.exports=n},91884:(e,t,i)=>{i(74500);var n=i(81252);e.exports=n},96337:(e,t,i)=>{i(54747),i(33948),i(84633),i(85844),i(32564),i(60285),i(83753),i(41637);var n=i(40857);e.exports=n},80092:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasClipboardSupport=t.isEdgeWebView=t.isIPad=t.isWebkitWebView=t.isSafari=t.isChrome=t.isWebKit=t.isFirefox=t.isOpera=t.isEdgeOrIE=t.isEdge=t.isIE=t.onDidChangeAccessibilitySupport=t.getAccessibilitySupport=t.setAccessibilitySupport=t.onDidChangeFullscreen=t.isFullscreen=t.setFullscreen=t.getPixelRatio=t.setZoomFactor=t.getZoomFactor=t.onDidChangeZoomLevel=t.getTimeSinceLastZoomLevelChanged=t.getZoomLevel=t.setZoomLevel=void 0;const n=i(80921);class r{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new n.Emitter,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=0,this._onDidChangeFullscreen=new n.Emitter,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this._accessibilitySupport=0,this._onDidChangeAccessibilitySupport=new n.Emitter,this.onDidChangeAccessibilitySupport=this._onDidChangeAccessibilitySupport.event}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}setZoomLevel(e,t){this._zoomLevel!==e&&(this._zoomLevel=e,this._lastZoomLevelChangeTime=t?0:Date.now(),this._onDidChangeZoomLevel.fire(this._zoomLevel))}getZoomFactor(){return this._zoomFactor}setZoomFactor(e){this._zoomFactor=e}getPixelRatio(){let e=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}setFullscreen(e){this._fullscreen!==e&&(this._fullscreen=e,this._onDidChangeFullscreen.fire())}isFullscreen(){return this._fullscreen}setAccessibilitySupport(e){this._accessibilitySupport!==e&&(this._accessibilitySupport=e,this._onDidChangeAccessibilitySupport.fire())}getAccessibilitySupport(){return this._accessibilitySupport}}r.INSTANCE=new r,t.setZoomLevel=function(e,t){r.INSTANCE.setZoomLevel(e,t)},t.getZoomLevel=function(){return r.INSTANCE.getZoomLevel()},t.getTimeSinceLastZoomLevelChanged=function(){return r.INSTANCE.getTimeSinceLastZoomLevelChanged()},t.onDidChangeZoomLevel=function(e){return r.INSTANCE.onDidChangeZoomLevel(e)},t.getZoomFactor=function(){return r.INSTANCE.getZoomFactor()},t.setZoomFactor=function(e){r.INSTANCE.setZoomFactor(e)},t.getPixelRatio=function(){return r.INSTANCE.getPixelRatio()},t.setFullscreen=function(e){r.INSTANCE.setFullscreen(e)},t.isFullscreen=function(){return r.INSTANCE.isFullscreen()},t.onDidChangeFullscreen=r.INSTANCE.onDidChangeFullscreen,t.setAccessibilitySupport=function(e){r.INSTANCE.setAccessibilitySupport(e)},t.getAccessibilitySupport=function(){return r.INSTANCE.getAccessibilitySupport()},t.onDidChangeAccessibilitySupport=function(e){return r.INSTANCE.onDidChangeAccessibilitySupport(e)};const s=navigator.userAgent;t.isIE=s.indexOf("Trident")>=0,t.isEdge=s.indexOf("Edge/")>=0,t.isEdgeOrIE=t.isIE||t.isEdge,t.isOpera=s.indexOf("Opera")>=0,t.isFirefox=s.indexOf("Firefox")>=0,t.isWebKit=s.indexOf("AppleWebKit")>=0,t.isChrome=s.indexOf("Chrome")>=0,t.isSafari=!t.isChrome&&s.indexOf("Safari")>=0,t.isWebkitWebView=!t.isChrome&&!t.isSafari&&t.isWebKit,t.isIPad=s.indexOf("iPad")>=0,t.isEdgeWebView=t.isEdge&&s.indexOf("WebView/")>=0,t.hasClipboardSupport=function(){if(t.isIE)return!1;if(t.isEdge){let e=s.indexOf("Edge/"),t=parseInt(s.substring(e+5,s.indexOf(".",e)),10);if(!t||t>=12&&t<=16)return!1}return!0}},60712:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stop=t.domEvent=void 0;const n=i(80921);t.domEvent=(e,t,i)=>{const r=e=>s.fire(e),s=new n.Emitter({onFirstListenerAdd:()=>{e.addEventListener(t,r,i)},onLastListenerRemove:()=>{e.removeEventListener(t,r,i)}});return s.event},t.stop=function(e){return n.Event.map(e,(e=>(e.preventDefault(),e.stopPropagation(),e)))}},60108:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IframeUtils=void 0;let i=!1,n=null;function r(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,n=e.parent.location;if(t.protocol!==n.protocol||t.hostname!==n.hostname||t.port!==n.port)return i=!0,null}catch(e){return i=!0,null}return e.parent}function s(e,t){let i,n=e.document.getElementsByTagName("iframe");for(let e=0,r=n.length;e<r;e++)if(i=n[e],i.contentWindow===t)return i;return null}t.IframeUtils=class{static getSameOriginWindowChain(){if(!n){n=[];let e,t=window;do{e=r(t),e?n.push({window:t,iframeElement:s(e,t)}):n.push({window:t,iframeElement:null}),t=e}while(t)}return n.slice(0)}static hasDifferentOriginAncestor(){return n||this.getSameOriginWindowChain(),i}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0,r=this.getSameOriginWindowChain();for(const e of r){if(e.window===t)break;if(!e.iframeElement)break;let r=e.iframeElement.getBoundingClientRect();i+=r.top,n+=r.left}return{top:i,left:n}}}},28597:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardKeyboardEvent=t.getCodeForKeyCode=void 0;const n=i(21716),r=i(357);let s=new Array(230),o=new Array(112);!function(){for(let e=0;e<o.length;e++)o[e]=-1;function e(e,t){s[e]=t,o[t]=e}e(3,7),e(8,1),e(9,2),e(13,3),e(16,4),e(17,5),e(18,6),e(19,7),e(20,8),e(27,9),e(32,10),e(33,11),e(34,12),e(35,13),e(36,14),e(37,15),e(38,16),e(39,17),e(40,18),e(45,19),e(46,20),e(48,21),e(49,22),e(50,23),e(51,24),e(52,25),e(53,26),e(54,27),e(55,28),e(56,29),e(57,30),e(65,31),e(66,32),e(67,33),e(68,34),e(69,35),e(70,36),e(71,37),e(72,38),e(73,39),e(74,40),e(75,41),e(76,42),e(77,43),e(78,44),e(79,45),e(80,46),e(81,47),e(82,48),e(83,49),e(84,50),e(85,51),e(86,52),e(87,53),e(88,54),e(89,55),e(90,56),e(93,58),e(96,93),e(97,94),e(98,95),e(99,96),e(100,97),e(101,98),e(102,99),e(103,100),e(104,101),e(105,102),e(106,103),e(107,104),e(108,105),e(109,106),e(110,107),e(111,108),e(112,59),e(113,60),e(114,61),e(115,62),e(116,63),e(117,64),e(118,65),e(119,66),e(120,67),e(121,68),e(122,69),e(123,70),e(124,71),e(125,72),e(126,73),e(127,74),e(128,75),e(129,76),e(130,77),e(144,78),e(145,79),e(186,80),e(187,81),e(188,82),e(189,83),e(190,84),e(191,85),e(192,86),e(193,110),e(194,111),e(219,87),e(220,88),e(221,89),e(222,90),e(223,91),e(226,92),e(229,109),e(91,57),r.isMacintosh?e(93,57):e(92,57)}(),t.getCodeForKeyCode=function(e){return o[e]};const a=r.isMacintosh?256:2048,l=r.isMacintosh?2048:256;t.StandardKeyboardEvent=class{constructor(e){let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=function(e){if(e.charCode){let t=String.fromCharCode(e.charCode).toUpperCase();return n.KeyCodeUtils.fromString(t)}return s[e.keyCode]||0}(t),this.code=t.code,this.ctrlKey=this.ctrlKey||5===this.keyCode,this.altKey=this.altKey||6===this.keyCode,this.shiftKey=this.shiftKey||4===this.keyCode,this.metaKey=this.metaKey||57===this.keyCode,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=a),this.altKey&&(t|=512),this.shiftKey&&(t|=1024),this.metaKey&&(t|=l),t|=e,t}_computeRuntimeKeybinding(){let e=0;return 5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode),new n.SimpleKeybinding(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}},78839:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardWheelEvent=t.DragMouseEvent=t.StandardMouseEvent=void 0;const n=i(80092),r=i(60108),s=i(357);class o{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=0===e.button,this.middleButton=1===e.button,this.rightButton=2===e.button,this.target=e.target,this.detail=e.detail||1,"dblclick"===e.type&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,"number"==typeof e.pageX?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=r.IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}}t.StandardMouseEvent=o;t.DragMouseEvent=class extends o{constructor(e){super(e),this.dataTransfer=e.dataTransfer}};t.StandardWheelEvent=class{constructor(e,t=0,i=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t,e){let t=e,i=e;void 0!==t.wheelDeltaY?this.deltaY=t.wheelDeltaY/120:void 0!==i.VERTICAL_AXIS&&i.axis===i.VERTICAL_AXIS&&(this.deltaY=-i.detail/3),void 0!==t.wheelDeltaX?n.isSafari&&s.isWindows?this.deltaX=-t.wheelDeltaX/120:this.deltaX=t.wheelDeltaX/120:void 0!==i.HORIZONTAL_AXIS&&i.axis===i.HORIZONTAL_AXIS&&(this.deltaX=-e.detail/3),0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}}},37229:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coalesce=void 0,t.coalesce=function(e){return e?e.filter((e=>!!e)):e}},74624:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunOnceScheduler=t.TimeoutTimer=void 0;const n=i(10361);class r extends n.Disposable{constructor(e,t){super(),this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel(),super.dispose()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),t))}}t.TimeoutTimer=r;t.RunOnceScheduler=class{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}isScheduled(){return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}},49935:(e,t)=>{"use strict";function i(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}Object.defineProperty(t,"__esModule",{value:!0}),t.Color=t.HSVA=t.HSLA=t.RGBA=void 0;class n{constructor(e,t,n,r=1){this.r=0|Math.min(255,Math.max(0,e)),this.g=0|Math.min(255,Math.max(0,t)),this.b=0|Math.min(255,Math.max(0,n)),this.a=i(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}t.RGBA=n;class r{constructor(e,t,n,r){this.h=0|Math.max(Math.min(360,e),0),this.s=i(Math.max(Math.min(1,t),0),3),this.l=i(Math.max(Math.min(1,n),0),3),this.a=i(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=e.a,o=Math.max(t,i,n),a=Math.min(t,i,n);let l=0,c=0;const h=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(h<=.5?u/(2*h):u/(2-2*h),1),o){case t:l=(i-n)/u+(i<n?6:0);break;case i:l=(n-t)/u+2;break;case n:l=(t-i)/u+4}l*=60,l=Math.round(l)}return new r(l,c,h,s)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:o}=e;let a,l,c;if(0===i)a=l=c=s;else{const e=s<.5?s*(1+i):s+i-s*i,n=2*s-e;a=r._hue2rgb(n,e,t+1/3),l=r._hue2rgb(n,e,t),c=r._hue2rgb(n,e,t-1/3)}return new n(Math.round(255*a),Math.round(255*l),Math.round(255*c),o)}}t.HSLA=r;class s{constructor(e,t,n,r){this.h=0|Math.max(Math.min(360,e),0),this.s=i(Math.max(Math.min(1,t),0),3),this.v=i(Math.max(Math.min(1,n),0),3),this.a=i(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(t,i,n),o=r-Math.min(t,i,n),a=0===r?0:o/r;let l;return l=0===o?0:r===t?((i-n)/o%6+6)%6:r===i?(n-t)/o+2:(t-i)/o+4,new s(Math.round(60*l),a,r,e.a)}static toRGBA(e){const{h:t,s:i,v:r,a:s}=e,o=r*i,a=o*(1-Math.abs(t/60%2-1)),l=r-o;let[c,h,u]=[0,0,0];return t<60?(c=o,h=a):t<120?(c=a,h=o):t<180?(h=o,u=a):t<240?(h=a,u=o):t<300?(c=a,u=o):t<360&&(c=o,u=a),c=Math.round(255*(c+l)),h=Math.round(255*(h+l)),u=Math.round(255*(u+l)),new n(c,h,u,s)}}t.HSVA=s;class o{constructor(e){if(!e)throw new Error("Color needs a value");if(e instanceof n)this.rgba=e;else if(e instanceof r)this._hsla=e,this.rgba=r.toRGBA(e);else{if(!(e instanceof s))throw new Error("Invalid color ctor argument");this._hsva=e,this.rgba=s.toRGBA(e)}}static fromHex(e){return o.Format.CSS.parseHex(e)||o.RED}get hsla(){return this._hsla?this._hsla:r.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:s.fromRGBA(this.rgba)}equals(e){return!!e&&n.equals(this.rgba,e.rgba)&&r.equals(this.hsla,e.hsla)&&s.equals(this.hsva,e.hsva)}getRelativeLuminance(){return i(.2126*o._relativeLuminanceForComponent(this.rgba.r)+.7152*o._relativeLuminanceForComponent(this.rgba.g)+.0722*o._relativeLuminanceForComponent(this.rgba.b),4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)}isDarker(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3<128}isLighter(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128}isLighterThan(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}isDarkerThan(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}lighten(e){return new o(new r(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new o(new r(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:r,a:s}=this.rgba;return new o(new n(t,i,r,s*e))}isTransparent(){return 0===this.rgba.a}isOpaque(){return 1===this.rgba.a}opposite(){return new o(new n(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,i=this.rgba.a,r=t.a;let s=i+r*(1-i);if(s<1e-6)return o.TRANSPARENT;const a=this.rgba.r*i/s+t.r*r*(1-i)/s,l=this.rgba.g*i/s+t.g*r*(1-i)/s,c=this.rgba.b*i/s+t.b*r*(1-i)/s;return new o(new n(a,l,c,s))}flatten(...e){const t=e.reduceRight(((e,t)=>o._flatten(t,e)));return o._flatten(this,t)}static _flatten(e,t){const i=1-e.rgba.a;return new o(new n(i*t.rgba.r+e.rgba.a*e.rgba.r,i*t.rgba.g+e.rgba.a*e.rgba.g,i*t.rgba.b+e.rgba.a*e.rgba.b))}toString(){return""+o.Format.CSS.format(this)}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(r-n)/r,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const n=e.getRelativeLuminance();return i=i*(n-t.getRelativeLuminance())/n,e.darken(i)}}t.Color=o,o.WHITE=new o(new n(255,255,255,1)),o.BLACK=new o(new n(0,0,0,1)),o.RED=new o(new n(255,0,0,1)),o.BLUE=new o(new n(0,0,255,1)),o.GREEN=new o(new n(0,255,0,1)),o.CYAN=new o(new n(0,255,255,1)),o.LIGHTGREY=new o(new n(211,211,211,1)),o.TRANSPARENT=new o(new n(0,0,0,0)),function(e){let t;!function(t){let i;!function(t){function i(e){const t=e.toString(16);return 2!==t.length?"0"+t:t}function r(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}t.formatRGB=function(t){return 1===t.rgba.a?`rgb(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b})`:e.Format.CSS.formatRGBA(t)},t.formatRGBA=function(e){return`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${+e.rgba.a.toFixed(2)})`},t.formatHSL=function(t){return 1===t.hsla.a?`hsl(${t.hsla.h}, ${(100*t.hsla.s).toFixed(2)}%, ${(100*t.hsla.l).toFixed(2)}%)`:e.Format.CSS.formatHSLA(t)},t.formatHSLA=function(e){return`hsla(${e.hsla.h}, ${(100*e.hsla.s).toFixed(2)}%, ${(100*e.hsla.l).toFixed(2)}%, ${e.hsla.a.toFixed(2)})`},t.formatHex=function(e){return`#${i(e.rgba.r)}${i(e.rgba.g)}${i(e.rgba.b)}`},t.formatHexA=function(t,n=!1){return n&&1===t.rgba.a?e.Format.CSS.formatHex(t):`#${i(t.rgba.r)}${i(t.rgba.g)}${i(t.rgba.b)}${i(Math.round(255*t.rgba.a))}`},t.format=function(t){return t?t.isOpaque()?e.Format.CSS.formatHex(t):e.Format.CSS.formatRGBA(t):null},t.parseHex=function(t){if(!t)return null;const i=t.length;if(0===i)return null;if(35!==t.charCodeAt(0))return null;if(7===i){const i=16*r(t.charCodeAt(1))+r(t.charCodeAt(2)),s=16*r(t.charCodeAt(3))+r(t.charCodeAt(4)),o=16*r(t.charCodeAt(5))+r(t.charCodeAt(6));return new e(new n(i,s,o,1))}if(9===i){const i=16*r(t.charCodeAt(1))+r(t.charCodeAt(2)),s=16*r(t.charCodeAt(3))+r(t.charCodeAt(4)),o=16*r(t.charCodeAt(5))+r(t.charCodeAt(6)),a=16*r(t.charCodeAt(7))+r(t.charCodeAt(8));return new e(new n(i,s,o,a/255))}if(4===i){const i=r(t.charCodeAt(1)),s=r(t.charCodeAt(2)),o=r(t.charCodeAt(3));return new e(new n(16*i+i,16*s+s,16*o+o))}if(5===i){const i=r(t.charCodeAt(1)),s=r(t.charCodeAt(2)),o=r(t.charCodeAt(3)),a=r(t.charCodeAt(4));return new e(new n(16*i+i,16*s+s,16*o+o,(16*a+a)/255))}return null}}(i=t.CSS||(t.CSS={}))}(t=e.Format||(e.Format={}))}(o=t.Color||(t.Color={}))},82538:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagName=t.removeTabIndexAndUpdateFocus=t.hide=t.show=t.join=t.$=t.prepend=t.append=t.trackFocus=t.restoreParentsScrollTop=t.saveParentsScrollTop=t.EventHelper=t.EventType=t.isHTMLElement=t.removeCSSRulesContainingSelector=t.createCSSRule=t.createStyleSheet=t.findParentWithClass=t.isAncestor=t.getLargestChildWidth=t.getTotalHeight=t.getContentHeight=t.getTotalScrollWidth=t.getContentWidth=t.getTotalWidth=t.StandardWindow=t.getDomNodePagePosition=t.position=t.size=t.getTopLeftOffset=t.Dimension=t.getClientArea=t.getComputedStyle=t.addDisposableThrottledListener=t.modify=t.measure=t.scheduleAtNextAnimationFrame=t.runAtThisOrScheduleAtNextAnimationFrame=t.addDisposableNonBubblingMouseOutListener=t.addStandardDisposableListener=t.addDisposableListener=t.toggleClass=t.removeClasses=t.removeClass=t.addClasses=t.addClass=t.hasClass=t.isInDOM=t.removeNode=t.clearNode=void 0,t.animate=t.windowOpenNoOpener=t.computeScreenAwareSize=t.domContentLoaded=t.finalHandler=void 0;const n=i(80092),r=i(60712),s=i(28597),o=i(78839),a=i(74624),l=i(80921),c=i(10361),h=i(357),u=i(37229);t.clearNode=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.removeNode=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.isInDOM=function(e){for(;e;){if(e===document.body)return!0;e=e.parentNode}return!1};const d=new class{_findClassName(e,t){let i=e.className;if(!i)return void(this._lastStart=-1);t=t.trim();let n=i.length,r=t.length;if(0===r)return void(this._lastStart=-1);if(n<r)return void(this._lastStart=-1);if(i===t)return this._lastStart=0,void(this._lastEnd=n);let s,o=-1;for(;(o=i.indexOf(t,o+1))>=0;){if(s=o+r,(0===o||32===i.charCodeAt(o-1))&&32===i.charCodeAt(s))return this._lastStart=o,void(this._lastEnd=s+1);if(o>0&&32===i.charCodeAt(o-1)&&s===n)return this._lastStart=o-1,void(this._lastEnd=s);if(0===o&&s===n)return this._lastStart=0,void(this._lastEnd=s)}this._lastStart=-1}hasClass(e,t){return this._findClassName(e,t),-1!==this._lastStart}addClasses(e,...t){t.forEach((t=>t.split(" ").forEach((t=>this.addClass(e,t)))))}addClass(e,t){e.className?(this._findClassName(e,t),-1===this._lastStart&&(e.className=e.className+" "+t)):e.className=t}removeClass(e,t){this._findClassName(e,t),-1!==this._lastStart&&(e.className=e.className.substring(0,this._lastStart)+e.className.substring(this._lastEnd))}removeClasses(e,...t){t.forEach((t=>t.split(" ").forEach((t=>this.removeClass(e,t)))))}toggleClass(e,t,i){this._findClassName(e,t),-1===this._lastStart||void 0!==i&&i||this.removeClass(e,t),-1!==this._lastStart||void 0!==i&&!i||this.addClass(e,t)}},f=new class{hasClass(e,t){return Boolean(t)&&e.classList&&e.classList.contains(t)}addClasses(e,...t){t.forEach((t=>t.split(" ").forEach((t=>this.addClass(e,t)))))}addClass(e,t){t&&e.classList&&e.classList.add(t)}removeClass(e,t){t&&e.classList&&e.classList.remove(t)}removeClasses(e,...t){t.forEach((t=>t.split(" ").forEach((t=>this.removeClass(e,t)))))}toggleClass(e,t,i){e.classList&&e.classList.toggle(t,i)}},p=n.isIE?d:f;t.hasClass=p.hasClass.bind(p),t.addClass=p.addClass.bind(p),t.addClasses=p.addClasses.bind(p),t.removeClass=p.removeClass.bind(p),t.removeClasses=p.removeClasses.bind(p),t.toggleClass=p.toggleClass.bind(p);class g{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._useCapture=n||!1,this._node.addEventListener(this._type,this._handler,this._useCapture)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._useCapture),this._node=null,this._handler=null)}}function m(e,t,i,n){return new g(e,t,i,n)}t.addDisposableListener=m;t.addStandardDisposableListener=function(e,t,i,n){let r=i;return"click"===t||"mousedown"===t?r=function(e){return function(t){return e(new o.StandardMouseEvent(t))}}(i):"keydown"!==t&&"keypress"!==t&&"keyup"!==t||(r=function(e){return function(t){return e(new s.StandardKeyboardEvent(t))}}(i)),m(e,t,r,n)},t.addDisposableNonBubblingMouseOutListener=function(e,t){return m(e,"mouseout",(i=>{let n=i.relatedTarget||i.target;for(;n&&n!==e;)n=n.parentNode;n!==e&&t(i)}))};let b=null;class v{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){console.error(e)}}static sort(e,t){return t.priority-e.priority}}!function(){let e=[],i=null,n=!1,r=!1,s=()=>{for(n=!1,i=e,e=[],r=!0;i.length>0;){i.sort(v.sort),i.shift().execute()}r=!1};t.scheduleAtNextAnimationFrame=(t,i=0)=>{let r=new v(t,i);return e.push(r),n||(n=!0,function(e){if(!b){const e=e=>setTimeout((()=>e((new Date).getTime())),0);b=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}b.call(self,e)}(s)),r},t.runAtThisOrScheduleAtNextAnimationFrame=(e,n)=>{if(r){let t=new v(e,n);return i.push(t),t}return t.scheduleAtNextAnimationFrame(e,n)}}(),t.measure=function(e){return t.scheduleAtNextAnimationFrame(e,1e4)},t.modify=function(e){return t.scheduleAtNextAnimationFrame(e,-1e4)};const y=function(e,t){return t};class _ extends c.Disposable{constructor(e,t,i,n=y,r=16){super();let s=null,o=0,l=this._register(new a.TimeoutTimer),c=()=>{o=(new Date).getTime(),i(s),s=null};this._register(m(e,t,(e=>{s=n(s,e);let t=(new Date).getTime()-o;t>=r?(l.cancel(),c()):l.setIfNotSet(c,r-t)})))}}function w(e){return document.defaultView.getComputedStyle(e,null)}t.addDisposableThrottledListener=function(e,t,i,n,r){return new _(e,t,i,n,r)},t.getComputedStyle=w;const S=function(e,t){return parseFloat(t)||0};function C(e,t,i){let n=w(e),r="0";return n&&(r=n.getPropertyValue?n.getPropertyValue(t):n.getAttribute(i)),S(e,r)}t.getClientArea=function(e){if(e!==document.body)return new R(e.clientWidth,e.clientHeight);if(window.innerWidth&&window.innerHeight)return new R(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new R(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new R(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")};const x=function(e){return C(e,"border-left-width","borderLeftWidth")},k=function(e){return C(e,"border-right-width","borderRightWidth")},E=function(e){return C(e,"border-top-width","borderTopWidth")},T=function(e){return C(e,"border-bottom-width","borderBottomWidth")},L=function(e){return C(e,"padding-left","paddingLeft")},N=function(e){return C(e,"padding-right","paddingRight")},M=function(e){return C(e,"padding-top","paddingTop")},O=function(e){return C(e,"padding-bottom","paddingBottom")},D=function(e){return C(e,"margin-left","marginLeft")},I=function(e){return C(e,"margin-top","marginTop")},A=function(e){return C(e,"margin-right","marginRight")},P=function(e){return C(e,"margin-bottom","marginBottom")};class R{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t||!(!e||!t)&&(e.width===t.width&&e.height===t.height)}}function B(e){let t=e.offsetParent,i=e.offsetTop,n=e.offsetLeft;for(;null!==(e=e.parentNode)&&e!==document.body&&e!==document.documentElement;){i-=e.scrollTop;let r=w(e);r&&(n-="rtl"!==r.direction?e.scrollLeft:-e.scrollLeft),e===t&&(n+=x(e),i+=E(e),i+=e.offsetTop,n+=e.offsetLeft,t=e.offsetParent)}return{left:n,top:i}}function F(e){let t=D(e)+A(e);return e.offsetWidth+t}function W(e){let t=D(e)+A(e);return e.scrollWidth+t}function V(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function z(e=document.getElementsByTagName("head")[0]){let t=document.createElement("style");return t.type="text/css",t.media="screen",e.appendChild(t),t}t.Dimension=R,t.getTopLeftOffset=B,t.size=function(e,t,i){"number"==typeof t&&(e.style.width=`${t}px`),"number"==typeof i&&(e.style.height=`${i}px`)},t.position=function(e,t,i,n,r,s="absolute"){"number"==typeof t&&(e.style.top=`${t}px`),"number"==typeof i&&(e.style.right=`${i}px`),"number"==typeof n&&(e.style.bottom=`${n}px`),"number"==typeof r&&(e.style.left=`${r}px`),e.style.position=s},t.getDomNodePagePosition=function(e){let i=e.getBoundingClientRect();return{left:i.left+t.StandardWindow.scrollX,top:i.top+t.StandardWindow.scrollY,width:i.width,height:i.height}},t.StandardWindow=new class{get scrollX(){return"number"==typeof window.scrollX?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return"number"==typeof window.scrollY?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}},t.getTotalWidth=F,t.getContentWidth=function(e){let t=x(e)+k(e),i=L(e)+N(e);return e.offsetWidth-t-i},t.getTotalScrollWidth=W,t.getContentHeight=function(e){let t=E(e)+T(e),i=M(e)+O(e);return e.offsetHeight-t-i},t.getTotalHeight=function(e){let t=I(e)+P(e);return e.offsetHeight+t},t.getLargestChildWidth=function(e,t){let i=t.map((t=>Math.max(W(t),F(t))+function(e,t){if(null===e)return 0;let i=B(e),n=B(t);return i.left-n.left}(t,e)||0));return Math.max(...i)},t.isAncestor=V,t.findParentWithClass=function(e,i,n){for(;e;){if(t.hasClass(e,i))return e;if(n)if("string"==typeof n){if(t.hasClass(e,n))return null}else if(e===n)return null;e=e.parentNode}return null},t.createStyleSheet=z;let H=null;function j(){return H||(H=z()),H}t.createCSSRule=function(e,t,i=j()){i&&t&&i.sheet.insertRule(e+"{"+t+"}",0)},t.removeCSSRulesContainingSelector=function(e,t=j()){if(!t)return;let i=function(e){return e&&e.sheet&&e.sheet.rules?e.sheet.rules:e&&e.sheet&&e.sheet.cssRules?e.sheet.cssRules:[]}(t),n=[];for(let t=0;t<i.length;t++){-1!==i[t].selectorText.indexOf(e)&&n.push(t)}for(let e=n.length-1;e>=0;e--)t.sheet.deleteRule(n[e])},t.isHTMLElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},t.EventType={MINIMIZE:"minimize",MAXIMIZE:"maximize",UNMAXIMIZE:"unmaximize",ENTER_FULLSCREEN:"enter-full-screen",LEAVE_FULLSCREEN:"leave-full-screen",CLICK:"click",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:n.isWebKit?"webkitAnimationStart":"animationstart",ANIMATION_END:n.isWebKit?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:n.isWebKit?"webkitAnimationIteration":"animationiteration"},t.EventHelper={stop:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)}},t.saveParentsScrollTop=function(e){let t=[];for(let i=0;e&&e.nodeType===e.ELEMENT_NODE;i++)t[i]=e.scrollTop,e=e.parentNode;return t},t.restoreParentsScrollTop=function(e,t){for(let i=0;e&&e.nodeType===e.ELEMENT_NODE;i++)e.scrollTop!==t[i]&&(e.scrollTop=t[i]),e=e.parentNode};class U{constructor(e){this._onDidFocus=new l.Emitter,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new l.Emitter,this.onDidBlur=this._onDidBlur.event,this.disposables=[];let i=V(document.activeElement,e),n=!1;r.domEvent(e,t.EventType.FOCUS,!0)((()=>{n=!1,i||(i=!0,this._onDidFocus.fire())}),null,this.disposables),r.domEvent(e,t.EventType.BLUR,!0)((()=>{i&&(n=!0,window.setTimeout((()=>{n&&(n=!1,i=!1,this._onDidBlur.fire())}),0))}),null,this.disposables)}dispose(){this.disposables=c.dispose(this.disposables),this._onDidFocus.dispose(),this._onDidBlur.dispose()}}t.trackFocus=function(e){return new U(e)},t.append=function(e,...t){return t.forEach((t=>e.appendChild(t))),t[t.length-1]},t.prepend=function(e,t){return e.insertBefore(t,e.firstChild),t};const G=/([\w\-]+)?(#([\w\-]+))?((.([\w\-]+))*)/;t.$=function(e,t,...i){let n=G.exec(e);if(!n)throw new Error("Bad use of emmet");let r=document.createElement(n[1]||"div");return n[3]&&(r.id=n[3]),n[4]&&(r.className=n[4].replace(/\./g," ").trim()),t=t||{},Object.keys(t).forEach((e=>{const i=t[e];/^on\w+$/.test(e)?r[e]=i:"selected"===e?i&&r.setAttribute(e,"true"):r.setAttribute(e,i)})),u.coalesce(i).forEach((e=>{e instanceof Node?r.appendChild(e):r.appendChild(document.createTextNode(e))})),r},t.join=function(e,t){const i=[];return e.forEach(((e,n)=>{n>0&&(t instanceof Node?i.push(t.cloneNode()):i.push(document.createTextNode(t))),i.push(e)})),i},t.show=function(...e){for(let t of e)t&&(t.style.display="",t.removeAttribute("aria-hidden"))},t.hide=function(...e){for(let t of e)t&&(t.style.display="none",t.setAttribute("aria-hidden","true"))},t.removeTabIndexAndUpdateFocus=function(e){if(e&&e.hasAttribute("tabIndex")){if(document.activeElement===e){let t=function(e,t){for(;e;){if(e instanceof HTMLElement&&e.hasAttribute(t))return e;e=e.parentNode}return null}(e.parentElement,"tabIndex");t&&t.focus()}e.removeAttribute("tabindex")}},t.getElementsByTagName=function(e){return Array.prototype.slice.call(document.getElementsByTagName(e),0)},t.finalHandler=function(e){return t=>{t.preventDefault(),t.stopPropagation(),e(t)}},t.domContentLoaded=function(){return new Promise((e=>{"complete"===document.readyState||document&&null!==document.body?h.setImmediate(e):window.addEventListener("DOMContentLoaded",e,!1)}))},t.computeScreenAwareSize=function(e){const t=window.devicePixelRatio*e;return Math.max(1,Math.floor(t))/window.devicePixelRatio},t.windowOpenNoOpener=function(e){if(h.isNative||n.isEdgeWebView)window.open(e);else{let t=window.open();t&&(t.opener=null,t.location.href=e)}},t.animate=function(e){const i=()=>{e(),n=t.scheduleAtNextAnimationFrame(i)};let n=t.scheduleAtNextAnimationFrame(i);return c.toDisposable((()=>n.dispose()))}},80921:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Relay=t.EventBufferer=t.AsyncEmitter=t.Emitter=t.setGlobalLeakWarningThreshold=t.Event=void 0;const r=i(10361),s=i(19219);var o;!function(e){const t={dispose(){}};function i(e){return(t,i=null,n)=>{let r=!1;const s=e((e=>{if(!r)return s?s.dispose():r=!0,t.call(i,e)}),null,n);return r&&s.dispose(),s}}function n(e,t){return(i,n=null,r)=>e((e=>i.call(n,t(e))),null,r)}function s(e,t){return(i,n=null,r)=>e((e=>{t(e),i.call(n,e)}),null,r)}function o(e,t){return(i,n=null,r)=>e((e=>t(e)&&i.call(n,e)),null,r)}function a(e,t,i){let r=i;return n(e,(e=>(r=t(r,e),r)))}function l(e){let t,i=!0;return o(e,(e=>{let n=i||e!==t;return i=!1,t=e,n}))}e.None=function(){return t},e.once=i,e.map=n,e.forEach=s,e.filter=o,e.signal=function(e){return e},e.any=function(...e){return(t,i=null,n)=>r.combinedDisposable(e.map((e=>e((e=>t.call(i,e)),null,n))))},e.reduce=a,e.debounce=function(e,t,i=100,n=!1,r){let s,o,a,l=0;const h=new c({leakWarningThreshold:r,onFirstListenerAdd(){s=e((e=>{l++,o=t(o,e),n&&!a&&h.fire(o),clearTimeout(a),a=setTimeout((()=>{let e=o;o=void 0,a=void 0,(!n||l>1)&&h.fire(e),l=0}),i)}))},onLastListenerRemove(){s.dispose()}});return h.event},e.stopwatch=function(e){const t=(new Date).getTime();return n(i(e),(e=>(new Date).getTime()-t))},e.latch=l,e.buffer=function(e,t=!1,i=[]){let n=i.slice(),r=e((e=>{n?n.push(e):o.fire(e)}));const s=()=>{n&&n.forEach((e=>o.fire(e))),n=null},o=new c({onFirstListenerAdd(){r||(r=e((e=>o.fire(e))))},onFirstListenerDidAdd(){n&&(t?setTimeout(s):s())},onLastListenerRemove(){r&&r.dispose(),r=null}});return o.event},e.echo=function(e,t=!1,i=[]){i=i.slice(),e((e=>{i.push(e),r.fire(e)}));const n=(e,t)=>i.forEach((i=>e.call(t,i))),r=new c({onListenerDidAdd(e,i,r){t?setTimeout((()=>n(i,r))):n(i,r)}});return r.event};class h{constructor(e){this._event=e}get event(){return this._event}map(e){return new h(n(this._event,e))}forEach(e){return new h(s(this._event,e))}filter(e){return new h(o(this._event,e))}reduce(e,t){return new h(a(this._event,e,t))}latch(){return new h(l(this._event))}on(e,t,i){return this._event(e,t,i)}once(e,t,n){return i(this._event)(e,t,n)}}e.chain=function(e){return new h(e)},e.fromNodeEventEmitter=function(e,t,i=(e=>e)){const n=(...e)=>r.fire(i(...e)),r=new c({onFirstListenerAdd:()=>e.on(t,n),onLastListenerRemove:()=>e.removeListener(t,n)});return r.event},e.fromPromise=function(e){const t=new c;let i=!1;return e.then(void 0,(()=>null)).then((()=>{i?t.fire(void 0):setTimeout((()=>t.fire(void 0)),0)})),i=!0,t.event},e.toPromise=function(e){return new Promise((t=>i(e)(t)))}}(o=t.Event||(t.Event={}));let a=-1;t.setGlobalLeakWarningThreshold=function(e){let t=a;return a=e,{dispose(){a=t}}};class l{constructor(e,t=Math.random().toString(18).slice(2,5)){this.customThreshold=e,this.name=t,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}check(e){let t=a;if("number"==typeof this.customThreshold&&(t=this.customThreshold),t<=0||e<t)return;this._stacks||(this._stacks=new Map);let i=(new Error).stack.split("\n").slice(3).join("\n"),n=this._stacks.get(i)||0;if(this._stacks.set(i,n+1),this._warnCountdown-=1,this._warnCountdown<=0){let i;this._warnCountdown=.5*t;let n=0;this._stacks.forEach(((e,t)=>{(!i||n<e)&&(i=t,n=e)})),console.warn(`[${this.name}] potential listener LEAK detected, having ${e} listeners already. MOST frequent listener (${n}):`),console.warn(i)}return()=>{let e=this._stacks.get(i)||0;this._stacks.set(i,e-1)}}}class c{constructor(e){this._disposed=!1,this._options=e,this._leakageMon=a>0?new l(this._options&&this._options.leakWarningThreshold):void 0}get event(){return this._event||(this._event=(e,t,i)=>{this._listeners||(this._listeners=new s.LinkedList);const n=this._listeners.isEmpty();n&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const r=this._listeners.push(t?[e,t]:e);let o,a;return n&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t),this._leakageMon&&(o=this._leakageMon.check(this._listeners.size)),a={dispose:()=>{if(o&&o(),a.dispose=c._noop,!this._disposed&&(r(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}},Array.isArray(i)&&i.push(a),a}),this._event}fire(e){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=[]);for(let t=this._listeners.iterator(),i=t.next();!i.done;i=t.next())this._deliveryQueue.push([i.value,e]);for(;this._deliveryQueue.length>0;){const[e,t]=this._deliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){console.error(e)}}}}dispose(){this._listeners&&(this._listeners=void 0),this._deliveryQueue&&(this._deliveryQueue.length=0),this._leakageMon&&this._leakageMon.dispose(),this._disposed=!0}}t.Emitter=c,c._noop=function(){};t.AsyncEmitter=class extends c{fireAsync(e){return n(this,void 0,void 0,(function*(){if(this._listeners){this._asyncDeliveryQueue||(this._asyncDeliveryQueue=[]);for(let t=this._listeners.iterator(),i=t.next();!i.done;i=t.next()){let t=[];this._asyncDeliveryQueue.push([i.value,e(t,"function"==typeof i.value?i.value:i.value[0]),t])}for(;this._asyncDeliveryQueue.length>0;){const[e,t,i]=this._asyncDeliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){console.error(e);continue}Object.freeze(i),yield Promise.all(i)}}}))}};t.EventBufferer=class{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,n)=>e((e=>{const n=this.buffers[this.buffers.length-1];n?n.push((()=>t.call(i,e))):t.call(i,e)}),void 0,n)}bufferEvents(e){const t=[];this.buffers.push(t);const i=e();return this.buffers.pop(),t.forEach((e=>e())),i}};t.Relay=class{constructor(){this.listening=!1,this.inputEvent=o.None,this.inputEventListener=r.Disposable.None,this.emitter=new c({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}},39771:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MappedNavigator=t.MappedIterator=t.ArrayNavigator=t.ArrayIterator=t.getSequenceIterator=t.Iterator=t.FIN=void 0,t.FIN={done:!0,value:void 0},function(e){const i={next:()=>t.FIN};function n(e,t){for(let i=e.next();!i.done;i=e.next())t(i.value)}e.empty=function(){return i},e.fromArray=function(e,i=0,n=e.length){return{next:()=>i>=n?t.FIN:{done:!1,value:e[i++]}}},e.from=function(t){return t?Array.isArray(t)?e.fromArray(t):t:e.empty()},e.map=function(e,i){return{next(){const n=e.next();return n.done?t.FIN:{done:!1,value:i(n.value)}}}},e.filter=function(e,i){return{next(){for(;;){const n=e.next();if(n.done)return t.FIN;if(i(n.value))return{done:!1,value:n.value}}}}},e.forEach=n,e.collect=function(e){const t=[];return n(e,(e=>t.push(e))),t}}(i=t.Iterator||(t.Iterator={})),t.getSequenceIterator=function(e){return Array.isArray(e)?i.fromArray(e):e};class n{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}first(){return this.index=this.start,this.current()}next(){return this.index=Math.min(this.index+1,this.end),this.current()}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}}t.ArrayIterator=n;t.ArrayNavigator=class extends n{constructor(e,t=0,i=e.length,n=t-1){super(e,t,i,n)}current(){return super.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}parent(){return null}};class r{constructor(e,t){this.iterator=e,this.fn=t}next(){return this.fn(this.iterator.next())}}t.MappedIterator=r;t.MappedNavigator=class extends r{constructor(e,t){super(e,t),this.navigator=e}current(){return this.fn(this.navigator.current())}previous(){return this.fn(this.navigator.previous())}parent(){return this.fn(this.navigator.parent())}first(){return this.fn(this.navigator.first())}last(){return this.fn(this.navigator.last())}next(){return this.fn(this.navigator.next())}}},21716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvedKeybinding=t.ResolvedKeybindingPart=t.ChordKeybinding=t.SimpleKeybinding=t.createSimpleKeybinding=t.createKeybinding=t.KeyChord=t.KeyCodeUtils=void 0;class i{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const n=new i,r=new i,s=new i;function o(e,t){const i=!!(2048&e),n=!!(256&e);return new a(2===t?n:i,!!(1024&e),!!(512&e),2===t?i:n,255&e)}!function(){function e(e,t,i=t,o=i){n.define(e,t),r.define(e,i),s.define(e,o)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")}(),function(e){e.toString=function(e){return n.keyCodeToStr(e)},e.fromString=function(e){return n.strToKeyCode(e)},e.toUserSettingsUS=function(e){return r.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return s.keyCodeToStr(e)},e.fromUserSettings=function(e){return r.strToKeyCode(e)||s.strToKeyCode(e)}}(t.KeyCodeUtils||(t.KeyCodeUtils={})),t.KeyChord=function(e,t){return(e|(65535&t)<<16>>>0)>>>0},t.createKeybinding=function(e,t){if(0===e)return null;const i=(65535&e)>>>0,n=(4294901760&e)>>>16;return 0!==n?new l(o(i,t),o(n,t)):o(i,t)},t.createSimpleKeybinding=o;class a{constructor(e,t,i,n,r){this.type=1,this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=r}equals(e){return 1===e.type&&(this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode)}getHashCode(){return`${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}t.SimpleKeybinding=a;class l{constructor(e,t){this.type=2,this.firstPart=e,this.chordPart=t}getHashCode(){return`${this.firstPart.getHashCode()};${this.chordPart.getHashCode()}`}}t.ChordKeybinding=l;t.ResolvedKeybindingPart=class{constructor(e,t,i,n,r,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=r,this.keyAriaLabel=s}};t.ResolvedKeybinding=class{}},10361:(e,t)=>{"use strict";function i(e,...t){return Array.isArray(e)?(e.forEach((e=>e&&e.dispose())),[]):0===t.length?e?(e.dispose(),e):void 0:(i(e),i(t),[])}Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=t.toDisposable=t.combinedDisposable=t.dispose=t.isDisposable=void 0,t.isDisposable=function(e){return"function"==typeof e.dispose&&0===e.dispose.length},t.dispose=i,t.combinedDisposable=function(e){return{dispose:()=>i(e)}},t.toDisposable=function(e){return{dispose(){e()}}};class n{constructor(){this._toDispose=[],this._lifecycle_disposable_isDisposed=!1}get toDispose(){return this._toDispose}dispose(){this._lifecycle_disposable_isDisposed=!0,this._toDispose=i(this._toDispose)}_register(e){return this._lifecycle_disposable_isDisposed?(console.warn("Registering disposable on object that has already been disposed."),e.dispose()):this._toDispose.push(e),e}}t.Disposable=n,n.None=Object.freeze({dispose(){}})},19219:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=void 0;const n=i(39771);class r{constructor(e){this.element=e}}t.LinkedList=class{constructor(){this._size=0}get size(){return this._size}isEmpty(){return!this._first}clear(){this._first=void 0,this._last=void 0,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new r(e);if(this._first)if(t){const e=this._last;this._last=i,i.prev=e,e.next=i}else{const e=this._first;this._first=i,i.next=e,e.prev=i}else this._first=i,this._last=i;return this._size+=1,this._remove.bind(this,i)}shift(){if(this._first){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last){const e=this._last.element;return this._remove(this._last),e}}_remove(e){let t=this._first;for(;t instanceof r;){if(t===e){if(t.prev&&t.next){let e=t.prev;e.next=t.next,t.next.prev=e}else t.prev||t.next?t.next?t.prev||(this._first=this._first.next,this._first.prev=void 0):(this._last=this._last.prev,this._last.next=void 0):(this._first=void 0,this._last=void 0);this._size-=1;break}t=t.next}}iterator(){let e,t=this._first;return{next:()=>t?(e?e.value=t.element:e={done:!1,value:t.element},t=t.next,e):n.FIN}}toArray(){let e=[];for(let t=this._first;t instanceof r;t=t.next)e.push(t.element);return e}}},357:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OS=t.setImmediate=t.globals=t.translationsConfigFile=t.locale=t.language=t.isRootUser=t.platform=t.isWeb=t.isNative=t.isLinux=t.isMacintosh=t.isWindows=t.PlatformToString=t.LANGUAGE_DEFAULT=void 0;let i,n,r,s=!1,o=!1,a=!1,l=!1,c=!1;t.LANGUAGE_DEFAULT="en";const h="undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.electron&&"renderer"===process.type;if("object"!=typeof navigator||h){if("object"==typeof process){s="win32"===process.platform,o="darwin"===process.platform,a="linux"===process.platform,i=t.LANGUAGE_DEFAULT,n=t.LANGUAGE_DEFAULT;const e=process.env.VSCODE_NLS_CONFIG;if(e)try{const s=JSON.parse(e),o=s.availableLanguages["*"];i=s.locale,n=o||t.LANGUAGE_DEFAULT,r=s._translationsConfigFile}catch(e){}l=!0}}else{const e=navigator.userAgent;s=e.indexOf("Windows")>=0,o=e.indexOf("Macintosh")>=0,a=e.indexOf("Linux")>=0,c=!0,i=navigator.language,n=i}t.PlatformToString=function(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}};let u=0;l&&(o?u=1:s?u=3:a&&(u=2)),t.isWindows=s,t.isMacintosh=o,t.isLinux=a,t.isNative=l,t.isWeb=c,t.platform=u,t.isRootUser=function(){return l&&!s&&0===process.getuid()},t.language=n,t.locale=i,t.translationsConfigFile=r;const d="object"==typeof self?self:"object"==typeof global?global:{};t.globals=d;let f=null;t.setImmediate=function(e){return null===f&&(f=t.globals.setImmediate?t.globals.setImmediate.bind(t.globals):"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick.bind(process):t.globals.setTimeout.bind(t.globals)),f(e)},t.OS=o?2:s?1:3},36774:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(10598),t),r(i(98796),t),r(i(49935),t)},95140:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanMnemonic=t.CETMenu=t.MENU_ESCAPED_MNEMONIC_REGEX=t.MENU_MNEMONIC_REGEX=void 0;const n=i(82538),r=i(21716),s=i(357),o=i(28597),a=i(5717),l=i(10361),c=i(80921),h=i(74624);t.MENU_MNEMONIC_REGEX=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,t.MENU_ESCAPED_MNEMONIC_REGEX=/(&amp;)?(&amp;)([^\s&])/g;class u extends l.Disposable{constructor(e,t={},i=(()=>{})){super(),this.triggerKeys={keys:[3,10],keyDown:!0},this.parentData={parent:this},this._onDidCancel=this._register(new c.Emitter),this.menuContainer=e,this.options=t,this.closeSubMenu=i,this.items=[],this.focusedItem=void 0,this.mnemonics=new Map,this._register(n.addDisposableListener(this.menuContainer,n.EventType.KEY_DOWN,(e=>{const t=new o.StandardKeyboardEvent(e);let i=!0;t.equals(16)?this.focusPrevious():t.equals(18)?this.focusNext():t.equals(9)?this.cancel():this.isTriggerKeyEvent(t)?this.triggerKeys&&this.triggerKeys.keyDown&&this.doTrigger(t):i=!1,i&&(t.preventDefault(),t.stopPropagation())}))),this._register(n.addDisposableListener(this.menuContainer,n.EventType.KEY_UP,(e=>{const t=new o.StandardKeyboardEvent(e);this.isTriggerKeyEvent(t)?(this.triggerKeys&&!this.triggerKeys.keyDown&&this.doTrigger(t),t.preventDefault(),t.stopPropagation()):(t.equals(2)||t.equals(1026))&&this.updateFocusedItem()}))),t.enableMnemonics&&this._register(n.addDisposableListener(this.menuContainer,n.EventType.KEY_DOWN,(e=>{const t=r.KeyCodeUtils.fromString(e.key);if(this.mnemonics.has(t)){const i=this.mnemonics.get(t);if(1===i.length&&(i[0]instanceof d&&this.focusItemByElement(i[0].getContainer()),i[0].onClick(e)),i.length>1){const e=i.shift();e&&(this.focusItemByElement(e.getContainer()),i.push(e)),this.mnemonics.set(t,i)}}}))),s.isLinux&&this._register(n.addDisposableListener(this.menuContainer,n.EventType.KEY_DOWN,(e=>{const t=new o.StandardKeyboardEvent(e);t.equals(14)||t.equals(11)?(this.focusedItem=this.items.length-1,this.focusNext(),n.EventHelper.stop(e,!0)):(t.equals(13)||t.equals(12))&&(this.focusedItem=0,this.focusPrevious(),n.EventHelper.stop(e,!0))}))),this._register(n.addDisposableListener(this.menuContainer,n.EventType.MOUSE_OUT,(e=>{let t=e.relatedTarget;n.isAncestor(t,this.menuContainer)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())}))),this._register(n.addDisposableListener(this.menuContainer,n.EventType.MOUSE_UP,(e=>{n.EventHelper.stop(e,!0)}))),this._register(n.addDisposableListener(this.menuContainer,n.EventType.MOUSE_OVER,(e=>{let t=e.target;if(t&&n.isAncestor(t,this.menuContainer)&&t!==this.menuContainer){for(;t.parentElement!==this.menuContainer&&null!==t.parentElement;)t=t.parentElement;if(n.hasClass(t,"action-item")){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}}))),this.options.ariaLabel&&this.menuContainer.setAttribute("aria-label",this.options.ariaLabel)}get onDidCancel(){return this._onDidCancel.event}setAriaLabel(e){e?this.menuContainer.setAttribute("aria-label",e):this.menuContainer.removeAttribute("aria-label")}isTriggerKeyEvent(e){let t=!1;return this.triggerKeys&&this.triggerKeys.keys.forEach((i=>{t=t||e.equals(i)})),t}updateFocusedItem(){for(let e=0;e<this.menuContainer.children.length;e++){const t=this.menuContainer.children[e];if(n.isAncestor(document.activeElement,t)){this.focusedItem=e;break}}}getContainer(){return this.menuContainer}createMenu(e){e.forEach((e=>{const t=document.createElement("li");t.className="action-item",t.setAttribute("role","presentation"),this._register(n.addDisposableListener(t,n.EventType.CONTEXT_MENU,(e=>{e.preventDefault(),e.stopPropagation()})));let i=null;if("separator"===e.type)i=new f(e,this.options);else if("submenu"===e.type||e.submenu){const t=e.submenu.items;if(i=new d(e,t,this.parentData,this.options,this.closeSubMenu),this.options.enableMnemonics){const e=i.getMnemonic();if(e&&i.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(i),this.mnemonics.set(e,t)}}}else{const t={enableMnemonics:this.options.enableMnemonics};if(i=new a.CETMenuItem(e,t,this.closeSubMenu,this.items),this.options.enableMnemonics){const e=i.getMnemonic();if(e&&i.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(i),this.mnemonics.set(e,t)}}}i.render(t),this.menuContainer.appendChild(t),this.items.push(i)}))}focus(e){let t,i=!1;void 0===e?i=!0:"number"==typeof e?t=e:"boolean"==typeof e&&(i=e),i&&void 0===this.focusedItem?(this.focusedItem=this.items.length-1,this.focusNext()):(void 0!==t&&(this.focusedItem=t),this.updateFocus())}focusNext(){void 0===this.focusedItem&&(this.focusedItem=this.items.length-1);const e=this.focusedItem;let t;do{this.focusedItem=(this.focusedItem+1)%this.items.length,t=this.items[this.focusedItem]}while(this.focusedItem!==e&&!t.isEnabled()||t.isSeparator());(this.focusedItem===e&&!t.isEnabled()||t.isSeparator())&&(this.focusedItem=void 0),this.updateFocus()}focusPrevious(){void 0===this.focusedItem&&(this.focusedItem=0);const e=this.focusedItem;let t;do{this.focusedItem=this.focusedItem-1,this.focusedItem<0&&(this.focusedItem=this.items.length-1),t=this.items[this.focusedItem]}while(this.focusedItem!==e&&!t.isEnabled()||t.isSeparator());(this.focusedItem===e&&!t.isEnabled()||t.isSeparator())&&(this.focusedItem=void 0),this.updateFocus()}updateFocus(){void 0===this.focusedItem&&this.menuContainer.focus();for(let e=0;e<this.items.length;e++){const t=this.items[e];e===this.focusedItem?t.isEnabled()?t.focus():this.menuContainer.focus():t.blur()}}doTrigger(e){if(void 0===this.focusedItem)return;const t=this.items[this.focusedItem];t instanceof a.CETMenuItem&&t.onClick(e)}cancel(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this._onDidCancel.fire()}dispose(){l.dispose(this.items),this.items=[],n.removeNode(this.getContainer()),super.dispose()}style(e){this.getContainer().style.backgroundColor=e.backgroundColor?e.backgroundColor.toString():null,this.items&&this.items.forEach((t=>{(t instanceof a.CETMenuItem||t instanceof f)&&t.style(e)}))}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.menuContainer.children.length;t++){if(e===this.menuContainer.children[t]){this.focusedItem=t;break}}}}t.CETMenu=u;class d extends a.CETMenuItem{constructor(e,t,i,r,s=(()=>{})){super(e,r,s),this.submenuItems=t,this.parentData=i,this.submenuOptions=r,this.submenuDisposables=[],this.showScheduler=new h.RunOnceScheduler((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new h.RunOnceScheduler((()=>{this.container&&!n.isAncestor(document.activeElement,this.container)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(e){super.render(e),this.itemElement&&(n.addClass(this.itemElement,"submenu-item"),this.itemElement.setAttribute("aria-haspopup","true"),this.submenuIndicator=n.append(this.itemElement,n.$("span.submenu-indicator")),this.submenuIndicator.setAttribute("aria-hidden","true"),this._register(n.addDisposableListener(this.container,n.EventType.KEY_UP,(e=>{let t=new o.StandardKeyboardEvent(e);(t.equals(17)||t.equals(3))&&(n.EventHelper.stop(e,!0),this.createSubmenu(!0))}))),this._register(n.addDisposableListener(this.container,n.EventType.KEY_DOWN,(e=>{let t=new o.StandardKeyboardEvent(e);(t.equals(17)||t.equals(3))&&n.EventHelper.stop(e,!0)}))),this._register(n.addDisposableListener(this.container,n.EventType.MOUSE_OVER,(e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register(n.addDisposableListener(this.container,n.EventType.MOUSE_LEAVE,(e=>{this.mouseOver=!1}))),this._register(n.addDisposableListener(this.container,n.EventType.FOCUS_OUT,(e=>{this.container&&!n.isAncestor(document.activeElement,this.container)&&this.hideScheduler.schedule()}))))}onClick(e){n.EventHelper.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!1)}cleanupExistingSubmenu(e){this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)&&(this.parentData.submenu.dispose(),this.parentData.submenu=void 0,this.submenuContainer&&(this.submenuContainer=void 0))}createSubmenu(e=!0){if(this.itemElement)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.submenuContainer=n.append(this.container,n.$("ul.submenu")),n.addClasses(this.submenuContainer,"menubar-menu-container"),this.parentData.submenu=new u(this.submenuContainer,this.submenuOptions,this.closeSubMenu),this.parentData.submenu.createMenu(this.submenuItems),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const t=this.container.getBoundingClientRect(),i=this.submenuContainer.getBoundingClientRect(),r=getComputedStyle(this.parentData.parent.getContainer()),s=parseFloat(r.paddingTop||"0")||0;window.innerWidth<=t.right+i.width?(this.submenuContainer.style.left="10px",this.submenuContainer.style.top=`${this.container.offsetTop+t.height}px`):(this.submenuContainer.style.left=`${this.container.offsetWidth}px`,this.submenuContainer.style.top=this.container.offsetTop-s+"px"),this.submenuDisposables.push(n.addDisposableListener(this.submenuContainer,n.EventType.KEY_UP,(e=>{new o.StandardKeyboardEvent(e).equals(15)&&(n.EventHelper.stop(e,!0),this.parentData.parent.focus(),this.parentData.submenu&&(this.parentData.submenu.dispose(),this.parentData.submenu=void 0),this.submenuDisposables=l.dispose(this.submenuDisposables),this.submenuContainer=void 0)}))),this.submenuDisposables.push(n.addDisposableListener(this.submenuContainer,n.EventType.KEY_DOWN,(e=>{new o.StandardKeyboardEvent(e).equals(15)&&n.EventHelper.stop(e,!0)}))),this.submenuDisposables.push(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.parentData.submenu&&(this.parentData.submenu.dispose(),this.parentData.submenu=void 0),this.submenuDisposables=l.dispose(this.submenuDisposables),this.submenuContainer=void 0}))),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const e=this.container&&n.hasClass(this.container,"focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator.style.backgroundColor=e?`${e}`:null,this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuDisposables=l.dispose(this.submenuDisposables),this.submenuContainer=void 0)}}class f extends a.CETMenuItem{constructor(e,t){super(e,t)}render(e){e&&(this.separatorElement=n.append(e,n.$("a.action-label")),this.separatorElement.setAttribute("role","presentation"),n.addClass(this.separatorElement,"separator"))}style(e){this.separatorElement.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:null}}t.cleanMnemonic=function(e){const i=t.MENU_MNEMONIC_REGEX,n=i.exec(e);if(!n)return e;const r=!n[1];return e.replace(i,r?"$2$3":"").trim()}},5717:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CETMenuItem=void 0;const n=i(82538),r=i(58933),s=i(95140),o=i(21716),a=i(10361),l=i(357);class c extends a.Disposable{constructor(e,t={},i=(()=>{}),n){if(super(),this.item=e,this.options=t,this.currentWindow=r.remote.getCurrentWindow(),this.closeSubMenu=i,this.menuContainer=n,this.item.label&&t.enableMnemonics){let e=this.item.label;if(e){let t=s.MENU_MNEMONIC_REGEX.exec(e);t&&(this.mnemonic=o.KeyCodeUtils.fromString((t[1]?t[1]:t[2]).toLocaleUpperCase()))}}}getContainer(){return this.container}getItem(){return this.item}isEnabled(){return this.item.enabled}isSeparator(){return"separator"===this.item.type}render(e){this.container=e,this._register(n.addDisposableListener(this.container,n.EventType.MOUSE_DOWN,(e=>{this.item.enabled&&0===e.button&&this.container&&n.addClass(this.container,"active")}))),this._register(n.addDisposableListener(this.container,n.EventType.CLICK,(e=>{this.item.enabled&&this.onClick(e)}))),this._register(n.addDisposableListener(this.container,n.EventType.DBLCLICK,(e=>{n.EventHelper.stop(e,!0)}))),[n.EventType.MOUSE_UP,n.EventType.MOUSE_OUT].forEach((e=>{this._register(n.addDisposableListener(this.container,e,(e=>{n.EventHelper.stop(e),n.removeClass(this.container,"active")})))})),this.itemElement=n.append(this.container,n.$("a.action-menu-item")),this.itemElement.setAttribute("role","menuitem"),this.mnemonic&&this.itemElement.setAttribute("aria-keyshortcuts",`${this.mnemonic}`),this.checkElement=n.append(this.itemElement,n.$("span.menu-item-check")),this.checkElement.setAttribute("role","none"),this.iconElement=n.append(this.itemElement,n.$("span.menu-item-icon")),this.iconElement.setAttribute("role","none"),this.labelElement=n.append(this.itemElement,n.$("span.action-label")),this.setAccelerator(),this.updateLabel(),this.updateIcon(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.updateVisibility()}onClick(e){n.EventHelper.stop(e,!0),this.item.click(this.event,this.currentWindow,this.currentWindow.webContents),"checkbox"===this.item.type?this.updateChecked():"radio"===this.item.type?this.updateRadioGroup():this.closeSubMenu()}focus(){this.container&&(this.container.focus(),n.addClass(this.container,"focused")),this.applyStyle()}blur(){this.container&&(this.container.blur(),n.removeClass(this.container,"focused")),this.applyStyle()}setAccelerator(){var e=null;if(this.item.role)switch(this.item.role.toLocaleLowerCase()){case"undo":e="CtrlOrCmd+Z";break;case"redo":e="CtrlOrCmd+Y";break;case"cut":e="CtrlOrCmd+X";break;case"copy":e="CtrlOrCmd+C";break;case"paste":e="CtrlOrCmd+V";break;case"selectall":e="CtrlOrCmd+A";break;case"minimize":e="CtrlOrCmd+M";break;case"close":e="CtrlOrCmd+W";break;case"reload":e="CtrlOrCmd+R";break;case"forcereload":e="CtrlOrCmd+Shift+R";break;case"toggledevtools":e="CtrlOrCmd+Shift+I";break;case"togglefullscreen":e="F11";break;case"resetzoom":e="CtrlOrCmd+0";break;case"zoomin":e="CtrlOrCmd+Shift+=";break;case"zoomout":e="CtrlOrCmd+-"}this.item.label&&this.item.accelerator&&(e=this.item.accelerator),null!==e&&(n.append(this.itemElement,n.$("span.keybinding")).textContent=h(e))}updateLabel(){if(this.item.label){let e=this.item.label;if(e){const t=s.cleanMnemonic(e);this.options.enableMnemonics||(e=t),this.labelElement&&this.labelElement.setAttribute("aria-label",t.replace(/&&/g,"&"));const i=s.MENU_MNEMONIC_REGEX.exec(e);if(i){e=escape(e),s.MENU_ESCAPED_MNEMONIC_REGEX.lastIndex=0;let t=s.MENU_ESCAPED_MNEMONIC_REGEX.exec(e);for(;t&&t[1];)t=s.MENU_ESCAPED_MNEMONIC_REGEX.exec(e);t&&(e=`${e.substr(0,t.index)}<u aria-hidden="true">${t[3]}</u>${e.substr(t.index+t[0].length)}`),e=e.replace(/&amp;&amp;/g,"&amp;"),this.itemElement&&this.itemElement.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else e=e.replace(/&&/g,"&")}this.labelElement&&(this.labelElement.innerHTML=e.trim())}}updateIcon(){let e=null;if(this.item.icon&&(e=this.item.icon),e){n.append(this.iconElement,n.$("img")).setAttribute("src",e.toString())}}updateTooltip(){let e=null;this.item.sublabel?e=this.item.sublabel:!this.item.label&&this.item.label&&this.item.icon&&(e=this.item.label,this.item.accelerator&&(e=h(this.item.accelerator))),e&&(this.itemElement.title=e)}updateEnabled(){this.item.enabled&&"separator"!==this.item.type?(n.removeClass(this.container,"disabled"),this.container.tabIndex=0):n.addClass(this.container,"disabled")}updateVisibility(){!1===this.item.visible&&this.itemElement&&this.itemElement.remove()}updateChecked(){this.item.checked?(n.addClass(this.itemElement,"checked"),this.itemElement.setAttribute("role","menuitemcheckbox"),this.itemElement.setAttribute("aria-checked","true")):(n.removeClass(this.itemElement,"checked"),this.itemElement.setAttribute("role","menuitem"),this.itemElement.setAttribute("aria-checked","false"))}updateRadioGroup(){void 0===this.radioGroup&&(this.radioGroup=this.getRadioGroup());for(let e=this.radioGroup.start;e<this.radioGroup.end;e++){const t=this.menuContainer[e];t instanceof c&&"radio"===t.item.type&&(t.updateChecked(),t!==this&&(t.radioGroup=this.radioGroup))}}getRadioGroup(){let e=0,t=this.menuContainer.length,i=!1;for(const n in this.menuContainer){const r=this.menuContainer[n];if(r===this)i=!0;else if(r instanceof c&&r.isSeparator()){if(i){t=Number.parseInt(n);break}e=Number.parseInt(n)+1}}return{start:e,end:t}}dispose(){this.itemElement&&(n.removeNode(this.itemElement),this.itemElement=void 0),super.dispose()}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.container&&n.hasClass(this.container,"focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:this.menuStyle.backgroundColor;this.checkElement.style.backgroundColor=t?t.toString():null,this.itemElement.style.color=t?t.toString():null,this.itemElement.style.backgroundColor=i?i.toString():null}style(e){this.menuStyle=e,this.applyStyle()}}function h(e){var t=e.toString();return t=(t=l.isMacintosh?t.replace(/(Ctrl)|(Control)/gi,""):t.replace(/(Cmd)|(Command)/gi,"")).replace(/(Or)/gi,"")}t.CETMenuItem=c},95849:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escape=t.Menubar=void 0;const n=i(58933),r=i(82538),s=i(95140),o=i(28597),a=i(21716),l=i(10361),c=i(80921),h=i(60712),u=i(357);var d;!function(e){e[e.HIDDEN=0]="HIDDEN",e[e.VISIBLE=1]="VISIBLE",e[e.FOCUSED=2]="FOCUSED",e[e.OPEN=3]="OPEN"}(d||(d={}));class f extends l.Disposable{constructor(e,t,i=(()=>{})){super(),this.container=e,this.options=t,this.menuItems=[],this.mnemonics=new Map,this.closeSubMenu=i,this._focusState=d.VISIBLE,this._onVisibilityChange=this._register(new c.Emitter),this._onFocusStateChange=this._register(new c.Emitter),this._register(p.getInstance().event(this.onModifierKeyToggled,this)),this._register(r.addDisposableListener(this.container,r.EventType.KEY_DOWN,(e=>{let t=new o.StandardKeyboardEvent(e),i=!0;const n=e.key?a.KeyCodeUtils.fromString(e.key):0;if(t.equals(15))this.focusPrevious();else if(t.equals(17))this.focusNext();else if(t.equals(9)&&this.isFocused&&!this.isOpen)this.setUnfocusedState();else if(!this.isOpen&&!t.ctrlKey&&this.options.enableMnemonics&&this.mnemonicsInUse&&this.mnemonics.has(n)){const e=this.mnemonics.get(n);this.onMenuTriggered(e,!1)}else i=!1;i&&(t.preventDefault(),t.stopPropagation())}))),this._register(r.addDisposableListener(window,r.EventType.MOUSE_DOWN,(()=>{this.isFocused&&this.setUnfocusedState()}))),this._register(r.addDisposableListener(this.container,r.EventType.FOCUS_IN,(e=>{let t=e;t.relatedTarget&&(this.container.contains(t.relatedTarget)||(this.focusToReturn=t.relatedTarget))}))),this._register(r.addDisposableListener(this.container,r.EventType.FOCUS_OUT,(e=>{let t=e;t.relatedTarget&&(this.container.contains(t.relatedTarget)||(this.focusToReturn=void 0,this.setUnfocusedState()))}))),this._register(r.addDisposableListener(window,r.EventType.KEY_DOWN,(e=>{if(!this.options.enableMnemonics||!e.altKey||e.ctrlKey||e.defaultPrevented)return;const t=a.KeyCodeUtils.fromString(e.key);if(!this.mnemonics.has(t))return;this.mnemonicsInUse=!0,this.updateMnemonicVisibility(!0);const i=this.mnemonics.get(t);this.onMenuTriggered(i,!1)}))),this.setUnfocusedState(),this.registerListeners()}registerListeners(){u.isMacintosh||this._register(r.addDisposableListener(window,r.EventType.RESIZE,(()=>{this.blur()})))}setupMenubar(){const e=this.options.menu.items;this._register(this.onFocusStateChange((e=>this._onFocusStateChange.fire(e)))),this._register(this.onVisibilityChange((e=>this._onVisibilityChange.fire(e)))),e.forEach((e=>{const t=this.menuItems.length,i=s.cleanMnemonic(e.label),n=r.$("div.menubar-menu-button",{role:"menuitem",tabindex:-1,"aria-label":i,"aria-haspopup":!0});e.enabled||r.addClass(n,"disabled");const a=r.$("div.menubar-menu-title",{role:"none","aria-hidden":!0});n.appendChild(a),r.append(this.container,n);let l=s.MENU_MNEMONIC_REGEX.exec(e.label);if(l){let e=l[1]?l[1]:l[2];this.registerMnemonic(this.menuItems.length,e)}this.updateLabels(a,n,e.label),e.enabled&&(this._register(r.addDisposableListener(n,r.EventType.KEY_UP,(e=>{let i=new o.StandardKeyboardEvent(e),n=!0;!i.equals(18)&&!i.equals(3)||this.isOpen?n=!1:(this.focusedMenu={index:t},this.openedViaKeyboard=!0,this.focusState=d.OPEN),n&&(i.preventDefault(),i.stopPropagation())}))),this._register(r.addDisposableListener(n,r.EventType.MOUSE_DOWN,(e=>{this.isOpen?this.ignoreNextMouseUp=!1:(this.ignoreNextMouseUp=!0,this.onMenuTriggered(t,!0)),e.preventDefault(),e.stopPropagation()}))),this._register(r.addDisposableListener(n,r.EventType.MOUSE_UP,(()=>{this.ignoreNextMouseUp?this.ignoreNextMouseUp=!1:this.isFocused&&this.onMenuTriggered(t,!0)}))),this._register(r.addDisposableListener(n,r.EventType.MOUSE_ENTER,(()=>{this.isOpen&&!this.isCurrentMenu(t)?(this.menuItems[t].buttonElement.focus(),this.cleanupMenu(),this.menuItems[t].submenu&&this.showMenu(t,!1)):this.isFocused&&!this.isOpen&&(this.focusedMenu={index:t},n.focus())}))),this.menuItems.push({menuItem:e,submenu:e.submenu,buttonElement:n,titleElement:a}))}))}onClick(e){const t=this.menuItems[e].menuItem,i=n.remote.getCurrentWindow();t.click(undefined,i,i.webContents)}get onVisibilityChange(){return this._onVisibilityChange.event}get onFocusStateChange(){return this._onFocusStateChange.event}dispose(){super.dispose(),this.menuItems.forEach((e=>{r.removeNode(e.titleElement),r.removeNode(e.buttonElement)}))}blur(){this.setUnfocusedState()}setStyles(e){this.menuStyle=e}updateLabels(e,t,i){const n=s.cleanMnemonic(i);if(this.options.enableMnemonics){let t=g(i);s.MENU_ESCAPED_MNEMONIC_REGEX.lastIndex=0;let n=s.MENU_ESCAPED_MNEMONIC_REGEX.exec(t);for(;n&&n[1];)n=s.MENU_ESCAPED_MNEMONIC_REGEX.exec(t);n&&(t=`${t.substr(0,n.index)}<mnemonic aria-hidden="true">${n[3]}</mnemonic>${t.substr(n.index+n[0].length)}`),t=t.replace(/&amp;&amp;/g,"&amp;"),e.innerHTML=t}else e.innerHTML=n.replace(/&&/g,"&");let r=s.MENU_MNEMONIC_REGEX.exec(i);if(r){let e=r[1]?r[1]:r[3];this.options.enableMnemonics?t.setAttribute("aria-keyshortcuts","Alt+"+e.toLocaleLowerCase()):t.removeAttribute("aria-keyshortcuts")}}registerMnemonic(e,t){this.mnemonics.set(a.KeyCodeUtils.fromString(t),e)}hideMenubar(){"none"!==this.container.style.display&&(this.container.style.display="none")}showMenubar(){"flex"!==this.container.style.display&&(this.container.style.display="flex")}get focusState(){return this._focusState}set focusState(e){if(e===this._focusState)return;const t=this.isVisible,i=this.isOpen,n=this.isFocused;switch(this._focusState=e,e){case d.HIDDEN:t&&this.hideMenubar(),i&&this.cleanupMenu(),n&&(this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case d.VISIBLE:t||this.showMenubar(),i&&this.cleanupMenu(),n&&(this.focusedMenu&&this.menuItems[this.focusedMenu.index].buttonElement.blur(),this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case d.FOCUSED:t||this.showMenubar(),i&&this.cleanupMenu(),this.focusedMenu&&this.menuItems[this.focusedMenu.index].buttonElement.focus();break;case d.OPEN:t||this.showMenubar(),this.focusedMenu&&this.menuItems[this.focusedMenu.index].submenu&&this.showMenu(this.focusedMenu.index,this.openedViaKeyboard)}this._focusState=e}get isVisible(){return this.focusState>=d.VISIBLE}get isFocused(){return this.focusState>=d.FOCUSED}get isOpen(){return this.focusState>=d.OPEN}setUnfocusedState(){this.focusState=d.VISIBLE,this.ignoreNextMouseUp=!1,this.mnemonicsInUse=!1,this.updateMnemonicVisibility(!1)}focusPrevious(){if(!this.focusedMenu)return;let e=(this.focusedMenu.index-1+this.menuItems.length)%this.menuItems.length;e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupMenu(),this.menuItems[e].submenu&&this.showMenu(e)):this.isFocused&&(this.focusedMenu.index=e,this.menuItems[e].buttonElement.focus()))}focusNext(){if(!this.focusedMenu)return;let e=(this.focusedMenu.index+1)%this.menuItems.length;e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupMenu(),this.menuItems[e].submenu&&this.showMenu(e)):this.isFocused&&(this.focusedMenu.index=e,this.menuItems[e].buttonElement.focus()))}updateMnemonicVisibility(e){this.menuItems&&this.menuItems.forEach((t=>{if(t.titleElement.children.length){let i=t.titleElement.children.item(0);i&&(i.style.textDecoration=e?"underline":null)}}))}get mnemonicsInUse(){return this._mnemonicsInUse}set mnemonicsInUse(e){this._mnemonicsInUse=e}onMenuTriggered(e,t){this.isOpen?this.isCurrentMenu(e)?this.setUnfocusedState():(this.cleanupMenu(),this.menuItems[e].submenu?this.showMenu(e,this.openedViaKeyboard):this.menuItems[e].menuItem.enabled&&this.onClick(e)):(this.focusedMenu={index:e},this.openedViaKeyboard=!t,this.menuItems[e].submenu?this.focusState=d.OPEN:this.menuItems[e].menuItem.enabled&&this.onClick(e))}onModifierKeyToggled(e){const t=!e.altKey&&!e.ctrlKey&&!e.shiftKey;this.isFocused&&"alt"===e.lastKeyPressed&&e.altKey&&(this.setUnfocusedState(),this.mnemonicsInUse=!1,this.awaitingAltRelease=!0),t&&"alt"===e.lastKeyPressed&&"alt"===e.lastKeyReleased&&(this.awaitingAltRelease||(this.isFocused?this.isOpen||this.setUnfocusedState():(this.mnemonicsInUse=!0,this.focusedMenu={index:0},this.focusState=d.FOCUSED))),e.altKey||"alt"!==e.lastKeyReleased||(this.awaitingAltRelease=!1),this.options.enableMnemonics&&this.menuItems&&!this.isOpen&&this.updateMnemonicVisibility(!this.awaitingAltRelease&&e.altKey||this.mnemonicsInUse)}isCurrentMenu(e){return!!this.focusedMenu&&this.focusedMenu.index===e}cleanupMenu(){this.focusedMenu&&(this.menuItems[this.focusedMenu.index].buttonElement.focus(),this.focusedMenu.holder&&(this.focusedMenu.holder.parentElement&&r.removeClass(this.focusedMenu.holder.parentElement,"open"),this.focusedMenu.holder.remove()),this.focusedMenu.widget&&this.focusedMenu.widget.dispose(),this.focusedMenu={index:this.focusedMenu.index})}showMenu(e,t=!0){const i=this.menuItems[e],n=i.buttonElement,o=n.getBoundingClientRect(),a=r.$("ul.menubar-menu-container");r.addClass(n,"open"),a.setAttribute("role","menu"),a.tabIndex=0,a.style.top=`${o.bottom}px`,a.style.left=`${o.left}px`,n.appendChild(a),a.style.maxHeight=`${Math.max(10,window.innerHeight-o.top-50)}px`;let l={enableMnemonics:this.mnemonicsInUse&&this.options.enableMnemonics,ariaLabel:n.attributes["aria-label"].value},c=new s.CETMenu(a,l,this.closeSubMenu);c.createMenu(i.submenu.items),c.style(this.menuStyle),this._register(c.onDidCancel((()=>{this.focusState=d.FOCUSED}))),c.focus(t),this.focusedMenu={index:e,holder:a,widget:c}}}t.Menubar=f;class p extends c.Emitter{constructor(){super(),this._subscriptions=[],this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1},this._subscriptions.push(h.domEvent(document.body,"keydown",!0)((e=>{const t=new o.StandardKeyboardEvent(e);if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(6===t.keyCode)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&this.fire(this._keyStatus)}))),this._subscriptions.push(h.domEvent(document.body,"keyup",!0)((e=>{!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&this.fire(this._keyStatus)}))),this._subscriptions.push(h.domEvent(document.body,"mousedown",!0)((e=>{this._keyStatus.lastKeyPressed=void 0}))),this._subscriptions.push(h.domEvent(window,"blur")((e=>{this._keyStatus.lastKeyPressed=void 0,this._keyStatus.lastKeyReleased=void 0,this._keyStatus.altKey=!1,this._keyStatus.shiftKey=!1,this._keyStatus.shiftKey=!1,this.fire(this._keyStatus)})))}static getInstance(){return p.instance||(p.instance=new p),p.instance}dispose(){super.dispose(),this._subscriptions=l.dispose(this._subscriptions)}}function g(e){return e.replace(/[<>&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}))}t.escape=g},98796:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Themebar=void 0;const n=i(10361);class r extends n.Disposable{constructor(){super(),this.theming=[],this.theming=[]}onThemeChange(e){return this.theming.push(e),n.toDisposable((()=>{const t=this.theming.indexOf(e);this.theming.splice(t,1)}))}getTheming(){return this.theming}}t.Themebar=class extends r{constructor(){super(),this.registerTheme((e=>{e.addRule("\n            .titlebar {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                box-sizing: border-box;\n                width: 100%;\n                font-size: 13px;\n                padding: 0 16px;\n                overflow: hidden;\n                flex-shrink: 0;\n                align-items: center;\n                justify-content: center;\n                user-select: none;\n                zoom: 1;\n                line-height: 22px;\n                height: 22px;\n                display: flex;\n                z-index: 99999;\n            }\n        \n            .titlebar.cet-windows, .titlebar.cet-linux {\n                padding: 0;\n                height: 30px;\n                line-height: 30px;\n                justify-content: left;\n                overflow: visible;\n            }\n        \n            .titlebar.inverted, .titlebar.inverted .menubar,\n            .titlebar.inverted .window-controls-container {\n                flex-direction: row-reverse;\n            }\n        \n            .titlebar.inverted .window-controls-container {\n                margin: 0 5px 0 0;\n            }\n        \n            .titlebar.first-buttons .window-controls-container {\n                order: -1;\n                margin: 0 5px 0 0;\n            }\n            ")})),this.registerTheme((e=>{e.addRule("\n            .titlebar .titlebar-drag-region {\n                top: 0;\n                left: 0;\n                display: block;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                z-index: -1;\n                -webkit-app-region: drag;\n            }\n            ")})),this.registerTheme((e=>{e.addRule("\n            .titlebar > .window-appicon {\n                width: 35px;\n                height: 30px;\n                position: relative;\n                z-index: 99;\n                background-repeat: no-repeat;\n                background-position: center center;\n                background-size: 16px;\n                flex-shrink: 0;\n            }\n            ")})),this.registerTheme((e=>{e.addRule("\n            .menubar {\n                display: flex;\n                flex-shrink: 1;\n                box-sizing: border-box;\n                height: 30px;\n                overflow: hidden;\n                flex-wrap: wrap;\n            }\n        \n            .menubar.bottom {\n                order: 1;\n                width: 100%;\n                padding: 0 5px;\n            }\n            \n            .menubar .menubar-menu-button {\n                align-items: center;\n                box-sizing: border-box;\n                padding: 0px 8px;\n                cursor: default;\n                -webkit-app-region: no-drag;\n                zoom: 1;\n                white-space: nowrap;\n                outline: 0;\n            }\n\n            .menubar .menubar-menu-button.disabled {\n                opacity: 0.4;\n            }\n\n            .menubar .menubar-menu-button:not(.disabled):focus,\n\t\t\t.menubar .menubar-menu-button:not(.disabled).open,\n\t\t\t.menubar .menubar-menu-button:not(.disabled):hover {\n\t\t\t\tbackground-color: rgba(255, 255, 255, .1);\n\t\t\t}\n\t\n\t\t\t.titlebar.light .menubar .menubar-menu-button:focus,\n\t\t\t.titlebar.light .menubar .menubar-menu-button.open,\n\t\t\t.titlebar.light .menubar .menubar-menu-button:hover {\n\t\t\t\tbackground-color: rgba(0, 0, 0, .1);\n\t\t\t}\n        \n            .menubar-menu-container {\n                position: absolute;\n                display: block;\n                left: 0px;\n                opacity: 1;\n                outline: 0;\n                border: none;\n                text-align: left;\n                margin: 0 auto;\n                padding: .5em 0;\n                margin-left: 0;\n                overflow-x: visible;\n                overflow-y: visible;\n                -webkit-overflow-scrolling: touch;\n                justify-content: flex-end;\n                white-space: nowrap;\n                box-shadow: 0 5px 5px -3px rgba(0,0,0,.2), 0 8px 10px 1px rgba(0,0,0,.14), 0 3px 14px 2px rgba(0,0,0,.12);\n                z-index: 99999;\n            }\n            .menubar-menu-container::-webkit-scrollbar {\n                width: 8px;\n                height: 4px;\n                cursor: pointer;\n                background-color: rbga(0,0,0,0);\n            }\n            .menubar-menu-container::-webkit-scrollbar-track {\n                border: none;\n                background-color: rbga(0,0,0,0);\n            }\n            .menubar-menu-container::-webkit-scrollbar-thumb{\n                border-radius: 10px;\n                background-color: rgba(110, 110, 110, 0.2);\n            }\n            \n            .menubar-menu-container:focus {\n                outline: 0;\n            }\n            \n            .menubar-menu-container .action-item {\n                padding: 0;\n                transform: none;\n                display: -ms-flexbox;\n                display: flex;\n                outline: none;\n            }\n            \n            .menubar-menu-container .action-item.active {\n                transform: none;\n            }\n            \n            .menubar-menu-container .action-menu-item {\n                -ms-flex: 1 1 auto;\n                flex: 1 1 auto;\n                display: -ms-flexbox;\n                display: flex;\n                height: 2.5em;\n                align-items: center;\n                position: relative;\n            }\n            \n            .menubar-menu-container .action-label {\n                -ms-flex: 1 1 auto;\n                flex: 1 1 auto;\n                text-decoration: none;\n                padding: 0 1em;\n                background: none;\n                font-size: 12px;\n                line-height: 1;\n            }\n        \n            .menubar-menu-container .action-label:not(.separator),\n            .menubar-menu-container .keybinding {\n                padding: 0 2em 0 1em;\n            }\n            \n            .menubar-menu-container .keybinding,\n            .menubar-menu-container .submenu-indicator {\n                display: inline-block;\n                -ms-flex: 2 1 auto;\n                flex: 2 1 auto;\n                padding: 0 2em 0 1em;\n                text-align: right;\n                font-size: 12px;\n                line-height: 1;\n            }\n            \n            .menubar-menu-container .submenu-indicator {\n                height: 100%;\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4.52 12.364L9.879 7 4.52 1.636l.615-.615L11.122 7l-5.986 5.98-.615-.616z' fill='%23000'/%3E%3C/svg%3E\") no-repeat right center/13px 13px;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4.52 12.364L9.879 7 4.52 1.636l.615-.615L11.122 7l-5.986 5.98-.615-.616z' fill='%23000'/%3E%3C/svg%3E\") no-repeat right center/13px 13px;\n                font-size: 60%;\n                margin: 0 2em 0 1em;\n            }\n            \n            .menubar-menu-container .action-item.disabled .action-menu-item,\n            .menubar-menu-container .action-label.separator {\n                opacity: 0.4;\n            }\n            \n            .menubar-menu-container .action-label:not(.separator) {\n                display: inline-block;\n                -webkit-box-sizing: border-box;\n                -o-box-sizing: border-box;\n                -moz-box-sizing: border-box;\n                -ms-box-sizing:\tborder-box;\n                box-sizing:\tborder-box;\n                margin: 0;\n            }\n            \n            .menubar-menu-container .action-item .submenu {\n                position: absolute;\n            }\n            \n            .menubar-menu-container .action-label.separator {\n                font-size: inherit;\n                padding: .2em 0 0;\n                margin-left: .8em;\n                margin-right: .8em;\n                margin-bottom: .2em;\n                width: 100%;\n                border-bottom: 1px solid transparent;\n            }\n            \n            .menubar-menu-container .action-label.separator.text {\n                padding: 0.7em 1em 0.1em 1em;\n                font-weight: bold;\n                opacity: 1;\n            }\n            \n            .menubar-menu-container .action-label:hover {\n                color: inherit;\n            }\n            \n            .menubar-menu-container .menu-item-check {\n                position: absolute;\n                visibility: hidden;\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='-2 -2 16 16'%3E%3Cpath fill='%23424242' d='M9 0L4.5 9 3 6H0l3 6h3l6-12z'/%3E%3C/svg%3E\") no-repeat 50% 56%/15px 15px;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='-2 -2 16 16'%3E%3Cpath fill='%23424242' d='M9 0L4.5 9 3 6H0l3 6h3l6-12z'/%3E%3C/svg%3E\") no-repeat 50% 56%/15px 15px;\n                width: 2em;\n                height: 2em;\n                margin: 0 0 0 0.7em;\n            }\n\n            .menubar-menu-container .menu-item-icon {\n                width: 18px;\n                height: 18px;\n                margin: 0 0 0 1.1em;\n            }\n\n            .menubar-menu-container .menu-item-icon img {\n                display: inherit;\n                width: 100%;\n                height: 100%;\n            }\n            \n            .menubar-menu-container .action-menu-item.checked .menu-item-icon {\n                visibility: hidden;\n            }\n\n            .menubar-menu-container .action-menu-item.checked .menu-item-check {\n                visibility: visible;\n            }\n            ")})),this.registerTheme((e=>{e.addRule("\n            .titlebar .window-title {\n                flex: 0 1 auto;\n                font-size: 12px;\n                overflow: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n                margin: 0 auto;\n                zoom: 1;\n            }\n            ")})),this.registerTheme((e=>{e.addRule("\n            .titlebar .window-controls-container {\n                display: flex;\n                flex-grow: 0;\n                flex-shrink: 0;\n                text-align: center;\n                position: relative;\n                z-index: 99;\n                -webkit-app-region: no-drag;\n                height: 30px;\n                margin-left: 5px;\n            }\n            ")})),this.registerTheme((e=>{e.addRule("\n            .titlebar.cet-windows .resizer, .titlebar.cet-linux .resizer {\n                -webkit-app-region: no-drag;\n                position: absolute;\n            }\n        \n            .titlebar.cet-windows .resizer.top, .titlebar.cet-linux .resizer.top {\n                top: 0;\n                width: 100%;\n                height: 6px;\n            }\n        \n            .titlebar.cet-windows .resizer.left, .titlebar.cet-linux .resizer.left {\n                top: 0;\n                left: 0;\n                width: 6px;\n                height: 100%;\n            }\n            ")}))}registerTheme(e){this.onThemeChange(e);let t=[],i={},n={addRule:e=>{i[e]||(t.push(e),i[e]=!0)}};this.getTheming().forEach((e=>e(n))),function(e,t){let i=document.head.getElementsByClassName(t);if(0===i.length){let i=document.createElement("style");i.className=t,i.innerHTML=e,document.head.appendChild(i)}else i[0].innerHTML=e}(t.join("\n"),"titlebar-style")}static get win(){return e=>{e.addRule("\n            .titlebar .window-controls-container .window-icon-bg {\n                display: inline-block;\n                -webkit-app-region: no-drag;\n                height: 100%;\n                width: 46px;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg .window-icon {\n                height: 100%;\n                width: 100%;\n                -webkit-mask-size: 23.1%;\n                mask-size: 23.1%;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg .window-icon.window-close {\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6.279 5.5L11 10.221l-.779.779L5.5 6.279.779 11 0 10.221 4.721 5.5 0 .779.779 0 5.5 4.721 10.221 0 11 .779 6.279 5.5z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6.279 5.5L11 10.221l-.779.779L5.5 6.279.779 11 0 10.221 4.721 5.5 0 .779.779 0 5.5 4.721 10.221 0 11 .779 6.279 5.5z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg .window-icon.window-close:hover {\n                background-color: #ffffff!important;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg .window-icon.window-unmaximize {\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 8.798H8.798V11H0V2.202h2.202V0H11v8.798zm-3.298-5.5h-6.6v6.6h6.6v-6.6zM9.9 1.1H3.298v1.101h5.5v5.5h1.1v-6.6z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 8.798H8.798V11H0V2.202h2.202V0H11v8.798zm-3.298-5.5h-6.6v6.6h6.6v-6.6zM9.9 1.1H3.298v1.101h5.5v5.5h1.1v-6.6z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg .window-icon.window-maximize {\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 0v11H0V0h11zM9.899 1.101H1.1V9.9h8.8V1.1z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 0v11H0V0h11zM9.899 1.101H1.1V9.9h8.8V1.1z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg .window-icon.window-minimize {\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 4.399V5.5H0V4.399h11z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 4.399V5.5H0V4.399h11z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg.window-close-bg:hover {\n                background-color: rgba(232, 17, 35, 0.9)!important;\n            }\n\n            .titlebar .window-controls-container .window-icon-bg.window-close-bg:active {\n                background-color: rgba(232, 17, 35, 0.5)!important;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg.inactive {\n                background-color: transparent!important;\n            }\n\n            .titlebar .window-controls-container .window-icon-bg.inactive .window-icon {\n                opacity: .4;\n            }\n            \n            .titlebar .window-controls-container .window-icon {\n                background-color: #eeeeee;\n            }\n\n            .titlebar.light .window-controls-container .window-icon {\n                background-color: #333333;\n            }\n\n            .titlebar.inactive .window-controls-container .window-icon {\n                opacity: .7;\n            }\n\n            .titlebar .window-controls-container .window-icon-bg:not(.inactive):hover {\n                background-color: rgba(255, 255, 255, .1);\n            }\n\n            .titlebar .window-controls-container .window-icon-bg:not(.inactive):active {\n                background-color: rgba(255, 255, 255, 0.3);\n            }\n\n            .titlebar.light .window-controls-container .window-icon-bg:not(.inactive):hover {\n                background-color: rgba(0, 0, 0, .1);\n            }\n\n            .titlebar.light .window-controls-container .window-icon-bg:not(.inactive):active {\n                background-color: rgba(0, 0, 0, .2);\n            }\n        ")}}static get mac(){return e=>{e.addRule("\n            .titlebar .window-controls-container .window-icon-bg {\n                display: inline-block;\n                -webkit-app-region: no-drag;\n                height: 15px;\n                width: 15px;\n                margin: 7.5px 6px;\n                border-radius: 50%;\n                overflow: hidden;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg.inactive {\n                background-color: #cdcdcd;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:nth-child(2n) {\n                order: -1;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive) .window-icon {\n                height: 100%;\n                width: 100%;\n                background-color: transparent;\n                -webkit-mask-size: 100% !important;\n                mask-size: 100% !important;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive) .window-icon:hover {\n                background-color: rgba(0, 0, 0, 0.4);\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive):first-child {\n                background-color: #febc28;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive):first-child:hover {\n                background-color: #feb30a;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive):nth-child(2n) {\n                background-color: #01cc4e;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive):nth-child(2n):hover {\n                background-color: #01ae42;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive).window-close-bg {\n                background-color: #ff5b5d;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive).window-close-bg:hover {\n                background-color: #ff3c3f;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive).window-close-bg .window-close {\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive) .window-maximize {\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.17,12L15,8.83L16.41,7.41L21,12L16.41,16.58L15,15.17L18.17,12M5.83,12L9,15.17L7.59,16.59L3,12L7.59,7.42L9,8.83L5.83,12Z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.17,12L15,8.83L16.41,7.41L21,12L16.41,16.58L15,15.17L18.17,12M5.83,12L9,15.17L7.59,16.59L3,12L7.59,7.42L9,8.83L5.83,12Z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                transform: rotate(-45deg);\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive) .window-unmaximize {\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.41,7.41L10,12L5.41,16.59L4,15.17L7.17,12L4,8.83L5.41,7.41M18.59,16.59L14,12L18.59,7.42L20,8.83L16.83,12L20,15.17L18.59,16.59Z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.41,7.41L10,12L5.41,16.59L4,15.17L7.17,12L4,8.83L5.41,7.41M18.59,16.59L14,12L18.59,7.42L20,8.83L16.83,12L20,15.17L18.59,16.59Z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                transform: rotate(-45deg);\n            }\n            \n            .titlebar .window-controls-container .window-icon-bg:not(.inactive) .window-minimize {\n                -webkit-mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M19,13H5V11H19V13Z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n                mask: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M19,13H5V11H19V13Z' fill='%23000'/%3E%3C/svg%3E\") no-repeat 50% 50%;\n            }\n        ")}}}},10598:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Titlebar=void 0;const n=i(357),r=i(49935),s=i(82538),o=i(95849),a=i(58933),l=i(98796),c=r.Color.fromHex("#222222"),h=r.Color.fromHex("#333333"),u=r.Color.fromHex("#EEEEEE"),d=r.Color.fromHex("#FFFFFF"),f=n.isMacintosh&&parseInt(process.getSystemVersion().split(".")[0])>=11,p="60px",g=f?"28px":"22px",m="30px",b={backgroundColor:r.Color.fromHex("#444444"),iconsTheme:l.Themebar.win,shadow:!1,menu:a.remote.Menu.getApplicationMenu(),minimizable:!0,maximizable:!0,closeable:!0,enableMnemonics:!0,hideWhenClickingClose:!1,unfocusEffect:!0,overflow:"auto"};class v extends l.Themebar{constructor(e){super(),this.closeMenu=()=>{this.menubar&&this.menubar.blur()},this.currentWindow=a.remote.getCurrentWindow(),this._options=Object.assign(Object.assign({},b),e),this.registerListeners(),this.createTitlebar(),this.updateStyles(),this.registerTheme(this._options.iconsTheme),window.addEventListener("beforeunload",(()=>{this.removeListeners()}))}registerListeners(){this.events={},this.events[s.EventType.FOCUS]=()=>this.onDidChangeWindowFocus(!0),this.events[s.EventType.BLUR]=()=>this.onDidChangeWindowFocus(!1),this.events[s.EventType.MAXIMIZE]=()=>this.onDidChangeMaximized(!0),this.events[s.EventType.UNMAXIMIZE]=()=>this.onDidChangeMaximized(!1),this.events[s.EventType.ENTER_FULLSCREEN]=()=>this.onDidChangeFullscreen(!0),this.events[s.EventType.LEAVE_FULLSCREEN]=()=>this.onDidChangeFullscreen(!1);for(const e in this.events)this.currentWindow.on(e,this.events[e])}removeListeners(){for(const e in this.events)this.currentWindow.removeListener(e,this.events[e]);this.events={}}createTitlebar(){for(this.container=s.$("div.container-after-titlebar"),"bottom"===this._options.menuPosition?(this.container.style.top=p,this.container.style.bottom="0px"):(this.container.style.top=n.isMacintosh?g:m,this.container.style.bottom="0px"),this.container.style.right="0",this.container.style.left="0",this.container.style.position="absolute",this.container.style.overflow=this._options.overflow;document.body.firstChild;)s.append(this.container,document.body.firstChild);if(s.append(document.body,this.container),document.body.style.overflow="hidden",document.body.style.margin="0",this.titlebar=s.$("div.titlebar"),s.addClass(this.titlebar,n.isWindows?"cet-windows":n.isLinux?"cet-linux":"cet-mac"),this._options.order&&s.addClass(this.titlebar,this._options.order),this._options.shadow&&(this.titlebar.style.boxShadow="0 2px 1px -1px rgba(0, 0, 0, .2), 0 1px 1px 0 rgba(0, 0, 0, .14), 0 1px 3px 0 rgba(0, 0, 0, .12)"),this.dragRegion=s.append(this.titlebar,s.$("div.titlebar-drag-region")),!n.isMacintosh&&this._options.icon&&(this.appIcon=s.append(this.titlebar,s.$("div.window-appicon")),this.updateIcon(this._options.icon)),this.menubarContainer=s.append(this.titlebar,s.$("div.menubar")),this.menubarContainer.setAttribute("role","menubar"),this._options.menu&&(this.updateMenu(this._options.menu),this.updateMenuPosition(this._options.menuPosition)),this.title=s.append(this.titlebar,s.$("div.window-title")),n.isMacintosh||(this.title.style.cursor="default"),f&&(this.title.style.fontWeight="600",this.title.style.fontSize="13px"),this.updateTitle(),this.setHorizontalAlignment(this._options.titleHorizontalAlignment),n.isMacintosh){let e=this.currentWindow.isMaximized();this._register(s.addDisposableListener(this.titlebar,s.EventType.DBLCLICK,(()=>{e=!e,this.onDidChangeMaximized(e)})))}if(!n.isMacintosh){this.windowControls=s.append(this.titlebar,s.$("div.window-controls-container"));const e=s.append(this.windowControls,s.$("div.window-icon-bg"));e.title="Minimize";const t=s.append(e,s.$("div.window-icon"));s.addClass(t,"window-minimize"),this._options.minimizable?this._register(s.addDisposableListener(t,s.EventType.CLICK,(e=>{this.currentWindow.minimize()}))):s.addClass(e,"inactive");const i=s.append(this.windowControls,s.$("div.window-icon-bg"));this.maxRestoreControl=s.append(i,s.$("div.window-icon")),s.addClass(this.maxRestoreControl,"window-max-restore"),this._options.maximizable?this._register(s.addDisposableListener(this.maxRestoreControl,s.EventType.CLICK,(e=>{this.currentWindow.isMaximized()?(this.currentWindow.unmaximize(),this.onDidChangeMaximized(!1)):(this.currentWindow.maximize(),this.onDidChangeMaximized(!0))}))):s.addClass(i,"inactive");const n=s.append(this.windowControls,s.$("div.window-icon-bg"));n.title="Close",s.addClass(n,"window-close-bg");const r=s.append(n,s.$("div.window-icon"));s.addClass(r,"window-close"),this._options.closeable?this._register(s.addDisposableListener(r,s.EventType.CLICK,(e=>{this._options.hideWhenClickingClose?this.currentWindow.hide():this.currentWindow.close()}))):s.addClass(n,"inactive"),this.resizer={top:s.append(this.titlebar,s.$("div.resizer.top")),left:s.append(this.titlebar,s.$("div.resizer.left"))},this.onDidChangeMaximized(this.currentWindow.isMaximized())}s.prepend(document.body,this.titlebar)}onBlur(){this.isInactive=!0,this.updateStyles()}onFocus(){this.isInactive=!1,this.updateStyles()}onMenubarVisibilityChanged(e){(n.isWindows||n.isLinux)&&e&&(s.hide(this.dragRegion),setTimeout((()=>s.show(this.dragRegion)),50))}onMenubarFocusChanged(e){(n.isWindows||n.isLinux)&&(e?s.hide(this.dragRegion):s.show(this.dragRegion))}onDidChangeWindowFocus(e){this.titlebar&&(e?(s.removeClass(this.titlebar,"inactive"),this.onFocus()):(s.addClass(this.titlebar,"inactive"),this.closeMenu(),this.onBlur()))}onDidChangeMaximized(e){this.maxRestoreControl&&(e?(s.removeClass(this.maxRestoreControl,"window-maximize"),this.maxRestoreControl.title="Restore Down",s.addClass(this.maxRestoreControl,"window-unmaximize")):(s.removeClass(this.maxRestoreControl,"window-unmaximize"),this.maxRestoreControl.title="Maximize",s.addClass(this.maxRestoreControl,"window-maximize"))),this.resizer&&(e?s.hide(this.resizer.top,this.resizer.left):s.show(this.resizer.top,this.resizer.left))}onDidChangeFullscreen(e){n.isMacintosh||(e?s.hide(this.appIcon,this.title,this.windowControls):s.show(this.appIcon,this.title,this.windowControls))}updateStyles(){if(this.titlebar){this.isInactive?s.addClass(this.titlebar,"inactive"):s.removeClass(this.titlebar,"inactive");const e=this.isInactive&&this._options.unfocusEffect?this._options.backgroundColor.lighten(.45):this._options.backgroundColor;let t;this.titlebar.style.backgroundColor=e.toString(),e.isLighter()?(s.addClass(this.titlebar,"light"),t=this.isInactive&&this._options.unfocusEffect?c:h):(s.removeClass(this.titlebar,"light"),t=this.isInactive&&this._options.unfocusEffect?u:d),this.titlebar.style.color=t.toString();const i=this._options.backgroundColor.darken(.16),n=i.isLighter()?c:u,o=!this._options.itemBackgroundColor||this._options.itemBackgroundColor.equals(i)?new r.Color(new r.RGBA(0,0,0,.14)):this._options.itemBackgroundColor,a=o.isLighter()?h:d;this.menubar&&this.menubar.setStyles({backgroundColor:i,foregroundColor:n,selectionBackgroundColor:o,selectionForegroundColor:a,separatorColor:n})}}get options(){return this._options}updateBackground(e){this._options.backgroundColor=e,this.updateStyles()}updateItemBGColor(e){this._options.itemBackgroundColor=e,this.updateStyles()}updateTitle(e){this.title&&(e?document.title=e:e=document.title,this.title.innerText=e)}updateIcon(e){null!==e&&""!==e&&this.appIcon&&(this.appIcon.style.backgroundImage=`url("${e}")`)}updateMenu(e){if(n.isMacintosh)a.remote.Menu.setApplicationMenu(e);else{if(this.menubar){if(this.menubar.dispose(),!e)return;this._options.menu=e}this.menubar=new o.Menubar(this.menubarContainer,this._options,this.closeMenu),this.menubar.setupMenubar(),this._register(this.menubar.onVisibilityChange((e=>this.onMenubarVisibilityChanged(e)))),this._register(this.menubar.onFocusStateChange((e=>this.onMenubarFocusChanged(e)))),this.updateStyles()}}updateMenuPosition(e){this._options.menuPosition=e,n.isMacintosh?(this.titlebar.style.height=this._options.menuPosition&&"bottom"===this._options.menuPosition?p:g,this.container.style.top=this._options.menuPosition&&"bottom"===this._options.menuPosition?p:g):(this.titlebar.style.height=this._options.menuPosition&&"bottom"===this._options.menuPosition?p:m,this.container.style.top=this._options.menuPosition&&"bottom"===this._options.menuPosition?p:m),this.titlebar.style.webkitFlexWrap=this._options.menuPosition&&"bottom"===this._options.menuPosition?"wrap":null,"bottom"===this._options.menuPosition?s.addClass(this.menubarContainer,"bottom"):s.removeClass(this.menubarContainer,"bottom")}setHorizontalAlignment(e){this.title&&(("left"===e||"right"===e&&"inverted"===this._options.order)&&(this.title.style.marginLeft="8px",this.title.style.marginRight="auto"),("right"===e||"left"===e&&"inverted"===this._options.order)&&(this.title.style.marginRight="8px",this.title.style.marginLeft="auto"),"center"!==e&&void 0!==e||(this.title.style.marginRight="auto",this.title.style.marginLeft="auto"))}dispose(){for(this.menubar&&this.menubar.dispose(),s.removeNode(this.titlebar);this.container.firstChild;)s.append(document.body,this.container.firstChild);s.removeNode(this.container),this.removeListeners(),super.dispose()}}t.Titlebar=v},11227:(e,t,i)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;t.splice(1,0,i,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(r=n))})),t.splice(r,0,i)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=i(82447)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},82447:(e,t,i)=>{e.exports=function(e){function t(e){let i,r,s,o=null;function a(...e){if(!a.enabled)return;const n=a,r=Number(new Date),s=r-(i||r);n.diff=s,n.prev=i,n.curr=r,i=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((i,r)=>{if("%%"===i)return"%";o++;const s=t.formatters[r];if("function"==typeof s){const t=e[o];i=s.call(n,t),e.splice(o,1),o--}return i})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==t.namespaces&&(r=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,i){const n=t(this.namespace+(void 0===i?":":i)+e);return n.log=this.log,n}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let i;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let i,n;for(i=0,n=t.skips.length;i<n;i++)if(t.skips[i].test(e))return!1;for(i=0,n=t.names.length;i<n;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=i(57824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((i=>{t[i]=e[i]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let i=0;for(let t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t}},76861:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ThemeProvider:()=>g,useTheme:()=>b,withTheme:()=>m});var n=i(59713),r=i.n(n),s=i(67294),o=i(87077);const a=function(e){var t=new WeakMap;return function(i){if(t.has(i))return t.get(i);var n=e(i);return t.set(i,n),n}};var l=i(67154),c=i.n(l),h=i(8679),u=i.n(h);function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var f=function(e,t){return"function"==typeof t?t(e):function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(i,!0).forEach((function(t){r()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e,{},t)},p=a((function(e){return a((function(t){return f(e,t)}))})),g=function(e){return(0,s.createElement)(o.Ni.Consumer,null,(function(t){return e.theme!==t&&(t=p(t)(e.theme)),(0,s.createElement)(o.Ni.Provider,{value:t},e.children)}))};function m(e){var t=e.displayName||e.name||"Component",i=(0,s.forwardRef)((function(t,i){return(0,s.createElement)(o.Ni.Consumer,null,(function(n){return(0,s.createElement)(e,c()({theme:n,ref:i},t))}))}));return i.displayName="WithTheme("+t+")",u()(i,e)}function b(){return s.useContext(o.Ni)}},8679:(e,t,i)=>{"use strict";var n=i(59864),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?o:a[e.$$typeof]||r}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=o;var c=Object.defineProperty,h=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,i,n){if("string"!=typeof i){if(p){var r=f(i);r&&r!==p&&e(t,r,n)}var o=h(i);u&&(o=o.concat(u(i)));for(var a=l(t),g=l(i),m=0;m<o.length;++m){var b=o[m];if(!(s[b]||n&&n[b]||g&&g[b]||a&&a[b])){var v=d(i,b);try{c(t,b,v)}catch(e){}}}}return t}},7689:(e,t,i)=>{var n=i(56240),r=i(70312);e.exports=function(e){return!(!n(e)||!r(window)||"function"!=typeof window.Node)&&("number"==typeof e.nodeType&&"string"==typeof e.nodeName)}},56240:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&null!==e}},70312:e=>{"use strict";e.exports=function(e){if(null==e)return!1;var t=Object(e);return t===t.window}},56163:(e,t,i)=>{e.exports=i(55867).default},55867:(e,t,i)=>{"use strict";t.default=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.default.tokenize(e),r=[],o=[];for(i=new l(i),t=0;t<n.length;t++){var m=n[t];if(m.type!==c)if(m.type===u){var b=f(m.chars,i);r.push.apply(r,b)}else r.push(m);else{r.push(m);var v=m.tagName.toUpperCase(),y="A"===v||a.contains(i.ignoreTags,v);if(!y)continue;var _=r.length;p(v,n,++t,r),t+=r.length-_-1}}for(t=0;t<r.length;t++){var w=r[t];switch(w.type){case c:var S="<"+w.tagName;if(w.attributes.length>0){var C=g(w.attributes);S+=" "+C.join(" ")}S+=">",o.push(S);break;case h:o.push("</"+w.tagName+">");break;case u:o.push(w.chars);break;case d:o.push("\x3c!--"+w.chars+"--\x3e")}}return o.join("")};var n,r=i(32226),s=(n=r)&&n.__esModule?n:{default:n},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(8425));var a=o.options,l=a.Options,c="StartTag",h="EndTag",u="Chars",d="Comment";function f(e,t){for(var i=o.tokenize(e),n=[],r=0;r<i.length;r++){var s=i[r];if("nl"===s.type&&t.nl2br)n.push({type:c,tagName:"br",attributes:[],selfClosing:!0});else if(s.isLink&&t.check(s)){var a=t.resolve(s),l=a.formatted,d=a.formattedHref,f=a.tagName,p=a.className,g=a.target,m=a.attributes,b=[["href",d]];for(var v in p&&b.push(["class",p]),g&&b.push(["target",g]),m)b.push([v,m[v]]);n.push({type:c,tagName:f,attributes:b,selfClosing:!1}),n.push({type:u,chars:l}),n.push({type:h,tagName:f})}else n.push({type:u,chars:s.toString()})}return n}function p(e,t,i,n){for(var r=1;i<t.length&&r>0;){var s=t[i];s.type===c&&s.tagName.toUpperCase()===e?r++:s.type===h&&s.tagName.toUpperCase()===e&&r--,n.push(s),i++}return n}function g(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],r=n[0],s=n[1];t.push(r+'="'+(s.replace(/"/g,"&quot;")+'"'))}return t}},87100:(e,t,i)=>{"use strict";var n,r=i(67294),s=(n=r)&&n.__esModule?n:{default:n},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(8425));function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=o.options,h=c.Options;function u(e,t){for(var i=o.tokenize(e),n=[],r=0,a=0;a<i.length;a++){var l=i[a];if("nl"===l.type&&t.nl2br)n.push(s.default.createElement("br",{key:"linkified-"+ ++r}));else if(l.isLink&&t.check(l)){var c=t.resolve(l),h=c.formatted,u=c.formattedHref,d=c.tagName,f=c.className,p=c.target,g=c.attributes,m={key:"linkified-"+ ++r,href:u};if(f&&(m.className=f),p&&(m.target=p),g)for(var b in g)m[b]=g[b];n.push(s.default.createElement(d,m,h))}else n.push(l.toString())}return n}function d(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===s.default.Children.count(e.props.children))return e;var n=[];s.default.Children.forEach(e.props.children,(function(e){"string"==typeof e?(i+=1,n.push.apply(n,u(e,t))):s.default.isValidElement(e)?"string"==typeof e.type&&c.contains(t.ignoreTags,e.type.toUpperCase())?n.push(e):n.push(d(e,t,++i)):n.push(e)}));var r={key:"linkified-element-"+i};for(var o in e.props)r[o]=e.props[o];return s.default.cloneElement(e,r,n)}var f=function(e){function t(){return a(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e={key:"linkified-element-0"};for(var t in this.props)"options"!==t&&"tagName"!==t&&(e[t]=this.props[t]);var i=new h(this.props.options),n=this.props.tagName||"span";return d(s.default.createElement(n,e),i,0)},t}(s.default.Component);t.default=f},8425:(e,t,i)=>{"use strict";t.__esModule=!0,t.tokenize=t.test=t.scanner=t.parser=t.options=t.inherits=t.find=void 0;var n=i(72227),r=a(i(47951)),s=a(i(6417)),o=a(i(45788));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var l=function(e){return o.run(s.run(e))};t.find=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=l(e),n=[],r=0;r<i.length;r++){var s=i[r];!s.isLink||t&&s.type!==t||n.push(s.toObject())}return n},t.inherits=n.inherits,t.options=r,t.parser=o,t.scanner=s,t.test=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=l(e);return 1===i.length&&i[0].isLink&&(!t||i[0].type===t)},t.tokenize=l},45788:(e,t,i)=>{"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var n=i(25439),r=i(23370),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(r),o=i(63333);var a=function(e){return new n.TokenState(e)},l=a(),c=a(),h=a(),u=a(),d=a(),f=a(),p=a(),g=a(r.URL),m=a(),b=a(r.URL),v=a(r.URL),y=a(),_=a(),w=a(),S=a(),C=a(),x=a(r.URL),k=a(r.URL),E=a(r.URL),T=a(r.URL),L=a(),N=a(),M=a(),O=a(),D=a(),I=a(),A=a(r.EMAIL),P=a(),R=a(r.EMAIL),B=a(r.MAILTOEMAIL),F=a(),W=a(),V=a(),z=a(),H=a(r.NL);l.on(o.NL,H).on(o.PROTOCOL,c).on(o.MAILTO,h).on(o.SLASH,u),c.on(o.SLASH,u),u.on(o.SLASH,d),l.on(o.TLD,f).on(o.DOMAIN,f).on(o.LOCALHOST,g).on(o.NUM,f),d.on(o.TLD,v).on(o.DOMAIN,v).on(o.NUM,v).on(o.LOCALHOST,v),f.on(o.DOT,p),D.on(o.DOT,I),p.on(o.TLD,g).on(o.DOMAIN,f).on(o.NUM,f).on(o.LOCALHOST,f),I.on(o.TLD,A).on(o.DOMAIN,D).on(o.NUM,D).on(o.LOCALHOST,D),g.on(o.DOT,p),A.on(o.DOT,I),g.on(o.COLON,m).on(o.SLASH,v),m.on(o.NUM,b),b.on(o.SLASH,v),A.on(o.COLON,P),P.on(o.NUM,R);var j=[o.DOMAIN,o.AT,o.LOCALHOST,o.NUM,o.PLUS,o.POUND,o.PROTOCOL,o.SLASH,o.TLD,o.UNDERSCORE,o.SYM,o.AMPERSAND],U=[o.COLON,o.DOT,o.QUERY,o.PUNCTUATION,o.CLOSEBRACE,o.CLOSEBRACKET,o.CLOSEANGLEBRACKET,o.CLOSEPAREN,o.OPENBRACE,o.OPENBRACKET,o.OPENANGLEBRACKET,o.OPENPAREN];v.on(o.OPENBRACE,_).on(o.OPENBRACKET,w).on(o.OPENANGLEBRACKET,S).on(o.OPENPAREN,C),y.on(o.OPENBRACE,_).on(o.OPENBRACKET,w).on(o.OPENANGLEBRACKET,S).on(o.OPENPAREN,C),_.on(o.CLOSEBRACE,v),w.on(o.CLOSEBRACKET,v),S.on(o.CLOSEANGLEBRACKET,v),C.on(o.CLOSEPAREN,v),x.on(o.CLOSEBRACE,v),k.on(o.CLOSEBRACKET,v),E.on(o.CLOSEANGLEBRACKET,v),T.on(o.CLOSEPAREN,v),L.on(o.CLOSEBRACE,v),N.on(o.CLOSEBRACKET,v),M.on(o.CLOSEANGLEBRACKET,v),O.on(o.CLOSEPAREN,v),_.on(j,x),w.on(j,k),S.on(j,E),C.on(j,T),_.on(U,L),w.on(U,N),S.on(U,M),C.on(U,O),x.on(j,x),k.on(j,k),E.on(j,E),T.on(j,T),x.on(U,x),k.on(U,k),E.on(U,E),T.on(U,T),L.on(j,x),N.on(j,k),M.on(j,E),O.on(j,T),L.on(U,L),N.on(U,N),M.on(U,M),O.on(U,O),v.on(j,v),y.on(j,v),v.on(U,y),y.on(U,y),h.on(o.TLD,B).on(o.DOMAIN,B).on(o.NUM,B).on(o.LOCALHOST,B),B.on(j,B).on(U,F),F.on(j,B).on(U,F);var G=[o.DOMAIN,o.NUM,o.PLUS,o.POUND,o.QUERY,o.UNDERSCORE,o.SYM,o.AMPERSAND,o.TLD];f.on(G,W).on(o.AT,V),g.on(G,W).on(o.AT,V),p.on(G,W),W.on(G,W).on(o.AT,V).on(o.DOT,z),z.on(G,W),V.on(o.TLD,D).on(o.DOMAIN,D).on(o.LOCALHOST,A);t.State=n.TokenState,t.TOKENS=s,t.run=function(e){for(var t=e.length,i=0,n=[],s=[];i<t;){for(var o=l,a=null,c=null,h=0,u=null,d=-1;i<t&&!(a=o.next(e[i]));)s.push(e[i++]);for(;i<t&&(c=a||o.next(e[i]));)a=null,(o=c).accepts()?(d=0,u=o):d>=0&&d++,i++,h++;if(d<0)for(var f=i-h;f<i;f++)s.push(e[f]);else{s.length>0&&(n.push(new r.TEXT(s)),s=[]),i-=d,h-=d;var p=u.emit();n.push(new p(e.slice(i-h,i)))}}return s.length>0&&n.push(new r.TEXT(s)),n},t.start=l},6417:(e,t,i)=>{"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var n=i(25439),r=i(63333),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(r);var o="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),a="0123456789".split(""),l="0123456789abcdefghijklmnopqrstuvwxyz".split(""),c=[" ","\f","\r","\t","\v","","",""],h=[],u=function(e){return new n.CharacterState(e)},d=u(),f=u(r.NUM),p=u(r.DOMAIN),g=u(),m=u(r.WS);d.on("@",u(r.AT)).on(".",u(r.DOT)).on("+",u(r.PLUS)).on("#",u(r.POUND)).on("?",u(r.QUERY)).on("/",u(r.SLASH)).on("_",u(r.UNDERSCORE)).on(":",u(r.COLON)).on("{",u(r.OPENBRACE)).on("[",u(r.OPENBRACKET)).on("<",u(r.OPENANGLEBRACKET)).on("(",u(r.OPENPAREN)).on("}",u(r.CLOSEBRACE)).on("]",u(r.CLOSEBRACKET)).on(">",u(r.CLOSEANGLEBRACKET)).on(")",u(r.CLOSEPAREN)).on("&",u(r.AMPERSAND)).on([",",";","!",'"',"'"],u(r.PUNCTUATION)),d.on("\n",u(r.NL)).on(c,m),m.on(c,m);for(var b=0;b<o.length;b++){var v=(0,n.stateify)(o[b],d,r.TLD,r.DOMAIN);h.push.apply(h,v)}var y=(0,n.stateify)("file",d,r.DOMAIN,r.DOMAIN),_=(0,n.stateify)("ftp",d,r.DOMAIN,r.DOMAIN),w=(0,n.stateify)("http",d,r.DOMAIN,r.DOMAIN),S=(0,n.stateify)("mailto",d,r.DOMAIN,r.DOMAIN);h.push.apply(h,y),h.push.apply(h,_),h.push.apply(h,w),h.push.apply(h,S);var C=y.pop(),x=_.pop(),k=w.pop(),E=S.pop(),T=u(r.DOMAIN),L=u(r.PROTOCOL),N=u(r.MAILTO);x.on("s",T).on(":",L),k.on("s",T).on(":",L),h.push(T),C.on(":",L),T.on(":",L),E.on(":",N);var M=(0,n.stateify)("localhost",d,r.LOCALHOST,r.DOMAIN);h.push.apply(h,M),d.on(a,f),f.on("-",g).on(a,f).on(l,p),p.on("-",g).on(l,p);for(var O=0;O<h.length;O++)h[O].on("-",g).on(l,p);g.on("-",g).on(a,p).on(l,p),d.defaultTransition=u(r.SYM);var D=d;t.State=n.CharacterState,t.TOKENS=s,t.run=function(e){for(var t=e.replace(/[A-Z]/g,(function(e){return e.toLowerCase()})),i=e.length,n=[],r=0;r<i;){for(var s=d,o=null,a=0,l=null,c=-1;r<i&&(o=s.next(t[r]));)(s=o).accepts()?(c=0,l=s):c>=0&&c++,a++,r++;if(!(c<0)){r-=c,a-=c;var h=l.emit();n.push(new h(e.substr(r-a,a)))}}return n},t.start=D},25439:(e,t,i)=>{"use strict";t.__esModule=!0,t.stateify=t.TokenState=t.CharacterState=void 0;var n=i(72227);var r=function(e){this.j=[],this.T=e||null};r.prototype={defaultTransition:!1,on:function(e,t){if(e instanceof Array){for(var i=0;i<e.length;i++)this.j.push([e[i],t]);return this}return this.j.push([e,t]),this},next:function(e){for(var t=0;t<this.j.length;t++){var i=this.j[t],n=i[0],r=i[1];if(this.test(e,n))return r}return this.defaultTransition},accepts:function(){return!!this.T},test:function(e,t){return e===t},emit:function(){return this.T}};var s=(0,n.inherits)(r,(function(e){this.j=[],this.T=e||null}),{test:function(e,t){return e===t||t instanceof RegExp&&t.test(e)}}),o=(0,n.inherits)(r,(function(e){this.j=[],this.T=e||null}),{jump:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.next(new e(""));return i===this.defaultTransition?(i=new this.constructor(t),this.on(e,i)):t&&(i.T=t),i},test:function(e,t){return e instanceof t}});t.CharacterState=s,t.TokenState=o,t.stateify=function(e,t,i,n){for(var r=0,o=e.length,a=t,l=[],c=void 0;r<o&&(c=a.next(e[r]));)a=c,r++;if(r>=o)return[];for(;r<o-1;)c=new s(n),l.push(c),a.on(e[r],c),a=c,r++;return c=new s(i),l.push(c),a.on(e[o-1],c),l}},9770:(e,t)=>{"use strict";t.__esModule=!0,t.createTokenClass=function(){return function(e){e&&(this.v=e)}}},23370:(e,t,i)=>{"use strict";t.__esModule=!0,t.URL=t.TEXT=t.NL=t.EMAIL=t.MAILTOEMAIL=t.Base=void 0;var n=i(9770),r=i(72227),s=i(63333);function o(e){return e instanceof s.DOMAIN||e instanceof s.TLD}var a=(0,n.createTokenClass)();a.prototype={type:"token",isLink:!1,toString:function(){for(var e=[],t=0;t<this.v.length;t++)e.push(this.v[t].toString());return e.join("")},toHref:function(){return this.toString()},toObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(e)}}};var l=(0,r.inherits)(a,(0,n.createTokenClass)(),{type:"email",isLink:!0}),c=(0,r.inherits)(a,(0,n.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),h=(0,r.inherits)(a,(0,n.createTokenClass)(),{type:"text"}),u=(0,r.inherits)(a,(0,n.createTokenClass)(),{type:"nl"}),d=(0,r.inherits)(a,(0,n.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=!1,i=!1,n=this.v,r=[],a=0;n[a]instanceof s.PROTOCOL;)t=!0,r.push(n[a].toString().toLowerCase()),a++;for(;n[a]instanceof s.SLASH;)i=!0,r.push(n[a].toString()),a++;for(;o(n[a]);)r.push(n[a].toString().toLowerCase()),a++;for(;a<n.length;a++)r.push(n[a].toString());return r=r.join(""),t||i||(r=e+"://"+r),r},hasProtocol:function(){return this.v[0]instanceof s.PROTOCOL}});t.Base=a,t.MAILTOEMAIL=l,t.EMAIL=c,t.NL=u,t.TEXT=h,t.URL=d},63333:(e,t,i)=>{"use strict";t.__esModule=!0,t.AMPERSAND=t.CLOSEPAREN=t.CLOSEANGLEBRACKET=t.CLOSEBRACKET=t.CLOSEBRACE=t.OPENPAREN=t.OPENANGLEBRACKET=t.OPENBRACKET=t.OPENBRACE=t.WS=t.TLD=t.SYM=t.UNDERSCORE=t.SLASH=t.MAILTO=t.PROTOCOL=t.QUERY=t.POUND=t.PLUS=t.NUM=t.NL=t.LOCALHOST=t.PUNCTUATION=t.DOT=t.COLON=t.AT=t.DOMAIN=t.Base=void 0;var n=i(9770),r=i(72227),s=(0,n.createTokenClass)();function o(e){var t=e?{v:e}:{};return(0,r.inherits)(s,(0,n.createTokenClass)(),t)}s.prototype={toString:function(){return this.v+""}};var a=o(),l=o("@"),c=o(":"),h=o("."),u=o(),d=o(),f=o("\n"),p=o(),g=o("+"),m=o("#"),b=o(),v=o("mailto:"),y=o("?"),_=o("/"),w=o("_"),S=o(),C=o(),x=o(),k=o("{"),E=o("["),T=o("<"),L=o("("),N=o("}"),M=o("]"),O=o(">"),D=o(")"),I=o("&");t.Base=s,t.DOMAIN=a,t.AT=l,t.COLON=c,t.DOT=h,t.PUNCTUATION=u,t.LOCALHOST=d,t.NL=f,t.NUM=p,t.PLUS=g,t.POUND=m,t.QUERY=y,t.PROTOCOL=b,t.MAILTO=v,t.SLASH=_,t.UNDERSCORE=w,t.SYM=S,t.TLD=C,t.WS=x,t.OPENBRACE=k,t.OPENBRACKET=E,t.OPENANGLEBRACKET=T,t.OPENPAREN=L,t.CLOSEBRACE=N,t.CLOSEBRACKET=M,t.CLOSEANGLEBRACKET=O,t.CLOSEPAREN=D,t.AMPERSAND=I},72227:(e,t)=>{"use strict";t.__esModule=!0,t.inherits=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.create(e.prototype);for(var r in i)n[r]=i[r];return n.constructor=t,t.prototype=n,t}},47951:(e,t)=>{"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={defaultProtocol:"http",events:null,format:s,formatHref:s,nl2br:!1,tagName:"a",target:function(e,t){return"url"===t?"_blank":null},validate:!0,ignoreTags:[],attributes:null,className:"linkified"};function r(e){e=e||{},this.defaultProtocol=e.hasOwnProperty("defaultProtocol")?e.defaultProtocol:n.defaultProtocol,this.events=e.hasOwnProperty("events")?e.events:n.events,this.format=e.hasOwnProperty("format")?e.format:n.format,this.formatHref=e.hasOwnProperty("formatHref")?e.formatHref:n.formatHref,this.nl2br=e.hasOwnProperty("nl2br")?e.nl2br:n.nl2br,this.tagName=e.hasOwnProperty("tagName")?e.tagName:n.tagName,this.target=e.hasOwnProperty("target")?e.target:n.target,this.validate=e.hasOwnProperty("validate")?e.validate:n.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||n.attributes,this.className=e.hasOwnProperty("className")?e.className:e.linkClass||n.className;for(var t=e.hasOwnProperty("ignoreTags")?e.ignoreTags:n.ignoreTags,i=0;i<t.length;i++)this.ignoreTags.push(t[i].toUpperCase())}function s(e){return e}t.defaults=n,t.Options=r,t.contains=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},r.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,r){var s=void 0,o=this[e];if(!o)return o;switch(void 0===o?"undefined":i(o)){case"function":return o(t,r.type);case"object":return"function"==typeof(s=o.hasOwnProperty(r.type)?o[r.type]:n[e])?s(t,r.type):s}return o},getObject:function(e,t,i){var n=this[e];return"function"==typeof n?n(t,i.type):n}}},32226:(e,t,i)=>{"use strict";t.__esModule=!0;var n=l(i(57691)),r=l(i(17305)),s=l(i(91497)),o=l(i(34630)),a=l(i(94030));function l(e){return e&&e.__esModule?e:{default:e}}var c={HTML5NamedCharRefs:n.default,EntityParser:r.default,EventedTokenizer:s.default,Tokenizer:o.default,tokenize:a.default};t.default=c},17305:(e,t)=>{"use strict";function i(e){this.named=e}t.__esModule=!0;var n=/^#[xX]([A-Fa-f0-9]+)$/,r=/^#([0-9]+)$/,s=/^([A-Za-z0-9]+)$/;i.prototype.parse=function(e){if(e){var t=e.match(n);return t?"&#x"+t[1]+";":(t=e.match(r))?"&#"+t[1]+";":(t=e.match(s))?this.named[t[1]]||"&"+t[1]+";":void 0}},t.default=i},91497:(e,t,i)=>{"use strict";t.__esModule=!0;var n=i(80055);function r(e,t){this.delegate=e,this.entityParser=t,this.state=null,this.input=null,this.index=-1,this.line=-1,this.column=-1,this.tagLine=-1,this.tagColumn=-1,this.reset()}r.prototype={reset:function(){this.state="beforeData",this.input="",this.index=0,this.line=1,this.column=0,this.tagLine=-1,this.tagColumn=-1,this.delegate.reset()},tokenize:function(e){this.reset(),this.tokenizePart(e),this.tokenizeEOF()},tokenizePart:function(e){for(this.input+=(0,n.preprocessInput)(e);this.index<this.input.length;)this.states[this.state].call(this)},tokenizeEOF:function(){this.flushData()},flushData:function(){"data"===this.state&&(this.delegate.finishData(),this.state="beforeData")},peek:function(){return this.input.charAt(this.index)},consume:function(){var e=this.peek();return this.index++,"\n"===e?(this.line++,this.column=0):this.column++,e},consumeCharRef:function(){var e=this.input.indexOf(";",this.index);if(-1!==e){var t=this.input.slice(this.index,e),i=this.entityParser.parse(t);if(i){for(var n=t.length;n;)this.consume(),n--;return this.consume(),i}}},markTagStart:function(){this.tagLine=this.line,this.tagColumn=this.column,this.delegate.tagOpen&&this.delegate.tagOpen()},states:{beforeData:function(){"<"===this.peek()?(this.state="tagOpen",this.markTagStart(),this.consume()):(this.state="data",this.delegate.beginData())},data:function(){var e=this.peek();"<"===e?(this.delegate.finishData(),this.state="tagOpen",this.markTagStart(),this.consume()):"&"===e?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(e))},tagOpen:function(){var e=this.consume();"!"===e?this.state="markupDeclaration":"/"===e?this.state="endTagOpen":(0,n.isAlpha)(e)&&(this.state="tagName",this.delegate.beginStartTag(),this.delegate.appendToTagName(e.toLowerCase()))},markupDeclaration:function(){"-"===this.consume()&&"-"===this.input.charAt(this.index)&&(this.consume(),this.state="commentStart",this.delegate.beginComment())},commentStart:function(){var e=this.consume();"-"===e?this.state="commentStartDash":">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData(e),this.state="comment")},commentStartDash:function(){var e=this.consume();"-"===e?this.state="commentEnd":">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("-"),this.state="comment")},comment:function(){var e=this.consume();"-"===e?this.state="commentEndDash":this.delegate.appendToCommentData(e)},commentEndDash:function(){var e=this.consume();"-"===e?this.state="commentEnd":(this.delegate.appendToCommentData("-"+e),this.state="comment")},commentEnd:function(){var e=this.consume();">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("--"+e),this.state="comment")},tagName:function(){var e=this.consume();(0,n.isSpace)(e)?this.state="beforeAttributeName":"/"===e?this.state="selfClosingStartTag":">"===e?(this.delegate.finishTag(),this.state="beforeData"):this.delegate.appendToTagName(e)},beforeAttributeName:function(){var e=this.peek();(0,n.isSpace)(e)?this.consume():"/"===e?(this.state="selfClosingStartTag",this.consume()):">"===e?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeName",this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e))},attributeName:function(){var e=this.peek();(0,n.isSpace)(e)?(this.state="afterAttributeName",this.consume()):"/"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===e?(this.state="beforeAttributeValue",this.consume()):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeName(e))},afterAttributeName:function(){var e=this.peek();(0,n.isSpace)(e)?this.consume():"/"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===e?(this.consume(),this.state="beforeAttributeValue"):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="attributeName",this.delegate.beginAttribute(),this.delegate.appendToAttributeName(e))},beforeAttributeValue:function(){var e=this.peek();(0,n.isSpace)(e)?this.consume():'"'===e?(this.state="attributeValueDoubleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):"'"===e?(this.state="attributeValueSingleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeValueUnquoted",this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(e))},attributeValueDoubleQuoted:function(){var e=this.consume();'"'===e?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===e?this.delegate.appendToAttributeValue(this.consumeCharRef('"')||"&"):this.delegate.appendToAttributeValue(e)},attributeValueSingleQuoted:function(){var e=this.consume();"'"===e?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===e?this.delegate.appendToAttributeValue(this.consumeCharRef("'")||"&"):this.delegate.appendToAttributeValue(e)},attributeValueUnquoted:function(){var e=this.peek();(0,n.isSpace)(e)?(this.delegate.finishAttributeValue(),this.consume(),this.state="beforeAttributeName"):"&"===e?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef(">")||"&")):">"===e?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeValue(e))},afterAttributeValueQuoted:function(){var e=this.peek();(0,n.isSpace)(e)?(this.consume(),this.state="beforeAttributeName"):"/"===e?(this.consume(),this.state="selfClosingStartTag"):">"===e?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},selfClosingStartTag:function(){">"===this.peek()?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},endTagOpen:function(){var e=this.consume();(0,n.isAlpha)(e)&&(this.state="tagName",this.delegate.beginEndTag(),this.delegate.appendToTagName(e.toLowerCase()))}}},t.default=r},57691:(e,t)=>{"use strict";t.__esModule=!0;t.default={nbsp:""}},94030:(e,t,i)=>{"use strict";t.__esModule=!0,t.default=function(e,t){return new n.default(new r.default(s.default),t).tokenize(e)};var n=o(i(34630)),r=o(i(17305)),s=o(i(57691));function o(e){return e&&e.__esModule?e:{default:e}}},34630:(e,t,i)=>{"use strict";t.__esModule=!0;var n,r=i(91497),s=(n=r)&&n.__esModule?n:{default:n};function o(e,t){this.token=null,this.startLine=1,this.startColumn=0,this.options=t||{},this.tokenizer=new s.default(this,e)}o.prototype={tokenize:function(e){return this.tokens=[],this.tokenizer.tokenize(e),this.tokens},tokenizePart:function(e){return this.tokens=[],this.tokenizer.tokenizePart(e),this.tokens},tokenizeEOF:function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},reset:function(){this.token=null,this.startLine=1,this.startColumn=0},addLocInfo:function(){this.options.loc&&(this.token.loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},beginData:function(){this.token={type:"Chars",chars:""},this.tokens.push(this.token)},appendToData:function(e){this.token.chars+=e},finishData:function(){this.addLocInfo()},beginComment:function(){this.token={type:"Comment",chars:""},this.tokens.push(this.token)},appendToCommentData:function(e){this.token.chars+=e},finishComment:function(){this.addLocInfo()},beginStartTag:function(){this.token={type:"StartTag",tagName:"",attributes:[],selfClosing:!1},this.tokens.push(this.token)},beginEndTag:function(){this.token={type:"EndTag",tagName:""},this.tokens.push(this.token)},finishTag:function(){this.addLocInfo()},markTagAsSelfClosing:function(){this.token.selfClosing=!0},appendToTagName:function(e){this.token.tagName+=e},beginAttribute:function(){this._currentAttribute=["","",null],this.token.attributes.push(this._currentAttribute)},appendToAttributeName:function(e){this._currentAttribute[0]+=e},beginAttributeValue:function(e){this._currentAttribute[2]=e},appendToAttributeValue:function(e){this._currentAttribute[1]=this._currentAttribute[1]||"",this._currentAttribute[1]+=e},finishAttributeValue:function(){}},t.default=o},80055:(e,t)=>{"use strict";t.__esModule=!0,t.isSpace=function(e){return i.test(e)},t.isAlpha=function(e){return n.test(e)},t.preprocessInput=function(e){return e.replace(r,"\n")};var i=/[\t\n\f ]/,n=/[A-Za-z]/,r=/\r\n?/g},28175:(e,t,i)=>{e.exports=i(87100).default},18552:(e,t,i)=>{var n=i(10852)(i(55639),"DataView");e.exports=n},1989:(e,t,i)=>{var n=i(51789),r=i(80401),s=i(57667),o=i(21327),a=i(81866);function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},38407:(e,t,i)=>{var n=i(27040),r=i(14125),s=i(82117),o=i(67518),a=i(13399);function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},57071:(e,t,i)=>{var n=i(10852)(i(55639),"Map");e.exports=n},83369:(e,t,i)=>{var n=i(24785),r=i(11285),s=i(96e3),o=i(49916),a=i(95265);function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},53818:(e,t,i)=>{var n=i(10852)(i(55639),"Promise");e.exports=n},58525:(e,t,i)=>{var n=i(10852)(i(55639),"Set");e.exports=n},88668:(e,t,i)=>{var n=i(83369),r=i(90619),s=i(72385);function o(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new n;++t<i;)this.add(e[t])}o.prototype.add=o.prototype.push=r,o.prototype.has=s,e.exports=o},46384:(e,t,i)=>{var n=i(38407),r=i(37465),s=i(63779),o=i(67599),a=i(44758),l=i(34309);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=r,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=a,c.prototype.set=l,e.exports=c},62705:(e,t,i)=>{var n=i(55639).Symbol;e.exports=n},11149:(e,t,i)=>{var n=i(55639).Uint8Array;e.exports=n},70577:(e,t,i)=>{var n=i(10852)(i(55639),"WeakMap");e.exports=n},34963:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,r=0,s=[];++i<n;){var o=e[i];t(o,i,e)&&(s[r++]=o)}return s}},14636:(e,t,i)=>{var n=i(22545),r=i(35694),s=i(1469),o=i(44144),a=i(65776),l=i(36719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var i=s(e),h=!i&&r(e),u=!i&&!h&&o(e),d=!i&&!h&&!u&&l(e),f=i||h||u||d,p=f?n(e.length,String):[],g=p.length;for(var m in e)!t&&!c.call(e,m)||f&&("length"==m||u&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||p.push(m);return p}},29932:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}},62488:e=>{e.exports=function(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}},62663:e=>{e.exports=function(e,t,i,n){var r=-1,s=null==e?0:e.length;for(n&&s&&(i=e[++r]);++r<s;)i=t(i,e[r],r,e);return i}},82908:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}},44286:e=>{e.exports=function(e){return e.split("")}},49029:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},18470:(e,t,i)=>{var n=i(77813);e.exports=function(e,t){for(var i=e.length;i--;)if(n(e[i][0],t))return i;return-1}},89465:(e,t,i)=>{var n=i(38777);e.exports=function(e,t,i){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}},28483:(e,t,i)=>{var n=i(25063)();e.exports=n},47816:(e,t,i)=>{var n=i(28483),r=i(3674);e.exports=function(e,t){return e&&n(e,t,r)}},97786:(e,t,i)=>{var n=i(71811),r=i(40327);e.exports=function(e,t){for(var i=0,s=(t=n(t,e)).length;null!=e&&i<s;)e=e[r(t[i++])];return i&&i==s?e:void 0}},68866:(e,t,i)=>{var n=i(62488),r=i(1469);e.exports=function(e,t,i){var s=t(e);return r(e)?s:n(s,i(e))}},44239:(e,t,i)=>{var n=i(62705),r=i(89607),s=i(2333),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?r(e):s(e)}},78565:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,i){return null!=e&&t.call(e,i)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},9454:(e,t,i)=>{var n=i(44239),r=i(37005);e.exports=function(e){return r(e)&&"[object Arguments]"==n(e)}},90939:(e,t,i)=>{var n=i(2492),r=i(37005);e.exports=function e(t,i,s,o,a){return t===i||(null==t||null==i||!r(t)&&!r(i)?t!=t&&i!=i:n(t,i,s,o,e,a))}},2492:(e,t,i)=>{var n=i(46384),r=i(67114),s=i(18351),o=i(16096),a=i(64160),l=i(1469),c=i(44144),h=i(36719),u="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,g,m,b){var v=l(e),y=l(t),_=v?d:a(e),w=y?d:a(t),S=(_=_==u?f:_)==f,C=(w=w==u?f:w)==f,x=_==w;if(x&&c(e)){if(!c(t))return!1;v=!0,S=!1}if(x&&!S)return b||(b=new n),v||h(e)?r(e,t,i,g,m,b):s(e,t,_,i,g,m,b);if(!(1&i)){var k=S&&p.call(e,"__wrapped__"),E=C&&p.call(t,"__wrapped__");if(k||E){var T=k?e.value():e,L=E?t.value():t;return b||(b=new n),m(T,L,i,g,b)}}return!!x&&(b||(b=new n),o(e,t,i,g,m,b))}},2958:(e,t,i)=>{var n=i(46384),r=i(90939);e.exports=function(e,t,i,s){var o=i.length,a=o,l=!s;if(null==e)return!a;for(e=Object(e);o--;){var c=i[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var h=(c=i[o])[0],u=e[h],d=c[1];if(l&&c[2]){if(void 0===u&&!(h in e))return!1}else{var f=new n;if(s)var p=s(u,d,h,e,t,f);if(!(void 0===p?r(d,u,3,s,f):p))return!1}}return!0}},28458:(e,t,i)=>{var n=i(23560),r=i(15346),s=i(13218),o=i(80346),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,u=c.hasOwnProperty,d=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||r(e))&&(n(e)?d:a).test(o(e))}},38749:(e,t,i)=>{var n=i(44239),r=i(41780),s=i(37005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&r(e.length)&&!!o[n(e)]}},67206:(e,t,i)=>{var n=i(91573),r=i(16432),s=i(6557),o=i(1469),a=i(39601);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?o(e)?r(e[0],e[1]):n(e):a(e)}},280:(e,t,i)=>{var n=i(25726),r=i(86916),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return r(e);var t=[];for(var i in Object(e))s.call(e,i)&&"constructor"!=i&&t.push(i);return t}},91573:(e,t,i)=>{var n=i(2958),r=i(1499),s=i(42634);e.exports=function(e){var t=r(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(i){return i===e||n(i,e,t)}}},16432:(e,t,i)=>{var n=i(90939),r=i(27361),s=i(79095),o=i(15403),a=i(89162),l=i(42634),c=i(40327);e.exports=function(e,t){return o(e)&&a(t)?l(c(e),t):function(i){var o=r(i,e);return void 0===o&&o===t?s(i,e):n(t,o,3)}}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,i)=>{var n=i(97786);e.exports=function(e){return function(t){return n(t,e)}}},18674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},14259:e=>{e.exports=function(e,t,i){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(i=i>r?r:i)<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var s=Array(r);++n<r;)s[n]=e[n+t];return s}},22545:e=>{e.exports=function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}},80531:(e,t,i)=>{var n=i(62705),r=i(29932),s=i(1469),o=i(33448),a=n?n.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return r(t,e)+"";if(o(t))return l?l.call(t):"";var i=t+"";return"0"==i&&1/t==-Infinity?"-0":i}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},74757:e=>{e.exports=function(e,t){return e.has(t)}},71811:(e,t,i)=>{var n=i(1469),r=i(15403),s=i(55514),o=i(79833);e.exports=function(e,t){return n(e)?e:r(e,t)?[e]:s(o(e))}},40180:(e,t,i)=>{var n=i(14259);e.exports=function(e,t,i){var r=e.length;return i=void 0===i?r:i,!t&&i>=r?e:n(e,t,i)}},14429:(e,t,i)=>{var n=i(55639)["__core-js_shared__"];e.exports=n},25063:e=>{e.exports=function(e){return function(t,i,n){for(var r=-1,s=Object(t),o=n(t),a=o.length;a--;){var l=o[e?a:++r];if(!1===i(s[l],l,s))break}return t}}},98805:(e,t,i)=>{var n=i(40180),r=i(62689),s=i(83140),o=i(79833);e.exports=function(e){return function(t){t=o(t);var i=r(t)?s(t):void 0,a=i?i[0]:t.charAt(0),l=i?n(i,1).join(""):t.slice(1);return a[e]()+l}}},35393:(e,t,i)=>{var n=i(62663),r=i(53816),s=i(58748),o=RegExp("[']","g");e.exports=function(e){return function(t){return n(s(r(t).replace(o,"")),e,"")}}},69389:(e,t,i)=>{var n=i(18674)({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"});e.exports=n},38777:(e,t,i)=>{var n=i(10852),r=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},67114:(e,t,i)=>{var n=i(88668),r=i(82908),s=i(74757);e.exports=function(e,t,i,o,a,l){var c=1&i,h=e.length,u=t.length;if(h!=u&&!(c&&u>h))return!1;var d=l.get(e),f=l.get(t);if(d&&f)return d==t&&f==e;var p=-1,g=!0,m=2&i?new n:void 0;for(l.set(e,t),l.set(t,e);++p<h;){var b=e[p],v=t[p];if(o)var y=c?o(v,b,p,t,e,l):o(b,v,p,e,t,l);if(void 0!==y){if(y)continue;g=!1;break}if(m){if(!r(t,(function(e,t){if(!s(m,t)&&(b===e||a(b,e,i,o,l)))return m.push(t)}))){g=!1;break}}else if(b!==v&&!a(b,v,i,o,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},18351:(e,t,i)=>{var n=i(62705),r=i(11149),s=i(77813),o=i(67114),a=i(68776),l=i(21814),c=n?n.prototype:void 0,h=c?c.valueOf:void 0;e.exports=function(e,t,i,n,c,u,d){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new r(e),new r(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=a;case"[object Set]":var p=1&n;if(f||(f=l),e.size!=t.size&&!p)return!1;var g=d.get(e);if(g)return g==t;n|=2,d.set(e,t);var m=o(f(e),f(t),n,c,u,d);return d.delete(e),m;case"[object Symbol]":if(h)return h.call(e)==h.call(t)}return!1}},16096:(e,t,i)=>{var n=i(58234),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,s,o,a){var l=1&i,c=n(e),h=c.length;if(h!=n(t).length&&!l)return!1;for(var u=h;u--;){var d=c[u];if(!(l?d in t:r.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var g=!0;a.set(e,t),a.set(t,e);for(var m=l;++u<h;){var b=e[d=c[u]],v=t[d];if(s)var y=l?s(v,b,d,t,e,a):s(b,v,d,e,t,a);if(!(void 0===y?b===v||o(b,v,i,s,a):y)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(e),a.delete(t),g}},31957:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},58234:(e,t,i)=>{var n=i(68866),r=i(99551),s=i(3674);e.exports=function(e){return n(e,s,r)}},45050:(e,t,i)=>{var n=i(37019);e.exports=function(e,t){var i=e.__data__;return n(t)?i["string"==typeof t?"string":"hash"]:i.map}},1499:(e,t,i)=>{var n=i(89162),r=i(3674);e.exports=function(e){for(var t=r(e),i=t.length;i--;){var s=t[i],o=e[s];t[i]=[s,o,n(o)]}return t}},10852:(e,t,i)=>{var n=i(28458),r=i(47801);e.exports=function(e,t){var i=r(e,t);return n(i)?i:void 0}},89607:(e,t,i)=>{var n=i(62705),r=Object.prototype,s=r.hasOwnProperty,o=r.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),i=e[a];try{e[a]=void 0;var n=!0}catch(e){}var r=o.call(e);return n&&(t?e[a]=i:delete e[a]),r}},99551:(e,t,i)=>{var n=i(34963),r=i(70479),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),n(o(e),(function(t){return s.call(e,t)})))}:r;e.exports=a},64160:(e,t,i)=>{var n=i(18552),r=i(57071),s=i(53818),o=i(58525),a=i(70577),l=i(44239),c=i(80346),h="[object Map]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",g=c(n),m=c(r),b=c(s),v=c(o),y=c(a),_=l;(n&&_(new n(new ArrayBuffer(1)))!=p||r&&_(new r)!=h||s&&_(s.resolve())!=u||o&&_(new o)!=d||a&&_(new a)!=f)&&(_=function(e){var t=l(e),i="[object Object]"==t?e.constructor:void 0,n=i?c(i):"";if(n)switch(n){case g:return p;case m:return h;case b:return u;case v:return d;case y:return f}return t}),e.exports=_},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},222:(e,t,i)=>{var n=i(71811),r=i(35694),s=i(1469),o=i(65776),a=i(41780),l=i(40327);e.exports=function(e,t,i){for(var c=-1,h=(t=n(t,e)).length,u=!1;++c<h;){var d=l(t[c]);if(!(u=null!=e&&i(e,d)))break;e=e[d]}return u||++c!=h?u:!!(h=null==e?0:e.length)&&a(h)&&o(d,h)&&(s(e)||r(e))}},62689:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},93157:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},51789:(e,t,i)=>{var n=i(94536);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},80401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:(e,t,i)=>{var n=i(94536),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return r.call(t,e)?t[e]:void 0}},21327:(e,t,i)=>{var n=i(94536),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:r.call(t,e)}},81866:(e,t,i)=>{var n=i(94536);e.exports=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},65776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,i){var n=typeof e;return!!(i=null==i?9007199254740991:i)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<i}},15403:(e,t,i)=>{var n=i(1469),r=i(33448),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!r(e))||(o.test(e)||!s.test(e)||null!=t&&e in Object(t))}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:(e,t,i)=>{var n,r=i(14429),s=(n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!s&&s in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var i=e&&e.constructor;return e===("function"==typeof i&&i.prototype||t)}},89162:(e,t,i)=>{var n=i(13218);e.exports=function(e){return e==e&&!n(e)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,i)=>{var n=i(18470),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,i=n(t,e);return!(i<0)&&(i==t.length-1?t.pop():r.call(t,i,1),--this.size,!0)}},82117:(e,t,i)=>{var n=i(18470);e.exports=function(e){var t=this.__data__,i=n(t,e);return i<0?void 0:t[i][1]}},67518:(e,t,i)=>{var n=i(18470);e.exports=function(e){return n(this.__data__,e)>-1}},13399:(e,t,i)=>{var n=i(18470);e.exports=function(e,t){var i=this.__data__,r=n(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}},24785:(e,t,i)=>{var n=i(1989),r=i(38407),s=i(57071);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||r),string:new n}}},11285:(e,t,i)=>{var n=i(45050);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},96e3:(e,t,i)=>{var n=i(45050);e.exports=function(e){return n(this,e).get(e)}},49916:(e,t,i)=>{var n=i(45050);e.exports=function(e){return n(this,e).has(e)}},95265:(e,t,i)=>{var n=i(45050);e.exports=function(e,t){var i=n(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}},68776:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}},42634:e=>{e.exports=function(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}},24523:(e,t,i)=>{var n=i(88306);e.exports=function(e){var t=n(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}},94536:(e,t,i)=>{var n=i(10852)(Object,"create");e.exports=n},86916:(e,t,i)=>{var n=i(5569)(Object.keys,Object);e.exports=n},31167:(e,t,i)=>{e=i.nmd(e);var n=i(31957),r=t&&!t.nodeType&&t,s=r&&e&&!e.nodeType&&e,o=s&&s.exports===r&&n.process,a=function(){try{var e=s&&s.require&&s.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(i){return e(t(i))}}},55639:(e,t,i)=>{var n=i(31957),r="object"==typeof self&&self&&self.Object===Object&&self,s=n||r||Function("return this")();e.exports=s},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},72385:e=>{e.exports=function(e){return this.__data__.has(e)}},21814:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}},37465:(e,t,i)=>{var n=i(38407);e.exports=function(){this.__data__=new n,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,i)=>{var n=i(38407),r=i(57071),s=i(83369);e.exports=function(e,t){var i=this.__data__;if(i instanceof n){var o=i.__data__;if(!r||o.length<199)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new s(o)}return i.set(e,t),this.size=i.size,this}},83140:(e,t,i)=>{var n=i(44286),r=i(62689),s=i(676);e.exports=function(e){return r(e)?s(e):n(e)}},55514:(e,t,i)=>{var n=i(24523),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,i,n,r){t.push(n?r.replace(s,"$1"):i||e)})),t}));e.exports=o},40327:(e,t,i)=>{var n=i(33448);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},676:e=>{var t="[\\ud800-\\udfff]",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+i+"|"+n+")"+"?",l="[\\ufe0e\\ufe0f]?",c=l+a+("(?:\\u200d(?:"+[r,s,o].join("|")+")"+l+a+")*"),h="(?:"+[r+i+"?",i,s,o,t].join("|")+")",u=RegExp(n+"(?="+n+")|"+h+c,"g");e.exports=function(e){return e.match(u)||[]}},2757:e=>{var t="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",n="A-Z\\xc0-\\xd6\\xd8-\\xde",r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",s="["+r+"]",o="\\d+",a="[\\u2700-\\u27bf]",l="["+i+"]",c="[^\\ud800-\\udfff"+r+o+t+i+n+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",d="["+n+"]",f="(?:"+l+"|"+c+")",p="(?:"+d+"|"+c+")",g="(?:['](?:d|ll|m|re|s|t|ve))?",m="(?:['](?:D|LL|M|RE|S|T|VE))?",b="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",v="[\\ufe0e\\ufe0f]?",y=v+b+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",h,u].join("|")+")"+v+b+")*"),_="(?:"+[a,h,u].join("|")+")"+y,w=RegExp([d+"?"+l+"+"+g+"(?="+[s,d,"$"].join("|")+")",p+"+"+m+"(?="+[s,d+f,"$"].join("|")+")",d+"?"+f+"+"+g,d+"+"+m,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,_].join("|"),"g");e.exports=function(e){return e.match(w)||[]}},68929:(e,t,i)=>{var n=i(48403),r=i(35393)((function(e,t,i){return t=t.toLowerCase(),e+(i?n(t):t)}));e.exports=r},48403:(e,t,i)=>{var n=i(79833),r=i(11700);e.exports=function(e){return r(n(e).toLowerCase())}},53816:(e,t,i)=>{var n=i(69389),r=i(79833),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=r(e))&&e.replace(s,n).replace(o,"")}},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},27361:(e,t,i)=>{var n=i(97786);e.exports=function(e,t,i){var r=null==e?void 0:n(e,t);return void 0===r?i:r}},18721:(e,t,i)=>{var n=i(78565),r=i(222);e.exports=function(e,t){return null!=e&&r(e,t,n)}},79095:(e,t,i)=>{var n=i(13),r=i(222);e.exports=function(e,t){return null!=e&&r(e,t,n)}},6557:e=>{e.exports=function(e){return e}},35694:(e,t,i)=>{var n=i(9454),r=i(37005),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return r(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,i)=>{var n=i(23560),r=i(41780);e.exports=function(e){return null!=e&&r(e.length)&&!n(e)}},44144:(e,t,i)=>{e=i.nmd(e);var n=i(55639),r=i(95062),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s?n.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;e.exports=l},23560:(e,t,i)=>{var n=i(44239),r=i(13218);e.exports=function(e){if(!r(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},33448:(e,t,i)=>{var n=i(44239),r=i(37005);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==n(e)}},36719:(e,t,i)=>{var n=i(38749),r=i(7518),s=i(31167),o=s&&s.isTypedArray,a=o?r(o):n;e.exports=a},3674:(e,t,i)=>{var n=i(14636),r=i(280),s=i(98612);e.exports=function(e){return s(e)?n(e):r(e)}},67523:(e,t,i)=>{var n=i(89465),r=i(47816),s=i(67206);e.exports=function(e,t){var i={};return t=s(t,3),r(e,(function(e,r,s){n(i,t(e,r,s),e)})),i}},66604:(e,t,i)=>{var n=i(89465),r=i(47816),s=i(67206);e.exports=function(e,t){var i={};return t=s(t,3),r(e,(function(e,r,s){n(i,r,t(e,r,s))})),i}},88306:(e,t,i)=>{var n=i(83369);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],s=i.cache;if(s.has(r))return s.get(r);var o=e.apply(this,n);return i.cache=s.set(r,o)||s,o};return i.cache=new(r.Cache||n),i}r.Cache=n,e.exports=r},39601:(e,t,i)=>{var n=i(40371),r=i(79152),s=i(15403),o=i(40327);e.exports=function(e){return s(e)?n(o(e)):r(e)}},11865:(e,t,i)=>{var n=i(35393)((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}));e.exports=n},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},79833:(e,t,i)=>{var n=i(80531);e.exports=function(e){return null==e?"":n(e)}},11700:(e,t,i)=>{var n=i(98805)("toUpperCase");e.exports=n},58748:(e,t,i)=>{var n=i(49029),r=i(93157),s=i(79833),o=i(2757);e.exports=function(e,t,i){return e=s(e),void 0===(t=i?void 0:t)?r(e)?o(e):n(e):e.match(t)||[]}},57824:e=>{var t=1e3,i=60*t,n=60*i,r=24*n,s=7*r,o=365.25*r;function a(e,t,i,n){var r=t>=1.5*i;return Math.round(e/i)+" "+n+(r?"s":"")}e.exports=function(e,l){l=l||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*r;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*i;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===c&&isFinite(e))return l.long?function(e){var s=Math.abs(e);if(s>=r)return a(e,s,r,"day");if(s>=n)return a(e,s,n,"hour");if(s>=i)return a(e,s,i,"minute");if(s>=t)return a(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=r)return Math.round(e/r)+"d";if(s>=n)return Math.round(e/n)+"h";if(s>=i)return Math.round(e/i)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},27418:e=>{"use strict";var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,s){for(var o,a,l=r(e),c=1;c<arguments.length;c++){for(var h in o=Object(arguments[c]))i.call(o,h)&&(l[h]=o[h]);if(t){a=t(o);for(var u=0;u<a.length;u++)n.call(o,a[u])&&(l[a[u]]=o[a[u]])}}return l}},92703:(e,t,i)=>{"use strict";var n=i(50414);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,s,o){if(o!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return i.PropTypes=i,i}},45697:(e,t,i)=>{e.exports=i(92703)()},50414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},55760:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var i=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,r=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,a=new t(512),l=new t(512),c=new t(512);function h(e){return a.get(e)||a.set(e,u(e).map((function(e){return e.replace(o,"$2")})))}function u(e){return e.match(i)}function d(e){return"string"==typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function f(e){return!d(e)&&(function(e){return e.match(r)&&!e.match(n)}(e)||function(e){return s.test(e)}(e))}e.exports={Cache:t,split:u,normalizePath:h,setter:function(e){var t=h(e);return l.get(e)||l.set(e,(function(e,i){for(var n=0,r=t.length,s=e;n<r-1;){var o=t[n];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;s=s[t[n++]]}s[t[n]]=i}))},getter:function(e,t){var i=h(e);return c.get(e)||c.set(e,(function(e){for(var n=0,r=i.length;n<r;){if(null==e&&t)return;e=e[i[n++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(d(t)||n.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,i){!function(e,t,i){var n,r,s,o,a=e.length;for(r=0;r<a;r++)(n=e[r])&&(f(n)&&(n='"'+n+'"'),s=!(o=d(n))&&/^\d+$/.test(n),t.call(i,n,o,s,r,e))}(Array.isArray(e)?e:u(e),t,i)}}},64448:(e,t,i)=>{"use strict";var n=i(67294),r=i(27418),s=i(63840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(o(227));var a=new Set,l={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},g={};function m(e,t,i,n,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){b[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];b[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){b[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){b[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){b[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){b[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){b[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){b[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){b[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,i,n){var r=b.hasOwnProperty(t)?b[t]:null;(null!==r?0===r.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,i,n){if(null==t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!f.call(g,e)||!f.call(p,e)&&(d.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);b[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);b[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);b[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){b[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),b.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){b[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,C=60106,x=60107,k=60108,E=60114,T=60109,L=60110,N=60112,M=60113,O=60120,D=60115,I=60116,A=60121,P=60128,R=60129,B=60130,F=60131;if("function"==typeof Symbol&&Symbol.for){var W=Symbol.for;S=W("react.element"),C=W("react.portal"),x=W("react.fragment"),k=W("react.strict_mode"),E=W("react.profiler"),T=W("react.provider"),L=W("react.context"),N=W("react.forward_ref"),M=W("react.suspense"),O=W("react.suspense_list"),D=W("react.memo"),I=W("react.lazy"),A=W("react.block"),W("react.scope"),P=W("react.opaque.id"),R=W("react.debug_trace_mode"),B=W("react.offscreen"),F=W("react.legacy_hidden")}var V,z="function"==typeof Symbol&&Symbol.iterator;function H(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}function j(e){if(void 0===V)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var U=!1;function G(e,t){if(!e||U)return"";U=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(e){if(e&&n&&"string"==typeof e.stack){for(var r=e.stack.split("\n"),s=n.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a])return"\n"+r[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?j(e):""}function K(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case C:return"Portal";case E:return"Profiler";case k:return"StrictMode";case M:return"Suspense";case O:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case L:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return $(e.type);case A:return $(e._render);case I:t=e._payload,e=e._init;try{return $(e(t))}catch(e){}}return null}function q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Z(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function Q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var i=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function ee(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=q(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ie(e,t){te(e,t);var i=q(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?re(e,t.type,i):t.hasOwnProperty("defaultValue")&&re(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ne(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function re(e,t,i){"number"===t&&Q(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function se(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+q(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(o(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(o(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:q(i)}}function ce(e,t){var i=q(t.value),n=q(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function he(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ue="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ge,me,be=(me=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((ge=ge||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ge.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ve(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function we(e,t,i){return null==t||"boolean"==typeof t||""===t?"":i||"number"!=typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function Se(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=we(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(ye).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var Ce=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(Ce[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Le=null,Ne=null;function Me(e){if(e=er(e)){if("function"!=typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ir(t),Te(e.stateNode,e.type,t))}}function Oe(e){Le?Ne?Ne.push(e):Ne=[e]:Le=e}function De(){if(Le){var e=Le,t=Ne;if(Ne=Le=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Ie(e,t){return e(t)}function Ae(e,t,i,n,r){return e(t,i,n,r)}function Pe(){}var Re=Ie,Be=!1,Fe=!1;function We(){null===Le&&null===Ne||(Pe(),De())}function Ve(e,t){var i=e.stateNode;if(null===i)return null;var n=ir(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!=typeof i)throw Error(o(231,t,typeof i));return i}var ze=!1;if(u)try{var He={};Object.defineProperty(He,"passive",{get:function(){ze=!0}}),window.addEventListener("test",He,He),window.removeEventListener("test",He,He)}catch(me){ze=!1}function je(e,t,i,n,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(e){this.onError(e)}}var Ue=!1,Ge=null,Ke=!1,$e=null,qe={onError:function(e){Ue=!0,Ge=e}};function Ze(e,t,i,n,r,s,o,a,l){Ue=!1,Ge=null,je.apply(qe,arguments)}function Ye(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Ye(e)!==e)throw Error(o(188))}function Je(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(n=r.return)){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return Qe(r),e;if(s===n)return Qe(r),t;s=s.sibling}throw Error(o(188))}if(i.return!==n.return)i=r,n=s;else{for(var a=!1,l=r.child;l;){if(l===i){a=!0,i=r,n=s;break}if(l===n){a=!0,n=r,i=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===i){a=!0,i=s,n=r;break}if(l===n){a=!0,n=s,i=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(i.alternate!==n)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var i=e.alternate;null!==t;){if(t===e||t===i)return!0;t=t.return}return!1}var tt,it,nt,rt,st=!1,ot=[],at=null,lt=null,ct=null,ht=new Map,ut=new Map,dt=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,i,n,r){return{blockedOn:e,domEventName:t,eventSystemFlags:16|i,nativeEvent:r,targetContainers:[n]}}function gt(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":ht.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,i,n,r,s){return null===e||e.nativeEvent!==s?(e=pt(t,i,n,r,s),null!==t&&(null!==(t=er(t))&&it(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function bt(e){var t=Jn(e.target);if(null!==t){var i=Ye(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=Xe(i)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(i)}))}))}else if(3===t&&i.stateNode.hydrate)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=er(i))&&it(t),e.blockedOn=i,!1;t.shift()}return!0}function yt(e,t,i){vt(e)&&i.delete(t)}function _t(){for(st=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=er(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var i=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i){e.blockedOn=i;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==at&&vt(at)&&(at=null),null!==lt&&vt(lt)&&(lt=null),null!==ct&&vt(ct)&&(ct=null),ht.forEach(yt),ut.forEach(yt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,st||(st=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,_t)))}function St(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var i=1;i<ot.length;i++){var n=ot[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==at&&wt(at,e),null!==lt&&wt(lt,e),null!==ct&&wt(ct,e),ht.forEach(t),ut.forEach(t),i=0;i<dt.length;i++)(n=dt[i]).blockedOn===e&&(n.blockedOn=null);for(;0<dt.length&&null===(i=dt[0]).blockedOn;)bt(i),null===i.blockedOn&&dt.shift()}function Ct(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var xt={animationend:Ct("Animation","AnimationEnd"),animationiteration:Ct("Animation","AnimationIteration"),animationstart:Ct("Animation","AnimationStart"),transitionend:Ct("Transition","TransitionEnd")},kt={},Et={};function Tt(e){if(kt[e])return kt[e];if(!xt[e])return e;var t,i=xt[e];for(t in i)if(i.hasOwnProperty(t)&&t in Et)return kt[e]=i[t];return e}u&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);var Lt=Tt("animationend"),Nt=Tt("animationiteration"),Mt=Tt("animationstart"),Ot=Tt("transitionend"),Dt=new Map,It=new Map,At=["abort","abort",Lt,"animationEnd",Nt,"animationIteration",Mt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function Pt(e,t){for(var i=0;i<e.length;i+=2){var n=e[i],r=e[i+1];r="on"+(r[0].toUpperCase()+r.slice(1)),It.set(n,t),Dt.set(n,r),c(r,[n])}}(0,s.unstable_now)();var Rt=8;function Bt(e){if(0!=(1&e))return Rt=15,1;if(0!=(2&e))return Rt=14,2;if(0!=(4&e))return Rt=13,4;var t=24&e;return 0!==t?(Rt=12,t):0!=(32&e)?(Rt=11,32):0!==(t=192&e)?(Rt=10,t):0!=(256&e)?(Rt=9,256):0!==(t=3584&e)?(Rt=8,t):0!=(4096&e)?(Rt=7,4096):0!==(t=4186112&e)?(Rt=6,t):0!==(t=62914560&e)?(Rt=5,t):67108864&e?(Rt=4,67108864):0!=(134217728&e)?(Rt=3,134217728):0!==(t=805306368&e)?(Rt=2,t):0!=(1073741824&e)?(Rt=1,1073741824):(Rt=8,e)}function Ft(e,t){var i=e.pendingLanes;if(0===i)return Rt=0;var n=0,r=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)n=s,r=Rt=15;else if(0!==(s=134217727&i)){var l=s&~o;0!==l?(n=Bt(l),r=Rt):0!==(a&=s)&&(n=Bt(a),r=Rt)}else 0!==(s=i&~o)?(n=Bt(s),r=Rt):0!==a&&(n=Bt(a),r=Rt);if(0===n)return 0;if(n=i&((0>(n=31-Ut(n))?0:1<<n)<<1)-1,0!==t&&t!==n&&0==(t&o)){if(Bt(t),r<=Rt)return t;Rt=r}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(i=31-Ut(t)),n|=e[i],t&=~r;return n}function Wt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=zt(24&~t))?Vt(10,t):e;case 10:return 0===(e=zt(192&~t))?Vt(8,t):e;case 8:return 0===(e=zt(3584&~t))&&(0===(e=zt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=zt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function zt(e){return e&-e}function Ht(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function jt(e,t,i){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,(e=e.eventTimes)[t=31-Ut(t)]=i}var Ut=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Kt|0)|0},Gt=Math.log,Kt=Math.LN2;var $t=s.unstable_UserBlockingPriority,qt=s.unstable_runWithPriority,Zt=!0;function Yt(e,t,i,n){Be||Pe();var r=Qt,s=Be;Be=!0;try{Ae(r,e,t,i,n)}finally{(Be=s)||We()}}function Xt(e,t,i,n){qt($t,Qt.bind(null,e,t,i,n))}function Qt(e,t,i,n){var r;if(Zt)if((r=0==(4&t))&&0<ot.length&&-1<ft.indexOf(e))e=pt(null,e,t,i,n),ot.push(e);else{var s=Jt(e,t,i,n);if(null===s)r&&gt(e,n);else{if(r){if(-1<ft.indexOf(e))return e=pt(s,e,t,i,n),void ot.push(e);if(function(e,t,i,n,r){switch(t){case"focusin":return at=mt(at,e,t,i,n,r),!0;case"dragenter":return lt=mt(lt,e,t,i,n,r),!0;case"mouseover":return ct=mt(ct,e,t,i,n,r),!0;case"pointerover":var s=r.pointerId;return ht.set(s,mt(ht.get(s)||null,e,t,i,n,r)),!0;case"gotpointercapture":return s=r.pointerId,ut.set(s,mt(ut.get(s)||null,e,t,i,n,r)),!0}return!1}(s,e,t,i,n))return;gt(e,n)}Dn(e,t,n,null,i)}}}function Jt(e,t,i,n){var r=Ee(n);if(null!==(r=Jn(r))){var s=Ye(r);if(null===s)r=null;else{var o=s.tag;if(13===o){if(null!==(r=Xe(s)))return r;r=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Dn(e,t,n,r,i),null}var ei=null,ti=null,ii=null;function ni(){if(ii)return ii;var e,t,i=ti,n=i.length,r="value"in ei?ei.value:ei.textContent,s=r.length;for(e=0;e<n&&i[e]===r[e];e++);var o=n-e;for(t=1;t<=o&&i[n-t]===r[s-t];t++);return ii=r.slice(e,1<t?1-t:void 0)}function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function si(){return!0}function oi(){return!1}function ai(e){function t(t,i,n,r,s){for(var o in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?si:oi,this.isPropagationStopped=oi,this}return r(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),t}var li,ci,hi,ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=ai(ui),fi=r({},ui,{view:0,detail:0}),pi=ai(fi),gi=r({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ei,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hi&&(hi&&"mousemove"===e.type?(li=e.screenX-hi.screenX,ci=e.screenY-hi.screenY):ci=li=0,hi=e),li)},movementY:function(e){return"movementY"in e?e.movementY:ci}}),mi=ai(gi),bi=ai(r({},gi,{dataTransfer:0})),vi=ai(r({},fi,{relatedTarget:0})),yi=ai(r({},ui,{animationName:0,elapsedTime:0,pseudoElement:0})),_i=ai(r({},ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),wi=ai(r({},ui,{data:0})),Si={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ci={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ki(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xi[e])&&!!t[e]}function Ei(){return ki}var Ti=ai(r({},fi,{key:function(e){if(e.key){var t=Si[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ci[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ei,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Li=ai(r({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ni=ai(r({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ei})),Mi=ai(r({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0})),Oi=ai(r({},gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Di=[9,13,27,32],Ii=u&&"CompositionEvent"in window,Ai=null;u&&"documentMode"in document&&(Ai=document.documentMode);var Pi=u&&"TextEvent"in window&&!Ai,Ri=u&&(!Ii||Ai&&8<Ai&&11>=Ai),Bi=String.fromCharCode(32),Fi=!1;function Wi(e,t){switch(e){case"keyup":return-1!==Di.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vi(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zi=!1;var Hi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ji(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hi[e.type]:"textarea"===t}function Ui(e,t,i,n){Oe(n),0<(t=An(t,"onChange")).length&&(i=new di("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Gi=null,Ki=null;function $i(e){En(e,0)}function qi(e){if(X(tr(e)))return e}function Zi(e,t){if("change"===e)return t}var Yi=!1;if(u){var Xi;if(u){var Qi="oninput"in document;if(!Qi){var Ji=document.createElement("div");Ji.setAttribute("oninput","return;"),Qi="function"==typeof Ji.oninput}Xi=Qi}else Xi=!1;Yi=Xi&&(!document.documentMode||9<document.documentMode)}function en(){Gi&&(Gi.detachEvent("onpropertychange",tn),Ki=Gi=null)}function tn(e){if("value"===e.propertyName&&qi(Ki)){var t=[];if(Ui(t,Ki,e,Ee(e)),e=$i,Be)e(t);else{Be=!0;try{Ie(e,t)}finally{Be=!1,We()}}}}function nn(e,t,i){"focusin"===e?(en(),Ki=i,(Gi=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function rn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qi(Ki)}function sn(e,t){if("click"===e)return qi(t)}function on(e,t){if("input"===e||"change"===e)return qi(t)}var an="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ln=Object.prototype.hasOwnProperty;function cn(e,t){if(an(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!ln.call(t,i[n])||!an(e[i[n]],t[i[n]]))return!1;return!0}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var i,n=hn(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fn(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var i="string"==typeof t.contentWindow.location.href}catch(e){i=!1}if(!i)break;t=Q((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gn=u&&"documentMode"in document&&11>=document.documentMode,mn=null,bn=null,vn=null,yn=!1;function _n(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;yn||null==mn||mn!==Q(n)||("selectionStart"in(n=mn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&cn(vn,n)||(vn=n,0<(n=An(bn,"onSelect")).length&&(t=new di("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=mn)))}Pt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pt(At,2);for(var wn="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sn=0;Sn<wn.length;Sn++)It.set(wn[Sn],0);h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cn));function kn(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,r,s,a,l,c){if(Ze.apply(this,arguments),Ue){if(!Ue)throw Error(o(198));var h=Ge;Ue=!1,Ge=null,Ke||(Ke=!0,$e=h)}}(n,t,void 0,e),e.currentTarget=null}function En(e,t){t=0!=(4&t);for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;kn(r,a,c),s=l}else for(o=0;o<n.length;o++){if(l=(a=n[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;kn(r,a,c),s=l}}}if(Ke)throw e=$e,Ke=!1,$e=null,e}function Tn(e,t){var i=nr(t),n=e+"__bubble";i.has(n)||(On(t,e,2,!1),i.add(n))}var Ln="_reactListening"+Math.random().toString(36).slice(2);function Nn(e){e[Ln]||(e[Ln]=!0,a.forEach((function(t){xn.has(t)||Mn(t,!1,e,null),Mn(t,!0,e,null)})))}function Mn(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=i;if("selectionchange"===e&&9!==i.nodeType&&(s=i.ownerDocument),null!==n&&!t&&xn.has(e)){if("scroll"!==e)return;r|=2,s=n}var o=nr(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(r|=4),On(s,e,r,t),o.add(a))}function On(e,t,i,n){var r=It.get(t);switch(void 0===r?2:r){case 0:r=Yt;break;case 1:r=Xt;break;default:r=Qt}i=r.bind(null,t,i,e),r=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):void 0!==r?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function Dn(e,t,i,n,r){var s=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=Jn(a)))return;if(5===(l=o.tag)||6===l){n=s=o;continue e}a=a.parentNode}}n=n.return}!function(e,t,i){if(Fe)return e(t,i);Fe=!0;try{Re(e,t,i)}finally{Fe=!1,We()}}((function(){var n=s,r=Ee(i),o=[];e:{var a=Dt.get(e);if(void 0!==a){var l=di,c=e;switch(e){case"keypress":if(0===ri(i))break e;case"keydown":case"keyup":l=Ti;break;case"focusin":c="focus",l=vi;break;case"focusout":c="blur",l=vi;break;case"beforeblur":case"afterblur":l=vi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=bi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ni;break;case Lt:case Nt:case Mt:l=yi;break;case Ot:l=Mi;break;case"scroll":l=pi;break;case"wheel":l=Oi;break;case"copy":case"cut":case"paste":l=_i;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Li}var h=0!=(4&t),u=!h&&"scroll"===e,d=h?null!==a?a+"Capture":null:a;h=[];for(var f,p=n;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ve(p,d))&&h.push(In(p,g,f)))),u)break;p=p.return}0<h.length&&(a=new l(a,c,null,i,r),o.push({event:a,listeners:h}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=i.relatedTarget||i.fromElement)||!Jn(c)&&!c[Xn])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(c=(c=i.relatedTarget||i.toElement)?Jn(c):null)&&(c!==(u=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(h=mi,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(h=Li,g="onPointerLeave",d="onPointerEnter",p="pointer"),u=null==l?a:tr(l),f=null==c?a:tr(c),(a=new h(g,p+"leave",l,i,r)).target=u,a.relatedTarget=f,g=null,Jn(r)===n&&((h=new h(d,p+"enter",c,i,r)).target=f,h.relatedTarget=u,g=h),u=g,l&&c)e:{for(d=c,p=0,f=h=l;f;f=Pn(f))p++;for(f=0,g=d;g;g=Pn(g))f++;for(;0<p-f;)h=Pn(h),p--;for(;0<f-p;)d=Pn(d),f--;for(;p--;){if(h===d||null!==d&&h===d.alternate)break e;h=Pn(h),d=Pn(d)}h=null}else h=null;null!==l&&Rn(o,a,l,h,!1),null!==c&&null!==u&&Rn(o,u,c,h,!0)}if("select"===(l=(a=n?tr(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Zi;else if(ji(a))if(Yi)m=on;else{m=rn;var b=nn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sn);switch(m&&(m=m(e,n))?Ui(o,m,i,r):(b&&b(e,a,n),"focusout"===e&&(b=a._wrapperState)&&b.controlled&&"number"===a.type&&re(a,"number",a.value)),b=n?tr(n):window,e){case"focusin":(ji(b)||"true"===b.contentEditable)&&(mn=b,bn=n,vn=null);break;case"focusout":vn=bn=mn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,_n(o,i,r);break;case"selectionchange":if(gn)break;case"keydown":case"keyup":_n(o,i,r)}var v;if(Ii)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zi?Wi(e,i)&&(y="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(y="onCompositionStart");y&&(Ri&&"ko"!==i.locale&&(zi||"onCompositionStart"!==y?"onCompositionEnd"===y&&zi&&(v=ni()):(ti="value"in(ei=r)?ei.value:ei.textContent,zi=!0)),0<(b=An(n,y)).length&&(y=new wi(y,e,null,i,r),o.push({event:y,listeners:b}),v?y.data=v:null!==(v=Vi(i))&&(y.data=v))),(v=Pi?function(e,t){switch(e){case"compositionend":return Vi(t);case"keypress":return 32!==t.which?null:(Fi=!0,Bi);case"textInput":return(e=t.data)===Bi&&Fi?null:e;default:return null}}(e,i):function(e,t){if(zi)return"compositionend"===e||!Ii&&Wi(e,t)?(e=ni(),ii=ti=ei=null,zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ri&&"ko"!==t.locale?null:t.data;default:return null}}(e,i))&&(0<(n=An(n,"onBeforeInput")).length&&(r=new wi("onBeforeInput","beforeinput",null,i,r),o.push({event:r,listeners:n}),r.data=v))}En(o,t)}))}function In(e,t,i){return{instance:e,listener:t,currentTarget:i}}function An(e,t){for(var i=t+"Capture",n=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ve(e,i))&&n.unshift(In(e,s,r)),null!=(s=Ve(e,t))&&n.push(In(e,s,r))),e=e.return}return n}function Pn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Rn(e,t,i,n,r){for(var s=t._reactName,o=[];null!==i&&i!==n;){var a=i,l=a.alternate,c=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ve(i,s))&&o.unshift(In(i,l,a)):r||null!=(l=Ve(i,s))&&o.push(In(i,l,a))),i=i.return}0!==o.length&&e.push({event:t,listeners:o})}function Bn(){}var Fn=null,Wn=null;function Vn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function zn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hn="function"==typeof setTimeout?setTimeout:void 0,jn="function"==typeof clearTimeout?clearTimeout:void 0;function Un(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Gn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Kn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var $n=0;var qn=Math.random().toString(36).slice(2),Zn="__reactFiber$"+qn,Yn="__reactProps$"+qn,Xn="__reactContainer$"+qn,Qn="__reactEvents$"+qn;function Jn(e){var t=e[Zn];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Xn]||i[Zn]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=Kn(e);null!==e;){if(i=e[Zn])return i;e=Kn(e)}return t}i=(e=i).parentNode}return null}function er(e){return!(e=e[Zn]||e[Xn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function tr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ir(e){return e[Yn]||null}function nr(e){var t=e[Qn];return void 0===t&&(t=e[Qn]=new Set),t}var rr=[],sr=-1;function or(e){return{current:e}}function ar(e){0>sr||(e.current=rr[sr],rr[sr]=null,sr--)}function lr(e,t){sr++,rr[sr]=e.current,e.current=t}var cr={},hr=or(cr),ur=or(!1),dr=cr;function fr(e,t){var i=e.type.contextTypes;if(!i)return cr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in i)s[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function pr(e){return null!=(e=e.childContextTypes)}function gr(){ar(ur),ar(hr)}function mr(e,t,i){if(hr.current!==cr)throw Error(o(168));lr(hr,t),lr(ur,i)}function br(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return i;for(var s in n=n.getChildContext())if(!(s in e))throw Error(o(108,$(t)||"Unknown",s));return r({},i,n)}function vr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,dr=hr.current,lr(hr,e),lr(ur,ur.current),!0}function yr(e,t,i){var n=e.stateNode;if(!n)throw Error(o(169));i?(e=br(e,t,dr),n.__reactInternalMemoizedMergedChildContext=e,ar(ur),ar(hr),lr(hr,e)):ar(ur),lr(ur,i)}var _r=null,wr=null,Sr=s.unstable_runWithPriority,Cr=s.unstable_scheduleCallback,xr=s.unstable_cancelCallback,kr=s.unstable_shouldYield,Er=s.unstable_requestPaint,Tr=s.unstable_now,Lr=s.unstable_getCurrentPriorityLevel,Nr=s.unstable_ImmediatePriority,Mr=s.unstable_UserBlockingPriority,Or=s.unstable_NormalPriority,Dr=s.unstable_LowPriority,Ir=s.unstable_IdlePriority,Ar={},Pr=void 0!==Er?Er:function(){},Rr=null,Br=null,Fr=!1,Wr=Tr(),Vr=1e4>Wr?Tr:function(){return Tr()-Wr};function zr(){switch(Lr()){case Nr:return 99;case Mr:return 98;case Or:return 97;case Dr:return 96;case Ir:return 95;default:throw Error(o(332))}}function Hr(e){switch(e){case 99:return Nr;case 98:return Mr;case 97:return Or;case 96:return Dr;case 95:return Ir;default:throw Error(o(332))}}function jr(e,t){return e=Hr(e),Sr(e,t)}function Ur(e,t,i){return e=Hr(e),Cr(e,t,i)}function Gr(){if(null!==Br){var e=Br;Br=null,xr(e)}Kr()}function Kr(){if(!Fr&&null!==Rr){Fr=!0;var e=0;try{var t=Rr;jr(99,(function(){for(;e<t.length;e++){var i=t[e];do{i=i(!0)}while(null!==i)}})),Rr=null}catch(t){throw null!==Rr&&(Rr=Rr.slice(e+1)),Cr(Nr,Gr),t}finally{Fr=!1}}}var $r=w.ReactCurrentBatchConfig;function qr(e,t){if(e&&e.defaultProps){for(var i in t=r({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}var Zr=or(null),Yr=null,Xr=null,Qr=null;function Jr(){Qr=Xr=Yr=null}function es(e){var t=Zr.current;ar(Zr),e.type._context._currentValue=t}function ts(e,t){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)===t){if(null===i||(i.childLanes&t)===t)break;i.childLanes|=t}else e.childLanes|=t,null!==i&&(i.childLanes|=t);e=e.return}}function is(e,t){Yr=e,Qr=Xr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ao=!0),e.firstContext=null)}function ns(e,t){if(Qr!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Qr=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Xr){if(null===Yr)throw Error(o(308));Xr=t,Yr.dependencies={lanes:0,firstContext:t,responders:null}}else Xr=Xr.next=t;return e._currentValue}var rs=!1;function ss(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function as(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ls(e,t){if(null!==(e=e.updateQueue)){var i=(e=e.shared).pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function cs(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,s=null;if(null!==(i=i.firstBaseUpdate)){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===s?r=s=o:s=s.next=o,i=i.next}while(null!==i);null===s?r=s=t:s=s.next=t}else r=s=t;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function hs(e,t,i,n){var s=e.updateQueue;rs=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var c=l,h=c.next;c.next=null,null===a?o=h:a.next=h,a=c;var u=e.alternate;if(null!==u){var d=(u=u.updateQueue).lastBaseUpdate;d!==a&&(null===d?u.firstBaseUpdate=h:d.next=h,u.lastBaseUpdate=c)}}if(null!==o){for(d=s.baseState,a=0,u=h=c=null;;){l=o.lane;var f=o.eventTime;if((n&l)===l){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(l=t,f=i,g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(f,d,l);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=g.payload)?p.call(f,d,l):p))break e;d=r({},d,l);break e;case 2:rs=!0}}null!==o.callback&&(e.flags|=32,null===(l=s.effects)?s.effects=[o]:l.push(o))}else f={eventTime:f,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(h=u=f,c=d):u=u.next=f,a|=l;if(null===(o=o.next)){if(null===(l=s.shared.pending))break;o=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}null===u&&(c=d),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=u,Fa|=a,e.lanes=a,e.memoizedState=d}}function us(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!=typeof r)throw Error(o(191,r));r.call(n)}}}var ds=(new n.Component).refs;function fs(e,t,i,n){i=null==(i=i(n,t=e.memoizedState))?t:r({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var ps={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=cl(),r=hl(e),s=as(n,r);s.payload=t,null!=i&&(s.callback=i),ls(e,s),ul(e,r,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=cl(),r=hl(e),s=as(n,r);s.tag=1,s.payload=t,null!=i&&(s.callback=i),ls(e,s),ul(e,r,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=cl(),n=hl(e),r=as(i,n);r.tag=2,null!=t&&(r.callback=t),ls(e,r),ul(e,n,i)}};function gs(e,t,i,n,r,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cn(i,n)||!cn(r,s))}function ms(e,t,i){var n=!1,r=cr,s=t.contextType;return"object"==typeof s&&null!==s?s=ns(s):(r=pr(t)?dr:hr.current,s=(n=null!=(n=t.contextTypes))?fr(e,r):cr),t=new t(i,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ps,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function bs(e,t,i,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&ps.enqueueReplaceState(t,t.state,null)}function vs(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=ds,ss(e);var s=t.contextType;"object"==typeof s&&null!==s?r.context=ns(s):(s=pr(t)?dr:hr.current,r.context=fr(e,s)),hs(e,i,r,n),r.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(fs(e,t,s,i),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ps.enqueueReplaceState(r,r.state,null),hs(e,i,r,n),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4)}var ys=Array.isArray;function _s(e,t,i){if(null!==(e=i.ref)&&"function"!=typeof e&&"object"!=typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(o(309));var n=i.stateNode}if(!n)throw Error(o(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===r?t.ref:((t=function(e){var t=n.refs;t===ds&&(t=n.refs={}),null===e?delete t[r]:t[r]=e})._stringRef=r,t)}if("string"!=typeof e)throw Error(o(284));if(!i._owner)throw Error(o(290,e))}return e}function ws(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ss(e){function t(t,i){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i,i.nextEffect=null,i.flags=8}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=jl(e,t)).index=0,e.sibling=null,e}function s(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags=2,i):n:(t.flags=2,i):i}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=$l(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,n){return null!==t&&t.elementType===i.type?((n=r(t,i.props)).ref=_s(e,t,i),n.return=e,n):((n=Ul(i.type,i.key,i.props,null,e.mode,n)).ref=_s(e,t,i),n.return=e,n)}function h(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=ql(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function u(e,t,i,n,s){return null===t||7!==t.tag?((t=Gl(i,e.mode,n,s)).return=e,t):((t=r(t,i)).return=e,t)}function d(e,t,i){if("string"==typeof t||"number"==typeof t)return(t=$l(""+t,e.mode,i)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case S:return(i=Ul(t.type,t.key,t.props,null,e.mode,i)).ref=_s(e,null,t),i.return=e,i;case C:return(t=ql(t,e.mode,i)).return=e,t}if(ys(t)||H(t))return(t=Gl(t,e.mode,i,null)).return=e,t;ws(e,t)}return null}function f(e,t,i,n){var r=null!==t?t.key:null;if("string"==typeof i||"number"==typeof i)return null!==r?null:l(e,t,""+i,n);if("object"==typeof i&&null!==i){switch(i.$$typeof){case S:return i.key===r?i.type===x?u(e,t,i.props.children,n,r):c(e,t,i,n):null;case C:return i.key===r?h(e,t,i,n):null}if(ys(i)||H(i))return null!==r?null:u(e,t,i,n,null);ws(e,i)}return null}function p(e,t,i,n,r){if("string"==typeof n||"number"==typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case S:return e=e.get(null===n.key?i:n.key)||null,n.type===x?u(t,e,n.props.children,r,n.key):c(t,e,n,r);case C:return h(t,e=e.get(null===n.key?i:n.key)||null,n,r)}if(ys(n)||H(n))return u(t,e=e.get(i)||null,n,r,null);ws(t,n)}return null}function g(r,o,a,l){for(var c=null,h=null,u=o,g=o=0,m=null;null!==u&&g<a.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var b=f(r,u,a[g],l);if(null===b){null===u&&(u=m);break}e&&u&&null===b.alternate&&t(r,u),o=s(b,o,g),null===h?c=b:h.sibling=b,h=b,u=m}if(g===a.length)return i(r,u),c;if(null===u){for(;g<a.length;g++)null!==(u=d(r,a[g],l))&&(o=s(u,o,g),null===h?c=u:h.sibling=u,h=u);return c}for(u=n(r,u);g<a.length;g++)null!==(m=p(u,r,g,a[g],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?g:m.key),o=s(m,o,g),null===h?c=m:h.sibling=m,h=m);return e&&u.forEach((function(e){return t(r,e)})),c}function m(r,a,l,c){var h=H(l);if("function"!=typeof h)throw Error(o(150));if(null==(l=h.call(l)))throw Error(o(151));for(var u=h=null,g=a,m=a=0,b=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(b=g,g=null):b=g.sibling;var y=f(r,g,v.value,c);if(null===y){null===g&&(g=b);break}e&&g&&null===y.alternate&&t(r,g),a=s(y,a,m),null===u?h=y:u.sibling=y,u=y,g=b}if(v.done)return i(r,g),h;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(r,v.value,c))&&(a=s(v,a,m),null===u?h=v:u.sibling=v,u=v);return h}for(g=n(r,g);!v.done;m++,v=l.next())null!==(v=p(g,r,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===u?h=v:u.sibling=v,u=v);return e&&g.forEach((function(e){return t(r,e)})),h}return function(e,n,s,l){var c="object"==typeof s&&null!==s&&s.type===x&&null===s.key;c&&(s=s.props.children);var h="object"==typeof s&&null!==s;if(h)switch(s.$$typeof){case S:e:{for(h=s.key,c=n;null!==c;){if(c.key===h){switch(c.tag){case 7:if(s.type===x){i(e,c.sibling),(n=r(c,s.props.children)).return=e,e=n;break e}break;default:if(c.elementType===s.type){i(e,c.sibling),(n=r(c,s.props)).ref=_s(e,c,s),n.return=e,e=n;break e}}i(e,c);break}t(e,c),c=c.sibling}s.type===x?((n=Gl(s.props.children,e.mode,l,s.key)).return=e,e=n):((l=Ul(s.type,s.key,s.props,null,e.mode,l)).ref=_s(e,n,s),l.return=e,e=l)}return a(e);case C:e:{for(c=s.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===s.containerInfo&&n.stateNode.implementation===s.implementation){i(e,n.sibling),(n=r(n,s.children||[])).return=e,e=n;break e}i(e,n);break}t(e,n),n=n.sibling}(n=ql(s,e.mode,l)).return=e,e=n}return a(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==n&&6===n.tag?(i(e,n.sibling),(n=r(n,s)).return=e,e=n):(i(e,n),(n=$l(s,e.mode,l)).return=e,e=n),a(e);if(ys(s))return g(e,n,s,l);if(H(s))return m(e,n,s,l);if(h&&ws(e,s),void 0===s&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,$(e.type)||"Component"))}return i(e,n)}}var Cs=Ss(!0),xs=Ss(!1),ks={},Es=or(ks),Ts=or(ks),Ls=or(ks);function Ns(e){if(e===ks)throw Error(o(174));return e}function Ms(e,t){switch(lr(Ls,t),lr(Ts,e),lr(Es,ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ar(Es),lr(Es,t)}function Os(){ar(Es),ar(Ts),ar(Ls)}function Ds(e){Ns(Ls.current);var t=Ns(Es.current),i=pe(t,e.type);t!==i&&(lr(Ts,e),lr(Es,i))}function Is(e){Ts.current===e&&(ar(Es),ar(Ts))}var As=or(0);function Ps(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rs=null,Bs=null,Fs=!1;function Ws(e,t){var i=zl(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function Vs(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function zs(e){if(Fs){var t=Bs;if(t){var i=t;if(!Vs(e,t)){if(!(t=Gn(i.nextSibling))||!Vs(e,t))return e.flags=-1025&e.flags|2,Fs=!1,void(Rs=e);Ws(Rs,i)}Rs=e,Bs=Gn(t.firstChild)}else e.flags=-1025&e.flags|2,Fs=!1,Rs=e}}function Hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Rs=e}function js(e){if(e!==Rs)return!1;if(!Fs)return Hs(e),Fs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!zn(t,e.memoizedProps))for(t=Bs;t;)Ws(e,t),t=Gn(t.nextSibling);if(Hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){Bs=Gn(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}Bs=null}}else Bs=Rs?Gn(e.stateNode.nextSibling):null;return!0}function Us(){Bs=Rs=null,Fs=!1}var Gs=[];function Ks(){for(var e=0;e<Gs.length;e++)Gs[e]._workInProgressVersionPrimary=null;Gs.length=0}var $s=w.ReactCurrentDispatcher,qs=w.ReactCurrentBatchConfig,Zs=0,Ys=null,Xs=null,Qs=null,Js=!1,eo=!1;function to(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!an(e[i],t[i]))return!1;return!0}function no(e,t,i,n,r,s){if(Zs=s,Ys=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$s.current=null===e||null===e.memoizedState?Mo:Oo,e=i(n,r),eo){s=0;do{if(eo=!1,!(25>s))throw Error(o(301));s+=1,Qs=Xs=null,t.updateQueue=null,$s.current=Do,e=i(n,r)}while(eo)}if($s.current=No,t=null!==Xs&&null!==Xs.next,Zs=0,Qs=Xs=Ys=null,Js=!1,t)throw Error(o(300));return e}function ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qs?Ys.memoizedState=Qs=e:Qs=Qs.next=e,Qs}function so(){if(null===Xs){var e=Ys.alternate;e=null!==e?e.memoizedState:null}else e=Xs.next;var t=null===Qs?Ys.memoizedState:Qs.next;if(null!==t)Qs=t,Xs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Xs=e).memoizedState,baseState:Xs.baseState,baseQueue:Xs.baseQueue,queue:Xs.queue,next:null},null===Qs?Ys.memoizedState=Qs=e:Qs=Qs.next=e}return Qs}function oo(e,t){return"function"==typeof t?t(e):t}function ao(e){var t=so(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=Xs,r=n.baseQueue,s=i.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,i.pending=null}if(null!==r){r=r.next,n=n.baseState;var l=a=s=null,c=r;do{var h=c.lane;if((Zs&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),n=c.eagerReducer===e?c.eagerState:e(n,c.action);else{var u={lane:h,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=u,s=n):l=l.next=u,Ys.lanes|=h,Fa|=h}c=c.next}while(null!==c&&c!==r);null===l?s=n:l.next=a,an(n,t.memoizedState)||(Ao=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,i.lastRenderedState=n}return[t.memoizedState,i.dispatch]}function lo(e){var t=so(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,s=t.memoizedState;if(null!==r){i.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);an(s,t.memoizedState)||(Ao=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function co(e,t,i){var n=t._getVersion;n=n(t._source);var r=t._workInProgressVersionPrimary;if(null!==r?e=r===n:(e=e.mutableReadLanes,(e=(Zs&e)===e)&&(t._workInProgressVersionPrimary=n,Gs.push(t))),e)return i(t._source);throw Gs.push(t),Error(o(350))}function ho(e,t,i,n){var r=Ma;if(null===r)throw Error(o(349));var s=t._getVersion,a=s(t._source),l=$s.current,c=l.useState((function(){return co(r,t,i)})),h=c[1],u=c[0];c=Qs;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,g=d.source;d=d.subscribe;var m=Ys;return e.memoizedState={refs:f,source:t,subscribe:n},l.useEffect((function(){f.getSnapshot=i,f.setSnapshot=h;var e=s(t._source);if(!an(a,e)){e=i(t._source),an(u,e)||(h(e),e=hl(m),r.mutableReadLanes|=e&r.pendingLanes),e=r.mutableReadLanes,r.entangledLanes|=e;for(var n=r.entanglements,o=e;0<o;){var l=31-Ut(o),c=1<<l;n[l]|=e,o&=~c}}}),[i,t,n]),l.useEffect((function(){return n(t._source,(function(){var e=f.getSnapshot,i=f.setSnapshot;try{i(e(t._source));var n=hl(m);r.mutableReadLanes|=n&r.pendingLanes}catch(e){i((function(){throw e}))}}))}),[t,n]),an(p,i)&&an(g,t)&&an(d,n)||((e={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:u}).dispatch=h=Lo.bind(null,Ys,e),c.queue=e,c.baseQueue=null,u=co(r,t,i),c.memoizedState=c.baseState=u),u}function uo(e,t,i){return ho(so(),e,t,i)}function fo(e){var t=ro();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e}).dispatch=Lo.bind(null,Ys,e),[t.memoizedState,e]}function po(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=Ys.updateQueue)?(t={lastEffect:null},Ys.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function go(e){return e={current:e},ro().memoizedState=e}function mo(){return so().memoizedState}function bo(e,t,i,n){var r=ro();Ys.flags|=e,r.memoizedState=po(1|t,i,void 0,void 0===n?null:n)}function vo(e,t,i,n){var r=so();n=void 0===n?null:n;var s=void 0;if(null!==Xs){var o=Xs.memoizedState;if(s=o.destroy,null!==n&&io(n,o.deps))return void po(t,i,s,n)}Ys.flags|=e,r.memoizedState=po(1|t,i,s,n)}function yo(e,t){return bo(516,4,e,t)}function _o(e,t){return vo(516,4,e,t)}function wo(e,t){return vo(4,2,e,t)}function So(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Co(e,t,i){return i=null!=i?i.concat([e]):null,vo(4,2,So.bind(null,t,e),i)}function xo(){}function ko(e,t){var i=so();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&io(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Eo(e,t){var i=so();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&io(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function To(e,t){var i=zr();jr(98>i?98:i,(function(){e(!0)})),jr(97<i?97:i,(function(){var i=qs.transition;qs.transition=1;try{e(!1),t()}finally{qs.transition=i}}))}function Lo(e,t,i){var n=cl(),r=hl(e),s={lane:r,action:i,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Ys||null!==o&&o===Ys)eo=Js=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,i);if(s.eagerReducer=o,s.eagerState=l,an(l,a))return}catch(e){}ul(e,r,n)}}var No={readContext:ns,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useOpaqueIdentifier:to,unstable_isNewReconciler:!1},Mo={readContext:ns,useCallback:function(e,t){return ro().memoizedState=[e,void 0===t?null:t],e},useContext:ns,useEffect:yo,useImperativeHandle:function(e,t,i){return i=null!=i?i.concat([e]):null,bo(4,2,So.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var i=ro();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=ro();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Lo.bind(null,Ys,e),[n.memoizedState,e]},useRef:go,useState:fo,useDebugValue:xo,useDeferredValue:function(e){var t=fo(e),i=t[0],n=t[1];return yo((function(){var t=qs.transition;qs.transition=1;try{n(e)}finally{qs.transition=t}}),[e]),i},useTransition:function(){var e=fo(!1),t=e[0];return go(e=To.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,i){var n=ro();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:i},ho(n,e,t,i)},useOpaqueIdentifier:function(){if(Fs){var e=!1,t=function(e){return{$$typeof:P,toString:e,valueOf:e}}((function(){throw e||(e=!0,i("r:"+($n++).toString(36))),Error(o(355))})),i=fo(t)[1];return 0==(2&Ys.mode)&&(Ys.flags|=516,po(5,(function(){i("r:"+($n++).toString(36))}),void 0,null)),t}return fo(t="r:"+($n++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:ns,useCallback:ko,useContext:ns,useEffect:_o,useImperativeHandle:Co,useLayoutEffect:wo,useMemo:Eo,useReducer:ao,useRef:mo,useState:function(){return ao(oo)},useDebugValue:xo,useDeferredValue:function(e){var t=ao(oo),i=t[0],n=t[1];return _o((function(){var t=qs.transition;qs.transition=1;try{n(e)}finally{qs.transition=t}}),[e]),i},useTransition:function(){var e=ao(oo)[0];return[mo().current,e]},useMutableSource:uo,useOpaqueIdentifier:function(){return ao(oo)[0]},unstable_isNewReconciler:!1},Do={readContext:ns,useCallback:ko,useContext:ns,useEffect:_o,useImperativeHandle:Co,useLayoutEffect:wo,useMemo:Eo,useReducer:lo,useRef:mo,useState:function(){return lo(oo)},useDebugValue:xo,useDeferredValue:function(e){var t=lo(oo),i=t[0],n=t[1];return _o((function(){var t=qs.transition;qs.transition=1;try{n(e)}finally{qs.transition=t}}),[e]),i},useTransition:function(){var e=lo(oo)[0];return[mo().current,e]},useMutableSource:uo,useOpaqueIdentifier:function(){return lo(oo)[0]},unstable_isNewReconciler:!1},Io=w.ReactCurrentOwner,Ao=!1;function Po(e,t,i,n){t.child=null===e?xs(t,null,i,n):Cs(t,e.child,i,n)}function Ro(e,t,i,n,r){i=i.render;var s=t.ref;return is(t,r),n=no(e,t,i,n,s,r),null===e||Ao?(t.flags|=1,Po(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,ia(e,t,r))}function Bo(e,t,i,n,r,s){if(null===e){var o=i.type;return"function"!=typeof o||Hl(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Ul(i.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Fo(e,t,o,n,r,s))}return o=e.child,0==(r&s)&&(r=o.memoizedProps,(i=null!==(i=i.compare)?i:cn)(r,n)&&e.ref===t.ref)?ia(e,t,s):(t.flags|=1,(e=jl(o,n)).ref=t.ref,e.return=t,t.child=e)}function Fo(e,t,i,n,r,s){if(null!==e&&cn(e.memoizedProps,n)&&e.ref===t.ref){if(Ao=!1,0==(s&r))return t.lanes=e.lanes,ia(e,t,s);0!=(16384&e.flags)&&(Ao=!0)}return zo(e,t,i,n,s)}function Wo(e,t,i){var n=t.pendingProps,r=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},yl(t,i);else{if(0==(1073741824&i))return e=null!==s?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},yl(t,e),null;t.memoizedState={baseLanes:0},yl(t,null!==s?s.baseLanes:i)}else null!==s?(n=s.baseLanes|i,t.memoizedState=null):n=i,yl(t,n);return Po(e,t,r,i),t.child}function Vo(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=128)}function zo(e,t,i,n,r){var s=pr(i)?dr:hr.current;return s=fr(t,s),is(t,r),i=no(e,t,i,n,s,r),null===e||Ao?(t.flags|=1,Po(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,ia(e,t,r))}function Ho(e,t,i,n,r){if(pr(i)){var s=!0;vr(t)}else s=!1;if(is(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ms(t,i,n),vs(t,i,n,r),n=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=i.contextType;"object"==typeof c&&null!==c?c=ns(c):c=fr(t,c=pr(i)?dr:hr.current);var h=i.getDerivedStateFromProps,u="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate;u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==n||l!==c)&&bs(t,o,n,c),rs=!1;var d=t.memoizedState;o.state=d,hs(t,n,o,r),l=t.memoizedState,a!==n||d!==l||ur.current||rs?("function"==typeof h&&(fs(t,i,h,n),l=t.memoizedState),(a=rs||gs(t,i,a,n,d,l,c))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):("function"==typeof o.componentDidMount&&(t.flags|=4),n=!1)}else{o=t.stateNode,os(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:qr(t.type,a),o.props=c,u=t.pendingProps,d=o.context,"object"==typeof(l=i.contextType)&&null!==l?l=ns(l):l=fr(t,l=pr(i)?dr:hr.current);var f=i.getDerivedStateFromProps;(h="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==u||d!==l)&&bs(t,o,n,l),rs=!1,d=t.memoizedState,o.state=d,hs(t,n,o,r);var p=t.memoizedState;a!==u||d!==p||ur.current||rs?("function"==typeof f&&(fs(t,i,f,n),p=t.memoizedState),(c=rs||gs(t,i,c,n,d,p,l))?(h||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=l,n=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),n=!1)}return jo(e,t,i,n,s,r)}function jo(e,t,i,n,r,s){Vo(e,t);var o=0!=(64&t.flags);if(!n&&!o)return r&&yr(t,i,!1),ia(e,t,s);n=t.stateNode,Io.current=t;var a=o&&"function"!=typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Cs(t,e.child,null,s),t.child=Cs(t,null,a,s)):Po(e,t,a,s),t.memoizedState=n.state,r&&yr(t,i,!0),t.child}function Uo(e){var t=e.stateNode;t.pendingContext?mr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mr(0,t.context,!1),Ms(e,t.containerInfo)}var Go,Ko,$o,qo={dehydrated:null,retryLane:0};function Zo(e,t,i){var n,r=t.pendingProps,s=As.current,o=!1;return(n=0!=(64&t.flags))||(n=(null===e||null!==e.memoizedState)&&0!=(2&s)),n?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(s|=1),lr(As,1&s),null===e?(void 0!==r.fallback&&zs(t),e=r.children,s=r.fallback,o?(e=Yo(t,e,s,i),t.child.memoizedState={baseLanes:i},t.memoizedState=qo,e):"number"==typeof r.unstable_expectedLoadTime?(e=Yo(t,e,s,i),t.child.memoizedState={baseLanes:i},t.memoizedState=qo,t.lanes=33554432,e):((i=Kl({mode:"visible",children:e},t.mode,i,null)).return=t,t.child=i)):(e.memoizedState,o?(r=Qo(e,t,r.children,r.fallback,i),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:i}:{baseLanes:s.baseLanes|i},o.childLanes=e.childLanes&~i,t.memoizedState=qo,r):(i=Xo(e,t,r.children,i),t.memoizedState=null,i))}function Yo(e,t,i,n){var r=e.mode,s=e.child;return t={mode:"hidden",children:t},0==(2&r)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Kl(t,r,0,null),i=Gl(i,r,n,null),s.return=e,i.return=e,s.sibling=i,e.child=s,i}function Xo(e,t,i,n){var r=e.child;return e=r.sibling,i=jl(r,{mode:"visible",children:i}),0==(2&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=i}function Qo(e,t,i,n,r){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:i};return 0==(2&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=a,null!==(o=i.lastEffect)?(t.firstEffect=i.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):i=jl(o,a),null!==e?n=jl(e,n):(n=Gl(n,s,r,null)).flags|=2,n.return=t,i.return=t,i.sibling=n,t.child=i,n}function Jo(e,t){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ts(e.return,t)}function ea(e,t,i,n,r,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=i,o.tailMode=r,o.lastEffect=s)}function ta(e,t,i){var n=t.pendingProps,r=n.revealOrder,s=n.tail;if(Po(e,t,n.children,i),0!=(2&(n=As.current)))n=1&n|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,i);else if(19===e.tag)Jo(e,i);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(lr(As,n),0==(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===Ps(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),ea(t,!1,r,i,s,t.lastEffect);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Ps(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}ea(t,!0,i,null,s,t.lastEffect);break;case"together":ea(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ia(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Fa|=t.lanes,0!=(i&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(i=jl(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=jl(e,e.pendingProps)).return=t;i.sibling=null}return t.child}return null}function na(e,t){if(!Fs)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ra(e,t,i){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pr(t.type)&&gr(),null;case 3:return Os(),ar(ur),ar(hr),Ks(),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(js(t)?t.flags|=4:n.hydrate||(t.flags|=256)),null;case 5:Is(t);var s=Ns(Ls.current);if(i=t.type,null!==e&&null!=t.stateNode)Ko(e,t,i,n),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ns(Es.current),js(t)){n=t.stateNode,i=t.type;var a=t.memoizedProps;switch(n[Zn]=t,n[Yn]=a,i){case"dialog":Tn("cancel",n),Tn("close",n);break;case"iframe":case"object":case"embed":Tn("load",n);break;case"video":case"audio":for(e=0;e<Cn.length;e++)Tn(Cn[e],n);break;case"source":Tn("error",n);break;case"img":case"image":case"link":Tn("error",n),Tn("load",n);break;case"details":Tn("toggle",n);break;case"input":ee(n,a),Tn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Tn("invalid",n);break;case"textarea":le(n,a),Tn("invalid",n)}for(var c in xe(i,a),e=null,a)a.hasOwnProperty(c)&&(s=a[c],"children"===c?"string"==typeof s?n.textContent!==s&&(e=["children",s]):"number"==typeof s&&n.textContent!==""+s&&(e=["children",""+s]):l.hasOwnProperty(c)&&null!=s&&"onScroll"===c&&Tn("scroll",n));switch(i){case"input":Y(n),ne(n,a,!0);break;case"textarea":Y(n),he(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=Bn)}n=e,t.updateQueue=n,null!==n&&(t.flags|=4)}else{switch(c=9===s.nodeType?s:s.ownerDocument,e===ue&&(e=fe(i)),e===ue?"script"===i?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=c.createElement(i,{is:n.is}):(e=c.createElement(i),"select"===i&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,i),e[Zn]=t,e[Yn]=n,Go(e,t),t.stateNode=e,c=ke(i,n),i){case"dialog":Tn("cancel",e),Tn("close",e),s=n;break;case"iframe":case"object":case"embed":Tn("load",e),s=n;break;case"video":case"audio":for(s=0;s<Cn.length;s++)Tn(Cn[s],e);s=n;break;case"source":Tn("error",e),s=n;break;case"img":case"image":case"link":Tn("error",e),Tn("load",e),s=n;break;case"details":Tn("toggle",e),s=n;break;case"input":ee(e,n),s=J(e,n),Tn("invalid",e);break;case"option":s=se(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=r({},n,{value:void 0}),Tn("invalid",e);break;case"textarea":le(e,n),s=ae(e,n),Tn("invalid",e);break;default:s=n}xe(i,s);var h=s;for(a in h)if(h.hasOwnProperty(a)){var u=h[a];"style"===a?Se(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&be(e,u):"children"===a?"string"==typeof u?("textarea"!==i||""!==u)&&ve(e,u):"number"==typeof u&&ve(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Tn("scroll",e):null!=u&&_(e,a,u,c))}switch(i){case"input":Y(e),ne(e,n,!1);break;case"textarea":Y(e),he(e);break;case"option":null!=n.value&&e.setAttribute("value",""+q(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?oe(e,!!n.multiple,a,!1):null!=n.defaultValue&&oe(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Bn)}Vn(i,n)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(o(166));i=Ns(Ls.current),Ns(Es.current),js(t)?(n=t.stateNode,i=t.memoizedProps,n[Zn]=t,n.nodeValue!==i&&(t.flags|=4)):((n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[Zn]=t,t.stateNode=n)}return null;case 13:return ar(As),n=t.memoizedState,0!=(64&t.flags)?(t.lanes=i,t):(n=null!==n,i=!1,null===e?void 0!==t.memoizedProps.fallback&&js(t):i=null!==e.memoizedState,n&&!i&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&As.current)?0===Pa&&(Pa=3):(0!==Pa&&3!==Pa||(Pa=4),null===Ma||0==(134217727&Fa)&&0==(134217727&Wa)||gl(Ma,Da))),(n||i)&&(t.flags|=4),null);case 4:return Os(),null===e&&Nn(t.stateNode.containerInfo),null;case 10:return es(t),null;case 17:return pr(t.type)&&gr(),null;case 19:if(ar(As),null===(n=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(c=n.rendering))if(a)na(n,!1);else{if(0!==Pa||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ps(e))){for(t.flags|=64,na(n,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=i,i=t.child;null!==i;)e=n,(a=i).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return lr(As,1&As.current|2),t.child}e=e.sibling}null!==n.tail&&Vr()>ja&&(t.flags|=64,a=!0,na(n,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Ps(c))){if(t.flags|=64,a=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),na(n,!0),null===n.tail&&"hidden"===n.tailMode&&!c.alternate&&!Fs)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Vr()-n.renderingStartTime>ja&&1073741824!==i&&(t.flags|=64,a=!0,na(n,!1),t.lanes=33554432);n.isBackwards?(c.sibling=t.child,t.child=c):(null!==(i=n.last)?i.sibling=c:t.child=c,n.last=c)}return null!==n.tail?(i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Vr(),i.sibling=null,t=As.current,lr(As,a?1&t|2:1&t),i):null;case 23:case 24:return _l(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function sa(e){switch(e.tag){case 1:pr(e.type)&&gr();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Os(),ar(ur),ar(hr),Ks(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Is(e),null;case 13:return ar(As),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ar(As),null;case 4:return Os(),null;case 10:return es(e),null;case 23:case 24:return _l(),null;default:return null}}function oa(e,t){try{var i="",n=t;do{i+=K(n),n=n.return}while(n);var r=i}catch(e){r="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:r}}function aa(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Go=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ko=function(e,t,i,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ns(Es.current);var o,a=null;switch(i){case"input":s=J(e,s),n=J(e,n),a=[];break;case"option":s=se(e,s),n=se(e,n),a=[];break;case"select":s=r({},s,{value:void 0}),n=r({},n,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),n=ae(e,n),a=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(e.onclick=Bn)}for(u in xe(i,n),i=null,s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var c=s[u];for(o in c)c.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(l.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var h=n[u];if(c=null!=s?s[u]:void 0,n.hasOwnProperty(u)&&h!==c&&(null!=h||null!=c))if("style"===u)if(c){for(o in c)!c.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in h)h.hasOwnProperty(o)&&c[o]!==h[o]&&(i||(i={}),i[o]=h[o])}else i||(a||(a=[]),a.push(u,i)),i=h;else"dangerouslySetInnerHTML"===u?(h=h?h.__html:void 0,c=c?c.__html:void 0,null!=h&&c!==h&&(a=a||[]).push(u,h)):"children"===u?"string"!=typeof h&&"number"!=typeof h||(a=a||[]).push(u,""+h):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(l.hasOwnProperty(u)?(null!=h&&"onScroll"===u&&Tn("scroll",e),a||c===h||(a=[])):"object"==typeof h&&null!==h&&h.$$typeof===P?h.toString():(a=a||[]).push(u,h))}i&&(a=a||[]).push("style",i);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},$o=function(e,t,i,n){i!==n&&(t.flags|=4)};var la="function"==typeof WeakMap?WeakMap:Map;function ca(e,t,i){(i=as(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){$a||($a=!0,qa=n),aa(0,t)},i}function ha(e,t,i){(i=as(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var r=t.value;i.payload=function(){return aa(0,t),n(r)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(i.callback=function(){"function"!=typeof n&&(null===Za?Za=new Set([this]):Za.add(this),aa(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}var ua="function"==typeof WeakSet?WeakSet:Set;function da(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Bl(e,t)}else t.current=null}function fa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var i=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?i:qr(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Un(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function pa(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e;n=r.next,0!=(4&(r=r.tag))&&0!=(1&r)&&(Al(i,e),Il(i,e)),e=n}while(e!==t)}return;case 1:return e=i.stateNode,4&i.flags&&(null===t?e.componentDidMount():(n=i.elementType===i.type?t.memoizedProps:qr(i.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=i.updateQueue)&&us(i,t,e));case 3:if(null!==(t=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}us(i,t,e)}return;case 5:return e=i.stateNode,void(null===t&&4&i.flags&&Vn(i.type,i.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&St(i)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function ga(e,t){for(var i=e;;){if(5===i.tag){var n=i.stateNode;if(t)"function"==typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=i.stateNode;var r=i.memoizedProps.style;r=null!=r&&r.hasOwnProperty("display")?r.display:null,n.style.display=we("display",r)}}else if(6===i.tag)i.stateNode.nodeValue=t?"":i.memoizedProps;else if((23!==i.tag&&24!==i.tag||null===i.memoizedState||i===e)&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ma(e,t){if(wr&&"function"==typeof wr.onCommitFiberUnmount)try{wr.onCommitFiberUnmount(_r,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var n=i,r=n.destroy;if(n=n.tag,void 0!==r)if(0!=(4&n))Al(t,i);else{n=t;try{r()}catch(e){Bl(n,e)}}i=i.next}while(i!==e)}break;case 1:if(da(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Bl(t,e)}break;case 5:da(t);break;case 4:Sa(e,t)}}function ba(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function va(e){return 5===e.tag||3===e.tag||4===e.tag}function ya(e){e:{for(var t=e.return;null!==t;){if(va(t))break e;t=t.return}throw Error(o(160))}var i=t;switch(t=i.stateNode,i.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(o(161))}16&i.flags&&(ve(t,""),i.flags&=-17);e:t:for(i=e;;){for(;null===i.sibling;){if(null===i.return||va(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.flags)continue t;if(null===i.child||4===i.tag)continue t;i.child.return=i,i=i.child}if(!(2&i.flags)){i=i.stateNode;break e}}n?_a(e,i,t):wa(e,i,t)}function _a(e,t,i){var n=e.tag,r=5===n||6===n;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!=(i=i._reactRootContainer)||null!==t.onclick||(t.onclick=Bn));else if(4!==n&&null!==(e=e.child))for(_a(e,t,i),e=e.sibling;null!==e;)_a(e,t,i),e=e.sibling}function wa(e,t,i){var n=e.tag,r=5===n||6===n;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(wa(e,t,i),e=e.sibling;null!==e;)wa(e,t,i),e=e.sibling}function Sa(e,t){for(var i,n,r=t,s=!1;;){if(!s){s=r.return;e:for(;;){if(null===s)throw Error(o(160));switch(i=s.stateNode,s.tag){case 5:n=!1;break e;case 3:case 4:i=i.containerInfo,n=!0;break e}s=s.return}s=!0}if(5===r.tag||6===r.tag){e:for(var a=e,l=r,c=l;;)if(ma(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n?(a=i,l=r.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):i.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){i=r.stateNode.containerInfo,n=!0,r.child.return=r,r=r.child;continue}}else if(ma(e,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(s=!1)}r.sibling.return=r.return,r=r.sibling}}function Ca(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var n=i=i.next;do{3==(3&n.tag)&&(e=n.destroy,n.destroy=void 0,void 0!==e&&e()),n=n.next}while(n!==i)}return;case 1:return;case 5:if(null!=(i=t.stateNode)){n=t.memoizedProps;var r=null!==e?e.memoizedProps:n;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(i[Yn]=n,"input"===e&&"radio"===n.type&&null!=n.name&&te(i,n),ke(e,r),t=ke(e,n),r=0;r<s.length;r+=2){var a=s[r],l=s[r+1];"style"===a?Se(i,l):"dangerouslySetInnerHTML"===a?be(i,l):"children"===a?ve(i,l):_(i,a,l,t)}switch(e){case"input":ie(i,n);break;case"textarea":ce(i,n);break;case"select":e=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,null!=(s=n.value)?oe(i,!!n.multiple,s,!1):e!==!!n.multiple&&(null!=n.defaultValue?oe(i,!!n.multiple,n.defaultValue,!0):oe(i,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((i=t.stateNode).hydrate&&(i.hydrate=!1,St(i.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Ha=Vr(),ga(t.child,!0)),void xa(t);case 19:return void xa(t);case 17:return;case 23:case 24:return void ga(t,null!==t.memoizedState)}throw Error(o(163))}function xa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new ua),t.forEach((function(t){var n=Wl.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function ka(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ea=Math.ceil,Ta=w.ReactCurrentDispatcher,La=w.ReactCurrentOwner,Na=0,Ma=null,Oa=null,Da=0,Ia=0,Aa=or(0),Pa=0,Ra=null,Ba=0,Fa=0,Wa=0,Va=0,za=null,Ha=0,ja=1/0;function Ua(){ja=Vr()+500}var Ga,Ka=null,$a=!1,qa=null,Za=null,Ya=!1,Xa=null,Qa=90,Ja=[],el=[],tl=null,il=0,nl=null,rl=-1,sl=0,ol=0,al=null,ll=!1;function cl(){return 0!=(48&Na)?Vr():-1!==rl?rl:rl=Vr()}function hl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===zr()?1:2;if(0===sl&&(sl=Ba),0!==$r.transition){0!==ol&&(ol=null!==za?za.pendingLanes:0),e=sl;var t=4186112&~ol;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=zr(),0!=(4&Na)&&98===e?e=Vt(12,sl):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),sl),e}function ul(e,t,i){if(50<il)throw il=0,nl=null,Error(o(185));if(null===(e=dl(e,t)))return null;jt(e,t,i),e===Ma&&(Wa|=t,4===Pa&&gl(e,Da));var n=zr();1===t?0!=(8&Na)&&0==(48&Na)?ml(e):(fl(e,i),0===Na&&(Ua(),Gr())):(0==(4&Na)||98!==n&&99!==n||(null===tl?tl=new Set([e]):tl.add(e)),fl(e,i)),za=e}function dl(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}function fl(e,t){for(var i=e.callbackNode,n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Ut(a),c=1<<l,h=s[l];if(-1===h){if(0==(c&n)||0!=(c&r)){h=t,Bt(c);var u=Rt;s[l]=10<=u?h+250:6<=u?h+5e3:-1}}else h<=t&&(e.expiredLanes|=c);a&=~c}if(n=Ft(e,e===Ma?Da:0),t=Rt,0===n)null!==i&&(i!==Ar&&xr(i),e.callbackNode=null,e.callbackPriority=0);else{if(null!==i){if(e.callbackPriority===t)return;i!==Ar&&xr(i)}15===t?(i=ml.bind(null,e),null===Rr?(Rr=[i],Br=Cr(Nr,Kr)):Rr.push(i),i=Ar):14===t?i=Ur(99,ml.bind(null,e)):i=Ur(i=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),pl.bind(null,e)),e.callbackPriority=t,e.callbackNode=i}}function pl(e){if(rl=-1,ol=sl=0,0!=(48&Na))throw Error(o(327));var t=e.callbackNode;if(Dl()&&e.callbackNode!==t)return null;var i=Ft(e,e===Ma?Da:0);if(0===i)return null;var n=i,r=Na;Na|=16;var s=Cl();for(Ma===e&&Da===n||(Ua(),wl(e,n));;)try{El();break}catch(t){Sl(e,t)}if(Jr(),Ta.current=s,Na=r,null!==Oa?n=0:(Ma=null,Da=0,n=Pa),0!=(Ba&Wa))wl(e,0);else if(0!==n){if(2===n&&(Na|=64,e.hydrate&&(e.hydrate=!1,Un(e.containerInfo)),0!==(i=Wt(e))&&(n=xl(e,i))),1===n)throw t=Ra,wl(e,0),gl(e,i),fl(e,Vr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=i,n){case 0:case 1:throw Error(o(345));case 2:Nl(e);break;case 3:if(gl(e,i),(62914560&i)===i&&10<(n=Ha+500-Vr())){if(0!==Ft(e,0))break;if(((r=e.suspendedLanes)&i)!==i){cl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Hn(Nl.bind(null,e),n);break}Nl(e);break;case 4:if(gl(e,i),(4186112&i)===i)break;for(n=e.eventTimes,r=-1;0<i;){var a=31-Ut(i);s=1<<a,(a=n[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=Vr()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ea(i/1960))-i)){e.timeoutHandle=Hn(Nl.bind(null,e),i);break}Nl(e);break;case 5:Nl(e);break;default:throw Error(o(329))}}return fl(e,Vr()),e.callbackNode===t?pl.bind(null,e):null}function gl(e,t){for(t&=~Va,t&=~Wa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ut(t),n=1<<i;e[i]=-1,t&=~n}}function ml(e){if(0!=(48&Na))throw Error(o(327));if(Dl(),e===Ma&&0!=(e.expiredLanes&Da)){var t=Da,i=xl(e,t);0!=(Ba&Wa)&&(i=xl(e,t=Ft(e,t)))}else i=xl(e,t=Ft(e,0));if(0!==e.tag&&2===i&&(Na|=64,e.hydrate&&(e.hydrate=!1,Un(e.containerInfo)),0!==(t=Wt(e))&&(i=xl(e,t))),1===i)throw i=Ra,wl(e,0),gl(e,t),fl(e,Vr()),i;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nl(e),fl(e,Vr()),null}function bl(e,t){var i=Na;Na|=1;try{return e(t)}finally{0===(Na=i)&&(Ua(),Gr())}}function vl(e,t){var i=Na;Na&=-2,Na|=8;try{return e(t)}finally{0===(Na=i)&&(Ua(),Gr())}}function yl(e,t){lr(Aa,Ia),Ia|=t,Ba|=t}function _l(){Ia=Aa.current,ar(Aa)}function wl(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,jn(i)),null!==Oa)for(i=Oa.return;null!==i;){var n=i;switch(n.tag){case 1:null!=(n=n.type.childContextTypes)&&gr();break;case 3:Os(),ar(ur),ar(hr),Ks();break;case 5:Is(n);break;case 4:Os();break;case 13:case 19:ar(As);break;case 10:es(n);break;case 23:case 24:_l()}i=i.return}Ma=e,Oa=jl(e.current,null),Da=Ia=Ba=t,Pa=0,Ra=null,Va=Wa=Fa=0}function Sl(e,t){for(;;){var i=Oa;try{if(Jr(),$s.current=No,Js){for(var n=Ys.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}Js=!1}if(Zs=0,Qs=Xs=Ys=null,eo=!1,La.current=null,null===i||null===i.return){Pa=1,Ra=t,Oa=null;break}e:{var s=e,o=i.return,a=i,l=t;if(t=Da,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&a.mode)){var h=a.alternate;h?(a.updateQueue=h.updateQueue,a.memoizedState=h.memoizedState,a.lanes=h.lanes):(a.updateQueue=null,a.memoizedState=null)}var u=0!=(1&As.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var g=d.memoizedProps;f=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!u)}}if(f){var m=d.updateQueue;if(null===m){var b=new Set;b.add(c),d.updateQueue=b}else m.add(c);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=as(-1,1);v.tag=2,ls(a,v)}a.lanes|=1;break e}l=void 0,a=t;var y=s.pingCache;if(null===y?(y=s.pingCache=new la,l=new Set,y.set(c,l)):void 0===(l=y.get(c))&&(l=new Set,y.set(c,l)),!l.has(a)){l.add(a);var _=Fl.bind(null,s,c,a);c.then(_,_)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error(($(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Pa&&(Pa=2),l=oa(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,t&=-t,d.lanes|=t,cs(d,ca(0,s,t));break e;case 1:s=l;var w=d.type,S=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Za||!Za.has(S)))){d.flags|=4096,t&=-t,d.lanes|=t,cs(d,ha(d,s,t));break e}}d=d.return}while(null!==d)}Ll(i)}catch(e){t=e,Oa===i&&null!==i&&(Oa=i=i.return);continue}break}}function Cl(){var e=Ta.current;return Ta.current=No,null===e?No:e}function xl(e,t){var i=Na;Na|=16;var n=Cl();for(Ma===e&&Da===t||wl(e,t);;)try{kl();break}catch(t){Sl(e,t)}if(Jr(),Na=i,Ta.current=n,null!==Oa)throw Error(o(261));return Ma=null,Da=0,Pa}function kl(){for(;null!==Oa;)Tl(Oa)}function El(){for(;null!==Oa&&!kr();)Tl(Oa)}function Tl(e){var t=Ga(e.alternate,e,Ia);e.memoizedProps=e.pendingProps,null===t?Ll(e):Oa=t,La.current=null}function Ll(e){var t=e;do{var i=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(i=ra(i,t,Ia)))return void(Oa=i);if(24!==(i=t).tag&&23!==i.tag||null===i.memoizedState||0!=(1073741824&Ia)||0==(4&i.mode)){for(var n=0,r=i.child;null!==r;)n|=r.lanes|r.childLanes,r=r.sibling;i.childLanes=n}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(i=sa(t)))return i.flags&=2047,void(Oa=i);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Oa=t);Oa=t=e}while(null!==t);0===Pa&&(Pa=5)}function Nl(e){var t=zr();return jr(99,Ml.bind(null,e,t)),null}function Ml(e,t){do{Dl()}while(null!==Xa);if(0!=(48&Na))throw Error(o(327));var i=e.finishedWork;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null;var n=i.lanes|i.childLanes,r=n,s=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<s;){var c=31-Ut(s),h=1<<c;r[c]=0,a[c]=-1,l[c]=-1,s&=~h}if(null!==tl&&0==(24&n)&&tl.has(e)&&tl.delete(e),e===Ma&&(Oa=Ma=null,Da=0),1<i.flags?null!==i.lastEffect?(i.lastEffect.nextEffect=i,n=i.firstEffect):n=i:n=i.firstEffect,null!==n){if(r=Na,Na|=32,La.current=null,Fn=Zt,pn(a=fn())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(h=l.getSelection&&l.getSelection())&&0!==h.rangeCount){l=h.anchorNode,s=h.anchorOffset,c=h.focusNode,h=h.focusOffset;try{l.nodeType,c.nodeType}catch(e){l=null;break e}var u=0,d=-1,f=-1,p=0,g=0,m=a,b=null;t:for(;;){for(var v;m!==l||0!==s&&3!==m.nodeType||(d=u+s),m!==c||0!==h&&3!==m.nodeType||(f=u+h),3===m.nodeType&&(u+=m.nodeValue.length),null!==(v=m.firstChild);)b=m,m=v;for(;;){if(m===a)break t;if(b===l&&++p===s&&(d=u),b===c&&++g===h&&(f=u),null!==(v=m.nextSibling))break;b=(m=b).parentNode}m=v}l=-1===d||-1===f?null:{start:d,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;Wn={focusedElem:a,selectionRange:l},Zt=!1,al=null,ll=!1,Ka=n;do{try{Ol()}catch(e){if(null===Ka)throw Error(o(330));Bl(Ka,e),Ka=Ka.nextEffect}}while(null!==Ka);al=null,Ka=n;do{try{for(a=e;null!==Ka;){var y=Ka.flags;if(16&y&&ve(Ka.stateNode,""),128&y){var _=Ka.alternate;if(null!==_){var w=_.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&y){case 2:ya(Ka),Ka.flags&=-3;break;case 6:ya(Ka),Ka.flags&=-3,Ca(Ka.alternate,Ka);break;case 1024:Ka.flags&=-1025;break;case 1028:Ka.flags&=-1025,Ca(Ka.alternate,Ka);break;case 4:Ca(Ka.alternate,Ka);break;case 8:Sa(a,l=Ka);var S=l.alternate;ba(l),null!==S&&ba(S)}Ka=Ka.nextEffect}}catch(e){if(null===Ka)throw Error(o(330));Bl(Ka,e),Ka=Ka.nextEffect}}while(null!==Ka);if(w=Wn,_=fn(),y=w.focusedElem,a=w.selectionRange,_!==y&&y&&y.ownerDocument&&dn(y.ownerDocument.documentElement,y)){null!==a&&pn(y)&&(_=a.start,void 0===(w=a.end)&&(w=_),"selectionStart"in y?(y.selectionStart=_,y.selectionEnd=Math.min(w,y.value.length)):(w=(_=y.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),l=y.textContent.length,S=Math.min(a.start,l),a=void 0===a.end?S:Math.min(a.end,l),!w.extend&&S>a&&(l=a,a=S,S=l),l=un(y,S),s=un(y,a),l&&s&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==s.node||w.focusOffset!==s.offset)&&((_=_.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),S>a?(w.addRange(_),w.extend(s.node,s.offset)):(_.setEnd(s.node,s.offset),w.addRange(_))))),_=[];for(w=y;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<_.length;y++)(w=_[y]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Zt=!!Fn,Wn=Fn=null,e.current=i,Ka=n;do{try{for(y=e;null!==Ka;){var C=Ka.flags;if(36&C&&pa(y,Ka.alternate,Ka),128&C){_=void 0;var x=Ka.ref;if(null!==x){var k=Ka.stateNode;switch(Ka.tag){case 5:_=k;break;default:_=k}"function"==typeof x?x(_):x.current=_}}Ka=Ka.nextEffect}}catch(e){if(null===Ka)throw Error(o(330));Bl(Ka,e),Ka=Ka.nextEffect}}while(null!==Ka);Ka=null,Pr(),Na=r}else e.current=i;if(Ya)Ya=!1,Xa=e,Qa=t;else for(Ka=n;null!==Ka;)t=Ka.nextEffect,Ka.nextEffect=null,8&Ka.flags&&((C=Ka).sibling=null,C.stateNode=null),Ka=t;if(0===(n=e.pendingLanes)&&(Za=null),1===n?e===nl?il++:(il=0,nl=e):il=0,i=i.stateNode,wr&&"function"==typeof wr.onCommitFiberRoot)try{wr.onCommitFiberRoot(_r,i,void 0,64==(64&i.current.flags))}catch(e){}if(fl(e,Vr()),$a)throw $a=!1,e=qa,qa=null,e;return 0!=(8&Na)||Gr(),null}function Ol(){for(;null!==Ka;){var e=Ka.alternate;ll||null===al||(0!=(8&Ka.flags)?et(Ka,al)&&(ll=!0):13===Ka.tag&&ka(e,Ka)&&et(Ka,al)&&(ll=!0));var t=Ka.flags;0!=(256&t)&&fa(e,Ka),0==(512&t)||Ya||(Ya=!0,Ur(97,(function(){return Dl(),null}))),Ka=Ka.nextEffect}}function Dl(){if(90!==Qa){var e=97<Qa?97:Qa;return Qa=90,jr(e,Pl)}return!1}function Il(e,t){Ja.push(t,e),Ya||(Ya=!0,Ur(97,(function(){return Dl(),null})))}function Al(e,t){el.push(t,e),Ya||(Ya=!0,Ur(97,(function(){return Dl(),null})))}function Pl(){if(null===Xa)return!1;var e=Xa;if(Xa=null,0!=(48&Na))throw Error(o(331));var t=Na;Na|=32;var i=el;el=[];for(var n=0;n<i.length;n+=2){var r=i[n],s=i[n+1],a=r.destroy;if(r.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===s)throw Error(o(330));Bl(s,e)}}for(i=Ja,Ja=[],n=0;n<i.length;n+=2){r=i[n],s=i[n+1];try{var l=r.create;r.destroy=l()}catch(e){if(null===s)throw Error(o(330));Bl(s,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Na=t,Gr(),!0}function Rl(e,t,i){ls(e,t=ca(0,t=oa(i,t),1)),t=cl(),null!==(e=dl(e,1))&&(jt(e,1,t),fl(e,t))}function Bl(e,t){if(3===e.tag)Rl(e,e,t);else for(var i=e.return;null!==i;){if(3===i.tag){Rl(i,e,t);break}if(1===i.tag){var n=i.stateNode;if("function"==typeof i.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Za||!Za.has(n))){var r=ha(i,e=oa(t,e),1);if(ls(i,r),r=cl(),null!==(i=dl(i,1)))jt(i,1,r),fl(i,r);else if("function"==typeof n.componentDidCatch&&(null===Za||!Za.has(n)))try{n.componentDidCatch(t,e)}catch(e){}break}}i=i.return}}function Fl(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=cl(),e.pingedLanes|=e.suspendedLanes&i,Ma===e&&(Da&i)===i&&(4===Pa||3===Pa&&(62914560&Da)===Da&&500>Vr()-Ha?wl(e,0):Va|=i),fl(e,t)}function Wl(e,t){var i=e.stateNode;null!==i&&i.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===zr()?1:2:(0===sl&&(sl=Ba),0===(t=zt(62914560&~sl))&&(t=4194304))),i=cl(),null!==(e=dl(e,t))&&(jt(e,t,i),fl(e,i))}function Vl(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function zl(e,t,i,n){return new Vl(e,t,i,n)}function Hl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jl(e,t){var i=e.alternate;return null===i?((i=zl(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ul(e,t,i,n,r,s){var a=2;if(n=e,"function"==typeof e)Hl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case x:return Gl(i.children,r,s,t);case R:a=8,r|=16;break;case k:a=8,r|=1;break;case E:return(e=zl(12,i,t,8|r)).elementType=E,e.type=E,e.lanes=s,e;case M:return(e=zl(13,i,t,r)).type=M,e.elementType=M,e.lanes=s,e;case O:return(e=zl(19,i,t,r)).elementType=O,e.lanes=s,e;case B:return Kl(i,r,s,t);case F:return(e=zl(24,i,t,r)).elementType=F,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case L:a=9;break e;case N:a=11;break e;case D:a=14;break e;case I:a=16,n=null;break e;case A:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=zl(a,i,t,r)).elementType=e,t.type=n,t.lanes=s,t}function Gl(e,t,i,n){return(e=zl(7,e,n,t)).lanes=i,e}function Kl(e,t,i,n){return(e=zl(23,e,n,t)).elementType=B,e.lanes=i,e}function $l(e,t,i){return(e=zl(6,e,null,t)).lanes=i,e}function ql(e,t,i){return(t=zl(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zl(e,t,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ht(0),this.expirationTimes=Ht(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ht(0),this.mutableSourceEagerHydrationData=null}function Yl(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}function Xl(e,t,i,n){var r=t.current,s=cl(),a=hl(r);e:if(i){t:{if(Ye(i=i._reactInternals)!==i||1!==i.tag)throw Error(o(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(pr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===i.tag){var c=i.type;if(pr(c)){i=br(i,c,l);break e}}i=l}else i=cr;return null===t.context?t.context=i:t.pendingContext=i,(t=as(s,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),ls(r,t),ul(r,a,s),a}function Ql(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Jl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function ec(e,t){Jl(e,t),(e=e.alternate)&&Jl(e,t)}function tc(e,t,i){var n=null!=i&&null!=i.hydrationOptions&&i.hydrationOptions.mutableSources||null;if(i=new Zl(e,t,null!=i&&!0===i.hydrate),t=zl(3,null,null,2===t?7:1===t?3:0),i.current=t,t.stateNode=i,ss(t),e[Xn]=i.current,Nn(8===e.nodeType?e.parentNode:e),n)for(e=0;e<n.length;e++){var r=(t=n[e])._getVersion;r=r(t._source),null==i.mutableSourceEagerHydrationData?i.mutableSourceEagerHydrationData=[t,r]:i.mutableSourceEagerHydrationData.push(t,r)}this._internalRoot=i}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nc(e,t,i,n,r){var s=i._reactRootContainer;if(s){var o=s._internalRoot;if("function"==typeof r){var a=r;r=function(){var e=Ql(o);a.call(e)}}Xl(t,o,e,r)}else{if(s=i._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new tc(e,0,t?{hydrate:!0}:void 0)}(i,n),o=s._internalRoot,"function"==typeof r){var l=r;r=function(){var e=Ql(o);l.call(e)}}vl((function(){Xl(t,o,e,r)}))}return Ql(o)}function rc(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return Yl(e,t,null,i)}Ga=function(e,t,i){var n=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ur.current)Ao=!0;else{if(0==(i&n)){switch(Ao=!1,t.tag){case 3:Uo(t),Us();break;case 5:Ds(t);break;case 1:pr(t.type)&&vr(t);break;case 4:Ms(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var r=t.type._context;lr(Zr,r._currentValue),r._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!=(i&t.child.childLanes)?Zo(e,t,i):(lr(As,1&As.current),null!==(t=ia(e,t,i))?t.sibling:null);lr(As,1&As.current);break;case 19:if(n=0!=(i&t.childLanes),0!=(64&e.flags)){if(n)return ta(e,t,i);t.flags|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),lr(As,As.current),n)break;return null;case 23:case 24:return t.lanes=0,Wo(e,t,i)}return ia(e,t,i)}Ao=0!=(16384&e.flags)}else Ao=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=fr(t,hr.current),is(t,i),r=no(null,t,n,e,r,i),t.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,pr(n)){var s=!0;vr(t)}else s=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ss(t);var a=n.getDerivedStateFromProps;"function"==typeof a&&fs(t,n,a,e),r.updater=ps,t.stateNode=r,r._reactInternals=t,vs(t,n,e,i),t=jo(null,t,n,!0,s,i)}else t.tag=0,Po(null,t,r,i),t=t.child;return t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"==typeof e)return Hl(e)?1:0;if(null!=e){if((e=e.$$typeof)===N)return 11;if(e===D)return 14}return 2}(r),e=qr(r,e),s){case 0:t=zo(null,t,r,e,i);break e;case 1:t=Ho(null,t,r,e,i);break e;case 11:t=Ro(null,t,r,e,i);break e;case 14:t=Bo(null,t,r,qr(r.type,e),n,i);break e}throw Error(o(306,r,""))}return t;case 0:return n=t.type,r=t.pendingProps,zo(e,t,n,r=t.elementType===n?r:qr(n,r),i);case 1:return n=t.type,r=t.pendingProps,Ho(e,t,n,r=t.elementType===n?r:qr(n,r),i);case 3:if(Uo(t),n=t.updateQueue,null===e||null===n)throw Error(o(282));if(n=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,os(e,t),hs(t,n,null,i),(n=t.memoizedState.element)===r)Us(),t=ia(e,t,i);else{if((s=(r=t.stateNode).hydrate)&&(Bs=Gn(t.stateNode.containerInfo.firstChild),Rs=t,s=Fs=!0),s){if(null!=(e=r.mutableSourceEagerHydrationData))for(r=0;r<e.length;r+=2)(s=e[r])._workInProgressVersionPrimary=e[r+1],Gs.push(s);for(i=xs(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|1024,i=i.sibling}else Po(e,t,n,i),Us();t=t.child}return t;case 5:return Ds(t),null===e&&zs(t),n=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,zn(n,r)?a=null:null!==s&&zn(n,s)&&(t.flags|=16),Vo(e,t),Po(e,t,a,i),t.child;case 6:return null===e&&zs(t),null;case 13:return Zo(e,t,i);case 4:return Ms(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Cs(t,null,n,i):Po(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,Ro(e,t,n,r=t.elementType===n?r:qr(n,r),i);case 7:return Po(e,t,t.pendingProps,i),t.child;case 8:case 12:return Po(e,t,t.pendingProps.children,i),t.child;case 10:e:{n=t.type._context,r=t.pendingProps,a=t.memoizedProps,s=r.value;var l=t.type._context;if(lr(Zr,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0===(s=an(l,s)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(l,s):1073741823))){if(a.children===r.children&&!ur.current){t=ia(e,t,i);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var h=c.firstContext;null!==h;){if(h.context===n&&0!=(h.observedBits&s)){1===l.tag&&((h=as(-1,i&-i)).tag=2,ls(l,h)),l.lanes|=i,null!==(h=l.alternate)&&(h.lanes|=i),ts(l.return,i),c.lanes|=i;break}h=h.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Po(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=(s=t.pendingProps).children,is(t,i),n=n(r=ns(r,s.unstable_observedBits)),t.flags|=1,Po(e,t,n,i),t.child;case 14:return s=qr(r=t.type,t.pendingProps),Bo(e,t,r,s=qr(r.type,s),n,i);case 15:return Fo(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:qr(n,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pr(n)?(e=!0,vr(t)):e=!1,is(t,i),ms(t,n,r),vs(t,n,r,i),jo(null,t,n,!0,e,i);case 19:return ta(e,t,i);case 23:case 24:return Wo(e,t,i)}throw Error(o(156,t.tag))},tc.prototype.render=function(e){Xl(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Xl(null,e,null,(function(){t[Xn]=null}))},tt=function(e){13===e.tag&&(ul(e,4,cl()),ec(e,4))},it=function(e){13===e.tag&&(ul(e,67108864,cl()),ec(e,67108864))},nt=function(e){if(13===e.tag){var t=cl(),i=hl(e);ul(e,i,t),ec(e,i)}},rt=function(e,t){return t()},Te=function(e,t,i){switch(t){case"input":if(ie(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=ir(n);if(!r)throw Error(o(90));X(n),ie(n,r)}}}break;case"textarea":ce(e,i);break;case"select":null!=(t=i.value)&&oe(e,!!i.multiple,t,!1)}},Ie=bl,Ae=function(e,t,i,n,r){var s=Na;Na|=4;try{return jr(98,e.bind(null,t,i,n,r))}finally{0===(Na=s)&&(Ua(),Gr())}},Pe=function(){0==(49&Na)&&(function(){if(null!==tl){var e=tl;tl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,fl(e,Vr())}))}Gr()}(),Dl())},Re=function(e,t){var i=Na;Na|=2;try{return e(t)}finally{0===(Na=i)&&(Ua(),Gr())}};var sc={Events:[er,tr,ir,Oe,De,Dl,{current:!1}]},oc={findFiberByHostInstance:Jn,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},ac={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{_r=lc.inject(ac),wr=lc}catch(me){}}t.createPortal=rc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.render=function(e,t,i){if(!ic(t))throw Error(o(200));return nc(null,e,t,!1,i)},t.unstable_batchedUpdates=bl},73935:(e,t,i)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=i(64448)},52255:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Re,DOMInspector:()=>Ae,Inspector:()=>Pe,ObjectInspector:()=>ge,ObjectLabel:()=>he,ObjectName:()=>ee,ObjectPreview:()=>le,ObjectRootLabel:()=>ce,ObjectValue:()=>ne,TableInspector:()=>Ee,chromeDark:()=>f,chromeLight:()=>p});var n=i(67294),r=i(45697),s=i.n(r),o=i(7689),a=i.n(o);function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c(e,t){return e(t={exports:{}},t.exports),t.exports}var h=l(c((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}))),u=c((function(e){e.exports=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r},e.exports.default=e.exports,e.exports.__esModule=!0}));l(u);var d=l(c((function(e){e.exports=function(e,t){if(null==e)return{};var i,n,r=u(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r},e.exports.default=e.exports,e.exports.__esModule=!0}))),f={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"rgb(36, 36, 36)",BASE_COLOR:"rgb(213, 213, 213)",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(227, 110, 236)",OBJECT_VALUE_NULL_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_REGEXP_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_STRING_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_NUMBER_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_BOOLEAN_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(85, 106, 242)",HTML_TAG_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(155, 187, 220)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(242, 151, 102)",HTML_COMMENT_COLOR:"rgb(137, 137, 137)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"rgb(145, 145, 145)",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"rgb(85, 85, 85)",TABLE_TH_BACKGROUND_COLOR:"rgb(44, 44, 44)",TABLE_TH_HOVER_COLOR:"rgb(48, 48, 48)",TABLE_SORT_ICON_COLOR:"black",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(51, 139, 255, 0.0980392) 50%, rgba(51, 139, 255, 0.0980392))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},p={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"white",BASE_COLOR:"black",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(136, 19, 145)",OBJECT_VALUE_NULL_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_STRING_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_BOOLEAN_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(13, 34, 170)",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"#aaa",TABLE_TH_BACKGROUND_COLOR:"#eee",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#6e6e6e",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(to bottom, white, white 50%, rgb(234, 243, 255) 50%, rgb(234, 243, 255))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},g=Object.freeze({__proto__:null,chromeDark:f,chromeLight:p}),m=c((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0}));l(m);var b=c((function(e){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0}));l(b);var v=c((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.default=e.exports,e.exports.__esModule=!0}));l(v);var y=c((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return v(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}));l(y);var _=c((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));l(_);var w=l(c((function(e){e.exports=function(e,t){return m(e)||b(e,t)||y(e,t)||_()},e.exports.default=e.exports,e.exports.__esModule=!0}))),S=l(c((function(e){function t(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}))),C=c((function(e){var t=function(e){var t,i=Object.prototype,n=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,i){return e[t]=i}}function c(e,t,i,n){var r=t&&t.prototype instanceof m?t:m,s=Object.create(r.prototype),o=new L(n||[]);return s._invoke=function(e,t,i){var n=u;return function(r,s){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===r)throw s;return M()}for(i.method=r,i.arg=s;;){var o=i.delegate;if(o){var a=k(o,i);if(a){if(a===g)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=f;var l=h(e,t,i);if("normal"===l.type){if(n=i.done?p:d,l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=p,i.method="throw",i.arg=l.arg)}}}(e,i,o),s}function h(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function m(){}function b(){}function v(){}var y={};y[s]=function(){return this};var _=Object.getPrototypeOf,w=_&&_(_(N([])));w&&w!==i&&n.call(w,s)&&(y=w);var S=v.prototype=m.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,s,o,a){var l=h(e[r],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var r;this._invoke=function(e,n){function s(){return new t((function(t,r){i(e,n,t,r)}))}return r=r?r.then(s,s):s()}}function k(e,i){var n=e.iterator[i.method];if(n===t){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=t,k(e,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=h(n,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,g;var s=r.arg;return s?s.done?(i[e.resultName]=s.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var i=e[s];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function i(){for(;++r<e.length;)if(n.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return o.next=o}}return{next:M}}function M(){return{value:t,done:!0}}return b.prototype=S.constructor=v,v.constructor=b,b.displayName=l(v,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,a,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},C(x.prototype),x.prototype[o]=function(){return this},e.AsyncIterator=x,e.async=function(t,i,n,r,s){void 0===s&&(s=Promise);var o=new x(c(t,i,n,r),s);return e.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(S),l(S,a,"Generator"),S[s]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(n,r){return a.type="throw",a.arg=e,i.next=n,r&&(i.method="next",i.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),T(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;T(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:N(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}})),x=c((function(e){e.exports=function(e){if(Array.isArray(e))return v(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));l(x);var k=c((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));l(k);var E=c((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));l(E);var T=l(c((function(e){e.exports=function(e){return x(e)||k(e)||y(e)||E()},e.exports.default=e.exports,e.exports.__esModule=!0}))),L=l(c((function(e){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.default=e.exports,e.exports.__esModule=!0}))),N=(0,n.createContext)([{},function(){}]),M={WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none",userSelect:"none"};function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){L(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var I=function(e){return{DOMNodePreview:{htmlOpenTag:{base:{color:e.HTML_TAG_COLOR},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM},htmlAttributeName:{color:e.HTML_ATTRIBUTE_NAME_COLOR},htmlAttributeValue:{color:e.HTML_ATTRIBUTE_VALUE_COLOR}},htmlCloseTag:{base:{color:e.HTML_TAG_COLOR},offsetLeft:{marginLeft:-e.TREENODE_PADDING_LEFT},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM}},htmlComment:{color:e.HTML_COMMENT_COLOR},htmlDoctype:{color:e.HTML_DOCTYPE_COLOR}},ObjectPreview:{objectDescription:{fontStyle:"italic"},preview:{fontStyle:"italic"},arrayMaxProperties:e.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,objectMaxProperties:e.OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES},ObjectName:{base:{color:e.OBJECT_NAME_COLOR},dimmed:{opacity:.6}},ObjectValue:{objectValueNull:{color:e.OBJECT_VALUE_NULL_COLOR},objectValueUndefined:{color:e.OBJECT_VALUE_UNDEFINED_COLOR},objectValueRegExp:{color:e.OBJECT_VALUE_REGEXP_COLOR},objectValueString:{color:e.OBJECT_VALUE_STRING_COLOR},objectValueSymbol:{color:e.OBJECT_VALUE_SYMBOL_COLOR},objectValueNumber:{color:e.OBJECT_VALUE_NUMBER_COLOR},objectValueBoolean:{color:e.OBJECT_VALUE_BOOLEAN_COLOR},objectValueFunctionPrefix:{color:e.OBJECT_VALUE_FUNCTION_PREFIX_COLOR,fontStyle:"italic"},objectValueFunctionName:{fontStyle:"italic"}},TreeView:{treeViewOutline:{padding:0,margin:0,listStyleType:"none"}},TreeNode:{treeNodeBase:{color:e.BASE_COLOR,backgroundColor:e.BASE_BACKGROUND_COLOR,lineHeight:e.TREENODE_LINE_HEIGHT,cursor:"default",boxSizing:"border-box",listStyle:"none",fontFamily:e.TREENODE_FONT_FAMILY,fontSize:e.TREENODE_FONT_SIZE},treeNodePreviewContainer:{},treeNodePlaceholder:D({whiteSpace:"pre",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT},M),treeNodeArrow:{base:D(D({color:e.ARROW_COLOR,display:"inline-block",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT},parseFloat(e.ARROW_ANIMATION_DURATION)>0?{transition:"transform ".concat(e.ARROW_ANIMATION_DURATION," ease 0s")}:{}),M),expanded:{WebkitTransform:"rotateZ(90deg)",MozTransform:"rotateZ(90deg)",transform:"rotateZ(90deg)"},collapsed:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},treeNodeChildNodesContainer:{margin:0,paddingLeft:e.TREENODE_PADDING_LEFT}},TableInspector:{base:{color:e.BASE_COLOR,position:"relative",border:"1px solid ".concat(e.TABLE_BORDER_COLOR),fontFamily:e.BASE_FONT_FAMILY,fontSize:e.BASE_FONT_SIZE,lineHeight:"120%",boxSizing:"border-box",cursor:"default"}},TableInspectorHeaderContainer:{base:{top:0,height:"17px",left:0,right:0,overflowX:"hidden"},table:{tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",height:"100%",width:"100%",margin:0}},TableInspectorDataContainer:{tr:{display:"table-row"},td:{boxSizing:"border-box",border:"none",height:"16px",verticalAlign:"top",padding:"1px 4px",WebkitUserSelect:"text",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px"},div:{position:"static",top:"17px",bottom:0,overflowY:"overlay",transform:"translateZ(0)",left:0,right:0,overflowX:"hidden"},table:{positon:"static",left:0,top:0,right:0,bottom:0,borderTop:"0 none transparent",margin:0,backgroundImage:e.TABLE_DATA_BACKGROUND_IMAGE,backgroundSize:e.TABLE_DATA_BACKGROUND_SIZE,tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",width:"100%",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorTH:{base:{position:"relative",height:"auto",textAlign:"left",backgroundColor:e.TABLE_TH_BACKGROUND_COLOR,borderBottom:"1px solid ".concat(e.TABLE_BORDER_COLOR),fontWeight:"normal",verticalAlign:"middle",padding:"0 4px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px",":hover":{backgroundColor:e.TABLE_TH_HOVER_COLOR}},div:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorLeftBorder:{none:{borderLeft:"none"},solid:{borderLeft:"1px solid ".concat(e.TABLE_BORDER_COLOR)}},TableInspectorSortIcon:D({display:"block",marginRight:3,width:8,height:7,marginTop:-7,color:e.TABLE_SORT_ICON_COLOR,fontSize:12},M)}},A="chromeLight",P=(0,n.createContext)(I(g.chromeLight)),R=function(e){return(0,n.useContext)(P)[e]},B=function(e){var t=function(t){var i=t.theme,r=void 0===i?A:i,s=d(t,["theme"]),o=(0,n.useMemo)((function(){switch(Object.prototype.toString.call(r)){case"[object String]":return I(g[r]);case"[object Object]":return I(r);default:return I(g.chromeLight)}}),[r]);return n.createElement(P.Provider,{value:o},n.createElement(e,s))};return t.propTypes={theme:s().oneOfType([s().string,s().object])},t};function F(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function W(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?F(Object(i),!0).forEach((function(t){L(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):F(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var V=function(e){var t=e.expanded,i=e.styles;return n.createElement("span",{style:W(W({},i.base),t?i.expanded:i.collapsed)},"")},z=(0,n.memo)((function(e){var t=e=W({expanded:!0,nodeRenderer:function(e){var t=e.name;return n.createElement("span",null,t)},onClick:function(){},shouldShowArrow:!1,shouldShowPlaceholder:!0},e),i=t.expanded,r=t.onClick,s=t.children,o=t.nodeRenderer,a=t.title,l=t.shouldShowArrow,c=t.shouldShowPlaceholder,h=R("TreeNode"),u=o;return n.createElement("li",{"aria-expanded":i,role:"treeitem",style:h.treeNodeBase,title:a},n.createElement("div",{style:h.treeNodePreviewContainer,onClick:r},l||n.Children.count(s)>0?n.createElement(V,{expanded:i,styles:h.treeNodeArrow}):c&&n.createElement("span",{style:h.treeNodePlaceholder},""),n.createElement(u,e)),n.createElement("ol",{role:"group",style:h.treeNodeChildNodesContainer},i?s:void 0))}));function H(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function j(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return U(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}z.propTypes={name:s().string,data:s().any,expanded:s().bool,shouldShowArrow:s().bool,shouldShowPlaceholder:s().bool,nodeRenderer:s().func,onClick:s().func};var G="$";function K(e,t){return!t(e).next().done}var $=function(e,t,i,n,r){var s,o=[].concat((s=n,Array.from({length:s},(function(e,t){return[G].concat(Array.from({length:t},(function(){return"*"}))).join(".")})))).concat(i).filter((function(e){return"string"==typeof e})),a=[];return o.forEach((function(i){var n=i.split(".");!function e(i,r,s){if(s!==n.length){var o=n[s];if(0===s)!K(i,t)||o!==G&&"*"!==o||e(i,G,s+1);else if("*"===o){var l,c=j(t(i));try{for(c.s();!(l=c.n()).done;){var h=l.value,u=h.name,d=h.data;K(d,t)&&e(d,"".concat(r,".").concat(u),s+1)}}catch(e){c.e(e)}finally{c.f()}}else{var f=i[o];K(f,t)&&e(f,"".concat(r,".").concat(o),s+1)}}else a.push(r)}(e,"",0)})),a.reduce((function(e,t){return e[t]=!0,e}),function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?H(Object(i),!0).forEach((function(t){L(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):H(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},r))};function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Z(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?q(Object(i),!0).forEach((function(t){L(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Y=(0,n.memo)((function(e){var t=e.data,i=e.dataIterator,r=e.path,s=e.depth,o=e.nodeRenderer,a=(0,n.useContext)(N),l=w(a,2),c=l[0],u=l[1],f=K(t,i),p=!!c[r],g=(0,n.useCallback)((function(){return f&&u((function(e){return Z(Z({},e),{},L({},r,!p))}))}),[f,u,r,p]);return n.createElement(z,h({expanded:p,onClick:g,shouldShowArrow:f,shouldShowPlaceholder:s>0,nodeRenderer:o},e),p?T(i(t)).map((function(e){var t=e.name,a=e.data,l=d(e,["name","data"]);return n.createElement(Y,h({name:t,data:a,depth:s+1,path:"".concat(r,".").concat(t),key:t,dataIterator:i,nodeRenderer:o},l))})):null)}));Y.propTypes={name:s().string,data:s().any,dataIterator:s().func,depth:s().number,expanded:s().bool,nodeRenderer:s().func};var X=(0,n.memo)((function(e){var t=e.name,i=e.data,r=e.dataIterator,s=e.nodeRenderer,o=e.expandPaths,a=e.expandLevel,l=R("TreeView"),c=(0,n.useState)({}),h=w(c,2)[1];return(0,n.useLayoutEffect)((function(){return h((function(e){return $(i,r,o,a,e)}))}),[i,r,o,a]),n.createElement(N.Provider,{value:c},n.createElement("ol",{role:"tree",style:l.treeViewOutline},n.createElement(Y,{name:t,data:i,dataIterator:r,depth:0,path:G,nodeRenderer:s})))}));function Q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function J(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(i),!0).forEach((function(t){L(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}X.propTypes={name:s().string,data:s().any,dataIterator:s().func,nodeRenderer:s().func,expandPaths:s().oneOfType([s().string,s().array]),expandLevel:s().number};var ee=function(e){var t=e.name,i=e.dimmed,r=void 0!==i&&i,s=e.styles,o=void 0===s?{}:s,a=R("ObjectName"),l=J(J(J({},a.base),r?a.dimmed:{}),o);return n.createElement("span",{style:l},t)};function te(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ie(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?te(Object(i),!0).forEach((function(t){L(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):te(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}ee.propTypes={name:s().string,dimmed:s().bool};var ne=function(e){var t=e.object,i=e.styles,r=R("ObjectValue"),s=function(e){return ie(ie({},r[e]),i)};switch(S(t)){case"bigint":return n.createElement("span",{style:s("objectValueNumber")},String(t),"n");case"number":return n.createElement("span",{style:s("objectValueNumber")},String(t));case"string":return n.createElement("span",{style:s("objectValueString")},'"',t,'"');case"boolean":return n.createElement("span",{style:s("objectValueBoolean")},String(t));case"undefined":return n.createElement("span",{style:s("objectValueUndefined")},"undefined");case"object":return null===t?n.createElement("span",{style:s("objectValueNull")},"null"):t instanceof Date?n.createElement("span",null,t.toString()):t instanceof RegExp?n.createElement("span",{style:s("objectValueRegExp")},t.toString()):Array.isArray(t)?n.createElement("span",null,"Array(".concat(t.length,")")):t.constructor?"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)?n.createElement("span",null,"Buffer[".concat(t.length,"]")):n.createElement("span",null,t.constructor.name):n.createElement("span",null,"Object");case"function":return n.createElement("span",null,n.createElement("span",{style:s("objectValueFunctionPrefix")},""),n.createElement("span",{style:s("objectValueFunctionName")},t.name,"()"));case"symbol":return n.createElement("span",{style:s("objectValueSymbol")},t.toString());default:return n.createElement("span",null)}};ne.propTypes={object:s().any};var re=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;function oe(e,t){var i=Object.getOwnPropertyDescriptor(e,t);if(i.get)try{return i.get()}catch(e){return i.get}return e[t]}function ae(e,t){return 0===e.length?[]:e.slice(1).reduce((function(e,i){return e.concat([t,i])}),[e[0]])}var le=function(e){var t=e.data,i=R("ObjectPreview"),r=t;if("object"!==S(r)||null===r||r instanceof Date||r instanceof RegExp)return n.createElement(ne,{object:r});if(Array.isArray(r)){var s=i.arrayMaxProperties,o=r.slice(0,s).map((function(e,t){return n.createElement(ne,{key:t,object:e})}));r.length>s&&o.push(n.createElement("span",{key:"ellipsis"},""));var a=r.length;return n.createElement(n.Fragment,null,n.createElement("span",{style:i.objectDescription},0===a?"":"(".concat(a,")")),n.createElement("span",{style:i.preview},"[",ae(o,", "),"]"))}var l=i.objectMaxProperties,c=[];for(var h in r)if(re.call(r,h)){var u=void 0;c.length===l-1&&Object.keys(r).length>l&&(u=n.createElement("span",{key:"ellipsis"},""));var d=oe(r,h);if(c.push(n.createElement("span",{key:h},n.createElement(ee,{name:h||'""'}),":",n.createElement(ne,{object:d}),u)),u)break}var f=r.constructor?r.constructor.name:"Object";return n.createElement(n.Fragment,null,n.createElement("span",{style:i.objectDescription},"Object"===f?"":"".concat(f," ")),n.createElement("span",{style:i.preview},"{",ae(c,", "),"}"))},ce=function(e){var t=e.name,i=e.data;return"string"==typeof t?n.createElement("span",null,n.createElement(ee,{name:t}),n.createElement("span",null,": "),n.createElement(le,{data:i})):n.createElement(le,{data:i})},he=function(e){var t=e.name,i=e.data,r=e.isNonenumerable,s=void 0!==r&&r,o=i;return n.createElement("span",null,"string"==typeof t?n.createElement(ee,{name:t,dimmed:s}):n.createElement(le,{data:t}),n.createElement("span",null,": "),n.createElement(ne,{object:o}))};function ue(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return de(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}he.propTypes={isNonenumerable:s().bool};var fe=function(e){var t=e.depth,i=e.name,r=e.data,s=e.isNonenumerable;return 0===t?n.createElement(ce,{name:i,data:r}):n.createElement(he,{name:i,data:r,isNonenumerable:s})},pe=function(e){var t=e.showNonenumerable,i=void 0!==t&&t,r=e.sortObjectKeys,s=e.nodeRenderer,o=d(e,["showNonenumerable","sortObjectKeys","nodeRenderer"]),a=function(e,t){return C.mark((function i(n){var r,s,o,a,l,c,h,u,d,f,p,g,m,b;return C.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("object"===S(n)&&null!==n||"function"==typeof n){i.next=3;break}return i.abrupt("return");case 3:if((r=Array.isArray(n))||!n[Symbol.iterator]){i.next=32;break}s=0,o=ue(n),i.prev=7,o.s();case 9:if((a=o.n()).done){i.next=22;break}if(l=a.value,!Array.isArray(l)||2!==l.length){i.next=17;break}return c=w(l,2),h=c[0],u=c[1],i.next=15,{name:h,data:u};case 15:i.next=19;break;case 17:return i.next=19,{name:s.toString(),data:l};case 19:s++;case 20:i.next=9;break;case 22:i.next=27;break;case 24:i.prev=24,i.t0=i.catch(7),o.e(i.t0);case 27:return i.prev=27,o.f(),i.finish(27);case 30:i.next=64;break;case 32:d=Object.getOwnPropertyNames(n),!0!==t||r?"function"==typeof t&&d.sort(t):d.sort(),f=ue(d),i.prev=35,f.s();case 37:if((p=f.n()).done){i.next=53;break}if(g=p.value,!se.call(n,g)){i.next=45;break}return m=oe(n,g),i.next=43,{name:g||'""',data:m};case 43:i.next=51;break;case 45:if(!e){i.next=51;break}b=void 0;try{b=oe(n,g)}catch(e){}if(void 0===b){i.next=51;break}return i.next=51,{name:g,data:b,isNonenumerable:!0};case 51:i.next=37;break;case 53:i.next=58;break;case 55:i.prev=55,i.t1=i.catch(35),f.e(i.t1);case 58:return i.prev=58,f.f(),i.finish(58);case 61:if(!e||n===Object.prototype){i.next=64;break}return i.next=64,{name:"__proto__",data:Object.getPrototypeOf(n),isNonenumerable:!0};case 64:case"end":return i.stop()}}),i,null,[[7,24,27,30],[35,55,58,61]])}))}(i,r),l=s||fe;return n.createElement(X,h({nodeRenderer:l,dataIterator:a},o))};pe.propTypes={expandLevel:s().number,expandPaths:s().oneOfType([s().string,s().array]),name:s().string,data:s().any,showNonenumerable:s().bool,sortObjectKeys:s().oneOfType([s().bool,s().func]),nodeRenderer:s().func};var ge=B(pe);function me(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function be(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?me(Object(i),!0).forEach((function(t){L(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):me(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}Array.prototype.includes||(Array.prototype.includes=function(e){var t=Object(this),i=parseInt(t.length)||0;if(0===i)return!1;var n,r,s=parseInt(arguments[1])||0;for(s>=0?n=s:(n=i+s)<0&&(n=0);n<i;){if(e===(r=t[n])||e!=e&&r!=r)return!0;n++}return!1});var ve=function(e){var t=e.rows,i=e.columns,r=e.rowsData,s=R("TableInspectorDataContainer"),o=R("TableInspectorLeftBorder");return n.createElement("div",{style:s.div},n.createElement("table",{style:s.table},n.createElement("colgroup",null),n.createElement("tbody",null,t.map((function(e,t){return n.createElement("tr",{key:e,style:s.tr},n.createElement("td",{style:be(be({},s.td),o.none)},e),i.map((function(e){var i=r[t];return"object"===S(i)&&null!==i&&re.call(i,e)?n.createElement("td",{key:e,style:be(be({},s.td),o.solid)},n.createElement(ne,{object:i[e]})):n.createElement("td",{key:e,style:be(be({},s.td),o.solid)})})))})))))};function ye(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function _e(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(i),!0).forEach((function(t){L(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ye(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var we=function(e){return n.createElement("div",{style:{position:"absolute",top:1,right:0,bottom:1,display:"flex",alignItems:"center"}},e.children)},Se=function(e){var t=e.sortAscending,i=R("TableInspectorSortIcon"),r=t?"":"";return n.createElement("div",{style:i},r)},Ce=function(e){var t=e.sortAscending,i=void 0!==t&&t,r=e.sorted,s=void 0!==r&&r,o=e.onClick,a=void 0===o?void 0:o,l=e.borderStyle,c=void 0===l?{}:l,u=e.children,f=d(e,["sortAscending","sorted","onClick","borderStyle","children"]),p=R("TableInspectorTH"),g=(0,n.useState)(!1),m=w(g,2),b=m[0],v=m[1],y=(0,n.useCallback)((function(){return v(!0)}),[]),_=(0,n.useCallback)((function(){return v(!1)}),[]);return n.createElement("th",h({},f,{style:_e(_e(_e({},p.base),c),b?p.base[":hover"]:{}),onMouseEnter:y,onMouseLeave:_,onClick:a}),n.createElement("div",{style:p.div},u),s&&n.createElement(we,null,n.createElement(Se,{sortAscending:i})))},xe=function(e){var t=e.indexColumnText,i=void 0===t?"(index)":t,r=e.columns,s=void 0===r?[]:r,o=e.sorted,a=e.sortIndexColumn,l=e.sortColumn,c=e.sortAscending,h=e.onTHClick,u=e.onIndexTHClick,d=R("TableInspectorHeaderContainer"),f=R("TableInspectorLeftBorder");return n.createElement("div",{style:d.base},n.createElement("table",{style:d.table},n.createElement("tbody",null,n.createElement("tr",null,n.createElement(Ce,{borderStyle:f.none,sorted:o&&a,sortAscending:c,onClick:u},i),s.map((function(e){return n.createElement(Ce,{borderStyle:f.solid,key:e,sorted:o&&l===e,sortAscending:c,onClick:h.bind(null,e)},e)}))))))},ke=function(e){var t=e.data,i=e.columns,r=R("TableInspector"),s=(0,n.useState)({sorted:!1,sortIndexColumn:!1,sortColumn:void 0,sortAscending:!1}),o=w(s,2),a=o[0],l=a.sorted,c=a.sortIndexColumn,h=a.sortColumn,u=a.sortAscending,d=o[1],f=(0,n.useCallback)((function(){d((function(e){var t=e.sortIndexColumn,i=e.sortAscending;return{sorted:!0,sortIndexColumn:!0,sortColumn:void 0,sortAscending:!t||!i}}))}),[]),p=(0,n.useCallback)((function(e){d((function(t){var i=t.sortColumn,n=t.sortAscending;return{sorted:!0,sortIndexColumn:!1,sortColumn:e,sortAscending:e!==i||!n}}))}),[]);if("object"!==S(t)||null===t)return n.createElement("div",null);var g=function(e){if("object"===S(e)){var t;if(Array.isArray(e)){var i=e.length;t=T(Array(i).keys())}else null!==e&&(t=Object.keys(e));var n=t.reduce((function(t,i){var n=e[i];return"object"===S(n)&&null!==n&&Object.keys(n).reduce((function(e,t){return e.includes(t)||e.push(t),e}),t),t}),[]);return{rowHeaders:t,colHeaders:n}}}(t),m=g.rowHeaders,b=g.colHeaders;void 0!==i&&(b=i);var v,y,_,C=m.map((function(e){return t[e]}));if(void 0!==h?v=C.map((function(e,t){return"object"===S(e)&&null!==e?[e[h],t]:[void 0,t]})):c&&(v=m.map((function(e,t){return[m[t],t]}))),void 0!==v){var x=v.sort((y=function(e){return e[0]},_=u,function(e,t){var i,n=y(e),r=y(t),s=S(n),o=S(r),a=function(e,t){return e<t?-1:e>t?1:0};if(s===o)i=a(n,r);else{var l={string:0,number:1,object:2,symbol:3,boolean:4,undefined:5,function:6};i=a(l[s],l[o])}return _||(i=-i),i})).map((function(e){return e[1]}));m=x.map((function(e){return m[e]})),C=x.map((function(e){return C[e]}))}return n.createElement("div",{style:r.base},n.createElement(xe,{columns:b,sorted:l,sortIndexColumn:c,sortColumn:h,sortAscending:u,onTHClick:p,onIndexTHClick:f}),n.createElement(ve,{rows:m,columns:b,rowsData:C}))};ke.propTypes={data:s().oneOfType([s().array,s().object]),columns:s().array};var Ee=B(ke),Te=function(e){return 0===e.childNodes.length||1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE&&e.textContent.length<80},Le=function(e){var t=e.tagName,i=e.attributes,r=e.styles;return n.createElement("span",{style:r.base},"<",n.createElement("span",{style:r.tagName},t),function(){if(i){for(var e=[],t=0;t<i.length;t++){var s=i[t];e.push(n.createElement("span",{key:t}," ",n.createElement("span",{style:r.htmlAttributeName},s.name),'="',n.createElement("span",{style:r.htmlAttributeValue},s.value),'"'))}return e}}(),">")},Ne=function(e){var t=e.tagName,i=e.isChildNode,r=void 0!==i&&i,s=e.styles;return n.createElement("span",{style:h({},s.base,r&&s.offsetLeft)},"</",n.createElement("span",{style:s.tagName},t),">")},Me={1:"ELEMENT_NODE",3:"TEXT_NODE",7:"PROCESSING_INSTRUCTION_NODE",8:"COMMENT_NODE",9:"DOCUMENT_NODE",10:"DOCUMENT_TYPE_NODE",11:"DOCUMENT_FRAGMENT_NODE"},Oe=function(e){var t=e.isCloseTag,i=e.data,r=e.expanded,s=R("DOMNodePreview");if(t)return n.createElement(Ne,{styles:s.htmlCloseTag,isChildNode:!0,tagName:i.tagName});switch(i.nodeType){case Node.ELEMENT_NODE:return n.createElement("span",null,n.createElement(Le,{tagName:i.tagName,attributes:i.attributes,styles:s.htmlOpenTag}),Te(i)?i.textContent:!r&&"",!r&&n.createElement(Ne,{tagName:i.tagName,styles:s.htmlCloseTag}));case Node.TEXT_NODE:return n.createElement("span",null,i.textContent);case Node.CDATA_SECTION_NODE:return n.createElement("span",null,"<![CDATA["+i.textContent+"]]>");case Node.COMMENT_NODE:return n.createElement("span",{style:s.htmlComment},"\x3c!--",i.textContent,"--\x3e");case Node.PROCESSING_INSTRUCTION_NODE:return n.createElement("span",null,i.nodeName);case Node.DOCUMENT_TYPE_NODE:return n.createElement("span",{style:s.htmlDoctype},"<!DOCTYPE ",i.name,i.publicId?' PUBLIC "'.concat(i.publicId,'"'):"",!i.publicId&&i.systemId?" SYSTEM":"",i.systemId?' "'.concat(i.systemId,'"'):"",">");case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return n.createElement("span",null,i.nodeName);default:return n.createElement("span",null,Me[i.nodeType])}};Oe.propTypes={isCloseTag:s().bool,name:s().string,data:s().object.isRequired,expanded:s().bool.isRequired};var De=C.mark((function e(t){var i,n;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.childNodes){e.next=17;break}if(!Te(t)){e.next=4;break}return e.abrupt("return");case 4:i=0;case 5:if(!(i<t.childNodes.length)){e.next=14;break}if((n=t.childNodes[i]).nodeType!==Node.TEXT_NODE||0!==n.textContent.trim().length){e.next=9;break}return e.abrupt("continue",11);case 9:return e.next=11,{name:"".concat(n.tagName,"[").concat(i,"]"),data:n};case 11:i++,e.next=5;break;case 14:if(!t.tagName){e.next=17;break}return e.next=17,{name:"CLOSE_TAG",data:{tagName:t.tagName},isCloseTag:!0};case 17:case"end":return e.stop()}}),e)})),Ie=function(e){return n.createElement(X,h({nodeRenderer:Oe,dataIterator:De},e))};Ie.propTypes={data:s().object.isRequired};var Ae=B(Ie),Pe=function(e){var t=e.table,i=void 0!==t&&t,r=e.data,s=d(e,["table","data"]);return i?n.createElement(Ee,h({data:r},s)):a()(r)?n.createElement(Ae,h({data:r},s)):n.createElement(ge,h({data:r},s))};Pe.propTypes={data:s().any,name:s().string,table:s().bool};const Re=Pe},69921:(e,t)=>{"use strict";var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,r=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,o=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,b=i?Symbol.for("react.block"):60121,v=i?Symbol.for("react.fundamental"):60117,y=i?Symbol.for("react.responder"):60118,_=i?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case h:case u:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case m:case g:case l:return e;default:return t}}case r:return t}}}function S(e){return w(e)===u}t.AsyncMode=h,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=d,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=r,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||w(e)===h},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===s},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===r},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===a||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===y||e.$$typeof===_||e.$$typeof===b)},t.typeOf=w},59864:(e,t,i)=>{"use strict";e.exports=i(69921)},76585:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},39658:(e,t,i)=>{var n=i(76585);e.exports=f,e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var i,n=[],s=0,o=0,a="",h=t&&t.delimiter||"/";null!=(i=r.exec(e));){var u=i[0],d=i[1],f=i.index;if(a+=e.slice(o,f),o=f+u.length,d)a+=d[1];else{var p=e[o],g=i[2],m=i[3],b=i[4],v=i[5],y=i[6],_=i[7];a&&(n.push(a),a="");var w=null!=g&&null!=p&&p!==g,S="+"===y||"*"===y,C="?"===y||"*"===y,x=i[2]||h,k=b||v;n.push({name:m||s++,prefix:g||"",delimiter:x,optional:C,repeat:S,partial:w,asterisk:!!_,pattern:k?c(k):_?".*":"[^"+l(x)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&n.push(a),n}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var i=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(i[r]=new RegExp("^(?:"+e[r].pattern+")$",u(t)));return function(t,r){for(var s="",a=t||{},l=(r||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var h=e[c];if("string"!=typeof h){var u,d=a[h.name];if(null==d){if(h.optional){h.partial&&(s+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(n(d)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(u=l(d[f]),!i[c].test(u))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(u)+"`");s+=(0===f?h.prefix:h.delimiter)+u}}else{if(u=h.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!i[c].test(u))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+u+'"');s+=h.prefix+u}}else s+=h}return s}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function h(e,t){return e.keys=t,e}function u(e){return e&&e.sensitive?"":"i"}function d(e,t,i){n(t)||(i=t||i,t=[]);for(var r=(i=i||{}).strict,s=!1!==i.end,o="",a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)o+=l(c);else{var d=l(c.prefix),f="(?:"+c.pattern+")";t.push(c),c.repeat&&(f+="(?:"+d+f+")*"),o+=f=c.optional?c.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=l(i.delimiter||"/"),g=o.slice(-p.length)===p;return r||(o=(g?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=s?"$":r&&g?"":"(?="+p+"|$)",h(new RegExp("^"+o,u(i)),t)}function f(e,t,i){return n(t)||(i=t||i,t=[]),i=i||{},e instanceof RegExp?function(e,t){var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(e,t)}(e,t):n(e)?function(e,t,i){for(var n=[],r=0;r<e.length;r++)n.push(f(e[r],t,i).source);return h(new RegExp("(?:"+n.join("|")+")",u(i)),t)}(e,t,i):function(e,t,i){return d(s(e,i),t,i)}(e,t,i)}},73054:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(64831);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},64831:function(e,t,i){"use strict";var n=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};Object.defineProperty(t,"__esModule",{value:!0});var r=i(67294);t.default=function(e){var t=e.src,i=e.checkForExisting,o=void 0!==i&&i,a=n(e,["src","checkForExisting"]),l=r.useState(Boolean(t)),c=l[0],h=l[1],u=r.useState(null),d=u[0],f=u[1];return r.useEffect((function(){if(s&&t){if(o)if(document.querySelectorAll('script[src="'+t+'"]').length>0)return void h(!1);var e=document.createElement("script");e.setAttribute("src",t),Object.keys(a).forEach((function(t){void 0===e[t]?e.setAttribute(t,a[t]):e[t]=a[t]}));var i=function(){h(!1)},n=function(e){f(e)};return e.addEventListener("load",i),e.addEventListener("error",n),document.body.appendChild(e),function(){e.removeEventListener("load",i),e.removeEventListener("error",n)}}}),[t]),[c,d]};var s="undefined"!=typeof window&&void 0!==window.document},5962:e=>{e.exports=["alignContent","MozAlignContent","WebkitAlignContent","MSAlignContent","OAlignContent","alignItems","MozAlignItems","WebkitAlignItems","MSAlignItems","OAlignItems","alignSelf","MozAlignSelf","WebkitAlignSelf","MSAlignSelf","OAlignSelf","all","MozAll","WebkitAll","MSAll","OAll","animation","MozAnimation","WebkitAnimation","MSAnimation","OAnimation","animationDelay","MozAnimationDelay","WebkitAnimationDelay","MSAnimationDelay","OAnimationDelay","animationDirection","MozAnimationDirection","WebkitAnimationDirection","MSAnimationDirection","OAnimationDirection","animationDuration","MozAnimationDuration","WebkitAnimationDuration","MSAnimationDuration","OAnimationDuration","animationFillMode","MozAnimationFillMode","WebkitAnimationFillMode","MSAnimationFillMode","OAnimationFillMode","animationIterationCount","MozAnimationIterationCount","WebkitAnimationIterationCount","MSAnimationIterationCount","OAnimationIterationCount","animationName","MozAnimationName","WebkitAnimationName","MSAnimationName","OAnimationName","animationPlayState","MozAnimationPlayState","WebkitAnimationPlayState","MSAnimationPlayState","OAnimationPlayState","animationTimingFunction","MozAnimationTimingFunction","WebkitAnimationTimingFunction","MSAnimationTimingFunction","OAnimationTimingFunction","backfaceVisibility","MozBackfaceVisibility","WebkitBackfaceVisibility","MSBackfaceVisibility","OBackfaceVisibility","background","MozBackground","WebkitBackground","MSBackground","OBackground","backgroundAttachment","MozBackgroundAttachment","WebkitBackgroundAttachment","MSBackgroundAttachment","OBackgroundAttachment","backgroundBlendMode","MozBackgroundBlendMode","WebkitBackgroundBlendMode","MSBackgroundBlendMode","OBackgroundBlendMode","backgroundClip","MozBackgroundClip","WebkitBackgroundClip","MSBackgroundClip","OBackgroundClip","backgroundColor","MozBackgroundColor","WebkitBackgroundColor","MSBackgroundColor","OBackgroundColor","backgroundImage","MozBackgroundImage","WebkitBackgroundImage","MSBackgroundImage","OBackgroundImage","backgroundOrigin","MozBackgroundOrigin","WebkitBackgroundOrigin","MSBackgroundOrigin","OBackgroundOrigin","backgroundPosition","MozBackgroundPosition","WebkitBackgroundPosition","MSBackgroundPosition","OBackgroundPosition","backgroundRepeat","MozBackgroundRepeat","WebkitBackgroundRepeat","MSBackgroundRepeat","OBackgroundRepeat","backgroundSize","MozBackgroundSize","WebkitBackgroundSize","MSBackgroundSize","OBackgroundSize","blockSize","MozBlockSize","WebkitBlockSize","MSBlockSize","OBlockSize","border","MozBorder","WebkitBorder","MSBorder","OBorder","borderBlockEnd","MozBorderBlockEnd","WebkitBorderBlockEnd","MSBorderBlockEnd","OBorderBlockEnd","borderBlockEndColor","MozBorderBlockEndColor","WebkitBorderBlockEndColor","MSBorderBlockEndColor","OBorderBlockEndColor","borderBlockEndStyle","MozBorderBlockEndStyle","WebkitBorderBlockEndStyle","MSBorderBlockEndStyle","OBorderBlockEndStyle","borderBlockEndWidth","MozBorderBlockEndWidth","WebkitBorderBlockEndWidth","MSBorderBlockEndWidth","OBorderBlockEndWidth","borderBlockStart","MozBorderBlockStart","WebkitBorderBlockStart","MSBorderBlockStart","OBorderBlockStart","borderBlockStartColor","MozBorderBlockStartColor","WebkitBorderBlockStartColor","MSBorderBlockStartColor","OBorderBlockStartColor","borderBlockStartStyle","MozBorderBlockStartStyle","WebkitBorderBlockStartStyle","MSBorderBlockStartStyle","OBorderBlockStartStyle","borderBlockStartWidth","MozBorderBlockStartWidth","WebkitBorderBlockStartWidth","MSBorderBlockStartWidth","OBorderBlockStartWidth","borderBottom","MozBorderBottom","WebkitBorderBottom","MSBorderBottom","OBorderBottom","borderBottomColor","MozBorderBottomColor","WebkitBorderBottomColor","MSBorderBottomColor","OBorderBottomColor","borderBottomLeftRadius","MozBorderBottomLeftRadius","WebkitBorderBottomLeftRadius","MSBorderBottomLeftRadius","OBorderBottomLeftRadius","borderBottomRightRadius","MozBorderBottomRightRadius","WebkitBorderBottomRightRadius","MSBorderBottomRightRadius","OBorderBottomRightRadius","borderBottomStyle","MozBorderBottomStyle","WebkitBorderBottomStyle","MSBorderBottomStyle","OBorderBottomStyle","borderBottomWidth","MozBorderBottomWidth","WebkitBorderBottomWidth","MSBorderBottomWidth","OBorderBottomWidth","borderCollapse","MozBorderCollapse","WebkitBorderCollapse","MSBorderCollapse","OBorderCollapse","borderColor","MozBorderColor","WebkitBorderColor","MSBorderColor","OBorderColor","borderImage","MozBorderImage","WebkitBorderImage","MSBorderImage","OBorderImage","borderImageOutset","MozBorderImageOutset","WebkitBorderImageOutset","MSBorderImageOutset","OBorderImageOutset","borderImageRepeat","MozBorderImageRepeat","WebkitBorderImageRepeat","MSBorderImageRepeat","OBorderImageRepeat","borderImageSlice","MozBorderImageSlice","WebkitBorderImageSlice","MSBorderImageSlice","OBorderImageSlice","borderImageSource","MozBorderImageSource","WebkitBorderImageSource","MSBorderImageSource","OBorderImageSource","borderImageWidth","MozBorderImageWidth","WebkitBorderImageWidth","MSBorderImageWidth","OBorderImageWidth","borderInlineEnd","MozBorderInlineEnd","WebkitBorderInlineEnd","MSBorderInlineEnd","OBorderInlineEnd","borderInlineEndColor","MozBorderInlineEndColor","WebkitBorderInlineEndColor","MSBorderInlineEndColor","OBorderInlineEndColor","borderInlineEndStyle","MozBorderInlineEndStyle","WebkitBorderInlineEndStyle","MSBorderInlineEndStyle","OBorderInlineEndStyle","borderInlineEndWidth","MozBorderInlineEndWidth","WebkitBorderInlineEndWidth","MSBorderInlineEndWidth","OBorderInlineEndWidth","borderInlineStart","MozBorderInlineStart","WebkitBorderInlineStart","MSBorderInlineStart","OBorderInlineStart","borderInlineStartColor","MozBorderInlineStartColor","WebkitBorderInlineStartColor","MSBorderInlineStartColor","OBorderInlineStartColor","borderInlineStartStyle","MozBorderInlineStartStyle","WebkitBorderInlineStartStyle","MSBorderInlineStartStyle","OBorderInlineStartStyle","borderInlineStartWidth","MozBorderInlineStartWidth","WebkitBorderInlineStartWidth","MSBorderInlineStartWidth","OBorderInlineStartWidth","borderLeft","MozBorderLeft","WebkitBorderLeft","MSBorderLeft","OBorderLeft","borderLeftColor","MozBorderLeftColor","WebkitBorderLeftColor","MSBorderLeftColor","OBorderLeftColor","borderLeftStyle","MozBorderLeftStyle","WebkitBorderLeftStyle","MSBorderLeftStyle","OBorderLeftStyle","borderLeftWidth","MozBorderLeftWidth","WebkitBorderLeftWidth","MSBorderLeftWidth","OBorderLeftWidth","borderRadius","MozBorderRadius","WebkitBorderRadius","MSBorderRadius","OBorderRadius","borderRight","MozBorderRight","WebkitBorderRight","MSBorderRight","OBorderRight","borderRightColor","MozBorderRightColor","WebkitBorderRightColor","MSBorderRightColor","OBorderRightColor","borderRightStyle","MozBorderRightStyle","WebkitBorderRightStyle","MSBorderRightStyle","OBorderRightStyle","borderRightWidth","MozBorderRightWidth","WebkitBorderRightWidth","MSBorderRightWidth","OBorderRightWidth","borderSpacing","MozBorderSpacing","WebkitBorderSpacing","MSBorderSpacing","OBorderSpacing","borderStyle","MozBorderStyle","WebkitBorderStyle","MSBorderStyle","OBorderStyle","borderTop","MozBorderTop","WebkitBorderTop","MSBorderTop","OBorderTop","borderTopColor","MozBorderTopColor","WebkitBorderTopColor","MSBorderTopColor","OBorderTopColor","borderTopLeftRadius","MozBorderTopLeftRadius","WebkitBorderTopLeftRadius","MSBorderTopLeftRadius","OBorderTopLeftRadius","borderTopRightRadius","MozBorderTopRightRadius","WebkitBorderTopRightRadius","MSBorderTopRightRadius","OBorderTopRightRadius","borderTopStyle","MozBorderTopStyle","WebkitBorderTopStyle","MSBorderTopStyle","OBorderTopStyle","borderTopWidth","MozBorderTopWidth","WebkitBorderTopWidth","MSBorderTopWidth","OBorderTopWidth","borderWidth","MozBorderWidth","WebkitBorderWidth","MSBorderWidth","OBorderWidth","bottom","MozBottom","WebkitBottom","MSBottom","OBottom","boxDecorationBreak","MozBoxDecorationBreak","WebkitBoxDecorationBreak","MSBoxDecorationBreak","OBoxDecorationBreak","boxShadow","MozBoxShadow","WebkitBoxShadow","MSBoxShadow","OBoxShadow","boxSizing","MozBoxSizing","WebkitBoxSizing","MSBoxSizing","OBoxSizing","breakAfter","MozBreakAfter","WebkitBreakAfter","MSBreakAfter","OBreakAfter","breakBefore","MozBreakBefore","WebkitBreakBefore","MSBreakBefore","OBreakBefore","breakInside","MozBreakInside","WebkitBreakInside","MSBreakInside","OBreakInside","captionSide","MozCaptionSide","WebkitCaptionSide","MSCaptionSide","OCaptionSide","caretColor","MozCaretColor","WebkitCaretColor","MSCaretColor","OCaretColor","ch","MozCh","WebkitCh","MSCh","OCh","clear","MozClear","WebkitClear","MSClear","OClear","clip","MozClip","WebkitClip","MSClip","OClip","clipPath","MozClipPath","WebkitClipPath","MSClipPath","OClipPath","cm","MozCm","WebkitCm","MSCm","OCm","color","MozColor","WebkitColor","MSColor","OColor","columnCount","MozColumnCount","WebkitColumnCount","MSColumnCount","OColumnCount","columnFill","MozColumnFill","WebkitColumnFill","MSColumnFill","OColumnFill","columnGap","MozColumnGap","WebkitColumnGap","MSColumnGap","OColumnGap","columnRule","MozColumnRule","WebkitColumnRule","MSColumnRule","OColumnRule","columnRuleColor","MozColumnRuleColor","WebkitColumnRuleColor","MSColumnRuleColor","OColumnRuleColor","columnRuleStyle","MozColumnRuleStyle","WebkitColumnRuleStyle","MSColumnRuleStyle","OColumnRuleStyle","columnRuleWidth","MozColumnRuleWidth","WebkitColumnRuleWidth","MSColumnRuleWidth","OColumnRuleWidth","columnSpan","MozColumnSpan","WebkitColumnSpan","MSColumnSpan","OColumnSpan","columnWidth","MozColumnWidth","WebkitColumnWidth","MSColumnWidth","OColumnWidth","columns","MozColumns","WebkitColumns","MSColumns","OColumns","content","MozContent","WebkitContent","MSContent","OContent","counterIncrement","MozCounterIncrement","WebkitCounterIncrement","MSCounterIncrement","OCounterIncrement","counterReset","MozCounterReset","WebkitCounterReset","MSCounterReset","OCounterReset","cursor","MozCursor","WebkitCursor","MSCursor","OCursor","deg","MozDeg","WebkitDeg","MSDeg","ODeg","direction","MozDirection","WebkitDirection","MSDirection","ODirection","display","MozDisplay","WebkitDisplay","MSDisplay","ODisplay","dpcm","MozDpcm","WebkitDpcm","MSDpcm","ODpcm","dpi","MozDpi","WebkitDpi","MSDpi","ODpi","dppx","MozDppx","WebkitDppx","MSDppx","ODppx","em","MozEm","WebkitEm","MSEm","OEm","emptyCells","MozEmptyCells","WebkitEmptyCells","MSEmptyCells","OEmptyCells","ex","MozEx","WebkitEx","MSEx","OEx","filter","MozFilter","WebkitFilter","MSFilter","OFilter","flexBasis","MozFlexBasis","WebkitFlexBasis","MSFlexBasis","OFlexBasis","flexDirection","MozFlexDirection","WebkitFlexDirection","MSFlexDirection","OFlexDirection","flexFlow","MozFlexFlow","WebkitFlexFlow","MSFlexFlow","OFlexFlow","flexGrow","MozFlexGrow","WebkitFlexGrow","MSFlexGrow","OFlexGrow","flexShrink","MozFlexShrink","WebkitFlexShrink","MSFlexShrink","OFlexShrink","flexWrap","MozFlexWrap","WebkitFlexWrap","MSFlexWrap","OFlexWrap","float","MozFloat","WebkitFloat","MSFloat","OFloat","font","MozFont","WebkitFont","MSFont","OFont","fontFamily","MozFontFamily","WebkitFontFamily","MSFontFamily","OFontFamily","fontFeatureSettings","MozFontFeatureSettings","WebkitFontFeatureSettings","MSFontFeatureSettings","OFontFeatureSettings","fontKerning","MozFontKerning","WebkitFontKerning","MSFontKerning","OFontKerning","fontLanguageOverride","MozFontLanguageOverride","WebkitFontLanguageOverride","MSFontLanguageOverride","OFontLanguageOverride","fontSize","MozFontSize","WebkitFontSize","MSFontSize","OFontSize","fontSizeAdjust","MozFontSizeAdjust","WebkitFontSizeAdjust","MSFontSizeAdjust","OFontSizeAdjust","fontStretch","MozFontStretch","WebkitFontStretch","MSFontStretch","OFontStretch","fontStyle","MozFontStyle","WebkitFontStyle","MSFontStyle","OFontStyle","fontSynthesis","MozFontSynthesis","WebkitFontSynthesis","MSFontSynthesis","OFontSynthesis","fontVariant","MozFontVariant","WebkitFontVariant","MSFontVariant","OFontVariant","fontVariantAlternates","MozFontVariantAlternates","WebkitFontVariantAlternates","MSFontVariantAlternates","OFontVariantAlternates","fontVariantCaps","MozFontVariantCaps","WebkitFontVariantCaps","MSFontVariantCaps","OFontVariantCaps","fontVariantEastAsian","MozFontVariantEastAsian","WebkitFontVariantEastAsian","MSFontVariantEastAsian","OFontVariantEastAsian","fontVariantLigatures","MozFontVariantLigatures","WebkitFontVariantLigatures","MSFontVariantLigatures","OFontVariantLigatures","fontVariantNumeric","MozFontVariantNumeric","WebkitFontVariantNumeric","MSFontVariantNumeric","OFontVariantNumeric","fontVariantPosition","MozFontVariantPosition","WebkitFontVariantPosition","MSFontVariantPosition","OFontVariantPosition","fontWeight","MozFontWeight","WebkitFontWeight","MSFontWeight","OFontWeight","fr","MozFr","WebkitFr","MSFr","OFr","grad","MozGrad","WebkitGrad","MSGrad","OGrad","grid","MozGrid","WebkitGrid","MSGrid","OGrid","gridArea","MozGridArea","WebkitGridArea","MSGridArea","OGridArea","gridAutoColumns","MozGridAutoColumns","WebkitGridAutoColumns","MSGridAutoColumns","OGridAutoColumns","gridAutoFlow","MozGridAutoFlow","WebkitGridAutoFlow","MSGridAutoFlow","OGridAutoFlow","gridAutoRows","MozGridAutoRows","WebkitGridAutoRows","MSGridAutoRows","OGridAutoRows","gridColumn","MozGridColumn","WebkitGridColumn","MSGridColumn","OGridColumn","gridColumnEnd","MozGridColumnEnd","WebkitGridColumnEnd","MSGridColumnEnd","OGridColumnEnd","gridColumnGap","MozGridColumnGap","WebkitGridColumnGap","MSGridColumnGap","OGridColumnGap","gridColumnStart","MozGridColumnStart","WebkitGridColumnStart","MSGridColumnStart","OGridColumnStart","gridGap","MozGridGap","WebkitGridGap","MSGridGap","OGridGap","gridRow","MozGridRow","WebkitGridRow","MSGridRow","OGridRow","gridRowEnd","MozGridRowEnd","WebkitGridRowEnd","MSGridRowEnd","OGridRowEnd","gridRowGap","MozGridRowGap","WebkitGridRowGap","MSGridRowGap","OGridRowGap","gridRowStart","MozGridRowStart","WebkitGridRowStart","MSGridRowStart","OGridRowStart","gridTemplate","MozGridTemplate","WebkitGridTemplate","MSGridTemplate","OGridTemplate","gridTemplateAreas","MozGridTemplateAreas","WebkitGridTemplateAreas","MSGridTemplateAreas","OGridTemplateAreas","gridTemplateColumns","MozGridTemplateColumns","WebkitGridTemplateColumns","MSGridTemplateColumns","OGridTemplateColumns","gridTemplateRows","MozGridTemplateRows","WebkitGridTemplateRows","MSGridTemplateRows","OGridTemplateRows","height","MozHeight","WebkitHeight","MSHeight","OHeight","hyphens","MozHyphens","WebkitHyphens","MSHyphens","OHyphens","hz","MozHz","WebkitHz","MSHz","OHz","imageOrientation","MozImageOrientation","WebkitImageOrientation","MSImageOrientation","OImageOrientation","imageRendering","MozImageRendering","WebkitImageRendering","MSImageRendering","OImageRendering","imageResolution","MozImageResolution","WebkitImageResolution","MSImageResolution","OImageResolution","imeMode","MozImeMode","WebkitImeMode","MSImeMode","OImeMode","in","MozIn","WebkitIn","MSIn","OIn","inherit","MozInherit","WebkitInherit","MSInherit","OInherit","initial","MozInitial","WebkitInitial","MSInitial","OInitial","inlineSize","MozInlineSize","WebkitInlineSize","MSInlineSize","OInlineSize","isolation","MozIsolation","WebkitIsolation","MSIsolation","OIsolation","justifyContent","MozJustifyContent","WebkitJustifyContent","MSJustifyContent","OJustifyContent","khz","MozKhz","WebkitKhz","MSKhz","OKhz","left","MozLeft","WebkitLeft","MSLeft","OLeft","letterSpacing","MozLetterSpacing","WebkitLetterSpacing","MSLetterSpacing","OLetterSpacing","lineBreak","MozLineBreak","WebkitLineBreak","MSLineBreak","OLineBreak","lineHeight","MozLineHeight","WebkitLineHeight","MSLineHeight","OLineHeight","listStyle","MozListStyle","WebkitListStyle","MSListStyle","OListStyle","listStyleImage","MozListStyleImage","WebkitListStyleImage","MSListStyleImage","OListStyleImage","listStylePosition","MozListStylePosition","WebkitListStylePosition","MSListStylePosition","OListStylePosition","listStyleType","MozListStyleType","WebkitListStyleType","MSListStyleType","OListStyleType","margin","MozMargin","WebkitMargin","MSMargin","OMargin","marginBlockEnd","MozMarginBlockEnd","WebkitMarginBlockEnd","MSMarginBlockEnd","OMarginBlockEnd","marginBlockStart","MozMarginBlockStart","WebkitMarginBlockStart","MSMarginBlockStart","OMarginBlockStart","marginBottom","MozMarginBottom","WebkitMarginBottom","MSMarginBottom","OMarginBottom","marginInlineEnd","MozMarginInlineEnd","WebkitMarginInlineEnd","MSMarginInlineEnd","OMarginInlineEnd","marginInlineStart","MozMarginInlineStart","WebkitMarginInlineStart","MSMarginInlineStart","OMarginInlineStart","marginLeft","MozMarginLeft","WebkitMarginLeft","MSMarginLeft","OMarginLeft","marginRight","MozMarginRight","WebkitMarginRight","MSMarginRight","OMarginRight","marginTop","MozMarginTop","WebkitMarginTop","MSMarginTop","OMarginTop","mask","MozMask","WebkitMask","MSMask","OMask","maskClip","MozMaskClip","WebkitMaskClip","MSMaskClip","OMaskClip","maskComposite","MozMaskComposite","WebkitMaskComposite","MSMaskComposite","OMaskComposite","maskImage","MozMaskImage","WebkitMaskImage","MSMaskImage","OMaskImage","maskMode","MozMaskMode","WebkitMaskMode","MSMaskMode","OMaskMode","maskOrigin","MozMaskOrigin","WebkitMaskOrigin","MSMaskOrigin","OMaskOrigin","maskPosition","MozMaskPosition","WebkitMaskPosition","MSMaskPosition","OMaskPosition","maskRepeat","MozMaskRepeat","WebkitMaskRepeat","MSMaskRepeat","OMaskRepeat","maskSize","MozMaskSize","WebkitMaskSize","MSMaskSize","OMaskSize","maskType","MozMaskType","WebkitMaskType","MSMaskType","OMaskType","maxHeight","MozMaxHeight","WebkitMaxHeight","MSMaxHeight","OMaxHeight","maxWidth","MozMaxWidth","WebkitMaxWidth","MSMaxWidth","OMaxWidth","minBlockSize","MozMinBlockSize","WebkitMinBlockSize","MSMinBlockSize","OMinBlockSize","minHeight","MozMinHeight","WebkitMinHeight","MSMinHeight","OMinHeight","minInlineSize","MozMinInlineSize","WebkitMinInlineSize","MSMinInlineSize","OMinInlineSize","minWidth","MozMinWidth","WebkitMinWidth","MSMinWidth","OMinWidth","mixBlendMode","MozMixBlendMode","WebkitMixBlendMode","MSMixBlendMode","OMixBlendMode","mm","MozMm","WebkitMm","MSMm","OMm","ms","MozMs","WebkitMs","MSMs","OMs","objectFit","MozObjectFit","WebkitObjectFit","MSObjectFit","OObjectFit","objectPosition","MozObjectPosition","WebkitObjectPosition","MSObjectPosition","OObjectPosition","offsetBlockEnd","MozOffsetBlockEnd","WebkitOffsetBlockEnd","MSOffsetBlockEnd","OOffsetBlockEnd","offsetBlockStart","MozOffsetBlockStart","WebkitOffsetBlockStart","MSOffsetBlockStart","OOffsetBlockStart","offsetInlineEnd","MozOffsetInlineEnd","WebkitOffsetInlineEnd","MSOffsetInlineEnd","OOffsetInlineEnd","offsetInlineStart","MozOffsetInlineStart","WebkitOffsetInlineStart","MSOffsetInlineStart","OOffsetInlineStart","opacity","MozOpacity","WebkitOpacity","MSOpacity","OOpacity","order","MozOrder","WebkitOrder","MSOrder","OOrder","orphans","MozOrphans","WebkitOrphans","MSOrphans","OOrphans","outline","MozOutline","WebkitOutline","MSOutline","OOutline","outlineColor","MozOutlineColor","WebkitOutlineColor","MSOutlineColor","OOutlineColor","outlineOffset","MozOutlineOffset","WebkitOutlineOffset","MSOutlineOffset","OOutlineOffset","outlineStyle","MozOutlineStyle","WebkitOutlineStyle","MSOutlineStyle","OOutlineStyle","outlineWidth","MozOutlineWidth","WebkitOutlineWidth","MSOutlineWidth","OOutlineWidth","overflow","MozOverflow","WebkitOverflow","MSOverflow","OOverflow","overflowWrap","MozOverflowWrap","WebkitOverflowWrap","MSOverflowWrap","OOverflowWrap","overflowX","MozOverflowX","WebkitOverflowX","MSOverflowX","OOverflowX","overflowY","MozOverflowY","WebkitOverflowY","MSOverflowY","OOverflowY","padding","MozPadding","WebkitPadding","MSPadding","OPadding","paddingBlockEnd","MozPaddingBlockEnd","WebkitPaddingBlockEnd","MSPaddingBlockEnd","OPaddingBlockEnd","paddingBlockStart","MozPaddingBlockStart","WebkitPaddingBlockStart","MSPaddingBlockStart","OPaddingBlockStart","paddingBottom","MozPaddingBottom","WebkitPaddingBottom","MSPaddingBottom","OPaddingBottom","paddingInlineEnd","MozPaddingInlineEnd","WebkitPaddingInlineEnd","MSPaddingInlineEnd","OPaddingInlineEnd","paddingInlineStart","MozPaddingInlineStart","WebkitPaddingInlineStart","MSPaddingInlineStart","OPaddingInlineStart","paddingLeft","MozPaddingLeft","WebkitPaddingLeft","MSPaddingLeft","OPaddingLeft","paddingRight","MozPaddingRight","WebkitPaddingRight","MSPaddingRight","OPaddingRight","paddingTop","MozPaddingTop","WebkitPaddingTop","MSPaddingTop","OPaddingTop","pageBreakAfter","MozPageBreakAfter","WebkitPageBreakAfter","MSPageBreakAfter","OPageBreakAfter","pageBreakBefore","MozPageBreakBefore","WebkitPageBreakBefore","MSPageBreakBefore","OPageBreakBefore","pageBreakInside","MozPageBreakInside","WebkitPageBreakInside","MSPageBreakInside","OPageBreakInside","pc","MozPc","WebkitPc","MSPc","OPc","perspective","MozPerspective","WebkitPerspective","MSPerspective","OPerspective","perspectiveOrigin","MozPerspectiveOrigin","WebkitPerspectiveOrigin","MSPerspectiveOrigin","OPerspectiveOrigin","pointerEvents","MozPointerEvents","WebkitPointerEvents","MSPointerEvents","OPointerEvents","position","MozPosition","WebkitPosition","MSPosition","OPosition","pt","MozPt","WebkitPt","MSPt","OPt","px","MozPx","WebkitPx","MSPx","OPx","q","MozQ","WebkitQ","MSQ","OQ","quotes","MozQuotes","WebkitQuotes","MSQuotes","OQuotes","rad","MozRad","WebkitRad","MSRad","ORad","rem","MozRem","WebkitRem","MSRem","ORem","resize","MozResize","WebkitResize","MSResize","OResize","revert","MozRevert","WebkitRevert","MSRevert","ORevert","right","MozRight","WebkitRight","MSRight","ORight","rubyAlign","MozRubyAlign","WebkitRubyAlign","MSRubyAlign","ORubyAlign","rubyMerge","MozRubyMerge","WebkitRubyMerge","MSRubyMerge","ORubyMerge","rubyPosition","MozRubyPosition","WebkitRubyPosition","MSRubyPosition","ORubyPosition","s","MozS","WebkitS","MSS","OS","scrollBehavior","MozScrollBehavior","WebkitScrollBehavior","MSScrollBehavior","OScrollBehavior","scrollSnapCoordinate","MozScrollSnapCoordinate","WebkitScrollSnapCoordinate","MSScrollSnapCoordinate","OScrollSnapCoordinate","scrollSnapDestination","MozScrollSnapDestination","WebkitScrollSnapDestination","MSScrollSnapDestination","OScrollSnapDestination","scrollSnapType","MozScrollSnapType","WebkitScrollSnapType","MSScrollSnapType","OScrollSnapType","shapeImageThreshold","MozShapeImageThreshold","WebkitShapeImageThreshold","MSShapeImageThreshold","OShapeImageThreshold","shapeMargin","MozShapeMargin","WebkitShapeMargin","MSShapeMargin","OShapeMargin","shapeOutside","MozShapeOutside","WebkitShapeOutside","MSShapeOutside","OShapeOutside","tabSize","MozTabSize","WebkitTabSize","MSTabSize","OTabSize","tableLayout","MozTableLayout","WebkitTableLayout","MSTableLayout","OTableLayout","textAlign","MozTextAlign","WebkitTextAlign","MSTextAlign","OTextAlign","textAlignLast","MozTextAlignLast","WebkitTextAlignLast","MSTextAlignLast","OTextAlignLast","textCombineUpright","MozTextCombineUpright","WebkitTextCombineUpright","MSTextCombineUpright","OTextCombineUpright","textDecoration","MozTextDecoration","WebkitTextDecoration","MSTextDecoration","OTextDecoration","textDecorationColor","MozTextDecorationColor","WebkitTextDecorationColor","MSTextDecorationColor","OTextDecorationColor","textDecorationLine","MozTextDecorationLine","WebkitTextDecorationLine","MSTextDecorationLine","OTextDecorationLine","textDecorationStyle","MozTextDecorationStyle","WebkitTextDecorationStyle","MSTextDecorationStyle","OTextDecorationStyle","textEmphasis","MozTextEmphasis","WebkitTextEmphasis","MSTextEmphasis","OTextEmphasis","textEmphasisColor","MozTextEmphasisColor","WebkitTextEmphasisColor","MSTextEmphasisColor","OTextEmphasisColor","textEmphasisPosition","MozTextEmphasisPosition","WebkitTextEmphasisPosition","MSTextEmphasisPosition","OTextEmphasisPosition","textEmphasisStyle","MozTextEmphasisStyle","WebkitTextEmphasisStyle","MSTextEmphasisStyle","OTextEmphasisStyle","textIndent","MozTextIndent","WebkitTextIndent","MSTextIndent","OTextIndent","textOrientation","MozTextOrientation","WebkitTextOrientation","MSTextOrientation","OTextOrientation","textOverflow","MozTextOverflow","WebkitTextOverflow","MSTextOverflow","OTextOverflow","textRendering","MozTextRendering","WebkitTextRendering","MSTextRendering","OTextRendering","textShadow","MozTextShadow","WebkitTextShadow","MSTextShadow","OTextShadow","textTransform","MozTextTransform","WebkitTextTransform","MSTextTransform","OTextTransform","textUnderlinePosition","MozTextUnderlinePosition","WebkitTextUnderlinePosition","MSTextUnderlinePosition","OTextUnderlinePosition","top","MozTop","WebkitTop","MSTop","OTop","touchAction","MozTouchAction","WebkitTouchAction","MSTouchAction","OTouchAction","transform","MozTransform","WebkitTransform","msTransform","OTransform","transformBox","MozTransformBox","WebkitTransformBox","MSTransformBox","OTransformBox","transformOrigin","MozTransformOrigin","WebkitTransformOrigin","MSTransformOrigin","OTransformOrigin","transformStyle","MozTransformStyle","WebkitTransformStyle","MSTransformStyle","OTransformStyle","transition","MozTransition","WebkitTransition","MSTransition","OTransition","transitionDelay","MozTransitionDelay","WebkitTransitionDelay","MSTransitionDelay","OTransitionDelay","transitionDuration","MozTransitionDuration","WebkitTransitionDuration","MSTransitionDuration","OTransitionDuration","transitionProperty","MozTransitionProperty","WebkitTransitionProperty","MSTransitionProperty","OTransitionProperty","transitionTimingFunction","MozTransitionTimingFunction","WebkitTransitionTimingFunction","MSTransitionTimingFunction","OTransitionTimingFunction","turn","MozTurn","WebkitTurn","MSTurn","OTurn","unicodeBidi","MozUnicodeBidi","WebkitUnicodeBidi","MSUnicodeBidi","OUnicodeBidi","unset","MozUnset","WebkitUnset","MSUnset","OUnset","verticalAlign","MozVerticalAlign","WebkitVerticalAlign","MSVerticalAlign","OVerticalAlign","vh","MozVh","WebkitVh","MSVh","OVh","visibility","MozVisibility","WebkitVisibility","MSVisibility","OVisibility","vmax","MozVmax","WebkitVmax","MSVmax","OVmax","vmin","MozVmin","WebkitVmin","MSVmin","OVmin","vw","MozVw","WebkitVw","MSVw","OVw","whiteSpace","MozWhiteSpace","WebkitWhiteSpace","MSWhiteSpace","OWhiteSpace","widows","MozWidows","WebkitWidows","MSWidows","OWidows","width","MozWidth","WebkitWidth","MSWidth","OWidth","willChange","MozWillChange","WebkitWillChange","MSWillChange","OWillChange","wordBreak","MozWordBreak","WebkitWordBreak","MSWordBreak","OWordBreak","wordSpacing","MozWordSpacing","WebkitWordSpacing","MSWordSpacing","OWordSpacing","wordWrap","MozWordWrap","WebkitWordWrap","MSWordWrap","OWordWrap","writingMode","MozWritingMode","WebkitWritingMode","MSWritingMode","OWritingMode","zIndex","MozZIndex","WebkitZIndex","MSZIndex","OZIndex","fontSize","MozFontSize","WebkitFontSize","MSFontSize","OFontSize","flex","MozFlex","WebkitFlex","MSFlex","OFlex","fr","MozFr","WebkitFr","MSFr","OFr","overflowScrolling","MozOverflowScrolling","WebkitOverflowScrolling","MSOverflowScrolling","OOverflowScrolling","userSelect","MozUserSelect","WebkitUserSelect","MSUserSelect","OUserSelect"]},97262:(e,t,i)=>{var n=i(5962),r=i(45697);e.exports=function(e,t,i){var r=e[t];if(r){var s=[];if(Object.keys(r).forEach((function(e){-1===n.indexOf(e)&&s.push(e)})),s.length)throw new Error("Prop "+t+" passed to "+i+". Has invalid keys "+s.join(", "))}},e.exports.isRequired=function(t,i,n){if(!t[i])throw new Error("Prop "+i+" passed to "+n+" is required");return e.exports(t,i,n)},e.exports.supportingArrays=r.oneOfType([r.arrayOf(e.exports),e.exports])},72408:(e,t,i)=>{"use strict";var n=i(27418),r=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,l=60112;t.Suspense=60113;var c=60115,h=60116;if("function"==typeof Symbol&&Symbol.for){var u=Symbol.for;r=u("react.element"),s=u("react.portal"),t.Fragment=u("react.fragment"),t.StrictMode=u("react.strict_mode"),t.Profiler=u("react.profiler"),o=u("react.provider"),a=u("react.context"),l=u("react.forward_ref"),t.Suspense=u("react.suspense"),c=u("react.memo"),h=u("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function m(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||p}function b(){}function v(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=m.prototype;var y=v.prototype=new b;y.constructor=v,n(y,m.prototype),y.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,i){var n,s={},o=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,n)&&!S.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===s[n]&&(s[n]=l[n]);return{$$typeof:r,type:e,key:o,ref:a,props:s,_owner:_.current}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var k=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,n,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case s:l=!0}}if(l)return o=o(l=e),e=""===n?"."+E(l,0):n,Array.isArray(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),T(o,t,i,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var h=n+E(a=e[c],c);l+=T(a,t,i,h,o)}else if("function"==typeof(h=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=h.call(e),c=0;!(a=e.next()).done;)l+=T(a=a.value,t,i,h=n+E(a,c++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function L(e,t,i){if(null==e)return e;var n=[],r=0;return T(e,n,"","",(function(e){return t.call(i,e,r++)})),n}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var M={current:null};function O(){var e=M.current;if(null===e)throw Error(f(321));return e}var D={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:L,forEach:function(e,t,i){L(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error(f(143));return e}},t.Component=m,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,i){if(null==e)throw Error(f(267,e));var s=n({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(h in t)w.call(t,h)&&!S.hasOwnProperty(h)&&(s[h]=void 0===t[h]&&void 0!==c?c[h]:t[h])}var h=arguments.length-2;if(1===h)s.children=i;else if(1<h){c=Array(h);for(var u=0;u<h;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:r,type:e.type,key:o,ref:a,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return O().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,i){return O().useReducer(e,t,i)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.1"},67294:(e,t,i)=>{"use strict";e.exports=i(72408)},94500:function(e,t){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function i(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function n(e,t,i){n.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:i,enumerable:!0})}function r(e,t){r.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function s(e,t){s.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function o(e,t,i){o.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:i,enumerable:!0})}function a(e,t,i){var n=e.slice((i||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function l(e){var t=void 0===e?"undefined":N(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,i,h,u,d,f){f=f||[];var p=(u=u||[]).slice(0);if(void 0!==d){if(h){if("function"==typeof h&&h(p,d))return;if("object"===(void 0===h?"undefined":N(h))){if(h.prefilter&&h.prefilter(p,d))return;if(h.normalize){var g=h.normalize(p,d,e,t);g&&(e=g[0],t=g[1])}}}p.push(d)}"regexp"===l(e)&&"regexp"===l(t)&&(e=e.toString(),t=t.toString());var m=void 0===e?"undefined":N(e),b=void 0===t?"undefined":N(t),v="undefined"!==m||f&&f[f.length-1].lhs&&f[f.length-1].lhs.hasOwnProperty(d),y="undefined"!==b||f&&f[f.length-1].rhs&&f[f.length-1].rhs.hasOwnProperty(d);if(!v&&y)i(new r(p,t));else if(!y&&v)i(new s(p,e));else if(l(e)!==l(t))i(new n(p,e,t));else if("date"===l(e)&&e-t!=0)i(new n(p,e,t));else if("object"===m&&null!==e&&null!==t)if(f.filter((function(t){return t.lhs===e})).length)e!==t&&i(new n(p,e,t));else{if(f.push({lhs:e,rhs:t}),Array.isArray(e)){var _;for(e.length,_=0;_<e.length;_++)_>=t.length?i(new o(p,_,new s(void 0,e[_]))):c(e[_],t[_],i,h,p,_,f);for(;_<t.length;)i(new o(p,_,new r(void 0,t[_++])))}else{var w=Object.keys(e),S=Object.keys(t);w.forEach((function(n,r){var s=S.indexOf(n);s>=0?(c(e[n],t[n],i,h,p,n,f),S=a(S,s)):c(e[n],void 0,i,h,p,n,f)})),S.forEach((function(e){c(void 0,t[e],i,h,p,e,f)}))}f.length=f.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||i(new n(p,e,t)))}function h(e,t,i,n){return n=n||[],c(e,t,(function(e){e&&n.push(e)}),i),n.length?n:void 0}function u(e,t,i){if(i.path&&i.path.length){var n,r=e[t],s=i.path.length-1;for(n=0;n<s;n++)r=r[i.path[n]];switch(i.kind){case"A":u(r[i.path[n]],i.index,i.item);break;case"D":delete r[i.path[n]];break;case"E":case"N":r[i.path[n]]=i.rhs}}else switch(i.kind){case"A":u(e[t],i.index,i.item);break;case"D":e=a(e,t);break;case"E":case"N":e[t]=i.rhs}return e}function d(e,t,i){if(e&&t&&i&&i.kind){for(var n=e,r=-1,s=i.path?i.path.length-1:0;++r<s;)void 0===n[i.path[r]]&&(n[i.path[r]]="number"==typeof i.path[r]?[]:{}),n=n[i.path[r]];switch(i.kind){case"A":u(i.path?n[i.path[r]]:n,i.index,i.item);break;case"D":delete n[i.path[r]];break;case"E":case"N":n[i.path[r]]=i.rhs}}}function f(e,t,i){if(i.path&&i.path.length){var n,r=e[t],s=i.path.length-1;for(n=0;n<s;n++)r=r[i.path[n]];switch(i.kind){case"A":f(r[i.path[n]],i.index,i.item);break;case"D":case"E":r[i.path[n]]=i.lhs;break;case"N":delete r[i.path[n]]}}else switch(i.kind){case"A":f(e[t],i.index,i.item);break;case"D":case"E":e[t]=i.lhs;break;case"N":e=a(e,t)}return e}function p(e,t,i){if(e&&t&&i&&i.kind){var n,r,s=e;for(r=i.path.length-1,n=0;n<r;n++)void 0===s[i.path[n]]&&(s[i.path[n]]={}),s=s[i.path[n]];switch(i.kind){case"A":f(s[i.path[n]],i.index,i.item);break;case"D":case"E":s[i.path[n]]=i.lhs;break;case"N":delete s[i.path[n]]}}}function g(e,t,i){e&&t&&c(e,t,(function(n){i&&!i(e,t,n)||d(e,t,n)}))}function m(e){return"color: "+D[e].color+"; font-weight: bold"}function b(e){var t=e.kind,i=e.path,n=e.lhs,r=e.rhs,s=e.index,o=e.item;switch(t){case"E":return[i.join("."),n,"",r];case"N":return[i.join("."),r];case"D":return[i.join(".")];case"A":return[i.join(".")+"["+s+"]",o];default:return[]}}function v(e,t,i,n){var r=h(e,t);try{n?i.groupCollapsed("diff"):i.group("diff")}catch(e){i.log("diff")}r?r.forEach((function(e){var t=e.kind,n=b(e);i.log.apply(i,["%c "+D[t].text,m(t)].concat(M(n)))})):i.log(" no diff ");try{i.groupEnd()}catch(e){i.log(" diff end  ")}}function y(e,t,i,n){switch(void 0===e?"undefined":N(e)){case"object":return"function"==typeof e[n]?e[n].apply(e,M(i)):e[n];case"function":return e(t);default:return e}}function _(e){var t=e.timestamp,i=e.duration;return function(e,n,r){var s=["action"];return s.push("%c"+String(e.type)),t&&s.push("%c@ "+n),i&&s.push("%c(in "+r.toFixed(2)+" ms)"),s.join(" ")}}function w(e,t){var i=t.logger,n=t.actionTransformer,r=t.titleFormatter,s=void 0===r?_(t):r,o=t.collapsed,a=t.colors,l=t.level,c=t.diff,h=void 0===t.titleFormatter;e.forEach((function(r,u){var d=r.started,f=r.startedTime,p=r.action,g=r.prevState,m=r.error,b=r.took,_=r.nextState,w=e[u+1];w&&(_=w.prevState,b=w.started-d);var S=n(p),C="function"==typeof o?o((function(){return _}),p,r):o,x=T(f),k=a.title?"color: "+a.title(S)+";":"",E=["color: gray; font-weight: lighter;"];E.push(k),t.timestamp&&E.push("color: gray; font-weight: lighter;"),t.duration&&E.push("color: gray; font-weight: lighter;");var L=s(S,x,b);try{C?a.title&&h?i.groupCollapsed.apply(i,["%c "+L].concat(E)):i.groupCollapsed(L):a.title&&h?i.group.apply(i,["%c "+L].concat(E)):i.group(L)}catch(e){i.log(L)}var N=y(l,S,[g],"prevState"),M=y(l,S,[S],"action"),O=y(l,S,[m,g],"error"),D=y(l,S,[_],"nextState");if(N)if(a.prevState){var I="color: "+a.prevState(g)+"; font-weight: bold";i[N]("%c prev state",I,g)}else i[N]("prev state",g);if(M)if(a.action){var A="color: "+a.action(S)+"; font-weight: bold";i[M]("%c action    ",A,S)}else i[M]("action    ",S);if(m&&O)if(a.error){var P="color: "+a.error(m,g)+"; font-weight: bold;";i[O]("%c error     ",P,m)}else i[O]("error     ",m);if(D)if(a.nextState){var R="color: "+a.nextState(_)+"; font-weight: bold";i[D]("%c next state",R,_)}else i[D]("next state",_);c&&v(g,_,i,C);try{i.groupEnd()}catch(e){i.log(" log end ")}}))}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},I,e),i=t.logger,n=t.stateTransformer,r=t.errorTransformer,s=t.predicate,o=t.logErrors,a=t.diffPredicate;if(void 0===i)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var l=[];return function(e){var i=e.getState;return function(e){return function(c){if("function"==typeof s&&!s(i,c))return e(c);var h={};l.push(h),h.started=L.now(),h.startedTime=new Date,h.prevState=n(i()),h.action=c;var u=void 0;if(o)try{u=e(c)}catch(e){h.error=r(e)}else u=e(c);h.took=L.now()-h.started,h.nextState=n(i());var d=t.diff&&"function"==typeof a?a(i,c):t.diff;if(w(l,Object.assign({},t,{diff:d})),l.length=0,h.error)throw h.error;return u}}}}var C,x,k=function(e,t){return new Array(t+1).join(e)},E=function(e,t){return k("0",t-e.toString().length)+e},T=function(e){return E(e.getHours(),2)+":"+E(e.getMinutes(),2)+":"+E(e.getSeconds(),2)+"."+E(e.getMilliseconds(),3)},L="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)},O=[];C="object"===("undefined"==typeof global?"undefined":N(global))&&global?global:"undefined"!=typeof window?window:{},(x=C.DeepDiff)&&O.push((function(){void 0!==x&&C.DeepDiff===h&&(C.DeepDiff=x,x=void 0)})),t(n,i),t(r,i),t(s,i),t(o,i),Object.defineProperties(h,{diff:{value:h,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:g,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:p,enumerable:!0},isConflict:{value:function(){return void 0!==x},enumerable:!0},noConflict:{value:function(){return O&&(O.forEach((function(e){e()})),O=null),h},enumerable:!0}});var D={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},I={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,i=e.getState;return"function"==typeof t||"function"==typeof i?S()({dispatch:t,getState:i}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=I,e.createLogger=S,e.logger=A,e.default=A,Object.defineProperty(e,"__esModule",{value:!0})}(t)},23488:(e,t,i)=>{"use strict";t.__esModule=!0,t.default=function(e){var t=(0,r.default)(e);return{getItem:function(e){return new Promise((function(i,n){i(t.getItem(e))}))},setItem:function(e,i){return new Promise((function(n,r){n(t.setItem(e,i))}))},removeItem:function(e){return new Promise((function(i,n){i(t.removeItem(e))}))}}};var n,r=(n=i(77290))&&n.__esModule?n:{default:n}},77290:(e,t)=>{"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":i(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(e){return!1}return!0}(t)?self[t]:r};var r={getItem:n,setItem:n,removeItem:n}},76734:(e,t,i)=>{"use strict";var n;t.Z=void 0;var r=(0,((n=i(23488))&&n.__esModule?n:{default:n}).default)("local");t.Z=r},35666:e=>{var t=function(e){"use strict";var t,i=Object.prototype,n=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,i){return e[t]=i}}function c(e,t,i,n){var r=t&&t.prototype instanceof m?t:m,s=Object.create(r.prototype),o=new L(n||[]);return s._invoke=function(e,t,i){var n=u;return function(r,s){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===r)throw s;return M()}for(i.method=r,i.arg=s;;){var o=i.delegate;if(o){var a=k(o,i);if(a){if(a===g)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=f;var l=h(e,t,i);if("normal"===l.type){if(n=i.done?p:d,l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=p,i.method="throw",i.arg=l.arg)}}}(e,i,o),s}function h(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function m(){}function b(){}function v(){}var y={};y[s]=function(){return this};var _=Object.getPrototypeOf,w=_&&_(_(N([])));w&&w!==i&&n.call(w,s)&&(y=w);var S=v.prototype=m.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,s,o,a){var l=h(e[r],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var r;this._invoke=function(e,n){function s(){return new t((function(t,r){i(e,n,t,r)}))}return r=r?r.then(s,s):s()}}function k(e,i){var n=e.iterator[i.method];if(n===t){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=t,k(e,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=h(n,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,g;var s=r.arg;return s?s.done?(i[e.resultName]=s.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var i=e[s];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function i(){for(;++r<e.length;)if(n.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return o.next=o}}return{next:M}}function M(){return{value:t,done:!0}}return b.prototype=S.constructor=v,v.constructor=b,b.displayName=l(v,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,a,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},C(x.prototype),x.prototype[o]=function(){return this},e.AsyncIterator=x,e.async=function(t,i,n,r,s){void 0===s&&(s=Promise);var o=new x(c(t,i,n,r),s);return e.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(S),l(S,a,"Generator"),S[s]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(n,r){return a.type="throw",a.arg=e,i.next=n,r&&(i.method="next",i.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),T(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;T(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:N(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},60053:(e,t)=>{"use strict";var i,n,r,s;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,h=null,u=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(u,0),e}};i=function(e){null!==c?setTimeout(i,0,e):(c=e,setTimeout(u,0))},n=function(e,t){h=setTimeout(e,t)},r=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,m=null,b=-1,v=5,y=0;t.unstable_shouldYield=function(){return t.unstable_now()>=y},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();y=e+v;try{m(!0,e)?w.postMessage(null):(g=!1,m=null)}catch(e){throw w.postMessage(null),e}}else g=!1},i=function(e){m=e,g||(g=!0,w.postMessage(null))},n=function(e,i){b=d((function(){e(t.unstable_now())}),i)},r=function(){f(b),b=-1}}function S(e,t){var i=e.length;e.push(t);e:for(;;){var n=i-1>>>1,r=e[n];if(!(void 0!==r&&0<k(r,t)))break e;e[n]=t,e[i]=r,i=n}}function C(e){return void 0===(e=e[0])?null:e}function x(e){var t=e[0];if(void 0!==t){var i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,r=e.length;n<r;){var s=2*(n+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>k(o,i))void 0!==l&&0>k(l,o)?(e[n]=l,e[a]=i,n=a):(e[n]=o,e[s]=i,n=s);else{if(!(void 0!==l&&0>k(l,i)))break e;e[n]=l,e[a]=i,n=a}}}return t}return null}function k(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}var E=[],T=[],L=1,N=null,M=3,O=!1,D=!1,I=!1;function A(e){for(var t=C(T);null!==t;){if(null===t.callback)x(T);else{if(!(t.startTime<=e))break;x(T),t.sortIndex=t.expirationTime,S(E,t)}t=C(T)}}function P(e){if(I=!1,A(e),!D)if(null!==C(E))D=!0,i(R);else{var t=C(T);null!==t&&n(P,t.startTime-e)}}function R(e,i){D=!1,I&&(I=!1,r()),O=!0;var s=M;try{for(A(i),N=C(E);null!==N&&(!(N.expirationTime>i)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"==typeof o){N.callback=null,M=N.priorityLevel;var a=o(N.expirationTime<=i);i=t.unstable_now(),"function"==typeof a?N.callback=a:N===C(E)&&x(E),A(i)}else x(E);N=C(E)}if(null!==N)var l=!0;else{var c=C(T);null!==c&&n(P,c.startTime-i),l=!1}return l}finally{N=null,M=s,O=!1}}var B=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||O||(D=!0,i(R))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return C(E)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var i=M;M=t;try{return e()}finally{M=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=M;M=e;try{return t()}finally{M=i}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:L++,callback:s,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(e.sortIndex=o,S(T,e),null===C(E)&&e===C(T)&&(I?r():I=!0,n(P,o-a))):(e.sortIndex=l,S(E,e),D||O||(D=!0,i(R))),e},t.unstable_wrapCallback=function(e){var t=M;return function(){var i=M;M=t;try{return e.apply(this,arguments)}finally{M=i}}}},63840:(e,t,i)=>{"use strict";e.exports=i(60053)},14956:(e,t,i)=>{const{GitExecutor:n}=i(23051),{SimpleGitApi:r}=i(15365),{Scheduler:s}=i(56935),{GitLogger:o}=i(12957),{configurationErrorTask:a}=i(96637),{asArray:l,filterArray:c,filterPrimitives:h,filterString:u,filterStringOrStringArray:d,filterType:f,getTrailingOptions:p,trailingFunctionArgument:g,trailingOptionsArgument:m}=i(91050),{applyPatchTask:b}=i(80829),{branchTask:v,branchLocalTask:y,deleteBranchesTask:_,deleteBranchTask:w}=i(67260),{checkIgnoreTask:S}=i(25628),{checkIsRepoTask:C}=i(76399),{cloneTask:x,cloneMirrorTask:k}=i(76188),{cleanWithOptionsTask:E,isCleanOptionsArray:T}=i(48709),{commitTask:L}=i(94024),{diffSummaryTask:N}=i(5062),{fetchTask:M}=i(35644),{logTask:O,parseLogOptions:D}=i(33693),{moveTask:I}=i(73773),{pullTask:A}=i(97868),{pushTagsTask:P}=i(4721),{addRemoteTask:R,getRemotesTask:B,listRemotesTask:F,remoteTask:W,removeRemoteTask:V}=i(94441),{getResetMode:z,resetTask:H}=i(32337),{stashListTask:j}=i(75368),{addSubModuleTask:U,initSubModuleTask:G,subModuleTask:K,updateSubModuleTask:$}=i(88278),{addAnnotatedTagTask:q,addTagTask:Z,tagListTask:Y}=i(26316),{straightThroughBufferTask:X,straightThroughStringTask:Q}=i(96637);function J(e,t){this._executor=new n(e.binary,e.baseDir,new s(e.maxConcurrentProcesses),t),this._logger=new o}function ee(e,t,i,n){return"string"!=typeof i?a(`git.${e}() requires a string 'repoPath'`):t(i,f(n,u),p(arguments))}(J.prototype=Object.create(r.prototype)).constructor=J,J.prototype._logger=null,J.prototype.customBinary=function(e){return this._executor.binary=e,this},J.prototype.env=function(e,t){return 1===arguments.length&&"object"==typeof e?this._executor.env=e:(this._executor.env=this._executor.env||{})[e]=t,this},J.prototype.stashList=function(e){return this._runTask(j(m(arguments)||{},c(e)&&e||[]),g(arguments))},J.prototype.clone=function(){return this._runTask(ee("clone",x,...arguments),g(arguments))},J.prototype.mirror=function(){return this._runTask(ee("mirror",k,...arguments),g(arguments))},J.prototype.mv=function(e,t){return this._runTask(I(e,t),g(arguments))},J.prototype.checkoutLatestTag=function(e){var t=this;return this.pull((function(){t.tags((function(i,n){t.checkout(n.latest,e)}))}))},J.prototype.commit=function(e,t,i,n){const r=g(arguments),s=[];return d(e)?s.push(...l(e)):console.warn("simple-git deprecation notice: git.commit: requires the commit message to be supplied as a string/string[], this will be an error in version 3"),this._runTask(L(s,l(f(t,d,[])),[...f(i,c,[]),...p(arguments,0,!0)]),r)},J.prototype.pull=function(e,t,i,n){return this._runTask(A(f(e,u),f(t,u),p(arguments)),g(arguments))},J.prototype.fetch=function(e,t){return this._runTask(M(f(e,u),f(t,u),p(arguments)),g(arguments))},J.prototype.silent=function(e){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this._logger.silent(!!e),this},J.prototype.tags=function(e,t){return this._runTask(Y(p(arguments)),g(arguments))},J.prototype.rebase=function(){return this._runTask(Q(["rebase",...p(arguments)]),g(arguments))},J.prototype.reset=function(e){return this._runTask(H(z(e),p(arguments)),g(arguments))},J.prototype.revert=function(e){const t=g(arguments);return"string"!=typeof e?this._runTask(a("Commit must be a string"),t):this._runTask(Q(["revert",...p(arguments,0,!0),e]),t)},J.prototype.addTag=function(e){const t="string"==typeof e?Z(e):a("Git.addTag requires a tag name");return this._runTask(t,g(arguments))},J.prototype.addAnnotatedTag=function(e,t){return this._runTask(q(e,t),g(arguments))},J.prototype.checkout=function(){const e=["checkout",...p(arguments,!0)];return this._runTask(Q(e),g(arguments))},J.prototype.checkoutBranch=function(e,t,i){return this.checkout(["-b",e,t],g(arguments))},J.prototype.checkoutLocalBranch=function(e,t){return this.checkout(["-b",e],g(arguments))},J.prototype.deleteLocalBranch=function(e,t,i){return this._runTask(w(e,"boolean"==typeof t&&t),g(arguments))},J.prototype.deleteLocalBranches=function(e,t,i){return this._runTask(_(e,"boolean"==typeof t&&t),g(arguments))},J.prototype.branch=function(e,t){return this._runTask(v(p(arguments)),g(arguments))},J.prototype.branchLocal=function(e){return this._runTask(y(),g(arguments))},J.prototype.raw=function(e){const t=!Array.isArray(e),i=[].slice.call(t?arguments:e,0);for(let e=0;e<i.length&&t;e++)if(!h(i[e])){i.splice(e,i.length-e);break}i.push(...p(arguments,0,!0));var n=g(arguments);return i.length?this._runTask(Q(i),n):this._runTask(a("Raw: must supply one or more command to execute"),n)},J.prototype.submoduleAdd=function(e,t,i){return this._runTask(U(e,t),g(arguments))},J.prototype.submoduleUpdate=function(e,t){return this._runTask($(p(arguments,!0)),g(arguments))},J.prototype.submoduleInit=function(e,t){return this._runTask(G(p(arguments,!0)),g(arguments))},J.prototype.subModule=function(e,t){return this._runTask(K(p(arguments)),g(arguments))},J.prototype.listRemote=function(){return this._runTask(F(p(arguments)),g(arguments))},J.prototype.addRemote=function(e,t,i){return this._runTask(R(e,t,p(arguments)),g(arguments))},J.prototype.removeRemote=function(e,t){return this._runTask(V(e),g(arguments))},J.prototype.getRemotes=function(e,t){return this._runTask(B(!0===e),g(arguments))},J.prototype.remote=function(e,t){return this._runTask(W(p(arguments)),g(arguments))},J.prototype.tag=function(e,t){const i=p(arguments);return"tag"!==i[0]&&i.unshift("tag"),this._runTask(Q(i),g(arguments))},J.prototype.updateServerInfo=function(e){return this._runTask(Q(["update-server-info"]),g(arguments))},J.prototype.pushTags=function(e,t){const i=P({remote:f(e,u)},p(arguments));return this._runTask(i,g(arguments))},J.prototype.rm=function(e){return this._runTask(Q(["rm","-f",...l(e)]),g(arguments))},J.prototype.rmKeepLocal=function(e){return this._runTask(Q(["rm","--cached",...l(e)]),g(arguments))},J.prototype.catFile=function(e,t){return this._catFile("utf-8",arguments)},J.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},J.prototype._catFile=function(e,t){var i=g(t),n=["cat-file"],r=t[0];if("string"==typeof r)return this._runTask(a("Git.catFile: options must be supplied as an array of strings"),i);Array.isArray(r)&&n.push.apply(n,r);const s="buffer"===e?X(n):Q(n);return this._runTask(s,i)},J.prototype.diff=function(e,t){const i=["diff",...p(arguments)];return"string"==typeof e&&(i.splice(1,0,e),this._logger.warn("Git#diff: supplying options as a single string is now deprecated, switch to an array of strings")),this._runTask(Q(i),g(arguments))},J.prototype.diffSummary=function(){return this._runTask(N(p(arguments,1)),g(arguments))},J.prototype.applyPatch=function(e){const t=d(e)?b(l(e),p([].slice.call(arguments,1))):a("git.applyPatch requires one or more string patches as the first argument");return this._runTask(t,g(arguments))},J.prototype.revparse=function(){const e=["rev-parse",...p(arguments,!0)];return this._runTask(Q(e,!0),g(arguments))},J.prototype.show=function(e,t){return this._runTask(Q(["show",...p(arguments,1)]),g(arguments))},J.prototype.clean=function(e,t,i){const n=T(e),r=n&&e.join("")||f(e,u)||"",s=p([].slice.call(arguments,n?1:0));return this._runTask(E(r,s),g(arguments))},J.prototype.exec=function(e){const t={commands:[],format:"utf-8",parser(){"function"==typeof e&&e()}};return this._runTask(t)},J.prototype.log=function(e){const t=g(arguments);if(u(arguments[0])&&u(arguments[1]))return this._runTask(a("git.log(string, string) should be replaced with git.log({ from: string, to: string })"),t);const i=D(m(arguments)||{},c(e)&&e||[]);return this._runTask(O(i.splitter,i.fields,i.commands),t)},J.prototype.clearQueue=function(){return this},J.prototype.checkIgnore=function(e,t){return this._runTask(S(l(f(e,d,[]))),g(arguments))},J.prototype.checkIsRepo=function(e,t){return this._runTask(C(f(e,u)),g(arguments))},e.exports=J},47056:(e,t,i)=>{const{gitP:n}=i(5055),{esModuleFactory:r,gitInstanceFactory:s,gitExportFactory:o}=i(48744);e.exports=r(o(s,{gitP:n}))},17286:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(39831),r=i(32437),s=i(91159),o=i(49009),a=i(66958),l=i(76399),c=i(48709),h=i(73803),u=i(32337),d={CheckRepoActions:l.CheckRepoActions,CleanOptions:c.CleanOptions,GitConfigScope:h.GitConfigScope,GitConstructError:n.GitConstructError,GitError:r.GitError,GitPluginError:s.GitPluginError,GitResponseError:o.GitResponseError,ResetMode:u.ResetMode,TaskConfigurationError:a.TaskConfigurationError};t.default=d},39831:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitConstructError=void 0;const n=i(32437);class r extends n.GitError{constructor(e,t){super(void 0,t),this.config=e}}t.GitConstructError=r},32437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitError=void 0;class i extends Error{constructor(e,t){super(t),this.task=e,Object.setPrototypeOf(this,new.target.prototype)}}t.GitError=i},91159:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitPluginError=void 0;const n=i(32437);class r extends n.GitError{constructor(e,t,i){super(e,i),this.task=e,this.plugin=t,Object.setPrototypeOf(this,new.target.prototype)}}t.GitPluginError=r},49009:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitResponseError=void 0;const n=i(32437);class r extends n.GitError{constructor(e,t){super(void 0,t||String(e)),this.git=e}}t.GitResponseError=r},66958:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskConfigurationError=void 0;const n=i(32437);class r extends n.GitError{constructor(e){super(void 0,e)}}t.TaskConfigurationError=r},48744:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gitInstanceFactory=t.gitExportFactory=t.esModuleFactory=void 0;const n=i(17286),r=i(48414),s=i(91050),o=i(14956);t.esModuleFactory=function(e){return Object.defineProperties(e,{__esModule:{value:!0},default:{value:e}})},t.gitExportFactory=function(e,t){return Object.assign((function(...t){return e.apply(null,t)}),n.default,t||{})},t.gitInstanceFactory=function(e,t){const i=new r.PluginStore,a=s.createInstanceConfig(e&&("string"==typeof e?{baseDir:e}:e)||{},t);if(!s.folderExists(a.baseDir))throw new n.default.GitConstructError(a,"Cannot use simple-git on a directory that does not exist");return Array.isArray(a.config)&&i.add(r.commandConfigPrefixingPlugin(a.config)),a.progress&&i.add(r.progressMonitorPlugin(a.progress)),a.timeout&&i.add(r.timeoutPlugin(a.timeout)),a.spawnOptions&&i.add(r.spawnOptionsPlugin(a.spawnOptions)),i.add(r.errorDetectionPlugin(r.errorDetectionHandler(!0))),a.errors&&i.add(r.errorDetectionPlugin(a.errors)),new o(a,i)}},12957:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitLogger=t.createLogger=void 0;const n=i(11227),r=i(91050);function s(){return n.default("simple-git")}function o(e,t,i){return t&&String(t).replace(/\s*/,"")?(n,...r)=>{e(`%s ${n}`,t,...r),i&&i(n,...r)}:i?(t,...n)=>{e(t,...n),i(t,...n)}:e}n.default.formatters.L=e=>String(r.filterHasLength(e)?e.length:"-"),n.default.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):r.objectToString(e),t.createLogger=function e(t,i,n,a=s()){const l=t&&`[${t}]`||"",c=[],h="string"==typeof i?a.extend(i):i,u=function(e,t,{namespace:i}){if("string"==typeof e)return e;const n=t&&t.namespace||"";return n.startsWith(i)?n.substr(i.length+1):n||i}(r.filterType(i,r.filterString),h,a);return function e(i){const n=i&&`[${i}]`||"",s=h&&o(h,n)||r.NOOP,c=o(a,`${l} ${n}`,s);return Object.assign(h?s:c,{label:t,sibling:d,info:c,step:e})}(n);function d(i,n){return r.append(c,e(t,u.replace(/^[^:]+/,i),n,a))}};t.GitLogger=class{constructor(e=s()){this._out=e,this.error=o(e,"[ERROR]"),this.warn=o(e,"[WARN]")}silent(e=!1){if(e!==this._out.enabled)return;const{namespace:t}=this._out,i=(process.env.DEBUG||"").split(",").filter((e=>!!e)),s=i.includes(t),o=i.includes(`-${t}`);e?s?r.remove(i,t):i.push(`-${t}`):o?r.remove(i,`-${t}`):i.push(t),n.default.enable(i.join(","))}}},28966:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBranchDeletionError=t.parseBranchDeletions=void 0;const n=i(10267),r=i(91050),s=/^error[^']+'([^']+)'/m,o=[new r.LineParser(/(\S+)\s+\(\S+\s([^)]+)\)/,((e,[t,i])=>{const r=n.branchDeletionSuccess(t,i);e.all.push(r),e.branches[t]=r})),new r.LineParser(s,((e,[t])=>{const i=n.branchDeletionFailure(t);e.errors.push(i),e.all.push(i),e.branches[t]=i}))];t.parseBranchDeletions=(e,t)=>r.parseStringResponse(new n.BranchDeletionBatch,o,e,t),t.hasBranchDeletionError=function(e,t){return t===r.ExitCodes.ERROR&&s.test(e)}},25279:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBranchSummary=void 0;const n=i(16395),r=i(91050),s=[new r.LineParser(/^(\*\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,((e,[t,i,n,r])=>{e.push(!!t,!0,i,n,r)})),new r.LineParser(/^(\*\s)?(\S+)\s+([a-z0-9]+)\s(.*)$/s,((e,[t,i,n,r])=>{e.push(!!t,!1,i,n,r)}))];t.parseBranchSummary=function(e){return r.parseStringResponse(new n.BranchSummaryResult,s,e)}},40952:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCommitResult=void 0;const n=i(91050),r=[new n.LineParser(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,((e,[t,i,n])=>{e.branch=t,e.commit=n,e.root=!!i})),new n.LineParser(/\s*Author:\s(.+)/i,((e,[t])=>{const i=t.split("<"),n=i.pop();n&&n.includes("@")&&(e.author={email:n.substr(0,n.length-1),name:i.join("<").trim()})})),new n.LineParser(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,((e,[t,i,n])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(i,10)||0,e.summary.deletions=parseInt(n,10)||0})),new n.LineParser(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,((e,[t,i,n])=>{e.summary.changes=parseInt(t,10)||0;const r=parseInt(i,10)||0;"-"===n?e.summary.deletions=r:"+"===n&&(e.summary.insertions=r)}))];t.parseCommitResult=function(e){return n.parseStringResponse({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},r,e)}},56188:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDiffResult=void 0;const n=i(53252);t.parseDiffResult=function(e){const t=e.trim().split("\n"),i=new n.DiffSummary;!function(e,t){(t||"").trim().split(", ").forEach((function(t){const i=/(\d+)\s([a-z]+)/.exec(t);i&&function(e,t,i){const n=/([a-z]+?)s?\b/.exec(t);if(!n||!r[n[1]])return;r[n[1]](e,i)}(e,i[2],parseInt(i[1],10))}))}(i,t.pop());for(let e=0,n=t.length;e<n;e++){const n=t[e];s(n,i)||o(n,i)}return i};const r={file(e,t){e.changed=t},deletion(e,t){e.deletions=t},insertion(e,t){e.insertions=t}};function s(e,{files:t}){const i=e.trim().match(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/);if(i){var n=(i[3]||"").trim();return t.push({file:i[1].trim(),changes:parseInt(i[2],10),insertions:n.replace(/-/g,"").length,deletions:n.replace(/\+/g,"").length,binary:!1}),!0}return!1}function o(e,{files:t}){const i=e.match(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)$/);return!!i&&(t.push({file:i[1].trim(),before:+i[2],after:+i[3],binary:!0}),!0)}},4088:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFetchResult=void 0;const n=i(91050),r=[new n.LineParser(/From (.+)$/,((e,[t])=>{e.remote=t})),new n.LineParser(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,((e,[t,i])=>{e.branches.push({name:t,tracking:i})})),new n.LineParser(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,((e,[t,i])=>{e.tags.push({name:t,tracking:i})}))];t.parseFetchResult=function(e,t){const i={raw:e,remote:null,branches:[],tags:[]};return n.parseStringResponse(i,r,e,t)}},4688:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createListLogSummaryParser=t.SPLITTER=t.COMMIT_BOUNDARY=t.START_BOUNDARY=void 0;const n=i(91050),r=i(56188);t.START_BOUNDARY=" ",t.COMMIT_BOUNDARY=" ",t.SPLITTER="  ";const s=["hash","date","message","refs","author_name","author_email"];t.createListLogSummaryParser=function(e=t.SPLITTER,i=s){return function(s){const o=n.toLinesWithContent(s,!0,t.START_BOUNDARY).map((function(n){const s=n.trim().split(t.COMMIT_BOUNDARY),o=function(e,t){return t.reduce(((t,i,n)=>(t[i]=e[n]||"",t)),Object.create({diff:null}))}(s[0].trim().split(e),i);return s.length>1&&s[1].trim()&&(o.diff=r.parseDiffResult(s[1])),o}));return{all:o,latest:o.length&&o[0]||null,total:o.length}}}},70476:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMergeDetail=t.parseMergeResult=void 0;const n=i(90435),r=i(91050),s=i(11669),o=[new r.LineParser(/^Auto-merging\s+(.+)$/,((e,[t])=>{e.merges.push(t)})),new r.LineParser(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,((e,[t,i])=>{e.conflicts.push(new n.MergeSummaryConflict(t,i))})),new r.LineParser(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,((e,[t,i,r])=>{e.conflicts.push(new n.MergeSummaryConflict(t,i,{deleteRef:r}))})),new r.LineParser(/^CONFLICT\s+\((.+)\):/,((e,[t])=>{e.conflicts.push(new n.MergeSummaryConflict(t,null))})),new r.LineParser(/^Automatic merge failed;\s+(.+)$/,((e,[t])=>{e.result=t}))];t.parseMergeResult=(e,i)=>Object.assign(t.parseMergeDetail(e,i),s.parsePullResult(e,i));t.parseMergeDetail=e=>r.parseStringResponse(new n.MergeSummaryDetail,o,e)},31425:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMoveResult=void 0;const n=i(91050),r=[new n.LineParser(/^Renaming (.+) to (.+)$/,((e,[t,i])=>{e.moves.push({from:t,to:i})}))];t.parseMoveResult=function(e){return n.parseStringResponse({moves:[]},r,e)}},11669:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePullResult=t.parsePullDetail=void 0;const n=i(61156),r=i(91050),s=i(62753),o=[new r.LineParser(/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,((e,[t,i,n])=>{e.files.push(t),i&&(e.insertions[t]=i.length),n&&(e.deletions[t]=n.length)})),new r.LineParser(/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,((e,[t,,i,,n])=>(void 0!==i||void 0!==n)&&(e.summary.changes=+t||0,e.summary.insertions=+i||0,e.summary.deletions=+n||0,!0))),new r.LineParser(/^(create|delete) mode \d+ (.+)/,((e,[t,i])=>{r.append(e.files,i),r.append("create"===t?e.created:e.deleted,i)}))];t.parsePullDetail=(e,t)=>r.parseStringResponse(new n.PullSummary,o,e,t);t.parsePullResult=(e,i)=>Object.assign(new n.PullSummary,t.parsePullDetail(e,i),s.parseRemoteMessages(e,i))},47867:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePushDetail=t.parsePushResult=void 0;const n=i(91050),r=i(62753);const s=[new n.LineParser(/^Pushing to (.+)$/,((e,[t])=>{e.repo=t})),new n.LineParser(/^updating local tracking ref '(.+)'/,((e,[t])=>{e.ref=Object.assign(Object.assign({},e.ref||{}),{local:t})})),new n.LineParser(/^[*-=]\s+([^:]+):(\S+)\s+\[(.+)]$/,((e,[t,i,n])=>{e.pushed.push(function(e,t,i){const n=i.includes("deleted"),r=i.includes("tag")||/^refs\/tags/.test(e),s=!i.includes("new");return{deleted:n,tag:r,branch:!r,new:!s,alreadyUpdated:s,local:e,remote:t}}(t,i,n))})),new n.LineParser(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,((e,[t,i,n])=>{e.branch=Object.assign(Object.assign({},e.branch||{}),{local:t,remote:i,remoteName:n})})),new n.LineParser(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,((e,[t,i,n,r])=>{e.update={head:{local:t,remote:i},hash:{from:n,to:r}}}))];t.parsePushResult=(e,i)=>{const n=t.parsePushDetail(e,i),s=r.parseRemoteMessages(e,i);return Object.assign(Object.assign({},n),s)};t.parsePushDetail=(e,t)=>n.parseStringResponse({pushed:[]},s,e,t)},62753:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteMessageSummary=t.parseRemoteMessages=void 0;const n=i(91050),r=i(96035),s=[new n.RemoteLineParser(/^remote:\s*(.+)$/,((e,[t])=>(e.remoteMessages.all.push(t.trim()),!1))),...r.remoteMessagesObjectParsers,new n.RemoteLineParser([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],((e,[t])=>{e.remoteMessages.pullRequestUrl=t})),new n.RemoteLineParser([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],((e,[t,i,r])=>{e.remoteMessages.vulnerabilities={count:n.asNumber(t),summary:i,url:r}}))];t.parseRemoteMessages=function(e,t){return n.parseStringResponse({remoteMessages:new o},s,t)};class o{constructor(){this.all=[]}}t.RemoteMessageSummary=o},96035:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remoteMessagesObjectParsers=void 0;const n=i(91050);function r(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function s(e){const t=/^\s*(\d+)/.exec(e),i=/delta (\d+)/i.exec(e);return{count:n.asNumber(t&&t[1]||"0"),delta:n.asNumber(i&&i[1]||"0")}}t.remoteMessagesObjectParsers=[new n.RemoteLineParser(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,((e,[t,i])=>{const s=t.toLowerCase(),o=r(e.remoteMessages);Object.assign(o,{[s]:n.asNumber(i)})})),new n.RemoteLineParser(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,((e,[t,i])=>{const s=t.toLowerCase(),o=r(e.remoteMessages);Object.assign(o,{[s]:n.asNumber(i)})})),new n.RemoteLineParser(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,((e,[t,i,o])=>{const a=r(e.remoteMessages);a.total=s(t),a.reused=s(i),a.packReused=n.asNumber(o)}))]},39854:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commandConfigPrefixingPlugin=void 0;const n=i(91050);t.commandConfigPrefixingPlugin=function(e){const t=n.prefixedArray(e,"-c");return{type:"spawn.args",action:e=>[...t,...e]}}},46555:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorDetectionPlugin=t.errorDetectionHandler=void 0;const n=i(32437);function r(e){return!(!e.exitCode||!e.stdErr.length)}function s(e){return Buffer.concat([...e.stdOut,...e.stdErr])}t.errorDetectionHandler=function(e=!1,t=r,i=s){return(n,r)=>!e&&n||!t(r)?n:i(r)},t.errorDetectionPlugin=function(e){return{type:"task.error",action(t,i){const r=e(t.error,{stdErr:i.stdErr,stdOut:i.stdOut,exitCode:i.exitCode});return Buffer.isBuffer(r)?{error:new n.GitError(void 0,r.toString("utf-8"))}:{error:r}}}}},48414:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(39854),t),r(i(46555),t),r(i(90111),t),r(i(57684),t),r(i(43112),t),r(i(3500),t),r(i(54545),t)},90111:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginStore=void 0;const n=i(91050);t.PluginStore=class{constructor(){this.plugins=new Set}add(e){const t=[];return n.asArray(e).forEach((e=>e&&this.plugins.add(n.append(t,e)))),()=>{t.forEach((e=>this.plugins.delete(e)))}}exec(e,t,i){let n=t;const r=Object.freeze(Object.create(i));for(const t of this.plugins)t.type===e&&(n=t.action(n,r));return n}}},57684:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.progressMonitorPlugin=void 0;const n=i(91050);t.progressMonitorPlugin=function(e){const t="--progress",i=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action:(e,r)=>i.includes(r.method)?n.including(e,t):e},{type:"spawn.after",action(i,r){var s;r.commands.includes(t)&&(null===(s=r.spawned.stderr)||void 0===s||s.on("data",(t=>{const i=/^([a-zA-Z ]+):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(t.toString("utf8"));var s;i&&e({method:r.method,stage:(s=i[1],String(s.toLowerCase().split(" ",1))||"unknown"),progress:n.asNumber(i[2]),processed:n.asNumber(i[3]),total:n.asNumber(i[4])})})))}}]}},43112:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3500:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spawnOptionsPlugin=void 0;const n=i(91050);t.spawnOptionsPlugin=function(e){const t=n.pick(e,["uid","gid"]);return{type:"spawn.options",action:e=>Object.assign(Object.assign({},t),e)}}},54545:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutPlugin=void 0;const n=i(91159);t.timeoutPlugin=function({block:e}){if(e>0)return{type:"spawn.after",action(t,i){var r,s;let o;function a(){o&&clearTimeout(o),o=setTimeout(c,e)}function l(){var e,t;null===(e=i.spawned.stdout)||void 0===e||e.off("data",a),null===(t=i.spawned.stderr)||void 0===t||t.off("data",a),i.spawned.off("exit",l),i.spawned.off("close",l)}function c(){l(),i.kill(new n.GitPluginError(void 0,"timeout","block timeout reached"))}null===(r=i.spawned.stdout)||void 0===r||r.on("data",a),null===(s=i.spawned.stderr)||void 0===s||s.on("data",a),i.spawned.on("exit",l),i.spawned.on("close",l),a()}}}},10267:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSingleBranchDeleteFailure=t.branchDeletionFailure=t.branchDeletionSuccess=t.BranchDeletionBatch=void 0;t.BranchDeletionBatch=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}},t.branchDeletionSuccess=function(e,t){return{branch:e,hash:t,success:!0}},t.branchDeletionFailure=function(e){return{branch:e,hash:null,success:!1}},t.isSingleBranchDeleteFailure=function(e){return e.success}},16395:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BranchSummaryResult=void 0;t.BranchSummaryResult=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(e,t,i,n,r){e&&(this.detached=t,this.current=i),this.all.push(i),this.branches[i]={current:e,name:i,commit:n,label:r}}}},40133:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCheckIgnore=void 0;t.parseCheckIgnore=e=>e.split(/\n/g).map((e=>e.trim())).filter((e=>!!e))},76766:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanSummaryParser=t.CleanResponse=void 0;const n=i(91050);class r{constructor(e){this.dryRun=e,this.paths=[],this.files=[],this.folders=[]}}t.CleanResponse=r;const s=/^[a-z]+\s*/i,o=/^[a-z]+\s+[a-z]+\s*/i,a=/\/$/;t.cleanSummaryParser=function(e,t){const i=new r(e),l=e?o:s;return n.toLinesWithContent(t).forEach((e=>{const t=e.replace(l,"");i.paths.push(t),(a.test(t)?i.folders:i.files).push(t)})),i}},83426:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configListParser=t.ConfigList=void 0;const n=i(91050);class r{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce(((e,t)=>Object.assign(e,this.values[t])),{})),this._all}addFile(e){if(!(e in this.values)){const t=n.last(this.files);this.values[e]=t?Object.create(this.values[t]):{},this.files.push(e)}return this.values[e]}addValue(e,t,i){const n=this.addFile(e);n.hasOwnProperty(t)?Array.isArray(n[t])?n[t].push(i):n[t]=[n[t],i]:n[t]=i,this._all=void 0}}t.ConfigList=r,t.configListParser=function(e){const t=new r,i=e.split("\0");for(let e=0,r=i.length-1;e<r;){const r=i[e++].replace(/^(file):/,""),[s,o]=n.splitOn(i[e++],"\n");t.addValue(r,s,o)}return t}},53252:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiffSummary=void 0;t.DiffSummary=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}},48991:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileStatusSummary=t.fromPathRegex=void 0,t.fromPathRegex=/^(.+) -> (.+)$/;t.FileStatusSummary=class{constructor(e,i,n){if(this.path=e,this.index=i,this.working_dir=n,"R"===i+n){const i=t.fromPathRegex.exec(e)||[null,e,e];this.from=i[1]||"",this.path=i[2]||""}}}},51089:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetRemotesVerbose=t.parseGetRemotes=void 0;const n=i(91050);function r(e,t){n.forEachLineWithContent(e,(e=>t(e.split(/\s+/))))}t.parseGetRemotes=function(e){const t={};return r(e,(([e])=>t[e]={name:e})),Object.values(t)},t.parseGetRemotesVerbose=function(e){const t={};return r(e,(([e,i,n])=>{t.hasOwnProperty(e)||(t[e]={name:e,refs:{fetch:"",push:""}}),n&&i&&(t[e].refs[n.replace(/[^a-z]/g,"")]=i)})),Object.values(t)}},93367:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseInit=t.InitSummary=void 0;class i{constructor(e,t,i,n){this.bare=e,this.path=t,this.existing=i,this.gitDir=n}}t.InitSummary=i;const n=/^Init.+ repository in (.+)$/,r=/^Rein.+ in (.+)$/;t.parseInit=function(e,t,s){const o=String(s).trim();let a;if(a=n.exec(o))return new i(e,t,!1,a[1]);if(a=r.exec(o))return new i(e,t,!0,a[1]);let l="";const c=o.split(" ");for(;c.length;){if("in"===c.shift()){l=c.join(" ");break}}return new i(e,t,/^re/i.test(o),l)}},90435:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MergeSummaryDetail=t.MergeSummaryConflict=void 0;t.MergeSummaryConflict=class{constructor(e,t=null,i){this.reason=e,this.file=t,this.meta=i}toString(){return`${this.file}:${this.reason}`}};t.MergeSummaryDetail=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}},61156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullSummary=void 0;t.PullSummary=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}}},59763:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStatusSummary=t.StatusSummary=void 0;const n=i(91050),r=i(48991);class s{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null}isClean(){return!this.files.length}}var o;function a(e){const t=/^(.+) -> (.+)$/.exec(e);return t?{from:String(t[1]),to:String(t[2])}:{from:e,to:e}}function l(e,t,i){return[`${e}${t}`,i]}function c(e,...t){return t.map((t=>l(e,t,((e,t)=>n.append(e.conflicted,t)))))}t.StatusSummary=s,function(e){e.ADDED="A",e.DELETED="D",e.MODIFIED="M",e.RENAMED="R",e.COPIED="C",e.UNMERGED="U",e.UNTRACKED="?",e.IGNORED="!",e.NONE=" "}(o||(o={}));const h=new Map([l(o.NONE,o.ADDED,((e,t)=>n.append(e.created,t))),l(o.NONE,o.DELETED,((e,t)=>n.append(e.deleted,t))),l(o.NONE,o.MODIFIED,((e,t)=>n.append(e.modified,t))),l(o.ADDED,o.NONE,((e,t)=>n.append(e.created,t)&&n.append(e.staged,t))),l(o.ADDED,o.MODIFIED,((e,t)=>n.append(e.created,t)&&n.append(e.staged,t)&&n.append(e.modified,t))),l(o.DELETED,o.NONE,((e,t)=>n.append(e.deleted,t)&&n.append(e.staged,t))),l(o.MODIFIED,o.NONE,((e,t)=>n.append(e.modified,t)&&n.append(e.staged,t))),l(o.MODIFIED,o.MODIFIED,((e,t)=>n.append(e.modified,t)&&n.append(e.staged,t))),l(o.RENAMED,o.NONE,((e,t)=>{n.append(e.renamed,a(t))})),l(o.RENAMED,o.MODIFIED,((e,t)=>{const i=a(t);n.append(e.renamed,i),n.append(e.modified,i.to)})),l(o.UNTRACKED,o.UNTRACKED,((e,t)=>n.append(e.not_added,t))),...c(o.ADDED,o.ADDED,o.UNMERGED),...c(o.DELETED,o.DELETED,o.UNMERGED),...c(o.UNMERGED,o.ADDED,o.DELETED,o.UNMERGED),["##",(e,t)=>{let i;i=/ahead (\d+)/.exec(t),e.ahead=i&&+i[1]||0,i=/behind (\d+)/.exec(t),e.behind=i&&+i[1]||0,i=/^(.+?(?=(?:\.{3}|\s|$)))/.exec(t),e.current=i&&i[1],i=/\.{3}(\S*)/.exec(t),e.tracking=i&&i[1],i=/\son\s([\S]+)$/.exec(t),e.current=i&&i[1]||e.current}]]);function u(e,t){const i=t.trim();switch(" "){case i.charAt(2):return n(i.charAt(0),i.charAt(1),i.substr(3));case i.charAt(1):return n(o.NONE,i.charAt(0),i.substr(2));default:return}function n(t,i,n){const s=`${t}${i}`,o=h.get(s);o&&o(e,n),"##"!==s&&e.files.push(new r.FileStatusSummary(n,t,i))}}t.parseStatusSummary=function(e){const t=e.trim().split("\n"),i=new s;for(let e=0,n=t.length;e<n;e++)u(i,t[e]);return i}},91427:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTagList=t.TagList=void 0;class i{constructor(e,t){this.all=e,this.latest=t}}t.TagList=i;function n(e,t){return e===t?0:e>t?1:-1}function r(e){return e.trim()}function s(e){return"string"==typeof e&&parseInt(e.replace(/^\D+/g,""),10)||0}t.parseTagList=function(e,t=!1){const o=e.split("\n").map(r).filter(Boolean);t||o.sort((function(e,t){const i=e.split("."),r=t.split(".");if(1===i.length||1===r.length)return function(e,t){const i=isNaN(e),r=isNaN(t);if(i!==r)return i?1:-1;return i?n(e,t):0}(s(i[0]),s(r[0]));for(let e=0,t=Math.max(i.length,r.length);e<t;e++){const t=n(s(i[e]),s(r[e]));if(t)return t}return 0}));const a=t?o[0]:[...o].reverse().find((e=>e.indexOf(".")>=0));return new i(o,a)}},30834:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GitExecutorChain=void 0;const r=i(63129),s=i(32437),o=i(96637),a=i(91050),l=i(55254);function c(e,t){return{method:a.first(e.commands)||"",commands:t}}function h(e,t,i,n){return r=>{i("%s received %L bytes",t,r),n("%B",r),e.push(r)}}t.GitExecutorChain=class{constructor(e,t,i){this._executor=e,this._scheduler=t,this._plugins=i,this._chain=Promise.resolve(),this._queue=new l.TasksPendingQueue}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){return this._queue.push(e),this._chain=this._chain.then((()=>this.attemptTask(e)))}attemptTask(e){return n(this,void 0,void 0,(function*(){const t=yield this._scheduler.next(),i=()=>this._queue.complete(e);try{const{logger:n}=this._queue.attempt(e);return yield o.isEmptyTask(e)?this.attemptEmptyTask(e,n):this.attemptRemoteTask(e,n)}catch(t){throw this.onFatalException(e,t)}finally{i(),t()}}))}onFatalException(e,t){const i=t instanceof s.GitError?Object.assign(t,{task:e}):new s.GitError(e,t&&String(t));return this._chain=Promise.resolve(),this._queue.fatal(i),i}attemptRemoteTask(e,t){return n(this,void 0,void 0,(function*(){const i=this._plugins.exec("spawn.args",[...e.commands],c(e,e.commands)),n=yield this.gitResponse(e,this.binary,i,this.outputHandler,t.step("SPAWN")),r=yield this.handleTaskData(e,i,n,t.step("HANDLE"));return t("passing response to task's parser as a %s",e.format),o.isBufferTask(e)?a.callTaskParser(e.parser,r):a.callTaskParser(e.parser,r.asStrings())}))}attemptEmptyTask(e,t){return n(this,void 0,void 0,(function*(){return t("empty task bypassing child process to call to task's parser"),e.parser(this)}))}handleTaskData(e,t,i,n){const{exitCode:r,rejection:s,stdOut:o,stdErr:l}=i;return new Promise(((h,u)=>{n("Preparing to handle process response exitCode=%d stdOut=",r);const{error:d}=this._plugins.exec("task.error",{error:s},Object.assign(Object.assign({},c(e,t)),i));return d&&e.onError?(n.info("exitCode=%s handling with custom error handler"),e.onError(i,d,(e=>{n.info("custom error handler treated as success"),n("custom error returned a %s",a.objectToString(e)),h(new a.GitOutputStreams(Array.isArray(e)?Buffer.concat(e):e,Buffer.concat(l)))}),u)):d?(n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",r,l.length,s),u(d)):(n.info("retrieving task output complete"),void h(new a.GitOutputStreams(Buffer.concat(o),Buffer.concat(l))))}))}gitResponse(e,t,i,s,o){return n(this,void 0,void 0,(function*(){const n=o.sibling("output"),a=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},c(e,e.commands));return new Promise((l=>{const u=[],d=[];let f,p=!1;function g(e,t="retry"){(p||d.length||u.length)&&(o.info("exitCode=%s event=%s rejection=%o",e,t,f),l({stdOut:u,stdErr:d,exitCode:e,rejection:f}),p=!0),p||(p=!0,setTimeout((()=>g(e,"deferred")),50),o("received %s event before content on stdOut/stdErr",t))}o.info("%s %o",t,i),o("%O",a);const m=r.spawn(t,i,a);m.stdout.on("data",h(u,"stdOut",o,n.step("stdOut"))),m.stderr.on("data",h(d,"stdErr",o,n.step("stdErr"))),m.on("error",function(e,t){return i=>{t("[ERROR] child process exception %o",i),e.push(Buffer.from(String(i.stack),"ascii"))}}(d,o)),m.on("close",(e=>g(e,"close"))),m.on("exit",(e=>g(e,"exit"))),s&&(o("Passing child process stdOut/stdErr to custom outputHandler"),s(t,m.stdout,m.stderr,[...i])),this._plugins.exec("spawn.after",void 0,Object.assign(Object.assign({},c(e,i)),{spawned:m,kill(e){m.killed||(f=e,m.kill("SIGINT"))}}))}))}))}}},23051:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitExecutor=void 0;const n=i(30834);t.GitExecutor=class{constructor(e="git",t,i,r){this.binary=e,this.cwd=t,this._scheduler=i,this._plugins=r,this._chain=new n.GitExecutorChain(this,this._scheduler,this._plugins)}chain(){return new n.GitExecutorChain(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}},5055:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gitP=void 0;const n=i(49009),r=i(48744),s=["customBinary","env","outputHandler","silent"],o=["add","addAnnotatedTag","addConfig","addRemote","addTag","applyPatch","binaryCatFile","branch","branchLocal","catFile","checkIgnore","checkIsRepo","checkout","checkoutBranch","checkoutLatestTag","checkoutLocalBranch","clean","clone","commit","cwd","deleteLocalBranch","deleteLocalBranches","diff","diffSummary","exec","fetch","getRemotes","init","listConfig","listRemote","log","merge","mergeFromTo","mirror","mv","pull","push","pushTags","raw","rebase","remote","removeRemote","reset","revert","revparse","rm","rmKeepLocal","show","stash","stashList","status","subModule","submoduleAdd","submoduleInit","submoduleUpdate","tag","tags","updateServerInfo"];t.gitP=function(...e){let t,i=Promise.resolve();try{t=r.gitInstanceFactory(...e)}catch(e){i=Promise.reject(e)}function a(){return c}function l(){return i}const c=[...s,...o].reduce(((e,r)=>{const s=o.includes(r),c=s?function(e,t){return function(...r){if("function"==typeof r[r.length])throw new TypeError("Promise interface requires that handlers are not supplied inline, trailing function not allowed in call to "+e);return i.then((function(){return new Promise((function(i,s){const o=(e,t)=>{if(e)return s(function(e){if(e instanceof Error)return e;if("string"==typeof e)return new Error(e);return new n.GitResponseError(e)}(e));i(t)};r.push(o),t[e].apply(t,r)}))}))}}(r,t):function(e,t,i){return(...n)=>(t[e](...n),i)}(r,t,e),h=s?l:a;return Object.defineProperty(e,r,{enumerable:!1,configurable:!1,value:t?c:h}),e}),{});return c}},56935:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scheduler=void 0;const n=i(91050),r=i(12443),s=i(12957),o=(()=>{let e=0;return()=>{e++;const{promise:t,done:i}=r.createDeferred();return{promise:t,done:i,id:e}}})();t.Scheduler=class{constructor(e=2){this.concurrency=e,this.logger=s.createLogger("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency)return void this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);const e=n.append(this.running,this.pending.shift());this.logger("Attempting id=%s",e.id),e.done((()=>{this.logger("Completing id=",e.id),n.remove(this.running,e),this.schedule()}))}next(){const{promise:e,id:t}=n.append(this.pending,o());return this.logger("Scheduling id=%s",t),this.schedule(),e}}},55254:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TasksPendingQueue=void 0;const n=i(32437),r=i(12957);class s{constructor(e="GitExecutor"){this.logLabel=e,this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){const t=s.getName(e.commands[0]);return{task:e,logger:r.createLogger(this.logLabel,t),name:t}}push(e){const t=this.createProgress(e);return t.logger("Adding task to the queue, commands = %o",e.commands),this._queue.set(e,t),t}fatal(e){for(const[t,{logger:i}]of Array.from(this._queue.entries()))t===e.task?(i.info("Failed %o",e),i("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):i.info("A fatal exception occurred in a previous task, the queue has been purged: %o",e.message),this.complete(t);if(0!==this._queue.size)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(e){this.withProgress(e)&&this._queue.delete(e)}attempt(e){const t=this.withProgress(e);if(!t)throw new n.GitError(void 0,"TasksPendingQueue: attempt called for an unknown task");return t.logger("Starting task"),t}static getName(e="empty"){return`task:${e}:${++s.counter}`}}t.TasksPendingQueue=s,s.counter=0},15365:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleGitApi=void 0;const n=i(50785),r=i(88267),s=i(73803),o=i(36100),a=i(54186),l=i(21474),c=i(4721),h=i(93054),u=i(96637),d=i(91050);class f{constructor(e){this._executor=e}_runTask(e,t){const i=this._executor.chain(),r=i.push(e);return t&&n.taskCallback(e,r,t),Object.create(this,{then:{value:r.then.bind(r)},catch:{value:r.catch.bind(r)},_executor:{value:i}})}add(e){return this._runTask(u.straightThroughStringTask(["add",...d.asArray(e)]),d.trailingFunctionArgument(arguments))}cwd(e){const t=d.trailingFunctionArgument(arguments);return"string"==typeof e?this._runTask(r.changeWorkingDirectoryTask(e,this._executor),t):"string"==typeof(null==e?void 0:e.path)?this._runTask(r.changeWorkingDirectoryTask(e.path,e.root&&this._executor||void 0),t):this._runTask(u.configurationErrorTask("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask(o.hashObjectTask(e,!0===t),d.trailingFunctionArgument(arguments))}init(e){return this._runTask(a.initTask(!0===e,this._executor.cwd,d.getTrailingOptions(arguments)),d.trailingFunctionArgument(arguments))}merge(){return this._runTask(l.mergeTask(d.getTrailingOptions(arguments)),d.trailingFunctionArgument(arguments))}mergeFromTo(e,t){return d.filterString(e)&&d.filterString(t)?this._runTask(l.mergeTask([e,t,...d.getTrailingOptions(arguments)]),d.trailingFunctionArgument(arguments,!1)):this._runTask(u.configurationErrorTask("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(e){return this._executor.outputHandler=e,this}push(){const e=c.pushTask({remote:d.filterType(arguments[0],d.filterString),branch:d.filterType(arguments[1],d.filterString)},d.getTrailingOptions(arguments));return this._runTask(e,d.trailingFunctionArgument(arguments))}stash(){return this._runTask(u.straightThroughStringTask(["stash",...d.getTrailingOptions(arguments)]),d.trailingFunctionArgument(arguments))}status(){return this._runTask(h.statusTask(d.getTrailingOptions(arguments)),d.trailingFunctionArgument(arguments))}}t.SimpleGitApi=f,Object.assign(f.prototype,s.default())},50785:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.taskCallback=void 0;const n=i(49009),r=i(91050);t.taskCallback=function(e,t,i=r.NOOP){t.then((e=>{i(null,e)}),(t=>{if((null==t?void 0:t.task)===e){if(t instanceof n.GitResponseError)return i(function(e){let t=e=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${e} should be GitResponseError.git.${e}, this will no longer be available in version 3`),t=r.NOOP};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(i,{}));function i(i,n){return n in e||(i[n]={enumerable:!1,configurable:!1,get:()=>(t(n),e.git[n])}),i}}(t));i(t)}}))}},80829:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyPatchTask=void 0;const n=i(96637);t.applyPatchTask=function(e,t){return n.straightThroughStringTask(["apply",...t,...e])}},67260:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBranchTask=t.deleteBranchesTask=t.branchLocalTask=t.branchTask=t.containsDeleteBranchCommand=void 0;const n=i(49009),r=i(28966),s=i(25279),o=i(91050);function a(e){const t=["-d","-D","--delete"];return e.some((e=>t.includes(e)))}t.containsDeleteBranchCommand=a,t.branchTask=function(e){const t=a(e),i=["branch",...e];return 1===i.length&&i.push("-a"),i.includes("-v")||i.splice(1,0,"-v"),{format:"utf-8",commands:i,parser:(e,i)=>t?r.parseBranchDeletions(e,i).all[0]:s.parseBranchSummary(e)}},t.branchLocalTask=function(){return{format:"utf-8",commands:["branch","-v"],parser:s.parseBranchSummary}},t.deleteBranchesTask=function(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser:(e,t)=>r.parseBranchDeletions(e,t),onError({exitCode:e,stdOut:t},i,n,s){if(!r.hasBranchDeletionError(String(i),e))return s(i);n(t)}}},t.deleteBranchTask=function(e,t=!1){const i={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser:(t,i)=>r.parseBranchDeletions(t,i).branches[e],onError({exitCode:e,stdErr:t,stdOut:s},a,l,c){if(!r.hasBranchDeletionError(String(a),e))return c(a);throw new n.GitResponseError(i.parser(o.bufferToString(s),o.bufferToString(t)),String(a))}};return i}},88267:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeWorkingDirectoryTask=void 0;const n=i(91050),r=i(96637);t.changeWorkingDirectoryTask=function(e,t){return r.adhocExecTask((i=>{if(!n.folderExists(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||i).cwd=e}))}},25628:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIgnoreTask=void 0;const n=i(40133);t.checkIgnoreTask=function(e){return{commands:["check-ignore",...e],format:"utf-8",parser:n.parseCheckIgnore}}},76399:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsBareRepoTask=t.checkIsRepoRootTask=t.checkIsRepoTask=t.CheckRepoActions=void 0;const n=i(91050);var r;!function(e){e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root"}(r=t.CheckRepoActions||(t.CheckRepoActions={}));const s=({exitCode:e},t,i,r)=>{if(e===n.ExitCodes.UNCLEAN&&function(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}(t))return i(Buffer.from("false"));r(t)},o=e=>"true"===e.trim();function a(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:s,parser:e=>/^\.(git)?$/.test(e.trim())}}function l(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:s,parser:o}}t.checkIsRepoTask=function(e){switch(e){case r.BARE:return l();case r.IS_REPO_ROOT:return a()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:s,parser:o}},t.checkIsRepoRootTask=a,t.checkIsBareRepoTask=l},48709:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCleanOptionsArray=t.cleanTask=t.cleanWithOptionsTask=t.CleanOptions=t.CONFIG_ERROR_UNKNOWN_OPTION=t.CONFIG_ERROR_MODE_REQUIRED=t.CONFIG_ERROR_INTERACTIVE_MODE=void 0;const n=i(76766),r=i(91050),s=i(96637);var o;t.CONFIG_ERROR_INTERACTIVE_MODE="Git clean interactive mode is not supported",t.CONFIG_ERROR_MODE_REQUIRED='Git clean mode parameter ("n" or "f") is required',t.CONFIG_ERROR_UNKNOWN_OPTION="Git clean unknown option found in: ",function(e){e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d"}(o=t.CleanOptions||(t.CleanOptions={}));const a=new Set(["i",...r.asStringArray(Object.values(o))]);function l(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser:t=>n.cleanSummaryParser(e===o.DRY_RUN,t)}}function c(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:"--interactive"===e}t.cleanWithOptionsTask=function(e,i){const{cleanMode:n,options:r,valid:h}=function(e){let t,i=[],n={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach((e=>{var r;!function(e){return e===o.FORCE||e===o.DRY_RUN}(e)?n.options=n.options&&(r=i[i.length]=`-${e}`,/^-[a-z]$/i.test(r)&&a.has(r.charAt(1))):(t=e,n.cleanMode=!0)})),{cleanMode:t,options:i,valid:n}}(e);return n?h.options?(r.push(...i),r.some(c)?s.configurationErrorTask(t.CONFIG_ERROR_INTERACTIVE_MODE):l(n,r)):s.configurationErrorTask(t.CONFIG_ERROR_UNKNOWN_OPTION+JSON.stringify(e)):s.configurationErrorTask(t.CONFIG_ERROR_MODE_REQUIRED)},t.cleanTask=l,t.isCleanOptionsArray=function(e){return Array.isArray(e)&&e.every((e=>a.has(e)))}},76188:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneMirrorTask=t.cloneTask=void 0;const n=i(96637),r=i(91050);function s(e,t,i){const r=["clone",...i];return"string"==typeof e&&r.push(e),"string"==typeof t&&r.push(t),n.straightThroughStringTask(r)}t.cloneTask=s,t.cloneMirrorTask=function(e,t,i){return r.append(i,"--mirror"),s(e,t,i)}},94024:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commitTask=void 0;const n=i(40952);t.commitTask=function(e,t,i){const r=["commit"];return e.forEach((e=>r.push("-m",e))),r.push(...t,...i),{commands:r,format:"utf-8",parser:n.parseCommitResult}}},73803:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitConfigScope=void 0;const n=i(83426),r=i(91050);var s;!function(e){e.system="system",e.global="global",e.local="local",e.worktree="worktree"}(s=t.GitConfigScope||(t.GitConfigScope={})),t.default=function(){return{addConfig(e,t,...i){return this._runTask(function(e,t,i,n){const r=["config",`--${n}`];return i&&r.push("--add"),r.push(e,t),{commands:r,format:"utf-8",parser:e=>e}}(e,t,!0===i[0],"string"==typeof(n=i[1])&&s.hasOwnProperty(n)?n:s.local),r.trailingFunctionArgument(arguments));var n},listConfig(){return this._runTask({commands:["config","--list","--show-origin","--null"],format:"utf-8",parser:e=>n.configListParser(e)},r.trailingFunctionArgument(arguments))}}}},5062:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffSummaryTask=void 0;const n=i(56188);t.diffSummaryTask=function(e){return{commands:["diff","--stat=4096",...e],format:"utf-8",parser:e=>n.parseDiffResult(e)}}},35644:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTask=void 0;const n=i(4088);t.fetchTask=function(e,t,i){const r=["fetch",...i];return e&&t&&r.push(e,t),{commands:r,format:"utf-8",parser:n.parseFetchResult}}},36100:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashObjectTask=void 0;const n=i(96637);t.hashObjectTask=function(e,t){const i=["hash-object",e];return t&&i.push("-w"),n.straightThroughStringTask(i,!0)}},54186:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTask=void 0;const n=i(93367),r="--bare";t.initTask=function(e=!1,t,i){const s=["init",...i];return e&&!s.includes(r)&&s.splice(1,0,r),{commands:s,format:"utf-8",parser:e=>n.parseInit(s.includes("--bare"),t,e)}}},33693:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logTask=t.parseLogOptions=void 0;const n=i(4688),r=i(91050);var s;!function(e){e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.multiLine=10]="multiLine",e[e.strictDate=11]="strictDate"}(s||(s={})),t.parseLogOptions=function(e={},t=[]){const i=e.splitter||n.SPLITTER,o=e.format||{hash:"%H",date:!1===e.strictDate?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:"%aN",author_email:"%ae"},[a,l]=function(e,t){const i=[],n=[];return Object.keys(e).forEach((t=>{i.push(t),n.push(String(e[t]))})),[i,n.join(t)]}(o,i),c=[],h=[`--pretty=format:${n.START_BOUNDARY}${l}${n.COMMIT_BOUNDARY}`,...t],u=e.n||e["max-count"]||e.maxCount;if(u&&h.push(`--max-count=${u}`),e.from&&e.to){const t=!1!==e.symmetric?"...":"..";c.push(`${e.from}${t}${e.to}`)}return e.file&&c.push("--follow",e.file),r.appendTaskOptions(function(e){const t=Object.assign({},e);return Object.keys(e).forEach((e=>{e in s&&delete t[e]})),t}(e),h),{fields:a,splitter:i,commands:[...h,...c]}},t.logTask=function(e,t,i){return{commands:["log",...i],format:"utf-8",parser:n.createListLogSummaryParser(e,t)}}},21474:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeTask=void 0;const n=i(49009),r=i(70476),s=i(96637);t.mergeTask=function(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(e,t){const i=r.parseMergeResult(e,t);if(i.failed)throw new n.GitResponseError(i);return i}}:s.configurationErrorTask("Git.merge requires at least one option")}},73773:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moveTask=void 0;const n=i(31425),r=i(91050);t.moveTask=function(e,t){return{commands:["mv","-v",...r.asArray(e),t],format:"utf-8",parser:n.parseMoveResult}}},97868:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pullTask=void 0;const n=i(11669);t.pullTask=function(e,t,i){const r=["pull",...i];return e&&t&&r.splice(1,0,e,t),{commands:r,format:"utf-8",parser:(e,t)=>n.parsePullResult(e,t)}}},4721:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pushTask=t.pushTagsTask=void 0;const n=i(47867),r=i(91050);function s(e={},t){const i=["push",...t];return e.branch&&i.splice(1,0,e.branch),e.remote&&i.splice(1,0,e.remote),r.remove(i,"-v"),r.append(i,"--verbose"),r.append(i,"--porcelain"),{commands:i,format:"utf-8",parser:n.parsePushResult}}t.pushTagsTask=function(e={},t){return r.append(t,"--tags"),s(e,t)},t.pushTask=s},94441:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeRemoteTask=t.remoteTask=t.listRemotesTask=t.getRemotesTask=t.addRemoteTask=void 0;const n=i(51089),r=i(96637);t.addRemoteTask=function(e,t,i=[]){return r.straightThroughStringTask(["remote","add",...i,e,t])},t.getRemotesTask=function(e){const t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?n.parseGetRemotesVerbose:n.parseGetRemotes}},t.listRemotesTask=function(e=[]){const t=[...e];return"ls-remote"!==t[0]&&t.unshift("ls-remote"),r.straightThroughStringTask(t)},t.remoteTask=function(e=[]){const t=[...e];return"remote"!==t[0]&&t.unshift("remote"),r.straightThroughStringTask(t)},t.removeRemoteTask=function(e){return r.straightThroughStringTask(["remote","remove",e])}},32337:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResetMode=t.resetTask=t.ResetMode=void 0;const n=i(96637);var r;!function(e){e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep"}(r=t.ResetMode||(t.ResetMode={}));const s=Array.from(Object.values(r));function o(e){return s.includes(e)}t.resetTask=function(e,t){const i=["reset"];return o(e)&&i.push(`--${e}`),i.push(...t),n.straightThroughStringTask(i)},t.getResetMode=function(e){if(o(e))return e;switch(typeof e){case"string":case"undefined":return r.SOFT}}},75368:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stashListTask=void 0;const n=i(4688),r=i(33693);t.stashListTask=function(e={},t){const i=r.parseLogOptions(e),s=n.createListLogSummaryParser(i.splitter,i.fields);return{commands:["stash","list",...i.commands,...t],format:"utf-8",parser:s}}},93054:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statusTask=void 0;const n=i(59763);t.statusTask=function(e){return{format:"utf-8",commands:["status","--porcelain","-b","-u",...e],parser:e=>n.parseStatusSummary(e)}}},88278:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSubModuleTask=t.subModuleTask=t.initSubModuleTask=t.addSubModuleTask=void 0;const n=i(96637);function r(e){const t=[...e];return"submodule"!==t[0]&&t.unshift("submodule"),n.straightThroughStringTask(t)}t.addSubModuleTask=function(e,t){return r(["add",e,t])},t.initSubModuleTask=function(e){return r(["init",...e])},t.subModuleTask=r,t.updateSubModuleTask=function(e){return r(["update",...e])}},26316:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAnnotatedTagTask=t.addTagTask=t.tagListTask=void 0;const n=i(91427);t.tagListTask=function(e=[]){const t=e.some((e=>/^--sort=/.test(e)));return{format:"utf-8",commands:["tag","-l",...e],parser:e=>n.parseTagList(e,t)}},t.addTagTask=function(e){return{format:"utf-8",commands:["tag",e],parser:()=>({name:e})}},t.addAnnotatedTagTask=function(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser:()=>({name:e})}}},96637:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyTask=t.isBufferTask=t.straightThroughBufferTask=t.straightThroughStringTask=t.configurationErrorTask=t.adhocExecTask=t.EMPTY_COMMANDS=void 0;const n=i(66958);t.EMPTY_COMMANDS=[],t.adhocExecTask=function(e){return{commands:t.EMPTY_COMMANDS,format:"empty",parser:e}},t.configurationErrorTask=function(e){return{commands:t.EMPTY_COMMANDS,format:"empty",parser(){throw"string"==typeof e?new n.TaskConfigurationError(e):e}}},t.straightThroughStringTask=function(e,t=!1){return{commands:e,format:"utf-8",parser:e=>t?String(e).trim():e}},t.straightThroughBufferTask=function(e){return{commands:e,format:"buffer",parser:e=>e}},t.isBufferTask=function(e){return"buffer"===e.format},t.isEmptyTask=function(e){return"empty"===e.format||!e.commands.length}},51618:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterHasLength=t.filterFunction=t.filterPlainObject=t.filterStringOrStringArray=t.filterStringArray=t.filterString=t.filterPrimitives=t.filterArray=t.filterType=void 0;const n=i(78032);t.filterType=function(e,t,i){return t(e)?e:arguments.length>2?i:void 0};t.filterArray=e=>Array.isArray(e),t.filterPrimitives=function(e,t){return/number|string|boolean/.test(typeof e)&&(!t||!t.includes(typeof e))};t.filterString=e=>"string"==typeof e;t.filterStringArray=e=>Array.isArray(e)&&e.every(t.filterString);t.filterStringOrStringArray=e=>t.filterString(e)||Array.isArray(e)&&e.every(t.filterString),t.filterPlainObject=function(e){return!!e&&"[object Object]"===n.objectToString(e)},t.filterFunction=function(e){return"function"==typeof e};t.filterHasLength=e=>null!=e&&!"number|boolean|function".includes(typeof e)&&(Array.isArray(e)||"string"==typeof e||"number"==typeof e.length)},42130:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExitCodes=void 0,function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.UNCLEAN=128]="UNCLEAN"}(t.ExitCodes||(t.ExitCodes={}))},91724:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitOutputStreams=void 0;class i{constructor(e,t){this.stdOut=e,this.stdErr=t}asStrings(){return new i(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}t.GitOutputStreams=i},91050:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(51618),t),r(i(42130),t),r(i(91724),t),r(i(67098),t),r(i(38892),t),r(i(95838),t),r(i(9876),t),r(i(78032),t)},67098:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteLineParser=t.LineParser=void 0;class i{constructor(e,t){this.matches=[],this.parse=(e,t)=>(this.resetMatches(),!!this._regExp.every(((t,i)=>this.addMatch(t,i,e(i))))&&!1!==this.useMatches(t,this.prepareMatches())),this._regExp=Array.isArray(e)?e:[e],t&&(this.useMatches=t)}useMatches(e,t){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,i){const n=i&&e.exec(i);return n&&this.pushMatch(t,n),!!n}pushMatch(e,t){this.matches.push(...t.slice(1))}}t.LineParser=i;t.RemoteLineParser=class extends i{addMatch(e,t,i){return/^remote:\s/.test(String(i))&&super.addMatch(e,t,i)}pushMatch(e,t){(e>0||t.length>1)&&super.pushMatch(e,t)}}},38892:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInstanceConfig=void 0;const i={binary:"git",maxConcurrentProcesses:5,config:[]};t.createInstanceConfig=function(...e){const t=process.cwd(),n=Object.assign(Object.assign({baseDir:t},i),...e.filter((e=>"object"==typeof e&&e)));return n.baseDir=n.baseDir||t,n}},95838:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trailingFunctionArgument=t.trailingOptionsArgument=t.getTrailingOptions=t.appendTaskOptions=void 0;const n=i(51618),r=i(78032);function s(e,t=[]){return n.filterPlainObject(e)?Object.keys(e).reduce(((t,i)=>{const r=e[i];return n.filterPrimitives(r,["boolean"])?t.push(i+"="+r):t.push(i),t}),t):t}function o(e){const t=n.filterFunction(r.last(e));return n.filterType(r.last(e,t?1:0),n.filterPlainObject)}t.appendTaskOptions=s,t.getTrailingOptions=function(e,t=0,i=!1){const a=[];for(let i=0,n=t<0?e.length:t;i<n;i++)"string|number".includes(typeof e[i])&&a.push(String(e[i]));return s(o(e),a),i||a.push(...function(e){const t="function"==typeof r.last(e);return n.filterType(r.last(e,t?1:0),n.filterArray,[])}(e)),a},t.trailingOptionsArgument=o,t.trailingFunctionArgument=function(e,t=!0){const i=r.asFunction(r.last(e));return t||r.isUserFunction(i)?i:void 0}},9876:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringResponse=t.callTaskParser=void 0;const n=i(78032);t.callTaskParser=function(e,t){return e(t.stdOut,t.stdErr)},t.parseStringResponse=function(e,t,...i){return i.forEach((i=>{for(let r=n.toLinesWithContent(i),s=0,o=r.length;s<o;s++){const i=(e=0)=>{if(!(s+e>=o))return r[s+e]};t.some((({parse:t})=>t(i,e)))}})),e}},78032:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pick=t.bufferToString=t.prefixedArray=t.asNumber=t.asStringArray=t.asArray=t.objectToString=t.remove=t.including=t.append=t.folderExists=t.forEachLineWithContent=t.toLinesWithContent=t.last=t.first=t.splitOn=t.isUserFunction=t.asFunction=t.NOOP=void 0;const n=i(21513);function r(e){return!(!e||"number"!=typeof e.length)}function s(e,t=!0,i="\n"){return e.split(i).reduce(((e,i)=>{const n=t?i.trim():i;return n&&e.push(n),e}),[])}function o(e){return Array.isArray(e)?e:[e]}t.NOOP=()=>{},t.asFunction=function(e){return"function"==typeof e?e:t.NOOP},t.isUserFunction=function(e){return"function"==typeof e&&e!==t.NOOP},t.splitOn=function(e,t){const i=e.indexOf(t);return i<=0?[e,""]:[e.substr(0,i),e.substr(i+1)]},t.first=function(e,t=0){return r(e)&&e.length>t?e[t]:void 0},t.last=function(e,t=0){if(r(e)&&e.length>t)return e[e.length-1-t]},t.toLinesWithContent=s,t.forEachLineWithContent=function(e,t){return s(e,!0).map((e=>t(e)))},t.folderExists=function(e){return n.exists(e,n.FOLDER)},t.append=function(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t},t.including=function(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e},t.remove=function(e,t){if(Array.isArray(e)){const i=e.indexOf(t);i>=0&&e.splice(i,1)}else e.delete(t);return t},t.objectToString=Object.prototype.toString.call.bind(Object.prototype.toString),t.asArray=o,t.asStringArray=function(e){return o(e).map(String)},t.asNumber=function(e,t=0){if(null==e)return t;const i=parseInt(e,10);return isNaN(i)?t:i},t.prefixedArray=function(e,t){const i=[];for(let n=0,r=e.length;n<r;n++)i.push(t,e[n]);return i},t.bufferToString=function(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")},t.pick=function(e,t){return Object.assign({},...t.map((t=>t in e?{[t]:e[t]}:{})))}},94633:e=>{function t(e,t){var i=e.length,n=new Array(i),r={},s=i,o=function(e){for(var t=new Map,i=0,n=e.length;i<n;i++){var r=e[i];t.has(r[0])||t.set(r[0],new Set),t.has(r[1])||t.set(r[1],new Set),t.get(r[0]).add(r[1])}return t}(t),a=function(e){for(var t=new Map,i=0,n=e.length;i<n;i++)t.set(e[i],i);return t}(e);for(t.forEach((function(e){if(!a.has(e[0])||!a.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));s--;)r[s]||l(e[s],s,new Set);return n;function l(e,t,s){if(s.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(e){c=""}throw new Error("Cyclic dependency"+c)}if(!a.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!r[t]){r[t]=!0;var h=o.get(e)||new Set;if(t=(h=Array.from(h)).length){s.add(e);do{var u=h[--t];l(u,a.get(u),s)}while(t);s.delete(e)}n[--i]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,i=0,n=e.length;i<n;i++){var r=e[i];t.add(r[0]),t.add(r[1])}return Array.from(t)}(e),e)},e.exports.array=t},93963:(e,t,i)=>{"use strict";var n=i(86536),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?o:a[e.$$typeof]||r}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=o;var c=Object.defineProperty,h=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,i,n){if("string"!=typeof i){if(p){var r=f(i);r&&r!==p&&e(t,r,n)}var o=h(i);u&&(o=o.concat(u(i)));for(var a=l(t),g=l(i),m=0;m<o.length;++m){var b=o[m];if(!(s[b]||n&&n[b]||g&&g[b]||a&&a[b])){var v=d(i,b);try{c(t,b,v)}catch(e){}}}}return t}},10373:(e,t)=>{"use strict";var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,r=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,o=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,b=i?Symbol.for("react.block"):60121,v=i?Symbol.for("react.fundamental"):60117,y=i?Symbol.for("react.responder"):60118,_=i?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case h:case u:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case m:case g:case l:return e;default:return t}}case r:return t}}}function S(e){return w(e)===u}t.AsyncMode=h,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=d,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=r,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||w(e)===h},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===s},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===r},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===a||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===y||e.$$typeof===_||e.$$typeof===b)},t.typeOf=w},86536:(e,t,i)=>{"use strict";e.exports=i(10373)},63129:e=>{"use strict";e.exports=require("child_process")},58933:e=>{"use strict";e.exports=require("electron")},35747:e=>{"use strict";e.exports=require("fs")},85622:e=>{"use strict";e.exports=require("path")},92184:e=>{"use strict";e.exports=require("vm")}},t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}return i.c=t,i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i(81486),i(35666),i(90396)})();